"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(it,we,N)=>{N.d(we,{Dh:()=>Oe,GT:()=>pe,cc:()=>Me,on:()=>be,pX:()=>Q,xv:()=>Ne});var d=N(5879),U=N(120);it=N.hmd(it);const R=["ngOnDestroy"],Q=(Te,Ce,Xe,ot={})=>new Proxy(Te,{get:(Y,de)=>Xe.runOutsideAngular(()=>{var X;if(Te[de])return!(null===(X=ot?.spy)||void 0===X)&&X.get&&ot.spy.get(de,Te[de]),Te[de];if(R.indexOf(de)>-1)return()=>{};const he=Ce.toPromise().then(Pe=>{const V=Pe&&Pe[de];return"function"==typeof V?V.bind(Pe):V&&V.then?V.then(ve=>Xe.run(()=>ve)):Xe.run(()=>V)});return new Proxy(()=>{},{get:(Pe,V)=>he[V],apply:(Pe,V,ve)=>he.then(ke=>{var at;const Kt=ke&&ke(...ve);return!(null===(at=ot?.spy)||void 0===at)&&at.apply&&ot.spy.apply(de,ve,Kt),Kt})})})}),pe=(Te,Ce)=>{Ce.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(ot=>{Object.defineProperty(Te.prototype,ot,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,ot))})})};class Ie{constructor(Ce){return Ce}}const Oe=new d.OlP("angularfire2.app.options"),Ne=new d.OlP("angularfire2.app.name");function be(Te,Ce,Xe){const Y="object"==typeof Xe&&Xe||{};Y.name=Y.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const X=U.Z.apps.filter(he=>he&&he.name===Y.name)[0]||Ce.runOutsideAngular(()=>U.Z.initializeApp(Te,Y));try{JSON.stringify(Te)!==JSON.stringify(X.options)&&L("error",`${X.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(X)}const L=(Te,...Ce)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Te](...Ce)};function Me(Te,Ce,Xe,ot,Y){const[,de,X]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Te)||[];if(de)return function Se(Te,Ce){try{return Te.toString()===Ce.toString()}catch{return Te===Ce}}(Y,X)||(_e("error",`${Ce} was already initialized on the ${Xe} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Y,was:X})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Te,he,Y]),he}}const Ye=!!it.hot,_e=(Te,...Ce)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Te](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(it,we,N)=>{N.d(we,{$:()=>ud,A:()=>H,D:()=>Se,I:()=>Kl,J:()=>ka,L:()=>Ve,N:()=>Lt,P:()=>pn,Q:()=>Ho,R:()=>rp,U:()=>Nf,V:()=>yo,W:()=>qi,X:()=>fs,Y:()=>rd,Z:()=>id,_:()=>Ua,a:()=>lc,a0:()=>fI,a1:()=>In,a2:()=>vS,a3:()=>wS,a4:()=>sy,a5:()=>Us,a6:()=>Ba,a7:()=>ld,a8:()=>dd,a9:()=>oy,aA:()=>V,aB:()=>ea,aC:()=>st,aD:()=>Ln,aE:()=>qs,aF:()=>Qa,aG:()=>Gs,aH:()=>wn,aL:()=>Ha,aO:()=>hi,aa:()=>Lf,ab:()=>ay,ac:()=>Uf,ad:()=>cy,ae:()=>ic,af:()=>ly,ai:()=>gI,aj:()=>IS,ak:()=>hy,an:()=>sd,ao:()=>$a,aq:()=>vd,ar:()=>cc,as:()=>ke,at:()=>qe,au:()=>ge,av:()=>Y,aw:()=>pi,ax:()=>Pd,ay:()=>zt,az:()=>de,b:()=>Ed,c:()=>pr,d:()=>pc,e:()=>_o,f:()=>mc,g:()=>zr,h:()=>en,i:()=>Zi,j:()=>Ty,k:()=>bs,l:()=>ip,m:()=>na,o:()=>To,p:()=>Ne,r:()=>lt,s:()=>xr,u:()=>Or});var d=N(5861),U=N(9058),R=N(7592),Q=N(7582),pe=N(7879),Ie=N(4537);const Ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new pe.Yd("@firebase/auth");function ot(w,...p){Ce.logLevel<=pe.in.ERROR&&Ce.error(`Auth (${R.SDK_VERSION}): ${w}`,...p)}function Y(w,...p){throw Pe(w,...p)}function de(w,...p){return Pe(w,...p)}function X(w,p,m){const I=Object.assign(Object.assign({},Ye()),{[p]:m});return new U.LL("auth","Firebase",I).create(p,{appName:w.name})}function he(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Y(w,"argument-error"),X(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(w,...p){if("string"!=typeof w){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(m,...I)}return _e.create(w,...p)}function V(w,p,...m){if(!w)throw Pe(p,...m)}function ve(w){const p="INTERNAL ASSERTION FAILED: "+w;throw ot(p),new Error(p)}function ke(w,p){w||ve(p)}function at(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Kt(){return"http:"===bn()||"https:"===bn()}function bn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class sn{constructor(p,m){this.shortDelay=p,this.longDelay=m,ke(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function fn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wr(w,p){ke(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ee{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new sn(3e4,6e4);function te(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function fe(w,p,m,I){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(w,p,m,I,T={}){return Ke(w,T,(0,d.Z)(function*(){let x={},q={};I&&("GET"===p?q=I:x={body:JSON.stringify(I)});const ne=(0,U.xO)(Object.assign({key:w.config.apiKey},q)).slice(1),Re=yield w._getAdditionalHeaders();return Re["Content-Type"]="application/json",w.languageCode&&(Re["X-Firebase-Locale"]=w.languageCode),ee.fetch()($t(w,w.config.apiHost,m,ne),Object.assign({method:p,headers:Re,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Ke(w,p,m){return Le.apply(this,arguments)}function Le(){return(Le=(0,d.Z)(function*(w,p,m){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},se),p);try{const T=new ht(w),x=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const q=yield x.json();if("needConfirmation"in q)throw Yt(w,"account-exists-with-different-credential",q);if(x.ok&&!("errorMessage"in q))return q;{const ne=x.ok?q.errorMessage:q.error.message,[Re,Be]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw Yt(w,"credential-already-in-use",q);if("EMAIL_EXISTS"===Re)throw Yt(w,"email-already-in-use",q);if("USER_DISABLED"===Re)throw Yt(w,"user-disabled",q);const nt=I[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw X(w,nt,Be);Y(w,nt)}}catch(T){if(T instanceof U.ZR)throw T;Y(w,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function nn(w,p,m,I){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(w,p,m,I,T={}){const x=yield fe(w,p,m,I,T);return"mfaPendingCredential"in x&&Y(w,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function $t(w,p,m,I){const T=`${p}${m}?${I}`;return w.config.emulator?wr(w.config,T):`${w.config.apiScheme}://${T}`}class ht{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yt(w,p,m){const I={appName:w.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const T=de(w,p,I);return T.customData._tokenResponse=m,T}function yn(){return(yn=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Wn(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Hi(){return(Hi=(0,d.Z)(function*(w,p=!1){const m=(0,U.m9)(w),I=yield m.getIdToken(p),T=mt(I);V(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,q=x?.sign_in_provider;return{claims:T,token:I,authTime:Wn(dt(T.auth_time)),issuedAtTime:Wn(dt(T.iat)),expirationTime:Wn(dt(T.exp)),signInProvider:q||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[p,m,I]=w.split(".");if(void 0===p||void 0===m||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,U.tV)(m);return T?JSON.parse(T):(ot("Failed to decode base64 JWT payload"),null)}catch(T){return ot("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Jt(w,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof U.ZR&&function Cr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Pt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class _n{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wn(this.lastLoginAt),this.creationTime=Wn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zi(w){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,d.Z)(function*(w){var p;const m=w.auth,I=yield w.getIdToken(),T=yield Jt(w,function Yr(w,p){return Ir.apply(this,arguments)}(m,{idToken:I}));V(T?.users.length,m,"internal-error");const x=T.users[0];w._notifyReloadListener(x);const q=null!==(p=x.providerUserInfo)&&void 0!==p&&p.length?function Ai(w){return w.map(p=>{var{providerId:m}=p,I=(0,Q._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(x.providerUserInfo):[],ne=function vn(w,p){return[...w.filter(I=>!p.some(T=>T.providerId===I.providerId)),...p]}(w.providerData,q),nt=!!w.isAnonymous&&!(w.email&&x.passwordHash||ne?.length),xt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ne,metadata:new _n(x.createdAt,x.lastLoginAt),isAnonymous:nt};Object.assign(w,xt)}),Ht.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(w){const p=(0,U.m9)(w);yield zi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(w,p){const m=yield Ke(w,{},(0,d.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:x}=w.config,q=$t(w,T,"/v1/token",`key=${x}`),ne=yield w._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",ee.fetch()(q,{method:"POST",headers:ne,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Zn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){V(p.idToken,"internal-error"),V(typeof p.idToken<"u","internal-error"),V(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function St(w){const p=mt(w);return V(p,"internal-error"),V(typeof p.exp<"u","internal-error"),V(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,d.Z)(function*(){return V(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:q}=yield function Gi(w,p){return Mi.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(T,x,Number(q))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:T,expirationTime:x}=m,q=new Zn;return I&&(V("string"==typeof I,"internal-error",{appName:p}),q.refreshToken=I),T&&(V("string"==typeof T,"internal-error",{appName:p}),q.accessToken=T),x&&(V("number"==typeof x,"internal-error",{appName:p}),q.expirationTime=x),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Zn,this.toJSON())}_performRefresh(){return ve("not implemented")}}function je(w,p){V("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class me{constructor(p){var{uid:m,auth:I,stsTokenManager:T}=p,x=(0,Q._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new _n(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const I=yield Jt(m,m.stsTokenManager.getToken(m.auth,p));return V(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function Er(w){return Hi.apply(this,arguments)}(this,p)}reload(){return function Rs(w){return Ft.apply(this,arguments)}(this)}_assign(p){this!==p&&(V(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new me(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,d.Z)(function*(){let T=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield zi(I)),yield I.auth._persistUserIfCurrent(I),T&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield Jt(p,function Dn(w,p){return yn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,T,x,q,ne,Re,Be,nt;const xt=null!==(I=m.displayName)&&void 0!==I?I:void 0,gr=null!==(T=m.email)&&void 0!==T?T:void 0,gi=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Ds=null!==(q=m.photoURL)&&void 0!==q?q:void 0,mp=null!==(ne=m.tenantId)&&void 0!==ne?ne:void 0,tu=null!==(Re=m._redirectEventId)&&void 0!==Re?Re:void 0,So=null!==(Be=m.createdAt)&&void 0!==Be?Be:void 0,Ao=null!==(nt=m.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Sc,emailVerified:nu,isAnonymous:mi,providerData:sa,stsTokenManager:Ts}=m;V(Sc&&Ts,p,"internal-error");const ru=Zn.fromJSON(this.name,Ts);V("string"==typeof Sc,p,"internal-error"),je(xt,p.name),je(gr,p.name),V("boolean"==typeof nu,p,"internal-error"),V("boolean"==typeof mi,p,"internal-error"),je(gi,p.name),je(Ds,p.name),je(mp,p.name),je(tu,p.name),je(So,p.name),je(Ao,p.name);const Js=new me({uid:Sc,auth:p,email:gr,emailVerified:nu,displayName:xt,isAnonymous:mi,photoURL:Ds,phoneNumber:gi,tenantId:mp,stsTokenManager:ru,createdAt:So,lastLoginAt:Ao});return sa&&Array.isArray(sa)&&(Js.providerData=sa.map(Ac=>Object.assign({},Ac))),tu&&(Js._redirectEventId=tu),Js}static _fromIdTokenResponse(p,m,I=!1){return(0,d.Z)(function*(){const T=new Zn;T.updateFromServerResponse(m);const x=new me({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:I});return yield zi(x),x})()}}const Qe=new Map;function st(w){ke(w instanceof Function,"Expected a class definition");let p=Qe.get(w);return p?(ke(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Qe.set(w,p),p)}const Lt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,I){var T=this;return(0,d.Z)(function*(){T.storage[m]=I})()}_get(m){var I=this;return(0,d.Z)(function*(){const T=I.storage[m];return void 0===T?null:T})()}_remove(m){var I=this;return(0,d.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return w.type="NONE",w})();function Ln(w,p,m){return`firebase:${w}:${p}:${m}`}class j{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:T,name:x}=this.auth;this.fullUserKey=Ln(this.userKey,T.apiKey,x),this.fullPersistenceKey=Ln("persistence",T.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?me._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,d.Z)(function*(){if(!m.length)return new j(st(Lt),p,I);const T=(yield Promise.all(m.map(function(){var Be=(0,d.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let x=T[0]||st(Lt);const q=Ln(I,p.config.apiKey,p.name);let ne=null;for(const Be of m)try{const nt=yield Be._get(q);if(nt){const xt=me._fromJSON(p,nt);Be!==x&&(ne=xt),x=Be;break}}catch{}const Re=T.filter(Be=>Be._shouldAllowMigration);return x._shouldAllowMigration&&Re.length?(x=Re[0],ne&&(yield x._set(q,ne.toJSON())),yield Promise.all(m.map(function(){var Be=(0,d.Z)(function*(nt){if(nt!==x)try{yield nt._remove(q)}catch{}});return function(nt){return Be.apply(this,arguments)}}())),new j(x,p,I)):new j(x,p,I)})()}}function B(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(W(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(O(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ue(p))return"Blackberry";if(_t(p))return"Webos";if(P(p))return"Safari";if((p.includes("chrome/")||M(p))&&!p.includes("edge/"))return"Chrome";if(ge(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,U.z$)()){return/firefox\//i.test(w)}function P(w=(0,U.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function M(w=(0,U.z$)()){return/crios\//i.test(w)}function W(w=(0,U.z$)()){return/iemobile/i.test(w)}function ge(w=(0,U.z$)()){return/android/i.test(w)}function Ue(w=(0,U.z$)()){return/blackberry/i.test(w)}function _t(w=(0,U.z$)()){return/webos/i.test(w)}function qe(w=(0,U.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function zt(w=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Mt(w=(0,U.z$)()){return qe(w)||ge(w)||_t(w)||Ue(w)||/windows phone/i.test(w)||W(w)}function Oa(w,p=[]){let m;switch(w){case"Browser":m=B((0,U.z$)());break;case"Worker":m=`${B((0,U.z$)())}-${w}`;break;default:m=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${I}`}function ks(){return(ks=(0,d.Z)(function*(w){return(yield fe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function as(w,p){return di.apply(this,arguments)}function di(){return(di=(0,d.Z)(function*(w,p){return fe(w,"GET","/v2/recaptchaConfig",te(w,p))})).apply(this,arguments)}function jt(w){return void 0!==w&&void 0!==w.getResponse}function go(w){return void 0!==w&&void 0!==w.enterprise}class Bo{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function zu(w){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=T=>{const x=de("internal-error");x.customData=T,m(x)},I.type="text/javascript",I.charset="UTF-8",function Hu(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function us(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Pa{constructor(p){this.type="recaptcha-enterprise",this.auth=wn(p)}verify(p="verify",m=!1){var I=this;return(0,d.Z)(function*(){function x(){return x=(0,d.Z)(function*(ne){if(!m){if(null==ne.tenantId&&null!=ne._agentRecaptchaConfig)return ne._agentRecaptchaConfig.siteKey;if(null!=ne.tenantId&&void 0!==ne._tenantRecaptchaConfigs[ne.tenantId])return ne._tenantRecaptchaConfigs[ne.tenantId].siteKey}return new Promise(function(){var Re=(0,d.Z)(function*(Be,nt){as(ne,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(xt=>{if(void 0!==xt.recaptchaKey){const gr=new Bo(xt);return null==ne.tenantId?ne._agentRecaptchaConfig=gr:ne._tenantRecaptchaConfigs[ne.tenantId]=gr,Be(gr.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(xt=>{nt(xt)})});return function(Be,nt){return Re.apply(this,arguments)}}())}),x.apply(this,arguments)}function q(ne,Re,Be){const nt=window.grecaptcha;go(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(ne,{action:p}).then(xt=>{Re(xt)}).catch(()=>{Re("NO_RECAPTCHA")})}):Be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ne,Re)=>{(function T(ne){return x.apply(this,arguments)})(I.auth).then(Be=>{if(!m&&go(window.grecaptcha))q(Be,ne,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));zu("https://www.google.com/recaptcha/enterprise.js?render="+Be).then(()=>{q(Be,ne,Re)}).catch(nt=>{Re(nt)})}}).catch(Be=>{Re(Be)})})})()}}function cs(w,p,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(w,p,m,I=!1){const T=new Pa(w);let x;try{x=yield T.verify(m)}catch{x=yield T.verify(m,!0)}const q=Object.assign({},p);return Object.assign(q,I?{captchaResp:x}:{captchaResponse:x}),Object.assign(q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),q})).apply(this,arguments)}class Ra{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=x=>new Promise((q,ne)=>{try{q(p(x))}catch(Re){ne(Re)}});I.onAbort=m,this.queue.push(I);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const T of m.queue)yield T(p),T.onAbort&&I.push(T.onAbort)}catch(T){I.reverse();for(const x of I)try{x()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class qu{constructor(p,m,I,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wm(this),this.idTokenSubscription=new Wm(this),this.beforeStateQueue=new Ra(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=st(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,x;if(!I._deleted&&(I.persistenceManager=yield j.create(I,p),!I._deleted)){if(null!==(T=I._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(x=I.currentUser)||void 0===x?void 0:x.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var I;const T=yield m.assertedPersistence.getCurrentUser();let x=T,q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ne=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,Re=x?._redirectEventId,Be=yield m.tryRedirectSignIn(p);(!ne||ne===Re)&&Be?.user&&(x=Be.user,q=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(x)}catch(ne){x=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ne))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return V(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield zi(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function gn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const I=p?(0,U.m9)(p):null;return I&&V(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return p&&V(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(st(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const m=yield as(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Bo(m);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new Pa(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,d.Z)(function*(){const T=yield I.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&st(p)||m._popupRedirectResolver;V(I,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[st(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var I,T;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,T){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return V(q,this,"internal-error"),q.then(()=>x(this.currentUser)),"function"==typeof m?p.addObserver(m,I,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Oa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(I["X-Firebase-Client"]=T);const x=yield p._getAppCheckToken();return x&&(I["X-Firebase-AppCheck"]=x),I})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function Xe(w,...p){Ce.logLevel<=pe.in.WARN&&Ce.warn(`Auth (${R.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function wn(w){return(0,U.m9)(w)}class Wm{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kl(w,p,m){const I=wn(w);V(I._canInitEmulator,I,"emulator-config-failed"),V(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const T=!!m?.disableWarnings,x=jr(p),{host:q,port:ne}=function Yl(w){const p=jr(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(I);if(T){const x=T[1];return{host:x,port:Ql(I.substr(x.length+1))}}{const[x,q]=I.split(":");return{host:x,port:Ql(q)}}}(p);I.config.emulator={url:`${x}//${q}${null===ne?"":`:${ne}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:q,port:ne,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Km(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function jr(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Ql(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class ka{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(p){return ve("not implemented")}_linkToIdToken(p,m){return ve("not implemented")}_getReauthenticationResolver(p){return ve("not implemented")}}function Jl(w,p){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:resetPassword",te(w,p))})).apply(this,arguments)}function xf(w,p){return Of.apply(this,arguments)}function Of(){return(Of=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:update",te(w,p))})).apply(this,arguments)}function Wu(w,p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithPassword",te(w,p))})).apply(this,arguments)}function Zu(w,p){return ed.apply(this,arguments)}function ed(){return(ed=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:sendOobCode",te(w,p))})).apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(w,p){return Zu(w,p)})).apply(this,arguments)}function Yu(w,p){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,d.Z)(function*(w,p){return Zu(w,p)})).apply(this,arguments)}function Ju(w,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(w,p){return Zu(w,p)})).apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(w,p){return Zu(w,p)})).apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithEmailLink",te(w,p))})).apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithEmailLink",te(w,p))})).apply(this,arguments)}class Fs extends ka{constructor(p,m,I,T=null){super("password",I),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new Fs(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Fs(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){var I;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const x=yield cs(p,T,"signInWithPassword");return Wu(p,x)}return Wu(p,T).catch(function(){var x=(0,d.Z)(function*(q){if("auth/missing-recaptcha-token"===q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ne=yield cs(p,T,"signInWithPassword");return Wu(p,ne)}return Promise.reject(q)});return function(q){return x.apply(this,arguments)}}());case"emailLink":return function $o(w,p){return br.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Y(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return xf(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Pf(w,p){return Xu.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Y(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ls(w,p){return nd.apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithIdp",te(w,p))})).apply(this,arguments)}class Ve extends ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ve(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Y("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:T}=m,x=(0,Q._T)(m,["providerId","signInMethod"]);if(!I||!T)return null;const q=new Ve(I,T);return q.idToken=x.idToken||void 0,q.accessToken=x.accessToken||void 0,q.secret=x.secret,q.nonce=x.nonce,q.pendingToken=x.pendingToken||null,q}_getIdTokenResponse(p){return ls(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,ls(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ls(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function an(){return(an=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:sendVerificationCode",te(w,p))})).apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",te(w,p))})).apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(w,p){const m=yield nn(w,"POST","/v1/accounts:signInWithPhoneNumber",te(w,p));if(m.temporaryProof)throw Yt(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Sn={USER_NOT_FOUND:"user-not-found"};function Ls(){return(Ls=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",te(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Sn)})).apply(this,arguments)}class ft extends ka{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ft({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ft({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Jr(w,p){return ds.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function rr(w,p){return mo.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function hs(w,p){return Ls.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:T,temporaryProof:x}=p;return I||m||T||x?new ft({verificationId:m,verificationCode:I,phoneNumber:T,temporaryProof:x}):null}}class Xr{constructor(p){var m,I,T,x,q,ne;const Re=(0,U.zd)((0,U.pd)(p)),Be=null!==(m=Re.apiKey)&&void 0!==m?m:null,nt=null!==(I=Re.oobCode)&&void 0!==I?I:null,xt=function Fa(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Re.mode)&&void 0!==T?T:null);V(Be&&nt&&xt,"argument-error"),this.apiKey=Be,this.operation=xt,this.code=nt,this.continueUrl=null!==(x=Re.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(q=Re.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ne=Re.tenantId)&&void 0!==ne?ne:null}static parseLink(p){const m=function Ym(w){const p=(0,U.zd)((0,U.pd)(w)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(w)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||m||p||w}(p);try{return new Xr(m)}catch{return null}}}let Ho=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,I){return Fs._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const T=Xr.parseLink(I);return V(T,"argument-error"),Fs._fromEmailAndCode(m,T.code,T.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ei{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Dr extends ei{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class fs extends Dr{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return V("providerId"in m&&"signInMethod"in m,"argument-error"),Ve._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return V(p.idToken||p.accessToken,"argument-error"),Ve._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return fs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return fs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:T,pendingToken:x,nonce:q,providerId:ne}=p;if(!I&&!T&&!m&&!x||!ne)return null;try{return new fs(ne)._credential({idToken:m,accessToken:I,nonce:q,pendingToken:x})}catch{return null}}}let Nf=(()=>{class w extends Dr{constructor(){super("facebook.com")}static credential(m){return Ve._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),yo=(()=>{class w extends Dr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Ve._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:T}=m;if(!I&&!T)return null;try{return w.credential(I,T)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),qi=(()=>{class w extends Dr{constructor(){super("github.com")}static credential(m){return Ve._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class hi extends ka{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ls(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,ls(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ls(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:T,pendingToken:x}=m;return I&&T&&x&&I===T?new hi(I,x):null}static _create(p,m){return new hi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rd extends ei{constructor(p){V(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return rd.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return rd.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=hi.fromJSON(p);return V(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return hi._create(I,m)}catch{return null}}}let id=(()=>{class w extends Dr{constructor(){super("twitter.com")}static credential(m,I){return Ve._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:T}=m;if(!I||!T)return null;try{return w.credential(I,T)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function La(w,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signUp",te(w,p))})).apply(this,arguments)}class Sr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,T=!1){return(0,d.Z)(function*(){const x=yield me._fromIdTokenResponse(p,I,T),q=zo(I);return new Sr({user:x,providerId:q,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const T=zo(I);return new Sr({user:p,providerId:T,_tokenResponse:I,operationType:m})})()}}function zo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Ua(w){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(w){var p;const m=wn(w);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Sr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield La(m,{returnSecureToken:!0}),T=yield Sr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Rf extends U.ZR{constructor(p,m,I,T){var x;super(m.code,m.message),this.operationType=I,this.user=T,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,T){return new Rf(p,m,I,T)}}function $r(w,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Rf._fromErrorAndOperation(w,x,p,I):x})}function fr(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function sd(w,p){return ps.apply(this,arguments)}function ps(){return ps=(0,d.Z)(function*(w,p){const m=(0,U.m9)(w);yield Go(!0,m,p);const{providerUserInfo:I}=yield function Qt(w,p){return Fn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=fr(I||[]);return m.providerData=m.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ps.apply(this,arguments)}function Va(w,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(w,p,m=!1){const I=yield Jt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return Sr._forOperation(w,"link",I)})).apply(this,arguments)}function Go(w,p,m){return od.apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(w,p,m){yield zi(p);const T=!1===w?"provider-already-linked":"no-such-provider";V(fr(p.providerData).has(m)===w,p.auth,T)})).apply(this,arguments)}function kf(w,p){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,d.Z)(function*(w,p,m=!1){const{auth:I}=w,T="reauthenticate";try{const x=yield Jt(w,$r(I,T,p,w),m);V(x.idToken,I,"internal-error");const q=mt(x.idToken);V(q,I,"internal-error");const{sub:ne}=q;return V(w.uid===ne,I,"user-mismatch"),Sr._forOperation(w,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&Y(I,"user-mismatch"),x}})).apply(this,arguments)}function Jm(w,p){return ad.apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(w,p,m=!1){const I="signIn",T=yield $r(w,I,p),x=yield Sr._fromIdTokenResponse(w,I,T);return m||(yield w._updateCurrentUser(x.user)),x})).apply(this,arguments)}function ud(w,p){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,d.Z)(function*(w,p){return Jm(wn(w),p)})).apply(this,arguments)}function fI(w,p){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,d.Z)(function*(w,p){const m=(0,U.m9)(w);return yield Go(!1,m,p.providerId),Va(m,p)})).apply(this,arguments)}function In(w,p){return ey.apply(this,arguments)}function ey(){return(ey=(0,d.Z)(function*(w,p){return kf((0,U.m9)(w),p)})).apply(this,arguments)}function ty(){return(ty=(0,d.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:signInWithCustomToken",te(w,p))})).apply(this,arguments)}function vS(w,p){return ny.apply(this,arguments)}function ny(){return ny=(0,d.Z)(function*(w,p){const m=wn(w),I=yield function _S(w,p){return ty.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield Sr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(T.user),T}),ny.apply(this,arguments)}class cd{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ry._fromServerResponse(p,m):"totpInfo"in m?tc._fromServerResponse(p,m):Y(p,"internal-error")}}class ry extends cd{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ry(m)}}class tc extends cd{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new tc(m)}}function qo(w,p,m){var I;V((null===(I=m.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),V(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(V(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(V(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function wS(w,p,m){return iy.apply(this,arguments)}function iy(){return iy=(0,d.Z)(function*(w,p,m){var I;const T=wn(w),x={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=T._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const q=yield cs(T,x,"getOobCode",!0);m&&qo(T,q,m),yield Yu(T,q)}else m&&qo(T,x,m),yield Yu(T,x).catch(function(){var q=(0,d.Z)(function*(ne){if("auth/missing-recaptcha-token"!==ne.code)return Promise.reject(ne);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Re=yield cs(T,x,"getOobCode",!0);m&&qo(T,Re,m),yield Yu(T,Re)}});return function(ne){return q.apply(this,arguments)}}())}),iy.apply(this,arguments)}function sy(w,p,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(w,p,m){yield Jl((0,U.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Us(w,p){return nc.apply(this,arguments)}function nc(){return nc=(0,d.Z)(function*(w,p){yield function hI(w,p){return Qr.apply(this,arguments)}((0,U.m9)(w),{oobCode:p})}),nc.apply(this,arguments)}function Ba(w,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(w,p){const m=(0,U.m9)(w),I=yield Jl(m,{oobCode:p}),T=I.requestType;switch(V(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(I.mfaInfo,m,"internal-error");default:V(I.email,m,"internal-error")}let x=null;return I.mfaInfo&&(x=cd._fromServerResponse(wn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function ld(w,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(w,p){const{data:m}=yield Ba((0,U.m9)(w),p);return m.email})).apply(this,arguments)}function dd(w,p,m){return hd.apply(this,arguments)}function hd(){return hd=(0,d.Z)(function*(w,p,m){var I;const T=wn(w),x={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let q;if(null!==(I=T._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Be=yield cs(T,x,"signUpPassword");q=La(T,Be)}else q=La(T,x).catch(function(){var Be=(0,d.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const xt=yield cs(T,x,"signUpPassword");return La(T,xt)}return Promise.reject(nt)});return function(nt){return Be.apply(this,arguments)}}());const ne=yield q.catch(Be=>Promise.reject(Be)),Re=yield Sr._fromIdTokenResponse(T,"signIn",ne);return yield T._updateCurrentUser(Re.user),Re}),hd.apply(this,arguments)}function oy(w,p,m){return ud((0,U.m9)(w),Ho.credential(p,m))}function Lf(w,p,m){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,d.Z)(function*(w,p,m){var I;const T=wn(w),x={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function q(ne,Re){V(Re.handleCodeInApp,T,"argument-error"),Re&&qo(T,ne,Re)}if(null!==(I=T._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ne=yield cs(T,x,"getOobCode",!0);q(ne,m),yield Ju(T,ne)}else q(x,m),yield Ju(T,x).catch(function(){var ne=(0,d.Z)(function*(Re){if("auth/missing-recaptcha-token"!==Re.code)return Promise.reject(Re);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Be=yield cs(T,x,"getOobCode",!0);q(Be,m),yield Ju(T,Be)}});return function(Re){return ne.apply(this,arguments)}}())}),Wo.apply(this,arguments)}function ay(w,p){const m=Xr.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function Uf(w,p,m){return rc.apply(this,arguments)}function rc(){return(rc=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w),T=Ho.credentialWithLink(p,m||at());return V(T._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ud(I,T)})).apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:createAuthUri",te(w,p))})).apply(this,arguments)}function cy(w,p){return ja.apply(this,arguments)}function ja(){return ja=(0,d.Z)(function*(w,p){const I={identifier:p,continueUri:Kt()?at():"http://localhost"},{signinMethods:T}=yield function uy(w,p){return fd.apply(this,arguments)}((0,U.m9)(w),I);return T||[]}),ja.apply(this,arguments)}function ic(w,p){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,d.Z)(function*(w,p){const m=(0,U.m9)(w),T={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&qo(m.auth,T,p);const{email:x}=yield function Ku(w,p){return td.apply(this,arguments)}(m.auth,T);x!==w.email&&(yield w.reload())}),Vs.apply(this,arguments)}function ly(w,p,m){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&qo(I.auth,x,m);const{email:q}=yield function tr(w,p){return nr.apply(this,arguments)}(I.auth,x);q!==w.email&&(yield w.reload())}),Vf.apply(this,arguments)}function dy(){return(dy=(0,d.Z)(function*(w,p){return fe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function gI(w,p){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,d.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,U.m9)(w),x={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},q=yield Jt(I,function pI(w,p){return dy.apply(this,arguments)}(I.auth,x));I.displayName=q.displayName||null,I.photoURL=q.photoUrl||null;const ne=I.providerData.find(({providerId:Re})=>"password"===Re);ne&&(ne.displayName=I.displayName,ne.photoURL=I.photoURL),yield I._updateTokensIfNecessary(q)}),Bf.apply(this,arguments)}function IS(w,p){return pd((0,U.m9)(w),p,null)}function hy(w,p){return pd((0,U.m9)(w),null,p)}function pd(w,p,m){return jf.apply(this,arguments)}function jf(){return(jf=(0,d.Z)(function*(w,p,m){const{auth:I}=w,x={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(x.email=p),m&&(x.password=m);const q=yield Jt(w,xf(I,x));yield w._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class sc{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class mI extends sc{constructor(p,m,I,T){super(p,m,I),this.username=T}}class oc extends sc{constructor(p,m){super(p,"facebook.com",m)}}class fy extends mI{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Hf extends sc{constructor(p,m){super(p,"google.com",m)}}class gd extends mI{constructor(p,m,I){super(p,"twitter.com",m,I)}}function $a(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function $f(w){var p,m;if(!w)return null;const{providerId:I}=w,T=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},x=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const q=null===(m=null===(p=mt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new sc(x,"anonymous"!==q&&"custom"!==q?q:null)}if(!I)return null;switch(I){case"facebook.com":return new oc(x,T);case"github.com":return new fy(x,T);case"google.com":return new Hf(x,T);case"twitter.com":return new gd(x,T,w.screenName||null);case"custom":case"anonymous":return new sc(x,null);default:return new sc(x,I,T)}}(m)}class ms{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new ms("enroll",p,m)}static _fromMfaPendingCredential(p){return new ms("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ms._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return ms._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Zo{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=wn(p),T=m.customData._serverResponse,x=(T.mfaInfo||[]).map(ne=>cd._fromServerResponse(I,ne));V(T.mfaPendingCredential,I,"internal-error");const q=ms._fromMfaPendingCredential(T.mfaPendingCredential);return new Zo(q,x,function(){var ne=(0,d.Z)(function*(Re){const Be=yield Re._process(I,q);delete T.mfaInfo,delete T.mfaPendingCredential;const nt=Object.assign(Object.assign({},T),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(m.operationType){case"signIn":const xt=yield Sr._fromIdTokenResponse(I,m.operationType,nt);return yield I._updateCurrentUser(xt.user),xt;case"reauthenticate":return V(m.user,I,"internal-error"),Sr._forOperation(m.user,m.operationType,nt);default:Y(I,"internal-error")}});return function(Re){return ne.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function vd(w,p){var m;const I=(0,U.m9)(w),T=p;return V(p.customData.operationType,I,"argument-error"),V(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Zo._fromError(I,T)}class uc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>cd._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new uc(p)}getSession(){var p=this;return(0,d.Z)(function*(){return ms._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,d.Z)(function*(){const T=p,x=yield I.getSession(),q=yield Jt(I.user,T._process(I.user.auth,x,m));return yield I.user._updateTokensIfNecessary(q),I.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const I="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const x=yield Jt(m.user,function Gf(w,p){return fe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",te(w,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:q})=>q!==I),yield m.user._updateTokensIfNecessary(x),yield m.user.reload()}catch(x){throw x}})()}}const Xt=new WeakMap;function cc(w){const p=(0,U.m9)(w);return Xt.has(p)||Xt.set(p,uc._fromUser(p)),Xt.get(p)}const ys="__sak";class Mr{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ys,"1"),this.storage.removeItem(ys),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ed=(()=>{class w extends Mr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wI(){const w=(0,U.z$)();return P(w)||qe(w)}()&&function li(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const T=this.storage.getItem(I),x=this.localCache[I];T!==x&&m(I,x,T)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((ne,Re,Be)=>{this.notifyListeners(ne,Be)});const T=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(T);if(m.newValue!==ne)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!I)return}const x=()=>{const ne=this.storage.getItem(T);!I&&this.localCache[T]===ne||this.notifyListeners(T,ne)},q=this.storage.getItem(T);!function on(){return(0,U.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,I){this.localCache[m]=I;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var T=()=>super._set,x=this;return(0,d.Z)(function*(){yield T().call(x,m,I),x.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,T=this;return(0,d.Z)(function*(){const x=yield I().call(T,m);return T.localCache[m]=JSON.stringify(x),x})()}_remove(m){var I=()=>super._remove,T=this;return(0,d.Z)(function*(){yield I().call(T,m),delete T.localCache[m]})()}}return w.type="LOCAL",w})(),lc=(()=>{class w extends Mr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return w.type="SESSION",w})();let qf=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(x=>x.isListeningto(m));if(I)return I;const T=new w(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,d.Z)(function*(){const T=m,{eventId:x,eventType:q,data:ne}=T.data,Re=I.handlersMap[q];if(!Re?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:q});const Be=Array.from(Re).map(function(){var xt=(0,d.Z)(function*(gr){return gr(T.origin,ne)});return function(gr){return xt.apply(this,arguments)}}()),nt=yield function Bs(w){return Promise.all(w.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(Be);T.ports[0].postMessage({status:"done",eventId:x,eventType:q,response:nt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ha(w="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return w+m}class _y{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var T=this;return(0,d.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let q,ne;return new Promise((Re,Be)=>{const nt=Ha("",20);x.port1.start();const xt=setTimeout(()=>{Be(new Error("unsupported_event"))},I);ne={messageChannel:x,onMessage(gr){const gi=gr;if(gi.data.eventId===nt)switch(gi.data.status){case"ack":clearTimeout(xt),q=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Re(gi.data.response);break;default:clearTimeout(xt),clearTimeout(q),Be(new Error("invalid_response"))}}},T.handlers.add(ne),x.port1.addEventListener("message",ne.onMessage),T.target.postMessage({eventType:p,eventId:nt,data:m},[x.port2])}).finally(()=>{ne&&T.removeMessageHandler(ne)})})()}}function Un(){return window}function Wf(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function dc(){return(dc=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kf="firebaseLocalStorageDb",Yo="firebaseLocalStorage",js="fbase_key";class za{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function bd(w,p){return w.transaction([Yo],p?"readwrite":"readonly").objectStore(Yo)}function Yf(){const w=indexedDB.open(Kf,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Yo,{keyPath:js})}catch(T){m(T)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Yo)?p(I):(I.close(),yield function wy(){const w=indexedDB.deleteDatabase(Kf);return new za(w).toPromise()}(),p(yield Yf()))}))})}function Qf(w,p,m){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(w,p,m){const I=bd(w,!0).put({[js]:p,value:m});return new za(I).toPromise()})).apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(w,p){const m=bd(w,!1).get(p),I=yield new za(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Dd(w,p){const m=bd(w,!0).delete(p);return new za(m).toPromise()}const Zi=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Yf()),m.db})()}_withRetries(m){var I=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const x=yield I._openDb();return yield m(x)}catch(x){if(T++>3)throw x;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Wf()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=qf._getInstance(function Zf(){return Wf()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(T,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(T,x){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var I,T;if(m.activeServiceWorker=yield function yt(){return dc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new _y(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);x&&null!==(I=x[0])&&void 0!==I&&I.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function EI(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Yf();return yield Qf(m,ys,"1"),yield Dd(m,ys),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(x=>Qf(x,m,I)),T.localCache[m]=I,T.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,d.Z)(function*(){const T=yield I._withRetries(x=>function Ut(w,p){return Oi.apply(this,arguments)}(x,m));return I.localCache[m]=T,T})()}_remove(m){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(T=>Dd(T,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const I=yield m._withRetries(q=>{const ne=bd(q,!1).getAll();return new za(ne).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:q,value:ne}of I)x.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(ne)&&(m.notifyListeners(q,ne),T.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!x.has(q)&&(m.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(m,I){this.localCache[m]=I;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),sr=1e12;class $s{constructor(p){this.auth=p,this.counter=sr,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new Cy(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||sr;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||sr))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var I;return null===(I=m._widgets.get(p||sr))||void 0===I||I.execute(),""})()}}class Cy{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;V(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qa(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ki=us("rcb"),CI=new sn(3e4,6e4);class tp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Un().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return V(function bI(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&jt(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((I,T)=>{const x=Un().setTimeout(()=>{T(de(p,"network-request-failed"))},CI.get());Un()[Ki]=()=>{Un().clearTimeout(x),delete Un()[Ki];const ne=Un().grecaptcha;if(!ne||!jt(ne))return void T(de(p,"internal-error"));const Re=ne.render;ne.render=(Be,nt)=>{const xt=Re(Be,nt);return this.counter++,xt},this.hostLanguage=m,I(ne)},zu(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Ki,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),T(de(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class np{load(p){return(0,d.Z)(function*(){return new $s(p)})()}clearedOneInstance(){}}const Td="recaptcha",by={theme:"light",type:"image"};class rp{constructor(p,m=Object.assign({},by),I){this.parameters=m,this.type=Td,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(I),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;V(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new np:new tp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(x=>{const q=ne=>{ne&&(p.tokenChangeListeners.delete(q),x(ne))};p.tokenChangeListeners.add(q),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Un()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){V(Kt()&&!Wf(),p.auth,"internal-error"),yield function DI(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function os(w){return ks.apply(this,arguments)}(p.auth);V(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ft._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function xr(w,p,m){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(w,p,m){const I=wn(w),T=yield fc(I,p,(0,U.m9)(m));return new Sd(T,x=>ud(I,x))})).apply(this,arguments)}function ip(w,p,m){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w);yield Go(!1,I,"phone");const T=yield fc(I.auth,p,(0,U.m9)(m));return new Sd(T,x=>fI(I,x))})).apply(this,arguments)}function lt(w,p,m){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w),T=yield fc(I.auth,p,(0,U.m9)(m));return new Sd(T,x=>In(I,x))})).apply(this,arguments)}function fc(w,p,m){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,d.Z)(function*(w,p,m){var I;const T=yield m.verify();try{let x;if(V("string"==typeof T,w,"argument-error"),V(m.type===Td,w,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const q=x.session;if("phoneNumber"in x)return V("enroll"===q.type,w,"internal-error"),(yield function yy(w,p){return fe(w,"POST","/v2/accounts/mfaEnrollment:start",te(w,p))}(w,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{V("signin"===q.type,w,"internal-error");const ne=(null===(I=x.multiFactorHint)||void 0===I?void 0:I.uid)||x.multiFactorUid;return V(ne,w,"missing-multi-factor-info"),(yield function Jf(w,p){return fe(w,"POST","/v2/accounts/mfaSignIn:start",te(w,p))}(w,{mfaPendingCredential:q.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function Et(w,p){return an.apply(this,arguments)}(w,{phoneNumber:x.phoneNumber,recaptchaToken:T});return q}}finally{m._reset()}}),Ad.apply(this,arguments)}function Or(w,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(w,p){yield Va((0,U.m9)(w),p)})).apply(this,arguments)}let pn=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=wn(m)}verifyPhoneNumber(m,I){return fc(this.auth,m,(0,U.m9)(I))}static credential(m,I){return ft._fromVerification(m,I)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:T}=m;return I&&T?ft._fromTokenResponse(I,T):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Hs(w,p){return p?st(p):(V(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class zs extends ka{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ls(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ls(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ls(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function wt(w){return Jm(w.auth,new zs(w),w.bypassAuthState)}function Dy(w){const{auth:p,user:m}=w;return V(m,p,"internal-error"),kf(m,new zs(w),w.bypassAuthState)}function sp(w){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(w){const{auth:p,user:m}=w;return V(m,p,"internal-error"),Va(m,new zs(w),w.bypassAuthState)})).apply(this,arguments)}class ws{constructor(p,m,I,T,x=!1){this.auth=p,this.resolver=I,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(I,T){p.pendingPromise={resolve:I,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(I,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:T,postBody:x,tenantId:q,error:ne,type:Re}=p;if(ne)return void m.reject(ne);const Be={auth:m.auth,requestUri:I,sessionId:T,tenantId:q||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Re)(Be))}catch(nt){m.reject(nt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return sp;case"reauthViaPopup":case"reauthViaRedirect":return Dy;default:Y(this.auth,"internal-error")}}resolve(p){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Is=new sn(2e3,1e4);function pr(w,p,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(w,p,m){const I=wn(w);he(w,p,ei);const T=Hs(I,m);return new Es(I,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function _o(w,p,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w);he(I.auth,p,ei);const T=Hs(I.auth,m);return new Es(I.auth,"reauthViaPopup",p,T,I).executeNotNull()})).apply(this,arguments)}function pc(w,p,m){return gc.apply(this,arguments)}function gc(){return(gc=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w);he(I.auth,p,ei);const T=Hs(I.auth,m);return new Es(I.auth,"linkViaPopup",p,T,I).executeNotNull()})).apply(this,arguments)}let Es=(()=>{class w extends ws{constructor(m,I,T,x,q){super(m,I,x,q),this.provider=T,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const I=yield m.execute();return V(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,d.Z)(function*(){ke(1===m.filter.length,"Popup operations only handle one event");const I=Ha();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(de(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,T;this.pollId=null!==(T=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Is.get())};m()}}return w.currentPopupAction=null,w})();const Za="pendingRedirect",Yi=new Map;class vo extends ws{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let I=Yi.get(m.auth._key());if(!I){try{const x=(yield function Ka(w,p){return Md.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(x)}catch(T){I=()=>Promise.reject(T)}Yi.set(m.auth._key(),I)}return m.bypassAuthState||Yi.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const T=yield I.auth._redirectUserForId(p.eventId);if(T)return I.user=T,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Md(){return(Md=(0,d.Z)(function*(w,p){const m=xd(p),I=Pr(w);if(!(yield I._isAvailable()))return!1;const T="true"===(yield I._get(m));return yield I._remove(m),T})).apply(this,arguments)}function Ya(w,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(w,p){return Pr(w)._set(xd(p),"true")})).apply(this,arguments)}function Gs(){Yi.clear()}function Qa(w,p){Yi.set(w._key(),p)}function Pr(w){return st(w._redirectPersistence)}function xd(w){return Ln(Za,w.config.apiKey,w.name)}function mc(w,p,m){return function ti(w,p,m){return An.apply(this,arguments)}(w,p,m)}function An(){return(An=(0,d.Z)(function*(w,p,m){const I=wn(w);he(w,p,ei),yield I._initializationPromise;const T=Hs(I,m);return yield Ya(T,I),T._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function en(w,p,m){return function Xo(w,p,m){return ar.apply(this,arguments)}(w,p,m)}function ar(){return(ar=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w);he(I.auth,p,ei),yield I.auth._initializationPromise;const T=Hs(I.auth,m);yield Ya(T,I.auth);const x=yield Pi(I);return T._openRedirect(I.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function zr(w,p,m){return function Ja(w,p,m){return Xa.apply(this,arguments)}(w,p,m)}function Xa(){return(Xa=(0,d.Z)(function*(w,p,m){const I=(0,U.m9)(w);he(I.auth,p,ei),yield I.auth._initializationPromise;const T=Hs(I.auth,m);yield Go(!1,I,p.providerId),yield Ya(T,I.auth);const x=yield Pi(I);return T._openRedirect(I.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function Ty(w,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(w,p){return yield wn(w)._initializationPromise,qs(w,p,!1)})).apply(this,arguments)}function qs(w,p){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(w,p,m=!1){const I=wn(w),T=Hs(I,p),q=yield new vo(I,T,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield I._persistUserIfCurrent(q.user),yield I._setRedirectUser(null,p)),q})).apply(this,arguments)}function Pi(w){return yc.apply(this,arguments)}function yc(){return(yc=(0,d.Z)(function*(w){const p=Ha(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class ea{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Eo(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Od(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Od(p)){const T=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(de(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(op(p))}saveEventToCache(p){this.cachedEventUids.add(op(p)),this.lastProcessedEventTime=Date.now()}}function op(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Od({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Pd(w){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(w,p={}){return fe(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Ct=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ws=/^https?/;function Zs(){return(Zs=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Pd(w);for(const m of p)try{if(ap(m))return}catch{}Y(w,"unauthorized-domain")})).apply(this,arguments)}function ap(w){const p=at(),{protocol:m,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const q=new URL(w);return""===q.hostname&&""===I?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===I}if(!Ws.test(m))return!1;if(Ct.test(w))return I===w;const T=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(I)}const up=new sn(3e4,6e4);function Nr(){const w=Un().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let zn=null;const lp=new sn(5e3,15e3),vc="__/auth/iframe",dp="emulator/auth/iframe",hp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ta(w){const p=w.config;V(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?wr(p,dp):`https://${w.config.authDomain}/${vc}`,I={apiKey:p.apiKey,appName:w.name,v:R.SDK_VERSION},T=wc.get(w.config.apiHost);T&&(I.eid=T);const x=w._getFrameworks();return x.length&&(I.fw=x.join(",")),`${m}?${(0,U.xO)(I).slice(1)}`}function Cs(){return Cs=(0,d.Z)(function*(w){const p=yield function Ks(w){return zn=zn||function cp(w){return new Promise((p,m)=>{var I,T,x;function q(){Nr(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Nr(),m(de(w,"network-request-failed"))},timeout:up.get()})}if(null!==(T=null===(I=Un().gapi)||void 0===I?void 0:I.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(x=Un().gapi)||void 0===x||!x.load){const ne=us("iframefcb");return Un()[ne]=()=>{gapi.load?q():m(de(w,"network-request-failed"))},zu(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Re=>m(Re))}q()}}).catch(p=>{throw zn=null,p})}(w),zn}(w),m=Un().gapi;return V(m,w,"internal-error"),p.open({where:document.body,url:ta(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hp,dontclear:!0},I=>new Promise(function(){var T=(0,d.Z)(function*(x,q){yield I.restyle({setHideOnLeave:!1});const ne=de(w,"network-request-failed"),Re=Un().setTimeout(()=>{q(ne)},lp.get());function Be(){Un().clearTimeout(Re),x(I)}I.ping(Be).then(Be,()=>{q(ne)})});return function(x,q){return T.apply(this,arguments)}}()))}),Cs.apply(this,arguments)}const eu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Do{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fp="__/auth/handler",SI="emulator/auth/handler",Nd=encodeURIComponent("fac");function pi(w,p,m,I,T,x){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(w,p,m,I,T,x){V(w.config.authDomain,w,"auth-domain-config-required"),V(w.config.apiKey,w,"invalid-api-key");const q={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:I,v:R.SDK_VERSION,eventId:T};if(p instanceof ei){p.setDefaultLanguage(w.languageCode),q.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,xt]of Object.entries(x||{}))q[nt]=xt}if(p instanceof Dr){const nt=p.getScopes().filter(xt=>""!==xt);nt.length>0&&(q.scopes=nt.join(","))}w.tenantId&&(q.tid=w.tenantId);const ne=q;for(const nt of Object.keys(ne))void 0===ne[nt]&&delete ne[nt];const Re=yield w._getAppCheckToken(),Be=Re?`#${Nd}=${encodeURIComponent(Re)}`:"";return`${function bc({config:w}){return w.emulator?wr(w,SI):`https://${w.authDomain}/${fp}`}(w)}?${(0,U.xO)(ne).slice(1)}${Be}`})).apply(this,arguments)}const Mn="webStorageSupport",bs=class Rd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lc,this._completeRedirectFn=qs,this._overrideRedirectResult=Qa}_openPopup(p,m,I,T){var x=this;return(0,d.Z)(function*(){var q;ke(null===(q=x.eventManagers[p._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ne=yield pi(p,m,I,at(),T);return function TI(w,p,m,I=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-I)/2,0).toString();let ne="";const Re=Object.assign(Object.assign({},eu),{width:I.toString(),height:T.toString(),top:x,left:q}),Be=(0,U.z$)().toLowerCase();m&&(ne=M(Be)?"_blank":m),O(Be)&&(p=p||"http://localhost",Re.scrollbars="yes");const nt=Object.entries(Re).reduce((gr,[gi,Ds])=>`${gr}${gi}=${Ds},`,"");if(function vt(w=(0,U.z$)()){var p;return qe(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Be)&&"_self"!==ne)return function Ec(w,p){const m=document.createElement("a");m.href=w,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",ne),new Do(null);const xt=window.open(p||"",ne,nt);V(xt,w,"popup-blocked");try{xt.focus()}catch{}return new Do(xt)}(p,ne,Ha())})()}_openRedirect(p,m,I,T){var x=this;return(0,d.Z)(function*(){return yield x._originValidation(p),function Cd(w){Un().location.href=w}(yield pi(p,m,I,at(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:x}=this.eventManagers[m];return T?Promise.resolve(T):(ke(x,"If manager is not set, promise should be"),x)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const I=yield function bo(w){return Cs.apply(this,arguments)}(p),T=new ea(p);return I.register("authEvent",x=>(V(x?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=I,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Mn,{type:Mn},T=>{var x;const q=null===(x=T?.[0])||void 0===x?void 0:x[Mn];void 0!==q&&m(!!q),Y(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Co(w){return Zs.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Mt()||P()||qe()}};class pp{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}class Rr extends pp{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Rr(p)}_finalizeEnroll(p,m,I){return function wd(w,p){return fe(w,"POST","/v2/accounts/mfaEnrollment:finalize",te(w,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Xf(w,p){return fe(w,"POST","/v2/accounts/mfaSignIn:finalize",te(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let na=(()=>{class w{constructor(){}static assertion(m){return Rr._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var My="@firebase/auth";class AI{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xy=(0,U.Pz)("authIdTokenMaxAge")||300;let Tc=null;const Oy=w=>function(){var p=(0,d.Z)(function*(m){const I=m&&(yield m.getIdTokenResult()),T=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(T&&T>xy)return;const x=I?.token;Tc!==x&&(Tc=x,yield fetch(w,{method:x?"POST":"DELETE",headers:x?{Authorization:`Bearer ${x}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function To(w=(0,R.getApp)()){const p=(0,R._getProvider)(w,"auth");if(p.isInitialized())return p.getImmediate();const m=function xi(w,p){const m=(0,R._getProvider)(w,"auth");if(m.isInitialized()){const T=m.getImmediate(),x=m.getOptions();if((0,U.vZ)(x,p??{}))return T;Y(T,"already-initialized")}return m.initialize({options:p})}(w,{popupRedirectResolver:bs,persistence:[Zi,Ed,lc]}),I=(0,U.Pz)("authTokenSyncURL");if(I){const x=Oy(I);(function zf(w,p,m){(0,U.m9)(w).beforeAuthStateChanged(p,m)})(m,x,()=>x(m.currentUser)),function py(w,p,m,I){(0,U.m9)(w).onIdTokenChanged(p,m,I)}(m,q=>x(q))}const T=(0,U.q4)("auth");return T&&Kl(m,`http://${T}`),m}!function kd(w){(0,R._registerComponent)(new Ie.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),x=p.getProvider("app-check-internal"),{apiKey:q,authDomain:ne}=I.options;V(q&&!q.includes(":"),"invalid-api-key",{appName:I.name});const Re={apiKey:q,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oa(w)},Be=new qu(I,T,x,Re);return function Zm(w,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(st);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,p?.popupRedirectResolver)}(Be,m),Be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new Ie.wA("auth-internal",p=>{const m=wn(p.getProvider("auth").getImmediate());return new AI(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(My,"0.23.2",function ni(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,R.registerVersion)(My,"0.23.2","esm2017")}("Browser")},9058:(it,we,N)=>{N.d(we,{$s:()=>st,BH:()=>X,G6:()=>wr,L:()=>be,LL:()=>xe,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>ve,US:()=>Ie,ZB:()=>K,ZR:()=>fe,aH:()=>Y,b$:()=>Kt,eu:()=>se,hl:()=>ee,jU:()=>ke,m9:()=>Ln,ne:()=>Jt,pd:()=>mt,q4:()=>Xe,r3:()=>Qt,ru:()=>at,tV:()=>L,uI:()=>V,vZ:()=>Wn,w1:()=>fn,xO:()=>Hi,xb:()=>Yr,z$:()=>Pe,zI:()=>oe,zd:()=>dt});const Q=function(j){const B=[];let O=0;for(let P=0;P<j.length;P++){let M=j.charCodeAt(P);M<128?B[O++]=M:M<2048?(B[O++]=M>>6|192,B[O++]=63&M|128):55296==(64512&M)&&P+1<j.length&&56320==(64512&j.charCodeAt(P+1))?(M=65536+((1023&M)<<10)+(1023&j.charCodeAt(++P)),B[O++]=M>>18|240,B[O++]=M>>12&63|128,B[O++]=M>>6&63|128,B[O++]=63&M|128):(B[O++]=M>>12|224,B[O++]=M>>6&63|128,B[O++]=63&M|128)}return B},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,B){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let M=0;M<j.length;M+=3){const W=j[M],ge=M+1<j.length,Ue=ge?j[M+1]:0,_t=M+2<j.length,qe=_t?j[M+2]:0;let on=(15&Ue)<<2|qe>>6,Mt=63&qe;_t||(Mt=64,ge||(on=64)),P.push(O[W>>2],O[(3&W)<<4|Ue>>4],O[on],O[Mt])}return P.join("")},encodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(j):this.encodeByteArray(Q(j),B)},decodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(j):function(j){const B=[];let O=0,P=0;for(;O<j.length;){const M=j[O++];if(M<128)B[P++]=String.fromCharCode(M);else if(M>191&&M<224){const W=j[O++];B[P++]=String.fromCharCode((31&M)<<6|63&W)}else if(M>239&&M<365){const _t=((7&M)<<18|(63&j[O++])<<12|(63&j[O++])<<6|63&j[O++])-65536;B[P++]=String.fromCharCode(55296+(_t>>10)),B[P++]=String.fromCharCode(56320+(1023&_t))}else{const W=j[O++],ge=j[O++];B[P++]=String.fromCharCode((15&M)<<12|(63&W)<<6|63&ge)}}return B.join("")}(this.decodeStringToByteArray(j,B))},decodeStringToByteArray(j,B){this.init_();const O=B?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let M=0;M<j.length;){const W=O[j.charAt(M++)],Ue=M<j.length?O[j.charAt(M)]:0;++M;const qe=M<j.length?O[j.charAt(M)]:64;++M;const vt=M<j.length?O[j.charAt(M)]:64;if(++M,null==W||null==Ue||null==qe||null==vt)throw new Oe;P.push(W<<2|Ue>>4),64!==qe&&(P.push(Ue<<4&240|qe>>2),64!==vt&&P.push(qe<<6&192|vt))}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(j){return function(j){const B=Q(j);return Ie.encodeByteArray(B,!0)}(j).replace(/\./g,"")},L=function(j){try{return Ie.decodeString(j,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function K(j,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return B}for(const O in B)!B.hasOwnProperty(O)||!Me(O)||(j[O]=K(j[O],B[O]));return j}function Me(j){return"__proto__"!==j}const Ce=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=j&&L(j[1]);return B&&JSON.parse(B)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Xe=j=>{var B,O;return null===(O=null===(B=Ce())||void 0===B?void 0:B.emulatorHosts)||void 0===O?void 0:O[j]},ot=j=>{const B=Xe(j);if(!B)return;const O=B.lastIndexOf(":");if(O<=0||O+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const P=parseInt(B.substring(O+1),10);return"["===B[0]?[B.substring(1,O-1),P]:[B.substring(0,O),P]},Y=()=>{var j;return null===(j=Ce())||void 0===j?void 0:j.config},de=j=>{var B;return null===(B=Ce())||void 0===B?void 0:B[`_${j}`]};class X{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,O)=>{this.resolve=B,this.reject=O})}wrapCallback(B){return(O,P)=>{O?this.reject(O):this.resolve(P),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(O):B(O,P))}}}function he(j,B){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const P=B||"demo-project",M=j.iat||0,W=j.sub||j.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ge=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:M,exp:M+3600,auth_time:M,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},j);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(ge)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function ve(){var j;const B=null===(j=Ce())||void 0===j?void 0:j.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ke(){return"object"==typeof self&&self.self===self}function at(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fn(){const j=Pe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function wr(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((j,B)=>{try{let O=!0;const P="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(P);M.onsuccess=()=>{M.result.close(),O||self.indexedDB.deleteDatabase(P),j(!0)},M.onupgradeneeded=()=>{O=!1},M.onerror=()=>{var W;B((null===(W=M.error)||void 0===W?void 0:W.message)||"")}}catch(O){B(O)}})}function oe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fe extends Error{constructor(B,O,P){super(O),this.code=B,this.customData=P,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xe.prototype.create)}}class xe{constructor(B,O,P){this.service=B,this.serviceName=O,this.errors=P}create(B,...O){const P=O[0]||{},M=`${this.service}/${B}`,W=this.errors[B],ge=W?function Ke(j,B){return j.replace(Le,(O,P)=>{const M=B[P];return null!=M?String(M):`<${P}?>`})}(W,P):"Error";return new fe(M,`${this.serviceName}: ${ge} (${M}).`,P)}}const Le=/\{\$([^}]+)}/g;function Qt(j,B){return Object.prototype.hasOwnProperty.call(j,B)}function Yr(j){for(const B in j)if(Object.prototype.hasOwnProperty.call(j,B))return!1;return!0}function Wn(j,B){if(j===B)return!0;const O=Object.keys(j),P=Object.keys(B);for(const M of O){if(!P.includes(M))return!1;const W=j[M],ge=B[M];if(Tn(W)&&Tn(ge)){if(!Wn(W,ge))return!1}else if(W!==ge)return!1}for(const M of P)if(!O.includes(M))return!1;return!0}function Tn(j){return null!==j&&"object"==typeof j}function Hi(j){const B=[];for(const[O,P]of Object.entries(j))Array.isArray(P)?P.forEach(M=>{B.push(encodeURIComponent(O)+"="+encodeURIComponent(M))}):B.push(encodeURIComponent(O)+"="+encodeURIComponent(P));return B.length?"&"+B.join("&"):""}function dt(j){const B={};return j.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[M,W]=P.split("=");B[decodeURIComponent(M)]=decodeURIComponent(W)}}),B}function mt(j){const B=j.indexOf("?");if(!B)return"";const O=j.indexOf("#",B);return j.substring(B,O>0?O:void 0)}function Jt(j,B){const O=new Br(j,B);return O.subscribe.bind(O)}class Br{constructor(B,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{B(this)}).catch(P=>{this.error(P)})}next(B){this.forEachObserver(O=>{O.next(B)})}error(B){this.forEachObserver(O=>{O.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,O,P){let M;if(void 0===B&&void 0===O&&void 0===P)throw new Error("Missing Observer.");M=function Pt(j,B){if("object"!=typeof j||null===j)return!1;for(const O of B)if(O in j&&"function"==typeof j[O])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:O,complete:P},void 0===M.next&&(M.next=_n),void 0===M.error&&(M.error=_n),void 0===M.complete&&(M.complete=_n);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),W}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,B)}sendOne(B,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{O(this.observers[B])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}const Zn=1e3,je=2,me=144e5,Qe=.5;function st(j,B=Zn,O=je){const P=B*Math.pow(O,j),M=Math.round(Qe*P*(Math.random()-.5)*2);return Math.min(me,P+M)}function Ln(j){return j&&j._delegate?j._delegate:j}},1333:(it,we,N)=>{var d=N(5879);let U=null;function R(){return U}class pe{}const Ie=new d.OlP("DocumentToken");let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(be)},providedIn:"platform"})}return n})();const Ne=new d.OlP("Location Initialized");let be=(()=>{class n extends Oe{constructor(){super(),this._doc=(0,d.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function L(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function H(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function K(n){return n&&"?"!==n[0]?"?"+n:n}let Me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ye)},providedIn:"root"})}return n})();const Se=new d.OlP("appBaseHref");let Ye=(()=>{class n extends Me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+K(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+K(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+K(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Oe),d.LFG(Se,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_e=(()=>{class n extends Me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=L(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+K(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+K(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Oe),d.LFG(Se,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Te=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Y(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(H(ot(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+K(r))}normalize(t){return n.stripTrailingSlash(function Xe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+K(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+K(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=K;static#t=this.joinWithSlash=L;static#n=this.stripTrailingSlash=H;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Me))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Ce(){return new Te((0,d.LFG)(Me))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var X=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(X||{}),ke=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(ke||{});function fe(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ke.CurrencyDecimal)return t[d.wAp.NumberSymbols][ke.Decimal];if(e===ke.CurrencyGroup)return t[d.wAp.NumberSymbols][ke.Group]}return r}const M=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function go(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}const Gu=/\s+/,Zl=[];let Pa=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=Zl,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Gu):Zl}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Gu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Gu).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ra{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qu=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ra(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),wn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{wn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function wn(n,e){n.context.$implicit=e.item}let xi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Zm{constructor(){this.$implicit=null,this.ngIf=null}}function Kl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function Qr(n,e){return new d.vHH(2100,!1)}class Wu{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class Xl{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Zu=new Xl,ed=new Wu;let Ku=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Zu;if((0,d.F4k)(t))return ed;throw Qr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Ve=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function Jr(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function os(n,e,t){return function Mt(n,e,t,r,s,u,l=!1){let g="",_=!1;if(isFinite(n)){let E=function di(n){let r,s,u,l,g,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],s=1;else{for(g--;"0"===e.charAt(g);)g--;for(s-=u,r=[],l=0;u<=g;u++,l++)r[l]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(E=function as(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(E));let b=e.minInt,S=e.minFrac,F=e.maxFrac;if(u){const et=u.match(M);if(null===et)throw new Error(`${u} is not a valid digit info`);const Ze=et[1],pt=et[3],Tt=et[5];null!=Ze&&(b=go(Ze)),null!=pt&&(S=go(pt)),null!=Tt?F=go(Tt):null!=pt&&S>F&&(F=S)}!function jt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,g=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(g>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const E=e+n.integerLen,b=r.reduceRight(function(S,F,G,ie){return ie[G]=(F+=S)<10?F:F-10,_&&(0===ie[G]&&G>=E?ie.pop():_=!1),F>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(E,S,F);let G=E.digits,ie=E.integerLen;const le=E.exponent;let ae=[];for(_=G.every(et=>!et);ie<b;ie++)G.unshift(0);for(;ie<0;ie++)G.unshift(0);ie>0?ae=G.splice(ie,G.length):(ae=G,G=[0]);const Fe=[];for(G.length>=e.lgSize&&Fe.unshift(G.splice(-e.lgSize,G.length).join(""));G.length>e.gSize;)Fe.unshift(G.splice(-e.gSize,G.length).join(""));G.length&&Fe.unshift(G.join("")),g=Fe.join(fe(t,r)),ae.length&&(g+=fe(t,s)+ae.join("")),le&&(g+=fe(t,ke.Exponential)+"+"+le)}else g=fe(t,ke.Infinity);return g=n<0&&!_?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function ks(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],l=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],g=l[0],_=l[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let b=0;b<_.length;b++){const S=_.charAt(b);"0"===S?t.minFrac=t.maxFrac=b+1:"#"===S?t.maxFrac=b+1:t.posSuf+=S}const E=g.split(",");if(t.gSize=E[1]?E[1].length:0,t.lgSize=E[2]||E[1]?(E[2]||E[1]).length:0,u){const b=s.length-t.posPre.length-t.posSuf.length,S=u.indexOf("#");t.negPre=u.substring(0,S).replace(/'/g,""),t.negSuf=u.slice(S+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function xe(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,X.Decimal),fe(e,ke.MinusSign)),e,ke.Group,ke.Decimal,t)}(function ds(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw Qr()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let rr=(()=>{class n{transform(t,r,s){if(null==t)return null;if(!this.supports(t))throw Qr();return t.slice(r,s)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Sn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function Xr(n){return"server"===n}let Dr=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new fs((0,d.LFG)(Ie),window)})}return n})();class fs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Nf(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class qi{}class Hf extends pe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gd extends Hf{static makeCurrent(){!function Q(n){U||(U=n)}(new gd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yI(){return $a=$a||document.querySelector("base"),$a?$a.getAttribute("href"):null}();return null==t?null:function py(n){md=md||document.createElement("a"),md.setAttribute("href",n);const e=md.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$a=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jo(document.cookie,e)}}let md,$a=null,_I=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const gy=new d.OlP("EventManagerPlugins");let my=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(gy),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class yd{constructor(e){this._doc=e}}const _d="ng-app-id";let ac=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xr(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${_d}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(_d),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(_d,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ie),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zo=/%COMP%/g,Wi=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Xt(n,e){return e.map(t=>t.replace(Zo,n))}let cc=(()=>{class n{constructor(t,r,s,u,l,g,_,E=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=Xr(g),this.defaultRenderer=new ys(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof Ed?s.applyToHost(t):s instanceof Hr&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,E=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:u=new Ed(_,E,r,this.appId,b,l,g,S);break;case d.ifc.ShadowDom:return new Ko(_,E,t,r,l,g,this.nonce,S);default:u=new Hr(_,E,r,b,l,g,S)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(my),d.LFG(ac),d.LFG(d.AFp),d.LFG(Wi),d.LFG(Ie),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class ys{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ms[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Id(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Id(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=ms[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ms[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=R().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Id(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ko extends ys{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=Xt(s.id,s.styles);for(const b of E){const S=document.createElement("style");g&&S.setAttribute("nonce",g),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Hr extends ys{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=_?Xt(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ed extends Hr{constructor(e,t,r,s,u,l,g,_){const E=s+"-"+r.id;super(e,t,r,u,l,g,_,E),this.contentAttr=function Gf(n){return"_ngcontent-%COMP%".replace(Zo,n)}(E),this.hostAttr=function uc(n){return"_nghost-%COMP%".replace(Zo,n)}(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let II=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ie))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const lc=["alt","control","meta","shift"],Bs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ha=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),lc.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),l+=E+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=Bs[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),lc.forEach(l=>{l!==s&&(0,qf[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ie))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Kf=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function yt(){gd.makeCurrent()},multi:!0},{provide:Ie,useFactory:function EI(){return(0,d.RDi)(document),document},deps:[]}]),vy=new d.OlP(""),Yo=[{provide:d.rWj,useClass:class zf{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new d.vHH(5103,!1);return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(_=>{_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],js=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function dc(){return new d.qLn},deps:[]},{provide:gy,useClass:II,multi:!0,deps:[Ie,d.R0b,d.Lbi]},{provide:gy,useClass:Ha,multi:!0,deps:[Ie]},cc,ac,my,{provide:d.FYo,useExisting:cc},{provide:qi,useClass:_I,deps:[]},[]];let za=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(vy,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...js,...Yo],imports:[Sn,d.hGG]})}return n})(),ye=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ie))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function Qf(){return new ye((0,d.LFG)(Ie))}(),s},providedIn:"root"})}return n})();typeof window<"u"&&window;var xr=N(5592),_s=N(4674),un=N(2459),lt=N(2096),or=N(5619);const{isArray:fc}=Array,{getPrototypeOf:Ad,prototype:Or,keys:vs}=Object;function pn(n){if(1===n.length){const e=n[0];if(fc(e))return{args:e,keys:null};if(function Hs(n){return n&&"object"==typeof n&&Ad(n)===Or}(e)){const t=vs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zs=N(2737),wt=N(7398);const{isArray:Dy}=Array;function Wa(n){return(0,wt.U)(e=>function sp(n,e){return Dy(e)?n(...e):n(e)}(n,e))}var ws=N(9940);function Is(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var pr=N(8251),Qo=N(7103);function _o(...n){const e=(0,ws.yG)(n),t=(0,ws.jO)(n),{args:r,keys:s}=pn(n);if(0===r.length)return(0,un.D)([],e);const u=new xr.y(function Jo(n,e,t=zs.y){return r=>{pc(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)pc(e,()=>{const E=(0,un.D)(n[_],e);let b=!1;E.subscribe((0,pr.x)(r,S=>{u[_]=S,b||(b=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Is(s,l):zs.y));return t?u.pipe(Wa(t)):u}function pc(n,e,t){n?(0,Qo.f)(t,n,e):e()}const Es=(0,N(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Za=N(7537);function vo(...n){return function Yi(){return(0,Za.J)(1)}()((0,un.D)(n,(0,ws.yG)(n)))}var Ka=N(4829);function Md(n){return new xr.y(e=>{(0,Ka.Xf)(n()).subscribe(e)})}var Ya=N(8407);function wo(n,e){const t=(0,_s.m)(n)?n:()=>n,r=s=>s.error(t());return new xr.y(e?s=>e.schedule(r,0,s):r)}var Gs=N(6232),Qa=N(7394),Pr=N(9360);function xd(){return(0,Pr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class mc extends xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qa.w0.EMPTY)}return e}refCount(){return xd()(this)}}var ti=N(8645),An=N(4664);function en(n){return n<=0?()=>Gs.E:(0,Pr.e)((e,t)=>{let r=0;e.subscribe((0,pr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Xo(...n){const e=(0,ws.yG)(n);return(0,Pr.e)((t,r)=>{(e?vo(n,t,e):vo(n,t)).subscribe(r)})}function ar(n,e){return(0,Pr.e)((t,r)=>{let s=0;t.subscribe((0,pr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var zr=N(1631);function Ja(n){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Xa(n=Ty){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Ty(){return new Es}function Hn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ar((s,u)=>n(s,u,r)):zs.y,en(1),t?Ja(e):Xa(()=>new Es))}function qs(n,e){return(0,_s.m)(e)?(0,zr.z)(n,e,1):(0,zr.z)(n,1)}function En(n,e,t){const r=(0,_s.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Pr.e)((s,u)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let g=!0;s.subscribe((0,pr.x)(u,_=>{var E;null===(E=r.next)||void 0===E||E.call(r,_),u.next(_)},()=>{var _;g=!1,null===(_=r.complete)||void 0===_||_.call(r),u.complete()},_=>{var E;g=!1,null===(E=r.error)||void 0===E||E.call(r,_),u.error(_)},()=>{var _,E;g&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(E=r.finalize)||void 0===E||E.call(r)}))}):zs.y}function Pi(n){return(0,Pr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,pr.x)(t,void 0,void 0,l=>{u=(0,Ka.Xf)(n(l,Pi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Io(n,e){return(0,Pr.e)(function yc(n,e,t,r,s){return(u,l)=>{let g=t,_=e,E=0;u.subscribe((0,pr.x)(l,b=>{const S=E++;_=g?n(_,b,S):(g=!0,b),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ea(n){return n<=0?()=>Gs.E:(0,Pr.e)((e,t)=>{let r=[];e.subscribe((0,pr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Eo(n){return(0,Pr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Pd=N(2420);const Ct="primary",Ws=Symbol("RouteTitle");class Co{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zs(n){return new Co(n)}function ap(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Nr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!cp(n[s],e[s]))return!1;return!0}function cp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function zn(n){return n.length>0?n[n.length-1]:null}function Ks(n){return function ip(n){return!!n&&(n instanceof xr.y||(0,_s.m)(n.lift)&&(0,_s.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,lt.of)(n)}const lp={exact:function wc(n,e,t){if(!Do(n.segments,e.segments)||!eu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wc(n.children[r],e.children[r],t))return!1;return!0},subset:bo},vc={exact:function hp(n,e){return Nr(n,e)},subset:function ta(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cp(n[t],e[t]))},ignored:()=>!0};function dp(n,e,t){return lp[t.paths](n.root,e.root,t.matrixParams)&&vc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bo(n,e,t){return Cs(n,e,e.segments,t)}function Cs(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Do(s,t)||e.hasChildren()||!eu(s,t,r))}if(n.segments.length===t.length){if(!Do(n.segments,t)||!eu(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!bo(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Do(n.segments,s)&&eu(n.segments,s,r)&&n.children[Ct])&&Cs(n.children[Ct],e,u,r)}}function eu(n,e,t){return e.every((r,s)=>vc[t](n[s].parameters,r.parameters))}class Ys{constructor(e=new Bt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zs(this.queryParams)),this._queryParamMap}toString(){return SI.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nd(this)}}class Ic{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zs(this.parameters)),this._parameterMap}toString(){return Rr(this)}}function Do(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ec=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new fp},providedIn:"root"})}return n})();class fp{parse(e){const t=new ia(e);return new Ys(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${pi(e.root,!0)}`,r=function Ay(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${bc(t)}=${bc(s)}`).join("&"):`${bc(t)}=${bc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const SI=new fp;function Nd(n){return n.segments.map(e=>Rr(e)).join("/")}function pi(n,e){if(!n.hasChildren())return Nd(n);if(e){const t=n.children[Ct]?pi(n.children[Ct],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Ct&&r.push(`${s}:${pi(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function TI(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Ct&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Ct&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Ct?[pi(n.children[Ct],!1)]:[`${s}:${pi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ct]?`${Nd(n)}/${t[0]}`:`${Nd(n)}/(${t.join("//")})`}}function Cc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bc(n){return Cc(n).replace(/%3B/gi,";")}function Rd(n){return Cc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bs(n){return decodeURIComponent(n)}function pp(n){return bs(n.replace(/\+/g,"%20"))}function Rr(n){return`${Rd(n.path)}${function na(n){return Object.keys(n).map(e=>`;${Rd(e)}=${Rd(n[e])}`).join("")}(n.parameters)}`}const ra=/^[^\/()?;#]+/;function Qs(n){const e=n.match(ra);return e?e[0]:""}const Dc=/^[^\/()?;=#]+/,gp=/^[^=?&#]+/,ni=/^[^&#]+/;class ia{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ct]=new Bt(e,t)),r}parseSegment(){const e=Qs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Ic(bs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function My(n){const e=n.match(Dc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Qs(this.remaining);s&&(r=s,this.capture(r))}e[bs(t)]=bs(r)}parseQueryParam(e){const t=function AI(n){const e=n.match(gp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function kd(n){const e=n.match(ni);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=pp(t),u=pp(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qs(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ct);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Ct]:new Bt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function xy(n){return n.segments.length>0?new Bt([],{[Ct]:n}):n}function Tc(n){const e={};for(const r of Object.keys(n.children)){const u=Tc(n.children[r]);if(r===Ct&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Oy(n){if(1===n.numberOfChildren&&n.children[Ct]){const e=n.children[Ct];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function To(n){return n instanceof Ys}function p(n){let e;const s=xy(function t(u){const l={};for(const _ of u.children){const E=t(_);l[_.outlet]=E}const g=new Bt(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function m(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return x(s,s,s,t,r);const u=function Re(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ne(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,E])=>{g[_]="string"==typeof E?E.split("/"):E}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new ne(t,e,r)}(e);if(u.toRoot())return x(s,s,new Bt([],{}),t,r);const l=function nt(n,e,t){if(n.isAbsolute)return new Be(e,!0,0);if(!t)return new Be(e,!1,NaN);if(null===t.parent)return new Be(t,!0,0);const r=I(n.commands[0])?0:1;return function xt(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new Be(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?Ds(l.segmentGroup,l.index,u.commands):gi(l.segmentGroup,l.index,u.commands);return x(s,l.segmentGroup,g,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function T(n){return"object"==typeof n&&null!=n&&n.outlets}function x(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,E])=>{u[_]=Array.isArray(E)?E.map(b=>`${b}`):`${E}`}),l=n===e?t:q(n,e,t);const g=xy(Tc(l));return new Ys(g,u,s)}function q(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:q(u,e,t)}),new Bt(n.segments,r)}class ne{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new d.vHH(4003,!1);const s=r.find(T);if(s&&s!==zn(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Be{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gi(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Ds(n,e,t);const r=function mp(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(T(g))break;const _=`${g}`,E=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!Sc(_,E,l))return u;r+=2}else{if(!Sc(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Ct]=new Bt(n.segments.slice(r.pathIndex),n.children),Ds(u,0,s)}return r.match&&0===s.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?tu(n,e,t):r.match?Ds(n,0,s):tu(n,e,t)}function Ds(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function gr(n){return T(n[0])?n[0].outlets:{[Ct]:n}}(t),s={};if(Object.keys(r).some(u=>u!==Ct)&&n.children[Ct]&&1===n.numberOfChildren&&0===n.children[Ct].segments.length){const u=Ds(n.children[Ct],e,t);return new Bt(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=gi(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Bt(n.segments,s)}}function tu(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(T(u)){const _=So(u.outlets);return new Bt(r,_)}if(0===s&&I(t[0])){r.push(new Ic(n.segments[e].path,Ao(t[0]))),s++;continue}const l=T(u)?u.outlets[Ct]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&I(g)?(r.push(new Ic(l,Ao(g))),s+=2):(r.push(new Ic(l,{})),s++)}return new Bt(r,{})}function So(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=tu(new Bt([],{}),0,r))}),e}function Ao(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Sc(n,e,t){return n==t.path&&Nr(e,t.parameters)}const nu="imperative";class mi{constructor(e,t){this.id=e,this.url=t}}class sa extends mi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ts extends mi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ru extends mi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Js extends mi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class Ac extends mi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fd extends mi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MI extends mi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CS extends mi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xI extends mi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sk extends mi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ak{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DS{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Py{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mk{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ld{}class PI{constructor(e){this.url=e}}class xk{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yp,this.attachRef=null}}let yp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class SS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ny(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ny(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Mc(e,this._root).map(t=>t.value)}}function Ny(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ny(n,t);if(r)return r}return null}function Mc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mc(n,t);if(r.length)return r.unshift(e),r}return[]}class Qi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function iu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ry extends SS{constructor(e,t){super(e),this.snapshot=t,Ly(this,e)}toString(){return this.snapshot.toString()}}function ky(n,e){const t=function xc(n,e){const l=new ou([],{},{},"",{},Ct,e,null,{});return new Ud("",new Qi(l,[]))}(0,e),r=new or.X([new Ic("",{})]),s=new or.X({}),u=new or.X({}),l=new or.X({}),g=new or.X(""),_=new su(r,s,l,g,u,Ct,e,t.root);return _.snapshot=t.root,new Ry(new Qi(_,[]),t)}class su{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,wt.U)(E=>E[Ws]))??(0,lt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Zs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Zs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function _p(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ou{get title(){return this.data?.[Ws]}constructor(e,t,r,s,u,l,g,_,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ud extends SS{constructor(e,t){super(t),this.url=e,Ly(this,t)}toString(){return NI(this._root)}}function Ly(n,e){e.value._routerState=n,e.children.forEach(t=>Ly(n,t))}function NI(n){const e=n.children.length>0?` { ${n.children.map(NI).join(", ")} } `:"";return`${n.value}${e}`}function Uy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nr(e.params,t.params)||n.paramsSubject.next(t.params),function up(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vp(n,e){const t=Nr(n.params,e.params)&&function Sy(n,e){return Do(n,e)&&n.every((t,r)=>Nr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vp(n.parent,e.parent))}let Vd=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ct,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(yp),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(wp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new AS(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class AS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===su?this.route:e===yp?this.childContexts:this.parent.get(e,t)}}const wp=new d.OlP("");let RI=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=_o([r.queryParams,r.params,r.data]).pipe((0,An.w)(([u,l,g],_)=>(g={...u,...l,...g},0===_?(0,lt.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function Bd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function MS(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Bd(n,r,s);return Bd(n,r)})}(n,e,t);return new Qi(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Bd(n,g)),l}}const r=function yi(n){return new su(new or.X(n.url),new or.X(n.params),new or.X(n.queryParams),new or.X(n.fragment),new or.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Bd(n,u));return new Qi(r,s)}}const jd="ngNavigationCancelingError";function Vy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=To(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Ip(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Ip(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[jd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Oc(n){return n&&n[jd]}let By=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,s){1&r&&d._UZ(0,"router-outlet")},dependencies:[Vd],encapsulation:2})}return n})();function $d(n){const e=n.children&&n.children.map($d),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ct&&(t.component=By),t}function Ni(n){return n.outlet||Ct}function Mo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class LI{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Uy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=iu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=iu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=iu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=iu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Mk(u.value.snapshot))}),e.children.length&&this.forwardEvent(new DS(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Uy(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),Uy(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=Mo(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class jy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hd{constructor(e,t){this.component=e,this.route=t}}function Pc(n,e,t){const r=n._root;return uu(r,e?e._root:null,t,[r.value])}function au(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function uu(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=iu(e);return n.children.forEach(l=>{(function Cp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function US(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Do(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Do(n.url,e.url)||!Nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vp(n,e)||!Nr(n.queryParams,e.queryParams);default:return!vp(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new jy(r)):(u.data=l.data,u._resolvedData=l._resolvedData),uu(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new Hd(g.outlet.component,l))}else l&&zd(e,g,s),s.canActivateChecks.push(new jy(r)),uu(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>zd(g,t.getContext(l),s)),s}function zd(n,e,t){const r=iu(n),s=n.value;Object.entries(r).forEach(([u,l])=>{zd(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Hd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Gd(n){return"function"==typeof n}function BI(n){return n instanceof Es||"EmptyError"===n?.name}const Nc=Symbol("INITIAL_VALUE");function cu(){return(0,An.w)(n=>_o(n.map(e=>e.pipe(en(1),Xo(Nc)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Nc)return Nc;if(!1===t||t instanceof Ys)return t}return!0}),ar(e=>e!==Nc),en(1)))}function Hy(n){return(0,Ya.z)(En(e=>{if(To(e))throw Vy(0,e)}),(0,wt.U)(e=>!0===e))}class qd{constructor(e){this.segmentGroup=e||null}}class Wd{constructor(e){this.urlTree=e}}function Xs(n){return wo(new qd(n))}function Gy(n){return wo(new Wd(n))}class GI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,lt.of)(r);if(s.numberOfChildren>1||!s.children[Ct])return wo(new d.vHH(4e3,!1));s=s.children[Ct]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Ys(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new Bt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const Zd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kd(n,e,t,r,s){const u=Wy(n,e,t);return u.matched?(r=function FI(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function zy(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,lt.of)(!0);const u=s.map(l=>{const g=au(l,n);return Ks(function $y(n){return n&&Gd(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,lt.of)(u).pipe(cu(),Hy())}(r,e,t).pipe((0,wt.U)(l=>!0===l?u:{...Zd}))):(0,lt.of)(u)}function Wy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zd}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||ap)(t,n,e);if(!s)return{...Zd};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Zy(n,e,t,r){return t.length>0&&function WS(n,e,t){return t.some(r=>Yd(n,e,r)&&Ni(r)!==Ct)}(n,t,r)?{segmentGroup:new Bt(e,qS(r,new Bt(t,n.children))),slicedSegments:[]}:0===t.length&&function qI(n,e,t){return t.some(r=>Yd(n,e,r))}(n,t,r)?{segmentGroup:new Bt(n.segments,GS(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Bt(n.segments,n.children),slicedSegments:t}}function GS(n,e,t,r,s){const u={};for(const l of r)if(Yd(n,t,l)&&!s[Ni(l)]){const g=new Bt([],{});u[Ni(l)]=g}return{...s,...u}}function qS(n,e){const t={};t[Ct]=e;for(const r of n)if(""===r.path&&Ni(r)!==Ct){const s=new Bt([],{});t[Ni(r)]=s}return t}function Yd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ZS{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new GI(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=Zy(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ct).pipe(Pi(t=>{if(t instanceof Wd)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof qd?this.noMatchError(t):t}),(0,wt.U)(t=>{const r=new ou([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,{}),s=new Qi(r,t),u=new Ud("",s),l=function w(n,e,t=null,r=null){return m(p(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ct).pipe(Pi(r=>{throw r instanceof qd?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Fy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,un.D)(s).pipe(qs(u=>{const l=r.children[u],g=function FS(n,e){const t=n.filter(r=>Ni(r)===e);return t.push(...n.filter(r=>Ni(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),Io((u,l)=>(u.push(...l),u)),Ja(null),function op(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ar((s,u)=>n(s,u,r)):zs.y,ea(1),t?Ja(e):Xa(()=>new Es))}(),(0,zr.z)(u=>{if(null===u)return Xs(r);const l=WI(u);return function KS(n){n.sort((e,t)=>e.value.outlet===Ct?-1:t.value.outlet===Ct?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,lt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,un.D)(t).pipe(qs(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(Pi(_=>{if(_ instanceof qd)return(0,lt.of)(null);throw _}))),Hn(g=>!!g),Pi(g=>{if(BI(g))return function Ky(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,lt.of)([]):Xs(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function Sp(n,e,t,r){return!!(Ni(n)===r||r!==Ct&&Yd(e,t,n))&&("**"===n.path||Wy(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):Xs(s):Xs(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gy(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,zr.z)(l=>{const g=new Bt(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:E,positionalParamSegments:b}=Wy(t,s,u);if(!g)return Xs(t);const S=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,b);return s.redirectTo.startsWith("/")?Gy(S):this.applyRedirects.lineralizeSegments(s,S).pipe((0,zr.z)(F=>this.processSegment(e,r,t,F.concat(E),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?zn(s).parameters:{},E=new ou(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KI(r),Ni(r),r.component??r._loadedComponent??null,r,du(r));g=(0,lt.of)({snapshot:E,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=Kd(t,r,s,e).pipe((0,wt.U)(({matched:_,consumedSegments:E,remainingSegments:b,parameters:S})=>_?{snapshot:new ou(E,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KI(r),Ni(r),r.component??r._loadedComponent??null,r,du(r)),consumedSegments:E,remainingSegments:b}:null));return g.pipe((0,An.w)(_=>null===_?Xs(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,An.w)(({routes:E})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:F,remainingSegments:G}=_,{segmentGroup:ie,slicedSegments:le}=Zy(t,F,G,E);if(0===le.length&&ie.hasChildren())return this.processChildren(b,E,ie).pipe((0,wt.U)(Fe=>null===Fe?null:[new Qi(S,Fe)]));if(0===E.length&&0===le.length)return(0,lt.of)([new Qi(S,[])]);const ae=Ni(r)===u;return this.processSegment(b,E,ie,le,ae?Ct:u,!0).pipe((0,wt.U)(Fe=>[new Qi(S,Fe)]))}))))}getChildConfig(e,t,r){return t.children?(0,lt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,lt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function zI(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,lt.of)(!0);const u=s.map(l=>{const g=au(l,n);return Ks(function BS(n){return n&&Gd(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,lt.of)(u).pipe(cu(),Hy())}(e,t,r).pipe((0,zr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe(En(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Tp(n){return wo(Ip(!1,3))}())):(0,lt.of)({routes:[],injector:e})}}function kk(n){const e=n.value.routeConfig;return e&&""===e.path}function WI(n){const e=[],t=new Set;for(const r of n){if(!kk(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=WI(r.children);e.push(new Qi(r.value,s))}return e.filter(r=>!t.has(r))}function KI(n){return n.data||{}}function du(n){return n.resolve||{}}function eE(n){return"string"==typeof n.title||null===n.title}function Qy(n){return(0,An.w)(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,wt.U)(()=>e)):(0,lt.of)(e)})}const kc=new d.OlP("ROUTES");let Jy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,lt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ks(t.loadComponent()).pipe((0,wt.U)(Fc),En(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Eo(()=>{this.componentLoaders.delete(t)})),s=new mc(r,()=>new ti.x).pipe(xd());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,lt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function YS(n,e,t,r){return Ks(n.loadChildren()).pipe((0,wt.U)(Fc),(0,zr.z)(s=>s instanceof d.YKP||Array.isArray(s)?(0,lt.of)(s):(0,un.D)(e.compileModuleAsync(s))),(0,wt.U)(s=>{r&&r(n);let u,l,g=!1;return Array.isArray(s)?(l=s,!0):(u=s.create(t).injector,l=u.get(kc,[],{optional:!0,self:!0}).flat()),{routes:l.map($d),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Eo(()=>{this.childrenLoaders.delete(r)})),l=new mc(u,()=>new ti.x).pipe(xd());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fc(n){return function oa(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Mp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ti.x,this.transitionAbortSubject=new ti.x,this.configLoader=(0,d.f3M)(Jy),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Ec),this.rootContexts=(0,d.f3M)(yp),this.inputBindingEnabled=null!==(0,d.f3M)(wp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,lt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Ak(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new OI(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new or.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ar(u=>0!==u.id),(0,wt.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,An.w)(u=>{this.currentTransition=u;let l=!1,g=!1;return(0,lt.of)(u).pipe(En(_=>{this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,An.w)(_=>{const E=_.currentBrowserUrl.toString(),b=!t.navigated||_.extractedUrl.toString()!==E||E!==_.currentUrlTree.toString();if(!b&&"reload"!==(_.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const F="";return this.events.next(new Js(_.id,this.urlSerializer.serialize(_.rawUrl),F,0)),_.resolve(null),Gs.E}if(t.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return(0,lt.of)(_).pipe((0,An.w)(F=>{const G=this.transitions?.getValue();return this.events.next(new sa(F.id,this.urlSerializer.serialize(F.extractedUrl),F.source,F.restoredState)),G!==this.transitions?.getValue()?Gs.E:Promise.resolve(F)}),function Ap(n,e,t,r,s,u){return(0,zr.z)(l=>function Rc(n,e,t,r,s,u,l="emptyOnly"){return new ZS(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,wt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),En(F=>{u.targetSnapshot=F.targetSnapshot,u.urlAfterRedirects=F.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:F.urlAfterRedirects};const G=new Fd(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(G)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(_.currentRawUrl)){const{id:F,extractedUrl:G,source:ie,restoredState:le,extras:ae}=_,Fe=new sa(F,this.urlSerializer.serialize(G),ie,le);this.events.next(Fe);const et=ky(0,this.rootComponentType).snapshot;return this.currentTransition=u={..._,targetSnapshot:et,urlAfterRedirects:G,extras:{...ae,skipLocationChange:!1,replaceUrl:!1}},(0,lt.of)(u)}{const F="";return this.events.next(new Js(_.id,this.urlSerializer.serialize(_.extractedUrl),F,1)),_.resolve(null),Gs.E}}),En(_=>{const E=new MI(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}),(0,wt.U)(_=>(this.currentTransition=u={..._,guards:Pc(_.targetSnapshot,_.currentSnapshot,this.rootContexts)},u)),function lu(n,e){return(0,zr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,lt.of)({...t,guardsResult:!0}):function jI(n,e,t,r){return(0,un.D)(n).pipe((0,zr.z)(s=>function HI(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,lt.of)(!0);const l=u.map(g=>{const _=Mo(e)??s,E=au(g,_);return Ks(function bp(n){return n&&Gd(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):_.runInContext(()=>E(n,e,t,r))).pipe(Hn())});return(0,lt.of)(l).pipe(cu())}(s.component,s.route,t,e,r)),Hn(s=>!0!==s,!0))}(l,r,s,n).pipe((0,zr.z)(g=>g&&function VS(n){return"boolean"==typeof n}(g)?function $I(n,e,t,r){return(0,un.D)(e).pipe(qs(s=>vo(function Rk(n,e){return null!==n&&e&&e(new bS(n)),(0,lt.of)(!0)}(s.route.parent,r),function HS(n,e){return null!==n&&e&&e(new Py(n)),(0,lt.of)(!0)}(s.route,r),function zS(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Ep(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Md(()=>{const g=l.guards.map(_=>{const E=Mo(l.node)??t,b=au(_,E);return Ks(function UI(n){return n&&Gd(n.canActivateChild)}(b)?b.canActivateChild(r,n):E.runInContext(()=>b(r,n))).pipe(Hn())});return(0,lt.of)(g).pipe(cu())}));return(0,lt.of)(u).pipe(cu())}(n,s.path,t),function Dp(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,lt.of)(!0);const s=r.map(u=>Md(()=>{const l=Mo(e)??t,g=au(u,l);return Ks(function jS(n){return n&&Gd(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(Hn())}));return(0,lt.of)(s).pipe(cu())}(n,s.route,t))),Hn(s=>!0!==s,!0))}(r,u,n,e):(0,lt.of)(g)),(0,wt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,_=>this.events.next(_)),En(_=>{if(u.guardsResult=_.guardsResult,To(_.guardsResult))throw Vy(0,_.guardsResult);const E=new CS(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.events.next(E)}),ar(_=>!!_.guardsResult||(this.cancelNavigationTransition(_,"",3),!1)),Qy(_=>{if(_.guards.canActivateChecks.length)return(0,lt.of)(_).pipe(En(E=>{const b=new xI(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}),(0,An.w)(E=>{let b=!1;return(0,lt.of)(E).pipe(function Yy(n,e){return(0,zr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,lt.of)(t);let u=0;return(0,un.D)(s).pipe(qs(l=>function YI(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!eE(s)&&(u[Ws]=s.title),function QI(n,e,t,r){const s=function JI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,lt.of)({});const u={};return(0,un.D)(s).pipe((0,zr.z)(l=>function XI(n,e,t,r){const s=Mo(e)??r,u=au(n,s);return Ks(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Hn(),En(g=>{u[l]=g}))),ea(1),function Od(n){return(0,wt.U)(()=>n)}(u),Pi(l=>BI(l)?Gs.E:wo(l)))}(u,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=Fy(n,t).resolve,s&&eE(s)&&(n.data[Ws]=s.title),null)))}(l.route,r,n,e)),En(()=>u++),ea(1),(0,zr.z)(l=>u===s.length?(0,lt.of)(t):Gs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),En({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(E,"",2)}}))}),En(E=>{const b=new Sk(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}))}),Qy(_=>{const E=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe(En(F=>{b.component=F}),(0,wt.U)(()=>{})));for(const F of b.children)S.push(...E(F));return S};return _o(E(_.targetSnapshot.root)).pipe(Ja(),en(1))}),Qy(()=>this.afterPreactivation()),(0,wt.U)(_=>{const E=function kI(n,e,t){const r=Bd(n,e._root,t?t._root:void 0);return new Ry(r,e)}(t.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return this.currentTransition=u={..._,targetRouterState:E},u}),En(()=>{this.events.next(new Ld)}),((n,e,t,r)=>(0,wt.U)(s=>(new LI(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,_=>this.events.next(_),this.inputBindingEnabled),en(1),En({next:_=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ts(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects))),t.titleStrategy?.updateTitle(_.targetRouterState.snapshot),_.resolve(!0)},complete:()=>{l=!0}}),function _c(n){return(0,Pr.e)((e,t)=>{(0,Ka.Xf)(n).subscribe((0,pr.x)(t,()=>t.complete(),Pd.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(En(_=>{throw _}))),Eo(()=>{l||g||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),Pi(_=>{if(g=!0,Oc(_))this.events.next(new ru(u.id,this.urlSerializer.serialize(u.extractedUrl),_.message,_.cancellationCode)),function Gr(n){return Oc(n)&&To(n.url)}(_)?this.events.next(new PI(_.url)):u.resolve(!1);else{this.events.next(new Ac(u.id,this.urlSerializer.serialize(u.extractedUrl),_,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(_))}catch(E){u.reject(E)}}return Gs.E}))}))}cancelNavigationTransition(t,r,s){const u=new ru(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QS(n){return n!==nu}let JS=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Ct);return r}getResolvedTitleForRoute(t){return t.data[Ws]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Fk)},providedIn:"root"})}return n})(),Fk=(()=>{class n extends JS{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ye))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(tE)},providedIn:"root"})}return n})();class Uk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let tE=(()=>{class n extends Uk{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xp=new d.OlP("",{providedIn:"root",factory:()=>({})});let XS=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(eA)},providedIn:"root"})}return n})(),eA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qd||{});function Op(n,e){n.events.pipe(ar(t=>t instanceof Ts||t instanceof ru||t instanceof Ac||t instanceof Js),(0,wt.U)(t=>t instanceof Ts||t instanceof Js?Qd.COMPLETE:t instanceof ru&&(0===t.code||1===t.code)?Qd.REDIRECTING:Qd.FAILED),ar(t=>t!==Qd.REDIRECTING),en(1)).subscribe(()=>{e()})}function xo(n){throw n}function Jd(n,e,t){return e.parse("/")}const nE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new ti.x,this.options=(0,d.f3M)(xp,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||xo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Jd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(XS),this.routeReuseStrategy=(0,d.f3M)(Lk),this.titleStrategy=(0,d.f3M)(JS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(kc,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Mp),this.urlSerializer=(0,d.f3M)(Ec),this.location=(0,d.f3M)(Te),this.componentInputBindingEnabled=!!(0,d.f3M)(wp,{optional:!0}),this.eventsSubscription=new Qa.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ys,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ky(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(tA(r)&&this._events.next(r));if(r instanceof sa)QS(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(r instanceof Js)this.rawUrlTree=s.rawUrl;else if(r instanceof Fd){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(u,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(r instanceof Ld)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(r instanceof ru)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(s);else if(r instanceof PI){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QS(s.source)};this.scheduleNavigation(u,nu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}r instanceof Ac&&this.restoreHistory(s,!0),r instanceof Ts&&(this.navigated=!0),tA(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($d),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,E=_?this.currentUrlTree.fragment:l;let S,b=null;switch(g){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{S=p(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return m(S,t,b,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=To(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,nu,null,r)}navigate(t,r={skipLocationChange:!1}){return function Vk(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...nE}:!1===r?{...rE}:r,To(t))return dp(this.currentUrlTree,t,s);const u=this.parseUrl(t);return dp(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,E;l?(g=l.resolve,_=l.reject,E=l.promise):E=new Promise((S,F)=>{g=S,_=F});const b=this.pendingTasks.add();return Op(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tA(n){return!(n instanceof Ld||n instanceof PI)}let Pp=(()=>{class n{constructor(t,r,s,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new ti.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof Ts&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Yn),d.Y36(su),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Me))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&d.NdJ("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&d.uIk("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),Xd=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof Ts&&this.update()})}ngAfterContentInit(){(0,lt.of)(this.links.changes,(0,lt.of)(null)).pipe((0,Za.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,un.D)(t).pipe((0,Za.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Xy(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Yn),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Pp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,u){if(1&r&&d.Suo(u,Pp,5),2&r){let l;d.iGM(l=d.CRH())&&(s.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class nA{}let iA=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ar(t=>t instanceof Ts),qs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,un.D)(s).pipe((0,Za.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,lt.of)(null);const u=s.pipe((0,zr.z)(l=>null===l?(0,lt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,un.D)([u,l]).pipe((0,Za.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Yn),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(nA),d.LFG(Jy))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const e_=new d.OlP("");let iE=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ts?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Js&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof TS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new TS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ji(n,e){return{\u0275kind:n,\u0275providers:e}}function oE(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Yn),s=n.get(aE);1===n.get(th)&&r.initialNavigation(),n.get(cE,null,d.XFs.Optional)?.setUpPreloading(),n.get(e_,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const aE=new d.OlP("",{factory:()=>new ti.x}),th=new d.OlP("",{providedIn:"root",factory:()=>1}),cE=new d.OlP("");function aA(n){return Ji(0,[{provide:cE,useExisting:iA},{provide:nA,useExisting:n}])}const Lc=new d.OlP("ROUTER_FORROOT_GUARD"),lE=[Te,{provide:Ec,useClass:fp},Yn,yp,{provide:su,useFactory:function t_(n){return n.routerState.root},deps:[Yn]},Jy,[]];function dE(){return new d.PXZ("Router",Yn)}let Np=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[lE,[],{provide:kc,multi:!0,useValue:t},{provide:Lc,useFactory:fE,deps:[[Yn,new d.FiY,new d.tp0]]},{provide:xp,useValue:r||{}},r?.useHash?{provide:Me,useClass:_e}:{provide:Me,useClass:Ye},{provide:e_,useFactory:()=>{const n=(0,d.f3M)(Dr),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(xp),r=(0,d.f3M)(Mp),s=(0,d.f3M)(Ec);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iE(s,r,n,e,t)}},r?.preloadingStrategy?aA(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:dE},r?.initialNavigation?Rp(r):[],r?.bindToComponentInputs?Ji(8,[RI,{provide:wp,useExisting:RI}]).\u0275providers:[],[{provide:lA,useFactory:oE},{provide:d.tb,multi:!0,useExisting:lA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kc,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Lc,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function fE(n){return"guarded"}function Rp(n){return["disabled"===n.initialNavigation?Ji(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Yn);return()=>{e.setUpLocationChangeListener()}}},{provide:th,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ji(2,[{provide:th,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Ne,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Yn),u=e.get(aE);Op(s,()=>{r(!0)}),e.get(Mp).afterPreactivation=()=>(r(!0),u.closed?(0,lt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const lA=new d.OlP("");var $=N(5861),kp=N(305);function Fp(n,e){const t="object"==typeof e;return new Promise((r,s)=>{const u=new kp.Hp({next:l=>{r(l),u.unsubscribe()},error:s,complete:()=>{t?r(e.defaultValue):s(new Es)}});n.subscribe(u)})}class i_ extends Qa.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const hu={setInterval(n,e,...t){const{delegate:r}=hu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=hu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var eo=N(9039);class rh extends i_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return hu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&hu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,eo.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ih={now:()=>(ih.delegate||Date).now(),delegate:void 0};class sh{constructor(e,t=sh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}sh.now=ih.now;class gE extends sh{constructor(e,t=sh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Lp=new gE(rh),Vc=Lp;var fA=N(671);const Up=function yE(n,e){return n===e||n!=n&&e!=e},o_=function Gk(n,e){for(var t=n.length;t--;)if(Up(n[t][0],e))return t;return-1};var _A=Array.prototype.splice;function aa(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}aa.prototype.clear=function mE(){this.__data__=[],this.size=0},aa.prototype.delete=function qk(n){var e=this.__data__,t=o_(e,n);return!(t<0||(t==e.length-1?e.pop():_A.call(e,t,1),--this.size,0))},aa.prototype.get=function Vp(n){var e=this.__data__,t=o_(e,n);return t<0?void 0:e[t][1]},aa.prototype.has=function a_(n){return o_(this.__data__,n)>-1},aa.prototype.set=function Bc(n,e){var t=this.__data__,r=o_(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const ua=aa,f_="object"==typeof global&&global&&global.Object===Object&&global;var IA="object"==typeof self&&self&&self.Object===Object&&self;const Xi=f_||IA||Function("return this")(),$c=Xi.Symbol;var vE=Object.prototype,Kk=vE.hasOwnProperty,CA=vE.toString,ca=$c?$c.toStringTag:void 0;var g_=Object.prototype.toString;var m_=$c?$c.toStringTag:void 0;const ah=function Yk(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":m_&&m_ in Object(n)?function p_(n){var e=Kk.call(n,ca),t=n[ca];try{n[ca]=void 0;var r=!0}catch{}var s=CA.call(n);return r&&(e?n[ca]=t:delete n[ca]),s}(n):function $p(n){return g_.call(n)}(n)},uh=function Hp(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},CE=function AA(n){if(!uh(n))return!1;var e=ah(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,MA=Xi["__core-js_shared__"],y_=(n=/[^.]+$/.exec(MA&&MA.keys&&MA.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var bE=Function.prototype.toString;const fu=function xA(n){if(null!=n){try{return bE.call(n)}catch{}try{return n+""}catch{}}return""};var OA=/^\[object .+?Constructor\]$/,SE=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ss=function AE(n){return!(!uh(n)||function __(n){return!!y_&&y_ in n}(n))&&(CE(n)?SE:OA).test(fu(n))},_i=function w_(n,e){var t=function ME(n,e){return n?.[e]}(n,e);return Ss(t)?t:void 0},lh=_i(Xi,"Map"),dh=_i(Object,"create");var kA=Object.prototype.hasOwnProperty;var b_=Object.prototype.hasOwnProperty;function zc(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}zc.prototype.clear=function E_(){this.__data__=dh?dh(null):{},this.size=0},zc.prototype.delete=function xE(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},zc.prototype.get=function C_(n){var e=this.__data__;if(dh){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return kA.call(e,n)?e[n]:void 0},zc.prototype.has=function OE(n){var e=this.__data__;return dh?void 0!==e[n]:b_.call(e,n)},zc.prototype.set=function NE(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=dh&&void 0===e?"__lodash_hash_undefined__":e,this};const kE=zc,Gp=function qc(n,e){var t=n.__data__;return function Gc(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Wc(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Wc.prototype.clear=function VA(){this.size=0,this.__data__={hash:new kE,map:new(lh||ua),string:new kE}},Wc.prototype.delete=function BA(n){var e=Gp(this,n).delete(n);return this.size-=e?1:0,e},Wc.prototype.get=function UE(n){return Gp(this,n).get(n)},Wc.prototype.has=function hh(n){return Gp(this,n).has(n)},Wc.prototype.set=function VE(n,e){var t=Gp(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const jA=Wc;function fh(n){var e=this.__data__=new ua(n);this.size=e.size}fh.prototype.clear=function Bp(){this.__data__=new ua,this.size=0},fh.prototype.delete=function l_(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},fh.prototype.get=function jp(n){return this.__data__.get(n)},fh.prototype.has=function h_(n){return this.__data__.has(n)},fh.prototype.set=function HA(n,e){var t=this.__data__;if(t instanceof ua){var r=t.__data__;if(!lh||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new jA(r)}return t.set(n,e),this.size=t.size,this};const zA=fh;var $E=function(){try{var n=_i(Object,"defineProperty");return n({},"",{}),n}catch{}}();const T_=$E,ph=function iF(n,e,t){"__proto__"==e&&T_?T_(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var HE=Object.prototype.hasOwnProperty;const GE=function zE(n,e,t){var r=n[e];(!HE.call(n,e)||!Up(r,t)||void 0===t&&!(e in n))&&ph(n,e,t)},gh=function qE(n,e,t,r){var s=!t;t||(t={});for(var u=-1,l=e.length;++u<l;){var g=e[u],_=r?r(t[g],n[g],g,t,n):void 0;void 0===_&&(_=n[g]),s?ph(t,g,_):GE(t,g,_)}return t},no=function ZE(n){return null!=n&&"object"==typeof n},mh=function GA(n){return no(n)&&"[object Arguments]"==ah(n)};var pu=Object.prototype,S_=pu.hasOwnProperty,yh=pu.propertyIsEnumerable,YE=mh(function(){return arguments}())?mh:function(n){return no(n)&&S_.call(n,"callee")&&!yh.call(n,"callee")};const A_=YE,_h=Array.isArray;var JE="object"==typeof exports&&exports&&!exports.nodeType&&exports,XE=JE&&"object"==typeof module&&module&&!module.nodeType&&module,O_=XE&&XE.exports===JE?Xi.Buffer:void 0;const eC=(O_?O_.isBuffer:void 0)||function QE(){return!1};var tC=/^(?:0|[1-9]\d*)$/;const YA=function nC(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&tC.test(n))&&n>-1&&n%1==0&&n<e},rC=function Ri(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var cn={};cn["[object Float32Array]"]=cn["[object Float64Array]"]=cn["[object Int8Array]"]=cn["[object Int16Array]"]=cn["[object Int32Array]"]=cn["[object Uint8Array]"]=cn["[object Uint8ClampedArray]"]=cn["[object Uint16Array]"]=cn["[object Uint32Array]"]=!0,cn["[object Arguments]"]=cn["[object Array]"]=cn["[object ArrayBuffer]"]=cn["[object Boolean]"]=cn["[object DataView]"]=cn["[object Date]"]=cn["[object Error]"]=cn["[object Function]"]=cn["[object Map]"]=cn["[object Number]"]=cn["[object Object]"]=cn["[object RegExp]"]=cn["[object Set]"]=cn["[object String]"]=cn["[object WeakMap]"]=!1;const Zp=function lC(n){return function(e){return n(e)}};var k_="object"==typeof exports&&exports&&!exports.nodeType&&exports,gu=k_&&"object"==typeof module&&module&&!module.nodeType&&module,F_=gu&&gu.exports===k_&&f_.process;const la=function(){try{return gu&&gu.require&&gu.require("util").types||F_&&F_.binding&&F_.binding("util")}catch{}}();var dC=la&&la.isTypedArray;const hM=dC?Zp(dC):function aF(n){return no(n)&&rC(n.length)&&!!cn[ah(n)]};var vh=Object.prototype.hasOwnProperty;const wh=function fC(n,e){var t=_h(n),r=!t&&A_(n),s=!t&&!r&&eC(n),u=!t&&!r&&!s&&hM(n),l=t||r||s||u,g=l?function bt(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],_=g.length;for(var E in n)(e||vh.call(n,E))&&(!l||!("length"==E||s&&("offset"==E||"parent"==E)||u&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||YA(E,_)))&&g.push(E);return g};var uF=Object.prototype;const Yp=function fM(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||uF)},gC=function pC(n,e){return function(t){return n(e(t))}},mC=gC(Object.keys,Object);var Ih=Object.prototype.hasOwnProperty;const wC=function vC(n){return null!=n&&rC(n.length)&&!CE(n)},mu=function mM(n){return wC(n)?wh(n):function gM(n){if(!Yp(n))return mC(n);var e=[];for(var t in Object(n))Ih.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var EM=Object.prototype.hasOwnProperty;const bM=function CM(n){if(!uh(n))return function vM(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=Yp(n),t=[];for(var r in n)"constructor"==r&&(e||!EM.call(n,r))||t.push(r);return t},Eh=function IC(n){return wC(n)?wh(n,!0):bM(n)};var EC="object"==typeof exports&&exports&&!exports.nodeType&&exports,CC=EC&&"object"==typeof module&&module&&!module.nodeType&&module,bC=CC&&CC.exports===EC?Xi.Buffer:void 0,DC=bC?bC.allocUnsafe:void 0;const L_=function AC(){return[]};var Jp=Object.prototype.propertyIsEnumerable,MC=Object.getOwnPropertySymbols,xM=MC?function(n){return null==n?[]:(n=Object(n),function MM(n,e){for(var t=-1,r=null==n?0:n.length,s=0,u=[];++t<r;){var l=n[t];e(l,t,n)&&(u[s++]=l)}return u}(MC(n),function(e){return Jp.call(n,e)}))}:L_;const Ch=xM,kr=function bh(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n},Dh=gC(Object.getPrototypeOf,Object);var U_=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)kr(e,Ch(n)),n=Dh(n);return e}:L_;const _u=U_,vu=function Yc(n,e,t){var r=e(n);return _h(n)?r:kr(r,t(n))},Jc=function Qc(n){return vu(n,mu,Ch)},el=function Xc(n){return vu(n,Eh,_u)},Xp=_i(Xi,"DataView"),eg=_i(Xi,"Promise"),tg=_i(Xi,"Set"),ng=_i(Xi,"WeakMap");var V_="[object Map]",RC="[object Promise]",PM="[object Set]",NM="[object WeakMap]",kC="[object DataView]",RM=fu(Xp),dF=fu(lh),kM=fu(eg),hF=fu(tg),FM=fu(ng),wu=ah;(Xp&&wu(new Xp(new ArrayBuffer(1)))!=kC||lh&&wu(new lh)!=V_||eg&&wu(eg.resolve())!=RC||tg&&wu(new tg)!=PM||ng&&wu(new ng)!=NM)&&(wu=function(n){var e=ah(n),t="[object Object]"==e?n.constructor:void 0,r=t?fu(t):"";if(r)switch(r){case RM:return kC;case dF:return V_;case kM:return RC;case hF:return PM;case FM:return NM}return e});const j_=wu;var Th=Object.prototype.hasOwnProperty;const tl=Xi.Uint8Array,z_=function LC(n){var e=new n.constructor(n.byteLength);return new tl(e).set(new tl(n)),e};var UM=/\w*$/;var ig=$c?$c.prototype:void 0,Ah=ig?ig.valueOf:void 0;const QM=function YM(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return z_(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function Sh(n,e){var t=e?z_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function jM(n,e){var t=e?z_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function VM(n){var e=new n.constructor(n.source,UM.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function sg(n){return Ah?Object(Ah.call(n)):{}}(n)}};var zC=Object.create,K_=function(){function n(){}return function(e){if(!uh(e))return{};if(zC)return zC(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Y_=K_;var ug=la&&la.isMap;const Q_=ug?Zp(ug):function XM(n){return no(n)&&"[object Map]"==j_(n)};var J_=la&&la.isSet;const JC=J_?Zp(J_):function ex(n){return no(n)&&"[object Set]"==j_(n)};var X_="[object Arguments]",tv="[object Function]",nv="[object Object]",ln={};ln[X_]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln[nv]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln[tv]=ln["[object WeakMap]"]=!1;const lx=function lg(n,e,t,r,s,u){var l,g=1&e,_=2&e,E=4&e;if(t&&(l=s?t(n,r,s,u):t(n)),void 0!==l)return l;if(!uh(n))return n;var b=_h(n);if(b){if(l=function H_(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&Th.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!g)return function TC(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var S=j_(n),F=S==tv||"[object GeneratorFunction]"==S;if(eC(n))return function SM(n,e){if(e)return n.slice();var t=n.length,r=DC?DC(t):new n.constructor(t);return n.copy(r),r}(n,g);if(S==nv||S==X_||F&&!s){if(l=_||F?{}:function GC(n){return"function"!=typeof n.constructor||Yp(n)?{}:Y_(Dh(n))}(n),!g)return _?function Zc(n,e){return gh(n,_u(n),e)}(n,function DM(n,e){return n&&gh(e,Eh(e),n)}(l,n)):function OM(n,e){return gh(n,Ch(n),e)}(n,function yM(n,e){return n&&gh(e,mu(e),n)}(l,n))}else{if(!ln[S])return s?n:{};l=QM(n,S,g)}}u||(u=new zA);var G=u.get(n);if(G)return G;u.set(n,l),JC(n)?n.forEach(function(ae){l.add(lg(ae,e,t,ae,n,u))}):Q_(n)&&n.forEach(function(ae,Fe){l.set(Fe,lg(ae,e,t,Fe,n,u))});var le=b?void 0:(E?_?el:Jc:_?Eh:mu)(n);return function nF(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(le||n,function(ae,Fe){le&&(ae=n[Fe=ae]),GE(l,Fe,lg(ae,e,t,Fe,n,u))}),l},Mh=function ab(n){return lx(n,5)};var xn=N(7592);(0,xn.registerVersion)("firebase","9.23.0","app");var yr=N(4537),ts=N(7879),ze=N(9058),mF=N(1878);class ub{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ov(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ns="@firebase/app",ha=new ts.Yd("@firebase/app"),Eu="[DEFAULT]",cv={[ns]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fa=new Map,Oh=new Map;function _b(n,e){try{n.container.addComponent(e)}catch(t){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vi(n){const e=n.name;if(Oh.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;Oh.set(e,n);for(const t of fa.values())_b(t,n);return!0}function nl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const No=new ze.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Sx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}function vb(n=Eu){const e=fa.get(n);if(!e&&n===Eu&&(0,ze.aH)())return function Mx(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Eu,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw No.create("bad-app-name",{appName:String(s)});if(t||(t=(0,ze.aH)()),!t)throw No.create("no-options");const u=fa.get(s);if(u){if((0,ze.vZ)(t,u.options)&&(0,ze.vZ)(r,u.config))return u;throw No.create("duplicate-app",{appName:s})}const l=new yr.H0(s);for(const _ of Oh.values())l.addComponent(_);const g=new Sx(t,r,l);return fa.set(s,g),g}();if(!e)throw No.create("no-app",{appName:n});return e}function wi(n,e,t){var r;let s=null!==(r=cv[n])&&void 0!==r?r:n;t&&(s+=`-${t}`);const u=s.match(/\s|\//),l=e.match(/\s|\//);if(u||l){const g=[`Unable to register library "${s}" with version "${e}":`];return u&&g.push(`library name "${s}" contains illegal characters (whitespace or "/")`),u&&l&&g.push("and"),l&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ha.warn(g.join(" "))}vi(new yr.wA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const xx="firebase-heartbeat-database",Ox=1,Ph="firebase-heartbeat-store";let dv=null;function wb(){return dv||(dv=(0,mF.X3)(xx,Ox,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ph)}}).catch(n=>{throw No.create("idb-open",{originalErrorMessage:n.message})})),dv}function hg(){return hg=(0,$.Z)(function*(n){try{return yield(yield wb()).transaction(Ph).objectStore(Ph).get(fv(n))}catch(e){if(e instanceof ze.ZR)ha.warn(e.message);else{const t=No.create("idb-get",{originalErrorMessage:e?.message});ha.warn(t.message)}}}),hg.apply(this,arguments)}function hv(n,e){return fg.apply(this,arguments)}function fg(){return fg=(0,$.Z)(function*(n,e){try{const r=(yield wb()).transaction(Ph,"readwrite");yield r.objectStore(Ph).put(e,fv(n)),yield r.done}catch(t){if(t instanceof ze.ZR)ha.warn(t.message);else{const r=No.create("idb-set",{originalErrorMessage:t?.message});ha.warn(r.message)}}}),fg.apply(this,arguments)}function fv(n){return`${n.name}!${n.options.appId}`}class bb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,$.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pv();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(u=>u.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(u=>{const l=new Date(u.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,$.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=pv(),{heartbeatsToSend:r,unsentEntries:s}=function Db(n,e=1024){const t=[];let r=n.slice();for(const s of n){const u=t.find(l=>l.agent===s.agent);if(u){if(u.dates.push(s.date),pa(t)>e){u.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),pa(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),u=(0,ze.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),u})()}}function pv(){return(new Date).toISOString().substring(0,10)}class Tb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,$.Z)(function*(){return!!(0,ze.hl)()&&(0,ze.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,$.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Ib(n){return hg.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,$.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return hv(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,$.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return hv(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...e.heartbeats]})}})()}}function pa(n){return(0,ze.L)(JSON.stringify({version:2,heartbeats:n})).length}!function Px(n){vi(new yr.wA("platform-logger",e=>new ub(e),"PRIVATE")),vi(new yr.wA("heartbeat",e=>new bb(e),"PRIVATE")),wi(ns,"0.9.19",n),wi(ns,"0.9.19","esm2017"),wi("fire-js","")}("");const Nx=(n,e)=>e.some(t=>n instanceof t);let Cu,Rx;const mv=new WeakMap,pg=new WeakMap,kx=new WeakMap,ga=new WeakMap,yv=new WeakMap;let ma={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pg.get(n);if("objectStoreNames"===e)return n.objectStoreNames||kx.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gn(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function mg(n){return"function"==typeof n?function gg(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function EF(){return Rx||(Rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Sb(this),e),Gn(mv.get(this))}:function(...e){return Gn(n.apply(Sb(this),e))}:function(e,...t){const r=n.call(Sb(this),e,...t);return kx.set(r,e.sort?e.sort():[e]),Gn(r)}}(n):(n instanceof IDBTransaction&&function Lx(n){if(pg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",l),n.removeEventListener("abort",l)},u=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",u),n.addEventListener("error",l),n.addEventListener("abort",l)});pg.set(n,e)}(n),Nx(n,function gv(){return Cu||(Cu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,ma):n)}function Gn(n){if(n instanceof IDBRequest)return function Fx(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",u),n.removeEventListener("error",l)},u=()=>{t(Gn(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",u),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&mv.set(t,n)}).catch(()=>{}),yv.set(e,n),e}(n);if(ga.has(n))return ga.get(n);const e=mg(n);return e!==n&&(ga.set(n,e),yv.set(e,n)),e}const Sb=n=>yv.get(n),Bx=["get","getKey","getAll","getAllKeys","count"],Mb=["put","add","delete","clear"],yg=new Map;function _v(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(yg.get(e))return yg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Mb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Bx.includes(t))return;const u=function(){var l=(0,$.Z)(function*(g,..._){const E=this.transaction(g,s?"readwrite":"readonly");let b=E.store;return r&&(b=b.index(_.shift())),(yield Promise.all([b[t](..._),s&&E.done]))[0]});return function(_){return l.apply(this,arguments)}}();return yg.set(e,u),u}!function Ux(n){ma=n(ma)}(n=>({...n,get:(e,t,r)=>_v(e,t)||n.get(e,t,r),has:(e,t)=>!!_v(e,t)||n.has(e,t)}));const vv="@firebase/installations",wv="0.6.4",xb=1e4,Ob=`w:${wv}`,rl="FIS_v2",jx="https://firebaseinstallations.googleapis.com/v1",$x=36e5,oo=new ze.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Iv(n){return n instanceof ze.ZR&&n.code.includes("request-failed")}function Ev({projectId:n}){return`${jx}/projects/${n}/installations`}function il(n){return{token:n.token,requestStatus:2,expiresIn:kb(n.expiresIn),creationTime:Date.now()}}function bu(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,$.Z)(function*(n,e){const r=(yield e.json()).error;return oo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),Cv.apply(this,arguments)}function Nb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vg(n){return wg.apply(this,arguments)}function wg(){return wg=(0,$.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),wg.apply(this,arguments)}function kb(n){return Number(n.replace("s","000"))}function bv(){return bv=(0,$.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Ev(n),s=Nb(n),u=e.getImmediate({optional:!0});if(u){const E=yield u.getHeartbeatsHeader();E&&s.append("x-firebase-client",E)}const g={method:"POST",headers:s,body:JSON.stringify({fid:t,authVersion:rl,appId:n.appId,sdkVersion:Ob})},_=yield vg(()=>fetch(r,g));if(_.ok){const E=yield _.json();return{fid:E.fid||t,registrationStatus:2,refreshToken:E.refreshToken,authToken:il(E.authToken)}}throw yield bu("Create Installation",_)}),bv.apply(this,arguments)}function Lb(n){return new Promise(e=>{setTimeout(e,n)})}const bF=/^[cdef][\w-]{21}$/,Ub="";function DF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Vb(n){return function CF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return bF.test(t)?t:Ub}catch{return Ub}}function Ro(n){return`${n.appName}!${n.appId}`}const sl=new Map;function Bb(n,e){const t=Ro(n);$b(t,e),function Gx(n,e){const t=function Hb(){return!Du&&"BroadcastChannel"in self&&(Du=new BroadcastChannel("[Firebase] FID Change"),Du.onmessage=n=>{$b(n.data.key,n.data.fid)}),Du}();t&&t.postMessage({key:n,fid:e}),function qx(){0===sl.size&&Du&&(Du.close(),Du=null)}()}(t,e)}function $b(n,e){const t=sl.get(n);if(t)for(const r of t)r(e)}let Du=null;const Wx="firebase-installations-database",zb=1,Tu="firebase-installations-store";let Dv=null;function Su(){return Dv||(Dv=function Ab(n,e,{blocked:t,upgrade:r,blocking:s,terminated:u}={}){const l=indexedDB.open(n,e),g=Gn(l);return r&&l.addEventListener("upgradeneeded",_=>{r(Gn(l.result),_.oldVersion,_.newVersion,Gn(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),g.then(_=>{u&&_.addEventListener("close",()=>u()),s&&_.addEventListener("versionchange",()=>s())}).catch(()=>{}),g}(Wx,zb,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Tu)}})),Dv}function Ig(n,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,$.Z)(function*(n,e){const t=Ro(n),s=(yield Su()).transaction(Tu,"readwrite"),u=s.objectStore(Tu),l=yield u.get(t);return yield u.put(e,t),yield s.done,(!l||l.fid!==e.fid)&&Bb(n,e.fid),e}),Eg.apply(this,arguments)}function Tv(n){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,$.Z)(function*(n){const e=Ro(n),r=(yield Su()).transaction(Tu,"readwrite");yield r.objectStore(Tu).delete(e),yield r.done}),Cg.apply(this,arguments)}function Rh(n,e){return bg.apply(this,arguments)}function bg(){return bg=(0,$.Z)(function*(n,e){const t=Ro(n),s=(yield Su()).transaction(Tu,"readwrite"),u=s.objectStore(Tu),l=yield u.get(t),g=e(l);return void 0===g?yield u.delete(t):yield u.put(g,t),yield s.done,g&&(!l||l.fid!==g.fid)&&Bb(n,g.fid),g}),bg.apply(this,arguments)}function Sv(n){return kh.apply(this,arguments)}function kh(){return kh=(0,$.Z)(function*(n){let e;const t=yield Rh(n.appConfig,r=>{const s=function Zx(n){return Wb(n||{fid:DF(),registrationStatus:0})}(r),u=function Gb(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(oo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function qb(n,e){return Av.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Kx(n)}:{installationEntry:e}}(n,s);return e=u.registrationPromise,u.installationEntry});return t.fid===Ub?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),kh.apply(this,arguments)}function Av(){return Av=(0,$.Z)(function*(n,e){try{const t=yield function Fb(n,e){return bv.apply(this,arguments)}(n,e);return Ig(n.appConfig,t)}catch(t){throw Iv(t)&&409===t.customData.serverCode?yield Tv(n.appConfig):yield Ig(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Av.apply(this,arguments)}function Kx(n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,$.Z)(function*(n){let e=yield Dg(n.appConfig);for(;1===e.registrationStatus;)yield Lb(100),e=yield Dg(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Sv(n);return r||t}return e}),Mv.apply(this,arguments)}function Dg(n){return Rh(n,e=>{if(!e)throw oo.create("installation-not-found");return Wb(e)})}function Wb(n){return function Zb(n){return 1===n.registrationStatus&&n.registrationTime+xb<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function xv(){return xv=(0,$.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Qx(n,{fid:e}){return`${Ev(n)}/${e}/authTokens:generate`}(n,t),s=function Rb(n,{refreshToken:e}){const t=Nb(n);return t.append("Authorization",function zx(n){return`${rl} ${n}`}(e)),t}(n,t),u=e.getImmediate({optional:!0});if(u){const E=yield u.getHeartbeatsHeader();E&&s.append("x-firebase-client",E)}const g={method:"POST",headers:s,body:JSON.stringify({installation:{sdkVersion:Ob,appId:n.appId}})},_=yield vg(()=>fetch(r,g));if(_.ok)return il(yield _.json());throw yield bu("Generate Auth Token",_)}),xv.apply(this,arguments)}function Ov(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,$.Z)(function*(n,e=!1){let t;const r=yield Rh(n.appConfig,u=>{if(!Qb(u))throw oo.create("not-registered");const l=u.authToken;if(!e&&function Xx(n){return 2===n.requestStatus&&!function Jb(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+$x}(n)}(l))return u;if(1===l.requestStatus)return t=function Jx(n,e){return Nv.apply(this,arguments)}(n,e),u;{if(!navigator.onLine)throw oo.create("app-offline");const g=function eO(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(u);return t=function Yb(n,e){return Tg.apply(this,arguments)}(n,g),g}});return t?yield t:r.authToken}),Pv.apply(this,arguments)}function Nv(){return Nv=(0,$.Z)(function*(n,e){let t=yield Kb(n.appConfig);for(;1===t.authToken.requestStatus;)yield Lb(100),t=yield Kb(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Ov(n,e):r}),Nv.apply(this,arguments)}function Kb(n){return Rh(n,e=>{if(!Qb(e))throw oo.create("not-registered");return function tO(n){return 1===n.requestStatus&&n.requestTime+xb<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Tg(){return Tg=(0,$.Z)(function*(n,e){try{const t=yield function Yx(n,e){return xv.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Ig(n.appConfig,r),t}catch(t){if(!Iv(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ig(n.appConfig,r)}else yield Tv(n.appConfig);throw t}}),Tg.apply(this,arguments)}function Qb(n){return void 0!==n&&2===n.registrationStatus}function Rv(){return Rv=(0,$.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Sv(e);return r?r.catch(console.error):Ov(e).catch(console.error),t.fid}),Rv.apply(this,arguments)}function Fh(){return Fh=(0,$.Z)(function*(n,e=!1){const t=n;return yield function Xb(n){return Lh.apply(this,arguments)}(t),(yield Ov(t,e)).token}),Fh.apply(this,arguments)}function Lh(){return Lh=(0,$.Z)(function*(n){const{registrationPromise:e}=yield Sv(n);e&&(yield e)}),Lh.apply(this,arguments)}function eD(n){return oo.create("missing-app-config-values",{valueName:n})}const Ag="installations",oO=n=>{const e=n.getProvider("app").getImmediate(),t=function sO(n){if(!n||!n.options)throw eD("App Configuration");if(!n.name)throw eD("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw eD(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:nl(e,"heartbeat"),_delete:()=>Promise.resolve()}},tD=n=>{const t=nl(n.getProvider("app").getImmediate(),Ag).getImmediate();return{getId:()=>function nO(n){return Rv.apply(this,arguments)}(t),getToken:s=>function kv(n){return Fh.apply(this,arguments)}(t,s)}};(function nD(){vi(new yr.wA(Ag,oO,"PUBLIC")),vi(new yr.wA("installations-internal",tD,"PRIVATE"))})(),wi(vv,wv),wi(vv,wv,"esm2017");const Vv="@firebase/remote-config",ri=new ze.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pO{constructor(e,t,r,s){this.client=e,this.storage=t,this.storageCache=r,this.logger=s}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,s=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${s}.`),s}fetch(e){var t=this;return(0,$.Z)(function*(){const[r,s]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(s&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return s;e.eTag=s&&s.eTag;const u=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&l.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(l),u})()}}function gO(n=navigator){return n.languages&&n.languages[0]||n.language}class mO{constructor(e,t,r,s,u,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=s,this.apiKey=u,this.appId=l}fetch(e){var t=this;return(0,$.Z)(function*(){const[r,s]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,g={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},_={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:s,app_id:t.appId,language_code:gO()},E={method:"POST",headers:g,body:JSON.stringify(_)},b=fetch(l,E),S=new Promise((Fe,et)=>{e.signal.addEventListener(()=>{const Ze=new Error("The operation was aborted.");Ze.name="AbortError",et(Ze)})});let F;try{yield Promise.race([b,S]),F=yield b}catch(Fe){let et="fetch-client-network";throw"AbortError"===Fe?.name&&(et="fetch-timeout"),ri.create(et,{originalErrorMessage:Fe?.message})}let G=F.status;const ie=F.headers.get("ETag")||void 0;let le,ae;if(200===F.status){let Fe;try{Fe=yield F.json()}catch(et){throw ri.create("fetch-client-parse",{originalErrorMessage:et?.message})}le=Fe.entries,ae=Fe.state}if("INSTANCE_STATE_UNSPECIFIED"===ae?G=500:"NO_CHANGE"===ae?G=304:("NO_TEMPLATE"===ae||"EMPTY_CONFIG"===ae)&&(le={}),304!==G&&200!==G)throw ri.create("fetch-status",{httpStatus:G});return{status:G,eTag:ie,config:le}})()}}class aD{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,$.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var s=this;return(0,$.Z)(function*(){yield function yO(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),u=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(u),r(ri.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield s.client.fetch(e);return yield s.storage.deleteThrottleMetadata(),u}catch(u){if(!function Uh(n){if(!(n instanceof ze.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const l={throttleEndTimeMillis:Date.now()+(0,ze.$s)(r),backoffCount:r+1};return yield s.storage.setThrottleMetadata(l),s.attemptFetch(e,l)}})()}}class lD{constructor(e,t,r,s,u){this.app=e,this._client=t,this._storageCache=r,this._storage=s,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vh(n,e){const t=n.target.error||void 0;return ri.create(e,{originalErrorMessage:t&&t?.message})}const ya="app_namespace_store";class dD{constructor(e,t,r,s=function PF(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Vh(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ya,{keyPath:"compositeKey"})}}catch(t){e(ri.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=s}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,$.Z)(function*(){const r=yield t.openDbPromise;return new Promise((s,u)=>{const g=r.transaction([ya],"readonly").objectStore(ya),_=t.createCompositeKey(e);try{const E=g.get(_);E.onerror=b=>{u(Vh(b,"storage-get"))},E.onsuccess=b=>{const S=b.target.result;s(S?S.value:void 0)}}catch(E){u(ri.create("storage-get",{originalErrorMessage:E?.message}))}})})()}set(e,t){var r=this;return(0,$.Z)(function*(){const s=yield r.openDbPromise;return new Promise((u,l)=>{const _=s.transaction([ya],"readwrite").objectStore(ya),E=r.createCompositeKey(e);try{const b=_.put({compositeKey:E,value:t});b.onerror=S=>{l(Vh(S,"storage-set"))},b.onsuccess=()=>{u()}}catch(b){l(ri.create("storage-set",{originalErrorMessage:b?.message}))}})})()}delete(e){var t=this;return(0,$.Z)(function*(){const r=yield t.openDbPromise;return new Promise((s,u)=>{const g=r.transaction([ya],"readwrite").objectStore(ya),_=t.createCompositeKey(e);try{const E=g.delete(_);E.onerror=b=>{u(Vh(b,"storage-delete"))},E.onsuccess=()=>{s()}}catch(E){u(ri.create("storage-delete",{originalErrorMessage:E?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class vO{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,$.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),s=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const g=yield s;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Bh(){return qv.apply(this,arguments)}function qv(){return(qv=(0,$.Z)(function*(){if(!(0,ze.hl)())return!1;try{return yield(0,ze.eu)()}catch{return!1}})).apply(this,arguments)}!function hD(){vi(new yr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ri.create("registration-window");if(!(0,ze.hl)())throw ri.create("indexed-db-unavailable");const{projectId:u,apiKey:l,appId:g}=r.options;if(!u)throw ri.create("registration-project-id");if(!l)throw ri.create("registration-api-key");if(!g)throw ri.create("registration-app-id");const _=new dD(g,r.name,t=t||"firebase"),E=new vO(_),b=new ts.Yd(Vv);b.logLevel=ts.in.ERROR;const S=new mO(s,"10.4.0",t,u,l,g),F=new aD(S,_),G=new pO(F,_,E,b),ie=new lD(r,G,E,_,b);return function lO(n){const e=(0,ze.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(ie),ie},"PUBLIC").setMultipleInstances(!0)),wi(Vv,"0.4.4"),wi(Vv,"0.4.4","esm2017")}();const Wv=(n,e)=>e.some(t=>n instanceof t);let fD,wO;const al=new WeakMap,Zv=new WeakMap,pD=new WeakMap,Kv=new WeakMap,ul=new WeakMap;let Og={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Zv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||pD.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ao(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function bO(n){return"function"==typeof n?function CO(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function RF(){return wO||(wO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Yv(this),e),ao(al.get(this))}:function(...e){return ao(n.apply(Yv(this),e))}:function(e,...t){const r=n.call(Yv(this),e,...t);return pD.set(r,e.sort?e.sort():[e]),ao(r)}}(n):(n instanceof IDBTransaction&&function EO(n){if(Zv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",l),n.removeEventListener("abort",l)},u=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",u),n.addEventListener("error",l),n.addEventListener("abort",l)});Zv.set(n,e)}(n),Wv(n,function IO(){return fD||(fD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Og):n)}function ao(n){if(n instanceof IDBRequest)return function gD(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",u),n.removeEventListener("error",l)},u=()=>{t(ao(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",u),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&al.set(t,n)}).catch(()=>{}),ul.set(e,n),e}(n);if(Kv.has(n))return Kv.get(n);const e=bO(n);return e!==n&&(Kv.set(n,e),ul.set(e,n)),e}const Yv=n=>ul.get(n);function mD(n,e,{blocked:t,upgrade:r,blocking:s,terminated:u}={}){const l=indexedDB.open(n,e),g=ao(l);return r&&l.addEventListener("upgradeneeded",_=>{r(ao(l.result),_.oldVersion,_.newVersion,ao(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),g.then(_=>{u&&_.addEventListener("close",()=>u()),s&&_.addEventListener("versionchange",()=>s())}).catch(()=>{}),g}function Ng(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),ao(t).then(()=>{})}const Rg=["get","getKey","getAll","getAllKeys","count"],DO=["put","add","delete","clear"],Qv=new Map;function Jv(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Qv.get(e))return Qv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=DO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Rg.includes(t))return;const u=function(){var l=(0,$.Z)(function*(g,..._){const E=this.transaction(g,s?"readwrite":"readonly");let b=E.store;return r&&(b=b.index(_.shift())),(yield Promise.all([b[t](..._),s&&E.done]))[0]});return function(_){return l.apply(this,arguments)}}();return Qv.set(e,u),u}!function Pg(n){Og=n(Og)}(n=>({...n,get:(e,t,r)=>Jv(e,t)||n.get(e,t,r),has:(e,t)=>!!Jv(e,t)||n.has(e,t)}));const yD="/firebase-messaging-sw.js",Xv="/firebase-cloud-messaging-push-scope",e0="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",TO="https://fcmregistrations.googleapis.com/v1",t0="google.c.a.c_id",_D="google.c.a.c_l",SO="google.c.a.ts";var cl=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(cl||{});function uo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function r0(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),s=new Uint8Array(r.length);for(let u=0;u<r.length;++u)s[u]=r.charCodeAt(u);return s}const jh="fcm_token_details_db",MO=5,vD="fcm_token_object_Store";function s0(){return s0=(0,$.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(jh))return null;let e=null;return(yield mD(jh,MO,{upgrade:(r=(0,$.Z)(function*(s,u,l,g){var _;if(u<2||!s.objectStoreNames.contains(vD))return;const E=g.objectStore(vD),b=yield E.index("fcmSenderId").get(n);if(yield E.clear(),b)if(2===u){const S=b;if(!S.auth||!S.p256dh||!S.endpoint)return;e={token:S.fcmToken,createTime:null!==(_=S.createTime)&&void 0!==_?_:Date.now(),subscriptionOptions:{auth:S.auth,p256dh:S.p256dh,endpoint:S.endpoint,swScope:S.swScope,vapidKey:"string"==typeof S.vapidKey?S.vapidKey:uo(S.vapidKey)}}}else if(3===u){const S=b;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:uo(S.auth),p256dh:uo(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:uo(S.vapidKey)}}}else if(4===u){const S=b;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:uo(S.auth),p256dh:uo(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:uo(S.vapidKey)}}}}),function(u,l,g,_){return r.apply(this,arguments)})})).close(),yield Ng(jh),yield Ng("fcm_vapid_details_db"),yield Ng("undefined"),function wD(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),s0.apply(this,arguments)}const o0="firebase-messaging-database",ID=1,Au="firebase-messaging-store";let kg=null;function Fg(){return kg||(kg=mD(o0,ID,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Au)}})),kg}function ED(n){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,$.Z)(function*(n){const e=Fr(n),r=yield(yield Fg()).transaction(Au).objectStore(Au).get(e);if(r)return r;{const s=yield function xO(n){return s0.apply(this,arguments)}(n.appConfig.senderId);if(s)return yield Ug(n,s),s}}),Lg.apply(this,arguments)}function Ug(n,e){return a0.apply(this,arguments)}function a0(){return a0=(0,$.Z)(function*(n,e){const t=Fr(n),s=(yield Fg()).transaction(Au,"readwrite");return yield s.objectStore(Au).put(e,t),yield s.done,e}),a0.apply(this,arguments)}function Vg(){return Vg=(0,$.Z)(function*(n){const e=Fr(n),r=(yield Fg()).transaction(Au,"readwrite");yield r.objectStore(Au).delete(e),yield r.done}),Vg.apply(this,arguments)}function Fr({appConfig:n}){return n.appId}const Lr=new ze.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function OO(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,$.Z)(function*(n,e){const t=yield SD(n),r=AD(e),s={method:"POST",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(TD(n.appConfig),s)).json()}catch(l){throw Lr.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(u.error)throw Lr.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Lr.create("token-subscribe-no-token");return u.token}),bD.apply(this,arguments)}function Bg(){return Bg=(0,$.Z)(function*(n,e){const t=yield SD(n),r=AD(e.subscriptionOptions),s={method:"PATCH",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(`${TD(n.appConfig)}/${e.token}`,s)).json()}catch(l){throw Lr.create("token-update-failed",{errorInfo:l?.toString()})}if(u.error)throw Lr.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Lr.create("token-update-no-token");return u.token}),Bg.apply(this,arguments)}function jg(n,e){return DD.apply(this,arguments)}function DD(){return DD=(0,$.Z)(function*(n,e){const r={method:"DELETE",headers:yield SD(n)};try{const u=yield(yield fetch(`${TD(n.appConfig)}/${e}`,r)).json();if(u.error)throw Lr.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(s){throw Lr.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}),DD.apply(this,arguments)}function TD({projectId:n}){return`${TO}/projects/${n}/registrations`}function SD(n){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,$.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),Mu.apply(this,arguments)}function AD({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const s={web:{endpoint:t,auth:e,p256dh:n}};return r!==e0&&(s.web.applicationPubKey=r),s}const u0=6048e5;function $g(){return $g=(0,$.Z)(function*(n){const e=yield function Hg(n,e){return Hh.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:uo(e.getKey("auth")),p256dh:uo(e.getKey("p256dh"))},r=yield ED(n.firebaseDependencies);if(r){if(function FF(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+u0?function NO(n,e){return $h.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield jg(n.firebaseDependencies,r.token)}catch(s){console.warn(s)}return l0(n.firebaseDependencies,t)}return l0(n.firebaseDependencies,t)}),$g.apply(this,arguments)}function c0(){return c0=(0,$.Z)(function*(n){const e=yield ED(n.firebaseDependencies);e&&(yield jg(n.firebaseDependencies,e.token),yield function CD(n){return Vg.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),c0.apply(this,arguments)}function $h(){return $h=(0,$.Z)(function*(n,e){try{const t=yield function kF(n,e){return Bg.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Ug(n.firebaseDependencies,r),t}catch(t){throw yield function MD(n){return c0.apply(this,arguments)}(n),t}}),$h.apply(this,arguments)}function l0(n,e){return d0.apply(this,arguments)}function d0(){return d0=(0,$.Z)(function*(n,e){const r={token:yield OO(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Ug(n,r),r.token}),d0.apply(this,arguments)}function Hh(){return Hh=(0,$.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r0(e)})}),Hh.apply(this,arguments)}function h0(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function RO(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const s=e.notification.image;s&&(n.notification.image=s);const u=e.notification.icon;u&&(n.notification.icon=u)}(e,n),function xD(n,e){e.data&&(n.data=e.data)}(e,n),function dl(n,e){var t,r,s,u,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const g=null!==(s=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==s?s:null===(u=e.notification)||void 0===u?void 0:u.click_action;g&&(n.fcmOptions.link=g);const _=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;_&&(n.fcmOptions.analyticsLabel=_)}(e,n),e}function f0(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function OD(n){return Lr.create("missing-app-config-values",{valueName:n})}f0("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),f0("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class FO{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=function p0(n){if(!n||!n.options)throw OD("App Configuration Object");if(!n.name)throw OD("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw OD(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function g0(){return g0=(0,$.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(yD,{scope:Xv}),n.swRegistration.update().catch(()=>{})}catch(e){throw Lr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),g0.apply(this,arguments)}function m0(){return m0=(0,$.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function LO(n){return g0.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Lr.create("invalid-sw-registration");n.swRegistration=e}}),m0.apply(this,arguments)}function zg(){return zg=(0,$.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=e0)}),zg.apply(this,arguments)}function Gg(){return Gg=(0,$.Z)(function*(n,e){if(!navigator)throw Lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Lr.create("permission-blocked");return yield function PD(n,e){return zg.apply(this,arguments)}(n,e?.vapidKey),yield function UO(n,e){return m0.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function PO(n){return $g.apply(this,arguments)}(n)}),Gg.apply(this,arguments)}function y0(){return y0=(0,$.Z)(function*(n,e,t){const r=function VO(n){switch(n){case cl.NOTIFICATION_CLICKED:return"notification_open";case cl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[t0],message_name:t[_D],message_time:t[SO],message_device_time:Math.floor(Date.now()/1e3)})}),y0.apply(this,arguments)}function _0(){return _0=(0,$.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===cl.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(h0(t)):n.onMessageHandler.next(h0(t)));const r=t.data;(function kO(n){return"object"==typeof n&&!!n&&t0 in n})(r)&&"1"===r["google.c.a.e"]&&(yield function RD(n,e,t){return y0.apply(this,arguments)}(n,t.messageType,r))}),_0.apply(this,arguments)}const v0="@firebase/messaging",FD=n=>{const e=new FO(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function kD(n,e){return _0.apply(this,arguments)}(e,t)),e},LD=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function ND(n,e){return Gg.apply(this,arguments)}(e,r)}};function UD(){return VD.apply(this,arguments)}function VD(){return(VD=(0,$.Z)(function*(){try{yield(0,ze.eu)()}catch{return!1}return typeof window<"u"&&(0,ze.hl)()&&(0,ze.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function UF(n=vb()){return UD().then(e=>{if(!e)throw Lr.create("unsupported-browser")},e=>{throw Lr.create("indexed-db-unsupported")}),nl((0,ze.m9)(n),"messaging").getImmediate()}!function BO(){vi(new yr.wA("messaging",FD,"PUBLIC")),vi(new yr.wA("messaging-internal",LD,"PRIVATE")),wi(v0,"0.12.4"),wi(v0,"0.12.4","esm2017")}();const I0="analytics",VF="firebase_id",HD="origin",E0=6e4,zD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",C0="https://www.googletagmanager.com/gtag/js",qn=new ts.Yd("@firebase/analytics"),Ii=new ze.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function BF(n){if(!n.startsWith(C0)){const e=Ii.create("invalid-gtag-resource",{gtagURL:n});return qn.warn(e.message),""}return n}function GD(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function WD(){return WD=(0,$.Z)(function*(n,e,t,r,s,u){const l=r[s];try{if(l)yield e[l];else{const _=(yield GD(t)).find(E=>E.measurementId===s);_&&(yield e[_.appId])}}catch(g){qn.error(g)}n("config",s,u)}),WD.apply(this,arguments)}function xu(){return xu=(0,$.Z)(function*(n,e,t,r,s){try{let u=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const g=yield GD(t);for(const _ of l){const E=g.find(S=>S.measurementId===_),b=E&&e[E.appId];if(!b){u=[];break}u.push(b)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,s||{})}catch(u){qn.error(u)}}),xu.apply(this,arguments)}const ZO=30,ZD=new class YO{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function b0(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function D0(){return D0=(0,$.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:b0(r)},u=zD.replace("{app-id}",t),l=yield fetch(u,s);if(200!==l.status&&304!==l.status){let g="";try{const _=yield l.json();null!==(e=_.error)&&void 0!==e&&e.message&&(g=_.error.message)}catch{}throw Ii.create("config-fetch-failed",{httpStatus:l.status,responseMessage:g})}return l.json()}),D0.apply(this,arguments)}function T0(){return T0=(0,$.Z)(function*(n,e=ZD,t){const{appId:r,apiKey:s,measurementId:u}=n.options;if(!r)throw Ii.create("no-app-id");if(!s){if(u)return{measurementId:u,appId:r};throw Ii.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new tP;return setTimeout((0,$.Z)(function*(){g.abort()}),void 0!==t?t:E0),KD({appId:r,apiKey:s,measurementId:u},l,g,e)}),T0.apply(this,arguments)}function KD(n,e,t){return S0.apply(this,arguments)}function S0(){return S0=(0,$.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=ZD){var u;const{appId:l,measurementId:g}=n;try{yield function XO(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),u=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(u),r(Ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(_){if(g)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:l,measurementId:g};throw _}try{const _=yield function QO(n){return D0.apply(this,arguments)}(n);return s.deleteThrottleMetadata(l),_}catch(_){const E=_;if(!function eP(n){if(!(n instanceof ze.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(E)){if(s.deleteThrottleMetadata(l),g)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${E?.message}]`),{appId:l,measurementId:g};throw _}const b=503===Number(null===(u=E?.customData)||void 0===u?void 0:u.httpStatus)?(0,ze.$s)(t,s.intervalMillis,ZO):(0,ze.$s)(t,s.intervalMillis),S={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return s.setThrottleMetadata(l,S),qn.debug(`Calling attemptFetch again in ${b} millis`),KD(n,S,r,s)}}),S0.apply(this,arguments)}class tP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Wg,zh;function M0(){return M0=(0,$.Z)(function*(n,e,t,r,s){if(s&&s.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}}),M0.apply(this,arguments)}function Gh(){return Gh=(0,$.Z)(function*(){if(!(0,ze.hl)())return qn.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ze.eu)()}catch(n){return qn.warn(Ii.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Gh.apply(this,arguments)}function eT(){return eT=(0,$.Z)(function*(n,e,t,r,s,u,l){var g;const _=function JO(n){return T0.apply(this,arguments)}(n);_.then(G=>{t[G.measurementId]=G.appId,n.options.measurementId&&G.measurementId!==n.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${G.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(G=>qn.error(G)),e.push(_);const E=function N0(){return Gh.apply(this,arguments)}().then(G=>{if(G)return r.getId()}),[b,S]=yield Promise.all([_,E]);(function WO(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(C0)&&t.src.includes(n))return t;return null})(u)||function $O(n,e){const t=function qD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:BF}),r=document.createElement("script"),s=`${C0}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}(u,b.measurementId),zh&&(s("consent","default",zh),function ko(n){zh=n}(void 0)),s("js",new Date);const F=null!==(g=l?.config)&&void 0!==g?g:{};return F[HD]="firebase",F.update=!0,null!=S&&(F[VF]=S),s("config",b.measurementId,F),Wg&&(s("set",Wg),function P0(n){Wg=n}(void 0)),b.measurementId}),eT.apply(this,arguments)}class tT{constructor(e){this.app=e}_delete(){return delete co[this.app.options.appId],Promise.resolve()}}let co={},nT=[];const rT={};let iP,xs,Yg="dataLayer",k0=!1;function F0(n,e,t){!function jF(){const n=[];if((0,ze.ru)()&&n.push("This is a browser extension environment."),(0,ze.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Ii.create("invalid-analytics-context",{errorInfo:e});qn.warn(t.message)}}();const r=n.options.appId;if(!r)throw Ii.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ii.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=co[r])throw Ii.create("already-exists",{id:r});if(!k0){!function HO(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Yg);const{wrappedGtag:u,gtagCore:l}=function qO(n,e,t,r,s){let u=function(...l){window[r].push(arguments)};return window[s]&&"function"==typeof window[s]&&(u=window[s]),window[s]=function qg(n,e,t,r){function u(){return u=(0,$.Z)(function*(l,...g){try{if("event"===l){const[_,E]=g;yield function GO(n,e,t,r,s){return xu.apply(this,arguments)}(n,e,t,_,E)}else if("config"===l){const[_,E]=g;yield function zO(n,e,t,r,s,u){return WD.apply(this,arguments)}(n,e,t,r,_,E)}else if("consent"===l){const[_]=g;n("consent","update",_)}else if("get"===l){const[_,E,b]=g;n("get",_,E,b)}else if("set"===l){const[_]=g;n("set",_)}else n(l,...g)}catch(_){qn.error(_)}}),u.apply(this,arguments)}return function s(l){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[s]}}(co,nT,rT,Yg,"gtag");xs=u,iP=l,k0=!0}return co[r]=function rP(n,e,t,r,s,u,l){return eT.apply(this,arguments)}(n,nT,rT,e,iP,Yg,t),new tT(n)}function aP(){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,$.Z)(function*(){if((0,ze.ru)()||!(0,ze.zI)()||!(0,ze.hl)())return!1;try{return yield(0,ze.eu)()}catch{return!1}})).apply(this,arguments)}const sT="@firebase/analytics";!function GF(){vi(new yr.wA(I0,(e,{options:t})=>F0(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),vi(new yr.wA("analytics-internal",function n(e){try{const t=e.getProvider(I0).getImmediate();return{logEvent:(r,s,u)=>function zF(n,e,t,r){n=(0,ze.m9)(n),function A0(n,e,t,r,s){return M0.apply(this,arguments)}(xs,co[n.app.options.appId],e,t,r).catch(s=>qn.error(s))}(t,r,s,u)}}catch(t){throw Ii.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),wi(sT,"0.10.0"),wi(sT,"0.10.0","esm2017")}();const aT=new class WF extends gE{}(class qF extends rh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Wh=N(5137),fl=N(3093);const Zh=new d.GfV("7.6.1"),uT="__angularfire_symbol__analyticsIsSupportedValue",cT="__angularfire_symbol__analyticsIsSupported",lT="__angularfire_symbol__remoteConfigIsSupportedValue",dT="__angularfire_symbol__remoteConfigIsSupported",L0="__angularfire_symbol__messagingIsSupportedValue",pl="__angularfire_symbol__messagingIsSupported";globalThis[cT]||(globalThis[cT]=aP().then(n=>globalThis[uT]=n).catch(()=>globalThis[uT]=!1)),globalThis[pl]||(globalThis[pl]=UD().then(n=>globalThis[L0]=n).catch(()=>globalThis[L0]=!1)),globalThis[dT]||(globalThis[dT]=Bh().then(n=>globalThis[lT]=n).catch(()=>globalThis[lT]=!1));const Jg={async:()=>globalThis[pl],sync:()=>{const n=globalThis[L0];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function ml(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(l=>l.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Ou=(n,e)=>{const t=e?[e]:(0,xn.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function _a(){}class hT{constructor(e,t=aT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(l){s.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class V0{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_a,{},_a,_a)),t.pipe(En({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fo=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new hT(Zone.current)),this.insideAngular=t.run(()=>new hT(Zone.current,Lp)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lo(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function yl(n){return lo().ngZone.run(()=>n())}function ki(n){return lo(),function pP(n){return function(t){return(t=t.lift(new V0(n.ngZone))).pipe((0,Wh.R)(n.outsideAngular),(0,fl.Q)(n.insideAngular))}}(lo())(n)}const gP=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),yl(()=>n.apply(void 0,r))},Kh=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=yl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_a,{},_a,_a)))),r[u]=gP(r[u],t));const s=function KF(n){return lo().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(s instanceof xr.y){const u=lo();return s.pipe((0,Wh.R)(u.outsideAngular),(0,fl.Q)(u.insideAngular))}return yl(()=>s)}return s instanceof xr.y?s.pipe(ki):s instanceof Promise?yl(()=>new Promise((u,l)=>s.then(g=>yl(()=>u(g)),g=>yl(()=>l(g))))):"function"==typeof s&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),s.apply(this,arguments)}:yl(()=>s)};function Xg(){return(0,Pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,pr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var We,fT=N(3997),rs=N(6304),mP=(N(8661),N(3399)),pT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fi={},em=em||{},It=pT||self;function tm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gT="closure_uid_"+(1e9*Math.random()>>>0),yP=0;function _P(n,e,t){return n.call.apply(n.bind,arguments)}function vP(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function qr(n,e,t){return(qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_P:vP).apply(null,arguments)}function Qh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function va(){this.s=this.s,this.o=this.o}va.prototype.s=!1,va.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function QF(n){Object.prototype.hasOwnProperty.call(n,gT)&&n[gT]||(n[gT]=++yP)}(this)},va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const B0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function yT(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _T(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tm(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var vT=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function _l(n){return/^[\s\xa0]*$/.test(n)}function nm(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Li(n){return-1!=nm().indexOf(n)}function j0(n){return j0[" "](n),n}j0[" "]=function(){};var IT,wT=Li("Opera"),Pu=Li("Trident")||Li("MSIE"),IP=Li("Edge"),$0=IP||Pu,EP=Li("Gecko")&&!(-1!=nm().toLowerCase().indexOf("webkit")&&!Li("Edge"))&&!(Li("Trident")||Li("MSIE"))&&!Li("Edge"),CP=-1!=nm().toLowerCase().indexOf("webkit")&&!Li("Edge");function bP(){var n=It.document;return n?n.documentMode:void 0}e:{var H0="",z0=function(){var n=nm();return EP?/rv:([^\);]+)(\)|;)/.exec(n):IP?/Edge\/([\d\.]+)/.exec(n):Pu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):CP?/WebKit\/(\S+)/.exec(n):wT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(z0&&(H0=z0?z0[1]:""),Pu){var ET=bP();if(null!=ET&&ET>parseFloat(H0)){IT=String(ET);break e}}IT=H0}var JF=It.document&&Pu&&(bP()||parseInt(IT,10))||void 0;function rm(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(EP){e:{try{j0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TP[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rm.$.h.call(this)}}cr(rm,_r);var TP={2:"touch",3:"pen",4:"mouse"};rm.prototype.h=function(){rm.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var im="closure_listenable_"+(1e6*Math.random()|0),XF=0;function eL(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++XF,this.fa=this.ia=!1}function G0(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function bT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function AP(n){const e={};for(const t in n)e[t]=n[t];return e}const i="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<i.length;u++)t=i[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function a(n){this.src=n,this.g={},this.h=0}function c(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=B0(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(G0(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function h(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}a.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=h(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new eL(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var f="closure_lm_"+(1e6*Math.random()|0),y={};function v(n,e,t,r,s){if(r&&r.once)return A(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)v(n,e[u],t,r,s);return null}return t=rt(t),n&&n[im]?n.O(e,t,Yh(r)?!!r.capture:!!r,s):C(n,e,t,!1,r,s)}function C(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Yh(s)?!!s.capture:!!s,g=De(n);if(g||(n[f]=g=new a(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function D(){const e=ue;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vT||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Z(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function A(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)A(n,e[u],t,r,s);return null}return t=rt(t),n&&n[im]?n.P(e,t,Yh(r)?!!r.capture:!!r,s):C(n,e,t,!0,r,s)}function k(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)k(n,e[u],t,r,s);else r=Yh(r)?!!r.capture:!!r,t=rt(t),n&&n[im]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=h(u=n.g[e],t,r,s))&&(G0(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=De(n))&&(e=n.g[e.toString()],n=-1,e&&(n=h(e,t,r,s)),(t=-1<n?e[n]:null)&&z(t))}function z(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[im])c(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Z(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=De(e))?(c(t,n),0==t.h&&(t.src=null,e[f]=null)):G0(n)}}}function Z(n){return n in y?y[n]:y[n]="on"+n}function ue(n,e){if(n.fa)n=!0;else{e=new rm(e,this);var t=n.listener,r=n.la||n.src;n.ia&&z(n),n=t.call(r,e)}return n}function De(n){return(n=n[f])instanceof a?n:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(n){return"function"==typeof n?n:(n[$e]||(n[$e]=function(e){return n.handleEvent(e)}),n[$e])}function ce(){va.call(this),this.i=new a(this),this.S=this,this.J=null}function tt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var s=e;o(e=new _r(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=At(l,r,!0,e)&&s}if(s=At(l=e.g=n,r,!0,e)&&s,s=At(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=At(l=e.g=t[u],r,!1,e)&&s}function At(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&c(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}cr(ce,va),ce.prototype[im]=!0,ce.prototype.removeEventListener=function(n,e,t,r){k(this,n,e,t,r)},ce.prototype.N=function(){if(ce.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)G0(t[r]);delete n.g[e],n.h--}}this.J=null},ce.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ce.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var tn=It.JSON.stringify;function Lo(){var n=OP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sm=new class Ci{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new MP,n=>n.reset());class MP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xP(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function eB(n){It.setTimeout(()=>{throw n},0)}let q0,W0=!1,OP=new class vl{constructor(){this.h=this.g=null}add(e,t){const r=sm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},tL=()=>{const n=It.Promise.resolve(void 0);q0=()=>{n.then(tB)}};var tB=()=>{for(var n;n=Lo();){try{n.h.call(n.g)}catch(t){eB(t)}var e=sm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}W0=!1};function DT(n,e){ce.call(this),this.h=n||1,this.g=e||It,this.j=qr(this.qb,this),this.l=Date.now()}function PP(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function NP(n,e,t){if("function"==typeof n)t&&(n=qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function nL(n){n.g=NP(()=>{n.g=null,n.i&&(n.i=!1,nL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}cr(DT,ce),(We=DT.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),tt(this,"tick"),this.ga&&(PP(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){DT.$.N.call(this),PP(this),delete this.g};class nB extends va{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nL(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z0(n){va.call(this),this.h=n,this.g={}}cr(Z0,va);var rL=[];function iL(n,e,t,r){Array.isArray(t)||(t&&(rL[0]=t.toString()),t=rL);for(var s=0;s<t.length;s++){var u=v(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function sL(n){bT(n.g,function(e,t){this.g.hasOwnProperty(t)&&z(e)},n),n.g={}}function TT(){this.g=!0}function om(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return tn(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Z0.prototype.N=function(){Z0.$.N.call(this),sL(this)},Z0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},TT.prototype.Ea=function(){this.g=!1},TT.prototype.info=function(){};var Jh={},oL=null;function ST(){return oL=oL||new ce}function aL(n){_r.call(this,Jh.Ta,n)}function K0(n){const e=ST();tt(e,new aL(e))}function uL(n,e){_r.call(this,Jh.STAT_EVENT,n),this.stat=e}function Ui(n){const e=ST();tt(e,new uL(e,n))}function cL(n,e){_r.call(this,Jh.Ua,n),this.size=e}function Y0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Jh.Ta="serverreachability",cr(aL,_r),Jh.STAT_EVENT="statevent",cr(uL,_r),Jh.Ua="timingevent",cr(cL,_r);var AT={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lL={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function RP(){}function hL(){}RP.prototype.h=null;var LP,Q0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function kP(){_r.call(this,"d")}function FP(){_r.call(this,"c")}function MT(){}function J0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Z0(this),this.P=aB,this.V=new DT(n=$0?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fL}function fL(){this.i=null,this.g="",this.h=!1}cr(kP,_r),cr(FP,_r),cr(MT,RP),MT.prototype.g=function(){return new XMLHttpRequest},MT.prototype.i=function(){return{}},LP=new MT;var aB=45e3,UP={},xT={};function VP(n,e,t){n.L=1,n.v=RT(Nu(e)),n.s=t,n.S=!0,pL(n,null)}function pL(n,e){n.G=Date.now(),X0(n),n.A=Nu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),bL(t.i,"t",r),n.C=0,t=n.l.J,n.h=new fL,n.g=ZL(n.l,t?e:null,!n.s),0<n.O&&(n.M=new nB(qr(n.Pa,n,n.g),n.O)),iL(n.U,n.g,"readystatechange",n.nb),e=n.I?AP(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),K0(),function rB(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var E=g[_].split("=");if(1<E.length){var b=E[0];E=E[1];var S=b.split("_");l=2<=S.length&&"type"==S[1]?l+(b+"=")+E+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function gL(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function mL(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=uB(n,t),s==xT){4==e&&(n.o=4,Ui(14),r=!1),om(n.j,n.m,null,"[Incomplete Response]");break}if(s==UP){n.o=4,Ui(15),om(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}om(n.j,n.m,s,null),BP(n,s)}gL(n)&&s!=xT&&s!=UP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),WP(e),e.M=!0,Ui(11))):(om(n.j,n.m,t,"[Invalid Chunked Response]"),Xh(n),ew(n))}function uB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xT:(t=Number(e.substring(t,r)),isNaN(t)?UP:(r+=1)+t>e.length?xT:(e=e.slice(r,r+t),n.C=r+t,e))}function X0(n){n.Y=Date.now()+n.P,yL(n,n.P)}function yL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Y0(qr(n.lb,n),e)}function OT(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function ew(n){0==n.l.H||n.J||zL(n.l,n)}function Xh(n){OT(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,PP(n.V),sL(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function BP(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||jP(t.i,n)))if(!n.K&&jP(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;BT(t),UT(t)}qP(t),Ui(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Y0(qr(t.ib,t),6e3));if(1>=SL(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else tf(t,11)}else if((n.K||t.g==n)&&BT(t),!_l(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let E=s[e];if(t.V=E[0],E=E[1],2==t.H)if("c"==E[0]){t.K=E[1],t.pa=E[2];const b=E[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=E[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const F=E[5];null!=F&&"number"==typeof F&&0<F&&(t.L=r=1.5*F,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ie=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;u.g||-1==ie.indexOf("spdy")&&-1==ie.indexOf("quic")&&-1==ie.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&($P(u,u.h),u.h=null))}if(r.F){const le=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.Da=le,On(r.I,r.F,le))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=WL(r,r.J?r.pa:null,r.Y),l.K){AL(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(OT(g),X0(g)),r.g=l}else $L(r);0<t.j.length&&VT(t)}else"stop"!=E[0]&&"close"!=E[0]||tf(t,7);else 3==t.H&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?tf(t,7):GP(t):"noop"!=E[0]&&t.h&&t.h.Aa(E),t.A=0)}K0()}catch{}}function _L(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function lB(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function cB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(We=J0.prototype).setTimeout=function(n){this.P=n},We.nb=function(n){n=n.target;const e=this.M;e&&3==wa(n)?e.l():this.Pa(n)},We.Pa=function(n){try{if(n==this.g)e:{const b=wa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||$0||this.g&&(this.h.h||this.g.ja()||FL(this.g)))){this.J||4!=b||7==e||K0(),OT(this);var t=this.g.da();this.ca=t;t:if(gL(this)){var r=FL(this.g);n="";var s=r.length,u=4==wa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xh(this),ew(this);var l="";break t}this.h.i=new It.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function iB(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_l(g)){var E=g;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ui(12),Xh(this),ew(this);break e}om(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,BP(this,t)}this.S?(mL(this,b,l),$0&&this.i&&3==b&&(iL(this.U,this.V,"tick",this.mb),this.V.start())):(om(this.j,this.m,l,null),BP(this,l)),4==b&&Xh(this),this.i&&!this.J&&(4==b?zL(this.l,this):(this.i=!1,X0(this)))}else(function AB(n){const e={};n=(n.g&&2<=wa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_l(n[r]))continue;var t=xP(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function SP(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),Xh(this),ew(this)}}}catch{}},We.mb=function(){if(this.g){var n=wa(this.g),e=this.g.ja();this.C<e.length&&(OT(this),mL(this,n,e),this.i&&4!=n&&X0(this))}},We.cancel=function(){this.J=!0,Xh(this)},We.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function sB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(K0(),Ui(17)),Xh(this),this.o=2,ew(this)):yL(this,this.Y-n)};var vL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ef(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ef){this.h=n.h,PT(this,n.j),this.s=n.s,this.g=n.g,NT(this,n.m),this.l=n.l;var e=n.i,t=new rw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),wL(this,t),this.o=n.o}else n&&(e=String(n).match(vL))?(this.h=!1,PT(this,e[1]||"",!0),this.s=tw(e[2]||""),this.g=tw(e[3]||"",!0),NT(this,e[4]),this.l=tw(e[5]||"",!0),wL(this,e[6]||"",!0),this.o=tw(e[7]||"")):(this.h=!1,this.i=new rw(null,this.h))}function Nu(n){return new ef(n)}function PT(n,e,t){n.j=t?tw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function NT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wL(n,e,t){e instanceof rw?(n.i=e,function yB(n,e){e&&!n.j&&(wl(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(EL(this,r),bL(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nw(e,gB)),n.i=new rw(e,n.h))}function On(n,e,t){n.i.set(e,t)}function RT(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ef.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nw(e,IL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nw(e,IL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nw(t,"/"==t.charAt(0)?pB:fB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nw(t,mB)),n.join("")};var IL=/[#\/\?@]/g,fB=/[#\?:]/g,pB=/[#\?]/g,gB=/[#\?@]/g,mB=/#/g;function rw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wl(n){n.g||(n.g=new Map,n.h=0,n.i&&function dB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function EL(n,e){wl(n),e=am(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CL(n,e){return wl(n),e=am(n,e),n.g.has(e)}function bL(n,e,t){EL(n,e),0<t.length&&(n.i=null,n.g.set(am(n,e),yT(t)),n.h+=t.length)}function am(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function DL(n){this.l=n||vB,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=rw.prototype).add=function(n,e){wl(this),this.i=null,n=am(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){wl(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},We.ta=function(){wl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},We.Z=function(n){wl(this);let e=[];if("string"==typeof n)CL(this,n)&&(e=e.concat(this.g.get(am(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},We.set=function(n,e){return wl(this),this.i=null,CL(this,n=am(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var vB=10;function TL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function SL(n){return n.h?1:n.g?n.g.size:0}function jP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $P(n,e){n.g?n.g.add(e):n.h=e}function AL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ML(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return yT(n.i)}DL.prototype.cancel=function(){if(this.i=ML(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var wB=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function IB(){this.g=new wB}function EB(n,e,t){const r=t||"";try{_L(n,function(s,u){let l=s;Yh(s)&&(l=tn(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function kT(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function iw(n){this.l=n.fc||null,this.j=n.ob||!1}function FT(n,e){ce.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=HP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cr(iw,RP),iw.prototype.g=function(){return new FT(this.l,this.j)},iw.prototype.i=function(n){return function(){return n}}({}),cr(FT,ce);var HP=0;function xL(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function sw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ow(n)}function ow(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=FT.prototype).open=function(n,e){if(this.readyState!=HP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ow(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sw(this)),this.readyState=HP},We.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ow(this)),this.g&&(this.readyState=3,ow(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xL(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sw(this):ow(this),3==this.readyState&&xL(this)}},We.Za=function(n){this.g&&(this.response=this.responseText=n,sw(this))},We.Ya=function(n){this.g&&(this.response=n,sw(this))},We.ka=function(){this.g&&sw(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(FT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bB=It.JSON.parse;function Qn(n){ce.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OL,this.L=this.M=!1}cr(Qn,ce);var OL="",DB=/^https?$/i,TB=["POST","PUT"];function PL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,NL(n),LT(n)}function NL(n){n.F||(n.F=!0,tt(n,"complete"),tt(n,"error"))}function RL(n){if(n.h&&typeof em<"u"&&(!n.C[1]||4!=wa(n)||2!=n.da()))if(n.v&&4==wa(n))NP(n.La,0,n);else if(tt(n,"readystatechange"),4==wa(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(vL)[1]||null;!s&&It.self&&It.self.location&&(s=It.self.location.protocol.slice(0,-1)),r=!DB.test(s?s.toLowerCase():"")}t=r}if(t)tt(n,"complete"),tt(n,"success");else{n.m=6;try{var u=2<wa(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",NL(n)}}finally{LT(n)}}}function LT(n,e){if(n.g){kL(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||tt(n,"ready");try{t.onreadystatechange=r}catch{}}}function kL(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function wa(n){return n.g?n.g.readyState:0}function FL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case OL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function LL(n){let e="";return bT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function zP(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=LL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function aw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UL(n){this.Ga=0,this.j=[],this.l=new TT,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=aw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=aw("baseRetryDelayMs",5e3,n),this.hb=aw("retryDelaySeedMs",1e4,n),this.eb=aw("forwardChannelMaxRetries",2,n),this.xa=aw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new DL(n&&n.concurrentRequestLimit),this.Ja=new IB,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function GP(n){if(VL(n),3==n.H){var e=n.W++,t=Nu(n.I);if(On(t,"SID",n.K),On(t,"RID",e),On(t,"TYPE","terminate"),uw(n,t),(e=new J0(n,n.l,e)).L=2,e.v=RT(Nu(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=ZL(e.l,null),e.g.ha(e.v)),e.G=Date.now(),X0(e)}qL(n)}function UT(n){n.g&&(WP(n),n.g.cancel(),n.g=null)}function VL(n){UT(n),n.u&&(It.clearTimeout(n.u),n.u=null),BT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function VT(n){if(!TL(n.i)&&!n.m){n.m=!0;var e=n.Na;q0||tL(),W0||(q0(),W0=!0),OP.add(e,n),n.C=0}}function BL(n,e){var t;t=e?e.m:n.W++;const r=Nu(n.I);On(r,"SID",n.K),On(r,"RID",t),On(r,"AID",n.V),uw(n,r),n.o&&n.s&&zP(r,n.o,n.s),t=new J0(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=jL(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),$P(n.i,t),VP(t,r,e)}function uw(n,e){n.na&&bT(n.na,function(t,r){On(e,r,t)}),n.h&&_L({},function(t,r){On(e,r,t)})}function jL(n,e,t){t=Math.min(n.j.length,t);var r=n.h?qr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let E=s[_].g;const b=s[_].map;if(E-=u,0>E)u=Math.max(0,s[_].g-100),g=!1;else try{EB(b,l,"req"+E+"_")}catch{r&&r(b)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function $L(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;q0||tL(),W0||(q0(),W0=!0),OP.add(e,n),n.A=0}}function qP(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Y0(qr(n.Ma,n),GL(n,n.A)),n.A++,0))}function WP(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function HL(n){n.g=new J0(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Nu(n.wa);On(e,"RID","rpc"),On(e,"SID",n.K),On(e,"AID",n.V),On(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&On(e,"TO",n.qa),On(e,"TYPE","xmlhttp"),uw(n,e),n.o&&n.s&&zP(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=RT(Nu(e)),t.s=null,t.S=!0,pL(t,n)}function BT(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function zL(n,e){var t=null;if(n.g==e){BT(n),WP(n),n.g=null;var r=2}else{if(!jP(n.i,e))return;t=e.F,AL(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;tt(r=ST(),new cL(r,t)),VT(n)}else $L(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function MB(n,e){return!(SL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Y0(qr(n.Na,n,e),GL(n,n.C)),n.C++,0)))}(n,e)||2==r&&qP(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:tf(n,5);break;case 4:tf(n,10);break;case 3:tf(n,6);break;default:tf(n,2)}}function GL(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function tf(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=qr(n.pb,n);t||(t=new ef("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||PT(t,"https"),RT(t)),function CB(n,e){const t=new TT;if(It.Image){const r=new Image;r.onload=Qh(kT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Qh(kT,t,r,"TestLoadImage: error",!1,e),r.onabort=Qh(kT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qh(kT,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.H=0,n.h&&n.h.za(e),qL(n),VL(n)}function qL(n){if(n.H=0,n.ma=[],n.h){const e=ML(n.i);(0!=e.length||0!=n.j.length)&&(_T(n.ma,e),_T(n.ma,n.j),n.i.i.length=0,yT(n.j),n.j.length=0),n.h.ya()}}function WL(n,e,t){var r=t instanceof ef?Nu(t):new ef(t);if(""!=r.g)e&&(r.g=e+"."+r.g),NT(r,r.m);else{var s=It.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new ef(null);r&&PT(u,r),e&&(u.g=e),s&&NT(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&On(r,t,e),On(r,"VER",n.ra),uw(n,r),r}function ZL(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ha&&!n.va?new iw({ob:!0}):n.va)).Oa(n.J),e}function KL(){}function jT(){if(Pu&&!(10<=Number(JF)))throw Error("Environmental error: no available transport.")}function Os(n,e){ce.call(this),this.g=new UL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_l(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_l(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new um(this)}function YL(n){kP.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QL(){FP.call(this),this.status=1}function um(n){this.g=n}function Uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ZP(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function dn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(We=Qn.prototype).Oa=function(n){this.M=n},We.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():LP.g(),this.C=function dL(n){return n.h||(n.h=n.i())}(this.u?this.u:LP),this.g.onreadystatechange=qr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void PL(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=It.FormData&&n instanceof It.FormData,!(0<=B0(TB,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kL(this),0<this.B&&((this.L=function SB(n){return Pu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qr(this.ua,this)):this.A=NP(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){PL(this,u)}},We.ua=function(){typeof em<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tt(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,tt(this,"complete"),tt(this,"abort"),LT(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),LT(this,!0)),Qn.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?RL(this):this.kb())},We.kb=function(){RL(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<wa(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bB(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=UL.prototype).ra=8,We.H=1,We.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new J0(this,this.l,n);let u=this.s;if(this.U&&(u?(u=AP(u),o(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jL(this,s,e),On(t=Nu(this.I),"RID",n),On(t,"CVER",22),this.F&&On(t,"X-HTTP-Session-Id",this.F),uw(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(LL(u)))+"&"+e:this.o&&zP(t,this.o,u)),$P(this.i,s),this.bb&&On(t,"TYPE","init"),this.P?(On(t,"$req",e),On(t,"SID","null"),s.aa=!0,VP(s,t,null)):VP(s,t,e),this.H=2}}else 3==this.H&&(n?BL(this,n):0==this.j.length||TL(this.i)||BL(this))},We.Ma=function(){if(this.u=null,HL(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Y0(qr(this.jb,this),n)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ui(10),UT(this),HL(this))},We.ib=function(){null!=this.v&&(this.v=null,UT(this),qP(this),Ui(19))},We.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ui(2)):(this.l.info("Failed to ping google.com"),Ui(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=KL.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},jT.prototype.g=function(n,e){return new Os(n,e)},cr(Os,ce),Os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ui(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=WL(n,null,n.Y),VT(n)},Os.prototype.close=function(){GP(this.g)},Os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=tn(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&VT(e)},Os.prototype.N=function(){this.g.h=null,delete this.j,GP(this.g),delete this.g,Os.$.N.call(this)},cr(YL,kP),cr(QL,FP),cr(um,KL),um.prototype.Ba=function(){tt(this.g,"a")},um.prototype.Aa=function(n){tt(this.g,new YL(n))},um.prototype.za=function(n){tt(this.g,new QL)},um.prototype.ya=function(){tt(this.g,"b")},cr(Uo,function xB(){this.blockSize=-1}),Uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Uo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)ZP(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){ZP(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){ZP(this,r),s=0;break}}this.h=s,this.i+=e},Uo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var OB={};function KP(n){return-128<=n&&128>n?function wP(n,e){var t=OB;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new dn([0|e],0>e?-1:0)}):new dn([0|n],0>n?-1:0)}function Ia(n){if(isNaN(n)||!isFinite(n))return cm;if(0>n)return ii(Ia(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=YP;return new dn(e,0)}var YP=4294967296,cm=KP(0),QP=KP(1),XL=KP(16777216);function Ru(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ho(n){return-1==n.h}function ii(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new dn(t,~n.h).add(QP)}function $T(n,e){return n.add(ii(e))}function HT(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function cw(n,e){this.g=n,this.h=e}function zT(n,e){if(Ru(e))throw Error("division by zero");if(Ru(n))return new cw(cm,cm);if(ho(n))return e=zT(ii(n),e),new cw(ii(e.g),ii(e.h));if(ho(e))return e=zT(n,ii(e)),new cw(ii(e.g),e.h);if(30<n.g.length){if(ho(n)||ho(e))throw Error("slowDivide_ only works with positive integers.");for(var t=QP,r=e;0>=r.X(n);)t=e4(t),r=e4(r);var s=lm(t,1),u=lm(r,1);for(r=lm(r,2),t=lm(t,2);!Ru(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=lm(r,1),t=lm(t,1)}return e=$T(n,s.R(e)),new cw(s,e)}for(s=cm;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Ia(t)).R(e);ho(l)||0<l.X(n);)l=(u=Ia(t-=r)).R(e);Ru(u)&&(u=QP),s=s.add(u),n=$T(n,l)}return new cw(s,n)}function e4(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new dn(t,n.h)}function lm(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new dn(s,n.h)}(We=dn.prototype).ea=function(){if(ho(this))return-ii(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:YP+r)*e,e*=YP}return n},We.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ru(this))return"0";if(ho(this))return"-"+ii(this).toString(n);for(var e=Ia(Math.pow(n,6)),t=this,r="";;){var s=zT(t,e).g,u=((0<(t=$T(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ru(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},We.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},We.X=function(n){return ho(n=$T(this,n))?-1:Ru(n)?0:1},We.abs=function(){return ho(this)?ii(this):this},We.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new dn(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(n){if(Ru(this)||Ru(n))return cm;if(ho(this))return ho(n)?ii(this).R(ii(n)):ii(ii(this).R(n));if(ho(n))return ii(this.R(ii(n)));if(0>this.X(XL)&&0>n.X(XL))return Ia(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,HT(t,2*r+2*s),t[2*r+2*s+1]+=u*_,HT(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,HT(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,HT(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new dn(t,0)},We.gb=function(n){return zT(this,n).h},We.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new dn(t,this.h&n.h)},We.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new dn(t,this.h|n.h)},We.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new dn(t,this.h^n.h)},jT.prototype.createWebChannel=jT.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,AT.NO_ERROR=0,AT.TIMEOUT=8,AT.HTTP_ERROR=6,lL.COMPLETE="complete",hL.EventType=Q0,Q0.OPEN="a",Q0.CLOSE="b",Q0.ERROR="c",Q0.MESSAGE="d",ce.prototype.listen=ce.prototype.O,Qn.prototype.listenOnce=Qn.prototype.P,Qn.prototype.getLastError=Qn.prototype.Sa,Qn.prototype.getLastErrorCode=Qn.prototype.Ia,Qn.prototype.getStatus=Qn.prototype.da,Qn.prototype.getResponseJson=Qn.prototype.Wa,Qn.prototype.getResponseText=Qn.prototype.ja,Qn.prototype.send=Qn.prototype.ha,Qn.prototype.setWithCredentials=Qn.prototype.Oa,Uo.prototype.digest=Uo.prototype.l,Uo.prototype.reset=Uo.prototype.reset,Uo.prototype.update=Uo.prototype.j,dn.prototype.add=dn.prototype.add,dn.prototype.multiply=dn.prototype.R,dn.prototype.modulo=dn.prototype.gb,dn.prototype.compare=dn.prototype.X,dn.prototype.toNumber=dn.prototype.ea,dn.prototype.toString=dn.prototype.toString,dn.prototype.getBits=dn.prototype.D,dn.fromNumber=Ia,dn.fromString=function JL(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ii(JL(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ia(Math.pow(e,8)),r=cm,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=Ia(Math.pow(e,u)),r=r.R(u).add(Ia(l))):r=(r=r.R(t)).add(Ia(l))}return r};var PB=Fi.createWebChannelTransport=function(){return new jT},NB=Fi.getStatEventTarget=function(){return ST()},JP=Fi.ErrorCode=AT,RB=Fi.EventType=lL,kB=Fi.Event=Jh,t4=Fi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},FB=Fi.FetchXmlHttpFactory=iw,GT=Fi.WebChannel=hL,LB=Fi.XhrIo=Qn,UB=Fi.Md5=Uo,dm=Fi.Integer=dn;const n4="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let hm="9.23.0";const Il=new ts.Yd("@firebase/firestore");function XP(){return Il.logLevel}function Ae(n,...e){if(Il.logLevel<=ts.in.DEBUG){const t=e.map(e2);Il.debug(`Firestore (${hm}): ${n}`,...t)}}function lr(n,...e){if(Il.logLevel<=ts.in.ERROR){const t=e.map(e2);Il.error(`Firestore (${hm}): ${n}`,...t)}}function fo(n,...e){if(Il.logLevel<=ts.in.WARN){const t=e.map(e2);Il.warn(`Firestore (${hm}): ${n}`,...t)}}function e2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${hm}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function ut(n,e){n||Je()}function Ge(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class r4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class $B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HB{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let l=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ur,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const E=l;e.enqueueRetryable((0,$.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},_=E=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ur)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut("string"==typeof r.accessToken),new r4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ut(null===e||"string"==typeof e),new Wr(e)}}class zB{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class GB{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new zB(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qB{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut("string"==typeof t.token),this.T=t.token,new i4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function WB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class s4{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=WB(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Dt(n,e){return n<e?-1:n>e?1:0}function fm(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function o4(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ct(e)}static min(){return new ct(new Vn(0,0))}static max(){return new ct(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends lw{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const ZB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends lw{construct(e,t,r){return new Jn(e,t,r)}static isValidIdentifier(e){return ZB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ee(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Ee(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ee(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new Ee(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Wt.fromString(e))}static fromName(e){return new He(Wt.fromString(e).popFirst(5))}static empty(){return new He(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Wt(e.slice()))}}class qT{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function t2(n){return n.fields.find(e=>2===e.kind)}function nf(n){return n.fields.filter(e=>2!==e.kind)}qT.UNKNOWN_ID=-1;class WT{constructor(e,t){this.fieldPath=e,this.kind=t}}class dw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dw(0,Ps.min())}}function a4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ct.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Ps(s,He.empty(),e)}function u4(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(ct.min(),He.empty(),-1)}static max(){return new Ps(ct.max(),He.empty(),-1)}}function n2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Dt(n.largestBatchId,e.largestBatchId))}const c4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function El(n){return r2.apply(this,arguments)}function r2(){return r2=(0,$.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==c4)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),r2.apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(s=>s?J.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new J((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const E=_;t(e[E]).next(b=>{l[E]=b,++g,g===u&&r(l)},b=>s(b))}})}static doWhile(e,t){return new J((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ZT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ur,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new hw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=i2(r.target.error);this.v.reject(new hw(e,s))}}static open(e,t,r,s){try{return new ZT(t,e.transaction(s,r))}catch(u){throw new hw(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JB(t)}}class Vo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Vo.S((0,ze.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),rf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ze.hl)())return!1;if(Vo.C())return!0;const e=(0,ze.z$)(),t=Vo.S(e),r=0<t&&t<10,s=Vo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,$.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new hw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new Ee(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ee(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new hw(e,g))},u.onupgradeneeded=l=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,$.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=ZT.open(u.db,e,l?"readonly":"readwrite",r),E=s(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),J.reject(b))).toPromise();return E.catch(()=>{}),yield _.R,E}catch(_){const E=_,b="FirebaseError"!==E.name&&g<3;if(Ae("SimpleDb","Transaction failed with error:",E.message,"Retrying:",b),u.close(),!b)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QB{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return rf(this.L.delete())}}class hw extends Ee{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cl(n){return"IndexedDbTransactionError"===n.name}class JB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rf(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),rf(this.store.add(e))}get(e){return rf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),rf(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),rf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new J((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new J((r,s)=>{t.onerror=u=>{const l=i2(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new J((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new QB(g),E=t(g.primaryKey,g.value,_);if(E instanceof J){const b=E.catch(S=>(_.done(),J.reject(S)));r.push(b)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rf(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=i2(r.target.error);t(s)}})}let d4=!1;function i2(n){const e=Vo.S((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return d4||(d4=!0,setTimeout(()=>{throw r},0)),r}}return n}class XB{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ae("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,$.Z)(function*(){t.task=null;try{Ae("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Cl(r)?Ae("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield El(r)}yield t.et(6e4)}))}}class ej{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,$.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return J.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ae("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(Ae("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=u4(u);n2(l,r)>0&&(r=l)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ns=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function fw(n){return null==n}function pw(n){return 0===n&&1/n==-1/0}function h4(n){return"number"==typeof n&&Number.isInteger(n)&&!pw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f4(e)),e=tj(n.get(t),e);return f4(e)}function tj(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function f4(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(ut(e>=2),2===e)return ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Je(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:Je()}u=l+2}return new Wt(r)}const p4=["userId","batchId"];function KT(n,e){return[n,bi(e)]}function g4(n,e,t){return[n,bi(e),t]}const nj={},rj=["prefixPath","collectionGroup","readTime","documentId"],ij=["prefixPath","collectionGroup","documentId"],sj=["collectionGroup","readTime","prefixPath","documentId"],oj=["canonicalId","targetId"],aj=["targetId","path"],uj=["path","targetId"],cj=["collectionId","parent"],lj=["indexId","uid"],dj=["uid","sequenceNumber"],hj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fj=["indexId","uid","orderedDocumentKey"],pj=["userId","collectionPath","documentId"],gj=["userId","collectionPath","largestBatchId"],mj=["userId","collectionGroup","largestBatchId"],m4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yj=[...m4,"documentOverlays"],y4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_4=y4,_j=[..._4,"indexConfiguration","indexState","indexEntries"];class s2 extends l4{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ge(n);return Vo.M(t.ht,e)}function v4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Cn{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new Cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new YT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new YT(this.root,e,this.comparator,!1)}getReverseIterator(){return new YT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new YT(this.root,e,this.comparator,!0)}}class YT{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??si.RED,this.left=s??si.EMPTY,this.right=u??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new si(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return si.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,s){return this}insert(n,e,t){return new si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I4(this.data.getIterator())}getIteratorFrom(e){return new I4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class I4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pm(n){return n.hasNext()?n.getNext():void 0}class is{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new is([])}unionWith(e){let t=new Pn(Jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class E4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new E4("Invalid base64 string: "+s):s}}(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dl(n){if(ut(!!n),"string"==typeof n){let e=0;const t=wj.exec(n);if(ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ku(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function QT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JT(n){const e=n.mapValue.fields.__previous_value__;return QT(e)?JT(e):e}function gw(n){const e=Dl(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class Ij{constructor(e,t,r,s,u,l,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=E}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}const Sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},XT={nullValue:"NULL_VALUE"};function Al(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QT(n)?4:T4(n)?9007199254740991:10:Je()}function Ca(n,e){if(n===e)return!0;const t=Al(n);if(t!==Al(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gw(n).isEqual(gw(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Dl(r.timestampValue),l=Dl(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ku(n.bytesValue).isEqual(ku(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Xn(r.geoPointValue.latitude)===Xn(s.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xn(r.integerValue)===Xn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Xn(r.doubleValue),l=Xn(s.doubleValue);return u===l?pw(u)===pw(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return fm(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(v4(u)!==v4(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Ca(u[g],l[g])))return!1;return!0}(n,e);default:return Je()}var s}function mw(n,e){return void 0!==(n.values||[]).find(t=>Ca(t,e))}function Ml(n,e){if(n===e)return 0;const t=Al(n),r=Al(e);if(t!==r)return Dt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Xn(s.integerValue||s.doubleValue),g=Xn(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return C4(n.timestampValue,e.timestampValue);case 4:return C4(gw(n),gw(e));case 5:return Dt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=ku(s),g=ku(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const E=Dt(l[_],g[_]);if(0!==E)return E}return Dt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Dt(Xn(s.latitude),Xn(u.latitude));return 0!==l?l:Dt(Xn(s.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const E=Ml(l[_],g[_]);if(E)return E}return Dt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Sl.mapValue&&u===Sl.mapValue)return 0;if(s===Sl.mapValue)return 1;if(u===Sl.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let b=0;b<g.length&&b<E.length;++b){const S=Dt(g[b],E[b]);if(0!==S)return S;const F=Ml(l[g[b]],_[E[b]]);if(0!==F)return F}return Dt(g.length,E.length)}(n.mapValue,e.mapValue);default:throw Je()}}function C4(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Dt(n,e);const t=Dl(n),r=Dl(e),s=Dt(t.seconds,r.seconds);return 0!==s?s:Dt(t.nanos,r.nanos)}function gm(n){return o2(n)}function o2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Dl(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ku(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=o2(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${o2(r.fields[g])}`;return u+"}"}(n.mapValue):Je();var e}function sf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function a2(n){return!!n&&"integerValue"in n}function yw(n){return!!n&&"arrayValue"in n}function b4(n){return!!n&&"nullValue"in n}function D4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t1(n){return!!n&&"mapValue"in n}function _w(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_w(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_w(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T4(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ej(n){return"nullValue"in n?XT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sf(Tl.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function Cj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sf(Tl.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sl:Je()}function S4(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function A4(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!t1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_w(t)}setAll(e){let t=Jn.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=_w(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());t1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];t1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){bl(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new oi(_w(this.value))}}function M4(n){const e=[];return bl(n.fields,(t,r)=>{const s=new Jn([t]);if(t1(r)){const u=M4(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new is(e)}class Nn{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Nn(e,0,ct.min(),ct.min(),ct.min(),oi.empty(),0)}static newFoundDocument(e,t,r,s){return new Nn(e,1,t,ct.min(),r,s,0)}static newNoDocument(e,t){return new Nn(e,2,t,ct.min(),ct.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,ct.min(),ct.min(),oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xl{constructor(e,t){this.position=e,this.inclusive=t}}function x4(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?He.comparator(He.fromName(l.referenceValue),t.key):Ml(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function O4(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}class mm{constructor(e,t="asc"){this.field=e,this.dir=t}}function bj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class P4{}class Gt extends P4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Dj(e,t,r):"array-contains"===t?new Aj(e,r):"in"===t?new U4(e,r):"not-in"===t?new Mj(e,r):"array-contains-any"===t?new xj(e,r):new Gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Tj(e,r):new Sj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ml(t,this.value)):null!==t&&Al(this.value)===Al(t)&&this.matchesComparison(Ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class hn extends P4{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new hn(e,t)}matches(e){return ym(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ym(n){return"and"===n.op}function u2(n){return"or"===n.op}function c2(n){return N4(n)&&ym(n)}function N4(n){for(const e of n.filters)if(e instanceof hn)return!1;return!0}function l2(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+gm(n.value);if(c2(n))return n.filters.map(e=>l2(e)).join(",");{const e=n.filters.map(t=>l2(t)).join(",");return`${n.op}(${e})`}}function R4(n,e){return n instanceof Gt?(t=n,(r=e)instanceof Gt&&t.op===r.op&&t.field.isEqual(r.field)&&Ca(t.value,r.value)):n instanceof hn?function(t,r){return r instanceof hn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&R4(u,r.filters[l]),!0)}(n,e):void Je();var t,r}function k4(n,e){const t=n.filters.concat(e);return hn.create(t,n.op)}function F4(n){return n instanceof Gt?`${(e=n).field.canonicalString()} ${e.op} ${gm(e.value)}`:n instanceof hn?function(e){return e.op.toString()+" {"+e.getFilters().map(F4).join(" ,")+"}"}(n):"Filter";var e}class Dj extends Gt{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tj extends Gt{constructor(e,t){super(e,"in",t),this.keys=L4(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sj extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=L4(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function L4(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class Aj extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yw(t)&&mw(t.arrayValue,this.value)}}class U4 extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mw(this.value.arrayValue,t)}}class Mj extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mw(this.value.arrayValue,t)}}class xj extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mw(this.value.arrayValue,r))}}class Oj{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function d2(n,e=null,t=[],r=[],s=null,u=null,l=null){return new Oj(n,e,t,r,s,u,l)}function af(n){const e=Ge(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>l2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),fw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gm(r)).join(",")),e.dt=t}return e.dt}function vw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!R4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!O4(n.startAt,e.startAt)&&O4(n.endAt,e.endAt)}function n1(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function r1(n,e){return n.filters.filter(t=>t instanceof Gt&&t.field.isEqual(e))}function V4(n,e,t){let r=XT,s=!0;for(const u of r1(n,e)){let l=XT,g=!0;switch(u.op){case"<":case"<=":l=Ej(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=XT}S4({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];S4({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function B4(n,e,t){let r=Sl,s=!0;for(const u of r1(n,e)){let l=Sl,g=!0;switch(u.op){case">=":case">":l=Cj(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Sl}A4({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];A4({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Fu{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function j4(n,e,t,r,s,u,l,g){return new Fu(n,e,t,r,s,u,l,g)}function _m(n){return new Fu(n)}function $4(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function h2(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function i1(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function f2(n){return null!==n.collectionGroup}function uf(n){const e=Ge(n);if(null===e.wt){e.wt=[];const t=i1(e),r=h2(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new mm(t)),e.wt.push(new mm(Jn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new mm(Jn.keyField(),u))}}}return e.wt}function Vi(n){const e=Ge(n);if(!e._t)if("F"===e.limitType)e._t=d2(e.path,e.collectionGroup,uf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of uf(e))t.push(new mm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new xl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new xl(e.startAt.position,e.startAt.inclusive):null;e._t=d2(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function p2(n,e){e.getFirstInequalityField(),i1(n);const t=n.filters.concat([e]);return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function s1(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ww(n,e){return vw(Vi(n),Vi(e))&&n.limitType===e.limitType}function H4(n){return`${af(Vi(n))}|lt:${n.limitType}`}function g2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>F4(r)).join(", ")}]`),fw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gm(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gm(r)).join(",")),`Target(${t})`}(Vi(n))}; limitType=${n.limitType})`}function Iw(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):He.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of uf(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=x4(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,uf(t),r)||t.endAt&&!function(s,u,l){const g=x4(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,uf(t),r)));var t,r}function z4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function G4(n){return(e,t)=>{let r=!1;for(const s of uf(n)){const u=Pj(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Pj(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?Ml(g,_):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}class Lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return w4(this.inner)}size(){return this.innerSize}}const Nj=new Cn(He.comparator);function ss(){return Nj}const q4=new Cn(He.comparator);function Ew(...n){let e=q4;for(const t of n)e=e.insert(t.key,t);return e}function W4(n){let e=q4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ba(){return Cw()}function Z4(){return Cw()}function Cw(){return new Lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rj=new Cn(He.comparator),kj=new Pn(He.comparator);function Ot(...n){let e=kj;for(const t of n)e=e.add(t);return e}const Fj=new Pn(Dt);function m2(){return Fj}function K4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pw(e)?"-0":e}}function Y4(n){return{integerValue:""+n}}function Q4(n,e){return h4(e)?Y4(e):K4(n,e)}class o1{constructor(){this._=void 0}}function Lj(n,e,t){return n instanceof vm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&QT(s)&&(s=JT(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof cf?X4(n,e):n instanceof lf?e3(n,e):function(r,s){const u=J4(r,s),l=t3(u)+t3(r.gt);return a2(u)&&a2(r.gt)?Y4(l):K4(r.serializer,l)}(n,e)}function Uj(n,e,t){return n instanceof cf?X4(n,e):n instanceof lf?e3(n,e):t}function J4(n,e){return n instanceof wm?a2(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vm extends o1{}class cf extends o1{constructor(e){super(),this.elements=e}}function X4(n,e){const t=n3(e);for(const r of n.elements)t.some(s=>Ca(s,r))||t.push(r);return{arrayValue:{values:t}}}class lf extends o1{constructor(e){super(),this.elements=e}}function e3(n,e){let t=n3(e);for(const r of n.elements)t=t.filter(s=>!Ca(s,r));return{arrayValue:{values:t}}}class wm extends o1{constructor(e,t){super(),this.serializer=e,this.gt=t}}function t3(n){return Xn(n.integerValue||n.doubleValue)}function n3(n){return yw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bw{constructor(e,t){this.field=e,this.transform=t}}class Bj{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function a1(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class u1{}function r3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Em(n.key,Bn.none()):new Im(n.key,n.data,Bn.none());{const t=n.data,r=oi.empty();let s=new Pn(Jn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Uu(n.key,r,new is(s.toArray()),Bn.none())}}function jj(n,e,t){n instanceof Im?function(r,s,u){const l=r.value.clone(),g=o3(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Uu?function(r,s,u){if(!a1(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=o3(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(s3(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dw(n,e,t,r){return n instanceof Im?function(s,u,l,g){if(!a1(s.precondition,u))return l;const _=s.value.clone(),E=a3(s.fieldTransforms,g,u);return _.setAll(E),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Uu?function(s,u,l,g){if(!a1(s.precondition,u))return l;const _=a3(s.fieldTransforms,g,u),E=u.data;return E.setAll(s3(s)),E.setAll(_),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,a1(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function $j(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=J4(r.transform,s||null);null!=u&&(null===t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function i3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&fm(t,r,(s,u)=>function Vj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cf&&r instanceof cf||t instanceof lf&&r instanceof lf?fm(t.elements,r.elements,Ca):t instanceof wm&&r instanceof wm?Ca(t.gt,r.gt):t instanceof vm&&r instanceof vm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Im extends u1{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uu extends u1{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function s3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function o3(n,e,t){const r=new Map;ut(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,Uj(l,g,t[s]))}return r}function a3(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,Lj(u,l,e))}return r}class Em extends u1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y2 extends u1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _2{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&jj(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Z4();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=r3(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&fm(this.mutations,e.mutations,(t,r)=>i3(t,r))&&fm(this.baseMutations,e.baseMutations,(t,r)=>i3(t,r))}}class v2{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ut(e.mutations.length===r.length);let s=Rj;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new v2(e,t,r,s)}}class w2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zj{constructor(e,t){this.count=e,this.unchangedNames=t}}var vr,Zt;function u3(n){switch(n){default:return Je();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function c3(n){if(void 0===n)return lr("GRPC error has no .code"),re.UNKNOWN;switch(n){case vr.OK:return re.OK;case vr.CANCELLED:return re.CANCELLED;case vr.UNKNOWN:return re.UNKNOWN;case vr.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case vr.INTERNAL:return re.INTERNAL;case vr.UNAVAILABLE:return re.UNAVAILABLE;case vr.UNAUTHENTICATED:return re.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case vr.NOT_FOUND:return re.NOT_FOUND;case vr.ALREADY_EXISTS:return re.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return re.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case vr.ABORTED:return re.ABORTED;case vr.OUT_OF_RANGE:return re.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return re.UNIMPLEMENTED;case vr.DATA_LOSS:return re.DATA_LOSS;default:return Je()}}(Zt=vr||(vr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class I2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return c1}static getOrCreateInstance(){return null===c1&&(c1=new I2),c1}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let c1=null;function l3(){return new TextEncoder}const Gj=new dm([4294967295,4294967295],0);function d3(n){const e=l3().encode(n),t=new UB;return t.update(e),new Uint8Array(t.digest())}function h3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new dm([t,r],0),new dm([s,u],0)]}class E2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tw(`Invalid padding: ${t}`);if(r<0)throw new Tw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Tw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Tw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=dm.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(dm.fromNumber(r)));return 1===s.compare(Gj)&&(s=new dm([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=d3(e),[r,s]=h3(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new E2(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=d3(e),[r,s]=h3(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Tw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sw{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Aw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sw(ct.min(),s,new Cn(Dt),ss(),Ot())}}class Aw{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Aw(r,t,Ot(),Ot(),Ot())}}class l1{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class f3{constructor(e,t){this.targetId=e,this.Vt=t}}class p3{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class g3{constructor(){this.St=0,this.Dt=y3(),this.Ct=Vr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ot(),t=Ot(),r=Ot();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Je()}}),new Aw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=y3()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class qj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ss(),this.zt=m3(),this.Wt=new Cn(Dt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(n1(l))if(0===s){const g=new He(l.path);this.Yt(r,g,Nn.newNoDocument(g,ct.min()))}else ut(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=I2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(E,b,S){var F,G,ie,le,ae,Fe;const et={localCacheCount:b,existenceFilterCount:S.count},Ze=S.unchangedNames;return Ze&&(et.bloomFilter={applied:0===E,hashCount:null!==(F=Ze?.hashCount)&&void 0!==F?F:0,bitmapLength:null!==(le=null===(ie=null===(G=Ze?.bits)||void 0===G?void 0:G.bitmap)||void 0===ie?void 0:ie.length)&&void 0!==le?le:0,padding:null!==(Fe=null===(ae=Ze?.bits)||void 0===ae?void 0:ae.padding)&&void 0!==Fe?Fe:0}),et}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,E;try{_=ku(u).toUint8Array()}catch(b){if(b instanceof E4)return fo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{E=new E2(_,l,g)}catch(b){return fo(b instanceof Tw?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===E.It?1:s!==t-this.oe(e.targetId,E)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&n1(g.target)){const _=new He(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,Nn.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Ot();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const E=this.se(_);return!E||"TargetPurposeLimboResolution"===E.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new Sw(e,t,this.Wt,this.jt,r);return this.jt=ss(),this.zt=m3(),this.Wt=new Cn(Dt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new g3,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Pn(Dt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new g3),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function m3(){return new Cn(He.comparator)}function y3(){return new Cn(He.comparator)}const Wj={asc:"ASCENDING",desc:"DESCENDING"},Zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kj={and:"AND",or:"OR"};class Yj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function C2(n,e){return n.useProto3Json||fw(e)?e:{value:e}}function Cm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qj(n,e){return Cm(n,e.toTimestamp())}function dr(n){return ut(!!n),ct.fromTimestamp(function(e){const t=Dl(e);return new Vn(t.seconds,t.nanos)}(n))}function b2(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function v3(n){const e=Wt.fromString(n);return ut(A3(e)),e}function Mw(n,e){return b2(n.databaseId,e.path)}function Da(n,e){const t=v3(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(I3(t))}function D2(n,e){return b2(n.databaseId,e)}function w3(n){const e=v3(n);return 4===e.length?Wt.emptyPath():I3(e)}function xw(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function I3(n){return ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function E3(n,e,t){return{name:Mw(n,e),fields:t.value.mapValue.fields}}function C3(n,e,t){const r=Da(n,e.name),s=dr(e.updateTime),u=e.createTime?dr(e.createTime):ct.min(),l=new oi({mapValue:{fields:e.fields}}),g=Nn.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Ow(n,e){let t;if(e instanceof Im)t={update:E3(n,e.key,e.value)};else if(e instanceof Em)t={delete:Mw(n,e.key)};else if(e instanceof Uu)t={update:E3(n,e.key,e.data),updateMask:s7(e.fieldMask)};else{if(!(e instanceof y2))return Je();t={verify:Mw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof vm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Qj(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Je()),t;var s}function T2(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Bn.updateTime(dr(s.updateTime)):void 0!==s.exists?Bn.exists(s.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(ut("REQUEST_TIME"===l.setToServerValue),g=new vm):"appendMissingElements"in l?g=new cf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new lf(l.removeAllFromArray.values||[]):"increment"in l?g=new wm(u,l.increment):Je();const _=Jn.fromServerFormat(l.fieldPath);return new bw(_,g)}(n,s)):[];var s;if(e.update){const s=Da(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new is((e.updateMask.fieldPaths||[]).map(E=>Jn.fromServerFormat(E)));return new Uu(s,u,l,t,r)}return new Im(s,u,t,r)}if(e.delete){const s=Da(n,e.delete);return new Em(s,t)}if(e.verify){const s=Da(n,e.verify);return new y2(s,t)}return Je()}function b3(n,e){return{documents:[D2(n,e.path)]}}function S2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=D2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=D2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return S3(hn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(E=>{return{field:Ol((b=E).field),direction:n7(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=C2(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function D3(n){let e=w3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ut(1===r);const b=t.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const S=T3(b);return S instanceof hn&&c2(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new mm(bm((S=b).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(b){let S;return S="object"==typeof b?b.value:b,fw(S)?null:S}(t.limit));let _=null;var b;t.startAt&&(_=new xl((b=t.startAt).values||[],!!b.before));let E=null;return t.endAt&&(E=function(b){return new xl(b.values||[],!b.before)}(t.endAt)),j4(e,s,l,u,g,"F",_,E)}function T3(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bm(e.unaryFilter.field);return Gt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=bm(e.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bm(e.unaryFilter.field);return Gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bm(e.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}(n):void 0!==n.fieldFilter?Gt.create(bm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return hn.create(e.compositeFilter.filters.map(t=>T3(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Je()}}(e.compositeFilter.op))}(n):Je();var e}function n7(n){return Wj[n]}function r7(n){return Zj[n]}function i7(n){return Kj[n]}function Ol(n){return{fieldPath:n.canonicalString()}}function bm(n){return Jn.fromServerFormat(n.fieldPath)}function S3(n){return n instanceof Gt?function(e){if("=="===e.op){if(D4(e.value))return{unaryFilter:{field:Ol(e.field),op:"IS_NAN"}};if(b4(e.value))return{unaryFilter:{field:Ol(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(D4(e.value))return{unaryFilter:{field:Ol(e.field),op:"IS_NOT_NAN"}};if(b4(e.value))return{unaryFilter:{field:Ol(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(e.field),op:r7(e.op),value:e.value}}}(n):n instanceof hn?function(e){const t=e.getFilters().map(r=>S3(r));return 1===t.length?t[0]:{compositeFilter:{op:i7(e.op),filters:t}}}(n):Je()}function s7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function A3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Vu{constructor(e,t,r,s,u=ct.min(),l=ct.min(),g=Vr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class M3{constructor(e){this.fe=e}}function x3(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:d1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mw(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cm(s,u.version.toTimestamp()),createTime:Cm(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:df(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:df(e.version)}}var s,u;return r}function d1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function df(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hf(n){const e=new Vn(n.seconds,n.nanoseconds);return ct.fromTimestamp(e)}function ff(n,e){const t=(e.baseMutations||[]).map(u=>T2(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>T2(n.fe,u)),s=Vn.fromMillis(e.localWriteTimeMs);return new _2(e.batchId,s,t,r)}function Pw(n){const e=hf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hf(n.lastLimboFreeSnapshotVersion):ct.min();let r;var s;return void 0!==n.query.documents?(ut(1===(s=n.query).documents.length),r=Vi(_m(w3(s.documents[0])))):r=Vi(D3(n.query)),new Vu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function O3(n,e){const t=df(e.snapshotVersion),r=df(e.lastLimboFreeSnapshotVersion);let s;s=n1(e.target)?b3(n.fe,e.target):S2(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:af(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function A2(n){const e=D3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?s1(e,e.limit,"L"):e}function M2(n,e){return new w2(e.largestBatchId,T2(n.fe,e.overlayMutation))}function P3(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function N3(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:df(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class a7{getBundleMetadata(e,t){return R3(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:hf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return R3(e).put({bundleId:(r=t).id,createTime:df(dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return k3(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:A2(s.bundledQuery),readTime:hf(s.readTime)};var s})}saveNamedQuery(e,t){return k3(e).put({name:(r=t).name,readTime:df(dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function R3(n){return Zr(n,"bundles")}function k3(n){return Zr(n,"namedQueries")}class h1{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new h1(e,t.uid||"")}getOverlay(e,t){return Nw(e).get(P3(this.userId,t)).next(r=>r?M2(this.serializer,r):null)}getOverlays(e,t){const r=ba();return J.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new w2(t,l);s.push(this.we(e,g))}),J.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(bi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Nw(e).J("collectionPathOverlayIndex",g))}),J.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ba(),u=bi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Nw(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const E=M2(this.serializer,_);s.set(E.getKey(),E)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ba();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nw(e).X({index:"collectionGroupOverlayIndex",range:g},(_,E,b)=>{const S=M2(this.serializer,E);u.size()<s||S.largestBatchId===l?(u.set(S.getKey(),S),l=S.largestBatchId):b.done()}).next(()=>u)}we(e,t){return Nw(e).put(function(r,s,u){const[l,g,_]=P3(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ow(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Nw(n){return Zr(n,"documentOverlays")}class pf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),pw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ku(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?T4(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Je()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),He.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function u7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function F3(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=u7(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}pf.Ve=new pf;class c7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=F3(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=F3(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class l7{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class d7{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Rw{constructor(){this.je=new c7,this.ze=new l7(this.je),this.We=new d7(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class gf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gf(this.indexId,this.documentKey,this.arrayValue,r)}}function Pl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=L3(n.arrayValue,e.arrayValue),0!==t?t:(t=L3(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function L3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class h7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ut(e.collectionGroup===this.collectionId);const t=t2(e);if(void 0!==t&&!this.en(t))return!1;const r=nf(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function U3(n){var e,t;if(ut(n instanceof Gt||n instanceof hn),n instanceof Gt){if(n instanceof U4){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Gt.create(n.field,"==",u)))||[];return hn.create(s,"or")}return n}const r=n.filters.map(s=>U3(s));return hn.create(r,n.op)}function f7(n){if(0===n.getFilters().length)return[];const e=P2(U3(n));return ut(V3(e)),x2(e)||O2(e)?[e]:e.getFilters()}function x2(n){return n instanceof Gt}function O2(n){return n instanceof hn&&c2(n)}function V3(n){return x2(n)||O2(n)||function(e){if(e instanceof hn&&u2(e)){for(const t of e.getFilters())if(!x2(t)&&!O2(t))return!1;return!0}return!1}(n)}function P2(n){if(ut(n instanceof Gt||n instanceof hn),n instanceof Gt)return n;if(1===n.filters.length)return P2(n.filters[0]);const e=n.filters.map(r=>P2(r));let t=hn.create(e,n.op);return t=f1(t),V3(t)?t:(ut(t instanceof hn),ut(ym(t)),ut(t.filters.length>1),t.filters.reduce((r,s)=>N2(r,s)))}function N2(n,e){let t;return ut(n instanceof Gt||n instanceof hn),ut(e instanceof Gt||e instanceof hn),t=n instanceof Gt?e instanceof Gt?hn.create([n,e],"and"):B3(n,e):e instanceof Gt?B3(e,n):function(r,s){if(ut(r.filters.length>0&&s.filters.length>0),ym(r)&&ym(s))return k4(r,s.getFilters());const u=u2(r)?r:s,l=u2(r)?s:r,g=u.filters.map(_=>N2(_,l));return hn.create(g,"or")}(n,e),f1(t)}function B3(n,e){if(ym(e))return k4(e,n.getFilters());{const t=e.filters.map(r=>N2(n,r));return hn.create(t,"or")}}function f1(n){if(ut(n instanceof Gt||n instanceof hn),n instanceof Gt)return n;const e=n.getFilters();if(1===e.length)return f1(e[0]);if(N4(n))return n;const t=e.map(s=>f1(s)),r=[];return t.forEach(s=>{s instanceof Gt?r.push(s):s instanceof hn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:hn.create(r,n.op)}class p7{constructor(){this.rn=new R2}addToCollectionParentIndex(e,t){return this.rn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Ps.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class R2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Pn(Wt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pn(Wt.comparator)).toArray()}}const p1=new Uint8Array(0);class g7{constructor(e,t){this.user=e,this.databaseId=t,this.on=new R2,this.un=new Lu(r=>af(r),(r,s)=>vw(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:bi(s)};return j3(e).put(u)}return J.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[o4(t),""],!1,!0);return j3(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ea(l.parent))}return r})}addFieldIndex(e,t){const r=g1(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Fw(e);return u.next(g=>{l.put(N3(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=g1(e),s=Fw(e),u=kw(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=kw(e);let s=!0;const u=new Map;return J.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=Ot();const g=[];return J.forEach(u,(_,E)=>{var b;Ae("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ze=>`${Ze.fieldPath}:${Ze.kind}`).join(",")}`} to execute ${af(t)}`);const S=function(Ze,pt){const Tt=t2(pt);if(void 0===Tt)return null;for(const Vt of r1(Ze,Tt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(E,_),F=function(Ze,pt){const Tt=new Map;for(const Vt of nf(pt))for(const ci of r1(Ze,Vt.fieldPath))switch(ci.op){case"==":case"in":Tt.set(Vt.fieldPath.canonicalString(),ci.value);break;case"not-in":case"!=":return Tt.set(Vt.fieldPath.canonicalString(),ci.value),Array.from(Tt.values())}return null}(E,_),G=function(Ze,pt){const Tt=[];let Vt=!0;for(const ci of nf(pt)){const Wl=0===ci.kind?V4(Ze,ci.fieldPath,Ze.startAt):B4(Ze,ci.fieldPath,Ze.startAt);Tt.push(Wl.value),Vt&&(Vt=Wl.inclusive)}return new xl(Tt,Vt)}(E,_),ie=function(Ze,pt){const Tt=[];let Vt=!0;for(const ci of nf(pt)){const Wl=0===ci.kind?B4(Ze,ci.fieldPath,Ze.endAt):V4(Ze,ci.fieldPath,Ze.endAt);Tt.push(Wl.value),Vt&&(Vt=Wl.inclusive)}return new xl(Tt,Vt)}(E,_),le=this.hn(_,E,G),ae=this.hn(_,E,ie),Fe=this.ln(_,E,F),et=this.fn(_.indexId,S,le,G.inclusive,ae,ie.inclusive,Fe);return J.forEach(et,Ze=>r.H(Ze,t.limit).next(pt=>{pt.forEach(Tt=>{const Vt=He.fromSegments(Tt.documentKey);l.has(Vt)||(l=l.add(Vt),g.push(Vt))})}))}).next(()=>g)}return J.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:f7(hn.create(e.filters,"and")).map(r=>d2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),E=_/(null!=t?t.length:1),b=[];for(let S=0;S<_;++S){const F=t?this.dn(t[S/E]):p1,G=this.wn(e,F,r[S%E],s),ie=this._n(e,F,u[S%E],l),le=g.map(ae=>this.wn(e,F,ae,!0));b.push(...this.createRange(G,ie,le))}return b}wn(e,t,r,s){const u=new gf(e,He.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new gf(e,He.empty(),t,r);return s?u.Je():u}an(e,t){const r=new h7(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return J.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Pn(Jn.comparator),E=!1;for(const b of g.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?E=!0:_=_.add(S.field));for(const b of g.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(E?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new Rw;for(const s of nf(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);pf.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Rw;return pf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Rw;return pf.Ve._e(sf(this.databaseId,t),r.He(function(s){const u=nf(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new Rw);let u=0;for(const l of nf(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&yw(g))s=this.pn(s,l,g);else{const E=_.He(l.kind);pf.Ve._e(g,E)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new Rw;_.seed(g.Qe()),pf.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Gt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=g1(e),s=Fw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return J.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(E,b){const S=b?new dw(b.sequenceNumber,new Ps(hf(b.readTime),new He(Ea(b.documentKey)),b.largestBatchId)):dw.empty(),F=E.fields.map(([G,ie])=>new WT(Jn.fromServerFormat(G),ie));return new qT(E.indexId,E.collectionGroup,F,S)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Dt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=g1(e),u=Fw(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>J.forEach(g,_=>u.put(N3(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?J.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),J.forEach(g,_=>this.En(e,s,_).next(E=>{const b=this.An(u,_);return E.isEqual(b)?J.resolve():this.vn(e,u,_,E,b)}))))})}Rn(e,t,r,s){return kw(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return kw(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=kw(e);let u=new Pn(Pl);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new gf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Pn(Pl);const s=this.mn(t,e);if(null==s)return r;const u=t2(t);if(null!=u){const l=e.data.field(u.fieldPath);if(yw(l))for(const g of l.arrayValue.values||[])r=r.add(new gf(t.indexId,e.key,this.dn(g),s))}else r=r.add(new gf(t.indexId,e.key,p1,s));return r}vn(e,t,r,s,u){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,E,b,S){const F=g.getIterator(),G=_.getIterator();let ie=pm(F),le=pm(G);for(;ie||le;){let ae=!1,Fe=!1;if(ie&&le){const et=E(ie,le);et<0?Fe=!0:et>0&&(ae=!0)}else null!=ie?Fe=!0:ae=!0;ae?(b(le),le=pm(G)):Fe?(S(ie),ie=pm(F)):(ie=pm(F),le=pm(G))}}(s,u,Pl,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),J.waitFor(l)}Tn(e){let t=1;return Fw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Pl(l,g)).filter((l,g,_)=>!g||0!==Pl(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=Pl(l,e),_=Pl(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,p1,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,p1,[]]))}return u}bn(e,t){return Pl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($3)}getMinOffset(e,t){return J.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||Je())).next($3)}}function j3(n){return Zr(n,"collectionParents")}function kw(n){return Zr(n,"indexEntries")}function g1(n){return Zr(n,"indexConfiguration")}function Fw(n){return Zr(n,"indexState")}function $3(n){ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;n2(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const H3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Di{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function z3(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(b,S,F)=>(g++,F.delete()));u.push(_.next(()=>{ut(1===g)}));const E=[];for(const b of t.mutations){const S=g4(e,b.key.path,t.batchId);u.push(s.delete(S)),E.push(b.key)}return J.waitFor(u).next(()=>E)}function m1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(41943040,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class y1{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new y1(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Dm(e),l=Nl(e);return l.add({}).next(g=>{ut("number"==typeof g);const _=new _2(g,t,r,s),E=function(F,G,ie){const le=ie.baseMutations.map(Fe=>Ow(F.fe,Fe)),ae=ie.mutations.map(Fe=>Ow(F.fe,Fe));return{userId:G,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:le,mutations:ae}}(this.serializer,this.userId,_),b=[];let S=new Pn((F,G)=>Dt(F.canonicalString(),G.canonicalString()));for(const F of s){const G=g4(this.userId,F.key.path,g);S=S.add(F.key.path.popLast()),b.push(l.put(E)),b.push(u.put(G,nj))}return S.forEach(F=>{b.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),J.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Nl(e).get(t).next(r=>r?(ut(r.userId===this.userId),ff(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?J.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Nl(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(ut(g.batchId>=r),u=ff(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).j("userMutationsIndex",t).next(r=>r.map(s=>ff(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=KT(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Dm(e).X({range:s},(l,g,_)=>{const[E,b,S]=l,F=Ea(b);if(E===this.userId&&t.path.isEqual(F))return Nl(e).get(S).next(G=>{if(!G)throw Je();ut(G.userId===this.userId),u.push(ff(this.serializer,G))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Dt);const s=[];return t.forEach(u=>{const l=KT(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Dm(e).X({range:g},(E,b,S)=>{const[F,G,ie]=E,le=Ea(G);F===this.userId&&u.path.isEqual(le)?r=r.add(ie):S.done()});s.push(_)}),J.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=KT(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Pn(Dt);return Dm(e).X({range:l},(_,E,b)=>{const[S,F,G]=_,ie=Ea(F);S===this.userId&&r.isPrefixOf(ie)?ie.length===s&&(g=g.add(G)):b.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Nl(e).get(u).next(l=>{if(null===l)throw Je();ut(l.userId===this.userId),r.push(ff(this.serializer,l))}))}),J.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return z3(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),J.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Dm(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=Ea(u[1]);s.push(_)}else g.done()}).next(()=>{ut(0===s.length)})})}containsKey(e,t){return G3(e,this.userId,t)}xn(e){return q3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function G3(n,e,t){const r=KT(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Dm(n).X({range:u,Y:!0},(g,_,E)=>{const[b,S,F]=g;b===e&&S===s&&(l=!0),E.done()}).next(()=>l)}function Nl(n){return Zr(n,"mutations")}function Dm(n){return Zr(n,"documentMutations")}function q3(n){return Zr(n,"mutationQueues")}class mf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mf(0)}static Mn(){return new mf(-1)}}class m7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new mf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ct.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ut(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Tm(e).X((l,g)=>{const _=Pw(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>J.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Tm(e).X((r,s)=>{const u=Pw(s);t(u)})}$n(e){return W3(e).get("targetGlobalKey").next(t=>(ut(null!==t),t))}On(e,t){return W3(e).put("targetGlobalKey",t)}Fn(e,t){return Tm(e).put(O3(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=af(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Tm(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const E=Pw(g);vw(t,E.target)&&(u=E,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Rl(e);return t.forEach(l=>{const g=bi(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),J.waitFor(s)}removeMatchingKeys(e,t,r){const s=Rl(e);return J.forEach(t,u=>{const l=bi(u.path);return J.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Rl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Rl(e);let u=Ot();return s.X({range:r,Y:!0},(l,g,_)=>{const E=Ea(l[1]),b=new He(E);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=bi(t.path),s=IDBKeyRange.bound([r],[o4(r)],!1,!0);let u=0;return Rl(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,E)=>{0!==l&&(u++,E.done())}).next(()=>u>0)}le(e,t){return Tm(e).get(t).next(r=>r?Pw(r):null)}}function Tm(n){return Zr(n,"targets")}function W3(n){return Zr(n,"targetGlobal")}function Rl(n){return Zr(n,"targetDocuments")}function Z3([n,e],[t,r]){const s=Dt(n,t);return 0===s?Dt(e,r):s}class y7{constructor(e){this.Ln=e,this.buffer=new Pn(Z3),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Z3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class K3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,$.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Cl(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield El(r)}yield t.Qn(3e5)}))}}class _7{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(Ns.ct);const r=new y7(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(H3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H3):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,E;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,l=Date.now(),this.nthSequenceNumber(e,s))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),XP()<=ts.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-b}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:S})))}}class v7{constructor(e,t){this.db=e,this.garbageCollector=function Y3(n,e){return new _7(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return _1(e,r)}removeReference(e,t,r){return _1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _1(e,t)}Xn(e,t){return function(r,s){let u=!1;return q3(r).Z(l=>G3(r,l,s).next(g=>(g&&(u=!0),J.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(E=>{if(!E)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ct.min()),Rl(e).delete([0,bi(l.path)])))});s.push(_)}}).next(()=>J.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _1(e,t)}Yn(e,t){const r=Rl(e);let s,u=Ns.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:E})=>{0===l?(u!==Ns.ct&&t(new He(Ea(s)),u),u=E,s=_):u=Ns.ct}).next(()=>{u!==Ns.ct&&t(new He(Ea(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _1(n,e){return Rl(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class Q3{constructor(){this.changes=new Lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yf(e).put(r)}removeEntry(e,t,r){return yf(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],d1(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return yf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return yf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(s,u)=>{r={document:this.ts(t,u),size:m1(u)}}).next(()=>r)}getEntries(e,t){let r=ss();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=ss(),s=new Cn(He.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,m1(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return J.resolve();let s=new Pn(tU);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Lw(s.first()),Lw(s.last())),l=s.getIterator();let g=l.getNext();return yf(e).X({index:"documentKeyIndex",range:u},(_,E,b)=>{const S=He.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;g&&tU(g,S)<0;)r(g,null),g=l.getNext();g&&g.isEqual(S)&&(r(g,E),g=l.hasNext()?l.getNext():null),g?b.G(Lw(g)):b.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),d1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yf(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let E=ss();for(const b of _){const S=this.ts(He.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Iw(t,S)||s.has(S.key))&&(E=E.insert(S.key,S))}return E})}getAllFromCollectionGroup(e,t,r,s){let u=ss();const l=eU(t,r),g=eU(t,Ps.max());return yf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,E,b)=>{const S=this.ts(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(S.key,S),u.size===s&&b.done()}).next(()=>u)}newChangeBuffer(e){return new I7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return X3(e).get("remoteDocumentGlobalKey").next(t=>(ut(!!t),t))}Zn(e,t){return X3(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function o7(n,e){let t;if(e.document)t=C3(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),s=hf(e.noDocument.readTime);t=Nn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=He.fromSegments(e.unknownDocument.path),s=hf(e.unknownDocument.version);t=Nn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Vn(r[0],r[1]);return ct.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ct.min()))return r}return Nn.newInvalidDocument(e)}}function J3(n){return new w7(n)}class I7 extends Q3{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Lu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Pn((u,l)=>Dt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=x3(this.os.serializer,l);s=s.add(u.path.popLast());const E=m1(_);r+=E-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=x3(this.os.serializer,l.convertToNoDocument(ct.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function X3(n){return Zr(n,"remoteDocumentGlobal")}function yf(n){return Zr(n,"remoteDocumentsV14")}function Lw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eU(n,e){const t=e.documentKey.path.toArray();return[n,d1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tU(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Dt(t[u],r[u]),s)return s;return s=Dt(t.length,r.length),s||(s=Dt(t[t.length-2],r[r.length-2]),s||Dt(t[t.length-1],r[r.length-1]))}class E7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nU{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Dw(r.mutation,s,is.empty(),Vn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const s=ba();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Ew();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=ss();const l=Cw(),g=Cw();return t.forEach((_,E)=>{const b=r.get(E.key);s.has(E.key)&&(void 0===b||b.mutation instanceof Uu)?u=u.insert(E.key,E):void 0!==b?(l.set(E.key,b.mutation.getFieldMask()),Dw(b.mutation,E,b.mutation.getFieldMask(),Vn.now())):l.set(E.key,is.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((E,b)=>l.set(E,b)),t.forEach((E,b)=>{var S;return g.set(E,new E7(b,null!==(S=l.get(E))&&void 0!==S?S:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Cw();let s=new Cn((l,g)=>l-g),u=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const E=t.get(_);if(null===E)return;let b=r.get(_)||is.empty();b=g.applyToLocalView(E,b),r.set(_,b);const S=(s.get(g.batchId)||Ot()).add(_);s=s.insert(g.batchId,S)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),E=_.key,b=_.value,S=Z4();b.forEach(F=>{if(!u.has(F)){const G=r3(t.get(F),r.get(F));null!==G&&S.set(F,G),u=u.add(F)}}),l.push(this.documentOverlayCache.saveOverlays(e,E,S))}return J.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):f2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):J.resolve(ba());let g=-1,_=u;return l.next(E=>J.forEach(E,(b,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(b)?J.resolve():this.remoteDocumentCache.getEntry(e,b).next(F=>{_=_.insert(b,F)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,_,E,Ot())).next(b=>({batchId:g,changes:W4(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let s=Ew();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Ew();return this.indexManager.getCollectionParents(e,s).next(l=>J.forEach(l,g=>{const _=(E=t,b=g.child(s),new Fu(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(E=>{E.forEach((b,S)=>{u=u.insert(b,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const E=_.getKey();null===u.get(E)&&(u=u.insert(E,Nn.newInvalidDocument(E)))});let l=Ew();return u.forEach((g,_)=>{const E=s.get(g);void 0!==E&&Dw(E.mutation,_,is.empty(),Vn.now()),Iw(t,_)&&(l=l.insert(g,_))}),l})}}class C7{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return J.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:dr(r.createTime)}),J.resolve()}getNamedQuery(e,t){return J.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:A2(r.bundledQuery),readTime:dr(r.readTime)}),J.resolve();var r}}class b7{constructor(){this.overlays=new Cn(He.comparator),this.ls=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ba();return J.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const s=ba(),u=t.length+1,l=new He(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return J.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Cn((E,b)=>E-b);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let b=u.get(E.largestBatchId);null===b&&(b=ba(),u=u.insert(E.largestBatchId,b)),b.set(E.getKey(),E)}}const g=ba(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,b)=>g.set(E,b)),!(g.size()>=s)););return J.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new w2(t,r));let u=this.ls.get(t);void 0===u&&(u=Ot(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class k2{constructor(){this.fs=new Pn(Kr.ds),this.ws=new Pn(Kr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Kr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new He(new Wt([])),r=new Kr(t,e),s=new Kr(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new He(new Wt([])),r=new Kr(t,e),s=new Kr(t,e+1);let u=Ot();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Kr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return He.comparator(e.key,t.key)||Dt(e.As,t.As)}static _s(e,t){return Dt(e.As,t.As)||He.comparator(e.key,t.key)}}class D7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Pn(Kr.ds)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new _2(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new Kr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return J.resolve(l)}lookupMutationBatch(e,t){return J.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),s=new Kr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Dt);return t.forEach(s=>{const u=new Kr(s,0),l=new Kr(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),J.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const l=new Kr(new He(u),0);let g=new Pn(Dt);return this.Rs.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===s&&(g=g.add(_.As)),!0)},l),J.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){ut(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return J.forEach(t.mutations,s=>{const u=new Kr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Kr(t,0),s=this.Rs.firstAfterOrEqual(r);return J.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return J.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class T7{constructor(e){this.Ds=e,this.docs=new Cn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=ss();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Nn.newInvalidDocument(s))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=ss();const l=t.path,g=new He(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:E,value:{document:b}}=_.getNext();if(!l.isPrefixOf(E.path))break;E.path.length>l.length+1||n2(u4(b),r)<=0||(s.has(b.key)||Iw(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,t,r,s){Je()}Cs(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S7(this)}getSize(e){return J.resolve(this.size)}}class S7 extends Q3{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class A7{constructor(e){this.persistence=e,this.xs=new Lu(t=>af(t),vw),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.Ns=0,this.ks=new k2,this.targetCount=0,this.Ms=mf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),J.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Fn(t),J.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),J.waitFor(u).next(()=>s)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),J.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.ks.containsKey(t))}}class F2{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ns(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new A7(this),this.indexManager=new p7,this.remoteDocumentCache=new T7(r=>this.referenceDelegate.Ls(r)),this.serializer=new M3(t),this.qs=new C7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new D7(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const s=new M7(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return J.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class M7 extends l4{constructor(e){super(),this.currentSequenceNumber=e}}class v1{constructor(e){this.persistence=e,this.Qs=new k2,this.js=null}static zs(e){return new v1(e)}get Ws(){if(this.js)return this.js;throw Je()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),J.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Ws,r=>{const s=He.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,ct.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return J.or([()=>J.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class x7{constructor(e){this.serializer=e}O(e,t,r,s){const u=new ZT("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p4,{unique:!0}),g.createObjectStore("documentMutations"),rU(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=J.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),rU(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ct.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(E=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p4,{unique:!0});const b=_.store("mutations"),S=E.map(F=>b.put(F));return J.waitFor(S)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:pj});_.createIndex("collectionPathOverlayIndex",gj,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",mj,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:rj});_.createIndex("documentKeyIndex",ij),_.createIndex("collectionGroupIndex",sj)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:lj}).createIndex("sequenceNumberIndex",dj,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:hj}).createIndex("documentKeyIndex",fj,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=m1(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>J.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>J.forEach(g,_=>{ut(_.userId===u.userId);const E=ff(this.serializer,_);return z3(e,u.userId,E).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new Wt(l),E=[0,bi(_)];u.push(t.get(E).next(b=>b?J.resolve():t.put({targetId:0,path:bi(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>J.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:cj});const r=t.store("collectionParents"),s=new R2,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:bi(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new Wt(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],E)=>{const b=Ea(g);return u(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=Pw(s),l=O3(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(E=l,E.document?new He(Wt.fromString(E.document.name).popFirst(5)):E.noDocument?He.fromSegments(E.noDocument.path):E.unknownDocument?He.fromSegments(E.unknownDocument.path):Je()).path.toArray();var E;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(b))}).next(()=>J.waitFor(s))}si(e,t){const r=t.store("mutations"),s=J3(this.serializer),u=new F2(v1.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var E;let b=null!==(E=g.get(_.userId))&&void 0!==E?E:Ot();ff(this.serializer,_).keys().forEach(S=>b=b.add(S)),g.set(_.userId,b)}),J.forEach(g,(_,E)=>{const b=new Wr(E),S=h1.de(this.serializer,b),F=u.getIndexManager(b),G=y1.de(b,this.serializer,F,u.referenceDelegate);return new nU(s,G,S,F).recalculateAndSaveOverlaysForDocumentKeys(new s2(t,Ns.ct),_).next()})})}}function rU(n){n.createObjectStore("targetDocuments",{keyPath:aj}).createIndex("documentTargetsIndex",uj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oj,{unique:!0}),n.createObjectStore("targetGlobal")}const L2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class U2{constructor(e,t,r,s,u,l,g,_,E,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=E,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=F=>Promise.resolve(),!U2.D())throw new Ee(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v7(this,s),this.di=t+"main",this.serializer=new M3(_),this.wi=new Vo(this.di,this.ui,new x7(this.serializer)),this.Bs=new m7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=J3(this.serializer),this.qs=new a7,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(re.FAILED_PRECONDITION,L2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ns(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,$.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,$.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,$.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>I1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Cl(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Uw(e).get("owner").next(t=>J.resolve(this.Ri(t)))}Pi(e){return I1(e).delete(this.clientId)}bi(){var e=this;return(0,$.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Zr(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return J.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?J.resolve(!0):Uw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ee(re.FAILED_PRECONDITION,L2);return!1}}return!(!this.networkEnabled||!this.inForeground)||I1(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,$.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new s2(t,Ns.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>I1(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return y1.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new g7(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return h1.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?_j:14===l?_4:13===l?y4:12===l?yj:11===l?m4:void Je();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new s2(_,this.Os?this.Os.next():Ns.ct),"readwrite-primary"===t?this.Ti(g).next(E=>!!E||this.Ei(g)).next(E=>{if(!E)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ee(re.FAILED_PRECONDITION,c4);return r(g)}).next(E=>this.vi(g).next(()=>E)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return Uw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ee(re.FAILED_PRECONDITION,L2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uw(e).put("owner",t)}static D(){return Vo.D()}Ai(e){const t=Uw(e);return t.get("owner").next(r=>this.Ri(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ze.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uw(n){return Zr(n,"owner")}function I1(n){return Zr(n,"clientMetadata")}function V2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class B2{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Ot(),s=Ot();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new B2(e,t.fromCache,r,s)}}class iU{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if($4(t))return J.resolve(null);let r=Vi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=s1(t,null,"F"),r=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Ot(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const E=this.ji(t,g);return this.zi(t,E,l,_.readTime)?this.Ki(e,s1(t,null,"F")):this.Wi(e,E,t,_)}))})))}Gi(e,t,r,s){return $4(t)||s.isEqual(ct.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(XP()<=ts.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),g2(t)),this.Wi(e,l,t,a4(s,-1)))})}ji(e,t){let r=new Pn(G4(e));return t.forEach((s,u)=>{Iw(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return XP()<=ts.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",g2(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ps.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class O7{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Cn(Dt),this.Yi=new Lu(u=>af(u),vw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function sU(n,e,t,r){return new O7(n,e,t,r)}function oU(n,e){return j2.apply(this,arguments)}function j2(){return j2=(0,$.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=Ot();for(const E of s){l.push(E.batchId);for(const b of E.mutations)_=_.add(b.key)}for(const E of u){g.push(E.batchId);for(const b of E.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(E=>({er:E,removedBatchIds:l,addedBatchIds:g}))})})}),j2.apply(this,arguments)}function aU(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function uU(n,e,t){let r=Ot(),s=Ot();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=ss();return t.forEach((g,_)=>{const E=u.get(g);_.isFoundDocument()!==E.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(ct.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||0===_.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ae("LocalStore","Ignoring outdated watch update for ",g,". Current version:",E.version," Watch version:",_.version)}),{nr:l,sr:s}})}function R7(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sm(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,J.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Vu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Am(n,e,t){return $2.apply(this,arguments)}function $2(){return $2=(0,$.Z)(function*(n,e,t){const r=Ge(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Cl(l))throw l;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),$2.apply(this,arguments)}function E1(n,e,t){const r=Ge(n);let s=ct.min(),u=Ot();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,E){const b=Ge(g),S=b.Yi.get(E);return void 0!==S?J.resolve(b.Ji.get(S)):b.Bs.getTargetData(_,E)}(r,l,Vi(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:ct.min(),t?u:Ot())).next(g=>(dU(r,z4(e),g),{documents:g,ir:u})))}function cU(n,e){const t=Ge(n),r=Ge(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function lU(n,e){const t=Ge(n),r=t.Xi.get(e)||ct.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,a4(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(dU(t,e,s),s))}function dU(n,e,t){let r=n.Xi.get(e)||ct.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function H2(){return H2=(0,$.Z)(function*(n,e,t,r){const s=Ge(n);let u=Ot(),l=ss();for(const E of t){const b=e.rr(E.metadata.name);E.document&&(u=u.add(b));const S=e.ur(E);S.setReadTime(e.cr(E.metadata.readTime)),l=l.insert(b,S)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Sm(s,(E=r,Vi(_m(Wt.fromString(`__bundle__/docs/${E}`)))));var E;return s.persistence.runTransaction("Apply bundle documents","readwrite",E=>uU(E,g,l).next(b=>(g.apply(E),b)).next(b=>s.Bs.removeMatchingKeysForTargetId(E,_.targetId).next(()=>s.Bs.addMatchingKeys(E,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(E,b.nr,b.sr)).next(()=>b.nr)))}),H2.apply(this,arguments)}function F7(n,e){return z2.apply(this,arguments)}function z2(){return z2=(0,$.Z)(function*(n,e,t=Ot()){const r=yield Sm(n,Vi(A2(e.bundledQuery))),s=Ge(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=dr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Vr.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),z2.apply(this,arguments)}function hU(n,e){return`firestore_clients_${n}_${e}`}function fU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function G2(n,e){return`firestore_targets_${n}_${e}`}class C1{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ee(s.error.code,s.error.message))),l?new C1(e,t,s.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ee(r.error.code,r.error.message))),u?new Vw(e,r.state,s):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class b1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=m2();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=h4(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new b1(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class q2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new q2(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class W2{constructor(){this.activeTargetIds=m2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z2{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Cn(Dt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=hU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new W2),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,$.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(hU(e.persistenceKey,s));if(u){const l=b1.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(G2(this.persistenceKey,e));if(r){const s=Vw.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(G2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,$.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=Ns.ct;if(null!=u)try{const g=JSON.parse(u);ut("number"==typeof g),l=g}catch(g){lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==Ns.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new C1(this.currentUser,e,t,r),u=fU(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=fU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=G2(this.persistenceKey,e),u=new Vw(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return b1.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return C1.ar(new Wr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Vw.ar(s,t)}br(e){return q2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,$.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=m2();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class pU{constructor(){this.Hr=new W2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new W2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class L7{Yr(e){}shutdown(){}}class gU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let D1=null;function K2(){return null===D1?D1=268435456+Math.round(2147483648*Math.random()):D1++,"0x"+D1.toString(16)}const U7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V7{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ti="WebChannelConnection";class B7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=K2(),g=this.To(e,t);Ae("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(E=>(Ae("RestConnection",`Received RPC '${e}' ${l}: `,E),E),E=>{throw fo("RestConnection",`RPC '${e}' ${l} failed with error: `,E,"url: ",g,"request:",r),E})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+hm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${U7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=K2();return new Promise((l,g)=>{const _=new LB;_.setWithCredentials(!0),_.listenOnce(RB.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case JP.NO_ERROR:const b=_.getResponseJson();Ae(Ti,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),l(b);break;case JP.TIMEOUT:Ae(Ti,`RPC '${e}' ${u} timed out`),g(new Ee(re.DEADLINE_EXCEEDED,"Request time out"));break;case JP.HTTP_ERROR:const S=_.getStatus();if(Ae(Ti,`RPC '${e}' ${u} failed with status:`,S,"response text:",_.getResponseText()),S>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const G=F?.error;if(G&&G.status&&G.message){const ie=function(le){const ae=le.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ae)>=0?ae:re.UNKNOWN}(G.status);g(new Ee(ie,G.message))}else g(new Ee(re.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Ee(re.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Ae(Ti,`RPC '${e}' ${u} completed.`)}});const E=JSON.stringify(s);Ae(Ti,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",E,r,15)})}Ro(e,t,r){const s=K2(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=PB(),g=NB(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;void 0!==E&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.xmlHttpFactory=new FB({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=u.join("");Ae(Ti,`Creating RPC '${e}' stream ${s}: ${b}`,_);const S=l.createWebChannel(b,_);let F=!1,G=!1;const ie=new V7({ro:ae=>{G?Ae(Ti,`Not sending because RPC '${e}' stream ${s} is closed:`,ae):(F||(Ae(Ti,`Opening RPC '${e}' stream ${s} transport.`),S.open(),F=!0),Ae(Ti,`RPC '${e}' stream ${s} sending:`,ae),S.send(ae))},oo:()=>S.close()}),le=(ae,Fe,et)=>{ae.listen(Fe,Ze=>{try{et(Ze)}catch(pt){setTimeout(()=>{throw pt},0)}})};return le(S,GT.EventType.OPEN,()=>{G||Ae(Ti,`RPC '${e}' stream ${s} transport opened.`)}),le(S,GT.EventType.CLOSE,()=>{G||(G=!0,Ae(Ti,`RPC '${e}' stream ${s} transport closed`),ie.wo())}),le(S,GT.EventType.ERROR,ae=>{G||(G=!0,fo(Ti,`RPC '${e}' stream ${s} transport errored:`,ae),ie.wo(new Ee(re.UNAVAILABLE,"The operation could not be completed")))}),le(S,GT.EventType.MESSAGE,ae=>{var Fe;if(!G){const et=ae.data[0];ut(!!et);const pt=et.error||(null===(Fe=et[0])||void 0===Fe?void 0:Fe.error);if(pt){Ae(Ti,`RPC '${e}' stream ${s} received error:`,pt);const Tt=pt.status;let Vt=function(Wl){const z6=vr[Wl];if(void 0!==z6)return c3(z6)}(Tt),ci=pt.message;void 0===Vt&&(Vt=re.INTERNAL,ci="Unknown error status: "+Tt+" with message "+pt.message),G=!0,ie.wo(new Ee(Vt,ci)),S.close()}else Ae(Ti,`RPC '${e}' stream ${s} received:`,et),ie._o(et)}}),le(g,kB.STAT_EVENT,ae=>{ae.stat===t4.PROXY?Ae(Ti,`RPC '${e}' stream ${s} detected buffering proxy`):ae.stat===t4.NOPROXY&&Ae(Ti,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ie.fo()},0),ie}}function mU(){return typeof window<"u"?window:null}function T1(){return typeof document<"u"?document:null}function Bw(n){return new Yj(n,!0)}class Y2{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class yU{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Y2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,$.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,$.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,$.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Ee(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,$.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j7 extends yU{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Xj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Je(),s=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(ut(void 0===E||"string"==typeof E),Vr.fromBase64String(E||"")):(ut(void 0===E||E instanceof Uint8Array),Vr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const E=void 0===_.code?re.UNKNOWN:c3(_.code);return new Ee(E,_.message||"")}(l);t=new p3(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=Da(n,r.document.name),u=dr(r.document.updateTime),l=r.document.createTime?dr(r.document.createTime):ct.min(),g=new oi({mapValue:{fields:r.document.fields}}),_=Nn.newFoundDocument(s,u,l,g);t=new l1(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=Da(n,r.document),u=r.readTime?dr(r.readTime):ct.min(),l=Nn.newNoDocument(s,u);t=new l1([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Da(n,r.document);t=new l1([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Je();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new zj(s,u);t=new f3(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ct.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?ct.min():u.readTime?dr(u.readTime):ct.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=xw(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=n1(g)?{documents:b3(s,g)}:{query:S2(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=_3(s,u.resumeToken);const _=C2(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(ct.min())>0){l.readTime=Cm(s,u.snapshotVersion.toTimestamp());const _=C2(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function t7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=xw(this.serializer),t.removeTarget=e,this.Wo(t)}}class $7 extends yU{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function e7(n,e){return n&&n.length>0?(ut(void 0!==e),n.map(t=>function(r,s){let u=dr(r.updateTime?r.updateTime:s);return u.isEqual(ct.min())&&(u=dr(s)),new Bj(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.cu(r,t)}return ut(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=xw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ow(this.serializer,r))};this.Wo(t)}}class H7 extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ee(re.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(re.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class G7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(lr(t),this.mu=!1):Ae("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class q7{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,$.Z)(function*(){var _;kl(l)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,$.Z)(function*(E){const b=Ge(E);b.vu.add(4),yield Mm(b),b.bu.set("Unknown"),b.vu.delete(4),yield jw(b)}),function(E){return _.apply(this,arguments)})(l))}))}),this.bu=new G7(r,s)}}function jw(n){return J2.apply(this,arguments)}function J2(){return J2=(0,$.Z)(function*(n){if(kl(n))for(const e of n.Ru)yield e(!0)}),J2.apply(this,arguments)}function Mm(n){return X2.apply(this,arguments)}function X2(){return X2=(0,$.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),X2.apply(this,arguments)}function S1(n,e){const t=Ge(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),nN(t)?tN(t):Om(t).Ko()&&eN(t,e))}function $w(n,e){const t=Ge(n),r=Om(t);t.Au.delete(e),r.Ko()&&_U(t,e),0===t.Au.size&&(r.Ko()?r.jo():kl(t)&&t.bu.set("Unknown"))}function eN(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Om(n).su(e)}function _U(n,e){n.Vu.qt(e),Om(n).iu(e)}function tN(n){n.Vu=new qj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Om(n).start(),n.bu.gu()}function nN(n){return kl(n)&&!Om(n).Uo()&&n.Au.size>0}function kl(n){return 0===Ge(n).vu.size}function vU(n){n.Vu=void 0}function W7(n){return rN.apply(this,arguments)}function rN(){return rN=(0,$.Z)(function*(n){n.Au.forEach((e,t)=>{eN(n,e)})}),rN.apply(this,arguments)}function Z7(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,$.Z)(function*(n,e){vU(n),nN(n)?(n.bu.Iu(e),tN(n)):n.bu.set("Unknown")}),iN.apply(this,arguments)}function K7(n,e,t){return sN.apply(this,arguments)}function sN(){return sN=(0,$.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof p3&&2===e.state&&e.cause)try{yield(r=(0,$.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield A1(n,r)}else if(e instanceof l1?n.Vu.Ht(e):e instanceof f3?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ct.min()))try{const r=yield aU(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=s.Au.get(_);E&&s.Au.set(_,E.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const E=s.Au.get(g);if(!E)return;s.Au.set(g,E.withResumeToken(Vr.EMPTY_BYTE_STRING,E.snapshotVersion)),_U(s,g);const b=new Vu(E.target,g,_,E.sequenceNumber);eN(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield A1(n,r)}var r}),sN.apply(this,arguments)}function A1(n,e,t){return oN.apply(this,arguments)}function oN(){return oN=(0,$.Z)(function*(n,e,t){if(!Cl(e))throw e;n.vu.add(1),yield Mm(n),n.bu.set("Offline"),t||(t=()=>aU(n.localStore)),n.asyncQueue.enqueueRetryable((0,$.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield jw(n)}))}),oN.apply(this,arguments)}function wU(n,e){return e().catch(t=>A1(n,t,e))}function xm(n){return aN.apply(this,arguments)}function aN(){return aN=(0,$.Z)(function*(n){const e=Ge(n),t=Fl(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Y7(e);)try{const s=yield R7(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,Q7(e,s)}catch(s){yield A1(e,s)}IU(e)&&EU(e)}),aN.apply(this,arguments)}function Y7(n){return kl(n)&&n.Eu.length<10}function Q7(n,e){n.Eu.push(e);const t=Fl(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function IU(n){return kl(n)&&!Fl(n).Uo()&&n.Eu.length>0}function EU(n){Fl(n).start()}function J7(n){return uN.apply(this,arguments)}function uN(){return uN=(0,$.Z)(function*(n){Fl(n).hu()}),uN.apply(this,arguments)}function X7(n){return cN.apply(this,arguments)}function cN(){return cN=(0,$.Z)(function*(n){const e=Fl(n);for(const t of n.Eu)e.uu(t.mutations)}),cN.apply(this,arguments)}function e9(n,e,t){return lN.apply(this,arguments)}function lN(){return lN=(0,$.Z)(function*(n,e,t){const r=n.Eu.shift(),s=v2.from(r,e,t);yield wU(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield xm(n)}),lN.apply(this,arguments)}function t9(n,e){return dN.apply(this,arguments)}function dN(){return dN=(0,$.Z)(function*(n,e){var t;e&&Fl(n).ou&&(yield(t=(0,$.Z)(function*(r,s){if(u3(u=s.code)&&u!==re.ABORTED){const l=r.Eu.shift();Fl(r).Qo(),yield wU(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield xm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),IU(n)&&EU(n)}),dN.apply(this,arguments)}function CU(n,e){return hN.apply(this,arguments)}function hN(){return hN=(0,$.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=kl(t);t.vu.add(3),yield Mm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield jw(t)}),hN.apply(this,arguments)}function fN(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,$.Z)(function*(n,e){const t=Ge(n);e?(t.vu.delete(2),yield jw(t)):e||(t.vu.add(2),yield Mm(t),t.bu.set("Unknown"))}),pN.apply(this,arguments)}function Om(n){return n.Su||(n.Su=function(e,t,r){const s=Ge(e);return s.fu(),new j7(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:W7.bind(null,n),ao:Z7.bind(null,n),nu:K7.bind(null,n)}),n.Ru.push(function(){var e=(0,$.Z)(function*(t){t?(n.Su.Qo(),nN(n)?tN(n):n.bu.set("Unknown")):(yield n.Su.stop(),vU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Fl(n){return n.Du||(n.Du=function(e,t,r){const s=Ge(e);return s.fu(),new $7(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:J7.bind(null,n),ao:t9.bind(null,n),au:X7.bind(null,n),cu:e9.bind(null,n)}),n.Ru.push(function(){var e=(0,$.Z)(function*(t){t?(n.Du.Qo(),yield xm(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class gN{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new gN(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ee(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Cl(n))return new Ee(re.UNAVAILABLE,`${e}: ${n}`);throw n}class Nm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Ew(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new Nm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Nm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bU{constructor(){this.Cu=new Cn(He.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Je():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Rm{constructor(e,t,r,s,u,l,g,_,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Rm(e,t,Nm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ww(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class n9{constructor(){this.Nu=void 0,this.listeners=[]}}class r9{constructor(){this.queries=new Lu(e=>H4(e),ww),this.onlineState="Unknown",this.ku=new Set}}function mN(n,e){return yN.apply(this,arguments)}function yN(){return yN=(0,$.Z)(function*(n,e){const t=Ge(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new n9),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=Pm(l,`Initialization of query '${g2(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&wN(t)}),yN.apply(this,arguments)}function _N(n,e){return vN.apply(this,arguments)}function vN(){return vN=(0,$.Z)(function*(n,e){const t=Ge(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),vN.apply(this,arguments)}function i9(n,e){const t=Ge(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&wN(t)}function s9(n,e,t){const r=Ge(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function wN(n){n.ku.forEach(e=>{e.next()})}class IN{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Rm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Rm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class o9{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class DU{constructor(e){this.serializer=e}rr(e){return Da(this.serializer,e)}ur(e){return e.metadata.exists?C3(this.serializer,e.document,!1):Nn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return dr(e)}}class a9{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TU(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Wt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new DU(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||Ot()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,$.Z)(function*(){const t=yield function k7(n,e,t,r){return H2.apply(this,arguments)}(e.localStore,new DU(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield F7(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function TU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SU{constructor(e){this.key=e}}class AU{constructor(e){this.key=e}}class MU{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ot(),this.mutatedKeys=Ot(),this.tc=G4(e),this.ec=new Nm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new bU,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,E="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,S)=>{const F=s.get(b),G=Iw(this.query,S)?S:null,ie=!!F&&this.mutatedKeys.has(F.key),le=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let ae=!1;F&&G?F.data.isEqual(G.data)?ie!==le&&(r.track({type:3,doc:G}),ae=!0):this.rc(F,G)||(r.track({type:2,doc:G}),ae=!0,(_&&this.tc(G,_)>0||E&&this.tc(G,E)<0)&&(g=!0)):!F&&G?(r.track({type:0,doc:G}),ae=!0):F&&!G&&(r.track({type:1,doc:F}),ae=!0,(_||E)&&(g=!0)),ae&&(G?(l=l.add(G),u=le?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((E,b)=>function(S,F){const G=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return G(S)-G(F)}(E.type,b.type)||this.tc(E.doc,b.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Rm(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ot(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new AU(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new SU(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Ot();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Rm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class u9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class c9{constructor(e){this.key=e,this.fc=!1}}class l9{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Lu(g=>H4(g),ww),this._c=new Map,this.mc=new Set,this.gc=new Cn(He.comparator),this.yc=new Map,this.Ic=new k2,this.Tc={},this.Ec=new Map,this.Ac=mf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function d9(n,e){return EN.apply(this,arguments)}function EN(){return EN=(0,$.Z)(function*(n,e){const t=GN(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Sm(t.localStore,Vi(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield CN(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&S1(t.remoteStore,l)}return s}),EN.apply(this,arguments)}function CN(n,e,t,r,s){return bN.apply(this,arguments)}function bN(){return bN=(0,$.Z)(function*(n,e,t,r,s){n.Rc=(S,F,G)=>{return(ie=(0,$.Z)(function*(le,ae,Fe,et){let Ze=ae.view.sc(Fe);Ze.zi&&(Ze=yield E1(le.localStore,ae.query,!1).then(({documents:Vt})=>ae.view.sc(Vt,Ze)));const pt=et&&et.targetChanges.get(ae.targetId),Tt=ae.view.applyChanges(Ze,le.isPrimaryClient,pt);return RN(le,ae.targetId,Tt.cc),Tt.snapshot}),function(le,ae,Fe,et){return ie.apply(this,arguments)})(n,S,F,G);var ie};const u=yield E1(n.localStore,e,!0),l=new MU(e,u.ir),g=l.sc(u.documents),_=Aw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),E=l.applyChanges(g,n.isPrimaryClient,_);RN(n,t,E.cc);const b=new u9(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),E.snapshot}),bN.apply(this,arguments)}function h9(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,$.Z)(function*(n,e){const t=Ge(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!ww(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Am(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$w(t.remoteStore,r.targetId),km(t,r.targetId)}).catch(El))):(km(t,r.targetId),yield Am(t.localStore,r.targetId,!0))}),DN.apply(this,arguments)}function TN(){return TN=(0,$.Z)(function*(n,e,t){const r=qN(n);try{const s=yield function(u,l){const g=Ge(u),_=Vn.now(),E=l.reduce((F,G)=>F.add(G.key),Ot());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let G=ss(),ie=Ot();return g.Zi.getEntries(F,E).next(le=>{G=le,G.forEach((ae,Fe)=>{Fe.isValidDocument()||(ie=ie.add(ae))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,G)).next(le=>{b=le;const ae=[];for(const Fe of l){const et=$j(Fe,b.get(Fe.key).overlayedDocument);null!=et&&ae.push(new Uu(Fe.key,et,M4(et.value.mapValue),Bn.exists(!0)))}return g.mutationQueue.addMutationBatch(F,_,ae,l)}).next(le=>{S=le;const ae=le.applyToLocalDocumentSet(b,ie);return g.documentOverlayCache.saveOverlays(F,le.batchId,ae)})}).then(()=>({batchId:S.batchId,changes:W4(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new Cn(Dt)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Bu(r,s.changes),yield xm(r.remoteStore)}catch(s){const u=Pm(s,"Failed to persist write");t.reject(u)}}),TN.apply(this,arguments)}function xU(n,e){return SN.apply(this,arguments)}function SN(){return SN=(0,$.Z)(function*(n,e){const t=Ge(n);try{const r=yield function N7(n,e){const t=Ge(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((b,S)=>{const F=s.get(S);if(!F)return;g.push(t.Bs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(u,b.addedDocuments,S)));let G=F.withSequenceNumber(u.currentSequenceNumber);var ie,le,ae;null!==e.targetMismatches.get(S)?G=G.withResumeToken(Vr.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):b.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(b.resumeToken,r)),s=s.insert(S,G),le=G,ae=b,(0===(ie=F).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,G))});let _=ss(),E=Ot();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(uU(u,l,e.documentUpdates).next(b=>{_=b.nr,E=b.sr})),!r.isEqual(ct.min())){const b=t.Bs.getLastRemoteSnapshotVersion(u).next(S=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return J.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,E)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?ut(l.fc):s.removedDocuments.size>0&&(ut(l.fc),l.fc=!1))}),yield Bu(t,r,e)}catch(r){yield El(r)}}),SN.apply(this,arguments)}function OU(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=Ge(u);g.onlineState=l;let _=!1;g.queries.forEach((E,b)=>{for(const S of b.listeners)S.Mu(l)&&(_=!0)}),_&&wN(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function p9(n,e,t){return AN.apply(this,arguments)}function AN(){return AN=(0,$.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Cn(He.comparator);l=l.insert(u,Nn.newNoDocument(u,ct.min()));const g=Ot().add(u),_=new Sw(ct.min(),new Map,new Cn(Dt),l,g);yield xU(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),kN(r)}else yield Am(r.localStore,e,!1).then(()=>km(r,e,t)).catch(El)}),AN.apply(this,arguments)}function g9(n,e){return MN.apply(this,arguments)}function MN(){return MN=(0,$.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const s=yield function P7(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,E){const b=_.batch,S=b.keys();let F=J.resolve();return S.forEach(G=>{F=F.next(()=>E.getEntry(g,G)).next(ie=>{const le=_.docVersions.get(G);ut(null!==le),ie.version.compareTo(le)<0&&(b.applyToRemoteDocument(ie,_),ie.isValidDocument()&&(ie.setReadTime(_.commitVersion),E.addEntry(ie)))})}),F.next(()=>l.mutationQueue.removeMutationBatch(g,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=Ot();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);NN(t,r,null),PN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bu(t,s)}catch(s){yield El(s)}}),MN.apply(this,arguments)}function m9(n,e,t){return xN.apply(this,arguments)}function xN(){return xN=(0,$.Z)(function*(n,e,t){const r=Ge(n);try{const s=yield function(u,l){const g=Ge(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,l).next(b=>(ut(null!==b),E=b.keys(),g.mutationQueue.removeMutationBatch(_,b))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(r.localStore,e);NN(r,e,t),PN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(r,s)}catch(s){yield El(s)}}),xN.apply(this,arguments)}function ON(){return ON=(0,$.Z)(function*(n,e){const t=Ge(n);kl(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ge(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Pm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),ON.apply(this,arguments)}function PN(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function NN(n,e,t){const r=Ge(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||PU(n,r)})}function PU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&($w(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),kN(n))}function RN(n,e,t){for(const r of t)r instanceof SU?(n.Ic.addReference(r.key,e),_9(n,r)):r instanceof AU?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||PU(n,r.key)):Je()}function _9(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.mc.add(r),kN(n))}function kN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new He(Wt.fromString(e)),r=n.Ac.next();n.yc.set(r,new c9(t)),n.gc=n.gc.insert(t,r),S1(n.remoteStore,new Vu(Vi(_m(t.path)),r,"TargetPurposeLimboResolution",Ns.ct))}}function Bu(n,e,t){return FN.apply(this,arguments)}function FN(){return FN=(0,$.Z)(function*(n,e,t){const r=Ge(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E?.fromCache?"not-current":"current"),E){s.push(E);const b=B2.Li(_.targetId,E);u.push(b)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,$.Z)(function*(_,E){const b=Ge(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>J.forEach(E,F=>J.forEach(F.Fi,G=>b.persistence.referenceDelegate.addReference(S,F.targetId,G)).next(()=>J.forEach(F.Bi,G=>b.persistence.referenceDelegate.removeReference(S,F.targetId,G)))))}catch(S){if(!Cl(S))throw S;Ae("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const F=S.targetId;if(!S.fromCache){const G=b.Ji.get(F),le=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);b.Ji=b.Ji.insert(F,le)}}}),function(_,E){return g.apply(this,arguments)})(r.localStore,u))}),FN.apply(this,arguments)}function v9(n,e){return LN.apply(this,arguments)}function LN(){return LN=(0,$.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield oU(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Ee(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bu(t,r.er)}var s}),LN.apply(this,arguments)}function w9(n,e){const t=Ge(n),r=t.yc.get(e);if(r&&r.fc)return Ot().add(r.key);{let s=Ot();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function I9(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,$.Z)(function*(n,e){const t=Ge(n),r=yield E1(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&RN(t,e.targetId,s.cc),s}),UN.apply(this,arguments)}function E9(n,e){return VN.apply(this,arguments)}function VN(){return VN=(0,$.Z)(function*(n,e){const t=Ge(n);return lU(t.localStore,e).then(r=>Bu(t,r))}),VN.apply(this,arguments)}function C9(n,e,t,r){return BN.apply(this,arguments)}function BN(){return BN=(0,$.Z)(function*(n,e,t,r){const s=Ge(n),u=yield function(l,g){const _=Ge(l),E=Ge(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>E.Sn(b,g).next(S=>S?_.localDocuments.getDocuments(b,S):J.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield xm(s.remoteStore):"acknowledged"===t||"rejected"===t?(NN(s,e,r||null),PN(s,e),g=e,Ge(Ge(s.localStore).mutationQueue).Cn(g)):Je(),yield Bu(s,u)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),BN.apply(this,arguments)}function jN(){return jN=(0,$.Z)(function*(n,e){const t=Ge(n);if(GN(t),qN(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield NU(t,r.toArray());t.vc=!0,yield fN(t.remoteStore,!0);for(const u of s)S1(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(km(t,l),Am(t.localStore,l,!0))),$w(t.remoteStore,l)}),yield s,yield NU(t,r),function(u){const l=Ge(u);l.yc.forEach((g,_)=>{$w(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Cn(He.comparator)}(t),t.vc=!1,yield fN(t.remoteStore,!1)}}),jN.apply(this,arguments)}function NU(n,e,t){return $N.apply(this,arguments)}function $N(){return $N=(0,$.Z)(function*(n,e,t){const r=Ge(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Sm(r.localStore,Vi(_[0]));for(const E of _){const b=r.wc.get(E),S=yield I9(r,b);S.snapshot&&u.push(S.snapshot)}}else{const E=yield cU(r.localStore,l);g=yield Sm(r.localStore,E),yield CN(r,RU(E),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),$N.apply(this,arguments)}function RU(n){return j4(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function D9(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).$i()}function T9(n,e,t,r){return HN.apply(this,arguments)}function HN(){return HN=(0,$.Z)(function*(n,e,t,r){const s=Ge(n);if(s.vc)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield lU(s.localStore,z4(u[0])),g=Sw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield Bu(s,l,g);break}case"rejected":yield Am(s.localStore,e,!0),km(s,e,r);break;default:Je()}}),HN.apply(this,arguments)}function S9(n,e,t){return zN.apply(this,arguments)}function zN(){return zN=(0,$.Z)(function*(n,e,t){const r=GN(n);if(r.vc){for(const s of e){if(r._c.has(s)){Ae("SyncEngine","Adding an already active target "+s);continue}const u=yield cU(r.localStore,s),l=yield Sm(r.localStore,u);yield CN(r,RU(u),l.targetId,!1,l.resumeToken),S1(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Am(r.localStore,s,!1).then(()=>{$w(r.remoteStore,s),km(r,s)}).catch(El))}}),zN.apply(this,arguments)}function GN(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p9.bind(null,e),e.dc.nu=i9.bind(null,e.eventManager),e.dc.Pc=s9.bind(null,e.eventManager),e}function qN(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m9.bind(null,e),e}class Hw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,$.Z)(function*(){t.serializer=Bw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return sU(this.persistence,new iU,e.initialUser,this.serializer)}createPersistence(e){return new F2(v1.zs,this.serializer)}createSharedClientState(e){return new pU}terminate(){var e=this;return(0,$.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WN extends Hw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,$.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield qN(r.Vc.syncEngine),yield xm(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return sU(this.persistence,new iU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new K3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ej(t,this.persistence);return new XB(e.asyncQueue,r)}createPersistence(e){const t=V2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new U2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mU(),T1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new pU}}class kU extends WN{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,$.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof Z2&&(r.sharedClientState.syncEngine={jr:C9.bind(null,s),zr:T9.bind(null,s),Wr:S9.bind(null,s),$i:D9.bind(null,s),Qr:E9.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,$.Z)(function*(l){yield function b9(n,e){return jN.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=mU();if(!Z2.D(t))throw new Ee(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=V2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Z2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fm{initialize(e,t){var r=this;return(0,$.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>OU(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=v9.bind(null,r.syncEngine),yield fN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new r9}createDatastore(e){const t=Bw(e.databaseInfo.databaseId),r=new B7(e.databaseInfo);return new H7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>OU(this.syncEngine,g,0),l=gU.D()?new gU:new L7,new q7(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,E){const b=new l9(r,s,u,l,g,_);return E&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,$.Z)(function*(t){const r=Ge(t);Ae("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Mm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function FU(n,e=10240){let t=0;return{read:()=>(0,$.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,$.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class M1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class x9{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,$.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,$.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,$.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new o9(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,$.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,$.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,$.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class O9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,$.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ee(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,$.Z)(function*(u,l){const g=Ge(u),_=xw(g.serializer)+"/documents",E={documents:l.map(G=>Mw(g.serializer,G))},b=yield g.vo("BatchGetDocuments",_,E,l.length),S=new Map;b.forEach(G=>{const ie=function Jj(n,e){return"found"in e?function(t,r){ut(!!r.found);const s=Da(t,r.found.name),u=dr(r.found.updateTime),l=r.found.createTime?dr(r.found.createTime):ct.min(),g=new oi({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){ut(!!r.missing),ut(!!r.readTime);const s=Da(t,r.missing),u=dr(r.readTime);return Nn.newNoDocument(s,u)}(n,e):Je()}(g.serializer,G);S.set(ie.key.toString(),ie)});const F=[];return l.forEach(G=>{const ie=S.get(G.toString());ut(!!ie),F.push(ie)}),F}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Em(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,$.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=He.fromPath(s);e.mutations.push(new y2(u,e.precondition(u)))}),yield(r=(0,$.Z)(function*(s,u){const l=Ge(s),g=xw(l.serializer)+"/documents",_={writes:u.map(E=>Ow(l.serializer,E))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ee(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ct.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ct.min()))throw new Ee(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P9{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new Y2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,$.Z)(function*(){const t=new O9(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!fw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!u3(t)}return!1}}class N9{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Wr.UNAUTHENTICATED,this.clientId=s4.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,$.Z)(function*(g){Ae("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ae("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,$.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Pm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function x1(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,$.Z)(function*(u){r.isEqual(u)||(yield oU(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ZN.apply(this,arguments)}function KN(n,e){return YN.apply(this,arguments)}function YN(){return YN=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QN(n);Ae("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>CU(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>CU(e.remoteStore,u)),n._onlineComponents=e}),YN.apply(this,arguments)}function LU(n){return"FirebaseError"===n.name?n.code===re.FAILED_PRECONDITION||n.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function QN(n){return JN.apply(this,arguments)}function JN(){return JN=(0,$.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield x1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!LU(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),yield x1(n,new Hw)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield x1(n,new Hw);return n._offlineComponents}),JN.apply(this,arguments)}function O1(n){return XN.apply(this,arguments)}function XN(){return XN=(0,$.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield KN(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield KN(n,new Fm))),n._onlineComponents}),XN.apply(this,arguments)}function UU(n){return QN(n).then(e=>e.persistence)}function P1(n){return QN(n).then(e=>e.localStore)}function VU(n){return O1(n).then(e=>e.remoteStore)}function eR(n){return O1(n).then(e=>e.syncEngine)}function Lm(n){return tR.apply(this,arguments)}function tR(){return tR=(0,$.Z)(function*(n){const e=yield O1(n),t=e.eventManager;return t.onListen=d9.bind(null,e.syncEngine),t.onUnlisten=h9.bind(null,e.syncEngine),t}),tR.apply(this,arguments)}function jU(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function(s,u,l,g,_){const E=new M1({next:S=>{u.enqueueAndForget(()=>_N(s,b));const F=S.docs.has(l);!F&&S.fromCache?_.reject(new Ee(re.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&g&&"server"===g.source?_.reject(new Ee(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new IN(_m(l.path),E,{includeMetadataChanges:!0,Ku:!0});return mN(s,b)}(yield Lm(n),n.asyncQueue,e,t,r)})),r.promise}function $U(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function(s,u,l,g,_){const E=new M1({next:S=>{u.enqueueAndForget(()=>_N(s,b)),S.fromCache&&"server"===g.source?_.reject(new Ee(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new IN(l,E,{includeMetadataChanges:!0,Ku:!0});return mN(s,b)}(yield Lm(n),n.asyncQueue,e,t,r)})),r.promise}function HU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const zU=new Map;function nR(n,e,t){if(!t)throw new Ee(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GU(n,e,t,r){if(!0===e&&!0===r)throw new Ee(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qU(n){if(!He.isDocumentKey(n))throw new Ee(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WU(n){if(He.isDocumentKey(n))throw new Ee(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function N1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=N1(n);throw new Ee(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZU(n,e){if(e<=0)throw new Ee(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class KU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ee(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=HU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ee(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jB;switch(t.type){case"firstParty":return new GB(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ee(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zU.get(e);t&&(Ae("ComponentProvider","Removing Datastore"),zU.delete(e),t.terminate())}(this),Promise.resolve()}}function YU(n,e,t,r={}){var s;const u=(n=qt(n,zw))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=Wr.MOCK_USER;else{g=(0,ze.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ee(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Wr(E)}n._authCredentials=new $B(new r4(g,_))}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class Ta extends ai{constructor(e,t,r){super(e,t,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new He(e))}withConverter(e){return new Ta(this.firestore,e,this._path)}}function QU(n,e,...t){if(n=(0,ze.m9)(n),nR("collection","path",e),n instanceof zw){const r=Wt.fromString(e,...t);return WU(r),new Ta(n,null,r)}{if(!(n instanceof Rn||n instanceof Ta))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return WU(r),new Ta(n.firestore,null,r)}}function R1(n,e,...t){if(n=(0,ze.m9)(n),1===arguments.length&&(e=s4.A()),nR("doc","path",e),n instanceof zw){const r=Wt.fromString(e,...t);return qU(r),new Rn(n,null,new He(r))}{if(!(n instanceof Rn||n instanceof Ta))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return qU(r),new Rn(n.firestore,n instanceof Ta?n.converter:null,new He(r))}}function JU(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),(n instanceof Rn||n instanceof Ta)&&(e instanceof Rn||e instanceof Ta)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rR(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),n instanceof ai&&e instanceof ai&&n.firestore===e.firestore&&ww(n._query,e._query)&&n.converter===e.converter}class H9{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Y2(this,"async_queue_retry"),this.Xc=()=>{const t=T1();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=T1();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=T1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ur;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,$.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Cl(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=gN.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&Je()}verifyOperationInProgress(){}sa(){var e=this;return(0,$.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function iR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class z9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class kn extends zw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new H9,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XU(this),this._firestoreClient.terminate()}}function q9(n,e){const t="object"==typeof n?n:(0,xn.getApp)(),r="string"==typeof n?n:e||"(default)",s=(0,xn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const u=(0,ze.P0)("firestore");u&&YU(s,...u)}return s}function hr(n){return n._firestoreClient||XU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XU(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ij(n._databaseId,g,n._persistenceKey,(E=s).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,HU(E.experimentalLongPollingOptions),E.useFetchStreams));var g,E;n._firestoreClient=new N9(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function eV(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,$.Z)(function*(){try{yield x1(n,t),yield KN(n,e),r.resolve()}catch(s){const u=s;if(!LU(u))throw u;fo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function tV(n){if(n._initialized||n._terminated)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sa(Vr.fromBase64String(e))}catch(t){throw new Ee(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sa(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ju{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ee(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._methodName=e}}class k1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}const n$=/^__.*__$/;class r${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Im(e,this.data,t,this.fieldTransforms)}}class nV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class F1{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new F1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return V1(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(rV(this.ca)&&n$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class i${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bw(e)}ya(e,t,r,s=!1){return new F1({ca:e,methodName:t,ga:r,path:Jn.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vf(n){const e=n._freezeSettings(),t=Bw(n._databaseId);return new i$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L1(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);uR("Data must be an object, but it was:",l,r);const g=oV(r,l);let _,E;if(u.merge)_=new is(l.fieldMask),E=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const S of u.mergeFields){const F=Ww(e,S,t);if(!l.contains(F))throw new Ee(re.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);uV(b,F)||b.push(F)}_=new is(b),E=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=l.fieldTransforms;return new r$(new oi(g),_,E)}class qw extends _f{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qw}}function iV(n,e,t){return new F1({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sR extends _f{_toFieldTransform(e){return new bw(e.path,new vm)}isEqual(e){return e instanceof sR}}class s$ extends _f{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=iV(this,e,!0),r=this.pa.map(u=>wf(u,t)),s=new cf(r);return new bw(e.path,s)}isEqual(e){return this===e}}class o$ extends _f{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=iV(this,e,!0),r=this.pa.map(u=>wf(u,t)),s=new lf(r);return new bw(e.path,s)}isEqual(e){return this===e}}class a$ extends _f{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new wm(e.serializer,Q4(e.serializer,this.Ia));return new bw(e.path,t)}isEqual(e){return this===e}}function oR(n,e,t,r){const s=n.ya(1,e,t);uR("Data must be an object, but it was:",s,r);const u=[],l=oi.empty();bl(r,(_,E)=>{const b=U1(e,_,t);E=(0,ze.m9)(E);const S=s.da(b);if(E instanceof qw)u.push(b);else{const F=wf(E,S);null!=F&&(u.push(b),l.set(b,F))}});const g=new is(u);return new nV(l,g,s.fieldTransforms)}function aR(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[Ww(e,r,t)],_=[s];if(u.length%2!=0)throw new Ee(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)g.push(Ww(e,u[F])),_.push(u[F+1]);const E=[],b=oi.empty();for(let F=g.length-1;F>=0;--F)if(!uV(E,g[F])){const G=g[F];let ie=_[F];ie=(0,ze.m9)(ie);const le=l.da(G);if(ie instanceof qw)E.push(G);else{const ae=wf(ie,le);null!=ae&&(E.push(G),b.set(G,ae))}}const S=new is(E);return new nV(b,S,l.fieldTransforms)}function sV(n,e,t,r=!1){return wf(t,n.ya(r?4:3,e))}function wf(n,e){if(aV(n=(0,ze.m9)(n)))return uR("Unsupported field value:",e,n),oV(n,e);if(n instanceof _f)return function(t,r){if(!rV(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=wf(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Q4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Vn.fromDate(t);return{timestampValue:Cm(r.serializer,s)}}if(t instanceof Vn){const s=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cm(r.serializer,s)}}if(t instanceof k1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sa)return{bytesValue:_3(r.serializer,t._byteString)};if(t instanceof Rn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:b2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${N1(t)}`)}(n,e)}function oV(n,e){const t={};return w4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(n,(r,s)=>{const u=wf(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function aV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof k1||n instanceof Sa||n instanceof Rn||n instanceof _f)}function uR(n,e,t){if(!aV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=N1(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Ww(n,e,t){if((e=(0,ze.m9)(e))instanceof ju)return e._internalPath;if("string"==typeof e)return U1(n,e);throw V1("Field path arguments must be of type string or ",n,!1,void 0,t)}const u$=new RegExp("[~\\*/\\[\\]]");function U1(n,e,t){if(e.search(u$)>=0)throw V1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ju(...e.split("."))._internalPath}catch{throw V1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function V1(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new Ee(re.INVALID_ARGUMENT,g+n+_)}function uV(n,e){return n.some(t=>t.isEqual(e))}class Zw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(B1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class c$ extends Zw{data(){return super.data()}}function B1(n,e){return"string"==typeof e?U1(n,e):e instanceof ju?e._internalPath:e._delegate._internalPath}function cV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ee(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cR{}class Kw extends cR{}function Ll(n,e,...t){let r=[];e instanceof cR&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof Um).length,l=s.filter(g=>g instanceof Yw).length;if(u>1||u>0&&l>0)throw new Ee(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Yw extends Kw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Yw(e,t,r)}_apply(e){const t=this._parse(e);return fV(e._query,t),new ai(e.firestore,e.converter,p2(e._query,t))}_parse(e){const t=vf(e.firestore);return function(s,u,l,g,_,E,b){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){hV(b,E);const F=[];for(const G of b)F.push(dV(g,s,G));S={arrayValue:{values:F}}}else S=dV(g,s,b)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||hV(b,E),S=sV(l,"where",b,"in"===E||"not-in"===E);return Gt.create(_,E,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Um extends cR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Um(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)fV(u,g),u=p2(u,g)}(e._query,t),new ai(e.firestore,e.converter,p2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lR extends Kw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lR(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ee(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ee(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new mm(s,u);return function(g,_){if(null===h2(g)){const E=i1(g);null!==E&&pV(0,E,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class j1 extends Kw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new j1(e,t,r)}_apply(e){return new ai(e.firestore,e.converter,s1(e._query,this._limit,this._limitType))}}class $1 extends Kw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $1(e,t,r)}_apply(e){const t=lV(e,this.type,this._docOrFields,this._inclusive);return new ai(e.firestore,e.converter,(s=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class H1 extends Kw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new H1(e,t,r)}_apply(e){const t=lV(e,this.type,this._docOrFields,this._inclusive);return new ai(e.firestore,e.converter,(s=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function lV(n,e,t,r){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof Zw)return function(s,u,l,g,_){if(!g)throw new Ee(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const b of uf(s))if(b.field.isKeyField())E.push(sf(u,g.key));else{const S=g.data.field(b.field);if(QT(S))throw new Ee(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const F=b.field.canonicalString();throw new Ee(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}E.push(S)}return new xl(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=vf(n.firestore);return function(u,l,g,_,E,b){const S=u.explicitOrderBy;if(E.length>S.length)throw new Ee(re.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let G=0;G<E.length;G++){const ie=E[G];if(S[G].field.isKeyField()){if("string"!=typeof ie)throw new Ee(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ie}`);if(!f2(u)&&-1!==ie.indexOf("/"))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ie}' contains a slash.`);const le=u.path.child(Wt.fromString(ie));if(!He.isDocumentKey(le))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const ae=new He(le);F.push(sf(l,ae))}else{const le=sV(g,_,ie);F.push(le)}}return new xl(F,b)}(n._query,n.firestore._databaseId,s,e,t,r)}}function dV(n,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new Ee(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f2(e)&&-1!==t.indexOf("/"))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!He.isDocumentKey(r))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sf(n,new He(r))}if(t instanceof Rn)return sf(n,t._key);throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${N1(t)}.`)}function hV(n,e){if(!Array.isArray(n)||0===n.length)throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fV(n,e){if(e.isInequality()){const r=i1(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=h2(n);null!==u&&pV(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ee(re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function pV(n,e,t){if(!t.isEqual(e))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dR{convertValue(e,t="none"){switch(Al(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bl(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new k1(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gw(e));default:return null}}convertTimestamp(e){const t=Dl(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);ut(A3(r));const s=new Tl(r.get(1),r.get(3)),u=new He(r.popFirst(5));return s.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function z1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _$ extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}class If{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $u extends Zw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(B1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qw extends $u{data(e={}){return super.data(e)}}class Ul{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new If(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qw(this._firestore,this._userDataWriter,r.key,r,new If(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Qw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new If(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new Qw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new If(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),E=u.indexOf(l.doc.key)),{type:w$(l.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function w$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function mV(n,e){return n instanceof $u&&e instanceof $u?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ul&&e instanceof Ul&&n._firestore===e._firestore&&rR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vl extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function yV(n,e,t){n=qt(n,Rn);const r=qt(n.firestore,kn),s=z1(n.converter,e,t);return Vm(r,[L1(vf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Bn.none())])}function _V(n,e,t,...r){n=qt(n,Rn);const s=qt(n.firestore,kn),u=vf(s);let l;return l="string"==typeof(e=(0,ze.m9)(e))||e instanceof ju?aR(u,"updateDoc",n._key,e,t,r):oR(u,"updateDoc",n._key,e),Vm(s,[l.toMutation(n._key,Bn.exists(!0))])}function vV(n,...e){var t,r,s;n=(0,ze.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||iR(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(iR(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(s=S.complete)||void 0===s?void 0:s.bind(S)}let _,E,b;if(n instanceof Rn)E=qt(n.firestore,kn),b=_m(n._key.path),_={next:S=>{e[l]&&e[l](hR(E,n,S))},error:e[l+1],complete:e[l+2]};else{const S=qt(n,ai);E=qt(S.firestore,kn),b=S._query;const F=new Vl(E);_={next:G=>{e[l]&&e[l](new Ul(E,F,S,G))},error:e[l+1],complete:e[l+2]},cV(n._query)}return function(S,F,G,ie){const le=new M1(ie),ae=new IN(F,le,G);return S.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return mN(yield Lm(S),ae)})),()=>{le.Dc(),S.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return _N(yield Lm(S),ae)}))}}(hr(E),b,g,_)}function Vm(n,e){return function(t,r){const s=new Ur;return t.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function f9(n,e,t){return TN.apply(this,arguments)}(yield eR(t),r,s)})),s.promise}(hr(n),e)}function hR(n,e,t){const r=t.docs.get(e._key),s=new Vl(n);return new $u(n,s,e._key,r,new If(t.hasPendingWrites,t.fromCache),e.converter)}const U$={maxAttempts:5};class wV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vf(e)}set(e,t,r){this._verifyNotCommitted();const s=Bl(e,this._firestore),u=z1(s.converter,t,r),l=L1(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Bn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Bl(e,this._firestore);let l;return l="string"==typeof(t=(0,ze.m9)(t))||t instanceof ju?aR(this._dataReader,"WriteBatch.update",u._key,t,r,s):oR(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bl(e,this._firestore);return this._mutations=this._mutations.concat(new Em(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bl(n,e){if((n=(0,ze.m9)(n)).firestore!==e)throw new Ee(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class V$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vf(e)}get(e){const t=Bl(e,this._firestore),r=new _$(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Je();const u=s[0];if(u.isFoundDocument())return new Zw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Zw(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const s=Bl(e,this._firestore),u=z1(s.converter,t,r),l=L1(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Bl(e,this._firestore);let l;return l="string"==typeof(t=(0,ze.m9)(t))||t instanceof ju?aR(this._dataReader,"Transaction.update",u._key,t,r,s):oR(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Bl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bl(e,this._firestore),r=new Vl(this._firestore);return super.get(e).then(s=>new $u(this._firestore,r,t._key,s._document,new If(!1,!1),t.converter))}}function fR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ee("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EV(){if(typeof Uint8Array>"u")throw new Ee("unimplemented","Uint8Arrays are not available in this environment.")}function CV(){if(!function vj(){return typeof atob<"u"}())throw new Ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){hm=xn.SDK_VERSION,(0,xn._registerComponent)(new yr.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new kn(new HB(t.getProvider("auth-internal")),new qB(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ee(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,xn.registerVersion)(n4,"3.13.0",n),(0,xn.registerVersion)(n4,"3.13.0","esm2017")}();class Jw{constructor(e){this._delegate=e}static fromBase64String(e){return CV(),new Jw(Sa.fromBase64String(e))}static fromUint8Array(e){return EV(),new Jw(Sa.fromUint8Array(e))}toBase64(){return CV(),this._delegate.toBase64()}toUint8Array(){return EV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pR(n){return function Z$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class K${enableIndexedDbPersistence(e,t){return function W9(n,e){tV(n=qt(n,kn));const t=hr(n);if(t._uninitializedComponentsProvider)throw new Ee(re.FAILED_PRECONDITION,"SDK cache is already specified.");fo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Fm;return eV(t,s,new WN(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Z9(n){tV(n=qt(n,kn));const e=hr(n);if(e._uninitializedComponentsProvider)throw new Ee(re.FAILED_PRECONDITION,"SDK cache is already specified.");fo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Fm;return eV(e,r,new kU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function K9(n){if(n._initialized&&!n._terminated)throw new Ee(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,$.Z)(function*(){try{yield(t=(0,$.Z)(function*(r){if(!Vo.D())return Promise.resolve();const s=r+"main";yield Vo.delete(s)}),function(r){return t.apply(this,arguments)})(V2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){YU(this._delegate,e,t,r)}enableNetwork(){return function Q9(n){return function R9(n){return n.asyncQueue.enqueue((0,$.Z)(function*(){const e=yield UU(n),t=yield VU(n);return e.setNetworkEnabled(!0),function(r){const s=Ge(r);return s.vu.delete(0),jw(s)}(t)}))}(hr(n=qt(n,kn)))}(this._delegate)}disableNetwork(){return function J9(n){return function k9(n){return n.asyncQueue.enqueue((0,$.Z)(function*(){const e=yield UU(n),t=yield VU(n);return e.setNetworkEnabled(!1),(r=(0,$.Z)(function*(s){const u=Ge(s);u.vu.add(0),yield Mm(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(hr(n=qt(n,kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Y9(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function y9(n,e){return ON.apply(this,arguments)}(yield eR(e),t)})),t.promise}(hr(n=qt(n,kn)))}(this._delegate)}onSnapshotsInSync(e){return function M$(n,e){return function U9(n,e){const t=new M1(e);return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return r=yield Lm(n),s=t,Ge(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return r=yield Lm(n),s=t,void Ge(r).ku.delete(s);var r,s}))}}(hr(n=qt(n,kn)),iR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bm(this,QU(this._delegate,e))}catch(t){throw Bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new po(this,R1(this._delegate,e))}catch(t){throw Bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ji(this,function $9(n,e){if(n=qt(n,zw),nR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ai(n,null,(t=e,new Fu(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function B$(n,e,t){n=qt(n,kn);const r=Object.assign(Object.assign({},U$),t);return function(s){if(s.maxAttempts<1)throw new Ee(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new Ur;return s.asyncQueue.enqueueAndForget((0,$.Z)(function*(){const _=yield function BU(n){return O1(n).then(e=>e.datastore)}(s);new P9(s.asyncQueue,_,l,u,g).run()})),g.promise}(hr(n),s=>e(new V$(n,s)),r)}(this._delegate,t=>e(new DV(this,t)))}batch(){return hr(this._delegate),new TV(new wV(this._delegate,e=>Vm(this._delegate,e)))}loadBundle(e){return function X9(n,e){const t=hr(n=qt(n,kn)),r=new z9;return function V9(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?l3().encode(u):u,_=function(_,E){if(_ instanceof Uint8Array)return FU(_,E);if(_ instanceof ArrayBuffer)return FU(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new x9(_,l);var _}(t,Bw(e));n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){!function A9(n,e,t){const r=Ge(n);var s;(s=(0,$.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(F,G){const ie=Ge(F),le=dr(G.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",ae=>ie.qs.getBundleMetadata(ae,G.id)).then(ae=>!!ae&&ae.createTime.compareTo(le)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);g._updateProgress(TU(_));const E=new a9(_,u.localStore,l.serializer);let b=yield l.bc();for(;b;){const F=yield E.zu(b);F&&g._updateProgress(F),b=yield l.bc()}const S=yield E.complete();return yield Bu(u,S.Ju,void 0),yield function(F,G){const ie=Ge(F);return ie.persistence.runTransaction("Save bundle","readwrite",le=>ie.qs.saveBundleMetadata(le,G))}(u.localStore,_),g._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return fo("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var F}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield eR(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function e$(n,e){return function B9(n,e){return n.asyncQueue.enqueue((0,$.Z)(function*(){return function(t,r){const s=Ge(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield P1(n),e)}))}(hr(n=qt(n,kn)),e).then(t=>t?new ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ji(this,t):null)}}class G1 extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jw(new Sa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return po.forKey(t,this.firestore,null)}}class DV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new G1(e)}get(e){const t=Cf(e);return this._delegate.get(t).then(r=>new Xw(this._firestore,new $u(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Cf(e);return r?(fR("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Cf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Cf(e);return this._delegate.delete(t),this}}class TV{constructor(e){this._delegate=e}set(e,t,r){const s=Cf(e);return r?(fR("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Cf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Cf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ef{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ef.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Ef(e,new G1(e),t),s.set(t,u)),u}}Ef.INSTANCES=new WeakMap;class po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new G1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new po(t,new Rn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new po(t,new Rn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bm(this.firestore,QU(this._delegate,e))}catch(t){throw Bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof Rn&&JU(this._delegate,e)}set(e,t){t=fR("DocumentReference.set",t);try{return t?yV(this._delegate,e,t):yV(this._delegate,e)}catch(r){throw Bi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_V(this._delegate,e):_V(this._delegate,e,t,...r)}catch(s){throw Bi(s,"updateDoc()","DocumentReference.update()")}}delete(){return function S$(n){return Vm(qt(n.firestore,kn),[new Em(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=SV(e),r=AV(e,s=>new Xw(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return vV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function E$(n){n=qt(n,Rn);const e=qt(n.firestore,kn),t=hr(e),r=new Vl(e);return function F9(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return(r=(0,$.Z)(function*(s,u,l){try{const g=yield function(_,E){const b=Ge(_);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,E))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Ee(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Pm(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield P1(n),e,t);var r})),t.promise}(t,n._key).then(s=>new $u(e,r,n._key,s,new If(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function C$(n){n=qt(n,Rn);const e=qt(n.firestore,kn);return jU(hr(e),n._key,{source:"server"}).then(t=>hR(e,n,t))}(this._delegate):function I$(n){n=qt(n,Rn);const e=qt(n.firestore,kn);return jU(hr(e),n._key).then(t=>hR(e,n,t))}(this._delegate),t.then(r=>new Xw(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new po(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}function Bi(n,e,t){return n.message=n.message.replace(e,t),n}function SV(n){for(const e of n)if("object"==typeof e&&!pR(e))return e;return{}}function AV(n,e){var t,r;let s;return s=pR(n[0])?n[0]:pR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Xw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mV(this._delegate,e._delegate)}}class eI extends Xw{data(e){const t=this._delegate.data(e);return function BB(n,e){n||Je()}(void 0!==t),t}}class ji{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new G1(e)}where(e,t,r){try{return new ji(this.firestore,Ll(this._delegate,function l$(n,e,t){const r=e,s=B1("where",n);return Yw._create(s,r,t)}(e,t,r)))}catch(s){throw Bi(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ji(this.firestore,Ll(this._delegate,function d$(n,e="asc"){const t=e,r=B1("orderBy",n);return lR._create(r,t)}(e,t)))}catch(r){throw Bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ji(this.firestore,Ll(this._delegate,function h$(n){return ZU("limit",n),j1._create("limit",n,"F")}(e)))}catch(t){throw Bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ji(this.firestore,Ll(this._delegate,function f$(n){return ZU("limitToLast",n),j1._create("limitToLast",n,"L")}(e)))}catch(t){throw Bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ji(this.firestore,Ll(this._delegate,function p$(...n){return $1._create("startAt",n,!0)}(...e)))}catch(t){throw Bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ji(this.firestore,Ll(this._delegate,function g$(...n){return $1._create("startAfter",n,!1)}(...e)))}catch(t){throw Bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ji(this.firestore,Ll(this._delegate,function m$(...n){return H1._create("endBefore",n,!1)}(...e)))}catch(t){throw Bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ji(this.firestore,Ll(this._delegate,function y$(...n){return H1._create("endAt",n,!0)}(...e)))}catch(t){throw Bi(t,"endAt()","Query.endAt()")}}isEqual(e){return rR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D$(n){n=qt(n,ai);const e=qt(n.firestore,kn),t=hr(e),r=new Vl(e);return function L9(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return(r=(0,$.Z)(function*(s,u,l){try{const g=yield E1(s,u,!0),_=new MU(u,g.ir),E=_.sc(g.documents),b=_.applyChanges(E,!1);l.resolve(b.snapshot)}catch(g){const _=Pm(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield P1(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ul(e,r,n,s))}(this._delegate):"server"===e?.source?function T$(n){n=qt(n,ai);const e=qt(n.firestore,kn),t=hr(e),r=new Vl(e);return $U(t,n._query,{source:"server"}).then(s=>new Ul(e,r,n,s))}(this._delegate):function b$(n){n=qt(n,ai);const e=qt(n.firestore,kn),t=hr(e),r=new Vl(e);return cV(n._query),$U(t,n._query).then(s=>new Ul(e,r,n,s))}(this._delegate),t.then(r=>new gR(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SV(e),r=AV(e,s=>new gR(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return vV(this._delegate,t,r)}withConverter(e){return new ji(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}class Q${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Q$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new eI(this._firestore,r))})}isEqual(e){return mV(this._delegate,e._delegate)}}class Bm extends ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new po(this.firestore,e):null}doc(e){try{return new po(this.firestore,void 0===e?R1(this._delegate):R1(this._delegate,e))}catch(t){throw Bi(t,"doc()","CollectionReference.doc()")}}add(e){return function A$(n,e){const t=qt(n.firestore,kn),r=R1(n),s=z1(n.converter,e);return Vm(t,[L1(vf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new po(this.firestore,t))}isEqual(e){return JU(this._delegate,e._delegate)}withConverter(e){return new Bm(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}function Cf(n){return qt(n,Rn)}class mR{constructor(...e){this._delegate=new ju(...e)}static documentId(){return new mR(Jn.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof ju&&this._delegate._internalPath.isEqual(e._internalPath)}}class bf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $$(){return new sR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bf(e)}static delete(){const e=function j$(){return new qw("deleteField")}();return e._methodName="FieldValue.delete",new bf(e)}static arrayUnion(...e){const t=function H$(...n){return new s$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bf(t)}static arrayRemove(...e){const t=function z$(...n){return new o$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bf(t)}static increment(e){const t=function G$(n){return new a$("increment",n)}(e);return t._methodName="FieldValue.increment",new bf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const J$={Firestore:bV,GeoPoint:k1,Timestamp:Vn,Blob:Jw,Transaction:DV,WriteBatch:TV,DocumentReference:po,DocumentSnapshot:Xw,Query:ji,QueryDocumentSnapshot:eI,QuerySnapshot:gR,CollectionReference:Bm,FieldPath:mR,FieldValue:bf,setLogLevel:function Y$(n){!function VB(n){Il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function e8(n){(function X$(n,e){n.INTERNAL.registerComponent(new yr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},J$)))})(n,(e,t)=>new bV(e,t,new K$)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(mP.Z);var t8=N(3019);class n8 extends ti.x{constructor(e=1/0,t=1/0,r=ih){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var r8=N(3020);function MV(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,r8.B)({connector:()=>new n8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function xV(n,e){return(0,_s.m)(e)?(0,An.w)(()=>n,e):(0,An.w)(()=>n)}class jl{constructor(e){return e}}class tI{constructor(){return(0,xn.getApps)()}}const yR=new d.OlP("angularfire2._apps"),s8={provide:jl,useFactory:function i8(n){return n&&1===n.length?n[0]:new jl((0,xn.getApp)())},deps:[[new d.FiY,yR]]},o8={provide:tI,deps:[[new d.FiY,yR]]};function a8(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jl(r)}}let u8=(()=>{class n{constructor(t){(0,xn.registerVersion)("angularfire",Zh.full,"core"),(0,xn.registerVersion)("angularfire",Zh.full,"app"),(0,xn.registerVersion)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[s8,o8]}),n})();function c8(n,...e){return{ngModule:u8,providers:[{provide:yR,useFactory:a8(n),multi:!0,deps:[d.R0b,d.zs3,Fo,...e]}]}}const l8=Kh(xn.initializeApp,!0),_R=new Map,OV={activated:!1,tokenObservers:[]},d8={initialized:!1,enabled:!1};function er(n){return _R.get(n)||Object.assign({},OV)}function q1(){return d8}const vR="https://content-firebaseappcheck.googleapis.com/v1",g8="exchangeDebugToken",PV={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class y8{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,$.Z)(function*(){t.stop();try{t.pending=new ze.BH,yield function _8(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ze.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ui=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wR(n){if(!er(n).activated)throw ui.create("use-before-activation",{appName:n.name})}function K1(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,$.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const S=yield s.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(S){throw ui.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw ui.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(S){throw ui.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const E=1e3*Number(_[1]),b=Date.now();return{token:g.token,expireTimeMillis:b+E,issuedAtTimeMillis:b}}),ER.apply(this,arguments)}function NV(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${vR}/projects/${t}/apps/${r}:${g8}?key=${s}`,body:{debug_token:e}}}const E8="firebase-app-check-database",C8=1,nI="firebase-app-check-store";let Y1=null;function CR(){return CR=(0,$.Z)(function*(n,e){const r=(yield function kV(){return Y1||(Y1=new Promise((n,e)=>{try{const t=indexedDB.open(E8,C8);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ui.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(nI,{keyPath:"compositeKey"})}}catch(t){e(ui.create("storage-open",{originalErrorMessage:t?.message}))}}),Y1)}()).transaction(nI,"readwrite"),u=r.objectStore(nI).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var E;g(ui.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})}),CR.apply(this,arguments)}const rI=new ts.Yd("@firebase/app-check");function TR(n,e){return(0,ze.hl)()?function D8(n,e){return function FV(n,e){return CR.apply(this,arguments)}(function UV(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{rI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AR(){return q1().enabled}function MR(){return xR.apply(this,arguments)}function xR(){return xR=(0,$.Z)(function*(){const n=q1();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),xR.apply(this,arguments)}const O8={error:"UNKNOWN_ERROR"};function P8(n){return ze.US.encodeString(JSON.stringify(n),!1)}function Q1(n){return OR.apply(this,arguments)}function OR(){return OR=(0,$.Z)(function*(n,e=!1){const t=n.app;wR(t);const r=er(t);let u,s=r.token;if(s&&!jm(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(jm(_)?s=_:yield TR(t,void 0))}if(!e&&s&&jm(s))return{token:s.token};let g,l=!1;if(AR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=K1(NV(t,yield MR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield TR(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield er(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?rI.warn(_.message):rI.error(_),u=_}return s?u?g=jm(s)?{token:s.token,internalError:u}:$V(u):(g={token:s.token},r.token=s,yield TR(t,s)):g=$V(u),l&&function jV(n,e){const t=er(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),OR.apply(this,arguments)}function PR(){return PR=(0,$.Z)(function*(n){const e=n.app;wR(e);const{provider:t}=er(e);if(AR()){const r=yield MR(),{token:s}=yield K1(NV(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),PR.apply(this,arguments)}function RR(n,e){const t=er(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function BV(n){const{app:e}=n,t=er(e);let r=t.tokenRefresher;r||(r=function N8(n){const{app:e}=n;return new y8((0,$.Z)(function*(){let r;if(r=er(e).token?yield Q1(n,!0):yield Q1(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=er(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},PV.RETRIAL_MIN_WAIT,PV.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jm(n){return n.expireTimeMillis-Date.now()>0}function $V(n){return{token:P8(O8),error:n}}class R8{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=er(this.app);for(const t of e)RR(this.app,t.next);return Promise.resolve()}}const YV="app-check-internal";!function Z8(){vi(new yr.wA("app-check",n=>function k8(n,e){return new R8(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(YV).initialize()})),vi(new yr.wA(YV,n=>function F8(n){return{getToken:e=>Q1(n,e),getLimitedUseToken:()=>function VV(n){return PR.apply(this,arguments)}(n),addTokenListener:e=>function NR(n,e,t,r){const{app:s}=n,u=er(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&jm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),BV(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>BV(n))}(n,"INTERNAL",e),removeTokenListener:e=>RR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),wi("@firebase/app-check","0.8.0")}();class $m{constructor(){return Ou("app-check")}}typeof window<"u"&&window,N(120);const JV=new d.OlP("angularfire2.auth.use-emulator"),XV=new d.OlP("angularfire2.auth.settings"),e5=new d.OlP("angularfire2.auth.tenant-id"),t5=new d.OlP("angularfire2.auth.langugage-code"),n5=new d.OlP("angularfire2.auth.use-device-language"),r5=new d.OlP("angularfire.auth.persistence"),i5=(n,e,t,r,s,u,l,g)=>(0,rs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[E,b]of Object.entries(l))_.settings[E]=b;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let VR=(()=>{class n{constructor(t,r,s,u,l,g,_,E,b,S,F,G){const ie=new ti.x,le=(0,lt.of)(void 0).pipe((0,fl.Q)(l.outsideAngular),(0,An.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8661)))),(0,wt.U)(()=>(0,rs.on)(t,u,r)),(0,wt.U)(ae=>i5(ae,u,g,E,b,S,_,F)),MV({bufferSize:1,refCount:!1}));if(Xr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{le.pipe(Hn()).subscribe();const Fe=le.pipe((0,An.w)(pt=>pt.getRedirectResult().then(Tt=>Tt,()=>null)),ki,MV({bufferSize:1,refCount:!1})),et=le.pipe((0,An.w)(pt=>new xr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>pt.onAuthStateChanged(Vt=>Tt.next(Vt),Vt=>Tt.error(Vt),()=>Tt.complete()))})))),Ze=le.pipe((0,An.w)(pt=>new xr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>pt.onIdTokenChanged(Vt=>Tt.next(Vt),Vt=>Tt.error(Vt),()=>Tt.complete()))}))));this.authState=Fe.pipe(xV(et),(0,Wh.R)(l.outsideAngular),(0,fl.Q)(l.insideAngular)),this.user=Fe.pipe(xV(Ze),(0,Wh.R)(l.outsideAngular),(0,fl.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,An.w)(pt=>pt?(0,un.D)(pt.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe((0,An.w)(pt=>pt?(0,un.D)(pt.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,t8.T)(Fe,ie,this.authState.pipe(ar(pt=>!pt))).pipe((0,wt.U)(pt=>pt?.user?pt:null),(0,Wh.R)(l.outsideAngular),(0,fl.Q)(l.insideAngular))}return(0,rs.pX)(this,le,u,{spy:{apply:(ae,Fe,et)=>{(ae.startsWith("signIn")||ae.startsWith("createUser"))&&et.then(Ze=>ie.next(Ze))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(rs.Dh),d.LFG(rs.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Fo),d.LFG(JV,8),d.LFG(XV,8),d.LFG(e5,8),d.LFG(t5,8),d.LFG(n5,8),d.LFG(r5,8),d.LFG($m,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function s5(n,e){return function eH(n,e=Lp){return new xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function BR(n,e){return s5(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function X1(n,e){return BR(n,e).pipe(Xo(void 0),Xg(),(0,wt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(b=>b.doc.ref.isEqual(l.ref)),E=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function o5(n,e,t){return X1(n,t).pipe(Io((r,s)=>function nH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,fT.x)(),(0,wt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function jR(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function a5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class u5{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=X1(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Xo(void 0),Xg(),ar(([r,s])=>s.length>0||!r),(0,wt.U)(([r,s])=>s),ki)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a5(e);return o5(this.query,t,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return BR(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ki)}get(e){return(0,un.D)(this.query.get(e)).pipe(ki)}add(e){return this.ref.add(e)}doc(e){return new c5(this.ref.doc(e),this.afs)}}class c5{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=l5(r,t);return new u5(s,u,this.afs)}snapshotChanges(){return function tH(n,e){return s5(n,e).pipe(Xo(void 0),Xg(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(ki)}}class iH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?X1(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ar(t=>t.length>0),ki):X1(this.query,this.afs.schedulers.outsideAngular).pipe(ki)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a5(e);return o5(this.query,t,this.afs.schedulers.outsideAngular).pipe(ki)}valueChanges(e={}){return BR(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),ki)}get(e){return(0,un.D)(this.query.get(e)).pipe(ki)}}const sH=new d.OlP("angularfire2.enableFirestorePersistence"),oH=new d.OlP("angularfire2.firestore.persistenceSettings"),aH=new d.OlP("angularfire2.firestore.settings"),uH=new d.OlP("angularfire2.firestore.use-emulator");function l5(n,e=(t=>t)){return{query:e(n),ref:n}}let $R=(()=>{class n{constructor(t,r,s,u,l,g,_,E,b,S,F,G,ie,le,ae,Fe,et){this.schedulers=_;const Ze=(0,rs.on)(t,g,r),pt=b;S&&i5(Ze,g,F,ie,le,ae,G,Fe),[this.firestore,this.persistenceEnabled$]=(0,rs.cc)(`${Ze.name}.firestore`,"AngularFirestore",Ze.name,()=>{const Tt=g.runOutsideAngular(()=>Ze.firestore());if(u&&Tt.settings(u),pt&&Tt.useEmulator(...pt),s&&!Xr(l)){const Vt=()=>{try{return(0,un.D)(Tt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(ci){return typeof console<"u"&&console.warn(ci),(0,lt.of)(!1)}};return[Tt,g.runOutsideAngular(Vt)]}return[Tt,(0,lt.of)(!1)]},[u,pt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=l5(s,r),g=this.schedulers.ngZone.run(()=>u);return new u5(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new iH(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new c5(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(rs.Dh),d.LFG(rs.xv,8),d.LFG(sH,8),d.LFG(aH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Fo),d.LFG(oH,8),d.LFG(uH,8),d.LFG(VR,8),d.LFG(JV,8),d.LFG(XV,8),d.LFG(e5,8),d.LFG(t5,8),d.LFG(n5,8),d.LFG(r5,8),d.LFG($m,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var d5=N(6710);let Aa=(()=>{class n{constructor(t,r){this.afs=t,this.db=r,this._loggedInUser$=new or.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,$.Z)(function*(){try{const r=yield t.afs.signInWithPopup(new d5.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,$.Z)(function*(){try{const s=yield r.afs.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,$.Z)(function*(){try{const s=yield r.afs.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}logOut(){var t=this;return(0,$.Z)(function*(){try{yield t.afs.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var s=this;return(0,$.Z)(function*(){var u;s.db.collection("users").doc(t.user.uid).get().pipe(en(1)).subscribe({next:(u=(0,$.Z)(function*(l){if(l.exists){const g=l.data();g._id||(yield s.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),g.fullName||(yield s.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),g.imgUrl||(yield s.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),g.followedByUsers||(yield s.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),g.followingUsers||(yield s.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield s.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(g){return u.apply(this,arguments)}),error:u=>{console.error(u)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(VR),d.LFG($R))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eS=(()=>{class n{constructor(t,r){this.db=t,this.authService=r,this._posts$=new or.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return this.db.collection("posts").valueChanges().pipe((0,An.w)(r=>{let s=r.reduce((l,g)=>l.concat(g.likedByUsers||[]),[]);return _o(Array.from(new Set(s)).map(l=>this.authService.getUserById(l))).pipe((0,wt.U)(l=>r.map(g=>(g.likedByUsers=g.likedByUsers?g.likedByUsers.map(_=>l.find(E=>E._id===_)):[],g))),Eo((0,$.Z)(function*(){const l=t.authService.loggedInUser$,g=yield Fp(l);if(!g)return;const _=t.db.collection("users").doc(g?.user?.uid).valueChanges(),E=yield Fp(_),b=r.filter(S=>E.followingUsers.find(F=>F===S.creatorId));t._posts$.next([...b])})),function s_(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:s=!1}=e;return t<=0?zs.y:(0,Pr.e)((u,l)=>{let _,g=0;const E=()=>{let b=!1;_=u.subscribe((0,pr.x)(l,S=>{s&&(g=0),l.next(S)},void 0,S=>{if(g++<t){const F=()=>{_?(_.unsubscribe(),_=null,E()):b=!0};if(null!=r){const G="number"==typeof r?function gA(n=0,e,t=Vc){let r=-1;return null!=e&&((0,fA.K)(e)?t=e:r=e),new xr.y(s=>{let u=function pA(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(r):(0,Ka.Xf)(r(S,g)),ie=(0,pr.x)(l,()=>{ie.unsubscribe(),F()},()=>{l.complete()});G.subscribe(ie)}else F()}else l.error(S)})),b&&(_.unsubscribe(),_=null,E())};E()})}(1),Pi(this._handleError))}))}toggleLike(t,r){var s=this;return(0,$.Z)(function*(){t?yield s.addLike(r):yield s.removeLike(r)})()}addLike(t){var r=this;return(0,$.Z)(function*(){const s=Mh(t);r.authService.loggedInUser$.pipe(en(1)).subscribe({next:u=>{const l=u.user.uid;var g;r.db.collection("users").doc(l).valueChanges().pipe(en(1)).subscribe({next:(g=(0,$.Z)(function*(_){const E=_,b=s.likedByUsers.slice();b.push(E),s.likedByUsers=s.likedByUsers.map(ie=>ie._id),s.likedByUsers.push(l),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...s.likedByUsers]});const S=r._posts$.value,F=S.findIndex(ie=>ie._id===t._id),G={...s,likedByUsers:[...b]};S.splice(F,1,G),r._posts$.next([...S])}),function(E){return g.apply(this,arguments)})})}})})()}removeLike(t){var r=this;return(0,$.Z)(function*(){const s=Mh(t);var u;r.authService.loggedInUser$.pipe(en(1)).subscribe({next:(u=(0,$.Z)(function*(l){const g=l.user.uid,_=s.likedByUsers.findIndex(F=>F._id===g);s.likedByUsers.splice(_,1),s.likedByUsers=s.likedByUsers.map(F=>F._id),yield r.db.collection("posts").doc(s._id).update({likedByUsers:[...s.likedByUsers]});const E=r._posts$.value,b=E.findIndex(F=>F._id===t._id);t.likedByUsers.splice(_,1);const S={...t,likedByUsers:[...t.likedByUsers]};E.splice(b,1,S),r._posts$.next([...E])}),function(g){return u.apply(this,arguments)})})})()}uploadMedia(){return(0,$.Z)(function*(){})()}_handleError(t){return console.log("err:",t),wo(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG($R),d.LFG(Aa))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tS(n,e){const t="object"==typeof e;return new Promise((r,s)=>{let l,u=!1;n.subscribe({next:g=>{l=g,u=!0},error:s,complete:()=>{u?r(l):t?r(e.defaultValue):s(new Es)}})})}let cH=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,s){var u=this;return(0,$.Z)(function*(){t?yield u.addFollow(r,s):yield u.removeFollow(r,s)})()}addFollow(t,r){var s=this;return(0,$.Z)(function*(){var E;s.authService.loggedInUser$.pipe(en(1)).subscribe({next:(E=(0,$.Z)(function*(b){yield s.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,b?.user?.uid]})}),function(S){return E.apply(this,arguments)})});const u=s.authService.loggedInUser$.pipe(en(1)),l=yield tS(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(en(1)),_=yield tS(g);yield s.db.collection("users").doc(_._id).update({followingUsers:[..._.followingUsers,t._id]})})()}removeFollow(t,r){var s=this;return(0,$.Z)(function*(){const u=s.authService.loggedInUser$.pipe(en(1)),l=yield tS(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(en(1)),_=yield tS(g),E=Mh(t.followedByUsers),b=E.findIndex(F=>F===l?.user?.uid);if(-1===b)return;E.splice(b,1),yield s.db.collection("users").doc(t._id).update({followedByUsers:E});const S=_.followingUsers.findIndex(F=>F===t._id);_.followingUsers.splice(S,1),yield s.db.collection("users").doc(_._id).update({followingUsers:_.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Aa),d.LFG($R))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lH=(()=>{class n{transform(t){const s=Math.floor(Date.now()/1e3)-t/1e3;return s<60?"just now":s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h`:`${Math.floor(s/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function dH(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA()()()),2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,3,t.post.createdAt),"")}}let hH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"]],template:function(r,s){1&r&&d.YNc(0,dH,13,5,"div",0),2&r&&d.Q6J("ngIf",s.creator)},dependencies:[xi,lH],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();const fH=function(n){return{"btn-toggle-follow":!0,following:n}};function pH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li"),d._UZ(1,"img",1),d.TgZ(2,"h4"),d._uU(3),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toggleFollow())}),d._uU(5),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(t.user.fullName),d.xp6(1),d.Q6J("ngClass",d.VKq(4,fH,t.isFollowClicked)),d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}let gH=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,$.Z)(function*(){const r=t.authService.getUserById(t.user._id),s=yield Fp(r),u=t.authService.loggedInUser$,l=yield Fp(u);t.isFollowClicked=!!s.followedByUsers.find(g=>g===l?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Aa))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click"]],template:function(r,s){1&r&&d.YNc(0,pH,6,6,"li",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[Pa,xi],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function mH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let yH=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return s.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,mH,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",s.post.likedByUsers))},dependencies:[qu,gH],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})();function _H(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",21)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",22),d.qZA()()}}function vH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",23)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",24),d.qZA()()}}function wH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",30),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(3);return d.KtG(s.isLikedByUsersModalShown=!s.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function IH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",31),d.NdJ("onToggleLikedByUsersModal",function(s){d.CHM(t);const u=d.oxw(3);return d.KtG(u.toggleLikedByUsersModal(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw(3);return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=d.oxw(3);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function EH(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",25),d._UZ(1,"img",26),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",27),d._uU(5),d.qZA(),d.YNc(6,wH,5,4,"span",28),d.qZA(),d.YNc(7,IH,1,2,"liked-by-users-list",29),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function CH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",35),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(4);return d.KtG(s.isMoreClicked=!s.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function bH(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,CH,2,0,"button",34),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120&&"..."," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function DH(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}function TH(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",32),d.YNc(1,bH,6,8,"p",28),d.YNc(2,DH,4,2,"p",28),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!t.isMoreClicked),d.xp6(1),d.Q6J("ngIf",t.isMoreClicked)}}function SH(n,e){if(1&n&&(d.TgZ(0,"li",1),d._UZ(1,"post-header",2)(2,"img",3),d.TgZ(3,"div",4)(4,"div",5)(5,"div",6),d.YNc(6,_H,5,0,"button",7),d.YNc(7,vH,5,0,"button",7),d.TgZ(8,"button",8),d.O4$(),d.TgZ(9,"svg",9)(10,"title"),d._uU(11,"Comment"),d.qZA(),d._UZ(12,"path",10),d.qZA()(),d.kcU(),d.TgZ(13,"button",11),d.O4$(),d.TgZ(14,"svg",12)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",13)(18,"polygon",14),d.qZA()()(),d.kcU(),d.TgZ(19,"button",15),d.O4$(),d.TgZ(20,"svg",16)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",17),d.qZA()()(),d.YNc(24,EH,8,4,"div",18),d.YNc(25,TH,3,2,"div",19),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("post",t.post)("creator",t.creator),d.xp6(1),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!t.isLikeClicked),d.xp6(1),d.Q6J("ngIf",t.isLikeClicked),d.xp6(17),d.Q6J("ngIf",t.post.likedByUsers.length),d.xp6(1),d.Q6J("ngIf",t.creator)}}let AH=(()=>{class n{constructor(t){this.authService=t,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.isLikeClicked=!1,this.isToggleLikeProcessing=!1,this.isComponentInitialized=!1}ngOnInit(){this.authService.getUserById(this.post.creatorId).pipe(en(1)).subscribe({next:r=>{this.creator=r}}),this.authService.loggedInUser$.pipe(en(1)).subscribe({next:r=>{this.loggedInUser=r}}),this.post.likedByUsers.find(r=>r._id===this.loggedInUser.user.uid)&&(this.isLikeClicked=!0),this.isComponentInitialized=!0}toggleLike(){this.isToggleLikeProcessing||(this.isToggleLikeProcessing=!0,setTimeout(()=>{this.isToggleLikeProcessing=!1},2e3),this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:Mh(this.post),isLikeClicked:this.isLikeClicked}))}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Aa))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment"],["aria-label","Comment","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"]],template:function(r,s){1&r&&d.YNc(0,SH,26,7,"li",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[xi,hH,yH,rr,Ve],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}"]})}return n})();function MH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike.emit(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let xH=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,MH,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",s.posts))},dependencies:[qu,AH],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function OH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"post-list",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow(s))}),d.qZA()()}if(2&n){const t=e.ngIf;d.xp6(1),d.Q6J("posts",t)}}let PH=(()=>{class n{constructor(t,r,s){this.postService=t,this.authService=r,this.userService=s}ngOnInit(){this.posts$=this.postService.posts$}onToggleLike(t){var r=this;return(0,$.Z)(function*(){yield r.postService.toggleLike(t.isLikeClicked,t.post)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(en(1)).subscribe(function(){var s=(0,$.Z)(function*(u){t.user=u,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(u){return s.apply(this,arguments)}}())}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(eS),d.Y36(Aa),d.Y36(cH))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.YNc(0,OH,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,s.posts$))},dependencies:[xi,xH,Ku]})}return n})(),h5=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),Df=(()=>{class n extends h5{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const Ma=new d.OlP("NgValueAccessor"),kH={provide:Ma,useExisting:(0,d.Gpc)(()=>nS),multi:!0},LH=new d.OlP("CompositionEventMode");let nS=(()=>{class n extends h5{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FH(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(LH,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&d.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[d._Bn([kH]),d.qOj]})}return n})();const Si=new d.OlP("NgValidators"),Hl=new d.OlP("NgAsyncValidators");function C5(n){return null!=n}function b5(n){return(0,d.QGY)(n)?(0,un.D)(n):n}function D5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function T5(n,e){return e.map(t=>t(n))}function S5(n){return n.map(e=>function VH(n){return!n.validate}(e)?e:t=>e.validate(t))}function HR(n){return null!=n?function A5(n){if(!n)return null;const e=n.filter(C5);return 0==e.length?null:function(t){return D5(T5(t,e))}}(S5(n)):null}function zR(n){return null!=n?function M5(n){if(!n)return null;const e=n.filter(C5);return 0==e.length?null:function(t){return function NH(...n){const e=(0,ws.jO)(n),{args:t,keys:r}=pn(n),s=new xr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,E=l;for(let b=0;b<l;b++){let S=!1;(0,Ka.Xf)(t[b]).subscribe((0,pr.x)(u,F=>{S||(S=!0,E--),g[b]=F},()=>_--,void 0,()=>{(!_||!S)&&(E||u.next(r?Is(r,g):g),u.complete())}))}});return e?s.pipe(Wa(e)):s}(T5(t,e).map(b5)).pipe((0,wt.U)(D5))}}(S5(n)):null}function x5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function GR(n){return n?Array.isArray(n)?n:[n]:[]}function iS(n,e){return Array.isArray(n)?n.includes(e):n===e}function N5(n,e){const t=GR(e);return GR(n).forEach(s=>{iS(t,s)||t.push(s)}),t}function R5(n,e){return GR(e).filter(t=>!iS(n,t))}class k5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $i extends k5{get formDirective(){return null}get path(){return null}}class zl extends k5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class F5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let L5=(()=>{class n extends F5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(zl,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[d.qOj]})}return n})(),U5=(()=>{class n extends F5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36($i,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[d.qOj]})}return n})();const iI="VALID",oS="INVALID",Hm="PENDING",sI="DISABLED";function ZR(n){return(aS(n)?n.validators:n)||null}function KR(n,e){return(aS(e)?e.asyncValidators:n)||null}function aS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $5{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===iI}get invalid(){return this.status===oS}get pending(){return this.status==Hm}get disabled(){return this.status===sI}get enabled(){return this.status!==sI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(N5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(R5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(R5(e,this._rawAsyncValidators))}hasValidator(e){return iS(this._rawValidators,e)}hasAsyncValidator(e){return iS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=iI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iI||this.status===Hm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sI:iI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hm,this._hasOwnPendingAsyncValidator=!0;const t=b5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?sI:this.errors?oS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hm)?Hm:this._anyControlsHaveStatus(oS)?oS:iI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){aS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function HH(n){return Array.isArray(n)?HR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zH(n){return Array.isArray(n)?zR(n):n||null}(this._rawAsyncValidators)}}class YR extends $5{constructor(e,t,r){super(ZR(t),KR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function j5(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function B5(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Tf=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>oI}),oI="always";function aI(n,e,t=oI){QR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function WH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&H5(n,e)})}(n,e),function KH(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&H5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QR(n,e){const t=function O5(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(x5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function P5(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(x5(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();lS(e._rawValidators,s),lS(e._rawAsyncValidators,s)}function H5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ez={provide:$i,useExisting:(0,d.Gpc)(()=>hS)},uI=(()=>Promise.resolve())();let hS=(()=>{class n extends $i{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new YR({},HR(t),zR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),aI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uI.then(()=>{const r=this._findContainer(t.path),s=new YR({});(function z5(n,e){QR(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){uI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function G5(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Si,10),d.Y36(Hl,10),d.Y36(Tf,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&d.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([ez]),d.qOj]})}return n})();function q5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function W5(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Z5=class extends $5{constructor(e=null,t,r){super(ZR(t),KR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),aS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=W5(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){q5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){q5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){W5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rz={provide:zl,useExisting:(0,d.Gpc)(()=>tk)},Q5=(()=>Promise.resolve())();let tk=(()=>{class n extends zl{constructor(t,r,s,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new Z5,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function ek(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===nS?t=u:function JH(n){return Object.getPrototypeOf(n.constructor)===Df}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function XR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){aI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Q5.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.VuI)(r);Q5.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function uS(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36($i,9),d.Y36(Si,10),d.Y36(Hl,10),d.Y36(Ma,10),d.Y36(d.sBO,8),d.Y36(Tf,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([rz]),d.qOj,d.TTD]})}return n})(),J5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),e6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const nk=new d.OlP("NgModelWithFormControlWarning");let y6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[e6]})}return n})(),Az=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Tf,useValue:t.callSetDisabledState??oI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[y6]})}return n})(),Mz=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Tf,useValue:t.callSetDisabledState??oI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[y6]})}return n})();function xz(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function Oz(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.fullName=s)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let Pz=(()=>{class n{constructor(t,r,s){this.authService=t,this.postService=r,this.router=s,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,$.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(en(1)).subscribe({next:s=>{s&&t.router.navigateByUrl("/")},error:s=>{console.error(s)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,$.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(en(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,$.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(en(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.postService.getPosts().pipe(en(1)).subscribe({error:t=>{console.error(t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Aa),d.Y36(eS),d.Y36(Yn))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,xz,5,2,"form",4),d.YNc(5,Oz,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return s.isLogInFormShown=!s.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return s.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",s.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!s.isLogInFormShown))},dependencies:[xi,J5,nS,L5,U5,tk,hS],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),Nz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})(),Rz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"notification-page works!"),d.qZA())}})}return n})();function kz(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"label",5),d._uU(2," Upload photos and videos here "),d.TgZ(3,"div",6),d.O4$(),d.TgZ(4,"svg",7),d._UZ(5,"path",8)(6,"path",9)(7,"path",10),d.qZA()()(),d.kcU(),d.TgZ(8,"input",11),d.NdJ("change",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onMediaSelected(s))}),d.qZA()()}}function Fz(n,e){1&n&&(d.TgZ(0,"div",12),d._uU(1," Filter Media here ... "),d.qZA())}function Lz(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"Form Media here ..."),d.qZA())}let Uz=(()=>{class n{constructor(t){this.postService=t,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1}onMediaSelected(t){console.log(t.target.files[0]),this.postService.uploadMedia()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(eS))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],["for","media-input",1,"custom-media-input"],["id","upload-media-element"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],["type","file","accept","image/*","id","media-input",3,"change"],[1,"filter-media"],[1,"form-media"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0),d.YNc(1,kz,9,0,"div",1),d.YNc(2,Fz,2,0,"div",2),d.YNc(3,Lz,2,0,"div",3),d.qZA()),2&r&&(d.xp6(1),d.Q6J("ngIf",s.isSelectMediaShown),d.xp6(1),d.Q6J("ngIf",s.isFilterMediaShown),d.xp6(1),d.Q6J("ngIf",s.isFormMediaShown))},dependencies:[xi],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{height:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   #media-input[_ngcontent-%COMP%]{display:none;height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   .custom-media-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2em;height:100%}"]})}return n})();const cI=()=>{let n=null;return(0,d.f3M)(Aa).loggedInUser$.pipe(en(1)).subscribe({next:e=>{n=e}}),!!n||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,d.f3M)(Yn).navigateByUrl("/login"),!1)},Vz=[{path:"",component:PH,canActivate:[cI]},{path:"login",component:Pz,canActivate:[()=>{let n=null;return(0,d.f3M)(Aa).loggedInUser$.pipe(en(1)).subscribe({next:e=>{n=e}}),!n||(console.error("LoggedInUser exists - no access to login page!"),(0,d.f3M)(Yn).navigateByUrl("/"),!1)}]},{path:"message",component:Nz,canActivate:[cI]},{path:"notification",component:Rz,canActivate:[cI]},{path:"create-post",component:Uz,canActivate:[cI]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[cI]}];let Bz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[Np.forRoot(Vz,{useHash:!0}),Np]})}return n})();function jz(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function $z(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function Hz(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function zz(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function Gz(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const qz=function(){return{exact:!0}};function Wz(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,jz,2,0,"svg",15),d.YNc(17,$z,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,Hz,1,1,"img",22),d.YNc(25,zz,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,Gz,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),s=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,qz)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let Zz=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,$.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Aa),d.Y36(Yn))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,Wz,33,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[xi,Pp,Xd],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function Kz(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function Yz(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function Qz(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function Jz(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function Xz(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const eG=function(){return{exact:!0}};function tG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,Kz,2,0,"svg",12),d.YNc(14,Yz,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,Qz,1,1,"img",19),d.YNc(22,Jz,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,Xz,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),s=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,eG)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let nG=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,$.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Aa),d.Y36(Yn))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,tG,30,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[xi,Pp,Xd],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#5b5b5b;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),rG=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Yn))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,s){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return s.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function iG(n,e){1&n&&d._UZ(0,"router-outlet")}function sG(n,e){1&n&&d._UZ(0,"app-header-mobile")}function oG(n,e){1&n&&d._UZ(0,"aside-menu")}function aG(n,e){1&n&&(d.TgZ(0,"main",3),d._UZ(1,"router-outlet"),d.qZA())}function uG(n,e){1&n&&d._UZ(0,"menu-mobile")}function cG(n,e){if(1&n&&(d.TgZ(0,"section"),d.YNc(1,iG,1,0,"router-outlet",1),d.YNc(2,sG,1,0,"app-header-mobile",1),d.YNc(3,oG,1,0,"aside-menu",1),d.YNc(4,aG,2,0,"main",2),d.YNc(5,uG,1,0,"menu-mobile",1),d.qZA()),2&n){const t=d.oxw();d.Tol("/login"===t.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl)}}let lG=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,$.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Ts&&(t.routerUrl=t.router.url)}),t.postService.getPosts().pipe(en(1)).subscribe({error:r=>{console.error(r)},complete:()=>{t.isComponentInitialized=!0}})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Yn),d.Y36(eS))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,s){1&r&&d.YNc(0,cG,6,7,"section",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[xi,Vd,Zz,nG,rG]})}return n})();class fS{}class pS{}class xa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class dG{encodeKey(e){return _6(e)}encodeValue(e){return _6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const fG=/%(\d[a-f0-9])/gi,pG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _6(n){return encodeURIComponent(n).replace(fG,(e,t)=>pG[t]??e)}function gS(n){return`${n}`}class Gl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dG,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hG(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(gS):[gS(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Gl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(gS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(gS(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class gG{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function v6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function w6(n){return typeof Blob<"u"&&n instanceof Blob}function I6(n){return typeof FormData<"u"&&n instanceof FormData}class lI{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function mG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new xa),this.context||(this.context=new gG),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Gl,this.urlWithParams=t}serializeBody(){return null===this.body?null:v6(this.body)||w6(this.body)||I6(this.body)||function yG(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||I6(this.body)?null:w6(this.body)?this.body.type||null:v6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,E=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,F)=>S.set(F,e.setHeaders[F]),_)),e.setParams&&(E=Object.keys(e.setParams).reduce((S,F)=>S.set(F,e.setParams[F]),E)),new lI(t,r,u,{params:E,headers:_,context:b,reportProgress:g,responseType:s,withCredentials:l})}}var zm=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(zm||{});class ck{constructor(e,t=200,r="OK"){this.headers=e.headers||new xa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lk extends ck{constructor(e={}){super(e),this.type=zm.ResponseHeader}clone(e={}){return new lk({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gm extends ck{constructor(e={}){super(e),this.type=zm.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gm({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class E6 extends ck{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function dk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _G=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof lI)u=t;else{let _,E;_=s.headers instanceof xa?s.headers:new xa(s.headers),s.params&&(E=s.params instanceof Gl?s.params:new Gl({fromObject:s.params})),u=new lI(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:E,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=(0,lt.of)(u).pipe(qs(_=>this.handler.handle(_)));if(t instanceof lI||"events"===s.observe)return l;const g=l.pipe(ar(_=>_ instanceof Gm));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,wt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,wt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Gl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,dk(s,r))}post(t,r,s={}){return this.request("POST",t,dk(s,r))}put(t,r,s={}){return this.request("PUT",t,dk(s,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(fS))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function D6(n,e){return e(n)}function wG(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const EG=new d.OlP(""),dI=new d.OlP(""),T6=new d.OlP("");function CG(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(EG,{optional:!0})??[]).reduceRight(wG,D6));const r=(0,d.f3M)(d.HDt),s=r.add();return n(e,t).pipe(Eo(()=>r.remove(s)))}}let S6=(()=>{class n extends fS{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(dI),...this.injector.get(T6,[])]));this.chain=s.reduceRight((u,l)=>function IG(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(u,l,this.injector),D6)}const r=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(Eo(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(pS),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const SG=/^\)\]\}',?\n/;let M6=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,un.D)(r.\u0275loadImpl()):(0,lt.of)(null)).pipe((0,An.w)(()=>new xr.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((le,ae)=>l.setRequestHeader(le,ae.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const le=t.detectContentTypeHeader();null!==le&&l.setRequestHeader("Content-Type",le)}if(t.responseType){const le=t.responseType.toLowerCase();l.responseType="json"!==le?le:"text"}const g=t.serializeBody();let _=null;const E=()=>{if(null!==_)return _;const le=l.statusText||"OK",ae=new xa(l.getAllResponseHeaders()),Fe=function AG(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new lk({headers:ae,status:l.status,statusText:le,url:Fe}),_},b=()=>{let{headers:le,status:ae,statusText:Fe,url:et}=E(),Ze=null;204!==ae&&(Ze=typeof l.response>"u"?l.responseText:l.response),0===ae&&(ae=Ze?200:0);let pt=ae>=200&&ae<300;if("json"===t.responseType&&"string"==typeof Ze){const Tt=Ze;Ze=Ze.replace(SG,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(Vt){Ze=Tt,pt&&(pt=!1,Ze={error:Vt,text:Ze})}}pt?(u.next(new Gm({body:Ze,headers:le,status:ae,statusText:Fe,url:et||void 0})),u.complete()):u.error(new E6({error:Ze,headers:le,status:ae,statusText:Fe,url:et||void 0}))},S=le=>{const{url:ae}=E(),Fe=new E6({error:le,status:l.status||0,statusText:l.statusText||"Unknown Error",url:ae||void 0});u.error(Fe)};let F=!1;const G=le=>{F||(u.next(E()),F=!0);let ae={type:zm.DownloadProgress,loaded:le.loaded};le.lengthComputable&&(ae.total=le.total),"text"===t.responseType&&l.responseText&&(ae.partialText=l.responseText),u.next(ae)},ie=le=>{let ae={type:zm.UploadProgress,loaded:le.loaded};le.lengthComputable&&(ae.total=le.total),u.next(ae)};return l.addEventListener("load",b),l.addEventListener("error",S),l.addEventListener("timeout",S),l.addEventListener("abort",S),t.reportProgress&&(l.addEventListener("progress",G),null!==g&&l.upload&&l.upload.addEventListener("progress",ie)),l.send(g),u.next({type:zm.Sent}),()=>{l.removeEventListener("error",S),l.removeEventListener("abort",S),l.removeEventListener("load",b),l.removeEventListener("timeout",S),t.reportProgress&&(l.removeEventListener("progress",G),null!==g&&l.upload&&l.upload.removeEventListener("progress",ie)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(qi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const hk=new d.OlP("XSRF_ENABLED"),x6=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),O6=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class P6{}let OG=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=jo(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ie),d.LFG(d.Lbi),d.LFG(x6))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function PG(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(hk)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(P6).getToken(),s=(0,d.f3M)(O6);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var ql=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ql||{});function NG(...n){const e=[_G,M6,S6,{provide:fS,useExisting:S6},{provide:pS,useExisting:M6},{provide:dI,useValue:PG,multi:!0},{provide:hk,useValue:!0},{provide:P6,useClass:OG}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const N6=new d.OlP("LEGACY_INTERCEPTOR_FN");function RG(){return function Af(n,e){return{\u0275kind:n,\u0275providers:e}}(ql.LegacyInterceptors,[{provide:N6,useFactory:CG},{provide:dI,useExisting:N6,multi:!0}])}let kG=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[NG(RG())]})}return n})();const R6={production:!1,firebaseConfig:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",storageBucket:"instagram-clone-gilshaashua.appspot.com",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};class fk{constructor(e){return e}}class pk{constructor(){return Ou("auth")}}const gk=new d.OlP("angularfire2.auth-instances");function $G(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fk(r)}}const HG={provide:pk,deps:[[new d.FiY,gk]]},zG={provide:fk,useFactory:function jG(n,e){const t=ml("auth",n,e);return t&&new fk(t)},deps:[[new d.FiY,gk],jl]};let GG=(()=>{class n{constructor(){(0,xn.registerVersion)("angularfire",Zh.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zG,HG]}),n})();function qG(n,...e){return{ngModule:GG,providers:[{provide:gk,useFactory:$G(n),multi:!0,deps:[d.R0b,d.zs3,Fo,tI,[new d.FiY,$m],...e]}]}}const WG=Kh(d5.o,!0);class mk{constructor(e){return e}}const F6="firestore",yk=new d.OlP("angularfire2.firestore-instances");function YG(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mk(r)}}const QG={provide:class ZG{constructor(){return Ou(F6)}},deps:[[new d.FiY,yk]]},JG={provide:mk,useFactory:function KG(n,e){const t=ml(F6,n,e);return t&&new mk(t)},deps:[[new d.FiY,yk],jl]};let XG=(()=>{class n{constructor(){(0,xn.registerVersion)("angularfire",Zh.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[JG,QG]}),n})();function eq(n,...e){return{ngModule:XG,providers:[{provide:yk,useFactory:YG(n),multi:!0,deps:[d.R0b,d.zs3,Fo,tI,[new d.FiY,pk],[new d.FiY,$m],...e]}]}}const tq=Kh(q9,!0);class _k{constructor(e){return e}}const L6="messaging",vk=new d.OlP("angularfire2.messaging-instances");function iq(n){return(e,t)=>{if(!Jg.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new _k(r)}}const sq={provide:class nq{constructor(){return Ou(L6)}},deps:[[new d.FiY,vk]]},oq={provide:_k,useFactory:function rq(n,e){if(!Jg.sync())return null;const t=ml(L6,n,e);return t&&new _k(t)},deps:[[new d.FiY,vk],jl]};let aq=(()=>{class n{constructor(){(0,xn.registerVersion)("angularfire",Zh.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[oq,sq,{provide:d.ip1,useValue:Jg.async,multi:!0}]}),n})();function uq(n,...e){return{ngModule:aq,providers:[{provide:vk,useFactory:iq(n),multi:!0,deps:[d.R0b,d.zs3,Fo,tI,...e]}]}}const cq=Kh(UF,!0),Ik="functions";class pq{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){var e=this;return(0,$.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return t?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,$.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var t=this;return(0,$.Z)(function*(){if(t.appCheck){const r=e?yield t.appCheck.getLimitedUseToken():yield t.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var t=this;return(0,$.Z)(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken(e)}})()}}const Ek="us-central1";class mq{constructor(e,t,r,s,u=Ek,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new pq(t,r,s),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(u);this.customDomain=g.origin,this.region=Ek}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const j6="@firebase/functions";function Tq(n=vb(),e=Ek){const r=nl((0,ze.m9)(n),Ik).getImmediate({identifier:e}),s=(0,ze.P0)("functions");return s&&function Sq(n,e,t){!function yq(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,ze.m9)(n),e,t)}(r,...s),r}!function Dq(n,e){vi(new yr.wA(Ik,(r,{instanceIdentifier:s})=>{const u=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),g=r.getProvider("messaging-internal"),_=r.getProvider("app-check-internal");return new mq(u,l,g,_,s,n)},"PUBLIC").setMultipleInstances(!0)),wi(j6,"0.10.0",e),wi(j6,"0.10.0","esm2017")}(fetch.bind(self));class Dk{constructor(e){return e}}const H6="functions",Tk=new d.OlP("angularfire2.functions-instances");function xq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Dk(r)}}const Oq={provide:class Aq{constructor(){return Ou(H6)}},deps:[[new d.FiY,Tk]]},Pq={provide:Dk,useFactory:function Mq(n,e){const t=ml(H6,n,e);return t&&new Dk(t)},deps:[[new d.FiY,Tk],jl]};let Nq=(()=>{class n{constructor(){(0,xn.registerVersion)("angularfire",Zh.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Pq,Oq]}),n})();function Rq(n,...e){return{ngModule:Nq,providers:[{provide:Tk,useFactory:xq(n),multi:!0,deps:[d.R0b,d.zs3,Fo,tI,[new d.FiY,pk],[new d.FiY,$m],...e]}]}}const kq=Kh(Tq,!0);let Fq=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[lG]});static#n=this.\u0275inj=d.cJS({providers:[{provide:rs.Dh,useValue:R6.firebaseConfig}],imports:[za,Bz,kG,Az,Mz,c8(()=>l8(R6.firebaseConfig)),qG(()=>WG()),uq(()=>cq()),eq(()=>tq()),Rq(()=>kq())]})}return n})();Kf().bootstrapModule(Fq).catch(n=>console.error(n))},5619:(it,we,N)=>{N.d(we,{X:()=>U});var d=N(8645);class U extends d.x{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const pe=super._subscribe(Q);return!pe.closed&&Q.next(this._value),pe}getValue(){const{hasError:Q,thrownError:pe,_value:Ie}=this;if(Q)throw pe;return this._throwIfClosed(),Ie}next(Q){super.next(this._value=Q)}}},5592:(it,we,N)=>{N.d(we,{y:()=>Ne});var d=N(305),U=N(7394),R=N(4850),Q=N(8407),pe=N(2653),Ie=N(4674),Oe=N(1441);let Ne=(()=>{class K{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Ye=new K;return Ye.source=this,Ye.operator=Se,Ye}subscribe(Se,Ye,_e){const Te=function H(K){return K&&K instanceof d.Lv||function L(K){return K&&(0,Ie.m)(K.next)&&(0,Ie.m)(K.error)&&(0,Ie.m)(K.complete)}(K)&&(0,U.Nn)(K)}(Se)?Se:new d.Hp(Se,Ye,_e);return(0,Oe.x)(()=>{const{operator:Ce,source:Xe}=this;Te.add(Ce?Ce.call(Te,Xe):Xe?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Ye){Se.error(Ye)}}forEach(Se,Ye){return new(Ye=be(Ye))((_e,Te)=>{const Ce=new d.Hp({next:Xe=>{try{Se(Xe)}catch(ot){Te(ot),Ce.unsubscribe()}},error:Te,complete:_e});this.subscribe(Ce)})}_subscribe(Se){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Se)}[R.L](){return this}pipe(...Se){return(0,Q.U)(Se)(this)}toPromise(Se){return new(Se=be(Se))((Ye,_e)=>{let Te;this.subscribe(Ce=>Te=Ce,Ce=>_e(Ce),()=>Ye(Te))})}}return K.create=Me=>new K(Me),K})();function be(K){var Me;return null!==(Me=K??pe.config.Promise)&&void 0!==Me?Me:Promise}},8645:(it,we,N)=>{N.d(we,{x:()=>Oe});var d=N(5592),U=N(7394);const Q=(0,N(2306).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=N(9039),Ie=N(1441);let Oe=(()=>{class be extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new Ne(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new Q}next(H){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:Me,observers:Se}=this;return K||Me?U.Lc:(this.currentObservers=null,Se.push(H),new U.w0(()=>{this.currentObservers=null,(0,pe.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:Me,isStopped:Se}=this;K?H.error(Me):Se&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return be.create=(L,H)=>new Ne(L,H),be})();class Ne extends Oe{constructor(L,H){super(),this.destination=L,this.source=H}next(L){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,L)}error(L){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,L)}complete(){var L,H;null===(H=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===H||H.call(L)}_subscribe(L){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(L))&&void 0!==K?K:U.Lc}}},305:(it,we,N)=>{N.d(we,{Hp:()=>_e,Lv:()=>K});var d=N(4674),U=N(7394),R=N(2653),Q=N(3894),pe=N(2420);const Ie=be("C",void 0,void 0);function be(Y,de,X){return{kind:Y,value:de,error:X}}var L=N(7599),H=N(1441);class K extends U.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,U.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,X,he){return new _e(de,X,he)}next(de){this.isStopped?Xe(function Ne(Y){return be("N",Y,void 0)}(de),this):this._next(de)}error(de){this.isStopped?Xe(function Oe(Y){return be("E",void 0,Y)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?Xe(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Me=Function.prototype.bind;function Se(Y,de){return Me.call(Y,de)}class Ye{constructor(de){this.partialObserver=de}next(de){const{partialObserver:X}=this;if(X.next)try{X.next(de)}catch(he){Te(he)}}error(de){const{partialObserver:X}=this;if(X.error)try{X.error(de)}catch(he){Te(he)}else Te(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(X){Te(X)}}}class _e extends K{constructor(de,X,he){let Pe;if(super(),(0,d.m)(de)||!de)Pe={next:de??void 0,error:X??void 0,complete:he??void 0};else{let V;this&&R.config.useDeprecatedNextContext?(V=Object.create(de),V.unsubscribe=()=>this.unsubscribe(),Pe={next:de.next&&Se(de.next,V),error:de.error&&Se(de.error,V),complete:de.complete&&Se(de.complete,V)}):Pe=de}this.destination=new Ye(Pe)}}function Te(Y){R.config.useDeprecatedSynchronousErrorHandling?(0,H.O)(Y):(0,Q.h)(Y)}function Xe(Y,de){const{onStoppedNotification:X}=R.config;X&&L.z.setTimeout(()=>X(Y,de))}const ot={closed:!0,next:pe.Z,error:function Ce(Y){throw Y},complete:pe.Z}},7394:(it,we,N)=>{N.d(we,{Lc:()=>Ie,w0:()=>pe,Nn:()=>Oe});var d=N(4674);const R=(0,N(2306).d)(be=>function(H){be(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,Me)=>`${Me+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var Q=N(9039);class pe{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(Se){L=Se instanceof R?Se.errors:[Se]}const{_finalizers:Me}=this;if(Me){this._finalizers=null;for(const Se of Me)try{Ne(Se)}catch(Ye){L=L??[],Ye instanceof R?L=[...L,...Ye.errors]:L.push(Ye)}}if(L)throw new R(L)}}add(L){var H;if(L&&L!==this)if(this.closed)Ne(L);else{if(L instanceof pe){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(L)}}_hasParent(L){const{_parentage:H}=this;return H===L||Array.isArray(H)&&H.includes(L)}_addParent(L){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(L),H):H?[H,L]:L}_removeParent(L){const{_parentage:H}=this;H===L?this._parentage=null:Array.isArray(H)&&(0,Q.P)(H,L)}remove(L){const{_finalizers:H}=this;H&&(0,Q.P)(H,L),L instanceof pe&&L._removeParent(this)}}pe.EMPTY=(()=>{const be=new pe;return be.closed=!0,be})();const Ie=pe.EMPTY;function Oe(be){return be instanceof pe||be&&"closed"in be&&(0,d.m)(be.remove)&&(0,d.m)(be.add)&&(0,d.m)(be.unsubscribe)}function Ne(be){(0,d.m)(be)?be():be.unsubscribe()}},2653:(it,we,N)=>{N.d(we,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(it,we,N)=>{N.d(we,{E:()=>U});const U=new(N(5592).y)(pe=>pe.complete())},2459:(it,we,N)=>{N.d(we,{D:()=>de});var d=N(4829),U=N(3093),R=N(5137),Ie=N(5592),Ne=N(4971),be=N(4674),L=N(7103);function K(X,he){if(!X)throw new Error("Iterable cannot be null");return new Ie.y(Pe=>{(0,L.f)(Pe,he,()=>{const V=X[Symbol.asyncIterator]();(0,L.f)(Pe,he,()=>{V.next().then(ve=>{ve.done?Pe.complete():Pe.next(ve.value)})},0,!0)})})}var Me=N(8382),Se=N(4026),Ye=N(4266),_e=N(3664),Te=N(5726),Ce=N(9853),Xe=N(541);function de(X,he){return he?function Y(X,he){if(null!=X){if((0,Me.c)(X))return function Q(X,he){return(0,d.Xf)(X).pipe((0,R.R)(he),(0,U.Q)(he))}(X,he);if((0,Ye.z)(X))return function Oe(X,he){return new Ie.y(Pe=>{let V=0;return he.schedule(function(){V===X.length?Pe.complete():(Pe.next(X[V++]),Pe.closed||this.schedule())})})}(X,he);if((0,Se.t)(X))return function pe(X,he){return(0,d.Xf)(X).pipe((0,R.R)(he),(0,U.Q)(he))}(X,he);if((0,Te.D)(X))return K(X,he);if((0,_e.T)(X))return function H(X,he){return new Ie.y(Pe=>{let V;return(0,L.f)(Pe,he,()=>{V=X[Ne.h](),(0,L.f)(Pe,he,()=>{let ve,ke;try{({value:ve,done:ke}=V.next())}catch(at){return void Pe.error(at)}ke?Pe.complete():Pe.next(ve)},0,!0)}),()=>(0,be.m)(V?.return)&&V.return()})}(X,he);if((0,Xe.L)(X))return function ot(X,he){return K((0,Xe.Q)(X),he)}(X,he)}throw(0,Ce.z)(X)}(X,he):(0,d.Xf)(X)}},4829:(it,we,N)=>{N.d(we,{Xf:()=>Me});var d=N(7582),U=N(4266),R=N(4026),Q=N(5592),pe=N(8382),Ie=N(5726),Oe=N(9853),Ne=N(3664),be=N(541),L=N(4674),H=N(3894),K=N(4850);function Me(Y){if(Y instanceof Q.y)return Y;if(null!=Y){if((0,pe.c)(Y))return function Se(Y){return new Q.y(de=>{const X=Y[K.L]();if((0,L.m)(X.subscribe))return X.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Y);if((0,U.z)(Y))return function Ye(Y){return new Q.y(de=>{for(let X=0;X<Y.length&&!de.closed;X++)de.next(Y[X]);de.complete()})}(Y);if((0,R.t)(Y))return function _e(Y){return new Q.y(de=>{Y.then(X=>{de.closed||(de.next(X),de.complete())},X=>de.error(X)).then(null,H.h)})}(Y);if((0,Ie.D)(Y))return Ce(Y);if((0,Ne.T)(Y))return function Te(Y){return new Q.y(de=>{for(const X of Y)if(de.next(X),de.closed)return;de.complete()})}(Y);if((0,be.L)(Y))return function Xe(Y){return Ce((0,be.Q)(Y))}(Y)}throw(0,Oe.z)(Y)}function Ce(Y){return new Q.y(de=>{(function ot(Y,de){var X,he,Pe,V;return(0,d.mG)(this,void 0,void 0,function*(){try{for(X=(0,d.KL)(Y);!(he=yield X.next()).done;)if(de.next(he.value),de.closed)return}catch(ve){Pe={error:ve}}finally{try{he&&!he.done&&(V=X.return)&&(yield V.call(X))}finally{if(Pe)throw Pe.error}}de.complete()})})(Y,de).catch(X=>de.error(X))})}},3019:(it,we,N)=>{N.d(we,{T:()=>Ie});var d=N(7537),U=N(4829),R=N(6232),Q=N(9940),pe=N(2459);function Ie(...Oe){const Ne=(0,Q.yG)(Oe),be=(0,Q._6)(Oe,1/0),L=Oe;return L.length?1===L.length?(0,U.Xf)(L[0]):(0,d.J)(be)((0,pe.D)(L,Ne)):R.E}},2096:(it,we,N)=>{N.d(we,{of:()=>R});var d=N(9940),U=N(2459);function R(...Q){const pe=(0,d.yG)(Q);return(0,U.D)(Q,pe)}},8251:(it,we,N)=>{N.d(we,{x:()=>U});var d=N(305);function U(Q,pe,Ie,Oe,Ne){return new R(Q,pe,Ie,Oe,Ne)}class R extends d.Lv{constructor(pe,Ie,Oe,Ne,be,L){super(pe),this.onFinalize=be,this.shouldUnsubscribe=L,this._next=Ie?function(H){try{Ie(H)}catch(K){pe.error(K)}}:super._next,this._error=Ne?function(H){try{Ne(H)}catch(K){pe.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(H){pe.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},3997:(it,we,N)=>{N.d(we,{x:()=>Q});var d=N(2737),U=N(9360),R=N(8251);function Q(Ie,Oe=d.y){return Ie=Ie??pe,(0,U.e)((Ne,be)=>{let L,H=!0;Ne.subscribe((0,R.x)(be,K=>{const Me=Oe(K);(H||!Ie(L,Me))&&(H=!1,L=Me,be.next(K))}))})}function pe(Ie,Oe){return Ie===Oe}},7398:(it,we,N)=>{N.d(we,{U:()=>R});var d=N(9360),U=N(8251);function R(Q,pe){return(0,d.e)((Ie,Oe)=>{let Ne=0;Ie.subscribe((0,U.x)(Oe,be=>{Oe.next(Q.call(pe,be,Ne++))}))})}},7537:(it,we,N)=>{N.d(we,{J:()=>R});var d=N(1631),U=N(2737);function R(Q=1/0){return(0,d.z)(U.y,Q)}},1631:(it,we,N)=>{N.d(we,{z:()=>Ne});var d=N(7398),U=N(4829),R=N(9360),Q=N(7103),pe=N(8251),Oe=N(4674);function Ne(be,L,H=1/0){return(0,Oe.m)(L)?Ne((K,Me)=>(0,d.U)((Se,Ye)=>L(K,Se,Me,Ye))((0,U.Xf)(be(K,Me))),H):("number"==typeof L&&(H=L),(0,R.e)((K,Me)=>function Ie(be,L,H,K,Me,Se,Ye,_e){const Te=[];let Ce=0,Xe=0,ot=!1;const Y=()=>{ot&&!Te.length&&!Ce&&L.complete()},de=he=>Ce<K?X(he):Te.push(he),X=he=>{Se&&L.next(he),Ce++;let Pe=!1;(0,U.Xf)(H(he,Xe++)).subscribe((0,pe.x)(L,V=>{Me?.(V),Se?de(V):L.next(V)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Ce--;Te.length&&Ce<K;){const V=Te.shift();Ye?(0,Q.f)(L,Ye,()=>X(V)):X(V)}Y()}catch(V){L.error(V)}}))};return be.subscribe((0,pe.x)(L,de,()=>{ot=!0,Y()})),()=>{_e?.()}}(K,Me,be,H)))}},3093:(it,we,N)=>{N.d(we,{Q:()=>Q});var d=N(7103),U=N(9360),R=N(8251);function Q(pe,Ie=0){return(0,U.e)((Oe,Ne)=>{Oe.subscribe((0,R.x)(Ne,be=>(0,d.f)(Ne,pe,()=>Ne.next(be),Ie),()=>(0,d.f)(Ne,pe,()=>Ne.complete(),Ie),be=>(0,d.f)(Ne,pe,()=>Ne.error(be),Ie)))})}},3020:(it,we,N)=>{N.d(we,{B:()=>pe});var d=N(4829),U=N(8645),R=N(305),Q=N(9360);function pe(Oe={}){const{connector:Ne=(()=>new U.x),resetOnError:be=!0,resetOnComplete:L=!0,resetOnRefCountZero:H=!0}=Oe;return K=>{let Me,Se,Ye,_e=0,Te=!1,Ce=!1;const Xe=()=>{Se?.unsubscribe(),Se=void 0},ot=()=>{Xe(),Me=Ye=void 0,Te=Ce=!1},Y=()=>{const de=Me;ot(),de?.unsubscribe()};return(0,Q.e)((de,X)=>{_e++,!Ce&&!Te&&Xe();const he=Ye=Ye??Ne();X.add(()=>{_e--,0===_e&&!Ce&&!Te&&(Se=Ie(Y,H))}),he.subscribe(X),!Me&&_e>0&&(Me=new R.Hp({next:Pe=>he.next(Pe),error:Pe=>{Ce=!0,Xe(),Se=Ie(ot,be,Pe),he.error(Pe)},complete:()=>{Te=!0,Xe(),Se=Ie(ot,L),he.complete()}}),(0,d.Xf)(de).subscribe(Me))})(K)}}function Ie(Oe,Ne,...be){if(!0===Ne)return void Oe();if(!1===Ne)return;const L=new R.Hp({next:()=>{L.unsubscribe(),Oe()}});return(0,d.Xf)(Ne(...be)).subscribe(L)}},5137:(it,we,N)=>{N.d(we,{R:()=>U});var d=N(9360);function U(R,Q=0){return(0,d.e)((pe,Ie)=>{Ie.add(R.schedule(()=>pe.subscribe(Ie),Q))})}},4664:(it,we,N)=>{N.d(we,{w:()=>Q});var d=N(4829),U=N(9360),R=N(8251);function Q(pe,Ie){return(0,U.e)((Oe,Ne)=>{let be=null,L=0,H=!1;const K=()=>H&&!be&&Ne.complete();Oe.subscribe((0,R.x)(Ne,Me=>{be?.unsubscribe();let Se=0;const Ye=L++;(0,d.Xf)(pe(Me,Ye)).subscribe(be=(0,R.x)(Ne,_e=>Ne.next(Ie?Ie(Me,_e,Ye,Se++):_e),()=>{be=null,K()}))},()=>{H=!0,K()}))})}},7599:(it,we,N)=>{N.d(we,{z:()=>d});const d={setTimeout(U,R,...Q){const{delegate:pe}=d;return pe?.setTimeout?pe.setTimeout(U,R,...Q):setTimeout(U,R,...Q)},clearTimeout(U){const{delegate:R}=d;return(R?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(it,we,N)=>{N.d(we,{h:()=>U});const U=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(it,we,N)=>{N.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(it,we,N)=>{N.d(we,{_6:()=>Ie,jO:()=>Q,yG:()=>pe});var d=N(4674),U=N(671);function R(Oe){return Oe[Oe.length-1]}function Q(Oe){return(0,d.m)(R(Oe))?Oe.pop():void 0}function pe(Oe){return(0,U.K)(R(Oe))?Oe.pop():void 0}function Ie(Oe,Ne){return"number"==typeof R(Oe)?Oe.pop():Ne}},9039:(it,we,N)=>{function d(U,R){if(U){const Q=U.indexOf(R);0<=Q&&U.splice(Q,1)}}N.d(we,{P:()=>d})},2306:(it,we,N)=>{function d(U){const Q=U(pe=>{Error.call(pe),pe.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}N.d(we,{d:()=>d})},1441:(it,we,N)=>{N.d(we,{O:()=>Q,x:()=>R});var d=N(2653);let U=null;function R(pe){if(d.config.useDeprecatedSynchronousErrorHandling){const Ie=!U;if(Ie&&(U={errorThrown:!1,error:null}),pe(),Ie){const{errorThrown:Oe,error:Ne}=U;if(U=null,Oe)throw Ne}}else pe()}function Q(pe){d.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=pe)}},7103:(it,we,N)=>{function d(U,R,Q,pe=0,Ie=!1){const Oe=R.schedule(function(){Q(),Ie?U.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(U.add(Oe),!Ie)return Oe}N.d(we,{f:()=>d})},2737:(it,we,N)=>{function d(U){return U}N.d(we,{y:()=>d})},4266:(it,we,N)=>{N.d(we,{z:()=>d});const d=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(it,we,N)=>{N.d(we,{D:()=>U});var d=N(4674);function U(R){return Symbol.asyncIterator&&(0,d.m)(R?.[Symbol.asyncIterator])}},4674:(it,we,N)=>{function d(U){return"function"==typeof U}N.d(we,{m:()=>d})},8382:(it,we,N)=>{N.d(we,{c:()=>R});var d=N(4850),U=N(4674);function R(Q){return(0,U.m)(Q[d.L])}},3664:(it,we,N)=>{N.d(we,{T:()=>R});var d=N(4971),U=N(4674);function R(Q){return(0,U.m)(Q?.[d.h])}},4026:(it,we,N)=>{N.d(we,{t:()=>U});var d=N(4674);function U(R){return(0,d.m)(R?.then)}},541:(it,we,N)=>{N.d(we,{L:()=>Q,Q:()=>R});var d=N(7582),U=N(4674);function R(pe){return(0,d.FC)(this,arguments,function*(){const Oe=pe.getReader();try{for(;;){const{value:Ne,done:be}=yield(0,d.qq)(Oe.read());if(be)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ne)}}finally{Oe.releaseLock()}})}function Q(pe){return(0,U.m)(pe?.getReader)}},671:(it,we,N)=>{N.d(we,{K:()=>U});var d=N(4674);function U(R){return R&&(0,d.m)(R.schedule)}},9360:(it,we,N)=>{N.d(we,{A:()=>U,e:()=>R});var d=N(4674);function U(Q){return(0,d.m)(Q?.lift)}function R(Q){return pe=>{if(U(pe))return pe.lift(function(Ie){try{return Q(Ie,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(it,we,N)=>{function d(){}N.d(we,{Z:()=>d})},8407:(it,we,N)=>{N.d(we,{U:()=>R,z:()=>U});var d=N(2737);function U(...Q){return R(Q)}function R(Q){return 0===Q.length?d.y:1===Q.length?Q[0]:function(Ie){return Q.reduce((Oe,Ne)=>Ne(Oe),Ie)}}},3894:(it,we,N)=>{N.d(we,{h:()=>R});var d=N(2653),U=N(7599);function R(Q){U.z.setTimeout(()=>{const{onUnhandledError:pe}=d.config;if(!pe)throw Q;pe(Q)})}},9853:(it,we,N)=>{function d(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(we,{z:()=>d})},5879:(it,we,N)=>{N.d(we,{$8M:()=>wc,$WT:()=>$o,$Z:()=>KE,AFp:()=>mE,ALo:()=>ya,AaK:()=>K,AsE:()=>cv,CHM:()=>Oi,CRH:()=>Fg,DdM:()=>dO,Dn7:()=>hD,EJc:()=>jO,EpF:()=>WC,F4k:()=>ZC,FYo:()=>EE,FiY:()=>ne,GfV:()=>zp,Gpc:()=>Ye,HDt:()=>qD,JOm:()=>Ud,KtG:()=>Dd,LFG:()=>Ue,LSH:()=>th,Lbi:()=>Up,Lck:()=>sO,MAs:()=>$C,MMx:()=>nD,MR2:()=>n_,NdJ:()=>Q_,O4$:()=>Hs,Ojb:()=>yA,OlP:()=>rn,Oqu:()=>uv,P3R:()=>uA,PXZ:()=>nT,Q6J:()=>q_,QGY:()=>ug,Qsj:()=>AA,R0b:()=>mr,RDi:()=>KI,Rgc:()=>al,SBq:()=>ch,Sil:()=>HO,Suo:()=>kg,TTD:()=>yd,TgZ:()=>og,Tol:()=>ha,VKq:()=>hO,VuI:()=>z0,W1O:()=>Vg,X6Q:()=>oT,XFs:()=>dt,Xpm:()=>Wu,Xq5:()=>L_,Xts:()=>Lc,Y36:()=>no,YKP:()=>iO,YNc:()=>VC,Yjl:()=>Ju,Yz7:()=>ht,Z0I:()=>Qt,ZZ4:()=>Fi,_Bn:()=>Sg,_UZ:()=>Z_,_c5:()=>yP,_uU:()=>mb,aQg:()=>It,c2e:()=>zD,cJS:()=>Dn,cg1:()=>gv,dDg:()=>x0,dqk:()=>Pt,eFA:()=>xs,eJc:()=>jg,ekj:()=>ov,eoX:()=>XD,f3M:()=>qe,g9A:()=>yE,h0i:()=>ol,hGG:()=>_P,hij:()=>Eu,iGM:()=>ID,ifc:()=>as,ip1:()=>HD,jDz:()=>Bv,kL8:()=>mv,kcU:()=>wt,lG2:()=>Qu,lcZ:()=>dD,lqb:()=>eo,lri:()=>Kg,n5z:()=>lp,oAB:()=>Ku,oxw:()=>JC,q4F:()=>y_,qFp:()=>SP,qLn:()=>_i,qOj:()=>Eh,qZA:()=>ag,rWj:()=>JD,rg0:()=>md,sBO:()=>ZF,s_b:()=>Rg,soG:()=>qn,tb:()=>Gh,tp0:()=>Be,uIk:()=>U_,vHH:()=>Y,vpe:()=>to,wAp:()=>ga,xp6:()=>WE,z2F:()=>qh,zSh:()=>$,zs3:()=>Ss});var d=N(8645),U=N(7394),R=N(5592),Q=N(3019),pe=N(5619),Ie=N(2096),Oe=N(3020),Ne=N(4664),be=N(3997);function L(i){for(let o in i)if(i[o]===L)return o;throw Error("Could not find renamed property on target object.")}function H(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function K(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(K).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Me(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Se=L({__forward_ref__:L});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return K(this())},i}function _e(i){return Te(i)?i():i}function Te(i){return"function"==typeof i&&i.hasOwnProperty(Se)&&i.__forward_ref__===Ye}function Ce(i){return i&&!!i.\u0275providers}const ot="https://g.co/ng/security#xss";class Y extends Error{constructor(o,a){super(function de(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function X(i){return"string"==typeof i?i:null==i?"":String(i)}function ke(i,o){throw new Y(-201,!1)}function Ke(i,o){null==i&&function Le(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function ht(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dn(i){return{providers:i.providers||[],imports:i.imports||[]}}function yn(i){return Fn(i,Wn)||Fn(i,Er)}function Qt(i){return null!==yn(i)}function Fn(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ir(i){return i&&(i.hasOwnProperty(Tn)||i.hasOwnProperty(Hi))?i[Tn]:null}const Wn=L({\u0275prov:L}),Tn=L({\u0275inj:L}),Er=L({ngInjectableDef:L}),Hi=L({ngInjectorDef:L});var dt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(dt||{});let mt;function Jt(i){const o=mt;return mt=i,o}function Br(i,o,a){const c=yn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&dt.Optional?null:void 0!==o?o:void ke(K(i))}const Pt=globalThis,st={},Nt="__NG_DI_FLAG__",Lt="ngTempTokenPath",j=/\n/gm,O="__source";let P;function W(i){const o=P;return P=i,o}function ge(i,o=dt.Default){if(void 0===P)throw new Y(-203,!1);return null===P?Br(i,void 0,o):P.get(i,o&dt.Optional?null:void 0,o)}function Ue(i,o=dt.Default){return(function St(){return mt}()||ge)(_e(i),o)}function qe(i,o=dt.Default){return Ue(i,zt(o))}function zt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function vt(i){const o=[];for(let a=0;a<i.length;a++){const c=_e(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Y(900,!1);let h,f=dt.Default;for(let y=0;y<c.length;y++){const v=c[y],C=Mt(v);"number"==typeof C?-1===C?h=v.token:f|=C:h=v}o.push(Ue(h,f))}else o.push(Ue(c))}return o}function on(i,o){return i[Nt]=o,i.prototype[Nt]=o,i}function Mt(i){return i[Nt]}function os(i){return{toString:i}.toString()}var ks=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(ks||{}),as=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(as||{});const di={},jt=[],go=L({\u0275cmp:L}),Bo=L({\u0275dir:L}),Hu=L({\u0275pipe:L}),zu=L({\u0275mod:L}),us=L({\u0275fac:L}),jo=L({__NG_ELEMENT_ID__:L}),Gu=L({__NG_ENV_ID__:L});function Zl(i,o,a){let c=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||i.charCodeAt(h+f)<=32)return h}a=h+1}}function Pa(i,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],v=a[c++];i.setAttribute(o,y,v,f)}else{const f=h,y=a[++c];Na(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function cs(i){return 3===i||4===i||6===i}function Na(i){return 64===i.charCodeAt(0)}function Ra(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||qu(i,a,h,null,-1===a||2===a?o[++c]:null)}}return i}function qu(i,o,a,c,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const v=i[f++];if("number"==typeof v){if(v===o){y=-1;break}if(v>o){y=f-1;break}}}for(;f<i.length;){const v=i[f];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==h&&(i[f+1]=h));if(c===i[f+1])return void(i[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==h&&i.splice(f++,0,h)}const wn="ng-template";function Wm(i,o,a){let c=0,h=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&h){const y=i[c++];if(a&&"class"===f&&-1!==Zl(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(h=!1)}}return!1}function xi(i){return 4===i.type&&i.value!==wn}function Zm(i,o,a){return o===(4!==i.type||a?i.value:wn)}function Kl(i,o,a){let c=4;const h=i.attrs||[],f=function ka(i){for(let o=0;o<i.length;o++)if(cs(i[o]))return o;return i.length}(h);let y=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!Zm(i,C,a)||""===C&&1===o.length){if(jr(c))return!1;y=!0}}else{const D=8&c?C:o[++v];if(8&c&&null!==i.attrs){if(!Wm(i.attrs,D,a)){if(jr(c))return!1;y=!0}continue}const k=Yl(8&c?"class":C,h,xi(i),a);if(-1===k){if(jr(c))return!1;y=!0;continue}if(""!==D){let z;z=k>f?"":h[k+1].toLowerCase();const Z=8&c?z:null;if(Z&&-1!==Zl(Z,D,0)||2&c&&D!==z){if(jr(c))return!1;y=!0}}}}else{if(!y&&!jr(c)&&!jr(C))return!1;if(y&&jr(C))continue;y=!1,c=C|1&c}}return jr(c)||y}function jr(i){return 0==(1&i)}function Yl(i,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function Jl(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Ql(i,o,a=!1){for(let c=0;c<o.length;c++)if(Kl(i,o[c],a))return!0;return!1}function xf(i,o){return i?":not("+o.trim()+")":o}function Of(i){let o=i[0],a=1,c=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const v=i[++a];h+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!jr(y)&&(o+=xf(f,h),h=""),c=y,f=f||!jr(c);a++}return""!==h&&(o+=xf(f,h)),o}function Wu(i){return os(()=>{const o=Pf(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===ks.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||as.Emulated,styles:i.styles||jt,_:null,schemas:i.schemas||null,tView:null,id:""};Xu(a);const c=i.dependencies;return a.directiveDefs=Fs(c,!1),a.pipeDefs=Fs(c,!0),a.id=function nd(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const h of a)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Zu(i){return Rt(i)||tr(i)}function ed(i){return null!==i}function Ku(i){return os(()=>({type:i.type,bootstrap:i.bootstrap||jt,declarations:i.declarations||jt,imports:i.imports||jt,exports:i.exports||jt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Yu(i,o){if(null==i)return di;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,o&&(o[h]=f)}return a}function Qu(i){return os(()=>{const o=Pf(i);return Xu(o),o})}function Ju(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Rt(i){return i[go]||null}function tr(i){return i[Bo]||null}function nr(i){return i[Hu]||null}function $o(i){const o=Rt(i)||tr(i)||nr(i);return null!==o&&o.standalone}function br(i,o){const a=i[zu]||null;if(!a&&!0===o)throw new Error(`Type ${K(i)} does not have '\u0275mod' property.`);return a}function Pf(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||di,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||jt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yu(i.inputs,o),outputs:Yu(i.outputs)}}function Xu(i){i.features?.forEach(o=>o(i))}function Fs(i,o){if(!i)return null;const a=o?nr:Zu;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(ed)}const mn=0,Ve=1,Et=2,an=3,Jr=4,ds=5,rr=6,mo=7,Sn=8,hs=9,Ls=10,ft=11,Fa=12,Ym=13,Xr=14,jn=15,Ho=16,ei=17,Dr=18,fs=19,Nf=20,yo=21,qi=22,ec=23,hi=24,kt=25,id=1,La=2,Tr=7,zo=9,$n=11;function $r(i){return Array.isArray(i)&&"object"==typeof i[id]}function fr(i){return Array.isArray(i)&&!0===i[id]}function sd(i){return 0!=(4&i.flags)}function ps(i){return i.componentOffset>-1}function Va(i){return 1==(1&i.flags)}function fi(i){return!!i.template}function Go(i){return 0!=(512&i[Et])}function gs(i,o){return i.hasOwnProperty(us)?i[us]:null}let Kn=null,ld=!1;function Ar(i){const o=Kn;return Kn=i,o}const dd={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function oy(i){if(!ic(i)||i.dirty){if(!i.producerMustRecompute(i)&&!uy(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function ay(i){i.dirty=!0,function Lf(i){if(void 0===i.liveConsumerNode)return;const o=ld;ld=!0;try{for(const a of i.liveConsumerNode)a.dirty||ay(a)}finally{ld=o}}(i),i.consumerMarkedDirty?.(i)}function Uf(i){return i&&(i.nextProducerIndex=0),Ar(i)}function rc(i,o){if(Ar(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(ic(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)ja(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function uy(i){Vs(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(oy(a),c!==a.version))return!0}return!1}function fd(i){if(Vs(i),ic(i))for(let o=0;o<i.producerNode.length;o++)ja(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function ja(i,o){if(function ly(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Vs(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)ja(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],h=i.liveConsumerNode[o];Vs(h),h.producerIndexOfThis[c]=o}}function ic(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Vs(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let hy=null;function md(i){const o=Ar(null);try{return i()}finally{Ar(o)}}const zf=()=>{},_I=(()=>({...dd,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:zf}))();class my{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function yd(){return _d}function _d(i){return i.type.prototype.ngOnChanges&&(i.setInput=ms),ac}function ac(){const i=vd(this),o=i?.current;if(o){const a=i.previous;if(a===di)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function ms(i,o,a,c){const h=this.declaredInputs[a],f=vd(i)||function yy(i,o){return i[Zo]=o}(i,{previous:di,current:null}),y=f.current||(f.current={}),v=f.previous,C=v[h];y[h]=new my(C&&C.currentValue,o,v===di),i[c]=o}yd.ngInherit=!0;const Zo="__ngSimpleChanges__";function vd(i){return i[Zo]||null}const Wi=function(i,o,a){},Gf="svg";function Xt(i){for(;Array.isArray(i);)i=i[mn];return i}function ys(i,o){return Xt(o[i])}function Mr(i,o){return Xt(o[i.index])}function Id(i,o){return i.data[o]}function Ko(i,o){return i[o]}function Hr(i,o){const a=o[i];return $r(a)?a:a[mn]}function Bs(i,o){return null==o?null:i[o]}function qf(i){i[ei]=0}function Ha(i){1024&i[Et]||(i[Et]|=1024,Un(i,1))}function _y(i){1024&i[Et]&&(i[Et]&=-1025,Un(i,-1))}function Un(i,o){let a=i[an];if(null===a)return;a[ds]+=o;let c=a;for(a=a[an];null!==a&&(1===o&&1===c[ds]||-1===o&&0===c[ds]);)a[ds]+=o,c=a,a=a[an]}const yt={lFrame:ip(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Yo(){return yt.bindingsEnabled}function ye(){return yt.lFrame.lView}function Ut(){return yt.lFrame.tView}function Oi(i){return yt.lFrame.contextLView=i,i[Sn]}function Dd(i){return yt.lFrame.contextLView=null,i}function ir(){let i=hc();for(;null!==i&&64===i.type;)i=i.parent;return i}function hc(){return yt.lFrame.currentTNode}function Zi(i,o){const a=yt.lFrame;a.currentTNode=i,a.isParent=o}function Jf(){return yt.lFrame.isParent}function sr(){const i=yt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function qa(){return yt.lFrame.bindingIndex++}function Ki(i){const o=yt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function tp(i,o){const a=yt.lFrame;a.bindingIndex=a.bindingRootIndex=i,np(o)}function np(i){yt.lFrame.currentDirectiveIndex=i}function by(){return yt.lFrame.currentQueryIndex}function rp(i){yt.lFrame.currentQueryIndex=i}function DI(i){const o=i[Ve];return 2===o.type?o.declTNode:1===o.type?i[rr]:null}function Sd(i,o,a){if(a&dt.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&dt.Host||(h=DI(f),null===h||(f=f[Xr],10&h.type))););if(null===h)return!1;o=h,i=f}const c=yt.lFrame=_s();return c.currentTNode=o,c.lView=i,!0}function xr(i){const o=_s(),a=i[Ve];yt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function _s(){const i=yt.lFrame,o=null===i?null:i.child;return null===o?ip(i):o}function ip(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function un(){const i=yt.lFrame;return yt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const lt=un;function or(){const i=un();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Or(){return yt.lFrame.selectedIndex}function vs(i){yt.lFrame.selectedIndex=i}function pn(){const i=yt.lFrame;return Id(i.tView,i.selectedIndex)}function Hs(){yt.lFrame.currentNamespace=Gf}function wt(){!function Dy(){yt.lFrame.currentNamespace=null}()}let Wa=!0;function ws(){return Wa}function Is(i){Wa=i}function Qo(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:A}=f;y&&(i.contentHooks??=[]).push(-a,y),v&&((i.contentHooks??=[]).push(a,v),(i.contentCheckHooks??=[]).push(a,v)),C&&(i.viewHooks??=[]).push(-a,C),D&&((i.viewHooks??=[]).push(a,D),(i.viewCheckHooks??=[]).push(a,D)),null!=A&&(i.destroyHooks??=[]).push(a,A)}}function _o(i,o,a){gc(i,o,3,a)}function Jo(i,o,a,c){(3&i[Et])===a&&gc(i,o,a,c)}function pc(i,o){let a=i[Et];(3&a)===o&&(a&=8191,a+=1,i[Et]=a)}function gc(i,o,a,c){const f=c??-1,y=o.length-1;let v=0;for(let C=void 0!==c?65535&i[ei]:0;C<y;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(i[ei]+=65536),(v<f||-1==f)&&(Za(i,a,o,C),i[ei]=(4294901760&i[ei])+C+2),C++}function Es(i,o){Wi(4,i,o);const a=Ar(null);try{o.call(i)}finally{Ar(a),Wi(5,i,o)}}function Za(i,o,a,c){const h=a[c]<0,f=a[c+1],v=i[h?-a[c]:a[c]];h?i[Et]>>13<i[ei]>>16&&(3&i[Et])===o&&(i[Et]+=8192,Es(v,f)):Es(v,f)}const Yi=-1;class vo{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function mc(i){return i!==Yi}function ti(i){return 32767&i}function en(i,o){let a=function An(i){return i>>16}(i),c=o;for(;a>0;)c=c[Xr],a--;return c}let Xo=!0;function ar(i){const o=Xo;return Xo=i,o}const Ja=255,Xa=5;let Ty=0;const Hn={};function En(i,o){const a=yc(i,o);if(-1!==a)return a;const c=o[Ve];c.firstCreatePass&&(i.injectorIndex=o.length,Pi(c.data,i),Pi(o,null),Pi(c.blueprint,null));const h=Io(i,o),f=i.injectorIndex;if(mc(h)){const y=ti(h),v=en(h,o),C=v[Ve].data;for(let D=0;D<8;D++)o[f+D]=v[y+D]|C[y+D]}return o[f+8]=h,f}function Pi(i,o){i.push(0,0,0,0,0,0,0,0,o)}function yc(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Io(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=hp(h),null===c)return Yi;if(a++,h=h[Xr],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Yi}function ea(i,o,a){!function qs(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(jo)&&(c=a[jo]),null==c&&(c=a[jo]=Ty++);const h=c&Ja;o.data[i+(h>>Xa)]|=1<<h}(i,o,a)}function Od(i,o,a){if(a&dt.Optional||void 0!==i)return i;ke()}function Eo(i,o,a,c){if(a&dt.Optional&&void 0===c&&(c=null),!(a&(dt.Self|dt.Host))){const h=i[hs],f=Jt(void 0);try{return h?h.get(o,c,a&dt.Optional):Br(o,c,a&dt.Optional)}finally{Jt(f)}}return Od(c,0,a)}function Pd(i,o,a,c=dt.Default,h){if(null!==i){if(2048&o[Et]&&!(c&dt.Self)){const y=function dp(i,o,a,c,h){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[Et]&&!(512&y[Et]);){const v=_c(f,y,a,c|dt.Self,Hn);if(v!==Hn)return v;let C=f.parent;if(!C){const D=y[Nf];if(D){const A=D.get(a,Hn,c);if(A!==Hn)return A}C=hp(y),y=y[Xr]}f=C}return h}(i,o,a,c,Hn);if(y!==Hn)return y}const f=_c(i,o,a,c,Hn);if(f!==Hn)return f}return Eo(o,a,c,h)}function _c(i,o,a,c,h){const f=function Zs(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(jo)?i[jo]:void 0;return"number"==typeof o?o>=0?o&Ja:Ks:o}(a);if("function"==typeof f){if(!Sd(o,i,c))return c&dt.Host?Od(h,0,c):Eo(o,a,c,h);try{let y;if(y=f(c),null!=y||c&dt.Optional)return y;ke()}finally{lt()}}else if("number"==typeof f){let y=null,v=yc(i,o),C=Yi,D=c&dt.Host?o[jn][rr]:null;for((-1===v||c&dt.SkipSelf)&&(C=-1===v?Io(i,o):o[v+8],C!==Yi&&up(c,!1)?(y=o[Ve],v=ti(C),o=en(C,o)):v=-1);-1!==v;){const A=o[Ve];if(ap(f,v,A.data)){const k=Ct(v,o,a,y,c,D);if(k!==Hn)return k}C=o[v+8],C!==Yi&&up(c,o[Ve].data[v+8]===D)&&ap(f,v,o)?(y=A,v=ti(C),o=en(C,o)):v=-1}}return h}function Ct(i,o,a,c,h,f){const y=o[Ve],v=y.data[i+8],A=Ws(v,y,a,null==c?ps(v)&&Xo:c!=y&&0!=(3&v.type),h&dt.Host&&f===v);return null!==A?Co(o,y,A,v):Hn}function Ws(i,o,a,c,h){const f=i.providerIndexes,y=o.data,v=1048575&f,C=i.directiveStart,A=f>>20,z=h?v+A:i.directiveEnd;for(let Z=c?v:v+A;Z<z;Z++){const ue=y[Z];if(Z<C&&a===ue||Z>=C&&ue.type===a)return Z}if(h){const Z=y[C];if(Z&&fi(Z)&&Z.type===a)return C}return null}function Co(i,o,a,c){let h=i[a];const f=o.data;if(function Ka(i){return i instanceof vo}(h)){const y=h;y.resolving&&function Pe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Y(-200,`Circular dependency in DI detected for ${i}${a}`)}(function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():X(i)}(f[a]));const v=ar(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?Jt(y.injectImpl):null;Sd(i,c,dt.Default);try{h=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function pr(i,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=_d(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}h&&(a.preOrderHooks??=[]).push(0-i,h),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==D&&Jt(D),ar(v),y.resolving=!1,lt()}}return h}function ap(i,o,a){return!!(a[o+(i>>Xa)]&1<<i)}function up(i,o){return!(i&dt.Self||i&dt.Host&&o)}class zn{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Pd(this._tNode,this._lView,o,zt(c),a)}}function Ks(){return new zn(ir(),ye())}function lp(i){return os(()=>{const o=i.prototype.constructor,a=o[us]||vc(o),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const f=h[us]||vc(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function vc(i){return Te(i)?()=>{const o=vc(_e(i));return o&&o()}:gs(i)}function hp(i){const o=i[Ve],a=o.type;return 2===a?o.declTNode:1===a?i[rr]:null}function wc(i){return function op(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(cs(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(ir(),i)}const bo="__parameters__";function Bt(i,o,a){return os(()=>{const c=function Ys(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return v.annotation=y,v;function v(C,D,A){const k=C.hasOwnProperty(bo)?C[bo]:Object.defineProperty(C,bo,{value:[]})[bo];for(;k.length<=A;)k.push(null);return(k[A]=k[A]||[]).push(y),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}function na(i,o){i.forEach(a=>Array.isArray(a)?na(a,o):o(a))}function Ay(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ra(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function ni(i,o,a){let c=ia(i,o);return c>=0?i[1|c]=a:(c=~c,function gp(i,o,a,c){let h=i.length;if(h==o)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function kd(i,o){const a=ia(i,o);if(a>=0)return i[1|a]}function ia(i,o){return function Tc(i,o,a){let c=0,h=i.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:c=f+1}return~(h<<a)}(i,o,1)}const ne=on(Bt("Optional"),8),Be=on(Bt("SkipSelf"),4);function _p(i){return 128==(128&i.flags)}var Ud=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Ud||{});const Vd=new Map;let AS=0;const Ip="__ngContext__";function Gr(i,o){$r(o)?(i[Ip]=o[fs],function RI(i){Vd.set(i[fs],i)}(o)):i[Ip]=o}let $d;function Ni(i,o){return $d(i,o)}function Mo(i){const o=i[an];return fr(o)?o[an]:o}function LI(i){return Hd(i[Fa])}function jy(i){return Hd(i[Jr])}function Hd(i){for(;null!==i&&!fr(i);)i=i[Jr];return i}function Pc(i,o,a,c,h){if(null!=c){let f,y=!1;fr(c)?f=c:$r(c)&&(y=!0,c=c[mn]);const v=Xt(c);0===i&&null!==a?null==h?jI(o,a,v):lu(o,a,v,h||null,!0):1===i&&null!==a?lu(o,a,v,h||null,!0):2===i?function Tp(i,o,a){const c=Dp(i,o);c&&function HS(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,v,y):3===i&&o.destroyNode(v),null!=f&&function GS(i,o,a,c,h){const f=a[Tr];f!==Xt(a)&&Pc(o,i,c,f,h);for(let v=$n;v<a.length;v++){const C=a[v];Kd(C[Ve],C,i,o,c,f)}}(o,i,f,a,h)}}function Cp(i,o,a){return i.createElement(o,a)}function UI(i,o){const a=i[zo],c=a.indexOf(o);_y(o),a.splice(c,1)}function bp(i,o){if(i.length<=$n)return;const a=$n+o,c=i[a];if(c){const h=c[Ho];null!==h&&h!==i&&UI(h,c),o>0&&(i[a-1][Jr]=c[Jr]);const f=ra(i,$n+o);!function US(i,o){Kd(i,o,o[ft],2,null,null),o[mn]=null,o[rr]=null}(c[Ve],c);const y=f[Dr];null!==y&&y.detachView(f[Ve]),c[an]=null,c[Jr]=null,c[Et]&=-129}return c}function $y(i,o){if(!(256&o[Et])){const a=o[ft];o[ec]&&fd(o[ec]),o[hi]&&fd(o[hi]),a.destroyNode&&Kd(i,o,a,3,null,null),function VS(i){let o=i[Fa];if(!o)return VI(i[Ve],i);for(;o;){let a=null;if($r(o))a=o[Fa];else{const c=o[$n];c&&(a=c)}if(!a){for(;o&&!o[Jr]&&o!==i;)$r(o)&&VI(o[Ve],o),o=o[an];null===o&&(o=i),$r(o)&&VI(o[Ve],o),a=o&&o[Jr]}o=a}}(o)}}function VI(i,o){if(!(256&o[Et])){o[Et]&=-129,o[Et]|=256,function BI(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof vo)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const v=h[f[y]],C=f[y+1];Wi(4,v,C);try{C.call(v)}finally{Wi(5,v,C)}}else{Wi(4,h,f);try{f.call(h)}finally{Wi(5,h,f)}}}}}(i,o),function $S(i,o){const a=i.cleanup,c=o[mo];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[mo]=null);const h=o[yo];if(null!==h){o[yo]=null;for(let f=0;f<h.length;f++)(0,h[f])()}}(i,o),1===o[Ve].type&&o[ft].destroy();const a=o[Ho];if(null!==a&&fr(o[an])){a!==o[an]&&UI(a,o);const c=o[Dr];null!==c&&c.detachView(i)}!function Bd(i){Vd.delete(i[fs])}(o)}}function Nc(i,o,a){return function cu(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[mn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:f}=i.data[c.directiveStart+h];if(f===as.None||f===as.Emulated)return null}return Mr(c,a)}}(i,o.parent,a)}function lu(i,o,a,c,h){i.insertBefore(o,a,c,h)}function jI(i,o,a){i.appendChild(o,a)}function $I(i,o,a,c,h){null!==c?lu(i,o,a,c,h):jI(i,o,a)}function Dp(i,o){return i.parentNode(o)}let zy,ZI,Ap,Hy=function zI(i,o,a){return 40&i.type?Mr(i,a):null};function Wd(i,o,a,c){const h=Nc(i,c,o),f=o[ft],v=function HI(i,o,a){return Hy(i,o,a)}(c.parent||o[rr],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)$I(f,h,a[C],v,!1);else $I(f,h,a,v,!1);void 0!==zy&&zy(f,c,o,a,h)}function Xs(i,o){if(null!==o){const a=o.type;if(3&a)return Mr(o,i);if(4&a)return qy(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Xs(i,c);{const h=i[o.index];return fr(h)?qy(-1,h):Xt(h)}}if(32&a)return Ni(o,i)()||Xt(i[o.index]);{const c=Gy(i,o);return null!==c?Array.isArray(c)?c[0]:Xs(Mo(i[jn]),c):Xs(i,o.next)}}return null}function Gy(i,o){return null!==o?i[jn][rr].projection[o.projection]:null}function qy(i,o){const a=$n+i+1;if(a<o.length){const c=o[a],h=c[Ve].firstChild;if(null!==h)return Xs(c,h)}return o[Tr]}function Zd(i,o,a,c,h,f,y){for(;null!=a;){const v=c[a.index],C=a.type;if(y&&0===o&&(v&&Gr(Xt(v),c),a.flags|=2),32!=(32&a.flags))if(8&C)Zd(i,o,a.child,c,h,f,!1),Pc(o,i,h,v,f);else if(32&C){const D=Ni(a,c);let A;for(;A=D();)Pc(o,i,h,A,f);Pc(o,i,h,v,f)}else 16&C?Zy(i,o,c,a,h,f):Pc(o,i,h,v,f);a=y?a.projectionNext:a.next}}function Kd(i,o,a,c,h,f){Zd(a,c,i.firstChild,o,h,f,!1)}function Zy(i,o,a,c,h,f){const y=a[jn],C=y[rr].projection[c.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++)Pc(o,i,h,C[D],f);else{let D=C;const A=y[an];_p(c)&&(D.flags|=128),Zd(i,o,D,A,h,f,!0)}}function qI(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Yd(i,o,a){const{mergedAttrs:c,classes:h,styles:f}=a;null!==c&&Pa(i,o,c),null!==h&&qI(i,o,h),null!==f&&function WS(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function KI(i){ZI=i}function JI(i){return function Yy(){if(void 0===Ap&&(Ap=null,Pt.trustedTypes))try{Ap=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ap}()?.createScriptURL(i)||i}class XI{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function oa(i){return i instanceof XI?i.changingThisBreaksApplicationSecurity:i}function Fc(i,o){const a=function Mp(i){return i instanceof XI&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ot})`)}return a===o}const Qd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var eh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(eh||{});function th(i){const o=nh();return o?o.sanitize(eh.URL,i)||"":Fc(i,"URL")?oa(i):function Op(i){return(i=String(i)).match(Qd)?i:"unsafe:"+i}(X(i))}function uE(i){const o=nh();if(o)return JI(o.sanitize(eh.RESOURCE_URL,i)||"");if(Fc(i,"ResourceURL"))return JI(oa(i));throw new Y(904,!1)}function uA(i,o,a){return function aA(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?uE:th}(o,a)(i)}function nh(){const i=ye();return i&&i[Ls].sanitizer}class rn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Lc=new rn("ENVIRONMENT_INITIALIZER"),lE=new rn("INJECTOR",-1),dE=new rn("INJECTOR_DEF_TYPES");class Np{get(o,a=st){if(a===st){const c=new Error(`NullInjectorError: No provider for ${K(o)}!`);throw c.name="NullInjectorError",c}return a}}function n_(i){return{\u0275providers:i}}function cA(...i){return{\u0275providers:hE(0,i),\u0275fromNgModule:!0}}function hE(i,...o){const a=[],c=new Set;let h;const f=y=>{a.push(y)};return na(o,y=>{const v=y;Rp(v,f,[],c)&&(h||=[],h.push(v))}),void 0!==h&&fE(h,f),a}function fE(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:h}=i[a];r_(h,f=>{o(f,c)})}}function Rp(i,o,a,c){if(!(i=_e(i)))return!1;let h=null,f=Ir(i);const y=!f&&Rt(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const C=i.ngModule;if(f=Ir(C),!f)return!1;h=C}const v=c.has(h);if(y){if(v)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of C)Rp(D,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!v){let D;c.add(h);try{na(f.imports,A=>{Rp(A,o,a,c)&&(D||=[],D.push(A))})}finally{}void 0!==D&&fE(D,o)}if(!v){const D=gs(h)||(()=>new h);o({provide:h,useFactory:D,deps:jt},h),o({provide:dE,useValue:h,multi:!0},h),o({provide:Lc,useValue:()=>Ue(h),multi:!0},h)}const C=f.providers;if(null!=C&&!v){const D=i;r_(C,A=>{o(A,D)})}}}return h!==i&&void 0!==i.providers}function r_(i,o){for(let a of i)Ce(a)&&(a=a.\u0275providers),Array.isArray(a)?r_(a,o):o(a)}const Hk=L({provide:String,useValue:L});function pE(i){return null!==i&&"object"==typeof i&&Hk in i}function Uc(i){return"function"==typeof i}const $=new rn("Set Injector scope."),kp={},Fp={};let i_;function hu(){return void 0===i_&&(i_=new Np),i_}class eo{}class rh extends eo{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,s_(o,y=>this.processProvider(y)),this.records.set(lE,Vc(void 0,this)),h.has("environment")&&this.records.set(eo,Vc(void 0,this));const f=this.records.get($);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(dE.multi,jt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=W(this),c=Jt(void 0);try{return o()}finally{W(a),Jt(c)}}get(o,a=st,c=dt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Gu))return o[Gu](this);c=zt(c);const f=W(this),y=Jt(void 0);try{if(!(c&dt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const D=function gA(i){return"function"==typeof i||"object"==typeof i&&i instanceof rn}(o)&&yn(o);C=D&&this.injectableDefInScope(D)?Vc(ih(o),kp):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&dt.Self?hu():this.parent).get(o,a=c&dt.Optional&&a===st?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Lt]=v[Lt]||[]).unshift(K(o)),f)throw v;return function li(i,o,a,c){const h=i[Lt];throw o[O]&&h.unshift(o[O]),i.message=function Oa(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=K(o);if(Array.isArray(o))h=o.map(K).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let v=o[y];f.push(y+":"+("string"==typeof v?JSON.stringify(v):K(v)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(j,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[Lt]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Jt(y),W(f)}}resolveInjectorInitializers(){const o=W(this),a=Jt(void 0);try{const h=this.get(Lc.multi,jt,dt.Self);for(const f of h)f()}finally{W(o),Jt(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(K(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(o){let a=Uc(o=_e(o))?o:_e(o&&o.provide);const c=function gE(i){return pE(i)?Vc(void 0,i.useValue):Vc(Lp(i),kp)}(o);if(Uc(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Vc(void 0,kp,!0),h.factory=()=>vt(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===kp&&(a.value=Fp,a.value=a.factory()),"object"==typeof a.value&&a.value&&function pA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=_e(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ih(i){const o=yn(i),a=null!==o?o.factory:gs(i);if(null!==a)return a;if(i instanceof rn)throw new Y(204,!1);if(i instanceof Function)return function sh(i){const o=i.length;if(o>0)throw function Qs(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new Y(204,!1);const a=function Yr(i){return i&&(i[Wn]||i[Er])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Y(204,!1)}function Lp(i,o,a){let c;if(Uc(i)){const h=_e(i);return gs(h)||ih(h)}if(pE(i))c=()=>_e(i.useValue);else if(function hA(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...vt(i.deps||[]));else if(function dA(i){return!(!i||!i.useExisting)}(i))c=()=>Ue(_e(i.useExisting));else{const h=_e(i&&(i.useClass||i.provide));if(!function fA(i){return!!i.deps}(i))return gs(h)||ih(h);c=()=>new h(...vt(i.deps))}return c}function Vc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function s_(i,o){for(const a of i)Array.isArray(a)?s_(a,o):a&&Ce(a)?s_(a.\u0275providers,o):o(a)}const mE=new rn("AppId",{providedIn:"root",factory:()=>mA}),mA="ng",yE=new rn("Platform Initializer"),Up=new rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yA=new rn("CSP nonce",{providedIn:"root",factory:()=>function du(){if(void 0!==ZI)return ZI;if(typeof document<"u")return document;throw new Y(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let f_=(i,o,a)=>null;function Xi(i,o,a=!1){return f_(i,o,a)}class DA{}class IE{}class ah{resolveComponentFactory(o){throw function TA(i){const o=Error(`No component factory found for ${K(i)}.`);return o.ngComponent=i,o}(o)}}let Hp=(()=>{class i{static#e=this.NULL=new ah}return i})();function uh(){return Hc(ir(),ye())}function Hc(i,o){return new ch(Mr(i,o))}let ch=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=uh}return i})();function SA(i){return i instanceof ch?i.nativeElement:i}class EE{}let AA=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function CE(){const i=ye(),a=Hr(ir().index,i);return($r(a)?a:i)[ft]}()}return i})(),MA=(()=>{class i{static#e=this.\u0275prov=ht({token:i,providedIn:"root",factory:()=>null})}return i})();class zp{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const y_=new zp("16.2.8"),__={};function SE(i,o=null,a=null,c){const h=AE(i,o,a,c);return h.resolveInjectorInitializers(),h}function AE(i,o=null,a=null,c,h=new Set){const f=[a||jt,cA(i)];return c=c||("object"==typeof i?void 0:K(i)),new rh(f,o||hu(),c||null,h)}let Ss=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=st;static#t=this.NULL=new Np;static create(a,c){if(Array.isArray(a))return SE({name:""},c,a,"");{const h=a.name??"";return SE({name:h},a.parent,a.providers,h)}}static#n=this.\u0275prov=ht({token:i,providedIn:"any",factory:()=>Ue(lE)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function w_(i){return i.ngOriginalError}class _i{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&w_(o);for(;a&&w_(a);)a=w_(a);return a||null}}function E_(i){return o=>{setTimeout(i,void 0,o)}}const to=class dh extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=E_(f),h&&(h=E_(h)),y&&(y=E_(y)));const v=super.subscribe({next:h,error:f,complete:y});return o instanceof U.w0&&o.add(v),v}};function xE(...i){}class mr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function RA(){const i="function"==typeof Pt.requestAnimationFrame;let o=Pt[i?"requestAnimationFrame":"setTimeout"],a=Pt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function LA(i){const o=()=>{!function FA(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,b_(i),i.isCheckStableRunning=!0,C_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),b_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,v)=>{if(function zc(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(v))return a.invokeTask(h,f,y,v);try{return OE(i),a.invokeTask(h,f,y,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),PE(i)}},onInvoke:(a,c,h,f,y,v,C)=>{try{return OE(i),a.invoke(h,f,y,v,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),PE(i)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,b_(i),C_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mr.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(mr.isInAngularZone())throw new Y(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,kA,xE,xE);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const kA={};function C_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function b_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function OE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function PE(i){i._nesting--,C_(i)}class UA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const NE=new rn("",{providedIn:"root",factory:RE});function RE(){const i=qe(mr);let o=!0;const a=new R.y(h=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{h.next(o),h.complete()})}),c=new R.y(h=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{mr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=i.onUnstable.subscribe(()=>{mr.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{h.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Q.T)(a,c.pipe((0,Oe.B)()))}function Oo(i){return i instanceof Function?i():i}let D_=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ht({token:i,providedIn:"root",factory:()=>new i})}return i})();function hh(i){for(;i;){i[Et]|=64;const o=Mo(i);if(Go(i)&&!o)return i;i=o}return null}const BE=new rn("",{providedIn:"root",factory:()=>!1});let ph=null;function HE(i,o){return i[o]??gh()}function zE(i,o){const a=gh();a.producerNode?.length&&(i[o]=ph,a.lView=i,ph=qE())}const GE={...dd,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{hh(i.lView)},lView:null};function qE(){return Object.create(GE)}function gh(){return ph??=qE(),ph}const bt={};function WE(i){ZE(Ut(),ye(),Or()+i,!1)}function ZE(i,o,a,c){if(!c)if(3==(3&o[Et])){const f=i.preOrderCheckHooks;null!==f&&_o(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Jo(o,f,0,a)}vs(a)}function no(i,o=dt.Default){const a=ye();return null===a?Ue(i,o):Pd(ir(),a,_e(i),o)}function KE(){throw new Error("invalid")}function mh(i,o,a,c,h,f,y,v,C,D,A){const k=o.blueprint.slice();return k[mn]=h,k[Et]=140|c,(null!==D||i&&2048&i[Et])&&(k[Et]|=2048),qf(k),k[an]=k[Xr]=i,k[Sn]=a,k[Ls]=y||i&&i[Ls],k[ft]=v||i&&i[ft],k[hs]=C||i&&i[hs]||null,k[rr]=f,k[fs]=function wp(){return AS++}(),k[qi]=A,k[Nf]=D,k[jn]=2==o.type?i[jn]:k,k}function pu(i,o,a,c,h){let f=i.data[o];if(null===f)f=function S_(i,o,a,c,h){const f=hc(),y=Jf(),C=i.data[o]=function KA(i,o,a,c,h,f){let y=o?o.injectorIndex:-1,v=0;return function js(){return null!==yt.skipHydrationRootTNode}()&&(v|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,h);return null===i.firstChild&&(i.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(i,o,a,c,h),function CI(){return yt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function Ga(){const i=yt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Zi(f,!0),f}function yh(i,o,a,c){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return h}function YE(i,o,a,c,h){const f=HE(o,ec),y=Or(),v=2&c;try{vs(-1),v&&o.length>kt&&ZE(i,o,kt,!1),Wi(v?2:0,h);const D=v?f:null,A=Uf(D);try{null!==D&&(D.dirty=!1),a(c,h)}finally{rc(D,A)}}finally{v&&null===o[ec]&&zE(o,ec),vs(y),Wi(v?3:1,h)}}function A_(i,o,a){if(sd(o)){const c=Ar(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const v=i.data[y];v.contentQueries&&v.contentQueries(1,a[y],y)}}finally{Ar(c)}}}function M_(i,o,a){Yo()&&(function tM(i,o,a,c){const h=a.directiveStart,f=a.directiveEnd;ps(a)&&function uM(i,o,a){const c=Mr(o,i),h=QE(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const v=Wp(i,mh(i,h,null,y,c,o,null,i[Ls].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||En(a,o),Gr(c,o);const y=a.initialInputs;for(let v=h;v<f;v++){const C=i.data[v],D=Co(o,i,v,a);Gr(D,o),null!==y&&cM(0,v-h,D,C,0,y),fi(C)&&(Hr(a.index,o)[Sn]=Co(o,i,v,a))}}(i,o,a,Mr(a,o)),64==(64&a.flags)&&sC(i,o,a))}function _h(i,o,a=Mr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],v=-1===y?a(o,i):i[y];i[h++]=v}}}function QE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=x_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function x_(i,o,a,c,h,f,y,v,C,D,A){const k=kt+c,z=k+h,Z=function JE(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:bt);return a}(k,z),ue="function"==typeof D?D():D;return Z[Ve]={type:i,blueprint:Z,template:a,queries:null,viewQuery:v,declTNode:o,data:Z.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ue,incompleteFirstPass:!1,ssrId:A}}let O_=i=>null;function tC(i,o,a,c){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const f=i[h];null===c?nC(a,o,h,f):c.hasOwnProperty(h)&&nC(a,o,c[h],f)}return a}function nC(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function P_(i,o,a,c){if(Yo()){const h=null===c?null:{"":-1},f=function rM(i,o){const a=i.directiveRegistry;let c=null,h=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Ql(o,y.selectors,!1))if(c||(c=[]),fi(y))if(null!==y.findHostDirectiveDefs){const v=[];h=h||new Map,y.findHostDirectiveDefs(y,v,h),c.unshift(...v,y),N_(i,o,v.length)}else c.unshift(y),N_(i,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(i,a);let y,v;null===f?y=v=null:[y,v]=f,null!==y&&iC(i,o,a,y,h,v),h&&function iM(i,o,a){if(o){const c=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new Y(-301,!1);c.push(o[h],f)}}}(a,c,h)}a.mergedAttrs=Ra(a.mergedAttrs,a.attrs)}function iC(i,o,a,c,h,f){for(let D=0;D<c.length;D++)ea(En(a,o),i,c[D].type);!function oM(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let D=0;D<c.length;D++){const A=c[D];A.providersResolver&&A.providersResolver(A)}let y=!1,v=!1,C=yh(i,o,c.length,null);for(let D=0;D<c.length;D++){const A=c[D];a.mergedAttrs=Ra(a.mergedAttrs,A.hostAttrs),aM(i,a,o,C,A),sM(C,A,h),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const k=A.type.prototype;!y&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!v&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),v=!0),C++}!function YA(i,o,a){const h=o.directiveEnd,f=i.data,y=o.attrs,v=[];let C=null,D=null;for(let A=o.directiveStart;A<h;A++){const k=f[A],z=a?a.get(k):null,ue=z?z.outputs:null;C=tC(k.inputs,A,C,z?z.inputs:null),D=tC(k.outputs,A,D,ue);const De=null===C||null===y||xi(o)?null:lM(C,A,y);v.push(De)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=v,o.inputs=C,o.outputs=D}(i,a,f)}function sC(i,o,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function bI(){return yt.lFrame.currentDirectiveIndex}();try{vs(f);for(let v=c;v<h;v++){const C=i.data[v],D=o[v];np(v),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&nM(C,D)}}finally{vs(-1),np(y)}}function nM(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function N_(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function sM(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;fi(o)&&(a[""]=i)}}function aM(i,o,a,c,h){i.data[c]=h;const f=h.factory||(h.factory=gs(h.type)),y=new vo(f,fi(h),no);i.blueprint[c]=y,a[c]=y,function XA(i,o,a,c,h){const f=h.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const v=~o.index;(function eM(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=v&&y.push(v),y.push(a,c,f)}}(i,o,c,yh(i,a,h.hostVars,bt),h)}function ro(i,o,a,c,h,f){const y=Mr(i,o);!function R_(i,o,a,c,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const v=null==y?X(f):y(f,c||"",h);i.setAttribute(o,h,v,a)}}(o[ft],y,f,i.value,a,c,h)}function cM(i,o,a,c,h,f){const y=f[o];if(null!==y)for(let v=0;v<y.length;)oC(c,a,y[v++],y[v++],y[v++])}function oC(i,o,a,c,h){const f=Ar(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(h=y[c].call(o,h)),null!==i.setInput?i.setInput(o,h,a,c):o[c]=h}finally{Ar(f)}}function lM(i,o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let v=0;v<y.length;v+=2)if(y[v]===o){c.push(f,y[v+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function aC(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function uC(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];rp(a[c]),y.contentQueries(2,o[f],f)}}}function Wp(i,o){return i[Fa]?i[Ym][Jr]=o:i[Fa]=o,i[Ym]=o,o}function cn(i,o,a){rp(0);const c=Ar(null);try{o(i,a)}finally{Ar(c)}}function cC(i){return i[mo]||(i[mo]=[])}function lC(i){return i.cleanup||(i.cleanup=[])}function k_(i,o){const a=i[hs],c=a?a.get(_i,null):null;c&&c.handleError(o)}function gu(i,o,a,c,h){for(let f=0;f<a.length;){const y=a[f++],v=a[f++];oC(i.data[y],o[y],c,v,h)}}function Po(i,o,a){const c=ys(o,i);!function au(i,o,a){i.setValue(o,a)}(i[ft],c,a)}function F_(i,o){const a=Hr(o,i),c=a[Ve];!function dM(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const h=a[mn];null!==h&&null===a[qi]&&(a[qi]=Xi(h,a[hs])),la(c,a,a[Sn])}function la(i,o,a){xr(o);try{const c=i.viewQuery;null!==c&&cn(1,c,a);const h=i.template;null!==h&&YE(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&uC(i,o),i.staticViewQueries&&cn(2,i.viewQuery,a);const f=i.components;null!==f&&function dC(i,o){for(let a=0;a<o.length;a++)F_(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Et]&=-5,or()}}let hC=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,h){const f=typeof Zone>"u"?null:Zone.current,y=function py(i,o,a){const c=Object.create(_I);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const h=y=>{c.cleanupFn=y};return c.ref={notify:()=>ay(c),run:()=>{if(c.dirty=!1,c.hasRun&&!uy(c))return;c.hasRun=!0;const y=Uf(c);try{c.cleanupFn(),c.cleanupFn=zf,c.fn(h)}finally{rc(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,D=>{this.all.has(D)&&this.queue.set(D,f)},h);let v;this.all.add(y),y.notify();const C=()=>{y.cleanup(),v?.(),this.all.delete(y),this.queue.delete(y)};return v=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ht({token:i,providedIn:"root",factory:()=>new i})}return i})();function Kp(i,o,a){let c=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const v=o[y];"number"==typeof v?f=v:1==f?h=Me(h,v):2==f&&(c=Me(c,v+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function vh(i,o,a,c,h=!1){for(;null!==a;){const f=o[a.index];null!==f&&c.push(Xt(f)),fr(f)&&fC(f,c);const y=a.type;if(8&y)vh(i,o,a.child,c);else if(32&y){const v=Ni(a,o);let C;for(;C=v();)c.push(C)}else if(16&y){const v=Gy(o,a);if(Array.isArray(v))c.push(...v);else{const C=Mo(o[jn]);vh(C[Ve],C,v,c,!0)}}a=h?a.projectionNext:a.next}return c}function fC(i,o){for(let a=$n;a<i.length;a++){const c=i[a],h=c[Ve].firstChild;null!==h&&vh(c[Ve],c,h,o)}i[Tr]!==i[mn]&&o.push(i[Tr])}function wh(i,o,a,c=!0){const h=o[Ls],f=h.rendererFactory,y=h.afterRenderEventManager;f.begin?.(),y?.begin();try{Yp(i,o,i.template,a)}catch(C){throw c&&k_(o,C),C}finally{f.end?.(),h.effectManager?.flush(),y?.end()}}function Yp(i,o,a,c){const h=o[Et];if(256!=(256&h)){o[Ls].effectManager?.flush(),xr(o);try{qf(o),function Cy(i){return yt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&YE(i,o,a,2,c);const y=3==(3&h);if(y){const D=i.preOrderCheckHooks;null!==D&&_o(o,D,null)}else{const D=i.preOrderHooks;null!==D&&Jo(o,D,0,null),pc(o,0)}if(function gC(i){for(let o=LI(i);null!==o;o=jy(o)){if(!o[La])continue;const a=o[zo];for(let c=0;c<a.length;c++){Ha(a[c])}}}(o),pC(o,2),null!==i.contentQueries&&uC(i,o),y){const D=i.contentCheckHooks;null!==D&&_o(o,D)}else{const D=i.contentHooks;null!==D&&Jo(o,D,1),pc(o,1)}!function GA(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=HE(o,hi);try{for(let h=0;h<a.length;h++){const f=a[h];if(f<0)vs(~f);else{const y=f,v=a[++h],C=a[++h];tp(v,y),c.dirty=!1;const D=Uf(c);try{C(2,o[y])}finally{rc(c,D)}}}}finally{null===o[hi]&&zE(o,hi),vs(-1)}}(i,o);const v=i.components;null!==v&&yC(o,v,0);const C=i.viewQuery;if(null!==C&&cn(2,C,c),y){const D=i.viewCheckHooks;null!==D&&_o(o,D)}else{const D=i.viewHooks;null!==D&&Jo(o,D,2),pc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Et]&=-73,_y(o)}finally{or()}}}function pC(i,o){for(let a=LI(i);null!==a;a=jy(a))for(let c=$n;c<a.length;c++)mC(a[c],o)}function pM(i,o,a){mC(Hr(o,i),a)}function mC(i,o){if(!function II(i){return 128==(128&i[Et])}(i))return;const a=i[Ve],c=i[Et];if(80&c&&0===o||1024&c||2===o)Yp(a,i,a.template,i[Sn]);else if(i[ds]>0){pC(i,1);const h=a.components;null!==h&&yC(i,h,1)}}function yC(i,o,a){for(let c=0;c<o.length;c++)pM(i,o[c],a)}class Ih{get rootNodes(){const o=this._lView,a=o[Ve];return vh(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(o){this._lView[Sn]=o}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[an];if(fr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(bp(o,c),ra(a,c))}this._attachedToViewContainer=!1}$y(this._lView[Ve],this._lView)}onDestroy(o){!function Cd(i,o){if(256==(256&i[Et]))throw new Y(911,!1);null===i[yo]&&(i[yo]=[]),i[yo].push(o)}(this._lView,o)}markForCheck(){hh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){wh(this._lView[Ve],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gd(i,o){Kd(i,o,o[ft],2,null,null)}(this._lView[Ve],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=o}}class gM extends Ih{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;wh(o[Ve],o,o[Sn],!1)}checkNoChanges(){}get context(){return null}}class _C extends Hp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Rt(o);return new mu(a,this.ngModule)}}function vC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class mM{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=zt(c);const h=this.injector.get(o,__,c);return h!==__||a===__?h:this.parentInjector.get(o,a,c)}}class mu extends IE{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=vC(o.inputs);if(null!==a)for(const h of c)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return c}get outputs(){return vC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function hI(i){return i.map(Of).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let f=(h=h||this.ngModule)instanceof eo?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new mM(o,f):o,v=y.get(EE,null);if(null===v)throw new Y(407,!1);const k={rendererFactory:v,sanitizer:y.get(MA,null),effectManager:y.get(hC,null),afterRenderEventManager:y.get(D_,null)},z=v.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ue=c?function XE(i,o,a,c){const f=c.get(BE,!1)||a===as.ShadowDom,y=i.selectRootElement(o,f);return function qA(i){O_(i)}(y),y}(z,c,this.componentDef.encapsulation,y):Cp(z,Z,function wC(i){const o=i.toLowerCase();return"svg"===o?Gf:"math"===o?"math":null}(Z)),rt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ce=null;null!==ue&&(ce=Xi(ue,y,!0));const tt=x_(0,null,null,1,0,null,null,null,null,null,null),At=mh(null,tt,null,rt,null,null,k,z,y,null,ce);let tn,Ci;xr(At);try{const Lo=this.componentDef;let vl,sm=null;Lo.findHostDirectiveDefs?(vl=[],sm=new Map,Lo.findHostDirectiveDefs(Lo,vl,sm),vl.push(Lo)):vl=[Lo];const MP=function _M(i,o){const a=i[Ve],c=kt;return i[c]=o,pu(a,c,2,"#host",null)}(At,ue),xP=function vM(i,o,a,c,h,f,y){const v=h[Ve];!function wM(i,o,a,c){for(const h of i)o.mergedAttrs=Ra(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Kp(o,o.mergedAttrs,!0),null!==a&&Yd(c,a,o))}(c,i,o,y);let C=null;null!==o&&(C=Xi(o,h[hs]));const D=f.rendererFactory.createRenderer(o,a);let A=16;a.signals?A=4096:a.onPush&&(A=64);const k=mh(h,QE(a),null,A,h[i.index],i,f,D,null,null,C);return v.firstCreatePass&&N_(v,i,c.length-1),Wp(h,k),h[i.index]=k}(MP,ue,Lo,vl,At,k,z);Ci=Id(tt,kt),ue&&function EM(i,o,a,c){if(c)Pa(i,a,["ng-version",y_.full]);else{const{attrs:h,classes:f}=function Qr(i){const o=[],a=[];let c=1,h=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++c]):8===h&&a.push(f);else{if(!jr(h))break;h=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&Pa(i,a,h),f&&f.length>0&&qI(i,a,f.join(" "))}}(z,Lo,ue,c),void 0!==a&&function CM(i,o,a){const c=i.projection=[];for(let h=0;h<o.length;h++){const f=a[h];c.push(null!=f?Array.from(f):null)}}(Ci,this.ngContentSelectors,a),tn=function IM(i,o,a,c,h,f){const y=ir(),v=h[Ve],C=Mr(y,h);iC(v,h,y,a,null,c);for(let A=0;A<a.length;A++)Gr(Co(h,v,y.directiveStart+A,y),h);sC(v,h,y),C&&Gr(C,h);const D=Co(h,v,y.directiveStart+y.componentOffset,y);if(i[Sn]=h[Sn]=D,null!==f)for(const A of f)A(D,o);return A_(v,y,i),D}(xP,Lo,vl,sm,At,[bM]),la(tt,At,null)}finally{or()}return new yM(this.componentType,tn,Hc(Ci,At),At,Ci)}}class yM extends DA{constructor(o,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new gM(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;gu(f[Ve],f,h,o,a),this.previousInputValues.set(o,a),hh(Hr(this._tNode.index,f))}}get injector(){return new zn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function bM(){const i=ir();Qo(ye()[Ve],i)}function Eh(i){let o=function IC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let h;if(fi(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Y(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=Qp(i.inputs),y.inputTransforms=Qp(i.inputTransforms),y.declaredInputs=Qp(i.declaredInputs),y.outputs=Qp(i.outputs);const v=h.hostBindings;v&&TM(i,v);const C=h.viewQuery,D=h.contentQueries;if(C&&EC(i,C),D&&CC(i,D),H(i.inputs,h.inputs),H(i.declaredInputs,h.declaredInputs),H(i.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),H(y.inputTransforms,h.inputTransforms)),fi(h)&&h.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const v=f[y];v&&v.ngInherit&&v(i),v===Eh&&(a=!1)}}o=Object.getPrototypeOf(o)}!function DM(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Ra(h.hostAttrs,a=Ra(a,h.hostAttrs))}}(c)}function Qp(i){return i===di?{}:i===jt?[]:i}function EC(i,o){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function CC(i,o){const a=i.contentQueries;i.contentQueries=a?(c,h,f)=>{o(c,h,f),a(c,h,f)}:o}function TM(i,o){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function L_(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const h=o[c];Array.isArray(h)&&h[2]&&(a[c]=h[2])}i.inputTransforms=a}function Jp(i){return!!Ch(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Ch(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function io(i,o,a){return i[o]=a}function kr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function yu(i,o,a,c){const h=kr(i,o,a);return kr(i,o+1,c)||h}function U_(i,o,a,c){const h=ye();return kr(h,qa(),o)&&(Ut(),ro(pn(),h,i,o,a,c)),U_}function Kc(i,o,a,c,h,f){const v=yu(i,function $s(){return yt.lFrame.bindingIndex}(),a,h);return Ki(2),v?o+X(a)+c+X(h)+f:bt}function VC(i,o,a,c,h,f,y,v){const C=ye(),D=Ut(),A=i+kt,k=D.firstCreatePass?function GM(i,o,a,c,h,f,y,v,C){const D=o.consts,A=pu(o,i,4,y||null,Bs(D,v));P_(o,a,A,Bs(D,C)),Qo(o,A);const k=A.tView=x_(2,A,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,A),k.queries=o.queries.embeddedTView(A)),A}(A,D,C,o,a,c,h,f,y):D.data[A];Zi(k,!1);const z=BC(D,C,k,i);ws()&&Wd(D,C,z,k),Gr(z,C),Wp(C,C[A]=aC(z,C,z,k)),Va(k)&&M_(D,C,k),null!=y&&_h(C,k,v)}let BC=function jC(i,o,a,c){return Is(!0),o[ft].createComment("")};function $C(i){return Ko(function Iy(){return yt.lFrame.contextLView}(),kt+i)}function q_(i,o,a){const c=ye();return kr(c,qa(),o)&&function Ri(i,o,a,c,h,f,y,v){const C=Mr(o,a);let A,D=o.inputs;!v&&null!=D&&(A=D[c])?(gu(i,a,A,c,h),ps(o)&&function rC(i,o){const a=Hr(o,i);16&a[Et]||(a[Et]|=64)}(a,o.index)):3&o.type&&(c=function QA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Ut(),pn(),c,i,o,c[ft],a,!1),q_}function W_(i,o,a,c,h){const y=h?"class":"style";gu(i,a,o.inputs[y],y,c)}function og(i,o,a,c){const h=ye(),f=Ut(),y=kt+i,v=h[ft],C=f.firstCreatePass?function KM(i,o,a,c,h,f){const y=o.consts,C=pu(o,i,2,c,Bs(y,h));return P_(o,a,C,Bs(y,f)),null!==C.attrs&&Kp(C,C.attrs,!1),null!==C.mergedAttrs&&Kp(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,h,o,a,c):f.data[y],D=HC(f,h,C,v,o,i);h[y]=D;const A=Va(C);return Zi(C,!0),Yd(v,D,C),32!=(32&C.flags)&&ws()&&Wd(f,h,D,C),0===function Zf(){return yt.lFrame.elementDepthCount}()&&Gr(D,h),function Kf(){yt.lFrame.elementDepthCount++}(),A&&(M_(f,h,C),A_(f,C,h)),null!==c&&_h(h,C),og}function ag(){let i=ir();Jf()?function Xf(){yt.lFrame.isParent=!1}():(i=i.parent,Zi(i,!1));const o=i;(function za(i){return yt.skipHydrationRootTNode===i})(o)&&function Qf(){yt.skipHydrationRootTNode=null}(),function vy(){yt.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(Qo(a,i),sd(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Gs(i){return 0!=(8&i.flags)}(o)&&W_(a,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Qa(i){return 0!=(16&i.flags)}(o)&&W_(a,o,ye(),o.stylesWithoutHost,!1),ag}function Z_(i,o,a,c){return og(i,o,a,c),ag(),Z_}let HC=(i,o,a,c,h,f)=>(Is(!0),Cp(c,h,function sp(){return yt.lFrame.currentNamespace}()));function WC(){return ye()}function ug(i){return!!i&&"function"==typeof i.then}function ZC(i){return!!i&&"function"==typeof i.subscribe}function Q_(i,o,a,c){const h=ye(),f=Ut(),y=ir();return function YC(i,o,a,c,h,f,y){const v=Va(c),D=i.firstCreatePass&&lC(i),A=o[Sn],k=cC(o);let z=!0;if(3&c.type||y){const De=Mr(c,o),$e=y?y(De):De,rt=k.length,ce=y?At=>y(Xt(At[c.index])):c.index;let tt=null;if(!y&&v&&(tt=function ex(i,o,a,c){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const v=o[mo],C=h[f+2];return v.length>C?v[C]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,c.index)),null!==tt)(tt.__ngLastListenerFn__||tt).__ngNextListenerFn__=f,tt.__ngLastListenerFn__=f,z=!1;else{f=QC(c,o,A,f,!1);const At=a.listen($e,h,f);k.push(f,At),D&&D.push(h,ce,rt,rt+1)}}else f=QC(c,o,A,f,!1);const Z=c.outputs;let ue;if(z&&null!==Z&&(ue=Z[h])){const De=ue.length;if(De)for(let $e=0;$e<De;$e+=2){const tn=o[ue[$e]][ue[$e+1]].subscribe(f),Ci=k.length;k.push(f,tn),D&&D.push(h,c.index,Ci,-(Ci+1))}}}(f,h,h[ft],y,i,o,c),Q_}function J_(i,o,a,c){try{return Wi(6,o,a),!1!==a(c)}catch(h){return k_(i,h),!1}finally{Wi(7,o,a)}}function QC(i,o,a,c,h){return function f(y){if(y===Function)return c;hh(i.componentOffset>-1?Hr(i.index,o):o);let C=J_(o,a,c,y),D=f.__ngNextListenerFn__;for(;D;)C=J_(o,a,D,y)&&C,D=D.__ngNextListenerFn__;return h&&!1===C&&y.preventDefault(),C}}function JC(i=1){return function fc(i){return(yt.lFrame.contextLView=function Ad(i,o){for(;i>0;)o=o[Xr],i--;return o}(i,yt.lFrame.contextLView))[Sn]}(i)}function cg(i,o){return i<<17|o<<2}function da(i){return i>>17&32767}function rv(i){return 2|i}function Iu(i){return(131068&i)>>2}function iv(i,o){return-131069&i|o<<2}function sv(i){return 1|i}function sb(i,o,a,c,h){const f=i[a+1],y=null===o;let v=c?da(f):Iu(f),C=!1;for(;0!==v&&(!1===C||y);){const A=i[v+1];cx(i[v],o)&&(C=!0,i[v+1]=c?sv(A):rv(A)),v=c?da(A):Iu(A)}C&&(i[a+1]=c?rv(f):sv(f))}function cx(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ia(i,o)>=0}const ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ln(i){return i.substring(ur.key,ur.keyEnd)}function ob(i,o){const a=ur.textEnd;return a===o?-1:(o=ur.keyEnd=function hx(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,ur.key=o,a),xn(i,o,a))}function xn(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function ov(i,o){return function As(i,o,a,c){const h=ye(),f=Ut(),y=Ki(2);f.firstUpdatePass&&db(f,i,y,c),o!==bt&&kr(h,y,o)&&fb(f,f.data[Or()],h,h[ft],i,h[y+1]=function Ix(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=K(oa(i)))),i}(o,a),c,y)}(i,o,null,!0),ov}function ha(i){!function Ms(i,o,a,c){const h=Ut(),f=Ki(2);h.firstUpdatePass&&db(h,null,f,c);const y=ye();if(a!==bt&&kr(y,f,a)){const v=h.data[Or()];if(gb(v,c)&&!lb(h,f)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(a=Me(C,a||"")),W_(h,v,y,a,c)}else!function wx(i,o,a,c,h,f,y,v){h===bt&&(h=jt);let C=0,D=0,A=0<h.length?h[0]:null,k=0<f.length?f[0]:null;for(;null!==A||null!==k;){const z=C<h.length?h[C+1]:void 0,Z=D<f.length?f[D+1]:void 0;let De,ue=null;A===k?(C+=2,D+=2,z!==Z&&(ue=k,De=Z)):null===k||null!==A&&A<k?(C+=2,ue=A):(D+=2,ue=k,De=Z),null!==ue&&fb(i,o,a,c,ue,De,y,v),A=C<h.length?h[C]:null,k=D<f.length?f[D]:null}}(h,v,y,y[ft],y[f+1],y[f+1]=function _x(i,o,a){if(null==a||""===a)return jt;const c=[],h=oa(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(i,o,a),c,f)}}(vx,so,i,!0)}function so(i,o){for(let a=function lx(i){return function Mh(i){ur.key=0,ur.keyEnd=0,ur.value=0,ur.valueEnd=0,ur.textEnd=i.length}(i),ob(i,xn(i,0,ur.textEnd))}(o);a>=0;a=ob(o,a))ni(i,ln(o),!0)}function lb(i,o){return o>=i.expandoStartIndex}function db(i,o,a,c){const h=i.data;if(null===h[a+1]){const f=h[Or()],y=lb(i,a);gb(f,c)&&null===o&&!y&&(o=!1),o=function px(i,o,a,c){const h=function Td(i){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=xh(a=av(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=av(h,i,o,a,c),null===f){let C=function gx(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Iu(c))return i[da(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=av(null,i,o,C[1],c),C=xh(C,o.attrs,c),function mx(i,o,a,c){i[da(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else f=function yx(i,o,a){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=xh(c,i[f].hostAttrs,a);return xh(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,c),function ax(i,o,a,c,h,f){let y=f?o.classBindings:o.styleBindings,v=da(y),C=Iu(y);i[c]=a;let A,D=!1;if(Array.isArray(a)?(A=a[1],(null===A||ia(a,A)>0)&&(D=!0)):A=a,h)if(0!==C){const z=da(i[v+1]);i[c+1]=cg(z,v),0!==z&&(i[z+1]=iv(i[z+1],c)),i[v+1]=function sx(i,o){return 131071&i|o<<17}(i[v+1],c)}else i[c+1]=cg(v,0),0!==v&&(i[v+1]=iv(i[v+1],c)),v=c;else i[c+1]=cg(C,0),0===v?v=c:i[C+1]=iv(i[C+1],c),C=c;D&&(i[c+1]=rv(i[c+1])),sb(i,A,c,!0),sb(i,A,c,!1),function ux(i,o,a,c,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ia(f,o)>=0&&(a[c+1]=sv(a[c+1]))}(o,A,i,c,f),y=cg(v,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,c)}}function av(i,o,a,c,h){let f=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(f=o[v],c=xh(c,f.hostAttrs,h),f!==i);)v++;return null!==i&&(a.directiveStylingLast=v),c}function xh(i,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ni(i,y,!!a||o[++f]))}return void 0===i?null:i}function vx(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&ni(i,c,a)}function fb(i,o,a,c,h,f,y,v){if(!(3&o.type))return;const C=i.data,D=C[v+1],A=function ox(i){return 1==(1&i)}(D)?pb(C,o,a,h,Iu(D),y):void 0;dg(A)||(dg(f)||function ix(i){return 2==(2&i)}(D)&&(f=pb(C,null,a,h,v,y)),function qS(i,o,a,c,h){if(o)h?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Ud.DashCase;null==h?i.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=Ud.Important),i.setStyle(a,c,h,f))}}(c,y,ys(Or(),a),h,f))}function pb(i,o,a,c,h,f){const y=null===o;let v;for(;h>0;){const C=i[h],D=Array.isArray(C),A=D?C[1]:C,k=null===A;let z=a[h+1];z===bt&&(z=k?jt:void 0);let Z=k?kd(z,c):A===c?z:void 0;if(D&&!dg(Z)&&(Z=kd(C,c)),dg(Z)&&(v=Z,y))return v;const ue=i[h+1];h=y?da(ue):Iu(ue)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(v=kd(C,c))}return v}function dg(i){return void 0!==i}function gb(i,o){return 0!=(i.flags&(o?8:16))}function mb(i,o=""){const a=ye(),c=Ut(),h=i+kt,f=c.firstCreatePass?pu(c,h,1,o,null):c.data[h],y=yb(c,a,f,o,i);a[h]=y,ws()&&Wd(c,a,y,f),Zi(f,!1)}let yb=(i,o,a,c,h)=>(Is(!0),function Ep(i,o){return i.createText(o)}(o[ft],c));function uv(i){return Eu("",i,""),uv}function Eu(i,o,a){const c=ye(),h=function Zc(i,o,a,c){return kr(i,qa(),a)?o+X(a)+c:bt}(c,i,o,a);return h!==bt&&Po(c,Or(),h),Eu}function cv(i,o,a,c,h){const f=ye(),y=Kc(f,i,o,a,c,h);return y!==bt&&Po(f,Or(),y),cv}const pa=void 0;var Nx=["en",[["a","p"],["AM","PM"],pa],[["AM","PM"],pa,pa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pa,"{1} 'at' {0}",pa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Px(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Cu={};function gv(i){const o=function yv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=pg(o);if(a)return a;const c=o.split("-")[0];if(a=pg(c),a)return a;if("en"===c)return Nx;throw new Y(701,!1)}function mv(i){return gv(i)[ga.PluralCase]}function pg(i){return i in Cu||(Cu[i]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[i]),Cu[i]}var ga=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(ga||{});const ma="en-US";let Ab=ma;function kv(i,o,a,c,h){if(i=_e(i),Array.isArray(i))for(let f=0;f<i.length;f++)kv(i[f],o,a,c,h);else{const f=Ut(),y=ye(),v=ir();let C=Uc(i)?i:_e(i.provide);const D=Lp(i),A=1048575&v.providerIndexes,k=v.directiveStart,z=v.providerIndexes>>20;if(Uc(i)||!i.multi){const Z=new vo(D,h,no),ue=Lh(C,o,h?A:A+z,k);-1===ue?(ea(En(v,y),f,C),Fh(f,i,o.length),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[ue]=Z,y[ue]=Z)}else{const Z=Lh(C,o,A+z,k),ue=Lh(C,o,A,A+z),$e=ue>=0&&a[ue];if(h&&!$e||!h&&!(Z>=0&&a[Z])){ea(En(v,y),f,C);const rt=function TF(i,o,a,c,h){const f=new vo(i,a,no);return f.multi=[],f.index=o,f.componentProviders=0,Xb(f,h,c&&!a),f}(h?Fv:rO,a.length,h,c,D);!h&&$e&&(a[ue].providerFactory=rt),Fh(f,i,o.length,0),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(rt),y.push(rt)}else Fh(f,i,Z>-1?Z:ue,Xb(a[h?ue:Z],D,!h&&c));!h&&c&&$e&&a[ue].componentProviders++}}}function Fh(i,o,a,c){const h=Uc(o),f=function zk(i){return!!i.useClass}(o);if(h||f){const C=(f?_e(o.useClass):o).prototype.ngOnDestroy;if(C){const D=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const A=D.indexOf(a);-1===A?D.push(a,[c,C]):D[A+1].push(c,C)}else D.push(a,C)}}}function Xb(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Lh(i,o,a,c){for(let h=a;h<c;h++)if(o[h]===i)return h;return-1}function rO(i,o,a,c){return Lv(this.multi,[])}function Fv(i,o,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=Co(a,a[Ve],this.providerFactory.index,c);f=v.slice(0,y),Lv(h,f);for(let C=y;C<v.length;C++)f.push(v[C])}else f=[],Lv(h,f);return f}function Lv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Sg(i,o=[]){return a=>{a.providersResolver=(c,h)=>function Rv(i,o,a){const c=Ut();if(c.firstCreatePass){const h=fi(i);kv(a,c.data,c.blueprint,h,!0),kv(o,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,o)}}class ol{}class iO{}function sO(i,o){return new Ag(i,o??null,[])}class Ag extends ol{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _C(this);const h=br(o);this._bootstrapComponents=Oo(h.bootstrap),this._r3Injector=AE(o,a,[{provide:ol,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver},...c],K(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uv extends iO{constructor(o){super(),this.moduleType=o}create(o){return new Ag(this.moduleType,o,[])}}class tD extends ol{constructor(o){super(),this.componentFactoryResolver=new _C(this),this.instance=null;const a=new rh([...o.providers,{provide:ol,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver}],o.parent||hu(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function nD(i,o,a=null){return new tD({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Vv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=hE(0,a.type),h=c.length>0?nD([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ht({token:i,providedIn:"environment",factory:()=>new i(Ue(eo))})}return i})();function Bv(i){i.getStandaloneInjector=o=>o.get(Vv).getOrCreateStandaloneInjector(i)}function dO(i,o,a){const c=sr()+i,h=ye();return h[c]===bt?io(h,c,a?o.call(a):o()):function bh(i,o){return i[o]}(h,c)}function hO(i,o,a,c){return aD(ye(),sr(),i,o,a,c)}function Uh(i,o){const a=i[o];return a===bt?void 0:a}function aD(i,o,a,c,h,f){const y=o+a;return kr(i,y,h)?io(i,y+1,f?c.call(f,h):c(h)):Uh(i,y+1)}function cD(i,o,a,c,h,f,y,v){const C=o+a;return function Dh(i,o,a,c,h){const f=yu(i,o,a,c);return kr(i,o+2,h)||f}(i,C,h,f,y)?io(i,C+3,v?c.call(v,h,f,y):c(h,f,y)):Uh(i,C+3)}function ya(i,o){const a=Ut();let c;const h=i+kt;a.firstCreatePass?(c=function _O(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??=[]).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=gs(c.type)),v=Jt(no);try{const C=ar(!1),D=f();return ar(C),function ZM(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,ye(),h,D),D}finally{Jt(v)}}function dD(i,o,a){const c=i+kt,h=ye(),f=Ko(h,c);return Bh(h,c)?aD(h,sr(),o,f.transform,a,f):f.transform(a)}function hD(i,o,a,c,h){const f=i+kt,y=ye(),v=Ko(y,f);return Bh(y,f)?cD(y,sr(),o,v.transform,a,c,h,v):v.transform(a,c,h)}function Bh(i,o){return i[Ve].data[o].pure}function qv(){return this._results[Symbol.iterator]()}class Wv{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new to)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=qv)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function Rr(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function pp(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],f=o[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function IO(i,o,a,c=!0){const h=o[Ve];if(function BS(i,o,a,c){const h=$n+c,f=a.length;c>0&&(a[h-1][Jr]=o),c<f-$n?(o[Jr]=a[h],Ay(a,$n+c,o)):(a.push(o),o[Jr]=null),o[an]=a;const y=o[Ho];null!==y&&a!==y&&function jS(i,o){const a=i[zo];o[jn]!==o[an][an][jn]&&(i[La]=!0),null===a?i[zo]=[o]:a.push(o)}(y,o);const v=o[Dr];null!==v&&v.insertView(i),o[Et]|=128}(h,o,i,a),c){const f=qy(a,i),y=o[ft],v=Dp(y,i[Tr]);null!==v&&function zd(i,o,a,c,h,f){c[mn]=h,c[rr]=o,Kd(i,c,a,1,h,f)}(h,i[rr],y,o,v,f)}}let al=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Kv}return i})();const Zv=al,pD=class extends Zv{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const h=function fD(i,o,a,c){const h=o.tView,v=mh(i,h,a,4096&i[Et]?4096:16,null,o,null,null,null,c?.injector??null,c?.hydrationInfo??null);v[Ho]=i[o.index];const D=i[Dr];return null!==D&&(v[Dr]=D.createEmbeddedView(h)),la(h,v,a),v}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:c});return new Ih(h)}};function Kv(){return ul(ir(),ye())}function ul(i,o){return 4&i.type?new pD(o,i,Hc(i,o)):null}let Rg=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=DO}return i})();function DO(){return e0(ir(),ye())}const Qv=Rg,Jv=class extends Qv{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Hc(this._hostTNode,this._hostLView)}get injector(){return new zn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Io(this._hostTNode,this._hostLView);if(mc(o)){const a=en(o,this._hostLView),c=ti(o);return new zn(a[Ve].data[c+8],a)}return new zn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=yD(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(o,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const v=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(v,h,false),v}createComponent(o,a,c,h,f){const y=o&&!function bs(i){return"function"==typeof i}(o);let v;if(y)v=a;else{const De=a||{};v=De.index,c=De.injector,h=De.projectableNodes,f=De.environmentInjector||De.ngModuleRef}const C=y?o:new mu(Rt(o)),D=c||this.parentInjector;if(!f&&null==C.ngModule){const $e=(y?D:this.parentInjector).get(eo,null);$e&&(f=$e)}Rt(C.componentType??{});const Z=C.create(D,h,null,f);return this.insertImpl(Z.hostView,v,false),Z}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const h=o._lView;if(function lc(i){return fr(i[an])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const D=h[an],A=new Jv(D,D[rr],D[an]);A.detach(A.indexOf(o))}}const y=this._adjustIndex(a),v=this._lContainer;return IO(v,h,y,!c),o.attachToViewContainerRef(),Ay(Xv(v),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=yD(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=bp(this._lContainer,a);c&&(ra(Xv(this._lContainer),a),$y(c[Ve],c))}detach(o){const a=this._adjustIndex(o,-1),c=bp(this._lContainer,a);return c&&null!=ra(Xv(this._lContainer),a)?new Ih(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function yD(i){return i[8]}function Xv(i){return i[8]||(i[8]=[])}function e0(i,o){let a;const c=o[i.index];return fr(c)?a=c:(a=aC(c,o,null,i),o[i.index]=a,Wp(o,a)),t0(a,o,i,c),new Jv(a,i,o)}let t0=function _D(i,o,a,c){if(i[Tr])return;let h;h=8&a.type?Xt(c):function TO(i,o){const a=i[ft],c=a.createComment(""),h=Mr(o,i);return lu(a,Dp(a,h),c,function zS(i,o){return i.nextSibling(o)}(a,h),!1),c}(o,a),i[Tr]=h};class n0{constructor(o){this.queryList=o,this.matches=null}clone(){return new n0(this.queryList)}setDirty(){this.queryList.setDirty()}}class cl{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new cl(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==CD(o,a).matches&&this.queries[a].setDirty()}}class uo{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class r0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new r0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class jh{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new jh(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,a,MO(a,f)),this.matchTNodeWithReadOption(o,a,Ws(a,o,f,!1,!1))}else c===al?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ws(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===ch||h===Rg||h===al&&4&a.type)this.addMatch(a.index,-2);else{const f=Ws(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function MO(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function xO(i,o,a,c){return-1===a?function vD(i,o){return 11&i.type?Hc(i,o):4&i.type?ul(i,o):null}(o,i):-2===a?function s0(i,o,a){return a===ch?Hc(o,i):a===al?ul(o,i):a===Rg?e0(o,i):void 0}(i,o,c):Co(i,i[Ve],a,o)}function wD(i,o,a,c){const h=o[Dr].queries[c];if(null===h.matches){const f=i.data,y=a.matches,v=[];for(let C=0;C<y.length;C+=2){const D=y[C];v.push(D<0?null:xO(o,f[D],y[C+1],a.metadata.read))}h.matches=v}return h.matches}function o0(i,o,a,c){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=wD(i,o,h,a);for(let v=0;v<f.length;v+=2){const C=f[v];if(C>0)c.push(y[v/2]);else{const D=f[v+1],A=o[-C];for(let k=$n;k<A.length;k++){const z=A[k];z[Ho]===z[an]&&o0(z[Ve],z,D,c)}if(null!==A[zo]){const k=A[zo];for(let z=0;z<k.length;z++){const Z=k[z];o0(Z[Ve],Z,D,c)}}}}}return c}function ID(i){const o=ye(),a=Ut(),c=by();rp(c+1);const h=CD(a,c);if(i.dirty&&function Ed(i){return 4==(4&i[Et])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?o0(a,o,c,[]):wD(a,o,h,c);i.reset(f,SA),i.notifyOnChanges()}return!0}return!1}function kg(i,o,a,c){const h=Ut();if(h.firstCreatePass){const f=ir();(function Ug(i,o,a){null===i.queries&&(i.queries=new r0),i.queries.track(new jh(o,a))})(h,new uo(o,a,c),f.index),function a0(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Lg(i,o,a){const c=new Wv(4==(4&a));(function eC(i,o,a,c){const h=cC(o);h.push(a),i.firstCreatePass&&lC(i).push(c,h.length-1)})(i,o,c,c.destroy),null===o[Dr]&&(o[Dr]=new cl),o[Dr].queries.push(new n0(c))}(h,ye(),a)}function Fg(){return function ED(i,o){return i[Dr].queries[o].queryList}(ye(),by())}function CD(i,o){return i.queries.getByIndex(o)}function Vg(i,o){return ul(i,o)}function jg(i){return!!br(i)}const HD=new rn("Application Initializer");let E0=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=qe(HD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const f=h();if(ug(f))a.push(f);else if(ZC(f)){const y=new Promise((v,C)=>{f.subscribe({complete:v,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const qn=new rn("LocaleId",{providedIn:"root",factory:()=>qe(qn,dt.Optional|dt.SkipSelf)||function C0(){return typeof $localize<"u"&&$localize.locale||ma}()}),jO=new rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let qD=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class $O{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let HO=(()=>{class i{compileModuleSync(a){return new Uv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Oo(br(a).declarations).reduce((y,v)=>{const C=Rt(v);return C&&y.push(new mu(C)),y},[]);return new $O(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Kg=new rn(""),JD=new rn("");let zh,x0=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zh||(function O0(i){zh=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Ue(mr),Ue(XD),Ue(JD))};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac})}return i})(),XD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return zh?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),ko=null;const P0=new rn("AllowMultipleToken"),N0=new rn("PlatformDestroyListeners"),Gh=new rn("appBootstrapListener");class nT{constructor(o,a){this.name=o,this.token=a}}function xs(i,o,a=[]){const c=`Platform: ${o}`,h=new rn(c);return(f=[])=>{let y=F0();if(!y||y.injector.get(P0,!1)){const v=[...a,...f,{provide:h,useValue:!0}];i?i(v):function rT(i){if(ko&&!ko.get(P0,!1))throw new Y(400,!1);(function tT(){!function jf(i){hy=i}(()=>{throw new Y(600,!1)})})(),ko=i;const o=i.get(oP);(function R0(i){i.get(yE,null)?.forEach(a=>a())})(i)}(function sP(i=[],o){return Ss.create({name:o,providers:[{provide:$,useValue:"platform"},{provide:N0,useValue:new Set([()=>ko=null])},...i]})}(v,c))}return function k0(i){const o=F0();if(!o)throw new Y(401,!1);return o}()}}function F0(){return ko?.get(oP)??null}let oP=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function aP(i="zone.js",o){return"noop"===i?new UA:"zone.js"===i?new mr(o):i}(c?.ngZone,function iT(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return h.run(()=>{const f=function oO(i,o,a){return new Ag(i,o,a)}(a.moduleType,this.injector,function dP(i){return[{provide:mr,useFactory:i},{provide:Lc,multi:!0,useFactory:()=>{const o=qe(HF,{optional:!0});return()=>o.initialize()}},{provide:lP,useFactory:$F},{provide:NE,useFactory:RE}]}(()=>h)),y=f.injector.get(_i,null);return h.runOutsideAngular(()=>{const v=h.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{hl(this._modules,f),v.unsubscribe()})}),function Qg(i,o,a){try{const c=a();return ug(c)?c.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,h,()=>{const v=f.injector.get(E0);return v.runInitializers(),v.donePromise.then(()=>(function Vx(i){Ke(i,"Expected localeId to be defined"),"string"==typeof i&&(Ab=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(qn,ma)||ma),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const h=uP({},c);return function rP(i,o,a){const c=new Uv(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(qh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Y(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(N0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Ue(Ss))};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function uP(i,o){return Array.isArray(o)?o.reduce(uP,i):{...i,...o}}let qh=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(lP),this.zoneIsStable=qe(NE),this.componentTypes=[],this.components=[],this.isStable=qe(qD).hasPendingTasks.pipe((0,Ne.w)(a=>a?(0,Ie.of)(!1):this.zoneIsStable),(0,be.x)(),(0,Oe.B)()),this._injector=qe(eo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof IE;if(!this._injector.get(E0).done)throw!h&&$o(a),new Y(405,!1);let y;y=h?a:this._injector.get(Hp).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const v=function co(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ol),D=y.create(Ss.NULL,[],c||y.selector,v),A=D.location.nativeElement,k=D.injector.get(Kg,null);return k?.registerApplication(A),D.onDestroy(()=>{this.detachView(D.hostView),hl(this.components,D),k?.unregisterApplication(A)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;hl(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Gh,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>hl(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Y(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function hl(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const lP=new rn("",{providedIn:"root",factory:()=>qe(_i).handleError.bind(void 0)});function $F(){const i=qe(mr),o=qe(_i);return a=>i.runOutsideAngular(()=>o.handleError(a))}let HF=(()=>{class i{constructor(){this.zone=qe(mr),this.applicationRef=qe(qh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function oT(){return!1}let ZF=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Wh}return i})();function Wh(i){return function fl(i,o,a){if(ps(i)&&!a){const c=Hr(i.index,o);return new Ih(c,c)}return 47&i.type?new Ih(o[jn],o):null}(ir(),ye(),16==(16&i))}class fP{constructor(){}supports(o){return Jp(o)}create(o){return new pP(o)}}const ki=(i,o)=>o;class pP{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ki}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<fT(c,h,f)?a:c,v=fT(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const D=v-h,A=C-h;if(D!=A){for(let z=0;z<D;z++){const Z=z<f.length?f[z]:f[z]=0,ue=Z+z;A<=ue&&ue<D&&(f[z]=Z+1)}f[y.previousIndex]=A-D}}v!==C&&o(y,v,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Jp(o))throw new Y(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)f=o[v],y=this._trackByFn(v,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,v)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,v),c=!0),a=a._next}else h=0,function xM(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,v=>{y=this._trackByFn(h,v),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,v,y,h)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new gP(a,c),f,h),o}_verifyReinsertion(o,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Xg),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class gP{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Kh{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Xg{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Kh,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fT(i,o,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class rs{constructor(){}supports(o){return o instanceof Map||Ch(o)}create(){return new YF}}class YF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Ch(o)))throw new Y(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new mP(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class mP{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pT(){return new Fi([new fP])}let Fi=(()=>{class i{static#e=this.\u0275prov=ht({token:i,providedIn:"root",factory:pT});constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||pT()),deps:[[i,new Be,new ne]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Y(901,!1)}}return i})();function em(){return new It([new rs])}let It=(()=>{class i{static#e=this.\u0275prov=ht({token:i,providedIn:"root",factory:em});constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||em()),deps:[[i,new Be,new ne]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new Y(901,!1)}}return i})();const yP=xs(null,"core",[]);let _P=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Ue(qh))};static#t=this.\u0275mod=Ku({type:i});static#n=this.\u0275inj=Dn({})}return i})();function z0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function SP(i){const o=Rt(i);if(!o)return null;const a=new mu(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(it,we,N)=>{N.d(we,{Z:()=>Ye});var d=N(9058),U=N(4537),R=N(7592),Q=N(7879);class pe{constructor(Te,Ce){this._delegate=Te,this.firebase=Ce,(0,R._addComponent)(Te,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(Te,Ce=R._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Te);return!ot.isInitialized()&&"EXPLICIT"===(null===(Xe=ot.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Ce})}_removeServiceInstance(Te,Ce=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(Ce)}_addComponent(Te){(0,R._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,R._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function be(){const _e=function Ne(_e){const Te={},Ce={__esModule:!0,initializeApp:function Y(Pe,V={}){const ve=R.initializeApp(Pe,V);if((0,d.r3)(Te,ve.name))return Te[ve.name];const ke=new _e(ve,Ce);return Te[ve.name]=ke,ke},app:ot,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function X(Pe){const V=Pe.name,ve=V.replace("-compat","");if(R._registerComponent(Pe)&&"PUBLIC"===Pe.type){const ke=(at=ot())=>{if("function"!=typeof at[ve])throw Oe.create("invalid-app-argument",{appName:V});return at[ve]()};void 0!==Pe.serviceProps&&(0,d.ZB)(ke,Pe.serviceProps),Ce[ve]=ke,_e.prototype[ve]=function(...at){return this._getService.bind(this,V).apply(this,Pe.multipleInstances?at:[])}}return"PUBLIC"===Pe.type?Ce[ve]:null},removeApp:function Xe(Pe){delete Te[Pe]},useAsService:function he(Pe,V){return"serverAuth"===V?null:V},modularAPIs:R}};function ot(Pe){if(!(0,d.r3)(Te,Pe=Pe||R._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:Pe});return Te[Pe]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function de(){return Object.keys(Te).map(Pe=>Te[Pe])}}),ot.App=_e,Ce}(pe);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Te(Ce){(0,d.ZB)(_e,Ce)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),_e}(),H=new Q.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=L;!function Se(_e){(0,R.registerVersion)("@firebase/app-compat","0.2.13",_e)}()},7592:(it,we,N)=>{N.r(we),N.d(we,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>ee,_addComponent:()=>fe,_addOrOverwriteComponent:()=>xe,_apps:()=>oe,_clearComponents:()=>gt,_components:()=>te,_getProvider:()=>Le,_registerComponent:()=>Ke,_removeServiceInstance:()=>nn,deleteApp:()=>Yr,getApp:()=>Qt,getApps:()=>Fn,initializeApp:()=>yn,onLog:()=>Tn,registerVersion:()=>Wn,setLogLevel:()=>Er});var d=N(5861),U=N(4537),R=N(7879),Q=N(9058),pe=N(1878);class Ie{constructor(me){this.container=me}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function Oe(je){const me=je.getComponent();return"VERSION"===me?.type}(Qe)){const st=Qe.getImmediate();return`${st.library}/${st.version}`}return null}).filter(Qe=>Qe).join(" ")}}const Ne="@firebase/app",L=new R.Yd("@firebase/app"),ee="[DEFAULT]",se={[Ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},oe=new Map,te=new Map;function fe(je,me){try{je.container.addComponent(me)}catch(Qe){L.debug(`Component ${me.name} failed to register with FirebaseApp ${je.name}`,Qe)}}function xe(je,me){je.container.addOrOverwriteComponent(me)}function Ke(je){const me=je.name;if(te.has(me))return L.debug(`There were multiple attempts to register component ${me}.`),!1;te.set(me,je);for(const Qe of oe.values())fe(Qe,je);return!0}function Le(je,me){const Qe=je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),je.container.getProvider(me)}function nn(je,me,Qe=ee){Le(je,me).clearInstance(Qe)}function gt(){te.clear()}const ht=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yt{constructor(me,Qe,st){this._isDeleted=!1,this._options=Object.assign({},me),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=st,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this.checkDestroyed(),this._automaticDataCollectionEnabled=me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(me){this._isDeleted=me}checkDestroyed(){if(this.isDeleted)throw ht.create("app-deleted",{appName:this._name})}}const Dn="9.23.0";function yn(je,me={}){let Qe=je;"object"!=typeof me&&(me={name:me});const st=Object.assign({name:ee,automaticDataCollectionEnabled:!1},me),Nt=st.name;if("string"!=typeof Nt||!Nt)throw ht.create("bad-app-name",{appName:String(Nt)});if(Qe||(Qe=(0,Q.aH)()),!Qe)throw ht.create("no-options");const Lt=oe.get(Nt);if(Lt){if((0,Q.vZ)(Qe,Lt.options)&&(0,Q.vZ)(st,Lt.config))return Lt;throw ht.create("duplicate-app",{appName:Nt})}const Ln=new U.H0(Nt);for(const B of te.values())Ln.addComponent(B);const j=new Yt(Qe,st,Ln);return oe.set(Nt,j),j}function Qt(je=ee){const me=oe.get(je);if(!me&&je===ee&&(0,Q.aH)())return yn();if(!me)throw ht.create("no-app",{appName:je});return me}function Fn(){return Array.from(oe.values())}function Yr(je){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(je){const me=je.name;oe.has(me)&&(oe.delete(me),yield Promise.all(je.container.getProviders().map(Qe=>Qe.delete())),je.isDeleted=!0)})).apply(this,arguments)}function Wn(je,me,Qe){var st;let Nt=null!==(st=se[je])&&void 0!==st?st:je;Qe&&(Nt+=`-${Qe}`);const Lt=Nt.match(/\s|\//),Ln=me.match(/\s|\//);if(Lt||Ln){const j=[`Unable to register library "${Nt}" with version "${me}":`];return Lt&&j.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Lt&&Ln&&j.push("and"),Ln&&j.push(`version name "${me}" contains illegal characters (whitespace or "/")`),void L.warn(j.join(" "))}Ke(new U.wA(`${Nt}-version`,()=>({library:Nt,version:me}),"VERSION"))}function Tn(je,me){if(null!==je&&"function"!=typeof je)throw ht.create("invalid-log-argument");(0,R.Am)(je,me)}function Er(je){(0,R.Ub)(je)}const Hi="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let St=null;function Jt(){return St||(St=(0,pe.X3)(Hi,dt,{upgrade:(je,me)=>{0===me&&je.createObjectStore(mt)}}).catch(je=>{throw ht.create("idb-open",{originalErrorMessage:je.message})})),St}function Cr(){return(Cr=(0,d.Z)(function*(je){try{return yield(yield Jt()).transaction(mt).objectStore(mt).get(zi(je))}catch(me){if(me instanceof Q.ZR)L.warn(me.message);else{const Qe=ht.create("idb-get",{originalErrorMessage:me?.message});L.warn(Qe.message)}}})).apply(this,arguments)}function Pt(je,me){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(je,me){try{const st=(yield Jt()).transaction(mt,"readwrite");yield st.objectStore(mt).put(me,zi(je)),yield st.done}catch(Qe){if(Qe instanceof Q.ZR)L.warn(Qe.message);else{const st=ht.create("idb-set",{originalErrorMessage:Qe?.message});L.warn(st.message)}}})).apply(this,arguments)}function zi(je){return`${je.name}!${je.options.appId}`}class Ft{constructor(me){this.container=me,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new Gi(Qe),this._heartbeatsCachePromise=this._storage.read().then(st=>(this._heartbeatsCache=st,st))}triggerHeartbeat(){var me=this;return(0,d.Z)(function*(){const st=me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=vn();if(null===me._heartbeatsCache&&(me._heartbeatsCache=yield me._heartbeatsCachePromise),me._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!me._heartbeatsCache.heartbeats.some(Lt=>Lt.date===Nt))return me._heartbeatsCache.heartbeats.push({date:Nt,agent:st}),me._heartbeatsCache.heartbeats=me._heartbeatsCache.heartbeats.filter(Lt=>{const Ln=new Date(Lt.date).valueOf();return Date.now()-Ln<=2592e6}),me._storage.overwrite(me._heartbeatsCache)})()}getHeartbeatsHeader(){var me=this;return(0,d.Z)(function*(){if(null===me._heartbeatsCache&&(yield me._heartbeatsCachePromise),null===me._heartbeatsCache||0===me._heartbeatsCache.heartbeats.length)return"";const Qe=vn(),{heartbeatsToSend:st,unsentEntries:Nt}=function Ai(je,me=1024){const Qe=[];let st=je.slice();for(const Nt of je){const Lt=Qe.find(Ln=>Ln.agent===Nt.agent);if(Lt){if(Lt.dates.push(Nt.date),Mi(Qe)>me){Lt.dates.pop();break}}else if(Qe.push({agent:Nt.agent,dates:[Nt.date]}),Mi(Qe)>me){Qe.pop();break}st=st.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:st}}(me._heartbeatsCache.heartbeats),Lt=(0,Q.L)(JSON.stringify({version:2,heartbeats:st}));return me._heartbeatsCache.lastSentHeartbeatDate=Qe,Nt.length>0?(me._heartbeatsCache.heartbeats=Nt,yield me._storage.overwrite(me._heartbeatsCache)):(me._heartbeatsCache.heartbeats=[],me._storage.overwrite(me._heartbeatsCache)),Lt})()}}function vn(){return(new Date).toISOString().substring(0,10)}class Gi{constructor(me){this.app=me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var me=this;return(0,d.Z)(function*(){return(yield me._canUseIndexedDBPromise)&&(yield function Br(je){return Cr.apply(this,arguments)}(me.app))||{heartbeats:[]}})()}overwrite(me){var Qe=this;return(0,d.Z)(function*(){var st;if(yield Qe._canUseIndexedDBPromise){const Lt=yield Qe.read();return Pt(Qe.app,{lastSentHeartbeatDate:null!==(st=me.lastSentHeartbeatDate)&&void 0!==st?st:Lt.lastSentHeartbeatDate,heartbeats:me.heartbeats})}})()}add(me){var Qe=this;return(0,d.Z)(function*(){var st;if(yield Qe._canUseIndexedDBPromise){const Lt=yield Qe.read();return Pt(Qe.app,{lastSentHeartbeatDate:null!==(st=me.lastSentHeartbeatDate)&&void 0!==st?st:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...me.heartbeats]})}})()}}function Mi(je){return(0,Q.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Zn(je){Ke(new U.wA("platform-logger",me=>new Ie(me),"PRIVATE")),Ke(new U.wA("heartbeat",me=>new Ft(me),"PRIVATE")),Wn(Ne,"0.9.13",je),Wn(Ne,"0.9.13","esm2017"),Wn("fire-js","")}("")},120:(it,we,N)=>{N.d(we,{Z:()=>d.Z});var d=N(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(it,we,N)=>{N.r(we);var d=N(5861),U=N(3399),R=N(6710),Q=N(9058),Oe=(N(7592),N(7879),N(4537));function Ne(){return window}function H(){return H=(0,d.Z)(function*(O,P,M){var W;const{BuildInfo:ge}=Ne();(0,R.as)(P.sessionId,"AuthEvent did not contain a session ID");const Ue=yield function Ce(O){return Xe.apply(this,arguments)}(P.sessionId),_t={};return(0,R.at)()?_t.ibi=ge.packageName:(0,R.au)()?_t.apn=ge.packageName:(0,R.av)(O,"operation-not-supported-in-this-environment"),ge.displayName&&(_t.appDisplayName=ge.displayName),_t.sessionId=Ue,(0,R.aw)(O,M,P.type,void 0,null!==(W=P.eventId)&&void 0!==W?W:void 0,_t)}),H.apply(this,arguments)}function Me(){return(Me=(0,d.Z)(function*(O){const{BuildInfo:P}=Ne(),M={};(0,R.at)()?M.iosBundleId=P.packageName:(0,R.au)()?M.androidPackageName=P.packageName:(0,R.av)(O,"operation-not-supported-in-this-environment"),yield(0,R.ax)(O,M)})).apply(this,arguments)}function _e(){return(_e=(0,d.Z)(function*(O,P,M){const{cordova:W}=Ne();let ge=()=>{};try{yield new Promise((Ue,_t)=>{let qe=null;function zt(){var Mt;Ue();const li=null===(Mt=W.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof li&&li(),"function"==typeof M?.close&&M.close()}function vt(){qe||(qe=window.setTimeout(()=>{_t((0,R.az)(O,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===document?.visibilityState&&vt()}P.addPassiveListener(zt),document.addEventListener("resume",vt,!1),(0,R.au)()&&document.addEventListener("visibilitychange",on,!1),ge=()=>{P.removePassiveListener(zt),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",on,!1),qe&&window.clearTimeout(qe)}})}finally{ge()}})).apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(O){const P=function ot(O){if((0,R.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const P=new ArrayBuffer(O.length),M=new Uint8Array(P);for(let W=0;W<O.length;W++)M[W]=O.charCodeAt(W);return M}(O),M=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(M)).map(ge=>ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends R.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(P)),super.onEvent(P)}initialized(){var P=this;return(0,d.Z)(function*(){yield P.initPromise})()}}function Pe(O){return V.apply(this,arguments)}function V(){return(V=(0,d.Z)(function*(O){const P=yield at()._get(Kt(O));return P&&(yield at()._remove(Kt(O))),P})).apply(this,arguments)}function ke(){const O=[];for(let M=0;M<20;M++){const W=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(W))}return O.join("")}function at(){return(0,R.aC)(R.b)}function Kt(O){return(0,R.aD)("authEvent",O.config.apiKey,O.name)}function gn(O){if(!O?.includes("?"))return{};const[P,...M]=O.split("?");return(0,Q.zd)(M.join("?"))}const ee=class wr{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(P){var M=this;return(0,d.Z)(function*(){const W=P._key();let ge=M.eventManagers.get(W);return ge||(ge=new de(P),M.eventManagers.set(W,ge),M.attachCallbackListeners(P,ge)),ge})()}_openPopup(P){(0,R.av)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,M,W,ge){var Ue=this;return(0,d.Z)(function*(){!function Te(O){var P,M,W,ge,Ue,_t,qe,zt,vt,on;const Mt=Ne();(0,R.aA)("function"==typeof(null===(P=Mt?.universalLinks)||void 0===P?void 0:P.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aA)(typeof(null===(M=Mt?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aA)("function"==typeof(null===(Ue=null===(ge=null===(W=Mt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Ue?void 0:Ue.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(zt=null===(qe=null===(_t=Mt?.cordova)||void 0===_t?void 0:_t.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===zt?void 0:zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(on=null===(vt=Mt?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===on?void 0:on.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const _t=yield Ue._initialize(P);yield _t.initialized(),_t.resetRedirect(),(0,R.aG)(),yield Ue._originValidation(P);const qe=function X(O,P,M=null){return{type:P,eventId:M,urlResponse:null,sessionId:ke(),postBody:null,tenantId:O.tenantId,error:(0,R.az)(O,"no-auth-event")}}(P,W,ge);yield function he(O,P){return at()._set(Kt(O),P)}(P,qe);const zt=yield function L(O,P,M){return H.apply(this,arguments)}(P,qe,M),vt=yield function Se(O){const{cordova:P}=Ne();return new Promise(M=>{P.plugins.browsertab.isAvailable(W=>{let ge=null;W?P.plugins.browsertab.openUrl(O):ge=P.InAppBrowser.open(O,(0,R.ay)()?"_blank":"_system","location=yes"),M(ge)})})}(zt);return function Ye(O,P,M){return _e.apply(this,arguments)}(P,_t,vt)})()}_isIframeWebStorageSupported(P,M){throw new Error("Method not implemented.")}_originValidation(P){const M=P._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function K(O){return Me.apply(this,arguments)}(P)),this.originValidationPromises[M]}attachCallbackListeners(P,M){const{universalLinks:W,handleOpenURL:ge,BuildInfo:Ue}=Ne(),_t=setTimeout((0,d.Z)(function*(){yield Pe(P),M.onEvent(se())}),500),qe=function(){var on=(0,d.Z)(function*(Mt){clearTimeout(_t);const li=yield Pe(P);let Oa=null;li&&Mt?.url&&(Oa=function ve(O,P){var M,W;const ge=function fn(O){const P=gn(O),M=P.link?decodeURIComponent(P.link):void 0,W=gn(M).link,ge=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return gn(ge).link||ge||W||M||O}(P);if(ge.includes("/__/auth/callback")){const Ue=gn(ge),_t=Ue.firebaseError?function bn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ue.firebaseError)):null,qe=null===(W=null===(M=_t?.code)||void 0===M?void 0:M.split("auth/"))||void 0===W?void 0:W[1],zt=qe?(0,R.az)(qe):null;return zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:ge,postBody:null}}return null}(li,Mt.url)),M.onEvent(Oa||se())});return function(li){return on.apply(this,arguments)}}();typeof W<"u"&&"function"==typeof W.subscribe&&W.subscribe(null,qe);const zt=ge,vt=`${Ue.packageName.toLowerCase()}://`;Ne().handleOpenURL=function(){var on=(0,d.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(vt)&&qe({url:Mt}),"function"==typeof zt)try{zt(Mt)}catch(li){console.error(li)}});return function(Mt){return on.apply(this,arguments)}}()}};function se(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.az)("no-auth-event")}}function Ke(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function nn(O=(0,Q.z$)()){return!("file:"!==Ke()&&"ionic:"!==Ke()&&"capacitor:"!==Ke()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const O=self.localStorage,P=R.aL();if(O)return O.setItem(P,"1"),O.removeItem(P),!function Yt(O=(0,Q.z$)()){return function $t(){return(0,Q.w1)()&&11===document?.documentMode}()||function ht(O=(0,Q.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,Q.hl)()}catch{return yn()&&(0,Q.hl)()}return!1}function yn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qt(){return(function Le(){return"http:"===Ke()||"https:"===Ke()}()||(0,Q.ru)()||nn())&&!function gt(){return(0,Q.b$)()||(0,Q.UG)()}()&&Dn()&&!yn()}function Fn(){return nn()&&typeof document<"u"}function Ir(){return(Ir=(0,d.Z)(function*(){return!!Fn()&&new Promise(O=>{const P=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),O(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},Er=R.aA,Hi="persistence";function mt(O){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(O){yield O._initializationPromise;const P=Br(),M=R.aD(Hi,O.config.apiKey,O.name);P&&P.setItem(M,O._getPersistence())})).apply(this,arguments)}function Br(){var O;try{return(null===(O=function Wn(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Cr=R.aA;class Pt{constructor(){this.browserResolver=R.aC(R.k),this.cordovaResolver=R.aC(ee),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(P){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,M,W,ge){var Ue=this;return(0,d.Z)(function*(){return yield Ue.selectUnderlyingResolver(),Ue.assertedUnderlyingResolver._openPopup(P,M,W,ge)})()}_openRedirect(P,M,W,ge){var Ue=this;return(0,d.Z)(function*(){return yield Ue.selectUnderlyingResolver(),Ue.assertedUnderlyingResolver._openRedirect(P,M,W,ge)})()}_isIframeWebStorageSupported(P,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,M)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,d.Z)(function*(){if(P.underlyingResolver)return;const M=yield function Yr(){return Ir.apply(this,arguments)}();P.underlyingResolver=M?P.cordovaResolver:P.browserResolver})()}}function _n(O){return O.unwrap()}function Ht(O){return Ft(O)}function Ft(O){const{_tokenResponse:P}=O instanceof Q.ZR?O.customData:O;if(!P)return null;if(!(O instanceof Q.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return R.P.credentialFromResult(O);const M=P.providerId;if(!M||M===R.p.PASSWORD)return null;let W;switch(M){case R.p.GOOGLE:W=R.V;break;case R.p.FACEBOOK:W=R.U;break;case R.p.GITHUB:W=R.W;break;case R.p.TWITTER:W=R.Z;break;default:const{oauthIdToken:ge,oauthAccessToken:Ue,oauthTokenSecret:_t,pendingToken:qe,nonce:zt}=P;return Ue||_t||ge||qe?qe?M.startsWith("saml.")?R.aO._create(M,qe):R.L._fromParams({providerId:M,signInMethod:M,pendingToken:qe,idToken:ge,accessToken:Ue}):new R.X(M).credential({idToken:ge,accessToken:Ue,rawNonce:zt}):null}return O instanceof Q.ZR?W.credentialFromError(O):W.credentialFromResult(O)}function vn(O,P){return P.catch(M=>{throw M instanceof Q.ZR&&function Rs(O,P){var M;const W=null===(M=P.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===P?.code)P.resolver=new Mi(O,R.aq(O,P));else if(W){const ge=Ft(P),Ue=P;ge&&(Ue.credential=ge,Ue.tenantId=W.tenantId||void 0,Ue.email=W.email||void 0,Ue.phoneNumber=W.phoneNumber||void 0)}}(O,M),M}).then(M=>{const ge=M.user;return{operationType:M.operationType,credential:Ht(M),additionalUserInfo:R.ao(M),user:Zn.getOrCreate(ge)}})}function Ai(O,P){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(O,P){const M=yield P;return{verificationId:M.verificationId,confirm:W=>vn(O,M.confirm(W))}})).apply(this,arguments)}class Mi{constructor(P,M){this.resolver=M,this.auth=function zi(O){return O.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return vn(_n(this.auth),this.resolver.resolveSignIn(P))}}class Zn{constructor(P){this._delegate=P,this.multiFactor=R.ar(P)}static getOrCreate(P){return Zn.USER_MAP.has(P)||Zn.USER_MAP.set(P,new Zn(P)),Zn.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var M=this;return(0,d.Z)(function*(){return vn(M.auth,R.a0(M._delegate,P))})()}linkWithPhoneNumber(P,M){var W=this;return(0,d.Z)(function*(){return Ai(W.auth,R.l(W._delegate,P,M))})()}linkWithPopup(P){var M=this;return(0,d.Z)(function*(){return vn(M.auth,R.d(M._delegate,P,Pt))})()}linkWithRedirect(P){var M=this;return(0,d.Z)(function*(){return yield mt(R.aH(M.auth)),R.g(M._delegate,P,Pt)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var M=this;return(0,d.Z)(function*(){return vn(M.auth,R.a1(M._delegate,P))})()}reauthenticateWithPhoneNumber(P,M){return Ai(this.auth,R.r(this._delegate,P,M))}reauthenticateWithPopup(P){return vn(this.auth,R.e(this._delegate,P,Pt))}reauthenticateWithRedirect(P){var M=this;return(0,d.Z)(function*(){return yield mt(R.aH(M.auth)),R.h(M._delegate,P,Pt)})()}sendEmailVerification(P){return R.ae(this._delegate,P)}unlink(P){var M=this;return(0,d.Z)(function*(){return yield R.an(M._delegate,P),M})()}updateEmail(P){return R.aj(this._delegate,P)}updatePassword(P){return R.ak(this._delegate,P)}updatePhoneNumber(P){return R.u(this._delegate,P)}updateProfile(P){return R.ai(this._delegate,P)}verifyBeforeUpdateEmail(P,M){return R.af(this._delegate,P,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zn.USER_MAP=new WeakMap;const je=R.aA;let me=(()=>{class O{constructor(M,W){if(this.app=M,W.isInitialized())return this._delegate=W.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ge}=M.options;je(ge,"invalid-api-key",{appName:M.name}),je(ge,"invalid-api-key",{appName:M.name});const Ue=typeof window<"u"?Pt:void 0;this._delegate=W.initialize({options:{persistence:st(ge,M.name),popupRedirectResolver:Ue}}),this._delegate._updateErrorMap(R.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,W){R.I(this._delegate,M,W)}applyActionCode(M){return R.a5(this._delegate,M)}checkActionCode(M){return R.a6(this._delegate,M)}confirmPasswordReset(M,W){return R.a4(this._delegate,M,W)}createUserWithEmailAndPassword(M,W){var ge=this;return(0,d.Z)(function*(){return vn(ge._delegate,R.a8(ge._delegate,M,W))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return R.ad(this._delegate,M)}isSignInWithEmailLink(M){return R.ab(this._delegate,M)}getRedirectResult(){var M=this;return(0,d.Z)(function*(){je(Qt(),M._delegate,"operation-not-supported-in-this-environment");const W=yield R.j(M._delegate,Pt);return W?vn(M._delegate,Promise.resolve(W)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function oe(O,P){(0,R.aH)(O)._logFramework(P)}(this._delegate,M)}onAuthStateChanged(M,W,ge){const{next:Ue,error:_t,complete:qe}=Qe(M,W,ge);return this._delegate.onAuthStateChanged(Ue,_t,qe)}onIdTokenChanged(M,W,ge){const{next:Ue,error:_t,complete:qe}=Qe(M,W,ge);return this._delegate.onIdTokenChanged(Ue,_t,qe)}sendSignInLinkToEmail(M,W){return R.aa(this._delegate,M,W)}sendPasswordResetEmail(M,W){return R.a3(this._delegate,M,W||void 0)}setPersistence(M){var W=this;return(0,d.Z)(function*(){let ge;switch(function dt(O,P){Er(Object.values(Tn).includes(P),O,"invalid-persistence-type"),(0,Q.b$)()?Er(P!==Tn.SESSION,O,"unsupported-persistence-type"):(0,Q.UG)()?Er(P===Tn.NONE,O,"unsupported-persistence-type"):yn()?Er(P===Tn.NONE||P===Tn.LOCAL&&(0,Q.hl)(),O,"unsupported-persistence-type"):Er(P===Tn.NONE||Dn(),O,"unsupported-persistence-type")}(W._delegate,M),M){case Tn.SESSION:ge=R.a;break;case Tn.LOCAL:ge=(yield R.aC(R.i)._isAvailable())?R.i:R.b;break;case Tn.NONE:ge=R.N;break;default:return R.av("argument-error",{appName:W._delegate.name})}return W._delegate.setPersistence(ge)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return vn(this._delegate,R._(this._delegate))}signInWithCredential(M){return vn(this._delegate,R.$(this._delegate,M))}signInWithCustomToken(M){return vn(this._delegate,R.a2(this._delegate,M))}signInWithEmailAndPassword(M,W){return vn(this._delegate,R.a9(this._delegate,M,W))}signInWithEmailLink(M,W){return vn(this._delegate,R.ac(this._delegate,M,W))}signInWithPhoneNumber(M,W){return Ai(this._delegate,R.s(this._delegate,M,W))}signInWithPopup(M){var W=this;return(0,d.Z)(function*(){return je(Qt(),W._delegate,"operation-not-supported-in-this-environment"),vn(W._delegate,R.c(W._delegate,M,Pt))})()}signInWithRedirect(M){var W=this;return(0,d.Z)(function*(){return je(Qt(),W._delegate,"operation-not-supported-in-this-environment"),yield mt(W._delegate),R.f(W._delegate,M,Pt)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return R.a7(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Tn,O})();function Qe(O,P,M){let W=O;"function"!=typeof O&&({next:W,error:P,complete:M}=O);const ge=W;return{next:_t=>ge(_t&&Zn.getOrCreate(_t)),error:P,complete:M}}function st(O,P){const M=function Jt(O,P){const M=Br();if(!M)return[];const W=R.aD(Hi,O,P);switch(M.getItem(W)){case Tn.NONE:return[R.N];case Tn.LOCAL:return[R.i,R.a];case Tn.SESSION:return[R.a];default:return[]}}(O,P);if(typeof self<"u"&&!M.includes(R.i)&&M.push(R.i),typeof window<"u")for(const W of[R.b,R.a])M.includes(W)||M.push(W);return M.includes(R.N)||M.push(R.N),M}class Nt{constructor(){this.providerId="phone",this._delegate=new R.P(_n(U.Z.auth()))}static credential(P,M){return R.P.credential(P,M)}verifyPhoneNumber(P,M){return this._delegate.verifyPhoneNumber(P,M)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=R.P.PROVIDER_ID;const Lt=R.aA;class Ln{constructor(P,M,W=U.Z.app()){var ge;Lt(null===(ge=W.options)||void 0===ge?void 0:ge.apiKey,"invalid-api-key",{appName:W.name}),this._delegate=new R.R(P,M,W.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(O){O.INTERNAL.registerComponent(new Oe.wA("auth-compat",P=>{const M=P.getProvider("app-compat").getImmediate(),W=P.getProvider("auth");return new me(M,W)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.Q,FacebookAuthProvider:R.U,GithubAuthProvider:R.W,GoogleAuthProvider:R.V,OAuthProvider:R.X,SAMLAuthProvider:R.Y,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:Ln,TwitterAuthProvider:R.Z,Auth:me,AuthCredential:R.J,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(U.Z)},4537:(it,we,N)=>{N.d(we,{H0:()=>Ne,wA:()=>R});var d=N(5861),U=N(9058);class R{constructor(L,H,K){this.name=L,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const Q="[DEFAULT]";class pe{constructor(L,H){this.name=L,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const H=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(H)){const K=new U.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const Me=this.getOrInitializeService({instanceIdentifier:H});Me&&K.resolve(Me)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(L){var H;const K=this.normalizeInstanceIdentifier(L?.identifier),Me=null!==(H=L?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Me)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Se){if(Me)return null;throw Se}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function Oe(be){return"EAGER"===be.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const Me=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:Me});K.resolve(Se)}catch{}}}}clearInstance(L=Q){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,d.Z)(function*(){const H=Array.from(L.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=Q){return this.instances.has(L)}getOptions(L=Q){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:H={}}=L,K=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Me=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[Se,Ye]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Se)&&Ye.resolve(Me);return Me}onInit(L,H){var K;const Me=this.normalizeInstanceIdentifier(H),Se=null!==(K=this.onInitCallbacks.get(Me))&&void 0!==K?K:new Set;Se.add(L),this.onInitCallbacks.set(Me,Se);const Ye=this.instances.get(Me);return Ye&&L(Ye,Me),()=>{Se.delete(L)}}invokeOnInitCallbacks(L,H){const K=this.onInitCallbacks.get(H);if(K)for(const Me of K)try{Me(L,H)}catch{}}getOrInitializeService({instanceIdentifier:L,options:H={}}){let K=this.instances.get(L);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(be=L,be===Q?void 0:be),options:H}),this.instances.set(L,K),this.instancesOptions.set(L,H),this.invokeOnInitCallbacks(K,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,K)}catch{}var be;return K||null}normalizeInstanceIdentifier(L=Q){return this.component?this.component.multipleInstances?L:Q:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const H=this.getProvider(L.name);if(H.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);H.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const H=new pe(L,this);return this.providers.set(L,H),H}getProviders(){return Array.from(this.providers.values())}}},7879:(it,we,N)=>{N.d(we,{Am:()=>be,Ub:()=>Ne,Yd:()=>Oe,in:()=>U});const d=[];var U=function(L){return L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",L}(U||{});const R={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Q=U.INFO,pe={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Ie=(L,H,...K)=>{if(H<L.logLevel)return;const Me=(new Date).toISOString(),Se=pe[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${Me}]  ${L.name}:`,...K)};class Oe{constructor(H){this.name=H,this._logLevel=Q,this._logHandler=Ie,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in U))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?R[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...H),this._logHandler(this,U.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...H),this._logHandler(this,U.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,U.INFO,...H),this._logHandler(this,U.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,U.WARN,...H),this._logHandler(this,U.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...H),this._logHandler(this,U.ERROR,...H)}}function Ne(L){d.forEach(H=>{H.setLogLevel(L)})}function be(L,H){for(const K of d){let Me=null;H&&H.level&&(Me=R[H.level]),K.userLogHandler=null===L?null:(Se,Ye,..._e)=>{const Te=_e.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");Ye>=(Me??Se.logLevel)&&L({level:U[Ye].toLowerCase(),message:Te,args:_e,type:Se.name})}}}},1878:(it,we,N)=>{N.d(we,{X3:()=>ot});var d=N(5861);const U=(V,ve)=>ve.some(ke=>V instanceof ke);let R,Q;const Oe=new WeakMap,Ne=new WeakMap,be=new WeakMap,L=new WeakMap,H=new WeakMap;let Se={get(V,ve,ke){if(V instanceof IDBTransaction){if("done"===ve)return Ne.get(V);if("objectStoreNames"===ve)return V.objectStoreNames||be.get(V);if("store"===ve)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return Ce(V[ve])},set:(V,ve,ke)=>(V[ve]=ke,!0),has:(V,ve)=>V instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in V};function Te(V){return"function"==typeof V?function _e(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ve){return V.apply(Xe(this),ve),Ce(Oe.get(this))}:function(...ve){return Ce(V.apply(Xe(this),ve))}:function(ve,...ke){const at=V.call(Xe(this),ve,...ke);return be.set(at,ve.sort?ve.sort():[ve]),Ce(at)}}(V):(V instanceof IDBTransaction&&function Me(V){if(Ne.has(V))return;const ve=new Promise((ke,at)=>{const Kt=()=>{V.removeEventListener("complete",bn),V.removeEventListener("error",fn),V.removeEventListener("abort",fn)},bn=()=>{ke(),Kt()},fn=()=>{at(V.error||new DOMException("AbortError","AbortError")),Kt()};V.addEventListener("complete",bn),V.addEventListener("error",fn),V.addEventListener("abort",fn)});Ne.set(V,ve)}(V),U(V,function pe(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function Ce(V){if(V instanceof IDBRequest)return function K(V){const ve=new Promise((ke,at)=>{const Kt=()=>{V.removeEventListener("success",bn),V.removeEventListener("error",fn)},bn=()=>{ke(Ce(V.result)),Kt()},fn=()=>{at(V.error),Kt()};V.addEventListener("success",bn),V.addEventListener("error",fn)});return ve.then(ke=>{ke instanceof IDBCursor&&Oe.set(ke,V)}).catch(()=>{}),H.set(ve,V),ve}(V);if(L.has(V))return L.get(V);const ve=Te(V);return ve!==V&&(L.set(V,ve),H.set(ve,V)),ve}const Xe=V=>H.get(V);function ot(V,ve,{blocked:ke,upgrade:at,blocking:Kt,terminated:bn}={}){const fn=indexedDB.open(V,ve),gn=Ce(fn);return at&&fn.addEventListener("upgradeneeded",sn=>{at(Ce(fn.result),sn.oldVersion,sn.newVersion,Ce(fn.transaction),sn)}),ke&&fn.addEventListener("blocked",sn=>ke(sn.oldVersion,sn.newVersion,sn)),gn.then(sn=>{bn&&sn.addEventListener("close",()=>bn()),Kt&&sn.addEventListener("versionchange",wr=>Kt(wr.oldVersion,wr.newVersion,wr))}).catch(()=>{}),gn}const de=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],he=new Map;function Pe(V,ve){if(!(V instanceof IDBDatabase)||ve in V||"string"!=typeof ve)return;if(he.get(ve))return he.get(ve);const ke=ve.replace(/FromIndex$/,""),at=ve!==ke,Kt=X.includes(ke);if(!(ke in(at?IDBIndex:IDBObjectStore).prototype)||!Kt&&!de.includes(ke))return;const bn=function(){var fn=(0,d.Z)(function*(gn,...sn){const wr=this.transaction(gn,Kt?"readwrite":"readonly");let ee=wr.store;return at&&(ee=ee.index(sn.shift())),(yield Promise.all([ee[ke](...sn),Kt&&wr.done]))[0]});return function(sn){return fn.apply(this,arguments)}}();return he.set(ve,bn),bn}!function Ye(V){Se=V(Se)}(V=>({...V,get:(ve,ke,at)=>Pe(ve,ke)||V.get(ve,ke,at),has:(ve,ke)=>!!Pe(ve,ke)||V.has(ve,ke)}))},5861:(it,we,N)=>{function d(R,Q,pe,Ie,Oe,Ne,be){try{var L=R[Ne](be),H=L.value}catch(K){return void pe(K)}L.done?Q(H):Promise.resolve(H).then(Ie,Oe)}function U(R){return function(){var Q=this,pe=arguments;return new Promise(function(Ie,Oe){var Ne=R.apply(Q,pe);function be(H){d(Ne,Ie,Oe,be,L,"next",H)}function L(H){d(Ne,Ie,Oe,be,L,"throw",H)}be(void 0)})}}N.d(we,{Z:()=>U})},7582:(it,we,N)=>{function Q(ee,se){var oe={};for(var te in ee)Object.prototype.hasOwnProperty.call(ee,te)&&se.indexOf(te)<0&&(oe[te]=ee[te]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(te=Object.getOwnPropertySymbols(ee);fe<te.length;fe++)se.indexOf(te[fe])<0&&Object.prototype.propertyIsEnumerable.call(ee,te[fe])&&(oe[te[fe]]=ee[te[fe]])}return oe}function K(ee,se,oe,te){return new(oe||(oe=Promise))(function(xe,Ke){function Le($t){try{gt(te.next($t))}catch(ht){Ke(ht)}}function nn($t){try{gt(te.throw($t))}catch(ht){Ke(ht)}}function gt($t){$t.done?xe($t.value):function fe(xe){return xe instanceof oe?xe:new oe(function(Ke){Ke(xe)})}($t.value).then(Le,nn)}gt((te=te.apply(ee,se||[])).next())})}function Y(ee){return this instanceof Y?(this.v=ee,this):new Y(ee)}function de(ee,se,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,te=oe.apply(ee,se||[]),xe=[];return fe={},Ke("next"),Ke("throw"),Ke("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Ke(Yt){te[Yt]&&(fe[Yt]=function(Dn){return new Promise(function(yn,Qt){xe.push([Yt,Dn,yn,Qt])>1||Le(Yt,Dn)})})}function Le(Yt,Dn){try{!function nn(Yt){Yt.value instanceof Y?Promise.resolve(Yt.value.v).then(gt,$t):ht(xe[0][2],Yt)}(te[Yt](Dn))}catch(yn){ht(xe[0][3],yn)}}function gt(Yt){Le("next",Yt)}function $t(Yt){Le("throw",Yt)}function ht(Yt,Dn){Yt(Dn),xe.shift(),xe.length&&Le(xe[0][0],xe[0][1])}}function he(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,se=ee[Symbol.asyncIterator];return se?se.call(ee):(ee=function _e(ee){var se="function"==typeof Symbol&&Symbol.iterator,oe=se&&ee[se],te=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&te>=ee.length&&(ee=void 0),{value:ee&&ee[te++],done:!ee}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},te("next"),te("throw"),te("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function te(xe){oe[xe]=ee[xe]&&function(Ke){return new Promise(function(Le,nn){!function fe(xe,Ke,Le,nn){Promise.resolve(nn).then(function(gt){xe({value:gt,done:Le})},Ke)}(Le,nn,(Ke=ee[xe](Ke)).done,Ke.value)})}}}N.d(we,{FC:()=>de,KL:()=>he,_T:()=>Q,mG:()=>K,qq:()=>Y}),"function"==typeof SuppressedError&&SuppressedError}},it=>{it(it.s=1333)}]);