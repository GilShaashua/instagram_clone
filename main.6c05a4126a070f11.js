"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(ot,Ie,L)=>{L.d(Ie,{Dh:()=>xe,GT:()=>ge,cc:()=>Oe,on:()=>Me,pX:()=>ne,xv:()=>Fe});var c=L(5879),V=L(120);ot=L.hmd(ot);const U=["ngOnDestroy"],ne=(De,Te,tt,st={})=>new Proxy(De,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(De[de])return!(null===(re=st?.spy)||void 0===re)&&re.get&&st.spy.get(de,De[de]),De[de];if(U.indexOf(de)>-1)return()=>{};const he=Te.toPromise().then(Re=>{const j=Re&&Re[de];return"function"==typeof j?j.bind(Re):j&&j.then?j.then(we=>tt.run(()=>we)):tt.run(()=>j)});return new Proxy(()=>{},{get:(Re,j)=>he[j],apply:(Re,j,we)=>he.then(Ue=>{var lt;const tn=Ue&&Ue(...we);return!(null===(lt=st?.spy)||void 0===lt)&&lt.apply&&st.spy.apply(de,we,tn),tn})})})}),ge=(De,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(st=>{Object.defineProperty(De.prototype,st,Object.getOwnPropertyDescriptor(tt.prototype||tt,st))})})};class be{constructor(Te){return Te}}const xe=new c.OlP("angularfire2.app.options"),Fe=new c.OlP("angularfire2.app.name");function Me(De,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(De,ee));try{JSON.stringify(De)!==JSON.stringify(re.options)&&B("error",`${re.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(re)}const B=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)};function Oe(De,Te,tt,st,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===De)||[];if(de)return function Ae(De,Te){try{return De.toString()===Te.toString()}catch{return De===Te}}(ee,re)||(Ce("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ee,was:re})),de;{const he=st();return globalThis.\u0275AngularfireInstanceCache.push([De,he,ee]),he}}const Je=!!ot.hot,Ce=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(ot,Ie,L)=>{L.d(Ie,{$:()=>Rh,A:()=>G,D:()=>Ae,I:()=>wh,J:()=>Gc,L:()=>je,N:()=>Vt,P:()=>bn,Q:()=>Ka,R:()=>lm,U:()=>Bg,V:()=>ca,W:()=>Eo,X:()=>Qo,Y:()=>Ah,Z:()=>xh,_:()=>Wc,a:()=>Nu,a0:()=>w1,a1:()=>Un,a2:()=>OP,a3:()=>kP,a4:()=>Hv,a5:()=>Ds,a6:()=>Yc,a7:()=>Lh,a8:()=>Uh,a9:()=>zv,aA:()=>j,aB:()=>ac,aC:()=>it,aD:()=>tr,aE:()=>Ns,aF:()=>sl,aG:()=>ks,aH:()=>Ln,aL:()=>Xc,aO:()=>qi,aa:()=>Hg,ab:()=>Gv,ac:()=>zg,ad:()=>Zv,ae:()=>Su,af:()=>Wv,ai:()=>I1,aj:()=>NP,ak:()=>Yv,an:()=>Oh,ao:()=>Jc,aq:()=>qh,ar:()=>ku,as:()=>Ue,at:()=>Ke,au:()=>me,av:()=>ee,aw:()=>Wi,ax:()=>af,ay:()=>Jt,az:()=>de,b:()=>Kh,c:()=>yi,d:()=>Uu,e:()=>ic,f:()=>ju,g:()=>Ci,h:()=>Ut,i:()=>Mo,j:()=>d0,k:()=>cs,l:()=>um,m:()=>uc,o:()=>ma,p:()=>Fe,r:()=>ut,s:()=>_i,u:()=>oi});var c=L(5861),V=L(9058),U=L(7592),ne=L(7582),ge=L(7879),be=L(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function st(w,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${U.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw Re(w,...m)}function de(w,...m){return Re(w,...m)}function re(w,m,_){const b=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",b).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(w,...m){if("string"!=typeof w){const _=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(_,...b)}return Ce.create(w,...m)}function j(w,m,..._){if(!w)throw Re(m,..._)}function we(w){const m="INTERNAL ASSERTION FAILED: "+w;throw st(m),new Error(m)}function Ue(w,m){w||we(m)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function tn(){return"http:"===qn()||"https:"===qn()}function qn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class dn{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,b){this.fetchImpl=m,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new dn(3e4,6e4);function oe(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,b){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)(function*(w,m,_,b,D={}){return Qe(w,D,(0,c.Z)(function*(){let x={},W={};b&&("GET"===m?W=b:x={body:JSON.stringify(b)});const se=(0,V.xO)(Object.assign({key:w.config.apiKey},W)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(Qt(w,w.config.apiHost,_,se),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Qe(w,m,_){return Be.apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(w,m,_){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},ce),m);try{const D=new ft(w),x=yield Promise.race([_(),D.promise]);D.clearNetworkTimeout();const W=yield x.json();if("needConfirmation"in W)throw rn(w,"account-exists-with-different-credential",W);if(x.ok&&!("errorMessage"in W))return W;{const se=x.ok?W.errorMessage:W.error.message,[Le,He]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw rn(w,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw rn(w,"email-already-in-use",W);if("USER_DISABLED"===Le)throw rn(w,"user-disabled",W);const nt=b[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw re(w,nt,He);ee(w,nt)}}catch(D){if(D instanceof V.ZR)throw D;ee(w,"network-request-failed",{message:String(D)})}})).apply(this,arguments)}function nn(w,m,_,b){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)(function*(w,m,_,b,D={}){const x=yield pe(w,m,_,b,D);return"mfaPendingCredential"in x&&ee(w,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Qt(w,m,_,b){const D=`${m}${_}?${b}`;return w.config.emulator?Wr(w.config,D):`${w.config.apiScheme}://${D}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(de(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rn(w,m,_){const b={appName:w.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const D=de(w,m,b);return D.customData._tokenResponse=_,D}function En(){return(En=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function _r(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function bo(){return(bo=(0,c.Z)(function*(w,m=!1){const _=(0,V.m9)(w),b=yield _.getIdToken(m),D=mt(b);j(D&&D.exp&&D.auth_time&&D.iat,_.auth,"internal-error");const x="object"==typeof D.firebase?D.firebase:void 0,W=x?.sign_in_provider;return{claims:D,token:b,authTime:_r(dt(D.auth_time)),issuedAtTime:_r(dt(D.iat)),expirationTime:_r(dt(D.exp)),signInProvider:W||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,b]=w.split(".");if(void 0===m||void 0===_||void 0===b)return st("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,V.tV)(_);return D?JSON.parse(D):(st("Failed to decode base64 JWT payload"),null)}catch(D){return st("Caught error parsing JWT payload as JSON",D?.toString()),null}}function sn(w,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,c.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(b){throw b instanceof V.ZR&&function Yr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}class Nt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const D=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),b)}iteration(){var m=this;return(0,c.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Rn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Io(w){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,c.Z)(function*(w){var m;const _=w.auth,b=yield w.getIdToken(),D=yield sn(w,function Si(w,m){return Ur.apply(this,arguments)}(_,{idToken:b}));j(D?.users.length,_,"internal-error");const x=D.users[0];w._notifyReloadListener(x);const W=null!==(m=x.providerUserInfo)&&void 0!==m&&m.length?function Hi(w){return w.map(m=>{var{providerId:_}=m,b=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(x.providerUserInfo):[],se=function Fn(w,m){return[...w.filter(b=>!m.some(D=>D.providerId===b.providerId)),...m]}(w.providerData,W),nt=!!w.isAnonymous&&!(w.email&&x.passwordHash||se?.length),kt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:se,metadata:new Rn(x.createdAt,x.lastLoginAt),isAnonymous:nt};Object.assign(w,kt)}),Kt.apply(this,arguments)}function Bt(){return(Bt=(0,c.Z)(function*(w){const m=(0,V.m9)(w);yield Io(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(w,m){const _=yield Qe(w,{},(0,c.Z)(function*(){const b=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:D,apiKey:x}=w.config,W=Qt(w,D,"/v1/token",`key=${x}`),se=yield w._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(W,{method:"POST",headers:se,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var b=this;return(0,c.Z)(function*(){return j(!b.accessToken||b.refreshToken,m,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var b=this;return(0,c.Z)(function*(){const{accessToken:D,refreshToken:x,expiresIn:W}=yield function so(w,m){return ao.apply(this,arguments)}(m,_);b.updateTokensAndExpiration(D,x,Number(W))})()}updateTokensAndExpiration(m,_,b){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,_){const{refreshToken:b,accessToken:D,expirationTime:x}=_,W=new yr;return b&&(j("string"==typeof b,"internal-error",{appName:m}),W.refreshToken=b),D&&(j("string"==typeof D,"internal-error",{appName:m}),W.accessToken=D),x&&(j("number"==typeof x,"internal-error",{appName:m}),W.expirationTime=x),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new yr,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:b,stsTokenManager:D}=m,x=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Rn(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,c.Z)(function*(){const b=yield sn(_,_.stsTokenManager.getToken(_.auth,m));return j(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(m){return function Kr(w){return bo.apply(this,arguments)}(this,m)}reload(){return function Is(w){return Bt.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var b=this;return(0,c.Z)(function*(){let D=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),D=!0),_&&(yield Io(b)),yield b.auth._persistUserIfCurrent(b),D&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,c.Z)(function*(){const _=yield m.getIdToken();return yield sn(m,function Nn(w,m){return En.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var b,D,x,W,se,Le,He,nt;const kt=null!==(b=_.displayName)&&void 0!==b?b:void 0,Vr=null!==(D=_.email)&&void 0!==D?D:void 0,Ki=null!==(x=_.phoneNumber)&&void 0!==x?x:void 0,ls=null!==(W=_.photoURL)&&void 0!==W?W:void 0,bm=null!==(se=_.tenantId)&&void 0!==se?se:void 0,ul=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,_a=null!==(He=_.createdAt)&&void 0!==He?He:void 0,ya=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Ju,emailVerified:dl,isAnonymous:Yi,providerData:fc,stsTokenManager:Ao}=_;j(Ju&&Ao,m,"internal-error");const hl=yr.fromJSON(this.name,Ao);j("string"==typeof Ju,m,"internal-error"),Ge(kt,m.name),Ge(Vr,m.name),j("boolean"==typeof dl,m,"internal-error"),j("boolean"==typeof Yi,m,"internal-error"),Ge(Ki,m.name),Ge(ls,m.name),Ge(bm,m.name),Ge(ul,m.name),Ge(_a,m.name),Ge(ya,m.name);const Vs=new _e({uid:Ju,auth:m,email:Vr,emailVerified:dl,displayName:kt,isAnonymous:Yi,photoURL:ls,phoneNumber:Ki,tenantId:bm,stsTokenManager:hl,createdAt:_a,lastLoginAt:ya});return fc&&Array.isArray(fc)&&(Vs.providerData=fc.map(Xu=>Object.assign({},Xu))),ul&&(Vs._redirectEventId=ul),Vs}static _fromIdTokenResponse(m,_,b=!1){return(0,c.Z)(function*(){const D=new yr;D.updateFromServerResponse(_);const x=new _e({uid:_.localId,auth:m,stsTokenManager:D,isAnonymous:b});return yield Io(x),x})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,b){var D=this;return(0,c.Z)(function*(){D.storage[_]=b})()}_get(_){var b=this;return(0,c.Z)(function*(){const D=b.storage[_];return void 0===D?null:D})()}_remove(_){var b=this;return(0,c.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return w.type="NONE",w})();function tr(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,b){this.persistence=m,this.auth=_,this.userKey=b;const{config:D,name:x}=this.auth;this.fullUserKey=tr(this.userKey,D.apiKey,x),this.fullPersistenceKey=tr("persistence",D.apiKey,x),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,c.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,c.Z)(function*(){if(_.persistence===m)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,b="authUser"){return(0,c.Z)(function*(){if(!_.length)return new H(it(Vt),m,b);const D=(yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let x=D[0]||it(Vt);const W=tr(b,m.config.apiKey,m.name);let se=null;for(const He of _)try{const nt=yield He._get(W);if(nt){const kt=_e._fromJSON(m,nt);He!==x&&(se=kt),x=He;break}}catch{}const Le=D.filter(He=>He._shouldAllowMigration);return x._shouldAllowMigration&&Le.length?(x=Le[0],se&&(yield x._set(W,se.toJSON())),yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(nt!==x)try{yield nt._remove(W)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new H(x,m,b)):new H(x,m,b)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ve(m))return"Blackberry";if(vt(m))return"Webos";if(k(m))return"Safari";if((m.includes("chrome/")||A(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function O(w=(0,V.z$)()){return/firefox\//i.test(w)}function k(w=(0,V.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function A(w=(0,V.z$)()){return/crios\//i.test(w)}function K(w=(0,V.z$)()){return/iemobile/i.test(w)}function me(w=(0,V.z$)()){return/android/i.test(w)}function Ve(w=(0,V.z$)()){return/blackberry/i.test(w)}function vt(w=(0,V.z$)()){return/webos/i.test(w)}function Ke(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Jt(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function At(w=(0,V.z$)()){return Ke(w)||me(w)||vt(w)||Ve(w)||/windows phone/i.test(w)||K(w)}function $c(w,m=[]){let _;switch(w){case"Browser":_=$((0,V.z$)());break;case"Worker":_=`${$((0,V.z$)())}-${w}`;break;default:_=w}const b=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${U.SDK_VERSION}/${b}`}function Es(){return(Es=(0,c.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Go(w,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,c.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",oe(w,m))})).apply(this,arguments)}function Yt(w){return void 0!==w&&void 0!==w.getResponse}function sa(w){return void 0!==w&&void 0!==w.enterprise}class qa{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function mu(w){return new Promise((m,_)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=m,b.onerror=D=>{const x=de("internal-error");x.customData=D,_(x)},b.type="text/javascript",b.charset="UTF-8",function gu(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(b)})}function qo(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Qr{constructor(m){this.type="recaptcha-enterprise",this.auth=Ln(m)}verify(m="verify",_=!1){var b=this;return(0,c.Z)(function*(){function x(){return x=(0,c.Z)(function*(se){if(!_){if(null==se.tenantId&&null!=se._agentRecaptchaConfig)return se._agentRecaptchaConfig.siteKey;if(null!=se.tenantId&&void 0!==se._tenantRecaptchaConfigs[se.tenantId])return se._tenantRecaptchaConfigs[se.tenantId].siteKey}return new Promise(function(){var Le=(0,c.Z)(function*(He,nt){Go(se,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(kt=>{if(void 0!==kt.recaptchaKey){const Vr=new qa(kt);return null==se.tenantId?se._agentRecaptchaConfig=Vr:se._tenantRecaptchaConfigs[se.tenantId]=Vr,He(Vr.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(kt=>{nt(kt)})});return function(He,nt){return Le.apply(this,arguments)}}())}),x.apply(this,arguments)}function W(se,Le,He){const nt=window.grecaptcha;sa(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(se,{action:m}).then(kt=>{Le(kt)}).catch(()=>{Le("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((se,Le)=>{(function D(se){return x.apply(this,arguments)})(b.auth).then(He=>{if(!_&&sa(window.grecaptcha))W(He,se,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));mu("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{W(He,se,Le)}).catch(nt=>{Le(nt)})}}).catch(He=>{Le(He)})})})()}}function Zo(w,m,_){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,c.Z)(function*(w,m,_,b=!1){const D=new Qr(w);let x;try{x=yield D.verify(_)}catch{x=yield D.verify(_,!0)}const W=Object.assign({},m);return Object.assign(W,b?{captchaResp:x}:{captchaResponse:x}),Object.assign(W,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(W,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),W})).apply(this,arguments)}class zc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const b=x=>new Promise((W,se)=>{try{W(m(x))}catch(Le){se(Le)}});b.onAbort=_,this.queue.push(b);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===m)return;const b=[];try{for(const D of _.queue)yield D(m),D.onAbort&&b.push(D.onAbort)}catch(D){b.reverse();for(const x of b)try{x()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:D?.message})}})()}}class Jr{constructor(m,_,b,D){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=b,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new zc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(m,_){var b=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var D,x;if(!b._deleted&&(b.persistenceManager=yield H.create(b,m),!b._deleted)){if(null!==(D=b._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(x=b.currentUser)||void 0===x?void 0:x.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,c.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,c.Z)(function*(){var b;const D=yield _.assertedPersistence.getCurrentUser();let x=D,W=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const se=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,Le=x?._redirectEventId,He=yield _.tryRedirectSignIn(m);(!se||se===Le)&&He?.user&&(x=He.user,W=!0)}if(!x)return _.directlySetCurrentUser(null);if(!x._redirectEventId){if(W)try{yield _.beforeStateQueue.runMiddleware(x)}catch(se){x=D,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(se))}return x?_.reloadAndSetCurrentUserOrClear(x):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===x._redirectEventId?_.directlySetCurrentUser(x):_.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(m){var _=this;return(0,c.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,c.Z)(function*(){try{yield Io(m)}catch(b){if("auth/network-request-failed"!==b?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function In(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,c.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,c.Z)(function*(){const b=m?(0,V.m9)(m):null;return b&&j(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(m,_=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return m&&j(b.tenantId===m.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(m)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(m),b.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,c.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,c.Z)(function*(){const _=yield Go(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new qa(_);null==m.tenantId?m._agentRecaptchaConfig=b:m._tenantRecaptchaConfigs[m.tenantId]=b,b.emailPasswordEnabled&&new Qr(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,b){return this.registerStateListener(this.authStateSubscription,m,_,b)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,b){return this.registerStateListener(this.idTokenSubscription,m,_,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var b=this;return(0,c.Z)(function*(){const D=yield b.getOrInitRedirectPersistenceManager(_);return null===m?D.removeCurrentUser():D.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const b=m&&it(m)||_._popupRedirectResolver;j(b,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,c.Z)(function*(){var b,D;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===m?_._currentUser:(null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,c.Z)(function*(){if(m===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,b,D){if(this._deleted)return()=>{};const x="function"==typeof _?_:_.next.bind(_),W=this._isInitialized?Promise.resolve():this._initializationPromise;return j(W,this,"internal-error"),W.then(()=>x(this.currentUser)),"function"==typeof _?m.addObserver(_,b,D):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=$c(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,c.Z)(function*(){var _;const b={"X-Client-Version":m.clientVersion};m.app.options.appId&&(b["X-Firebase-gmpid"]=m.app.options.appId);const D=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();D&&(b["X-Firebase-Client"]=D);const x=yield m._getAppCheckToken();return x&&(b["X-Firebase-AppCheck"]=x),b})()}_getAppCheckToken(){var m=this;return(0,c.Z)(function*(){var _;const b=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return b?.error&&function tt(w,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${U.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Ln(w){return(0,V.m9)(w)}class xv{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wh(w,m,_){const b=Ln(w);j(b._canInitEmulator,b,"emulator-config-failed"),j(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const D=!!_?.disableWarnings,x=pi(m),{host:W,port:se}=function bh(w){const m=pi(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(b);if(D){const x=D[1];return{host:x,port:Ih(b.substr(x.length+1))}}{const[x,W]=b.split(":");return{host:x,port:Ih(W)}}}(m);b.config.emulator={url:`${x}//${W}${null===se?"":`:${se}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:se,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function kv(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function pi(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Ih(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Gc{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function Eh(w,m){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",oe(w,m))})).apply(this,arguments)}function Fg(w,m){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Pi(){return(Pi=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",oe(w,m))})).apply(this,arguments)}function yu(w,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPassword",oe(w,m))})).apply(this,arguments)}function vu(w,m){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",oe(w,m))})).apply(this,arguments)}function Sh(){return(Sh=(0,c.Z)(function*(w,m){return vu(w,m)})).apply(this,arguments)}function Cu(w,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,c.Z)(function*(w,m){return vu(w,m)})).apply(this,arguments)}function bu(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(w,m){return vu(w,m)})).apply(this,arguments)}function Dr(){return(Dr=(0,c.Z)(function*(w,m){return vu(w,m)})).apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,m))})).apply(this,arguments)}function Iu(){return(Iu=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,m))})).apply(this,arguments)}class Ts extends Gc{constructor(m,_,b,D=null){super("password",b),this._email=m,this._password=_,this._tenantId=D}static _fromEmailAndPassword(m,_){return new Ts(m,_,"password")}static _fromEmailAndCode(m,_,b=null){return new Ts(m,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,c.Z)(function*(){var b;switch(_.signInMethod){case"password":const D={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=m._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const x=yield Zo(m,D,"signInWithPassword");return yu(m,x)}return yu(m,D).catch(function(){var x=(0,c.Z)(function*(W){if("auth/missing-recaptcha-token"===W.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const se=yield Zo(m,D,"signInWithPassword");return yu(m,se)}return Promise.reject(W)});return function(W){return x.apply(this,arguments)}}());case"emailLink":return function Wa(w,m){return Xr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return Fg(m,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ug(w,m){return Iu.apply(this,arguments)}(m,{idToken:_,email:b._email,oobCode:b._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Wo(w,m){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithIdp",oe(w,m))})).apply(this,arguments)}class je extends Gc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:D}=_,x=(0,ne._T)(_,["providerId","signInMethod"]);if(!b||!D)return null;const W=new je(b,D);return W.idToken=x.idToken||void 0,W.accessToken=x.accessToken||void 0,W.secret=x.secret,W.nonce=x.nonce,W.pendingToken=x.pendingToken||null,W}_getIdTokenResponse(m){return Wo(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,Wo(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Wo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function mn(){return(mn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",oe(w,m))})).apply(this,arguments)}function Ko(){return(Ko=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,m))})).apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(w,m){const _=yield nn(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,m));if(_.temporaryProof)throw rn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Kn={USER_NOT_FOUND:"user-not-found"};function Ms(){return(Ms=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Kn)})).apply(this,arguments)}class pt extends Gc{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Ai(w,m){return Ko.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Sr(w,m){return aa.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Yo(w,m){return Ms.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:b,verificationCode:D}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:b,code:D}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:b,phoneNumber:D,temporaryProof:x}=m;return b||_||D||x?new pt({verificationId:_,verificationCode:b,phoneNumber:D,temporaryProof:x}):null}}class xi{constructor(m){var _,b,D,x,W,se;const Le=(0,V.zd)((0,V.pd)(m)),He=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(b=Le.oobCode)&&void 0!==b?b:null,kt=function qc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Le.mode)&&void 0!==D?D:null);j(He&&nt&&kt,"argument-error"),this.apiKey=He,this.operation=kt,this.code=nt,this.continueUrl=null!==(x=Le.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(se=Le.tenantId)&&void 0!==se?se:null}static parseLink(m){const _=function Nv(w){const m=(0,V.zd)((0,V.pd)(w)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,b=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(b?(0,V.zd)((0,V.pd)(b)).link:null)||b||_||m||w}(m);try{return new xi(_)}catch{return null}}}let Ka=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,b){return Ts._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const D=xi.parseLink(b);return j(D,"argument-error"),Ts._fromEmailAndCode(_,D.code,D.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Oi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ei extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Qo extends ei{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Qo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Qo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:D,pendingToken:x,nonce:W,providerId:se}=m;if(!b&&!D&&!_&&!x||!se)return null;try{return new Qo(se)._credential({idToken:_,accessToken:b,nonce:W,pendingToken:x})}catch{return null}}}let Bg=(()=>{class w extends ei{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ca=(()=>{class w extends ei{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:D}=_;if(!b&&!D)return null;try{return w.credential(b,D)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Eo=(()=>{class w extends ei{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class qi extends Gc{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Wo(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,Wo(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Wo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:D,pendingToken:x}=_;return b&&D&&x&&b===D?new qi(b,x):null}static _create(m,_){return new qi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ah extends Oi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ah.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ah.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=qi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:b}=m;if(!_||!b)return null;try{return qi._create(b,_)}catch{return null}}}let xh=(()=>{class w extends ei{constructor(){super("twitter.com")}static credential(_,b){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:D}=_;if(!b||!D)return null;try{return w.credential(b,D)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Zc(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signUp",oe(w,m))})).apply(this,arguments)}class ni{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,b,D=!1){return(0,c.Z)(function*(){const x=yield _e._fromIdTokenResponse(m,b,D),W=Ya(b);return new ni({user:x,providerId:W,_tokenResponse:b,operationType:_})})()}static _forOperation(m,_,b){return(0,c.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const D=Ya(b);return new ni({user:m,providerId:D,_tokenResponse:b,operationType:_})})()}}function Ya(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Wc(w){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(w){var m;const _=Ln(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new ni({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Zc(_,{returnSecureToken:!0}),D=yield ni._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(D.user),D})).apply(this,arguments)}class Vg extends V.ZR{constructor(m,_,b,D){var x;super(_.code,_.message),this.operationType=b,this.user=D,Object.setPrototypeOf(this,Vg.prototype),this.customData={appName:m.name,tenantId:null!==(x=m.tenantId)&&void 0!==x?x:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,_,b,D){return new Vg(m,_,b,D)}}function gi(w,m,_,b){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Vg._fromErrorAndOperation(w,x,m,b):x})}function Br(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Oh(w,m){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);yield Qa(!0,_,m);const{providerUserInfo:b}=yield function on(w,m){return Zn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),D=Br(b||[]);return _.providerData=_.providerData.filter(x=>D.has(x.providerId)),D.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Jo.apply(this,arguments)}function Kc(w,m){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,c.Z)(function*(w,m,_=!1){const b=yield sn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return ni._forOperation(w,"link",b)})).apply(this,arguments)}function Qa(w,m,_){return kh.apply(this,arguments)}function kh(){return(kh=(0,c.Z)(function*(w,m,_){yield Io(m);const D=!1===w?"provider-already-linked":"no-such-provider";j(Br(m.providerData).has(_)===w,m.auth,D)})).apply(this,arguments)}function jg(w,m){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,c.Z)(function*(w,m,_=!1){const{auth:b}=w,D="reauthenticate";try{const x=yield sn(w,gi(b,D,m,w),_);j(x.idToken,b,"internal-error");const W=mt(x.idToken);j(W,b,"internal-error");const{sub:se}=W;return j(w.uid===se,b,"user-mismatch"),ni._forOperation(w,D,x)}catch(x){throw"auth/user-not-found"===x?.code&&ee(b,"user-mismatch"),x}})).apply(this,arguments)}function Fv(w,m){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,c.Z)(function*(w,m,_=!1){const b="signIn",D=yield gi(w,b,m),x=yield ni._fromIdTokenResponse(w,b,D);return _||(yield w._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Rh(w,m){return $g.apply(this,arguments)}function $g(){return($g=(0,c.Z)(function*(w,m){return Fv(Ln(w),m)})).apply(this,arguments)}function w1(w,m){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);return yield Qa(!1,_,m.providerId),Kc(_,m)})).apply(this,arguments)}function Un(w,m){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,c.Z)(function*(w,m){return jg((0,V.m9)(w),m)})).apply(this,arguments)}function Bv(){return(Bv=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithCustomToken",oe(w,m))})).apply(this,arguments)}function OP(w,m){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,c.Z)(function*(w,m){const _=Ln(w),b=yield function xP(w,m){return Bv.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),D=yield ni._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(D.user),D}),Vv.apply(this,arguments)}class Fh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?jv._fromServerResponse(m,_):"totpInfo"in _?Tu._fromServerResponse(m,_):ee(m,"internal-error")}}class jv extends Fh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new jv(_)}}class Tu extends Fh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new Tu(_)}}function Ja(w,m,_){var b;j((null===(b=_.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function kP(w,m,_){return $v.apply(this,arguments)}function $v(){return $v=(0,c.Z)(function*(w,m,_){var b;const D=Ln(w),x={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=D._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const W=yield Zo(D,x,"getOobCode",!0);_&&Ja(D,W,_),yield Cu(D,W)}else _&&Ja(D,x,_),yield Cu(D,x).catch(function(){var W=(0,c.Z)(function*(se){if("auth/missing-recaptcha-token"!==se.code)return Promise.reject(se);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield Zo(D,x,"getOobCode",!0);_&&Ja(D,Le,_),yield Cu(D,Le)}});return function(se){return W.apply(this,arguments)}}())}),$v.apply(this,arguments)}function Hv(w,m,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,c.Z)(function*(w,m,_){yield Eh((0,V.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Ds(w,m){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,c.Z)(function*(w,m){yield function C1(w,m){return Pi.apply(this,arguments)}((0,V.m9)(w),{oobCode:m})}),Mu.apply(this,arguments)}function Yc(w,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),b=yield Eh(_,{oobCode:m}),D=b.requestType;switch(j(D,_,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(b.mfaInfo,_,"internal-error");default:j(b.email,_,"internal-error")}let x=null;return b.mfaInfo&&(x=Fh._fromServerResponse(Ln(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:x},operation:D}})).apply(this,arguments)}function Lh(w,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(w,m){const{data:_}=yield Yc((0,V.m9)(w),m);return _.email})).apply(this,arguments)}function Uh(w,m,_){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,c.Z)(function*(w,m,_){var b;const D=Ln(w),x={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let W;if(null!==(b=D._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const He=yield Zo(D,x,"signUpPassword");W=Zc(D,He)}else W=Zc(D,x).catch(function(){var He=(0,c.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const kt=yield Zo(D,x,"signUpPassword");return Zc(D,kt)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const se=yield W.catch(He=>Promise.reject(He)),Le=yield ni._fromIdTokenResponse(D,"signIn",se);return yield D._updateCurrentUser(Le.user),Le}),Bh.apply(this,arguments)}function zv(w,m,_){return Rh((0,V.m9)(w),Ka.credential(m,_))}function Hg(w,m,_){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,c.Z)(function*(w,m,_){var b;const D=Ln(w),x={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function W(se,Le){j(Le.handleCodeInApp,D,"argument-error"),Le&&Ja(D,se,Le)}if(null!==(b=D._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const se=yield Zo(D,x,"getOobCode",!0);W(se,_),yield bu(D,se)}else W(x,_),yield bu(D,x).catch(function(){var se=(0,c.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield Zo(D,x,"getOobCode",!0);W(He,_),yield bu(D,He)}});return function(Le){return se.apply(this,arguments)}}())}),Xa.apply(this,arguments)}function Gv(w,m){const _=xi.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function zg(w,m,_){return Du.apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w),D=Ka.credentialWithLink(m,_||lt());return j(D._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Rh(b,D)})).apply(this,arguments)}function Vh(){return(Vh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",oe(w,m))})).apply(this,arguments)}function Zv(w,m){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,c.Z)(function*(w,m){const b={identifier:m,continueUri:tn()?lt():"http://localhost"},{signinMethods:D}=yield function qv(w,m){return Vh.apply(this,arguments)}((0,V.m9)(w),b);return D||[]}),Qc.apply(this,arguments)}function Su(w,m){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),D={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Ja(_.auth,D,m);const{email:x}=yield function Dh(w,m){return Sh.apply(this,arguments)}(_.auth,D);x!==w.email&&(yield w.reload())}),Ss.apply(this,arguments)}function Wv(w,m,_){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Ja(b.auth,x,_);const{email:W}=yield function Mr(w,m){return Dr.apply(this,arguments)}(b.auth,x);W!==w.email&&(yield w.reload())}),Gg.apply(this,arguments)}function Kv(){return(Kv=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function I1(w,m){return qg.apply(this,arguments)}function qg(){return qg=(0,c.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const b=(0,V.m9)(w),x={idToken:yield b.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},W=yield sn(b,function b1(w,m){return Kv.apply(this,arguments)}(b.auth,x));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const se=b.providerData.find(({providerId:Le})=>"password"===Le);se&&(se.displayName=b.displayName,se.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)}),qg.apply(this,arguments)}function NP(w,m){return jh((0,V.m9)(w),m,null)}function Yv(w,m){return jh((0,V.m9)(w),null,m)}function jh(w,m,_){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,c.Z)(function*(w,m,_){const{auth:b}=w,x={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(x.email=m),_&&(x.password=_);const W=yield sn(w,Fg(b,x));yield w._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Pu{constructor(m,_,b={}){this.isNewUser=m,this.providerId=_,this.profile=b}}class E1 extends Pu{constructor(m,_,b,D){super(m,_,b),this.username=D}}class Au extends Pu{constructor(m,_){super(m,"facebook.com",_)}}class Qv extends E1{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Kg extends Pu{constructor(m,_){super(m,"google.com",_)}}class $h extends E1{constructor(m,_,b){super(m,"twitter.com",_,b)}}function Jc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Wg(w){var m,_;if(!w)return null;const{providerId:b}=w,D=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},x=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const W=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(W)return new Pu(x,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new Au(x,D);case"github.com":return new Qv(x,D);case"google.com":return new Kg(x,D);case"twitter.com":return new $h(x,D,w.screenName||null);case"custom":case"anonymous":return new Pu(x,null);default:return new Pu(x,b,D)}}(_)}class es{constructor(m,_,b){this.type=m,this.credential=_,this.auth=b}static _fromIdtoken(m,_){return new es("enroll",m,_)}static _fromMfaPendingCredential(m){return new es("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,b;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return es._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(b=m.multiFactorSession)&&void 0!==b&&b.idToken)return es._fromIdtoken(m.multiFactorSession.idToken)}return null}}class ec{constructor(m,_,b){this.session=m,this.hints=_,this.signInResolver=b}static _fromError(m,_){const b=Ln(m),D=_.customData._serverResponse,x=(D.mfaInfo||[]).map(se=>Fh._fromServerResponse(b,se));j(D.mfaPendingCredential,b,"internal-error");const W=es._fromMfaPendingCredential(D.mfaPendingCredential);return new ec(W,x,function(){var se=(0,c.Z)(function*(Le){const He=yield Le._process(b,W);delete D.mfaInfo,delete D.mfaPendingCredential;const nt=Object.assign(Object.assign({},D),{idToken:He.idToken,refreshToken:He.refreshToken});switch(_.operationType){case"signIn":const kt=yield ni._fromIdTokenResponse(b,_.operationType,nt);return yield b._updateCurrentUser(kt.user),kt;case"reauthenticate":return j(_.user,b,"internal-error"),ni._forOperation(_.user,_.operationType,nt);default:ee(b,"internal-error")}});return function(Le){return se.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,c.Z)(function*(){return _.signInResolver(m)})()}}function qh(w,m){var _;const b=(0,V.m9)(w),D=m;return j(m.customData.operationType,b,"argument-error"),j(null===(_=D.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),ec._fromError(b,D)}class Ou{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>Fh._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new Ou(m)}getSession(){var m=this;return(0,c.Z)(function*(){return es._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var b=this;return(0,c.Z)(function*(){const D=m,x=yield b.getSession(),W=yield sn(b.user,D._process(b.user.auth,x,_));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(m){var _=this;return(0,c.Z)(function*(){const b="string"==typeof m?m:m.uid,D=yield _.user.getIdToken();try{const x=yield sn(_.user,function Qg(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",oe(w,m))}(_.user.auth,{idToken:D,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:W})=>W!==b),yield _.user._updateTokensIfNecessary(x),yield _.user.reload()}catch(x){throw x}})()}}const an=new WeakMap;function ku(w){const m=(0,V.m9)(w);return an.has(m)||an.set(m,Ou._fromUser(m)),an.get(m)}const ts="__sak";class ii{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ts,"1"),this.storage.removeItem(ts),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kh=(()=>{class w extends ii{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function S1(){const w=(0,V.z$)();return k(w)||Ke(w)}()&&function zi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=At(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const D=this.storage.getItem(b),x=this.localCache[b];D!==x&&_(b,x,D)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((se,Le,He)=>{this.notifyListeners(se,He)});const D=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(D);if(_.newValue!==se)null!==_.newValue?this.storage.setItem(D,_.newValue):this.storage.removeItem(D);else if(this.localCache[D]===_.newValue&&!b)return}const x=()=>{const se=this.storage.getItem(D);!b&&this.localCache[D]===se||this.notifyListeners(D,se)},W=this.storage.getItem(D);!function pn(){return(0,V.w1)()&&10===document.documentMode}()||W===_.newValue||_.newValue===_.oldValue?x():setTimeout(x,10)}notifyListeners(_,b){this.localCache[_]=b;const D=this.listeners[_];if(D)for(const x of Array.from(D))x(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var D=()=>super._set,x=this;return(0,c.Z)(function*(){yield D().call(x,_,b),x.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,D=this;return(0,c.Z)(function*(){const x=yield b().call(D,_);return D.localCache[_]=JSON.stringify(x),x})()}_remove(_){var b=()=>super._remove,D=this;return(0,c.Z)(function*(){yield b().call(D,_),delete D.localCache[_]})()}}return w.type="LOCAL",w})(),Nu=(()=>{class w extends ii{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return w.type="SESSION",w})();let Jg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(x=>x.isListeningto(_));if(b)return b;const D=new w(_);return this.receivers.push(D),D}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,c.Z)(function*(){const D=_,{eventId:x,eventType:W,data:se}=D.data,Le=b.handlersMap[W];if(!Le?.size)return;D.ports[0].postMessage({status:"ack",eventId:x,eventType:W});const He=Array.from(Le).map(function(){var kt=(0,c.Z)(function*(Vr){return Vr(D.origin,se)});return function(Vr){return kt.apply(this,arguments)}}()),nt=yield function Ps(w){return Promise.all(w.map(function(){var m=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return m.apply(this,arguments)}}()))}(He);D.ports[0].postMessage({status:"done",eventId:x,eventType:W,response:nt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Xc(w="",m=10){let _="";for(let b=0;b<m;b++)_+=Math.floor(10*Math.random());return w+_}class n0{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,b=50){var D=this;return(0,c.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let W,se;return new Promise((Le,He)=>{const nt=Xc("",20);x.port1.start();const kt=setTimeout(()=>{He(new Error("unsupported_event"))},b);se={messageChannel:x,onMessage(Vr){const Ki=Vr;if(Ki.data.eventId===nt)switch(Ki.data.status){case"ack":clearTimeout(kt),W=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(Ki.data.response);break;default:clearTimeout(kt),clearTimeout(W),He(new Error("invalid_response"))}}},D.handlers.add(se),x.port1.addEventListener("message",se.onMessage),D.target.postMessage({eventType:m,eventId:nt,data:_},[x.port2])}).finally(()=>{se&&D.removeMessageHandler(se)})})()}}function nr(){return window}function Xg(){return typeof nr().WorkerGlobalScope<"u"&&"function"==typeof nr().importScripts}function Ru(){return(Ru=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const tm="firebaseLocalStorageDb",nc="firebaseLocalStorage",As="fbase_key";class el{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Qh(w,m){return w.transaction([nc],m?"readwrite":"readonly").objectStore(nc)}function nm(){const w=indexedDB.open(tm,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(nc,{keyPath:As})}catch(D){_(D)}}),w.addEventListener("success",(0,c.Z)(function*(){const b=w.result;b.objectStoreNames.contains(nc)?m(b):(b.close(),yield function o0(){const w=indexedDB.deleteDatabase(tm);return new el(w).toPromise()}(),m(yield nm()))}))})}function rm(w,m,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,c.Z)(function*(w,m,_){const b=Qh(w,!0).put({[As]:m,value:_});return new el(b).toPromise()})).apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(w,m){const _=Qh(w,!1).get(m),b=yield new el(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Jh(w,m){const _=Qh(w,!0).delete(m);return new el(_).toPromise()}const Mo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield nm()),_.db})()}_withRetries(_){var b=this;return(0,c.Z)(function*(){let D=0;for(;;)try{const x=yield b._openDb();return yield _(x)}catch(x){if(D++>3)throw x;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Xg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Jg._getInstance(function em(){return Xg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(D,x){return{keyProcessed:(yield _._poll()).includes(x.key)}});return function(D,x){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(D,x){return["keyChanged"]});return function(D,x){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var b,D;if(_.activeServiceWorker=yield function _t(){return Ru.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new n0(_.activeServiceWorker);const x=yield _.sender._send("ping",{},800);x&&null!==(b=x[0])&&void 0!==b&&b.fulfilled&&null!==(D=x[0])&&void 0!==D&&D.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function A1(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield nm();return yield rm(_,ts,"1"),yield Jh(_,ts),!0}catch{}return!1})()}_withPendingWrite(_){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var D=this;return(0,c.Z)(function*(){return D._withPendingWrite((0,c.Z)(function*(){return yield D._withRetries(x=>rm(x,_,b)),D.localCache[_]=b,D.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,c.Z)(function*(){const D=yield b._withRetries(x=>function jt(w,m){return co.apply(this,arguments)}(x,_));return b.localCache[_]=D,D})()}_remove(_){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(D=>Jh(D,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const b=yield _._withRetries(W=>{const se=Qh(W,!1).getAll();return new el(se).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const D=[],x=new Set;for(const{fbase_key:W,value:se}of b)x.add(W),JSON.stringify(_.localCache[W])!==JSON.stringify(se)&&(_.notifyListeners(W,se),D.push(W));for(const W of Object.keys(_.localCache))_.localCache[W]&&!x.has(W)&&(_.notifyListeners(W,null),D.push(W));return D})()}notifyListeners(_,b){this.localCache[_]=b;const D=this.listeners[_];if(D)for(const x of Array.from(D))x(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Ar=1e12;class xs{constructor(m){this.auth=m,this.counter=Ar,this._widgets=new Map}render(m,_){const b=this.counter;return this._widgets.set(b,new c0(m,this.auth.name,_||{})),this.counter++,b}reset(m){var _;const b=m||Ar;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Ar))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,c.Z)(function*(){var b;return null===(b=_._widgets.get(m||Ar))||void 0===b||b.execute(),""})()}}class c0{constructor(m,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof m?document.getElementById(m):m;j(D,"argument-error",{appName:_}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nl(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Do=qo("rcb"),x1=new dn(3e4,6e4);class am{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=nr().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function O1(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Yt(nr().grecaptcha)?Promise.resolve(nr().grecaptcha):new Promise((b,D)=>{const x=nr().setTimeout(()=>{D(de(m,"network-request-failed"))},x1.get());nr()[Do]=()=>{nr().clearTimeout(x),delete nr()[Do];const se=nr().grecaptcha;if(!se||!Yt(se))return void D(de(m,"internal-error"));const Le=se.render;se.render=(He,nt)=>{const kt=Le(He,nt);return this.counter++,kt},this.hostLanguage=_,b(se)},mu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Do,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(x),D(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=nr().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cm{load(m){return(0,c.Z)(function*(){return new xs(m)})()}clearedOneInstance(){}}const Xh="recaptcha",l0={theme:"light",type:"image"};class lm{constructor(m,_=Object.assign({},l0),b){this.parameters=_,this.type=Xh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(b),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof m?document.getElementById(m):m;j(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cm:new am,this.validateStartingState()}verify(){var m=this;return(0,c.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(_)||new Promise(x=>{const W=se=>{se&&(m.tokenChangeListeners.delete(W),x(se))};m.tokenChangeListeners.add(W),m.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof m)m(_);else if("string"==typeof m){const b=nr()[m];"function"==typeof b&&b(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,c.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,c.Z)(function*(){j(tn()&&!Xg(),m.auth,"internal-error"),yield function k1(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function zo(w){return Es.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ef{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function _i(w,m,_){return ns.apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(w,m,_){const b=Ln(w),D=yield Lu(b,m,(0,V.m9)(_));return new ef(D,x=>Rh(b,x))})).apply(this,arguments)}function um(w,m,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w);yield Qa(!1,b,"phone");const D=yield Lu(b.auth,m,(0,V.m9)(_));return new ef(D,x=>w1(b,x))})).apply(this,arguments)}function ut(w,m,_){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w),D=yield Lu(b.auth,m,(0,V.m9)(_));return new ef(D,x=>Un(b,x))})).apply(this,arguments)}function Lu(w,m,_){return tf.apply(this,arguments)}function tf(){return tf=(0,c.Z)(function*(w,m,_){var b;const D=yield _.verify();try{let x;if(j("string"==typeof D,w,"argument-error"),j(_.type===Xh,w,"argument-error"),x="string"==typeof m?{phoneNumber:m}:m,"session"in x){const W=x.session;if("phoneNumber"in x)return j("enroll"===W.type,w,"internal-error"),(yield function t0(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",oe(w,m))}(w,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{j("signin"===W.type,w,"internal-error");const se=(null===(b=x.multiFactorHint)||void 0===b?void 0:b.uid)||x.multiFactorUid;return j(se,w,"missing-multi-factor-info"),(yield function im(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",oe(w,m))}(w,{mfaPendingCredential:W.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield function Et(w,m){return mn.apply(this,arguments)}(w,{phoneNumber:x.phoneNumber,recaptchaToken:D});return W}}finally{_._reset()}}),tf.apply(this,arguments)}function oi(w,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(w,m){yield Kc((0,V.m9)(w),m)})).apply(this,arguments)}let bn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Ln(_)}verifyPhoneNumber(_,b){return Lu(this.auth,_,(0,V.m9)(b))}static credential(_,b){return pt._fromVerification(_,b)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:D}=_;return b&&D?pt._fromTokenResponse(b,D):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Os(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class la extends Gc{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Wo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Wo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Wo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function yt(w){return Fv(w.auth,new la(w),w.bypassAuthState)}function u0(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),jg(_,new la(w),w.bypassAuthState)}function dm(w){return rl.apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Kc(_,new la(w),w.bypassAuthState)})).apply(this,arguments)}class is{constructor(m,_,b,D,x=!1){this.auth=m,this.resolver=b,this.user=D,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,c.Z)(function*(b,D){m.pendingPromise={resolve:b,reject:D};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(x){m.reject(x)}});return function(b,D){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:D,postBody:x,tenantId:W,error:se,type:Le}=m;if(se)return void _.reject(se);const He={auth:_.auth,requestUri:b,sessionId:D,tenantId:W||void 0,postBody:x||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(He))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return yt;case"linkViaPopup":case"linkViaRedirect":return dm;case"reauthViaPopup":case"reauthViaRedirect":return u0;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const os=new dn(2e3,1e4);function yi(w,m,_){return rc.apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(w,m,_){const b=Ln(w);he(w,m,Oi);const D=Os(b,_);return new ss(b,"signInViaPopup",m,D).executeNotNull()})).apply(this,arguments)}function ic(w,m,_){return oc.apply(this,arguments)}function oc(){return(oc=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w);he(b.auth,m,Oi);const D=Os(b.auth,_);return new ss(b.auth,"reauthViaPopup",m,D,b).executeNotNull()})).apply(this,arguments)}function Uu(w,m,_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w);he(b.auth,m,Oi);const D=Os(b.auth,_);return new ss(b.auth,"linkViaPopup",m,D,b).executeNotNull()})).apply(this,arguments)}let ss=(()=>{class w extends is{constructor(_,b,D,x,W){super(_,b,x,W),this.provider=D,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const b=yield _.execute();return j(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,c.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const b=Xc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(D=>{_.reject(D)}),_.resolver._isIframeWebStorageSupported(_.auth,D=>{D||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,D;this.pollId=null!==(D=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,os.get())};_()}}return w.currentPopupAction=null,w})();const il="pendingRedirect",So=new Map;class ua extends is{constructor(m,_,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,c.Z)(function*(){let b=So.get(_.auth._key());if(!b){try{const x=(yield function Vu(w,m){return nf.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;b=()=>Promise.resolve(x)}catch(D){b=()=>Promise.reject(D)}So.set(_.auth._key(),b)}return _.bypassAuthState||So.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(b,m);if("unknown"!==m.type){if(m.eventId){const D=yield b.auth._redirectUserForId(m.eventId);if(D)return b.user=D,_().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function nf(){return(nf=(0,c.Z)(function*(w,m){const _=rf(m),b=vi(w);if(!(yield b._isAvailable()))return!1;const D="true"===(yield b._get(_));return yield b._remove(_),D})).apply(this,arguments)}function ol(w,m){return da.apply(this,arguments)}function da(){return(da=(0,c.Z)(function*(w,m){return vi(w)._set(rf(m),"true")})).apply(this,arguments)}function ks(){So.clear()}function sl(w,m){So.set(w._key(),m)}function vi(w){return it(w._redirectPersistence)}function rf(w){return tr(il,w.config.apiKey,w.name)}function ju(w,m,_){return function ki(w,m,_){return Mn.apply(this,arguments)}(w,m,_)}function Mn(){return(Mn=(0,c.Z)(function*(w,m,_){const b=Ln(w);he(w,m,Oi),yield b._initializationPromise;const D=Os(b,_);return yield ol(D,b),D._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function Ut(w,m,_){return function sc(w,m,_){return Cr.apply(this,arguments)}(w,m,_)}function Cr(){return(Cr=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w);he(b.auth,m,Oi),yield b.auth._initializationPromise;const D=Os(b.auth,_);yield ol(D,b.auth);const x=yield Po(b);return D._openRedirect(b.auth,m,"reauthViaRedirect",x)})).apply(this,arguments)}function Ci(w,m,_){return function al(w,m,_){return cl.apply(this,arguments)}(w,m,_)}function cl(){return(cl=(0,c.Z)(function*(w,m,_){const b=(0,V.m9)(w);he(b.auth,m,Oi),yield b.auth._initializationPromise;const D=Os(b.auth,_);yield Qa(!1,b,m.providerId),yield ol(D,b.auth);const x=yield Po(b);return D._openRedirect(b.auth,m,"linkViaRedirect",x)})).apply(this,arguments)}function d0(w,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,c.Z)(function*(w,m){return yield Ln(w)._initializationPromise,Ns(w,m,!1)})).apply(this,arguments)}function Ns(w,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(w,m,_=!1){const b=Ln(w),D=Os(b,m),W=yield new ua(b,D,_).execute();return W&&!_&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,m)),W})).apply(this,arguments)}function Po(w){return $u.apply(this,arguments)}function $u(){return($u=(0,c.Z)(function*(w){const m=Xc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class ac{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(_=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function cc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sf(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var b;if(m.error&&!sf(m)){const D=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(de(this.auth,D))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const b=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hm(m))}saveEventToCache(m){this.cachedEventUids.add(hm(m)),this.lastProcessedEventTime=Date.now()}}function hm(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function sf({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function af(w){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Mt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rs=/^https?/;function Fs(){return(Fs=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield af(w);for(const _ of m)try{if(fm(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function fm(w){const m=lt(),{protocol:_,hostname:b}=new URL(m);if(w.startsWith("chrome-extension://")){const W=new URL(w);return""===W.hostname&&""===b?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&W.hostname===b}if(!Rs.test(_))return!1;if(Mt.test(w))return b===w;const D=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(b)}const pm=new dn(3e4,6e4);function si(){const w=nr().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let dr=null;const mm=new dn(5e3,15e3),zu="__/auth/iframe",_m="emulator/auth/iframe",ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lc(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Wr(m,_m):`https://${w.config.authDomain}/${zu}`,b={apiKey:m.apiKey,appName:w.name,v:U.SDK_VERSION},D=Gu.get(w.config.apiHost);D&&(b.eid=D);const x=w._getFrameworks();return x.length&&(b.fw=x.join(",")),`${_}?${(0,V.xO)(b).slice(1)}`}function as(){return as=(0,c.Z)(function*(w){const m=yield function Ls(w){return dr=dr||function gm(w){return new Promise((m,_)=>{var b,D,x;function W(){si(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{si(),_(de(w,"network-request-failed"))},timeout:pm.get()})}if(null!==(D=null===(b=nr().gapi)||void 0===b?void 0:b.iframes)&&void 0!==D&&D.Iframe)m(gapi.iframes.getContext());else{if(null===(x=nr().gapi)||void 0===x||!x.load){const se=qo("iframefcb");return nr()[se]=()=>{gapi.load?W():_(de(w,"network-request-failed"))},mu(`https://apis.google.com/js/api.js?onload=${se}`).catch(Le=>_(Le))}W()}}).catch(m=>{throw dr=null,m})}(w),dr}(w),_=nr().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:lc(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ym,dontclear:!0},b=>new Promise(function(){var D=(0,c.Z)(function*(x,W){yield b.restyle({setHideOnLeave:!1});const se=de(w,"network-request-failed"),Le=nr().setTimeout(()=>{W(se)},mm.get());function He(){nr().clearTimeout(Le),x(b)}b.ping(He).then(He,()=>{W(se)})});return function(x,W){return D.apply(this,arguments)}}()))}),as.apply(this,arguments)}const ll={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ga{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vm="__/auth/handler",R1="emulator/auth/handler",cf=encodeURIComponent("fac");function Wi(w,m,_,b,D,x){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,c.Z)(function*(w,m,_,b,D,x){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const W={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:b,v:U.SDK_VERSION,eventId:D};if(m instanceof Oi){m.setDefaultLanguage(w.languageCode),W.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(W.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,kt]of Object.entries(x||{}))W[nt]=kt}if(m instanceof ei){const nt=m.getScopes().filter(kt=>""!==kt);nt.length>0&&(W.scopes=nt.join(","))}w.tenantId&&(W.tid=w.tenantId);const se=W;for(const nt of Object.keys(se))void 0===se[nt]&&delete se[nt];const Le=yield w._getAppCheckToken(),He=Le?`#${cf}=${encodeURIComponent(Le)}`:"";return`${function Ku({config:w}){return w.emulator?Wr(w,R1):`https://${w.authDomain}/${vm}`}(w)}?${(0,V.xO)(se).slice(1)}${He}`})).apply(this,arguments)}const Yn="webStorageSupport",cs=class lf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nu,this._completeRedirectFn=Ns,this._overrideRedirectResult=sl}_openPopup(m,_,b,D){var x=this;return(0,c.Z)(function*(){var W;Ue(null===(W=x.eventManagers[m._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const se=yield Wi(m,_,b,lt(),D);return function N1(w,m,_,b=500,D=600){const x=Math.max((window.screen.availHeight-D)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let se="";const Le=Object.assign(Object.assign({},ll),{width:b.toString(),height:D.toString(),top:x,left:W}),He=(0,V.z$)().toLowerCase();_&&(se=A(He)?"_blank":_),O(He)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((Vr,[Ki,ls])=>`${Vr}${Ki}=${ls},`,"");if(function wt(w=(0,V.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(He)&&"_self"!==se)return function Zu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(m||"",se),new ga(null);const kt=window.open(m||"",se,nt);j(kt,w,"popup-blocked");try{kt.focus()}catch{}return new ga(kt)}(m,se,Xc())})()}_openRedirect(m,_,b,D){var x=this;return(0,c.Z)(function*(){return yield x._originValidation(m),function Yh(w){nr().location.href=w}(yield Wi(m,_,b,lt(),D)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:D,promise:x}=this.eventManagers[_];return D?Promise.resolve(D):(Ue(x,"If manager is not set, promise should be"),x)}const b=this.initAndGetManager(m);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(m){var _=this;return(0,c.Z)(function*(){const b=yield function pa(w){return as.apply(this,arguments)}(m),D=new ac(m);return b.register("authEvent",x=>(j(x?.authEvent,m,"invalid-auth-event"),{status:D.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:D},_.iframes[m._key()]=b,D})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Yn,{type:Yn},D=>{var x;const W=null===(x=D?.[0])||void 0===x?void 0:x[Yn];void 0!==W&&_(!!W),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function fa(w){return Fs.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return At()||k()||Ke()}};class Cm{constructor(m){this.factorId=m}_process(m,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,b);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class ai extends Cm{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ai(m)}_finalizeEnroll(m,_,b){return function Zh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",oe(w,m))}(m,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function om(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",oe(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class w{constructor(){}static assertion(_){return ai._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var p0="@firebase/auth";class F1{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(b=>{m(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const g0=(0,V.Pz)("authIdTokenMaxAge")||300;let Qu=null;const m0=w=>function(){var m=(0,c.Z)(function*(_){const b=_&&(yield _.getIdTokenResult()),D=b&&((new Date).getTime()-Date.parse(b.issuedAtTime))/1e3;if(D&&D>g0)return;const x=b?.token;Qu!==x&&(Qu=x,yield fetch(w,{method:x?"POST":"DELETE",headers:x?{Authorization:`Bearer ${x}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function ma(w=(0,U.getApp)()){const m=(0,U._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function gn(w,m){const _=(0,U._getProvider)(w,"auth");if(_.isInitialized()){const D=_.getImmediate(),x=_.getOptions();if((0,V.vZ)(x,m??{}))return D;ee(D,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:cs,persistence:[Mo,Kh,Nu]}),b=(0,V.Pz)("authTokenSyncURL");if(b){const x=m0(b);(function Yg(w,m,_){(0,V.m9)(w).beforeAuthStateChanged(m,_)})(_,x,()=>x(_.currentUser)),function Jv(w,m,_,b){(0,V.m9)(w).onIdTokenChanged(m,_,b)}(_,W=>x(W))}const D=(0,V.q4)("auth");return D&&wh(_,`http://${D}`),_}!function uf(w){(0,U._registerComponent)(new be.wA("auth",(m,{options:_})=>{const b=m.getProvider("app").getImmediate(),D=m.getProvider("heartbeat"),x=m.getProvider("app-check-internal"),{apiKey:W,authDomain:se}=b.options;j(W&&!W.includes(":"),"invalid-api-key",{appName:b.name});const Le={apiKey:W,authDomain:se,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$c(w)},He=new Jr(b,D,x,Le);return function Ov(w,m){const _=m?.persistence||[],b=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(b,m?.popupRedirectResolver)}(He,_),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,b)=>{m.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new be.wA("auth-internal",m=>{const _=Ln(m.getProvider("auth").getImmediate());return new F1(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(p0,"0.23.2",function Ni(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,U.registerVersion)(p0,"0.23.2","esm2017")}("Browser")},9058:(ot,Ie,L)=>{L.d(Ie,{$s:()=>it,BH:()=>re,DV:()=>Zn,G6:()=>Wr,GJ:()=>En,L:()=>Me,LL:()=>ke,P0:()=>st,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Ur,US:()=>be,Wl:()=>ht,Yr:()=>dn,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>tn,cI:()=>nn,dS:()=>Hi,eu:()=>ce,g5:()=>U,gK:()=>Kt,gQ:()=>Tt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>tr,ne:()=>sn,p$:()=>G,pd:()=>mt,q4:()=>tt,r3:()=>on,ru:()=>lt,tV:()=>B,uI:()=>j,ug:()=>so,vZ:()=>_r,w1:()=>wn,w9:()=>Nn,xO:()=>bo,xb:()=>Si,z$:()=>Re,zI:()=>le,zd:()=>dt});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,$){if(!H)throw U($)},U=function(H){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ne=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let A=H.charCodeAt(k);A<128?$[O++]=A:A<2048?($[O++]=A>>6|192,$[O++]=63&A|128):55296==(64512&A)&&k+1<H.length&&56320==(64512&H.charCodeAt(k+1))?(A=65536+((1023&A)<<10)+(1023&H.charCodeAt(++k)),$[O++]=A>>18|240,$[O++]=A>>12&63|128,$[O++]=A>>6&63|128,$[O++]=63&A|128):($[O++]=A>>12|224,$[O++]=A>>6&63|128,$[O++]=63&A|128)}return $},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let A=0;A<H.length;A+=3){const K=H[A],me=A+1<H.length,Ve=me?H[A+1]:0,vt=A+2<H.length,Ke=vt?H[A+2]:0;let pn=(15&Ve)<<2|Ke>>6,At=63&Ke;vt||(At=64,me||(pn=64)),k.push(O[K>>2],O[(3&K)<<4|Ve>>4],O[pn],O[At])}return k.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,k=0;for(;O<H.length;){const A=H[O++];if(A<128)$[k++]=String.fromCharCode(A);else if(A>191&&A<224){const K=H[O++];$[k++]=String.fromCharCode((31&A)<<6|63&K)}else if(A>239&&A<365){const vt=((7&A)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[k++]=String.fromCharCode(55296+(vt>>10)),$[k++]=String.fromCharCode(56320+(1023&vt))}else{const K=H[O++],me=H[O++];$[k++]=String.fromCharCode((15&A)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let A=0;A<H.length;){const K=O[H.charAt(A++)],Ve=A<H.length?O[H.charAt(A)]:0;++A;const Ke=A<H.length?O[H.charAt(A)]:64;++A;const wt=A<H.length?O[H.charAt(A)]:64;if(++A,null==K||null==Ve||null==Ke||null==wt)throw new xe;k.push(K<<2|Ve>>4),64!==Ke&&(k.push(Ve<<4&240|Ke>>2),64!==wt&&k.push(Ke<<6&192|wt))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=ne(H);return be.encodeByteArray($,!0)},Me=function(H){return Fe(H).replace(/\./g,"")},B=function(H){try{return be.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=X(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const Te=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&B(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Te())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},st=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const k=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),k]:[$.substring(0,O),k]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=Te())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,k)=>{O?this.reject(O):this.resolve(k),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,k))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=$||"demo-project",A=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:A,exp:A+3600,auth_time:A,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(me)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function we(){var H;const $=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function lt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const H=Re();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function dn(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function Wr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const k="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(k);A.onsuccess=()=>{A.result.close(),O||self.indexedDB.deleteDatabase(k),H(!0)},A.onupgradeneeded=()=>{O=!1},A.onerror=()=>{var K;$((null===(K=A.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,k){super(O),this.code=$,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor($,O,k){this.service=$,this.serviceName=O,this.errors=k}create($,...O){const k=O[0]||{},A=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Be,(O,k)=>{const A=$[k];return null!=A?String(A):`<${k}?>`})}(K,k):"Error";return new pe(A,`${this.serviceName}: ${me} (${A}).`,k)}}const Be=/\{\$([^}]+)}/g;function nn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const Qt=function(H){let $={},O={},k={},A="";try{const K=H.split(".");$=nn(B(K[0])||""),O=nn(B(K[1])||""),A=K[2],k=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:k,signature:A}},Nn=function(H){const O=Qt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},En=function(H){const $=Qt(H).claims;return"object"==typeof $&&!0===$.admin};function on(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function Zn(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function Si(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Ur(H,$,O){const k={};for(const A in H)Object.prototype.hasOwnProperty.call(H,A)&&(k[A]=$.call(O,H[A],A,H));return k}function _r(H,$){if(H===$)return!0;const O=Object.keys(H),k=Object.keys($);for(const A of O){if(!k.includes(A))return!1;const K=H[A],me=$[A];if(Wn(K)&&Wn(me)){if(!_r(K,me))return!1}else if(K!==me)return!1}for(const A of k)if(!O.includes(A))return!1;return!0}function Wn(H){return null!==H&&"object"==typeof H}function bo(H){const $=[];for(const[O,k]of Object.entries(H))Array.isArray(k)?k.forEach(A=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(A))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(k));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[A,K]=k.split("=");$[decodeURIComponent(A)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const k=this.W_;if("string"==typeof $)for(let wt=0;wt<16;wt++)k[wt]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let wt=0;wt<16;wt++)k[wt]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let wt=16;wt<80;wt++){const pn=k[wt-3]^k[wt-8]^k[wt-14]^k[wt-16];k[wt]=4294967295&(pn<<1|pn>>>31)}let Ke,Jt,A=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Ve=this.chain_[3],vt=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(Ke=Ve^K&(me^Ve),Jt=1518500249):(Ke=K^me^Ve,Jt=1859775393):wt<60?(Ke=K&me|Ve&(K|me),Jt=2400959708):(Ke=K^me^Ve,Jt=3395469782);const pn=(A<<5|A>>>27)+Ke+vt+Jt+k[wt]&4294967295;vt=Ve,Ve=me,me=4294967295&(K<<30|K>>>2),K=A,A=pn}this.chain_[0]=this.chain_[0]+A&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const k=O-this.blockSize;let A=0;const K=this.buf_;let me=this.inbuf_;for(;A<O;){if(0===me)for(;A<=k;)this.compress_($,A),A+=this.blockSize;if("string"==typeof $){for(;A<O;)if(K[me]=$.charCodeAt(A),++me,++A,me===this.blockSize){this.compress_(K),me=0;break}}else for(;A<O;)if(K[me]=$[A],++me,++A,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let A=this.blockSize-1;A>=56;A--)this.buf_[A]=255&O,O/=256;this.compress_(this.buf_);let k=0;for(let A=0;A<5;A++)for(let K=24;K>=0;K-=8)$[k]=this.chain_[A]>>K&255,++k;return $}}function sn(H,$){const O=new fi(H,$);return O.subscribe.bind(O)}class fi{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(k=>{this.error(k)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,k){let A;if(void 0===$&&void 0===O&&void 0===k)throw new Error("Missing Observer.");A=function Nt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:k},void 0===A.next&&(A.next=Rn),void 0===A.error&&(A.error=Rn),void 0===A.complete&&(A.complete=Rn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Kt(H,$){return`${H} failed: ${$} argument `}const Hi=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let A=H.charCodeAt(k);if(A>=55296&&A<=56319){const K=A-55296;k++,V(k<H.length,"Surrogate pair missing trail surrogate."),A=65536+(K<<10)+(H.charCodeAt(k)-56320)}A<128?$[O++]=A:A<2048?($[O++]=A>>6|192,$[O++]=63&A|128):A<65536?($[O++]=A>>12|224,$[O++]=A>>6&63|128,$[O++]=63&A|128):($[O++]=A>>18|240,$[O++]=A>>12&63|128,$[O++]=A>>6&63|128,$[O++]=63&A|128)}return $},so=function(H){let $=0;for(let O=0;O<H.length;O++){const k=H.charCodeAt(O);k<128?$++:k<2048?$+=2:k>=55296&&k<=56319?($+=4,O++):$+=3}return $},yr=1e3,Ge=2,_e=144e5,Xe=.5;function it(H,$=yr,O=Ge){const k=$*Math.pow(O,H),A=Math.round(Xe*k*(Math.random()-.5)*2);return Math.min(_e,k+A)}function tr(H){return H&&H._delegate?H._delegate:H}},8596:(ot,Ie,L)=>{var c=L(5879);let V=null;function U(){return V}class ge{}const be=new c.OlP("DocumentToken");let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Me)},providedIn:"platform"})}return n})();const Fe=new c.OlP("Location Initialized");let Me=(()=>{class n extends xe{constructor(){super(),this._doc=(0,c.f3M)(be),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Je)},providedIn:"root"})}return n})();const Ae=new c.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+X(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+X(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(xe),c.LFG(Ae,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ce=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+X(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+X(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(xe),c.LFG(Ae,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})(),De=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(st(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,st(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=B;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(c.LFG(Oe))};static#i=this.\u0275prov=c.Yz7({token:n,factory:function(){return function Te(){return new De((0,c.LFG)(Oe))}()},providedIn:"root"})}return n})();function st(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[c.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[c.wAp.NumberSymbols][Ue.Group]}return r}const A=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function sa(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const _u=/\s+/,Ch=[];let Qr=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=Ch,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(_u):Ch}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(_u):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(_u).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class zc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new zc(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const f=r.get(s);r.move(f,u),Ln(f,i)}});for(let i=0,s=r.length;i<s;i++){const f=r.get(i).context;f.index=i,f.count=s,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ln(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Ln(n,e){n.context.$implicit=e.item}let gn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ov,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ov{constructor(){this.$implicit=null,this.ngIf=null}}function wh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function Pi(n,e){return new c.vHH(2100,!1)}let je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Ai(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function zo(n,e,t){return function At(n,e,t,r,i,s,u=!1){let f="",p=!1;if(isFinite(n)){let y=function Gi(n){let r,i,s,u,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=s,r=[],u=0;s<=f;s++,u++)r[u]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function Go(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let I=e.minInt,T=e.minFrac,S=e.maxFrac;if(s){const ze=s.match(A);if(null===ze)throw new Error(`${s} is not a valid digit info`);const Ne=ze[1],Ye=ze[3],gt=ze[5];null!=Ne&&(I=sa(Ne)),null!=Ye&&(T=sa(Ye)),null!=gt?S=sa(gt):null!=Ye&&T>S&&(S=T)}!function Yt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let u=s+n.integerLen,f=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let T=u;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=s+1),r[0]=0;for(let T=1;T<u;T++)r[T]=0}if(f>=5)if(u-1<0){for(let T=0;T>u;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,s);i++)r.push(0);let p=0!==s;const y=e+n.integerLen,I=r.reduceRight(function(T,S,N,q){return q[N]=(S+=T)<10?S:S-10,p&&(0===q[N]&&N>=y?q.pop():p=!1),S>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(y,T,S);let N=y.digits,q=y.integerLen;const Q=y.exponent;let J=[];for(p=N.every(ze=>!ze);q<I;q++)N.unshift(0);for(;q<0;q++)N.unshift(0);q>0?J=N.splice(q,N.length):(J=N,N=[0]);const Ee=[];for(N.length>=e.lgSize&&Ee.unshift(N.splice(-e.lgSize,N.length).join(""));N.length>e.gSize;)Ee.unshift(N.splice(-e.gSize,N.length).join(""));N.length&&Ee.unshift(N.join("")),f=Ee.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!p?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function Es(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=u[0],p=u[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let I=0;I<p.length;I++){const T=p.charAt(I);"0"===T?t.minFrac=t.maxFrac=I+1:"#"===T?t.maxFrac=I+1:t.posSuf+=T}const y=f.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const I=i.length-t.posPre.length-t.posSuf.length,T=s.indexOf("#");t.negPre=s.substring(0,T).replace(/'/g,""),t.negSuf=s.slice(T+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ke(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Ko(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw Pi()}}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.soG,16))};static#t=this.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Sr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Pi();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Kn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function xi(n){return"server"===n}let ei=(()=>{class n{static#e=this.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Qo((0,c.LFG)(be),window)})}return n})();class Qo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bg(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Eo{}class Kg extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $h extends Kg{static makeCurrent(){!function ne(n){V||(V=n)}(new $h)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function T1(){return Jc=Jc||document.querySelector("base"),Jc?Jc.getAttribute("href"):null}();return null==t?null:function Jv(n){Hh=Hh||document.createElement("a"),Hh.setAttribute("href",n);const e=Hh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Za(document.cookie,e)}}let Hh,Jc=null,M1=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Xv=new c.OlP("EventManagerPlugins");let e0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new c.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Xv),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class zh{constructor(e){this._doc=e}}const Gh="ng-app-id";let xu=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xi(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Gh}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Gh),s;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute(Gh,this.appId),u}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,u=s.get(r)?.elements;u?u.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(be),c.LFG(c.AFp),c.LFG(c.Ojb,8),c.LFG(c.Lbi))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const es={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ec=/%COMP%/g,To=new c.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function an(n,e){return e.map(t=>t.replace(ec,n))}let ku=(()=>{class n{constructor(t,r,i,s,u,f,p,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=u,this.platformId=f,this.ngZone=p,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=xi(f),this.defaultRenderer=new ts(t,u,p,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===c.ifc.ShadowDom&&(r={...r,encapsulation:c.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Kh?i.applyToHost(t):i instanceof mi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const u=this.doc,f=this.ngZone,p=this.eventManager,y=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case c.ifc.Emulated:s=new Kh(p,y,r,this.appId,I,u,f,T);break;case c.ifc.ShadowDom:return new tc(p,y,t,r,u,f,this.nonce,T);default:s=new mi(p,y,r,I,u,f,T)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(e0),c.LFG(xu),c.LFG(c.AFp),c.LFG(To),c.LFG(be),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(c.Ojb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class ts{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(es[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new c.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=es[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=es[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=U().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Wh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class tc extends ts{constructor(e,t,r,i,s,u,f,p){super(e,s,u,p),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=an(i.id,i.styles);for(const I of y){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=I,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mi extends ts{constructor(e,t,r,i,s,u,f,p){super(e,s,u,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=p?an(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Kh extends mi{constructor(e,t,r,i,s,u,f,p){const y=i+"-"+r.id;super(e,t,r,s,u,f,p,y),this.contentAttr=function Qg(n){return"_ngcontent-%COMP%".replace(ec,n)}(y),this.hostAttr=function Ou(n){return"_nghost-%COMP%".replace(ec,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let P1=(()=>{class n extends zh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(be))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Nu=["alt","control","meta","shift"],Ps={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xc=(()=>{class n extends zh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Nu.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Ps[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Nu.forEach(u=>{u!==i&&(0,Jg[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(be))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const tm=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function _t(){$h.makeCurrent()},multi:!0},{provide:be,useFactory:function A1(){return(0,c.RDi)(document),document},deps:[]}]),r0=new c.OlP(""),nc=[{provide:c.rWj,useClass:class Yg{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new c.vHH(5103,!1);return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const f=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(p=>{p.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],As=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ru(){return new c.qLn},deps:[]},{provide:Xv,useClass:P1,multi:!0,deps:[be,c.R0b,c.Lbi]},{provide:Xv,useClass:Xc,multi:!0,deps:[be]},ku,xu,e0,{provide:c.FYo,useExisting:ku},{provide:Eo,useClass:M1,deps:[]},[]];let el=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(r0,12))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[...As,...nc],imports:[Kn,c.hGG]})}return n})(),ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(be))};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function rm(){return new ve((0,c.LFG)(be))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var _i=L(5592),ns=L(4674),_n=L(2459),ut=L(2096),lr=L(5619);const{isArray:Lu}=Array,{getPrototypeOf:tf,prototype:oi,keys:rs}=Object;function bn(n){if(1===n.length){const e=n[0];if(Lu(e))return{args:e,keys:null};if(function Os(n){return n&&"object"==typeof n&&tf(n)===oi}(e)){const t=rs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var la=L(2737),yt=L(7398);const{isArray:u0}=Array;function rl(n){return(0,yt.U)(e=>function dm(n,e){return u0(e)?n(...e):n(e)}(n,e))}var is=L(4564);function os(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var yi=L(8251),rc=L(7103);function ic(...n){const e=(0,is.yG)(n),t=(0,is.jO)(n),{args:r,keys:i}=bn(n);if(0===r.length)return(0,_n.D)([],e);const s=new _i.y(function oc(n,e,t=la.y){return r=>{Uu(e,()=>{const{length:i}=n,s=new Array(i);let u=i,f=i;for(let p=0;p<i;p++)Uu(e,()=>{const y=(0,_n.D)(n[p],e);let I=!1;y.subscribe((0,yi.x)(r,T=>{s[p]=T,I||(I=!0,f--),f||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>os(i,u):la.y));return t?s.pipe(rl(t)):s}function Uu(n,e,t){n?(0,rc.f)(t,n,e):e()}const ss=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var il=L(7537);function ua(...n){return function So(){return(0,il.J)(1)}()((0,_n.D)(n,(0,is.yG)(n)))}var Vu=L(4829);function nf(n){return new _i.y(e=>{(0,Vu.Xf)(n()).subscribe(e)})}var ol=L(8407);function da(n,e){const t=(0,ns.m)(n)?n:()=>n,r=i=>i.error(t());return new _i.y(e?i=>e.schedule(r,0,i):r)}var ks=L(6232),sl=L(7394),vi=L(9360);function rf(){return(0,vi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ju extends _i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sl.w0.EMPTY)}return e}refCount(){return rf()(this)}}var ki=L(8645),Mn=L(4664);function Ut(n){return n<=0?()=>ks.E:(0,vi.e)((e,t)=>{let r=0;e.subscribe((0,yi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sc(...n){const e=(0,is.yG)(n);return(0,vi.e)((t,r)=>{(e?ua(n,t,e):ua(n,t)).subscribe(r)})}function Cr(n,e){return(0,vi.e)((t,r)=>{let i=0;t.subscribe((0,yi.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Ci=L(1631);function al(n){return(0,vi.e)((e,t)=>{let r=!1;e.subscribe((0,yi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function cl(n=d0){return(0,vi.e)((e,t)=>{let r=!1;e.subscribe((0,yi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function d0(){return new ss}function ur(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):la.y,Ut(1),t?al(e):cl(()=>new ss))}function Ns(n,e){return(0,ns.m)(e)?(0,Ci.z)(n,e,1):(0,Ci.z)(n,1)}function Dn(n,e,t){const r=(0,ns.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,vi.e)((i,s)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let f=!0;i.subscribe((0,yi.x)(s,p=>{var y;null===(y=r.next)||void 0===y||y.call(r,p),s.next(p)},()=>{var p;f=!1,null===(p=r.complete)||void 0===p||p.call(r),s.complete()},p=>{var y;f=!1,null===(y=r.error)||void 0===y||y.call(r,p),s.error(p)},()=>{var p,y;f&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):la.y}function Po(n){return(0,vi.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,yi.x)(t,void 0,void 0,u=>{s=(0,Vu.Xf)(n(u,Po(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ha(n,e){return(0,vi.e)(function $u(n,e,t,r,i){return(s,u)=>{let f=t,p=e,y=0;s.subscribe((0,yi.x)(u,I=>{const T=y++;p=f?n(p,I,T):(f=!0,I),r&&u.next(p)},i&&(()=>{f&&u.next(p),u.complete()})))}}(n,e,arguments.length>=2,!0))}function ac(n){return n<=0?()=>ks.E:(0,vi.e)((e,t)=>{let r=[];e.subscribe((0,yi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cc(n){return(0,vi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var af=L(2420);const Mt="primary",Rs=Symbol("RouteTitle");class fa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fs(n){return new fa(n)}function fm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],f=n[s];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gm(n[i],e[i]))return!1;return!0}function gm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function dr(n){return n.length>0?n[n.length-1]:null}function Ls(n){return function um(n){return!!n&&(n instanceof _i.y||(0,ns.m)(n.lift)&&(0,ns.m)(n.subscribe))}(n)?n:(0,c.QGY)(n)?(0,_n.D)(Promise.resolve(n)):(0,ut.of)(n)}const mm={exact:function Gu(n,e,t){if(!ga(n.segments,e.segments)||!ll(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Gu(n.children[r],e.children[r],t))return!1;return!0},subset:pa},zu={exact:function ym(n,e){return si(n,e)},subset:function lc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gm(n[t],e[t]))},ignored:()=>!0};function _m(n,e,t){return mm[t.paths](n.root,e.root,t.matrixParams)&&zu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pa(n,e,t){return as(n,e,e.segments,t)}function as(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ga(i,t)||e.hasChildren()||!ll(i,t,r))}if(n.segments.length===t.length){if(!ga(n.segments,t)||!ll(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ga(n.segments,i)&&ll(n.segments,i,r)&&n.children[Mt])&&as(n.children[Mt],e,s,r)}}function ll(n,e,t){return e.every((r,i)=>zu[t](n[i].parameters,r.parameters))}class Us{constructor(e=new qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return R1.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}}class qu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fs(this.parameters)),this._parameterMap}toString(){return ai(this)}}function ga(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new vm},providedIn:"root"})}return n})();class vm{parse(e){const t=new hc(e);return new Us(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wi(e.root,!0)}`,r=function f0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ku(t)}=${Ku(i)}`).join("&"):`${Ku(t)}=${Ku(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Yn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const R1=new vm;function cf(n){return n.segments.map(e=>ai(e)).join("/")}function Wi(n,e){if(!n.hasChildren())return cf(n);if(e){const t=n.children[Mt]?Wi(n.children[Mt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Mt&&r.push(`${i}:${Wi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function N1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Mt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Mt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Mt?[Wi(n.children[Mt],!1)]:[`${i}:${Wi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${cf(n)}/${t[0]}`:`${cf(n)}/(${t.join("//")})`}}function Wu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ku(n){return Wu(n).replace(/%3B/gi,";")}function lf(n){return Wu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cs(n){return decodeURIComponent(n)}function Cm(n){return cs(n.replace(/\+/g,"%20"))}function ai(n){return`${lf(n.path)}${function uc(n){return Object.keys(n).map(e=>`;${lf(e)}=${lf(n[e])}`).join("")}(n.parameters)}`}const dc=/^[^\/()?;#]+/;function Bs(n){const e=n.match(dc);return e?e[0]:""}const Yu=/^[^\/()?;=#]+/,wm=/^[^=?&#]+/,Ni=/^[^&#]+/;class hc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new qt(e,t)),r}parseSegment(){const e=Bs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new qu(cs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function p0(n){const e=n.match(Yu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Bs(this.remaining);i&&(r=i,this.capture(r))}e[cs(t)]=cs(r)}parseQueryParam(e){const t=function F1(n){const e=n.match(wm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function uf(n){const e=n.match(Ni);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Cm(t),s=Cm(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Mt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Mt]:new qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function g0(n){return n.segments.length>0?new qt([],{[Mt]:n}):n}function Qu(n){const e={};for(const r of Object.keys(n.children)){const s=Qu(n.children[r]);if(r===Mt&&0===s.segments.length&&s.hasChildren())for(const[u,f]of Object.entries(s.children))e[u]=f;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function m0(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}function ma(n){return n instanceof Us}function m(n){let e;const i=g0(function t(s){const u={};for(const p of s.children){const y=t(p);u[p.outlet]=y}const f=new qt(s.url,u);return s===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return x(i,i,i,t,r);const s=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new se(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const f={};return Object.entries(s.outlets).forEach(([p,y])=>{f[p]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((f,p)=>{0==p&&"."===f||(0==p&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,s]},[]);return new se(t,e,r)}(e);if(s.toRoot())return x(i,i,new qt([],{}),t,r);const u=function nt(n,e,t){if(n.isAbsolute)return new He(e,!0,0);if(!t)return new He(e,!1,NaN);if(null===t.parent)return new He(t,!0,0);const r=b(n.commands[0])?0:1;return function kt(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new He(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),f=u.processChildren?ls(u.segmentGroup,u.index,s.commands):Ki(u.segmentGroup,u.index,s.commands);return x(i,u.segmentGroup,f,t,r)}function b(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function D(n){return"object"==typeof n&&null!=n&&n.outlets}function x(n,e,t,r,i){let u,s={};r&&Object.entries(r).forEach(([p,y])=>{s[p]=Array.isArray(y)?y.map(I=>`${I}`):`${y}`}),u=n===e?t:W(n,e,t);const f=g0(Qu(u));return new Us(f,s,i)}function W(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:W(s,e,t)}),new qt(n.segments,r)}class se{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&b(r[0]))throw new c.vHH(4003,!1);const i=r.find(D);if(i&&i!==dr(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ki(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return ls(n,e,t);const r=function bm(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],f=t[r];if(D(f))break;const p=`${f}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Ju(p,y,u))return s;r+=2}else{if(!Ju(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new qt(n.segments.slice(0,r.pathIndex),{});return s.children[Mt]=new qt(n.segments.slice(r.pathIndex),n.children),ls(s,0,i)}return r.match&&0===i.length?new qt(n.segments,{}):r.match&&!n.hasChildren()?ul(n,e,t):r.match?ls(n,0,i):ul(n,e,t)}function ls(n,e,t){if(0===t.length)return new qt(n.segments,{});{const r=function Vr(n){return D(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Mt)&&n.children[Mt]&&1===n.numberOfChildren&&0===n.children[Mt].segments.length){const s=ls(n.children[Mt],e,t);return new qt(n.segments,s.children)}return Object.entries(r).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[s]=Ki(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===r[s]&&(i[s]=u)}),new qt(n.segments,i)}}function ul(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(D(s)){const p=_a(s.outlets);return new qt(r,p)}if(0===i&&b(t[0])){r.push(new qu(n.segments[e].path,ya(t[0]))),i++;continue}const u=D(s)?s.outlets[Mt]:`${s}`,f=i<t.length-1?t[i+1]:null;u&&f&&b(f)?(r.push(new qu(u,ya(f))),i+=2):(r.push(new qu(u,{})),i++)}return new qt(r,{})}function _a(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ul(new qt([],{}),0,r))}),e}function ya(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ju(n,e,t){return n==t.path&&si(e,t.parameters)}const dl="imperative";class Yi{constructor(e,t){this.id=e,this.url=t}}class fc extends Yi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ao extends Yi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hl extends Yi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vs extends Yi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xu extends Yi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class df extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L1 extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FP extends Yi{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class U1 extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lL extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B1{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class hf{}class V1{constructor(e){this.url=e}}class hL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Im,this.attachRef=null}}let Im=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class VP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=y0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=y0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ed(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ed(e,this._root).map(t=>t.value)}}function y0(n,e){if(n===e.value)return e;for(const t of e.children){const r=y0(n,t);if(r)return r}return null}function ed(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ed(n,t);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class v0 extends VP{constructor(e,t){super(e),this.snapshot=t,b0(this,e)}toString(){return this.snapshot.toString()}}function C0(n,e){const t=function td(n,e){const u=new pl([],{},{},"",{},Mt,e,null,{});return new ff("",new xo(u,[]))}(0,e),r=new lr.X([new qu("",{})]),i=new lr.X({}),s=new lr.X({}),u=new lr.X({}),f=new lr.X(""),p=new va(r,i,u,f,s,Mt,e,t.root);return p.snapshot=t.root,new v0(new xo(p,[]),t)}class va{constructor(e,t,r,i,s,u,f,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=u,this.component=f,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,yt.U)(y=>y[Rs]))??(0,ut.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Fs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Fs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function w0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Em(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pl{get title(){return this.data?.[Rs]}constructor(e,t,r,i,s,u,f,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=f,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ff extends VP{constructor(e,t){super(t),this.url=e,b0(this,t)}toString(){return j1(this._root)}}function b0(n,e){e.value._routerState=n,e.children.forEach(t=>b0(n,t))}function j1(n){const e=n.children.length>0?` { ${n.children.map(j1).join(", ")} } `:"";return`${n.value}${e}`}function I0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,si(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),si(e.params,t.params)||n.paramsSubject.next(t.params),function pm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),si(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Tm(n,e){const t=si(n.params,e.params)&&function h0(n,e){return ga(n,e)&&n.every((t,r)=>si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Tm(n.parent,e.parent))}let pf=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(Im),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb),this.inputBinder=(0,c.f3M)(Mm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,!1);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,p=new jP(t,f,i.injector);this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]})}return n})();class jP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===va?this.route:e===Im?this.childContexts:this.parent.get(e,t)}}const Mm=new c.OlP("");let $1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=ic([r.queryParams,r.params,r.data]).pipe((0,Mn.w)(([s,u,f],p)=>(f={...s,...u,...f},0===p?(0,ut.of)(f):Promise.resolve(f)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,c.qFp)(r.component);if(u)for(const{templateName:f}of u.inputs)t.activatedComponentRef.setInput(f,s[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function gf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function $P(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gf(n,r,i);return gf(n,r)})}(n,e,t);return new xo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>gf(n,f)),u}}const r=function Qi(n){return new va(new lr.X(n.url),new lr.X(n.params),new lr.X(n.queryParams),new lr.X(n.fragment),new lr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>gf(n,s));return new xo(r,i)}}const mf="ngNavigationCancelingError";function E0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ma(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Dm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Dm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[mf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function nd(n){return n&&n[mf]}let T0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(r,i){1&r&&c._UZ(0,"router-outlet")},dependencies:[pf],encapsulation:2})}return n})();function _f(n){const e=n.children&&n.children.map(_f),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=T0),t}function lo(n){return n.outlet||Mt}function Ca(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G1{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),I0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=fl(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fl(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fl(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=fl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new dL(s.value.snapshot))}),e.children.length&&this.forwardEvent(new UP(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(I0(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),I0(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=Ca(i.snapshot);u.attachRef=null,u.route=i,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class M0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yf{constructor(e,t){this.component=e,this.route=t}}function rd(n,e,t){const r=n._root;return ml(r,e?e._root:null,t,[r.value])}function gl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function ml(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=fl(e);return n.children.forEach(u=>{(function Pm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function QP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ga(n.url,e.url)||!si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tm(n,e)||!si(n.queryParams,e.queryParams);default:return!Tm(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new M0(r)):(s.data=u.data,s._resolvedData=u._resolvedData),ml(n,e,s.component?f?f.children:null:t,r,i),p&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new yf(f.outlet.component,u))}else u&&vf(e,f,i),i.canActivateChecks.push(new M0(r)),ml(n,null,s.component?f?f.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,f])=>vf(f,t.getContext(u),i)),i}function vf(n,e,t){const r=fl(n),i=n.value;Object.entries(r).forEach(([s,u])=>{vf(u,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new yf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Cf(n){return"function"==typeof n}function W1(n){return n instanceof ss||"EmptyError"===n?.name}const id=Symbol("INITIAL_VALUE");function _l(){return(0,Mn.w)(n=>ic(n.map(e=>e.pipe(Ut(1),sc(id)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===id)return id;if(!1===t||t instanceof Us)return t}return!0}),Cr(e=>e!==id),Ut(1)))}function S0(n){return(0,ol.z)(Dn(e=>{if(ma(e))throw E0(0,e)}),(0,yt.U)(e=>!0===e))}class wf{constructor(e){this.segmentGroup=e||null}}class bf{constructor(e){this.urlTree=e}}function js(n){return da(new wf(n))}function A0(n){return da(new bf(n))}class X1{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new c.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(r);if(i.numberOfChildren>1||!i.children[Mt])return da(new c.vHH(4e3,!1));i=i.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Us(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const f=s.substring(1);r[i]=t[f]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([f,p])=>{u[f]=this.createSegmentGroup(e,p,r,i)}),new qt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const If={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ef(n,e,t,r,i){const s=O0(n,e,t);return s.matched?(r=function z1(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function P0(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ut.of)(!0);const s=i.map(u=>{const f=gl(u,n);return Ls(function D0(n){return n&&Cf(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(s).pipe(_l(),S0())}(r,e,t).pipe((0,yt.U)(u=>!0===u?s:{...If}))):(0,ut.of)(s)}function O0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...If}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||fm)(t,n,e);if(!i)return{...If};const s={};Object.entries(i.posParams??{}).forEach(([f,p])=>{s[f]=p.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function k0(n,e,t,r){return t.length>0&&function sA(n,e,t){return t.some(r=>Tf(n,e,r)&&lo(r)!==Mt)}(n,t,r)?{segmentGroup:new qt(e,oA(r,new qt(t,n.children))),slicedSegments:[]}:0===t.length&&function eE(n,e,t){return t.some(r=>Tf(n,e,r))}(n,t,r)?{segmentGroup:new qt(n.segments,iA(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qt(n.segments,n.children),slicedSegments:t}}function iA(n,e,t,r,i){const s={};for(const u of r)if(Tf(n,t,u)&&!i[lo(u)]){const f=new qt([],{});s[lo(u)]=f}return{...i,...s}}function oA(n,e){const t={};t[Mt]=e;for(const r of n)if(""===r.path&&lo(r)!==Mt){const i=new qt([],{});t[lo(r)]=i}return t}function Tf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class aA{constructor(e,t,r,i,s,u,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new X1(this.urlSerializer,this.urlTree)}noMatchError(e){return new c.vHH(4002,!1)}recognize(){const e=k0(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe(Po(t=>{if(t instanceof bf)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof wf?this.noMatchError(t):t}),(0,yt.U)(t=>{const r=new pl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,{}),i=new xo(r,t),s=new ff("",i),u=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Mt).pipe(Po(r=>{throw r instanceof wf?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=w0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,_n.D)(i).pipe(Ns(s=>{const u=r.children[s],f=function KP(n,e){const t=n.filter(r=>lo(r)===e);return t.push(...n.filter(r=>lo(r)!==e)),t}(t,s);return this.processSegmentGroup(e,f,u,s)}),ha((s,u)=>(s.push(...u),s)),al(null),function hm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):la.y,ac(1),t?al(e):cl(()=>new ss))}(),(0,Ci.z)(s=>{if(null===s)return js(r);const u=tE(s);return function cA(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,ut.of)(u)}))}processSegment(e,t,r,i,s,u){return(0,_n.D)(t).pipe(Ns(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,s,u).pipe(Po(p=>{if(p instanceof wf)return(0,ut.of)(null);throw p}))),ur(f=>!!f),Po(f=>{if(W1(f))return function N0(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,ut.of)([]):js(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,s,u,f){return function km(n,e,t,r){return!!(lo(n)===r||r!==Mt&&Tf(e,t,n))&&("**"===n.path||O0(e,n,t).matched)}(r,i,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,u):js(i):js(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?A0(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,Ci.z)(u=>{const f=new qt(u,{});return this.processSegment(e,t,f,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:f,consumedSegments:p,remainingSegments:y,positionalParamSegments:I}=O0(t,i,s);if(!f)return js(t);const T=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,I);return i.redirectTo.startsWith("/")?A0(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,Ci.z)(S=>this.processSegment(e,r,t,S.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,u){let f;if("**"===r.path){const p=i.length>0?dr(i).parameters:{},y=new pl(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rE(r),lo(r),r.component??r._loadedComponent??null,r,vl(r));f=(0,ut.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Ef(t,r,i,e).pipe((0,yt.U)(({matched:p,consumedSegments:y,remainingSegments:I,parameters:T})=>p?{snapshot:new pl(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rE(r),lo(r),r.component??r._loadedComponent??null,r,vl(r)),consumedSegments:y,remainingSegments:I}:null));return f.pipe((0,Mn.w)(p=>null===p?js(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mn.w)(({routes:y})=>{const I=r._loadedInjector??e,{snapshot:T,consumedSegments:S,remainingSegments:N}=p,{segmentGroup:q,slicedSegments:Q}=k0(t,S,N,y);if(0===Q.length&&q.hasChildren())return this.processChildren(I,y,q).pipe((0,yt.U)(Ee=>null===Ee?null:[new xo(T,Ee)]));if(0===y.length&&0===Q.length)return(0,ut.of)([new xo(T,[])]);const J=lo(r)===s;return this.processSegment(I,y,q,Q,J?Mt:s,!0).pipe((0,yt.U)(Ee=>[new xo(T,Ee)]))}))))}getChildConfig(e,t,r){return t.children?(0,ut.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ut.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function J1(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ut.of)(!0);const s=i.map(u=>{const f=gl(u,n);return Ls(function XP(n){return n&&Cf(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(s).pipe(_l(),S0())}(e,t,r).pipe((0,Ci.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Dn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Om(n){return da(Dm(!1,3))}())):(0,ut.of)({routes:[],injector:e})}}function _L(n){const e=n.value.routeConfig;return e&&""===e.path}function tE(n){const e=[],t=new Set;for(const r of n){if(!_L(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=tE(r.children);e.push(new xo(r.value,i))}return e.filter(r=>!t.has(r))}function rE(n){return n.data||{}}function vl(n){return n.resolve||{}}function cE(n){return"string"==typeof n.title||null===n.title}function F0(n){return(0,Mn.w)(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,yt.U)(()=>e)):(0,ut.of)(e)})}const sd=new c.OlP("ROUTES");let L0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ut.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ls(t.loadComponent()).pipe((0,yt.U)(ad),Dn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),cc(()=>{this.componentLoaders.delete(t)})),i=new ju(r,()=>new ki.x).pipe(rf());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ut.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function lA(n,e,t,r){return Ls(n.loadChildren()).pipe((0,yt.U)(ad),(0,Ci.z)(i=>i instanceof c.YKP||Array.isArray(i)?(0,ut.of)(i):(0,_n.D)(e.compileModuleAsync(i))),(0,yt.U)(i=>{r&&r(n);let s,u,f=!1;return Array.isArray(i)?(u=i,!0):(s=i.create(t).injector,u=s.get(sd,[],{optional:!0,self:!0}).flat()),{routes:u.map(_f),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(cc(()=>{this.childrenLoaders.delete(r)})),u=new ju(s,()=>new ki.x).pipe(rf());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ad(n){return function pc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Rm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ki.x,this.transitionAbortSubject=new ki.x,this.configLoader=(0,c.f3M)(L0),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(Zu),this.rootContexts=(0,c.f3M)(Im),this.inputBindingEnabled=null!==(0,c.f3M)(Mm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new uL(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new B1(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new lr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:dl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Cr(s=>0!==s.id),(0,yt.U)(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),(0,Mn.w)(s=>{this.currentTransition=s;let u=!1,f=!1;return(0,ut.of)(s).pipe(Dn(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Mn.w)(p=>{const y=p.currentBrowserUrl.toString(),I=!t.navigated||p.extractedUrl.toString()!==y||y!==p.currentUrlTree.toString();if(!I&&"reload"!==(p.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Vs(p.id,this.urlSerializer.serialize(p.rawUrl),S,0)),p.resolve(null),ks.E}if(t.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,ut.of)(p).pipe((0,Mn.w)(S=>{const N=this.transitions?.getValue();return this.events.next(new fc(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?ks.E:Promise.resolve(S)}),function Nm(n,e,t,r,i,s){return(0,Ci.z)(u=>function od(n,e,t,r,i,s,u="emptyOnly"){return new aA(n,e,t,r,i,u,s).recognize()}(n,e,t,r,u.extractedUrl,i,s).pipe((0,yt.U)(({state:f,tree:p})=>({...u,targetSnapshot:f,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Dn(S=>{s.targetSnapshot=S.targetSnapshot,s.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const N=new df(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:S,extractedUrl:N,source:q,restoredState:Q,extras:J}=p,Ee=new fc(S,this.urlSerializer.serialize(N),q,Q);this.events.next(Ee);const ze=C0(0,this.rootComponentType).snapshot;return this.currentTransition=s={...p,targetSnapshot:ze,urlAfterRedirects:N,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,ut.of)(s)}{const S="";return this.events.next(new Vs(p.id,this.urlSerializer.serialize(p.extractedUrl),S,1)),p.resolve(null),ks.E}}),Dn(p=>{const y=new L1(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}),(0,yt.U)(p=>(this.currentTransition=s={...p,guards:rd(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},s)),function yl(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,ut.of)({...t,guardsResult:!0}):function K1(n,e,t,r){return(0,_n.D)(n).pipe((0,Ci.z)(i=>function Q1(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,ut.of)(!0);const u=s.map(f=>{const p=Ca(e)??i,y=gl(f,p);return Ls(function Am(n){return n&&Cf(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(ur())});return(0,ut.of)(u).pipe(_l())}(i.component,i.route,t,e,r)),ur(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Ci.z)(f=>f&&function JP(n){return"boolean"==typeof n}(f)?function Y1(n,e,t,r){return(0,_n.D)(e).pipe(Ns(i=>ua(function mL(n,e){return null!==n&&e&&e(new LP(n)),(0,ut.of)(!0)}(i.route.parent,r),function nA(n,e){return null!==n&&e&&e(new _0(n)),(0,ut.of)(!0)}(i.route,r),function rA(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function Sm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>nf(()=>{const f=u.guards.map(p=>{const y=Ca(u.node)??t,I=gl(p,y);return Ls(function q1(n){return n&&Cf(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(ur())});return(0,ut.of)(f).pipe(_l())}));return(0,ut.of)(s).pipe(_l())}(n,i.path,t),function xm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const i=r.map(s=>nf(()=>{const u=Ca(e)??t,f=gl(s,u);return Ls(function eA(n){return n&&Cf(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(ur())}));return(0,ut.of)(i).pipe(_l())}(n,i.route,t))),ur(i=>!0!==i,!0))}(r,s,n,e):(0,ut.of)(f)),(0,yt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,p=>this.events.next(p)),Dn(p=>{if(s.guardsResult=p.guardsResult,ma(p.guardsResult))throw E0(0,p.guardsResult);const y=new FP(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(y)}),Cr(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),F0(p=>{if(p.guards.canActivateChecks.length)return(0,ut.of)(p).pipe(Dn(y=>{const I=new U1(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}),(0,Mn.w)(y=>{let I=!1;return(0,ut.of)(y).pipe(function R0(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ut.of)(t);let s=0;return(0,_n.D)(i).pipe(Ns(u=>function iE(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!cE(i)&&(s[Rs]=i.title),function oE(n,e,t,r){const i=function sE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ut.of)({});const s={};return(0,_n.D)(i).pipe((0,Ci.z)(u=>function aE(n,e,t,r){const i=Ca(e)??r,s=gl(n,i);return Ls(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(ur(),Dn(f=>{s[u]=f}))),ac(1),function sf(n){return(0,yt.U)(()=>n)}(s),Po(u=>W1(u)?ks.E:da(u)))}(s,n,e,r).pipe((0,yt.U)(u=>(n._resolvedData=u,n.data=w0(n,t).resolve,i&&cE(i)&&(n.data[Rs]=i.title),null)))}(u.route,r,n,e)),Dn(()=>s++),ac(1),(0,Ci.z)(u=>s===i.length?(0,ut.of)(t):ks.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Dn({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(y,"",2)}}))}),Dn(y=>{const I=new lL(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}))}),F0(p=>{const y=I=>{const T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe(Dn(S=>{I.component=S}),(0,yt.U)(()=>{})));for(const S of I.children)T.push(...y(S));return T};return ic(y(p.targetSnapshot.root)).pipe(al(),Ut(1))}),F0(()=>this.afterPreactivation()),(0,yt.U)(p=>{const y=function H1(n,e,t){const r=gf(n,e._root,t?t._root:void 0);return new v0(r,e)}(t.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=s={...p,targetRouterState:y},s}),Dn(()=>{this.events.next(new hf)}),((n,e,t,r)=>(0,yt.U)(i=>(new G1(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),Ut(1),Dn({next:p=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ao(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),t.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{u=!0}}),function Hu(n){return(0,vi.e)((e,t)=>{(0,Vu.Xf)(n).subscribe((0,yi.x)(t,()=>t.complete(),af.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Dn(p=>{throw p}))),cc(()=>{u||f||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Po(p=>{if(f=!0,nd(p))this.events.next(new hl(s.id,this.urlSerializer.serialize(s.extractedUrl),p.message,p.cancellationCode)),function wi(n){return nd(n)&&ma(n.url)}(p)?this.events.next(new V1(p.url)):s.resolve(!1);else{this.events.next(new Xu(s.id,this.urlSerializer.serialize(s.extractedUrl),p,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(p))}catch(y){s.reject(y)}}return ks.E}))}))}cancelNavigationTransition(t,r,i){const s=new hl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uA(n){return n!==dl}let dA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[Rs]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(yL)},providedIn:"root"})}return n})(),yL=(()=>{class n extends dA{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ve))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(lE)},providedIn:"root"})}return n})();class CL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lE=(()=>{class n extends CL{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Fm=new c.OlP("",{providedIn:"root",factory:()=>({})});let hA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(fA)},providedIn:"root"})}return n})(),fA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Mf||{});function Lm(n,e){n.events.pipe(Cr(t=>t instanceof Ao||t instanceof hl||t instanceof Xu||t instanceof Vs),(0,yt.U)(t=>t instanceof Ao||t instanceof Vs?Mf.COMPLETE:t instanceof hl&&(0===t.code||1===t.code)?Mf.REDIRECTING:Mf.FAILED),Cr(t=>t!==Mf.REDIRECTING),Ut(1)).subscribe(()=>{e()})}function wa(n){throw n}function Df(n,e,t){return e.parse("/")}const uE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this._events=new ki.x,this.options=(0,c.f3M)(Fm,{optional:!0})||{},this.pendingTasks=(0,c.f3M)(c.HDt),this.errorHandler=this.options.errorHandler||wa,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Df,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(hA),this.routeReuseStrategy=(0,c.f3M)(vL),this.titleStrategy=(0,c.f3M)(dA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,c.f3M)(sd,{optional:!0})?.flat()??[],this.navigationTransitions=(0,c.f3M)(Rm),this.urlSerializer=(0,c.f3M)(Zu),this.location=(0,c.f3M)(De),this.componentInputBindingEnabled=!!(0,c.f3M)(Mm,{optional:!0}),this.eventsSubscription=new sl.w0,this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Us,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=C0(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(pA(r)&&this._events.next(r));if(r instanceof fc)uA(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Vs)this.rawUrlTree=i.rawUrl;else if(r instanceof df){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof hf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof hl)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof V1){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uA(i.source)};this.scheduleNavigation(s,dl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Xu&&this.restoreHistory(i,!0),r instanceof Ao&&(this.navigated=!0),pA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),dl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:f,preserveFragment:p}=r,y=p?this.currentUrlTree.fragment:u;let T,I=null;switch(f){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}null!==I&&(I=this.removeEmptyProps(I));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,I,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ma(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,dl,null,r)}navigate(t,r={skipLocationChange:!1}){return function wL(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new c.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...uE}:!1===r?{...dE}:r,ma(t))return _m(this.currentUrlTree,t,i);const s=this.parseUrl(t);return _m(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let f,p,y;u?(f=u.resolve,p=u.reject,y=u.promise):y=new Promise((T,S)=>{f=T,p=S});const I=this.pendingTasks.add();return Lm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:f,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pA(n){return!(n instanceof hf||n instanceof V1)}let cd=(()=>{class n{constructor(t,r,i,s,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new ki.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Ao&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn),c.Y36(va),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Oe))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&c.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&c.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",c.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",c.VuI],replaceUrl:["replaceUrl","replaceUrl",c.VuI],routerLink:"routerLink"},standalone:!0,features:[c.Xq5,c.TTD]})}return n})(),Sf=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,u){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Ao&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,(0,ut.of)(null)).pipe((0,il.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,_n.D)(t).pipe((0,il.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function U0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(cd,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&c.Suo(s,cd,5),2&r){let u;c.iGM(u=c.CRH())&&(i.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]})}return n})();class gA{}let _A=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof Ao),Ns(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,f=s._loadedInjector??u;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(u,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(f,s.children??s._loadedRoutes))}return(0,_n.D)(i).pipe((0,il.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ut.of)(null);const s=i.pipe((0,Ci.z)(u=>null===u?(0,ut.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,_n.D)([s,u]).pipe((0,il.J)())}return s})}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(hn),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(gA),c.LFG(L0))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const B0=new c.OlP("");let hE=(()=>{class n{constructor(t,r,i,s,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ao?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vs&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new BP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){c.$Z()};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function Oo(n,e){return{\u0275kind:n,\u0275providers:e}}function pE(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(hn),i=n.get(gE);1===n.get(Af)&&r.initialNavigation(),n.get(_E,null,c.XFs.Optional)?.setUpPreloading(),n.get(B0,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const gE=new c.OlP("",{factory:()=>new ki.x}),Af=new c.OlP("",{providedIn:"root",factory:()=>1}),_E=new c.OlP("");function CA(n){return Oo(0,[{provide:_E,useExisting:_A},{provide:gA,useExisting:n}])}const ld=new c.OlP("ROUTER_FORROOT_GUARD"),yE=[De,{provide:Zu,useClass:vm},hn,Im,{provide:va,useFactory:function V0(n){return n.routerState.root},deps:[hn]},L0,[]];function vE(){return new c.PXZ("Router",hn)}let Um=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yE,[],{provide:sd,multi:!0,useValue:t},{provide:ld,useFactory:wE,deps:[[hn,new c.FiY,new c.tp0]]},{provide:Fm,useValue:r||{}},r?.useHash?{provide:Oe,useClass:Ce}:{provide:Oe,useClass:Je},{provide:B0,useFactory:()=>{const n=(0,c.f3M)(ei),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(Fm),r=(0,c.f3M)(Rm),i=(0,c.f3M)(Zu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hE(i,r,n,e,t)}},r?.preloadingStrategy?CA(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:vE},r?.initialNavigation?Bm(r):[],r?.bindToComponentInputs?Oo(8,[$1,{provide:Mm,useExisting:$1}]).\u0275providers:[],[{provide:IA,useFactory:pE},{provide:c.tb,multi:!0,useExisting:IA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:sd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ld,8))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function wE(n){return"guarded"}function Bm(n){return["disabled"===n.initialNavigation?Oo(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(hn);return()=>{e.setUpLocationChangeListener()}}},{provide:Af,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Oo(2,[{provide:Af,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(hn),s=e.get(gE);Lm(i,()=>{r(!0)}),e.get(Rm).afterPreactivation=()=>(r(!0),s.closed?(0,ut.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const IA=new c.OlP("");var R=L(5861),Vm=L(305);function $t(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const s=new Vm.Hp({next:u=>{r(u),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ss)}});n.subscribe(s)})}class H0 extends sl.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Cl={setInterval(n,e,...t){const{delegate:r}=Cl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Cl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var $s=L(9039);class Of extends H0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Cl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Cl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,$s.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const kf={now:()=>(kf.delegate||Date).now(),delegate:void 0};class Nf{constructor(e,t=Nf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Nf.now=kf.now;class IE extends Nf{constructor(e,t=Nf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const z0=new IE(Of);var Sn=L(7592);(0,Sn.registerVersion)("firebase","9.23.0","app");var wr=L(4537),Ri=L(7879),z=L(9058),EE=L(1878);class G0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function DL(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const TE="@firebase/app",wl=new Ri.Yd("@firebase/app"),zm="[DEFAULT]",xL={[TE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bl=new Map,Il=new Map;function eC(n,e){try{n.container.addComponent(e)}catch(t){wl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ji(n){const e=n.name;if(Il.has(e))return wl.debug(`There were multiple attempts to register component ${e}.`),!1;Il.set(e,n);for(const t of bl.values())eC(t,n);return!0}function El(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ba=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class AE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ba.create("app-deleted",{appName:this._name})}}function xE(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:zm,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ba.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw ba.create("no-options");const s=bl.get(i);if(s){if((0,z.vZ)(t,s.options)&&(0,z.vZ)(r,s.config))return s;throw ba.create("duplicate-app",{appName:i})}const u=new wr.H0(i);for(const p of Il.values())u.addComponent(p);const f=new AE(t,r,u);return bl.set(i,f),f}function Uf(n=zm){const e=bl.get(n);if(!e&&n===zm&&(0,z.aH)())return xE();if(!e)throw ba.create("no-app",{appName:n});return e}function Fi(n,e,t){var r;let i=null!==(r=xL[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){const f=[`Unable to register library "${i}" with version "${e}":`];return s&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void wl.warn(f.join(" "))}Ji(new wr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const RA="firebase-heartbeat-database",FA=1,fd="firebase-heartbeat-store";let Gm=null;function qm(){return Gm||(Gm=(0,EE.X3)(RA,FA,{upgrade:(n,e)=>{0===e&&n.createObjectStore(fd)}}).catch(n=>{throw ba.create("idb-open",{originalErrorMessage:n.message})})),Gm}function Vf(){return(Vf=(0,R.Z)(function*(n){try{return yield(yield qm()).transaction(fd).objectStore(fd).get(OE(n))}catch(e){if(e instanceof z.ZR)wl.warn(e.message);else{const t=ba.create("idb-get",{originalErrorMessage:e?.message});wl.warn(t.message)}}})).apply(this,arguments)}function nC(n,e){return rC.apply(this,arguments)}function rC(){return(rC=(0,R.Z)(function*(n,e){try{const r=(yield qm()).transaction(fd,"readwrite");yield r.objectStore(fd).put(e,OE(n)),yield r.done}catch(t){if(t instanceof z.ZR)wl.warn(t.message);else{const r=ba.create("idb-set",{originalErrorMessage:t?.message});wl.warn(r.message)}}})).apply(this,arguments)}function OE(n){return`${n.name}!${n.options.appId}`}class NE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,R.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=RE();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,R.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=RE(),{heartbeatsToSend:r,unsentEntries:i}=function UA(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(u=>u.agent===i.agent);if(s){if(s.dates.push(i.date),iC(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function RE(){return(new Date).toISOString().substring(0,10)}class LL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,R.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function FL(n){return Vf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,R.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return nC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,R.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return nC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function iC(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function FE(n){Ji(new wr.wA("platform-logger",e=>new G0(e),"PRIVATE")),Ji(new wr.wA("heartbeat",e=>new NE(e),"PRIVATE")),Fi(TE,"0.9.20",n),Fi(TE,"0.9.20","esm2017"),Fi("fire-js","")}("");const us=(n,e)=>e.some(t=>n instanceof t);let oC,BA;const Zm=new WeakMap,aC=new WeakMap,VA=new WeakMap,cC=new WeakMap,jf=new WeakMap;let lC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return aC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||VA.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function jA(n){return"function"==typeof n?function jr(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function gc(){return BA||(BA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(uC(this),e),zs(Zm.get(this))}:function(...e){return zs(n.apply(uC(this),e))}:function(e,...t){const r=n.call(uC(this),e,...t);return VA.set(r,e.sort?e.sort():[e]),zs(r)}}(n):(n instanceof IDBTransaction&&function LE(n){if(aC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});aC.set(n,e)}(n),us(n,function sC(){return oC||(oC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,lC):n)}function zs(n){if(n instanceof IDBRequest)return function Hs(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(zs(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Zm.set(t,n)}).catch(()=>{}),jf.set(e,n),e}(n);if(cC.has(n))return cC.get(n);const e=jA(n);return e!==n&&(cC.set(n,e),jf.set(e,n)),e}const uC=n=>jf.get(n),BE=["get","getKey","getAll","getAllKeys","count"],VE=["put","add","delete","clear"],dC=new Map;function hC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(dC.get(e))return dC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=VE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!BE.includes(t))return;const s=function(){var u=(0,R.Z)(function*(f,...p){const y=this.transaction(f,i?"readwrite":"readonly");let I=y.store;return r&&(I=I.index(p.shift())),(yield Promise.all([I[t](...p),i&&y.done]))[0]});return function(p){return u.apply(this,arguments)}}();return dC.set(e,s),s}!function UL(n){lC=n(lC)}(n=>({...n,get:(e,t,r)=>hC(e,t)||n.get(e,t,r),has:(e,t)=>!!hC(e,t)||n.has(e,t)}));const fC="@firebase/installations",pC="0.6.4",jE=1e4,$E=`w:${pC}`,gC="FIS_v2",pd="https://firebaseinstallations.googleapis.com/v1",Ia=36e5,Gs=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function mC(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function $f({projectId:n}){return`${pd}/projects/${n}/installations`}function md(n){return{token:n.token,requestStatus:2,expiresIn:GA(n.expiresIn),creationTime:Date.now()}}function _d(n,e){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,R.Z)(function*(n,e){const r=(yield e.json()).error;return Gs.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function _C({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function yC(n){return vC.apply(this,arguments)}function vC(){return(vC=(0,R.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function GA(n){return Number(n.replace("s","000"))}function CC(){return(CC=(0,R.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=$f(n),i=_C(n),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:gC,appId:n.appId,sdkVersion:$E})},p=yield yC(()=>fetch(r,f));if(p.ok){const y=yield p.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:md(y.authToken)}}throw yield _d("Create Installation",p)})).apply(this,arguments)}function qA(n){return new Promise(e=>{setTimeout(e,n)})}const GE=/^[cdef][\w-]{21}$/,Km="";function jL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Ym(n){return function VL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return GE.test(t)?t:Km}catch{return Km}}function Hf(n){return`${n.appName}!${n.appId}`}const Ml=new Map;function wC(n,e){const t=Hf(n);bC(t,e),function Dt(n,e){const t=function IC(){return!mc&&"BroadcastChannel"in self&&(mc=new BroadcastChannel("[Firebase] FID Change"),mc.onmessage=n=>{bC(n.data.key,n.data.fid)}),mc}();t&&t.postMessage({key:n,fid:e}),function Dl(){0===Ml.size&&mc&&(mc.close(),mc=null)}()}(t,e)}function bC(n,e){const t=Ml.get(n);if(t)for(const r of t)r(e)}let mc=null;const ZE="firebase-installations-database",WA=1,qs="firebase-installations-store";let _c=null;function zf(){return _c||(_c=function $A(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const u=indexedDB.open(n,e),f=zs(u);return r&&u.addEventListener("upgradeneeded",p=>{r(zs(u.result),p.oldVersion,p.newVersion,zs(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(ZE,WA,{upgrade:(n,e)=>{0===e&&n.createObjectStore(qs)}})),_c}function yc(n,e){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,R.Z)(function*(n,e){const t=Hf(n),i=(yield zf()).transaction(qs,"readwrite"),s=i.objectStore(qs),u=yield s.get(t);return yield s.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&wC(n,e.fid),e})).apply(this,arguments)}function Gf(n){return qf.apply(this,arguments)}function qf(){return(qf=(0,R.Z)(function*(n){const e=Hf(n),r=(yield zf()).transaction(qs,"readwrite");yield r.objectStore(qs).delete(e),yield r.done})).apply(this,arguments)}function Sl(n,e){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,R.Z)(function*(n,e){const t=Hf(n),i=(yield zf()).transaction(qs,"readwrite"),s=i.objectStore(qs),u=yield s.get(t),f=e(u);return void 0===f?yield s.delete(t):yield s.put(f,t),yield i.done,f&&(!u||u.fid!==f.fid)&&wC(n,f.fid),f})).apply(this,arguments)}function Zf(n){return EC.apply(this,arguments)}function EC(){return EC=(0,R.Z)(function*(n){let e;const t=yield Sl(n.appConfig,r=>{const i=function KA(n){return DC(n||{fid:jL(),registrationStatus:0})}(r),s=function YA(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Gs.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function WE(n,e){return TC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:QA(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===Km?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),EC.apply(this,arguments)}function TC(){return TC=(0,R.Z)(function*(n,e){try{const t=yield function BL(n,e){return CC.apply(this,arguments)}(n,e);return yc(n.appConfig,t)}catch(t){throw mC(t)&&409===t.customData.serverCode?yield Gf(n.appConfig):yield yc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),TC.apply(this,arguments)}function QA(n){return MC.apply(this,arguments)}function MC(){return(MC=(0,R.Z)(function*(n){let e=yield KE(n.appConfig);for(;1===e.registrationStatus;)yield qA(100),e=yield KE(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Zf(n);return r||t}return e})).apply(this,arguments)}function KE(n){return Sl(n,e=>{if(!e)throw Gs.create("installation-not-found");return DC(e)})}function DC(n){return function YE(n){return 1===n.registrationStatus&&n.registrationTime+jE<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function SC(){return(SC=(0,R.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function uo(n,{fid:e}){return`${$f(n)}/${e}/authTokens:generate`}(n,t),i=function HE(n,{refreshToken:e}){const t=_C(n);return t.append("Authorization",function zE(n){return`${gC} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:$E,appId:n.appId}})},p=yield yC(()=>fetch(r,f));if(p.ok)return md(yield p.json());throw yield _d("Generate Auth Token",p)})).apply(this,arguments)}function PC(n){return AC.apply(this,arguments)}function AC(){return AC=(0,R.Z)(function*(n,e=!1){let t;const r=yield Sl(n.appConfig,s=>{if(!QE(s))throw Gs.create("not-registered");const u=s.authToken;if(!e&&function JE(n){return 2===n.requestStatus&&!function ex(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Ia}(n)}(u))return s;if(1===u.requestStatus)return t=function $L(n,e){return Wf.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw Gs.create("app-offline");const f=function tx(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function XA(n,e){return OC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),AC.apply(this,arguments)}function Wf(){return(Wf=(0,R.Z)(function*(n,e){let t=yield xC(n.appConfig);for(;1===t.authToken.requestStatus;)yield qA(100),t=yield xC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?PC(n,e):r})).apply(this,arguments)}function xC(n){return Sl(n,e=>{if(!QE(e))throw Gs.create("not-registered");return function kC(n){return 1===n.requestStatus&&n.requestTime+jE<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function OC(){return OC=(0,R.Z)(function*(n,e){try{const t=yield function JA(n,e){return SC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield yc(n.appConfig,r),t}catch(t){if(!mC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield yc(n.appConfig,r)}else yield Gf(n.appConfig);throw t}}),OC.apply(this,arguments)}function QE(n){return void 0!==n&&2===n.registrationStatus}function NC(){return(NC=(0,R.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Zf(e);return r?r.catch(console.error):PC(e).catch(console.error),t.fid})).apply(this,arguments)}function RC(){return RC=(0,R.Z)(function*(n,e=!1){const t=n;return yield function ix(n){return ko.apply(this,arguments)}(t),(yield PC(t,e)).token}),RC.apply(this,arguments)}function ko(){return(ko=(0,R.Z)(function*(n){const{registrationPromise:e}=yield Zf(n);e&&(yield e)})).apply(this,arguments)}function eT(n){return Gs.create("missing-app-config-values",{valueName:n})}const VC="installations",nT=n=>{const e=n.getProvider("app").getImmediate(),t=function BC(n){if(!n||!n.options)throw eT("App Configuration");if(!n.name)throw eT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw eT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:El(e,"heartbeat"),_delete:()=>Promise.resolve()}},rT=n=>{const t=El(n.getProvider("app").getImmediate(),VC).getImmediate();return{getId:()=>function nx(n){return NC.apply(this,arguments)}(t),getToken:i=>function rx(n){return RC.apply(this,arguments)}(t,i)}};(function jC(){Ji(new wr.wA(VC,nT,"PUBLIC")),Ji(new wr.wA("installations-internal",rT,"PRIVATE"))})(),Fi(fC,pC),Fi(fC,pC,"esm2017");const ds="@firebase/remote-config",Li=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qf{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,R.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&u.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(u),s})()}}function px(n=navigator){return n.languages&&n.languages[0]||n.language}class gx{constructor(e,t,r,i,s,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=u}fetch(e){var t=this;return(0,R.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},p={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:px()},y={method:"POST",headers:f,body:JSON.stringify(p)},I=fetch(u,y),T=new Promise((Ee,ze)=>{e.signal.addEventListener(()=>{const Ne=new Error("The operation was aborted.");Ne.name="AbortError",ze(Ne)})});let S;try{yield Promise.race([I,T]),S=yield I}catch(Ee){let ze="fetch-client-network";throw"AbortError"===Ee?.name&&(ze="fetch-timeout"),Li.create(ze,{originalErrorMessage:Ee?.message})}let N=S.status;const q=S.headers.get("ETag")||void 0;let Q,J;if(200===S.status){let Ee;try{Ee=yield S.json()}catch(ze){throw Li.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=Ee.entries,J=Ee.state}if("INSTANCE_STATE_UNSPECIFIED"===J?N=500:"NO_CHANGE"===J?N=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==N&&200!==N)throw Li.create("fetch-status",{httpStatus:N});return{status:N,eTag:q,config:Q}})()}}class yx{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,R.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,R.Z)(function*(){yield function mx(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function _x(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const u={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class wx{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Jf(n,e){const t=n.target.error||void 0;return Li.create(e,{originalErrorMessage:t&&t?.message})}const Ea="app_namespace_store";class Ex{constructor(e,t,r,i=function Ix(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Jf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ea,{keyPath:"compositeKey"})}}catch(t){e(Li.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,R.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const f=r.transaction([Ea],"readonly").objectStore(Ea),p=t.createCompositeKey(e);try{const y=f.get(p);y.onerror=I=>{s(Jf(I,"storage-get"))},y.onsuccess=I=>{const T=I.target.result;i(T?T.value:void 0)}}catch(y){s(Li.create("storage-get",{originalErrorMessage:y?.message}))}})})()}set(e,t){var r=this;return(0,R.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,u)=>{const p=i.transaction([Ea],"readwrite").objectStore(Ea),y=r.createCompositeKey(e);try{const I=p.put({compositeKey:y,value:t});I.onerror=T=>{u(Jf(T,"storage-set"))},I.onsuccess=()=>{s()}}catch(I){u(Li.create("storage-set",{originalErrorMessage:I?.message}))}})})()}delete(e){var t=this;return(0,R.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const f=r.transaction([Ea],"readwrite").objectStore(Ea),p=t.createCompositeKey(e);try{const y=f.delete(p);y.onerror=I=>{s(Jf(I,"storage-delete"))},y.onsuccess=()=>{i()}}catch(y){s(Li.create("storage-delete",{originalErrorMessage:y?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Tx{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,R.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Dx(){return a_.apply(this,arguments)}function a_(){return(a_=(0,R.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function Mx(){Ji(new wr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Li.create("registration-window");if(!(0,z.hl)())throw Li.create("indexed-db-unavailable");const{projectId:s,apiKey:u,appId:f}=r.options;if(!s)throw Li.create("registration-project-id");if(!u)throw Li.create("registration-api-key");if(!f)throw Li.create("registration-app-id");const p=new Ex(f,r.name,t=t||"firebase"),y=new Tx(p),I=new Ri.Yd(ds);I.logLevel=Ri.in.ERROR;const T=new gx(i,"10.5.0",t,s,u,f),S=new yx(T,p),N=new Qf(S,p,y,I),q=new wx(r,N,y,p,I);return function lx(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(q),q},"PUBLIC").setMultipleInstances(!0)),Fi(ds,"0.4.4"),Fi(ds,"0.4.4","esm2017")}();const aT=(n,e)=>e.some(t=>n instanceof t);let cT,Sx;const Px=new WeakMap,yd=new WeakMap,dT=new WeakMap,zC=new WeakMap,Xf=new WeakMap;let Pl={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return yd.get(n);if("objectStoreNames"===e)return n.objectStoreNames||dT.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return br(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function c_(n){return"function"==typeof n?function Al(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uT(){return Sx||(Sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ep(this),e),br(Px.get(this))}:function(...e){return br(n.apply(ep(this),e))}:function(e,...t){const r=n.call(ep(this),e,...t);return dT.set(r,e.sort?e.sort():[e]),br(r)}}(n):(n instanceof IDBTransaction&&function Zs(n){if(yd.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});yd.set(n,e)}(n),aT(n,function lT(){return cT||(cT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Pl):n)}function br(n){if(n instanceof IDBRequest)return function Ax(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(br(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Px.set(t,n)}).catch(()=>{}),Xf.set(e,n),e}(n);if(zC.has(n))return zC.get(n);const e=c_(n);return e!==n&&(zC.set(n,e),Xf.set(e,n)),e}const ep=n=>Xf.get(n);function xl(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const u=indexedDB.open(n,e),f=br(u);return r&&u.addEventListener("upgradeneeded",p=>{r(br(u.result),p.oldVersion,p.newVersion,br(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function vc(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),br(t).then(()=>{})}const vd=["get","getKey","getAll","getAllKeys","count"],Cd=["put","add","delete","clear"],Cc=new Map;function Ol(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Cc.get(e))return Cc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Cd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vd.includes(t))return;const s=function(){var u=(0,R.Z)(function*(f,...p){const y=this.transaction(f,i?"readwrite":"readonly");let I=y.store;return r&&(I=I.index(p.shift())),(yield Promise.all([I[t](...p),i&&y.done]))[0]});return function(p){return u.apply(this,arguments)}}();return Cc.set(e,s),s}!function bi(n){Pl=n(Pl)}(n=>({...n,get:(e,t,r)=>Ol(e,t)||n.get(e,t,r),has:(e,t)=>!!Ol(e,t)||n.has(e,t)}));const wd="/firebase-messaging-sw.js",bd="/firebase-cloud-messaging-push-scope",kl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hT="https://fcmregistrations.googleapis.com/v1",GC="google.c.a.c_id",fT="google.c.a.c_l",pT="google.c.a.ts";var tp=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(tp||{});function Ws(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _T(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const np="fcm_token_details_db",xx=5,Ox="fcm_token_object_Store";function qC(){return qC=(0,R.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(np))return null;let e=null;return(yield xl(np,xx,{upgrade:(r=(0,R.Z)(function*(i,s,u,f){var p;if(s<2||!i.objectStoreNames.contains(Ox))return;const y=f.objectStore(Ox),I=yield y.index("fcmSenderId").get(n);if(yield y.clear(),I)if(2===s){const T=I;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(p=T.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Ws(T.vapidKey)}}}else if(3===s){const T=I;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ws(T.auth),p256dh:Ws(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ws(T.vapidKey)}}}else if(4===s){const T=I;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ws(T.auth),p256dh:Ws(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ws(T.vapidKey)}}}}),function(s,u,f,p){return r.apply(this,arguments)})})).close(),yield vc(np),yield vc("fcm_vapid_details_db"),yield vc("undefined"),function kx(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),qC.apply(this,arguments)}const KL="firebase-messaging-database",Nx=1,Id="firebase-messaging-store";let ZC=null;function WC(){return ZC||(ZC=xl(KL,Nx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Id)}})),ZC}function yT(n){return rp.apply(this,arguments)}function rp(){return rp=(0,R.Z)(function*(n){const e=Rl(n),r=yield(yield WC()).transaction(Id).objectStore(Id).get(e);if(r)return r;{const i=yield function WL(n){return qC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Nl(n,i),i}}),rp.apply(this,arguments)}function Nl(n,e){return ip.apply(this,arguments)}function ip(){return(ip=(0,R.Z)(function*(n,e){const t=Rl(n),i=(yield WC()).transaction(Id,"readwrite");return yield i.objectStore(Id).put(e,t),yield i.done,e})).apply(this,arguments)}function u_(){return(u_=(0,R.Z)(function*(n){const e=Rl(n),r=(yield WC()).transaction(Id,"readwrite");yield r.objectStore(Id).delete(e),yield r.done})).apply(this,arguments)}function Rl({appConfig:n}){return n.appId}const ci=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function op(n,e){return KC.apply(this,arguments)}function KC(){return(KC=(0,R.Z)(function*(n,e){const t=yield Td(n),r=bT(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(Ed(n.appConfig),i)).json()}catch(u){throw ci.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(s.error)throw ci.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw ci.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function YC(){return(YC=(0,R.Z)(function*(n,e){const t=yield Td(n),r=bT(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${Ed(n.appConfig)}/${e.token}`,i)).json()}catch(u){throw ci.create("token-update-failed",{errorInfo:u?.toString()})}if(s.error)throw ci.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw ci.create("token-update-no-token");return s.token})).apply(this,arguments)}function CT(n,e){return sp.apply(this,arguments)}function sp(){return(sp=(0,R.Z)(function*(n,e){const r={method:"DELETE",headers:yield Td(n)};try{const s=yield(yield fetch(`${Ed(n.appConfig)}/${e}`,r)).json();if(s.error)throw ci.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw ci.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Ed({projectId:n}){return`${hT}/projects/${n}/registrations`}function Td(n){return wT.apply(this,arguments)}function wT(){return(wT=(0,R.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function bT({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==kl&&(i.web.applicationPubKey=r),i}const Fx=6048e5;function JC(){return JC=(0,R.Z)(function*(n){const e=yield function Ux(n,e){return nw.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ws(e.getKey("auth")),p256dh:Ws(e.getKey("p256dh"))},r=yield yT(n.firebaseDependencies);if(r){if(function Bx(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+Fx?function Lx(n,e){return d_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield CT(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return tw(n.firebaseDependencies,t)}return tw(n.firebaseDependencies,t)}),JC.apply(this,arguments)}function ew(){return ew=(0,R.Z)(function*(n){const e=yield yT(n.firebaseDependencies);e&&(yield CT(n.firebaseDependencies,e.token),yield function l_(n){return u_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),ew.apply(this,arguments)}function d_(){return d_=(0,R.Z)(function*(n,e){try{const t=yield function Rx(n,e){return YC.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Nl(n.firebaseDependencies,r),t}catch(t){throw yield function XC(n){return ew.apply(this,arguments)}(n),t}}),d_.apply(this,arguments)}function tw(n,e){return h_.apply(this,arguments)}function h_(){return(h_=(0,R.Z)(function*(n,e){const r={token:yield op(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Nl(n,r),r.token})).apply(this,arguments)}function nw(){return(nw=(0,R.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_T(e)})})).apply(this,arguments)}function rw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function iw(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function ow(n,e){e.data&&(n.data=e.data)}(e,n),function Vx(n,e){var t,r,i,s,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;f&&(n.fcmOptions.link=f);const p=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function ap(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function p_(n){return ci.create("missing-app-config-values",{valueName:n})}ap("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ap("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jx{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function sw(n){if(!n||!n.options)throw p_("App Configuration Object");if(!n.name)throw p_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw p_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function aw(){return(aw=(0,R.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(wd,{scope:bd}),n.swRegistration.update().catch(()=>{})}catch(e){throw ci.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function cp(){return(cp=(0,R.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function IT(n){return aw.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw ci.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function g_(){return(g_=(0,R.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=kl)})).apply(this,arguments)}function lw(){return lw=(0,R.Z)(function*(n,e){if(!navigator)throw ci.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ci.create("permission-blocked");return yield function ET(n,e){return g_.apply(this,arguments)}(n,e?.vapidKey),yield function cw(n,e){return cp.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function QC(n){return JC.apply(this,arguments)}(n)}),lw.apply(this,arguments)}function lp(){return(lp=(0,R.Z)(function*(n,e,t){const r=function DT(n){switch(n){case tp.NOTIFICATION_CLICKED:return"notification_open";case tp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[GC],message_name:t[fT],message_time:t[pT],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function m_(){return m_=(0,R.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===tp.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(rw(t)):n.onMessageHandler.next(rw(t)));const r=t.data;(function f_(n){return"object"==typeof n&&!!n&&GC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function MT(n,e,t){return lp.apply(this,arguments)}(n,t.messageType,r))}),m_.apply(this,arguments)}const ST="@firebase/messaging",PT=n=>{const e=new jx(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function uw(n,e){return m_.apply(this,arguments)}(e,t)),e},AT=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function TT(n,e){return lw.apply(this,arguments)}(e,r)}};function OT(){return hw.apply(this,arguments)}function hw(){return(hw=(0,R.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function kT(n=Uf()){return OT().then(e=>{if(!e)throw ci.create("unsupported-browser")},e=>{throw ci.create("indexed-db-unsupported")}),El((0,z.m9)(n),"messaging").getImmediate()}!function xT(){Ji(new wr.wA("messaging",PT,"PUBLIC")),Ji(new wr.wA("messaging-internal",AT,"PRIVATE")),Fi(ST,"0.12.4"),Fi(ST,"0.12.4","esm2017")}();const dp="analytics",NT="firebase_id",RT="origin",v_=6e4,wc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fw="https://www.googletagmanager.com/gtag/js",$r=new Ri.Yd("@firebase/analytics"),hr=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function gw(n){if(!n.startsWith(fw)){const e=hr.create("invalid-gtag-resource",{gtagURL:n});return $r.warn(e.message),""}return n}function FT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function _w(){return(_w=(0,R.Z)(function*(n,e,t,r,i,s){const u=r[i];try{if(u)yield e[u];else{const p=(yield FT(t)).find(y=>y.measurementId===i);p&&(yield e[p.appId])}}catch(f){$r.error(f)}n("config",i,s)})).apply(this,arguments)}function yw(){return(yw=(0,R.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const f=yield FT(t);for(const p of u){const y=f.find(T=>T.measurementId===p),I=y&&e[y.appId];if(!I){s=[];break}s.push(I)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){$r.error(s)}})).apply(this,arguments)}const Wx=30,vw=new class Kx{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function VT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Cw(){return(Cw=(0,R.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:VT(r)},s=wc.replace("{app-id}",t),u=yield fetch(s,i);if(200!==u.status&&304!==u.status){let f="";try{const p=yield u.json();null!==(e=p.error)&&void 0!==e&&e.message&&(f=p.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()})).apply(this,arguments)}function C_(){return(C_=(0,R.Z)(function*(n,e=vw,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw hr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw hr.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new ww;return setTimeout((0,R.Z)(function*(){f.abort()}),void 0!==t?t:v_),jT({appId:r,apiKey:i,measurementId:s},u,f,e)})).apply(this,arguments)}function jT(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,R.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=vw){var s;const{appId:u,measurementId:f}=n;try{yield function JL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(hr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(p){if(f)return $r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:u,measurementId:f};throw p}try{const p=yield function Md(n){return Cw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(u),p}catch(p){const y=p;if(!function $T(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y)){if(i.deleteThrottleMetadata(u),f)return $r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:f};throw p}const I=503===Number(null===(s=y?.customData)||void 0===s?void 0:s.httpStatus)?(0,z.$s)(t,i.intervalMillis,Wx):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+I,backoffCount:t+1};return i.setThrottleMetadata(u,T),$r.debug(`Calling attemptFetch again in ${I} millis`),jT(n,T,r,i)}}),w_.apply(this,arguments)}class ww{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let No,Fl;function b_(){return(b_=(0,R.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function Tw(){return(Tw=(0,R.Z)(function*(){if(!(0,z.hl)())return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function E_(){return E_=(0,R.Z)(function*(n,e,t,r,i,s,u){var f;const p=function Yx(n){return C_.apply(this,arguments)}(n);p.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&$r.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>$r.error(N)),e.push(p);const y=function eO(){return Tw.apply(this,arguments)}().then(N=>{if(N)return r.getId()}),[I,T]=yield Promise.all([p,y]);(function Zx(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(fw)&&t.src.includes(n))return t;return null})(s)||function YL(n,e){const t=function mw(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:gw}),r=document.createElement("script"),i=`${fw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,I.measurementId),Fl&&(i("consent","default",Fl),function zT(n){Fl=n}(void 0)),i("js",new Date);const S=null!==(f=u?.config)&&void 0!==f?f:{};return S[RT]="firebase",S.update=!0,null!=T&&(S[NT]=T),i("config",I.measurementId,S),No&&(i("set",No),function Ew(n){No=n}(void 0)),I.measurementId}),E_.apply(this,arguments)}class T_{constructor(e){this.app=e}_delete(){return delete Ys[this.app.options.appId],Promise.resolve()}}let Ys={},Mw=[];const Dw={};let ZT,Ro,fp="dataLayer",Dd=!1;function KT(n,e,t){!function Sw(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=hr.create("invalid-analytics-context",{errorInfo:e});$r.warn(t.message)}}();const r=n.options.appId;if(!r)throw hr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hr.create("no-api-key");$r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ys[r])throw hr.create("already-exists",{id:r});if(!Dd){!function QL(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(fp);const{wrappedGtag:s,gtagCore:u}=function UT(n,e,t,r,i){let s=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function xr(n,e,t,r){function s(){return s=(0,R.Z)(function*(u,...f){try{if("event"===u){const[p,y]=f;yield function LT(n,e,t,r,i){return yw.apply(this,arguments)}(n,e,t,p,y)}else if("config"===u){const[p,y]=f;yield function qx(n,e,t,r,i,s){return _w.apply(this,arguments)}(n,e,t,r,p,y)}else if("consent"===u){const[p]=f;n("consent","update",p)}else if("get"===u){const[p,y,I]=f;n("get",p,y,I)}else if("set"===u){const[p]=f;n("set",p)}else n(u,...f)}catch(p){$r.error(p)}}),s.apply(this,arguments)}return function i(u){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Ys,Mw,Dw,fp,"gtag");Ro=s,ZT=u,Dd=!0}return Ys[r]=function GT(n,e,t,r,i,s,u){return E_.apply(this,arguments)}(n,Mw,Dw,e,ZT,fp,t),new T_(n)}function QT(){return M_.apply(this,arguments)}function M_(){return(M_=(0,R.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const JT="@firebase/analytics";!function iO(){Ji(new wr.wA(dp,(e,{options:t})=>KT(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ji(new wr.wA("analytics-internal",function n(e){try{const t=e.getProvider(dp).getImmediate();return{logEvent:(r,i,s)=>function rO(n,e,t,r){n=(0,z.m9)(n),function Qx(n,e,t,r,i){return b_.apply(this,arguments)}(Ro,Ys[n.app.options.appId],e,t,r).catch(i=>$r.error(i))}(t,r,i,s)}}catch(t){throw hr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Fi(JT,"0.10.0"),Fi(JT,"0.10.0","esm2017")}();const aO=new class sO extends IE{}(class oO extends Of{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var pp=L(5137),Sd=L(3093);const Ll=new c.GfV("7.6.1"),D_="__angularfire_symbol__analyticsIsSupportedValue",S_="__angularfire_symbol__analyticsIsSupported",P_="__angularfire_symbol__remoteConfigIsSupportedValue",A_="__angularfire_symbol__remoteConfigIsSupported",x_="__angularfire_symbol__messagingIsSupportedValue",O_="__angularfire_symbol__messagingIsSupported";globalThis[S_]||(globalThis[S_]=QT().then(n=>globalThis[D_]=n).catch(()=>globalThis[D_]=!1)),globalThis[O_]||(globalThis[O_]=OT().then(n=>globalThis[x_]=n).catch(()=>globalThis[x_]=!1)),globalThis[A_]||(globalThis[A_]=Dx().then(n=>globalThis[P_]=n).catch(()=>globalThis[P_]=!1));const gp={async:()=>globalThis[O_],sync:()=>{const n=globalThis[x_];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Ul(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(u=>u.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Fo=(n,e)=>{const t=e?[e]:(0,Sn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function Pd(){}class eM{constructor(e,t=aO){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class Ad{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pd,{},Pd,Pd)),t.pipe(Dn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eM(Zone.current)),this.insideAngular=t.run(()=>new eM(Zone.current,z0)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ta(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function bc(n){return Ta().ngZone.run(()=>n())}function Hr(n){return Ta(),function dO(n){return function(t){return(t=t.lift(new Ad(n.ngZone))).pipe((0,pp.R)(n.outsideAngular),(0,Sd.Q)(n.insideAngular))}}(Ta())(n)}const hO=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),bc(()=>n.apply(void 0,r))},xd=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=bc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pd,{},Pd,Pd)))),r[s]=hO(r[s],t));const i=function s4(n){return Ta().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof _i.y){const s=Ta();return i.pipe((0,pp.R)(s.outsideAngular),(0,Sd.Q)(s.insideAngular))}return bc(()=>i)}return i instanceof _i.y?i.pipe(Hr):i instanceof Promise?bc(()=>new Promise((s,u)=>i.then(f=>bc(()=>s(f)),f=>bc(()=>u(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:bc(()=>i)};function Ic(){return(0,vi.e)((n,e)=>{let t,r=!1;n.subscribe((0,yi.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var We,fO=L(3997),Xi=L(6304),eo=(L(8661),L(3399)),a4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lo={},xw=xw||{},bt=a4||self;function mp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Od(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ow="closure_uid_"+(1e9*Math.random()>>>0),pO=0;function gO(n,e,t){return n.call.apply(n.bind,arguments)}function _p(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ii(n,e,t){return(Ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gO:_p).apply(null,arguments)}function N_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function fs(){this.s=this.s,this.o=this.o}fs.prototype.s=!1,fs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tM(n){Object.prototype.hasOwnProperty.call(n,Ow)&&n[Ow]||(n[Ow]=++pO)}(this)},fs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function R_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rM(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(mp(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var yp=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",()=>{},e),bt.removeEventListener("test",()=>{},e)}catch{}return n}();function vp(n){return/^[\s\xa0]*$/.test(n)}function F_(){var n=bt.navigator;return n&&(n=n.userAgent)?n:""}function Qs(n){return-1!=F_().indexOf(n)}function L_(n){return L_[" "](n),n}L_[" "]=function(){};var aM,n,oM=Qs("Opera"),kd=Qs("Trident")||Qs("MSIE"),Nw=Qs("Edge"),Rw=Nw||kd,sM=Qs("Gecko")&&!(-1!=F_().toLowerCase().indexOf("webkit")&&!Qs("Edge"))&&!(Qs("Trident")||Qs("MSIE"))&&!Qs("Edge"),c4=-1!=F_().toLowerCase().indexOf("webkit")&&!Qs("Edge");function mO(){var n=bt.document;return n?n.documentMode:void 0}e:{var cM="",U_=(n=F_(),sM?/rv:([^\);]+)(\)|;)/.exec(n):Nw?/Edge\/([\d\.]+)/.exec(n):kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):c4?/WebKit\/(\S+)/.exec(n):oM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(U_&&(cM=U_?U_[1]:""),kd){var Nd=mO();if(null!=Nd&&Nd>parseFloat(cM)){aM=String(Nd);break e}}aM=cM}var uM=bt.document&&kd&&(mO()||parseInt(aM,10))||void 0;function Ma(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sM){e:{try{L_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_O[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ma.$.h.call(this)}}zr(Ma,Ir);var _O={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cp="closure_listenable_"+(1e6*Math.random()|0),yO=0;function vO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++yO,this.fa=this.ia=!1}function Lw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Uw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hM(n){const e={};for(const t in n)e[t]=n[t];return e}const fM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<fM.length;s++)t=fM[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function B_(n){this.src=n,this.g={},this.h=0}function V_(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=kw(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Lw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Bw(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}B_.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Bw(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new vO(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var j_="closure_lm_"+(1e6*Math.random()|0),Vw={};function jw(n,e,t,r,i){if(r&&r.once)return gM(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jw(n,e[s],t,r,i);return null}return t=Gw(t),n&&n[Cp]?n.O(e,t,Od(r)?!!r.capture:!!r,i):pM(n,e,t,!1,r,i)}function pM(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=Od(i)?!!i.capture:!!i,f=zw(n);if(f||(n[j_]=f=new B_(n)),(t=f.add(e,t,r,u,s)).proxy)return t;if(r=function $w(){const e=CO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yp||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(mM(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gM(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)gM(n,e[s],t,r,i);return null}return t=Gw(t),n&&n[Cp]?n.P(e,t,Od(r)?!!r.capture:!!r,i):pM(n,e,t,!0,r,i)}function Hw(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Hw(n,e[s],t,r,i);else r=Od(r)?!!r.capture:!!r,t=Gw(t),n&&n[Cp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Bw(s=n.g[e],t,r,i))&&(Lw(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=zw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Bw(e,t,r,i)),(t=-1<n?e[n]:null)&&$_(t))}function $_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Cp])V_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mM(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zw(e))?(V_(t,n),0==t.h&&(t.src=null,e[j_]=null)):Lw(n)}}}function mM(n){return n in Vw?Vw[n]:Vw[n]="on"+n}function CO(n,e){if(n.fa)n=!0;else{e=new Ma(e,this);var t=n.listener,r=n.la||n.src;n.ia&&$_(n),n=t.call(r,e)}return n}function zw(n){return(n=n[j_])instanceof B_?n:null}var wp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gw(n){return"function"==typeof n?n:(n[wp]||(n[wp]=function(e){return n.handleEvent(e)}),n[wp])}function Or(){fs.call(this),this.i=new B_(this),this.S=this,this.J=null}function li(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var i=e;Rd(e=new Ir(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=H_(u,r,!0,e)&&i}if(i=H_(u=e.g=n,r,!0,e)&&i,i=H_(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=H_(u=e.g=t[s],r,!1,e)&&i}function H_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var f=u.listener,p=u.la||u.src;u.ia&&V_(n.i,u),i=!1!==f.call(p,r)&&i}}return i&&!r.defaultPrevented}zr(Or,fs),Or.prototype[Cp]=!0,Or.prototype.removeEventListener=function(n,e,t,r){Hw(this,n,e,t,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lw(t[r]);delete n.g[e],n.h--}}this.J=null},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qw=bt.JSON.stringify;function bO(){var n=z_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _M=new class wO{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new EO,n=>n.reset());class EO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function vM(n){bt.setTimeout(()=>{throw n},0)}let bp,Ip=!1,z_=new class IO{constructor(){this.h=this.g=null}add(e,t){const r=_M.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},CM=()=>{const n=bt.Promise.resolve(void 0);bp=()=>{n.then(TO)}};var TO=()=>{for(var n;n=bO();){try{n.h.call(n.g)}catch(t){vM(t)}var e=_M;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ip=!1};function G_(n,e){Or.call(this),this.h=n||1,this.g=e||bt,this.j=Ii(this.qb,this),this.l=Date.now()}function Zw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ep(n,e,t){if("function"==typeof n)t&&(n=Ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function q_(n){n.g=Ep(()=>{n.g=null,n.i&&(n.i=!1,q_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zr(G_,Or),(We=G_.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),li(this,"tick"),this.ga&&(Zw(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){G_.$.N.call(this),Zw(this),delete this.g};class wM extends fs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:q_(this)}N(){super.N(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vl(n){fs.call(this),this.h=n,this.g={}}zr(Vl,fs);var bM=[];function IM(n,e,t,r){Array.isArray(t)||(t&&(bM[0]=t.toString()),t=bM);for(var i=0;i<t.length;i++){var s=jw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Z_(n){Uw(n.g,function(e,t){this.g.hasOwnProperty(t)&&$_(e)},n),n.g={}}function W_(){this.g=!0}function $l(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function l4(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return qw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vl.prototype.N=function(){Vl.$.N.call(this),Z_(this)},Vl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},W_.prototype.Ea=function(){this.g=!1},W_.prototype.info=function(){};var Da={},K_=null;function Y_(){return K_=K_||new Or}function Ww(n){Ir.call(this,Da.Ta,n)}function Fd(n){const e=Y_();li(e,new Ww(e))}function TM(n,e){Ir.call(this,Da.STAT_EVENT,n),this.stat=e}function Ei(n){const e=Y_();li(e,new TM(e,n))}function Q_(n,e){Ir.call(this,Da.Ua,n),this.size=e}function Ld(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}Da.Ta="serverreachability",zr(Ww,Ir),Da.STAT_EVENT="statevent",zr(TM,Ir),Da.Ua="timingevent",zr(Q_,Ir);var Tp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function J_(){}function DM(){}J_.prototype.h=null;var SM,Mp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yw(){Ir.call(this,"d")}function X_(){Ir.call(this,"c")}function Dp(){}function Sp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Vl(this),this.P=u4,this.V=new G_(n=Rw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PM}function PM(){this.i=null,this.g="",this.h=!1}zr(Yw,Ir),zr(X_,Ir),zr(Dp,J_),Dp.prototype.g=function(){return new XMLHttpRequest},Dp.prototype.i=function(){return{}},SM=new Dp;var u4=45e3,Qw={},ey={};function ty(n,e,t){n.L=1,n.v=xp(Sa(e)),n.s=t,n.S=!0,Jw(n,null)}function Jw(n,e){n.G=Date.now(),Pp(n),n.A=Sa(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),UM(t.i,"t",r),n.C=0,t=n.l.J,n.h=new PM,n.g=JM(n.l,t?e:null,!n.s),0<n.O&&(n.M=new wM(Ii(n.Pa,n,n.g),n.O)),IM(n.U,n.g,"readystatechange",n.nb),e=n.I?hM(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Fd(),function EM(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",f=s.split("&"),p=0;p<f.length;p++){var y=f[p].split("=");if(1<y.length){var I=y[0];y=y[1];var T=I.split("_");u=2<=T.length&&"type"==T[1]?u+(I+"=")+y+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Xw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function AM(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=DO(n,t),i==ey){4==e&&(n.o=4,Ei(14),r=!1),$l(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qw){n.o=4,Ei(15),$l(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$l(n.j,n.m,i,null),zl(n,i)}Xw(n)&&i!=ey&&i!=Qw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ei(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),hy(e),e.M=!0,Ei(11))):($l(n.j,n.m,t,"[Invalid Chunked Response]"),Hl(n),Ap(n))}function DO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ey:(t=Number(e.substring(t,r)),isNaN(t)?Qw:(r+=1)+t>e.length?ey:(e=e.slice(r,r+t),n.C=r+t,e))}function Pp(n){n.Y=Date.now()+n.P,xM(n,n.P)}function xM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ld(Ii(n.lb,n),e)}function ny(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function Ap(n){0==n.l.H||n.J||RO(n.l,n)}function Hl(n){ny(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Zw(n.V),Z_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function zl(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||oy(t.i,n)))if(!n.K&&oy(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;yb(t),dy(t)}YM(t),Ei(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ld(Ii(t.ib,t),6e3));if(1>=jM(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ps(t,11)}else if((n.K||t.g==n)&&yb(t),!vp(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const I=y[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const T=y[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const S=y[5];null!=S&&"number"==typeof S&&0<S&&(t.L=r=1.5*S,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const q=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var s=r.i;s.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ab(s,s.h),s.h=null))}if(r.F){const Q=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Pn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=py(r,r.J?r.pa:null,r.Y),u.K){$M(r.i,u);var f=u,p=r.L;p&&f.setTimeout(p),f.B&&(ny(f),Pp(f)),r.g=u}else NO(r);0<t.j.length&&Bp(t)}else"stop"!=y[0]&&"close"!=y[0]||ps(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ps(t,7):uy(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Fd()}catch{}}function eb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function OM(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(mp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(We=Sp.prototype).setTimeout=function(n){this.P=n},We.nb=function(n){n=n.target;const e=this.M;e&&3==Bo(n)?e.l():this.Pa(n)},We.Pa=function(n){try{if(n==this.g)e:{const I=Bo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||Rw||this.g&&(this.h.h||this.g.ja()||pb(this.g)))){this.J||4!=I||7==e||Fd(),ny(this);var t=this.g.da();this.ca=t;t:if(Xw(this)){var r=pb(this.g);n="";var i=r.length,s=4==Bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hl(this),Ap(this);var u="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function jl(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,p=this.g;if((f=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vp(f)){var y=f;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ei(12),Hl(this),Ap(this);break e}$l(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,t)}this.S?(AM(this,I,u),Rw&&this.i&&3==I&&(IM(this.U,this.V,"tick",this.mb),this.V.start())):($l(this.j,this.m,u,null),zl(this,u)),4==I&&Hl(this),this.i&&!this.J&&(4==I?RO(this.l,this):(this.i=!1,Pp(this)))}else(function WM(n){const e={};n=(n.g&&2<=Bo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(vp(n[r]))continue;var t=yM(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function dM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ei(12)):(this.o=0,Ei(13)),Hl(this),Ap(this)}}}catch{}},We.mb=function(){if(this.g){var n=Bo(this.g),e=this.g.ja();this.C<e.length&&(ny(this),AM(this,n,e),this.i&&4!=n&&Pp(this))}},We.cancel=function(){this.J=!0,Hl(this)},We.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function MO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Fd(),Ei(17)),Hl(this),this.o=2,Ap(this)):xM(this,this.Y-n)};var tb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ec){this.h=n.h,nb(this,n.j),this.s=n.s,this.g=n.g,rb(this,n.m),this.l=n.l;var e=n.i,t=new ry;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ib(this,t),this.o=n.o}else n&&(e=String(n).match(tb))?(this.h=!1,nb(this,e[1]||"",!0),this.s=Op(e[2]||""),this.g=Op(e[3]||"",!0),rb(this,e[4]),this.l=Op(e[5]||"",!0),ib(this,e[6]||"",!0),this.o=Op(e[7]||"")):(this.h=!1,this.i=new ry(null,this.h))}function Sa(n){return new Ec(n)}function nb(n,e,t){n.j=t?Op(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ib(n,e,t){e instanceof ry?(n.i=e,function BM(n,e){e&&!n.j&&(Uo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(FM(this,r),UM(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=kp(e,d4)),n.i=new ry(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function xp(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Op(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function kp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Np),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Np(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(kp(e,RM,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(kp(e,RM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(kp(t,"/"==t.charAt(0)?SO:ob,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",kp(t,PO)),n.join("")};var RM=/[#\/\?@]/g,ob=/[#\?:]/g,SO=/[#\?]/g,d4=/[#\?@]/g,PO=/#/g;function ry(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uo(n){n.g||(n.g=new Map,n.h=0,n.i&&function NM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function FM(n,e){Uo(n),e=Pa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function LM(n,e){return Uo(n),e=Pa(n,e),n.g.has(e)}function UM(n,e,t){FM(n,e),0<t.length&&(n.i=null,n.g.set(Pa(n,e),R_(t)),n.h+=t.length)}function Pa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function sb(n){this.l=n||iy,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ka&&bt.g.Ka()&&bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=ry.prototype).add=function(n,e){Uo(this),this.i=null,n=Pa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){Uo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},We.ta=function(){Uo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},We.Z=function(n){Uo(this);let e=[];if("string"==typeof n)LM(this,n)&&(e=e.concat(this.g.get(Pa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},We.set=function(n,e){return Uo(this),this.i=null,LM(this,n=Pa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var iy=10;function VM(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jM(n){return n.h?1:n.g?n.g.size:0}function oy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ab(n,e){n.g?n.g.add(e):n.h=e}function $M(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cb(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return R_(n.i)}sb.prototype.cancel=function(){if(this.i=cb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var sy=class{stringify(n){return bt.JSON.stringify(n,void 0)}parse(n){return bt.JSON.parse(n,void 0)}};function xO(){this.g=new sy}function OO(n,e,t){const r=t||"";try{eb(n,function(i,s){let u=i;Od(i)&&(u=qw(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Gl(n){this.l=n.fc||null,this.j=n.ob||!1}function Fp(n,e){Or.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=lb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zr(Gl,J_),Gl.prototype.g=function(){return new Fp(this.l,this.j)},Gl.prototype.i=function(n){return function(){return n}}({}),zr(Fp,Or);var lb=0;function ub(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ud(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Lp(n)}function Lp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=Fp.prototype).open=function(n,e){if(this.readyState!=lb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Lp(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ud(this)),this.readyState=lb},We.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Lp(this)),this.g&&(this.readyState=3,Lp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ub(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ud(this):Lp(this),3==this.readyState&&ub(this)}},We.Za=function(n){this.g&&(this.response=this.responseText=n,Ud(this))},We.Ya=function(n){this.g&&(this.response=n,Ud(this))},We.ka=function(){this.g&&Ud(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kO=bt.JSON.parse;function Bn(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ay,this.L=this.M=!1}zr(Bn,Or);var ay="",zM=/^https?$/i,db=["POST","PUT"];function GM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qM(n),cy(n)}function qM(n){n.F||(n.F=!0,li(n,"complete"),li(n,"error"))}function ZM(n){if(n.h&&typeof xw<"u"&&(!n.C[1]||4!=Bo(n)||2!=n.da()))if(n.v&&4==Bo(n))Ep(n.La,0,n);else if(li(n,"readystatechange"),4==Bo(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(tb)[1]||null;!i&&bt.self&&bt.self.location&&(i=bt.self.location.protocol.slice(0,-1)),r=!zM.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var s=2<Bo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",qM(n)}}finally{cy(n)}}}function cy(n,e){if(n.g){fb(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function fb(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function Bo(n){return n.g?n.g.readyState:0}function pb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ay:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function gb(n){let e="";return Uw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ly(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=gb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function Up(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mb(n){this.Ga=0,this.j=[],this.l=new W_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Up("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Up("baseRetryDelayMs",5e3,n),this.hb=Up("retryDelaySeedMs",1e4,n),this.eb=Up("forwardChannelMaxRetries",2,n),this.xa=Up("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new sb(n&&n.concurrentRequestLimit),this.Ja=new xO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function uy(n){if(_b(n),3==n.H){var e=n.W++,t=Sa(n.I);if(Pn(t,"SID",n.K),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),Vp(n,t),(e=new Sp(n,n.l,e)).L=2,e.v=xp(Sa(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon)try{t=bt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=JM(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Pp(e)}QM(n)}function dy(n){n.g&&(hy(n),n.g.cancel(),n.g=null)}function _b(n){dy(n),n.u&&(bt.clearTimeout(n.u),n.u=null),yb(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Bp(n){if(!VM(n.i)&&!n.m){n.m=!0;var e=n.Na;bp||CM(),Ip||(bp(),Ip=!0),z_.add(e,n),n.C=0}}function ql(n,e){var t;t=e?e.m:n.W++;const r=Sa(n.I);Pn(r,"SID",n.K),Pn(r,"RID",t),Pn(r,"AID",n.V),Vp(n,r),n.o&&n.s&&ly(r,n.o,n.s),t=new Sp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=KM(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),ab(n.i,t),ty(t,r,e)}function Vp(n,e){n.na&&Uw(n.na,function(t,r){Pn(e,r,t)}),n.h&&eb({},function(t,r){Pn(e,r,t)})}function KM(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ii(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let f=!0;for(let p=0;p<t;p++){let y=i[p].g;const I=i[p].map;if(y-=s,0>y)s=Math.max(0,i[p].g-100),f=!1;else try{OO(I,u,"req"+y+"_")}catch{r&&r(I)}}if(f){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function NO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;bp||CM(),Ip||(bp(),Ip=!0),z_.add(e,n),n.A=0}}function YM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ld(Ii(n.Ma,n),FO(n,n.A)),n.A++,0))}function hy(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function fy(n){n.g=new Sp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Sa(n.wa);Pn(e,"RID","rpc"),Pn(e,"SID",n.K),Pn(e,"AID",n.V),Pn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Pn(e,"TO",n.qa),Pn(e,"TYPE","xmlhttp"),Vp(n,e),n.o&&n.s&&ly(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=xp(Sa(e)),t.s=null,t.S=!0,Jw(t,n)}function yb(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function RO(n,e){var t=null;if(n.g==e){yb(n),hy(n),n.g=null;var r=2}else{if(!oy(n.i,e))return;t=e.F,$M(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;li(r=Y_(),new Q_(r,t)),Bp(n)}else NO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Ui(n,e){return!(jM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ld(Ii(n.Na,n,e),FO(n,n.C)),n.C++,0)))}(n,e)||2==r&&YM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ps(n,5);break;case 4:ps(n,10);break;case 3:ps(n,6);break;default:ps(n,2)}}function FO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ps(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ii(n.pb,n);t||(t=new Ec("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||nb(t,"https"),xp(t)),function HM(n,e){const t=new W_;if(bt.Image){const r=new Image;r.onload=N_(Rp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=N_(Rp,t,r,"TestLoadImage: error",!1,e),r.onabort=N_(Rp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=N_(Rp,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ei(2);n.H=0,n.h&&n.h.za(e),QM(n),_b(n)}function QM(n){if(n.H=0,n.ma=[],n.h){const e=cb(n.i);(0!=e.length||0!=n.j.length)&&(rM(n.ma,e),rM(n.ma,n.j),n.i.i.length=0,R_(n.j),n.j.length=0),n.h.ya()}}function py(n,e,t){var r=t instanceof Ec?Sa(t):new Ec(t);if(""!=r.g)e&&(r.g=e+"."+r.g),rb(r,r.m);else{var i=bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ec(null);r&&nb(s,r),e&&(s.g=e),i&&rb(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Pn(r,t,e),Pn(r,"VER",n.ra),Vp(n,r),r}function JM(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(t&&n.Ha&&!n.va?new Gl({ob:!0}):n.va)).Oa(n.J),e}function vb(){}function gy(){if(kd&&!(10<=Number(uM)))throw Error("Environmental error: no available transport.")}function fo(n,e){Or.call(this),this.g=new mb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!vp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zl(this)}function XM(n){Yw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function my(){X_.call(this),this.status=1}function Zl(n){this.g=n}function to(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jp(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(We=Bn.prototype).Oa=function(n){this.M=n},We.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():SM.g(),this.C=function MM(n){return n.h||(n.h=n.i())}(this.u?this.u:SM),this.g.onreadystatechange=Ii(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void GM(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=bt.FormData&&n instanceof bt.FormData,!(0<=kw(db,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fb(this),0<this.B&&((this.L=function hb(n){return kd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ii(this.ua,this)):this.A=Ep(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){GM(this,s)}},We.ua=function(){typeof xw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),cy(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cy(this,!0)),Bn.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?ZM(this):this.kb())},We.kb=function(){ZM(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<Bo(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kO(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=mb.prototype).ra=8,We.H=1,We.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Sp(this,this.l,n);let s=this.s;if(this.U&&(s?(s=hM(s),Rd(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=KM(this,i,e),Pn(t=Sa(this.I),"RID",n),Pn(t,"CVER",22),this.F&&Pn(t,"X-HTTP-Session-Id",this.F),Vp(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(gb(s)))+"&"+e:this.o&&ly(t,this.o,s)),ab(this.i,i),this.bb&&Pn(t,"TYPE","init"),this.P?(Pn(t,"$req",e),Pn(t,"SID","null"),i.aa=!0,ty(i,t,null)):ty(i,t,e),this.H=2}}else 3==this.H&&(n?ql(this,n):0==this.j.length||VM(this.i)||ql(this))},We.Ma=function(){if(this.u=null,fy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ld(Ii(this.jb,this),n)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ei(10),dy(this),fy(this))},We.ib=function(){null!=this.v&&(this.v=null,dy(this),YM(this),Ei(19))},We.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ei(2)):(this.l.info("Failed to ping google.com"),Ei(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=vb.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},gy.prototype.g=function(n,e){return new fo(n,e)},zr(fo,Or),fo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ei(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=py(n,null,n.Y),Bp(n)},fo.prototype.close=function(){uy(this.g)},fo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Bp(e)},fo.prototype.N=function(){this.g.h=null,delete this.j,uy(this.g),delete this.g,fo.$.N.call(this)},zr(XM,Yw),zr(my,X_),zr(Zl,vb),Zl.prototype.Ba=function(){li(this.g,"a")},Zl.prototype.Aa=function(n){li(this.g,new XM(n))},Zl.prototype.za=function(n){li(this.g,new my)},Zl.prototype.ya=function(){li(this.g,"b")},zr(to,function LO(){this.blockSize=-1}),to.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},to.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)jp(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){jp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){jp(this,r),i=0;break}}this.h=i,this.i+=e},to.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var eD={};function Cb(n){return-128<=n&&128>n?function iM(n,e){var t=eD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function gs(n){if(isNaN(n)||!isFinite(n))return Kl;if(0>n)return ui(gs(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=wb;return new yn(e,0)}var wb=4294967296,Kl=Cb(0),$p=Cb(1),UO=Cb(16777216);function Aa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ms(n){return-1==n.h}function ui(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add($p)}function _y(n,e){return n.add(ui(e))}function yy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Bd(n,e){this.g=n,this.h=e}function Hp(n,e){if(Aa(e))throw Error("division by zero");if(Aa(n))return new Bd(Kl,Kl);if(ms(n))return e=Hp(ui(n),e),new Bd(ui(e.g),ui(e.h));if(ms(e))return e=Hp(n,ui(e)),new Bd(ui(e.g),e.h);if(30<n.g.length){if(ms(n)||ms(e))throw Error("slowDivide_ only works with positive integers.");for(var t=$p,r=e;0>=r.X(n);)t=tD(t),r=tD(r);var i=Yl(t,1),s=Yl(r,1);for(r=Yl(r,2),t=Yl(t,2);!Aa(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=Yl(r,1),t=Yl(t,1)}return e=_y(n,i.R(e)),new Bd(i,e)}for(i=Kl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=gs(t)).R(e);ms(u)||0<u.X(n);)u=(s=gs(t-=r)).R(e);Aa(s)&&(s=$p),i=i.add(s),n=_y(n,u)}return new Bd(i,n)}function tD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function Yl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new yn(i,n.h)}(We=yn.prototype).ea=function(){if(ms(this))return-ui(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:wb+r)*e,e*=wb}return n},We.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Aa(this))return"0";if(ms(this))return"-"+ui(this).toString(n);for(var e=gs(Math.pow(n,6)),t=this,r="";;){var i=Hp(t,e).g,s=((0<(t=_y(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Aa(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},We.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},We.X=function(n){return ms(n=_y(this,n))?-1:Aa(n)?0:1},We.abs=function(){return ms(this)?ui(this):this},We.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(n){if(Aa(this)||Aa(n))return Kl;if(ms(this))return ms(n)?ui(this).R(ui(n)):ui(ui(this).R(n));if(ms(n))return ui(this.R(ui(n)));if(0>this.X(UO)&&0>n.X(UO))return gs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),f=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=u*p,yy(t,2*r+2*i),t[2*r+2*i+1]+=s*p,yy(t,2*r+2*i+1),t[2*r+2*i+1]+=u*f,yy(t,2*r+2*i+1),t[2*r+2*i+2]+=s*f,yy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},We.gb=function(n){return Hp(this,n).h},We.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},We.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},We.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},gy.prototype.createWebChannel=gy.prototype.g,fo.prototype.send=fo.prototype.u,fo.prototype.open=fo.prototype.m,fo.prototype.close=fo.prototype.close,Tp.NO_ERROR=0,Tp.TIMEOUT=8,Tp.HTTP_ERROR=6,Kw.COMPLETE="complete",DM.EventType=Mp,Mp.OPEN="a",Mp.CLOSE="b",Mp.ERROR="c",Mp.MESSAGE="d",Or.prototype.listen=Or.prototype.O,Bn.prototype.listenOnce=Bn.prototype.P,Bn.prototype.getLastError=Bn.prototype.Sa,Bn.prototype.getLastErrorCode=Bn.prototype.Ia,Bn.prototype.getStatus=Bn.prototype.da,Bn.prototype.getResponseJson=Bn.prototype.Wa,Bn.prototype.getResponseText=Bn.prototype.ja,Bn.prototype.send=Bn.prototype.ha,Bn.prototype.setWithCredentials=Bn.prototype.Oa,to.prototype.digest=to.prototype.l,to.prototype.reset=to.prototype.reset,to.prototype.update=to.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=gs,yn.fromString=function Wl(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ui(Wl(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=gs(Math.pow(e,8)),r=Kl,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=gs(Math.pow(e,s)),r=r.R(s).add(gs(u))):r=(r=r.R(t)).add(gs(u))}return r};var nD=Lo.createWebChannelTransport=function(){return new gy},BO=Lo.getStatEventTarget=function(){return Y_()},bb=Lo.ErrorCode=Tp,rD=Lo.EventType=Kw,VO=Lo.Event=Da,Ib=Lo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iD=Lo.FetchXmlHttpFactory=Gl,zp=Lo.WebChannel=DM,oD=Lo.XhrIo=Bn,jO=Lo.Md5=to,Vd=Lo.Integer=yn;const $O="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Gp="9.23.0";const Ql=new Ri.Yd("@firebase/firestore");function sD(){return Ql.logLevel}function Pe(n,...e){if(Ql.logLevel<=Ri.in.DEBUG){const t=e.map(aD);Ql.debug(`Firestore (${Gp}): ${n}`,...t)}}function Er(n,...e){if(Ql.logLevel<=Ri.in.ERROR){const t=e.map(aD);Ql.error(`Firestore (${Gp}): ${n}`,...t)}}function _s(n,...e){if(Ql.logLevel<=Ri.in.WARN){const t=e.map(aD);Ql.warn(`Firestore (${Gp}): ${n}`,...t)}}function aD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Gp}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function rt(n,e){n||et()}function Ze(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cD{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable((0,R.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Nr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new HO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new kr(e)}}class GO{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new lD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Zp{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=qp(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function It(n,e){return n<e?-1:n>e?1:0}function jd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uD(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?It(this.nanoseconds,e.nanoseconds):It(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new Vn(0,0))}static max(){return new at(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Wp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Wp{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const ZO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Wp{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return ZO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(s(),i++)}if(s(),u)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Zt.fromString(e))}static fromName(e){return new qe(Zt.fromString(e).popFirst(5))}static empty(){return new qe(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Zt(e.slice()))}}class vy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Tb(n){return n.fields.find(e=>2===e.kind)}function Jl(n){return n.fields.filter(e=>2!==e.kind)}vy.UNKNOWN_ID=-1;class Cy{constructor(e,t){this.fieldPath=e,this.kind=t}}class $d{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $d(0,po.min())}}function wy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new po(i,qe.empty(),e)}function dD(n){return new po(n.readTime,n.key,-1)}class po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new po(at.min(),qe.empty(),-1)}static max(){return new po(at.max(),qe.empty(),-1)}}function by(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:It(n.largestBatchId,e.largestBatchId))}const Mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fr(n){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,R.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Mb)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Iy.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,s=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const s=e.length,u=new Array(s);let f=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(I=>{u[y]=I,++f,f===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new te((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Nr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Xl(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Db(r.target.error);this.v.reject(new Xl(e,i))}}static open(e,t,r,i){try{return new Ey(t,e.transaction(i,r))}catch(s){throw new Xl(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hD(t)}}class Vo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Vo.S((0,z.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),xa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(Vo.C())return!0;const e=(0,z.z$)(),t=Vo.S(e),r=0<t&&t<10,i=Vo.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,R.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new ye(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ye(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Xl(e,f))},s.onupgradeneeded=u=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,R.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{s.db=yield s.$(e);const p=Ey.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(I=>(p.P(),I)).catch(I=>(p.abort(I),te.reject(I))).toPromise();return y.catch(()=>{}),yield p.R,y}catch(p){const y=p,I="FirebaseError"!==y.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),s.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return xa(this.L.delete())}}class Xl extends ye{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bi(n){return"IndexedDbTransactionError"===n.name}class hD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xa(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),xa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(u,f)=>{s.push(f)}).next(()=>s)}{const i=this.store.getAll(r.range);return new te((s,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{s(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,u,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=s=>{const u=Db(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const p=new QO(f),y=t(f.primaryKey,f.value,p);if(y instanceof te){const I=y.catch(T=>(p.done(),te.reject(T)));r.push(I)}p.isDone?i():null===p.K?f.continue():f.continue(p.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Db(r.target.error);t(i)}})}let Ty=!1;function Db(n){const e=Vo.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ty||(Ty=!0,setTimeout(()=>{throw r},0)),r}}return n}class m4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,R.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Bi(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fr(r)}yield t.et(6e4)}))}}class fD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,R.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return te.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Pe("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,s)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=dD(s);by(u,r)>0&&(r=u)}),new po(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let go=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Kp(n){return null==n}function Yp(n){return 0===n&&1/n==-1/0}function pD(n){return"number"==typeof n&&Number.isInteger(n)&&!Yp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sb(e)),e=_4(n.get(t),e);return Sb(e)}function _4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Sb(n){return n+"\x01\x01"}function Js(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&et(),n.charAt(u+1)){case"\x01":const f=n.substring(s,u);let p;0===i.length?p=f:(i+=f,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:et()}s=u+2}return new Zt(r)}const Pb=["userId","batchId"];function Ab(n,e){return[n,di(e)]}function My(n,e,t){return[n,di(e),t]}const gD={},mD=["prefixPath","collectionGroup","readTime","documentId"],JO=["prefixPath","collectionGroup","documentId"],_D=["collectionGroup","readTime","prefixPath","documentId"],yD=["canonicalId","targetId"],Hd=["targetId","path"],Dy=["path","targetId"],vD=["collectionId","parent"],CD=["indexId","uid"],XO=["uid","sequenceNumber"],e2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y4=["indexId","uid","orderedDocumentKey"],wD=["userId","collectionPath","documentId"],t2=["userId","collectionPath","largestBatchId"],n2=["userId","collectionGroup","largestBatchId"],r2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v4=[...r2,"documentOverlays"],i2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xb=i2,o2=[...xb,"indexConfiguration","indexState","indexEntries"];class Ob extends YO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=Ze(n);return Vo.M(t.ht,e)}function s2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class An{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kb(this.root,e,this.comparator,!1)}getReverseIterator(){return new kb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kb(this.root,e,this.comparator,!0)}}class kb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??hi.RED,this.left=i??hi.EMPTY,this.right=s??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new hi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return hi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new hi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bD(this.data.getIterator())}getIteratorFrom(e){return new bD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class bD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zd(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new vn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Tc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tc("Invalid base64 string: "+i):i}}(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return It(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const Nb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(n){if(rt(!!n),"string"==typeof n){let e=0;const t=Nb.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ys(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function tu(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rb(n){const e=n.mapValue.fields.__previous_value__;return tu(e)?Rb(e):e}function Sy(n){const e=Mc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class C4{constructor(e,t,r,i,s,u,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class Oa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}const Dc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Py={nullValue:"NULL_VALUE"};function Sc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tu(n)?4:c2(n)?9007199254740991:10:et()}function Xs(n,e){if(n===e)return!0;const t=Sc(n);if(t!==Sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sy(n).isEqual(Sy(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Mc(r.timestampValue),u=Mc(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ys(n.bytesValue).isEqual(ys(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jn(r.geoPointValue.latitude)===jn(i.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jn(r.integerValue)===jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=jn(r.doubleValue),u=jn(i.doubleValue);return s===u?Yp(s)===Yp(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return jd(n.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(s2(s)!==s2(u))return!1;for(const f in s)if(s.hasOwnProperty(f)&&(void 0===u[f]||!Xs(s[f],u[f])))return!1;return!0}(n,e);default:return et()}var i}function Gd(n,e){return void 0!==(n.values||[]).find(t=>Xs(t,e))}function ka(n,e){if(n===e)return 0;const t=Sc(n),r=Sc(e);if(t!==r)return It(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return It(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=jn(i.integerValue||i.doubleValue),f=jn(s.integerValue||s.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return Fb(n.timestampValue,e.timestampValue);case 4:return Fb(Sy(n),Sy(e));case 5:return It(n.stringValue,e.stringValue);case 6:return function(i,s){const u=ys(i),f=ys(s);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),f=s.split("/");for(let p=0;p<u.length&&p<f.length;p++){const y=It(u[p],f[p]);if(0!==y)return y}return It(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=It(jn(i.latitude),jn(s.latitude));return 0!==u?u:It(jn(i.longitude),jn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],f=s.values||[];for(let p=0;p<u.length&&p<f.length;++p){const y=ka(u[p],f[p]);if(y)return y}return It(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Dc.mapValue&&s===Dc.mapValue)return 0;if(i===Dc.mapValue)return 1;if(s===Dc.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),p=s.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let I=0;I<f.length&&I<y.length;++I){const T=It(f[I],y[I]);if(0!==T)return T;const S=ka(u[f[I]],p[y[I]]);if(0!==S)return S}return It(f.length,y.length)}(n.mapValue,e.mapValue);default:throw et()}}function Fb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return It(n,e);const t=Mc(n),r=Mc(e),i=It(t.seconds,r.seconds);return 0!==i?i:It(t.nanos,r.nanos)}function qd(n){return Lb(n)}function Lb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Mc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ys(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=Lb(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const f of i)u?u=!1:s+=",",s+=`${f}:${Lb(r.fields[f])}`;return s+"}"}(n.mapValue):et();var e}function Na(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ED(n){return!!n&&"integerValue"in n}function Zd(n){return!!n&&"arrayValue"in n}function Ay(n){return!!n&&"nullValue"in n}function TD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xy(n){return!!n&&"mapValue"in n}function Oy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return eu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Oy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function l2(n){return"nullValue"in n?Py:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Na(Oa.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function u2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Na(Oa.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dc:et()}function MD(n,e){const t=ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function DD(n,e){const t=ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oy(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=Oy(u):i.push(f.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){eu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qr(Oy(this.value))}}function Ub(n){const e=[];return eu(n.fields,(t,r)=>{const i=new rr([t]);if(xy(r)){const s=Ub(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Vi(e)}class xn{constructor(e,t,r,i,s,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=f}static newInvalidDocument(e){return new xn(e,0,at.min(),at.min(),at.min(),qr.empty(),0)}static newFoundDocument(e,t,r,i){return new xn(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new xn(e,2,t,at.min(),at.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,at.min(),at.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ra{constructor(e,t){this.position=e,this.inclusive=t}}function Bb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?qe.comparator(qe.fromName(u.referenceValue),t.key):ka(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function d2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xs(n.position[t],e.position[t]))return!1;return!0}class Wd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jb{}class Ht extends jb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new p2(e,t,r):"array-contains"===t?new g2(e,r):"in"===t?new m2(e,r):"not-in"===t?new I4(e,r):"array-contains-any"===t?new E4(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new w4(e,r):new b4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ka(t,this.value)):null!==t&&Sc(this.value)===Sc(t)&&this.matchesComparison(ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fn extends jb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new fn(e,t)}matches(e){return Fa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Fa(n){return"and"===n.op}function $b(n){return"or"===n.op}function Hb(n){return zb(n)&&Fa(n)}function zb(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function ky(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+qd(n.value);if(Hb(n))return n.filters.map(e=>ky(e)).join(",");{const e=n.filters.map(t=>ky(t)).join(",");return`${n.op}(${e})`}}function h2(n,e){return n instanceof Ht?(t=n,(r=e)instanceof Ht&&t.op===r.op&&t.field.isEqual(r.field)&&Xs(t.value,r.value)):n instanceof fn?function(t,r){return r instanceof fn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&h2(s,r.filters[u]),!0)}(n,e):void et();var t,r}function SD(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function f2(n){return n instanceof Ht?`${(e=n).field.canonicalString()} ${e.op} ${qd(e.value)}`:n instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(f2).join(" ,")+"}"}(n):"Filter";var e}class p2 extends Ht{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class w4 extends Ht{constructor(e,t){super(e,"in",t),this.keys=PD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class b4 extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=PD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class g2 extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zd(t)&&Gd(t.arrayValue,this.value)}}class m2 extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gd(this.value.arrayValue,t)}}class I4 extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gd(this.value.arrayValue,t)}}class E4 extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gd(this.value.arrayValue,r))}}class T4{constructor(e,t=null,r=[],i=[],s=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=f,this.dt=null}}function AD(n,e=null,t=[],r=[],i=null,s=null,u=null){return new T4(n,e,t,r,i,s,u)}function nu(n){const e=Ze(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ky(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qd(r)).join(",")),e.dt=t}return e.dt}function Ny(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!h2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d2(n.startAt,e.startAt)&&d2(n.endAt,e.endAt)}function Gb(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qb(n,e){return n.filters.filter(t=>t instanceof Ht&&t.field.isEqual(e))}function _2(n,e,t){let r=Py,i=!0;for(const s of qb(n,e)){let u=Py,f=!0;switch(s.op){case"<":case"<=":u=l2(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,f=!1;break;case"!=":case"not-in":u=Py}MD({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];MD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function y2(n,e,t){let r=Dc,i=!0;for(const s of qb(n,e)){let u=Dc,f=!0;switch(s.op){case">=":case">":u=u2(s.value),f=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,f=!1;break;case"!=":case"not-in":u=Dc}DD({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];DD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class La{constructor(e,t=null,r=[],i=[],s=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=f,this.endAt=p,this.wt=null,this._t=null}}function v2(n,e,t,r,i,s,u,f){return new La(n,e,t,r,i,s,u,f)}function o(n){return new La(n)}function a(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(n){return null!==n.collectionGroup}function g(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=d(e),r=l(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Wd(t)),e.wt.push(new Wd(rr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Wd(rr.keyField(),s))}}}return e.wt}function v(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=AD(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of g(e))t.push(new Wd(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ra(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ra(e.startAt.position,e.startAt.inclusive):null;e._t=AD(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function C(n,e){e.getFirstInequalityField(),d(n);const t=n.filters.concat([e]);return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function E(n,e,t){return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function M(n,e){return Ny(v(n),v(e))&&n.limitType===e.limitType}function P(n){return`${nu(v(n))}|lt:${n.limitType}`}function F(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>f2(r)).join(", ")}]`),Kp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qd(r)).join(",")),`Target(${t})`}(v(n))}; limitType=${n.limitType})`}function Z(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of g(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const f=Bb(i,s,u);return i.inclusive?f<=0:f<0}(t.startAt,g(t),r)||t.endAt&&!function(i,s,u){const f=Bb(i,s,u);return i.inclusive?f>=0:f>0}(t.endAt,g(t),r)));var t,r}function Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ue(n){return(e,t)=>{let r=!1;for(const i of g(n)){const s=Se(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Se(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,s,u){const f=s.data.field(i),p=u.data.field(i);return null!==f&&null!==p?ka(f,p):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class $e{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return a2(this.inner)}size(){return this.innerSize}}const ct=new An(qe.comparator);function fe(){return ct}const Ct=new An(qe.comparator);function St(...n){let e=Ct;for(const t of n)e=e.insert(t.key,t);return e}function ln(n){let e=Ct;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qn(){return ta()}function ea(){return ta()}function ta(){return new $e(n=>n.toString(),(n,e)=>n.isEqual(e))}const Zb=new An(qe.comparator),C2=new vn(qe.comparator);function xt(...n){let e=C2;for(const t of n)e=e.add(t);return e}const z7=new vn(It);function w2(){return z7}function M4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yp(e)?"-0":e}}function D4(n){return{integerValue:""+n}}function S4(n,e){return pD(e)?D4(e):M4(n,e)}class xD{constructor(){this._=void 0}}function G7(n,e,t){return n instanceof Ry?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&tu(i)&&(i=Rb(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Jp?A4(n,e):n instanceof Xp?x4(n,e):function(r,i){const s=P4(r,i),u=O4(s)+O4(r.gt);return ED(s)&&ED(r.gt)?D4(u):M4(r.serializer,u)}(n,e)}function q7(n,e,t){return n instanceof Jp?A4(n,e):n instanceof Xp?x4(n,e):t}function P4(n,e){return n instanceof Fy?ED(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ry extends xD{}class Jp extends xD{constructor(e){super(),this.elements=e}}function A4(n,e){const t=k4(e);for(const r of n.elements)t.some(i=>Xs(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xp extends xD{constructor(e){super(),this.elements=e}}function x4(n,e){let t=k4(e);for(const r of n.elements)t=t.filter(i=>!Xs(i,r));return{arrayValue:{values:t}}}class Fy extends xD{constructor(e,t){super(),this.serializer=e,this.gt=t}}function O4(n){return jn(n.integerValue||n.doubleValue)}function k4(n){return Zd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wb{constructor(e,t){this.field=e,this.transform=t}}class W7{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kD{}function N4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Uy(n.key,ir.none()):new Ly(n.key,n.data,ir.none());{const t=n.data,r=qr.empty();let i=new vn(rr.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new ru(n.key,r,new Vi(i.toArray()),ir.none())}}function K7(n,e,t){n instanceof Ly?function(r,i,s){const u=r.value.clone(),f=L4(r.fieldTransforms,i,s.transformResults);u.setAll(f),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ru?function(r,i,s){if(!OD(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=L4(r.fieldTransforms,i,s.transformResults),f=i.data;f.setAll(F4(r)),f.setAll(u),i.convertToFoundDocument(s.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Kb(n,e,t,r){return n instanceof Ly?function(i,s,u,f){if(!OD(i.precondition,s))return u;const p=i.value.clone(),y=U4(i.fieldTransforms,f,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ru?function(i,s,u,f){if(!OD(i.precondition,s))return u;const p=U4(i.fieldTransforms,f,s),y=s.data;return y.setAll(F4(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,OD(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function Y7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=P4(r.transform,i||null);null!=s&&(null===t&&(t=qr.empty()),t.set(r.field,s))}return t||null}function R4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jd(t,r,(i,s)=>function Z7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jp&&r instanceof Jp||t instanceof Xp&&r instanceof Xp?jd(t.elements,r.elements,Xs):t instanceof Fy&&r instanceof Fy?Xs(t.gt,r.gt):t instanceof Ry&&r instanceof Ry);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ly extends kD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ru extends kD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function F4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function L4(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,f=e.data.field(s.field);r.set(s.field,q7(u,f,t[i]))}return r}function U4(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,G7(s,u,e))}return r}class Uy extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b2 extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&K7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ea();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let f=this.applyToLocalView(u,s.mutatedFields);f=t.has(i.key)?null:f;const p=N4(u,f);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xt())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(t,r)=>R4(t,r))&&jd(this.baseMutations,e.baseMutations,(t,r)=>R4(t,r))}}class E2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=Zb;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new E2(e,t,r,i)}}class T2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class J7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zr,en;function B4(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function V4(n){if(void 0===n)return Er("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Zr.OK:return ae.OK;case Zr.CANCELLED:return ae.CANCELLED;case Zr.UNKNOWN:return ae.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return ae.INTERNAL;case Zr.UNAVAILABLE:return ae.UNAVAILABLE;case Zr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Zr.NOT_FOUND:return ae.NOT_FOUND;case Zr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Zr.ABORTED:return ae.ABORTED;case Zr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Zr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(en=Zr||(Zr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class M2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ND}static getOrCreateInstance(){return null===ND&&(ND=new M2),ND}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ND=null;function j4(){return new TextEncoder}const X7=new Vd([4294967295,4294967295],0);function $4(n){const e=j4().encode(n),t=new jO;return t.update(e),new Uint8Array(t.digest())}function H4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vd([t,r],0),new Vd([i,s],0)]}class D2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yb(`Invalid padding: ${t}`);if(r<0)throw new Yb(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Yb(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Yb(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Vd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Vd.fromNumber(r)));return 1===i.compare(X7)&&(i=new Vd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=$4(e),[r,i]=H4(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new D2(s,i,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(0===this.It)return;const t=$4(e),[r,i]=H4(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Yb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Jb.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qb(at.min(),i,new An(It),fe(),xt())}}class Jb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jb(r,t,xt(),xt(),xt())}}class RD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class z4{constructor(e,t){this.targetId=e,this.Vt=t}}class G4{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class q4{constructor(){this.St=0,this.Dt=W4(),this.Ct=pr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=xt(),t=xt(),r=xt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new Jb(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=W4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ej{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=Z4(),this.Wt=new An(It)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const u=s.target;if(Gb(u))if(0===i){const f=new qe(u.path);this.Yt(r,f,xn.newNoDocument(f,at.min()))}else rt(1===i);else{const f=this.ie(r);if(f!==i){const p=this.re(e,f);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=M2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,I,T){var S,N,q,Q,J,Ee;const ze={localCacheCount:I,existenceFilterCount:T.count},Ne=T.unchangedNames;return Ne&&(ze.bloomFilter={applied:0===y,hashCount:null!==(S=Ne?.hashCount)&&void 0!==S?S:0,bitmapLength:null!==(Q=null===(q=null===(N=Ne?.bits)||void 0===N?void 0:N.bitmap)||void 0===q?void 0:q.length)&&void 0!==Q?Q:0,padding:null!==(Ee=null===(J=Ne?.bits)||void 0===J?void 0:J.padding)&&void 0!==Ee?Ee:0}),ze}(p,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:f=0}=r;let p,y;try{p=ys(s).toUint8Array()}catch(I){if(I instanceof Tc)return _s("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw I}try{y=new D2(p,u,f)}catch(I){return _s(I instanceof Yb?"BloomFilter error: ":"Applying bloom filter failed: ",I),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const u=this.Gt.ue(),f=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(f)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const f=this.se(u);if(f){if(s.current&&Gb(f.target)){const p=new qe(f.target.path);null!==this.jt.get(p)||this.ae(u,p)||this.Yt(u,p,xn.newNoDocument(p,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let r=xt();this.zt.forEach((s,u)=>{let f=!0;u.forEachWhile(p=>{const y=this.se(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(f=!1,!1)}),f&&(r=r.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const i=new Qb(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=Z4(),this.Wt=new An(It),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new q4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vn(It),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new q4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Z4(){return new An(qe.comparator)}function W4(){return new An(qe.comparator)}const tj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rj={and:"AND",or:"OR"};class ij{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function S2(n,e){return n.useProto3Json||Kp(e)?e:{value:e}}function By(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oj(n,e){return By(n,e.toTimestamp())}function Rr(n){return rt(!!n),at.fromTimestamp(function(e){const t=Mc(e);return new Vn(t.seconds,t.nanos)}(n))}function P2(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Y4(n){const e=Zt.fromString(n);return rt(oU(e)),e}function Xb(n,e){return P2(n.databaseId,e.path)}function Pc(n,e){const t=Y4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(J4(t))}function A2(n,e){return P2(n.databaseId,e)}function Q4(n){const e=Y4(n);return 4===e.length?Zt.emptyPath():J4(e)}function eI(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J4(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function X4(n,e,t){return{name:Xb(n,e),fields:t.value.mapValue.fields}}function eU(n,e,t){const r=Pc(n,e.name),i=Rr(e.updateTime),s=e.createTime?Rr(e.createTime):at.min(),u=new qr({mapValue:{fields:e.fields}}),f=xn.newFoundDocument(r,i,s,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function tI(n,e){let t;if(e instanceof Ly)t={update:X4(n,e.key,e.value)};else if(e instanceof Uy)t={delete:Xb(n,e.key)};else if(e instanceof ru)t={update:X4(n,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof b2))return et();t={verify:Xb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof Ry)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Jp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fy)return{fieldPath:s.field.canonicalString(),increment:u.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function x2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(Rr(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let f=null;"setToServerValue"in u?(rt("REQUEST_TIME"===u.setToServerValue),f=new Ry):"appendMissingElements"in u?f=new Jp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Xp(u.removeAllFromArray.values||[]):"increment"in u?f=new Fy(s,u.increment):et();const p=rr.fromServerFormat(u.fieldPath);return new Wb(p,f)}(n,i)):[];var i;if(e.update){const i=Pc(n,e.update.name),s=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Vi((e.updateMask.fieldPaths||[]).map(y=>rr.fromServerFormat(y)));return new ru(i,s,u,t,r)}return new Ly(i,s,t,r)}if(e.delete){const i=Pc(n,e.delete);return new Uy(i,t)}if(e.verify){const i=Pc(n,e.verify);return new b2(i,t)}return et()}function tU(n,e){return{documents:[A2(n,e.path)]}}function O2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=A2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=A2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return iU(fn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Kd((I=y).field),direction:uj(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=S2(n,e.limit);var f,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function nU(n){let e=Q4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(I){const T=rU(I);return T instanceof fn&&Hb(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new Wd(Vy((T=I).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(I){let T;return T="object"==typeof I?I.value:I,Kp(T)?null:T}(t.limit));let p=null;var I;t.startAt&&(p=new Ra((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new Ra(I.values||[],!I.before)}(t.endAt)),v2(e,i,u,s,f,"F",p,y)}function rU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vy(e.unaryFilter.field);return Ht.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Vy(e.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vy(e.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vy(e.unaryFilter.field);return Ht.create(s,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Ht.create(Vy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(t=>rU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function uj(n){return tj[n]}function dj(n){return nj[n]}function hj(n){return rj[n]}function Kd(n){return{fieldPath:n.canonicalString()}}function Vy(n){return rr.fromServerFormat(n.fieldPath)}function iU(n){return n instanceof Ht?function(e){if("=="===e.op){if(TD(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NAN"}};if(Ay(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(TD(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NAN"}};if(Ay(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kd(e.field),op:dj(e.op),value:e.value}}}(n):n instanceof fn?function(e){const t=e.getFilters().map(r=>iU(r));return 1===t.length?t[0]:{compositeFilter:{op:hj(e.op),filters:t}}}(n):et()}function fj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class iu{constructor(e,t,r,i,s=at.min(),u=at.min(),f=pr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sU{constructor(e){this.fe=e}}function aU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Xb(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:By(i,s.version.toTimestamp()),createTime:By(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:eg(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:eg(e.version)}}var i,s;return r}function FD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function eg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tg(n){const e=new Vn(n.seconds,n.nanoseconds);return at.fromTimestamp(e)}function ng(n,e){const t=(e.baseMutations||[]).map(s=>x2(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>x2(n.fe,s)),i=Vn.fromMillis(e.localWriteTimeMs);return new I2(e.batchId,i,t,r)}function nI(n){const e=tg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tg(n.lastLimboFreeSnapshotVersion):at.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=v(o(Q4(i.documents[0])))):r=v(nU(n.query)),new iu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function cU(n,e){const t=eg(e.snapshotVersion),r=eg(e.lastLimboFreeSnapshotVersion);let i;i=Gb(e.target)?tU(n.fe,e.target):O2(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function k2(n){const e=nU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?E(e,e.limit,"L"):e}function N2(n,e){return new T2(e.largestBatchId,x2(n.fe,e.overlayMutation))}function lU(n,e){const t=e.path.lastSegment();return[n,di(e.path.popLast()),t]}function uU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:eg(r.readTime),documentKey:di(r.documentKey.path),largestBatchId:r.largestBatchId}}class gj{getBundleMetadata(e,t){return dU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:tg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return dU(e).put({bundleId:(r=t).id,createTime:eg(Rr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:k2(i.bundledQuery),readTime:tg(i.readTime)};var i})}saveNamedQuery(e,t){return hU(e).put({name:(r=t).name,readTime:eg(Rr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function dU(n){return Gr(n,"bundles")}function hU(n){return Gr(n,"namedQueries")}class LD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new LD(e,t.uid||"")}getOverlay(e,t){return rI(e).get(lU(this.userId,t)).next(r=>r?N2(this.serializer,r):null)}getOverlays(e,t){const r=Qn();return te.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const f=new T2(t,u);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(di(u.getCollectionPath())));const s=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(rI(e).J("collectionPathOverlayIndex",f))}),te.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Qn(),s=di(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return rI(e).j("collectionPathOverlayIndex",u).next(f=>{for(const p of f){const y=N2(this.serializer,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Qn();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rI(e).X({index:"collectionGroupOverlayIndex",range:f},(p,y,I)=>{const T=N2(this.serializer,y);s.size()<i||T.largestBatchId===u?(s.set(T.getKey(),T),u=T.largestBatchId):I.done()}).next(()=>s)}we(e,t){return rI(e).put(function(r,i,s){const[u,f,p]=lU(i,s.mutation.key);return{userId:i,collectionPath:f,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:tI(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function rI(n){return Gr(n,"documentOverlays")}class rg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Yp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ys(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?c2(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function mj(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function fU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=mj(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}rg.Ve=new rg;class _j{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=fU(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=fU(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yj{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class vj{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class iI{constructor(){this.je=new _j,this.ze=new yj(this.je),this.We=new vj(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ig{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ig(this.indexId,this.documentKey,this.arrayValue,r)}}function Yd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pU(n.arrayValue,e.arrayValue),0!==t?t:(t=pU(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function pU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Cj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const t=Tb(e);if(void 0!==t&&!this.en(t))return!1;const r=Jl(e);let i=new Set,s=0,u=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[s];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[u++],f))return!1}++s}for(;s<r.length;++s)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function gU(n){var e,t;if(rt(n instanceof Ht||n instanceof fn),n instanceof Ht){if(n instanceof m2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Ht.create(n.field,"==",s)))||[];return fn.create(i,"or")}return n}const r=n.filters.map(i=>gU(i));return fn.create(r,n.op)}function wj(n){if(0===n.getFilters().length)return[];const e=L2(gU(n));return rt(mU(e)),R2(e)||F2(e)?[e]:e.getFilters()}function R2(n){return n instanceof Ht}function F2(n){return n instanceof fn&&Hb(n)}function mU(n){return R2(n)||F2(n)||function(e){if(e instanceof fn&&$b(e)){for(const t of e.getFilters())if(!R2(t)&&!F2(t))return!1;return!0}return!1}(n)}function L2(n){if(rt(n instanceof Ht||n instanceof fn),n instanceof Ht)return n;if(1===n.filters.length)return L2(n.filters[0]);const e=n.filters.map(r=>L2(r));let t=fn.create(e,n.op);return t=UD(t),mU(t)?t:(rt(t instanceof fn),rt(Fa(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>U2(r,i)))}function U2(n,e){let t;return rt(n instanceof Ht||n instanceof fn),rt(e instanceof Ht||e instanceof fn),t=n instanceof Ht?e instanceof Ht?fn.create([n,e],"and"):_U(n,e):e instanceof Ht?_U(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),Fa(r)&&Fa(i))return SD(r,i.getFilters());const s=$b(r)?r:i,u=$b(r)?i:r,f=s.filters.map(p=>U2(p,u));return fn.create(f,"or")}(n,e),UD(t)}function _U(n,e){if(Fa(e))return SD(e,n.getFilters());{const t=e.filters.map(r=>U2(n,r));return fn.create(t,"or")}}function UD(n){if(rt(n instanceof Ht||n instanceof fn),n instanceof Ht)return n;const e=n.getFilters();if(1===e.length)return UD(e[0]);if(zb(n))return n;const t=e.map(i=>UD(i)),r=[];return t.forEach(i=>{i instanceof Ht?r.push(i):i instanceof fn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:fn.create(r,n.op)}class bj{constructor(){this.rn=new B2}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(po.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(po.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class B2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Zt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Zt.comparator)).toArray()}}const BD=new Uint8Array(0);class Ij{constructor(e,t){this.user=e,this.databaseId=t,this.on=new B2,this.un=new $e(r=>nu(r),(r,i)=>Ny(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:di(i)};return yU(e).put(s)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uD(t),""],!1,!0);return yU(e).j(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Js(u.parent))}return r})}addFieldIndex(e,t){const r=VD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=sI(e);return s.next(f=>{u.put(uU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=VD(e),i=sI(e),s=oI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=oI(e);let i=!0;const s=new Map;return te.forEach(this.cn(t),u=>this.an(e,u).next(f=>{i&&(i=!!f),s.set(u,f)})).next(()=>{if(i){let u=xt();const f=[];return te.forEach(s,(p,y)=>{var I;Pe("IndexedDbIndexManager",`Using index ${I=p,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(Ne=>`${Ne.fieldPath}:${Ne.kind}`).join(",")}`} to execute ${nu(t)}`);const T=function(Ne,Ye){const gt=Tb(Ye);if(void 0===gt)return null;for(const Pt of qb(Ne,gt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(y,p),S=function(Ne,Ye){const gt=new Map;for(const Pt of Jl(Ye))for(const Lr of qb(Ne,Pt.fieldPath))switch(Lr.op){case"==":case"in":gt.set(Pt.fieldPath.canonicalString(),Lr.value);break;case"not-in":case"!=":return gt.set(Pt.fieldPath.canonicalString(),Lr.value),Array.from(gt.values())}return null}(y,p),N=function(Ne,Ye){const gt=[];let Pt=!0;for(const Lr of Jl(Ye)){const Ho=0===Lr.kind?_2(Ne,Lr.fieldPath,Ne.startAt):y2(Ne,Lr.fieldPath,Ne.startAt);gt.push(Ho.value),Pt&&(Pt=Ho.inclusive)}return new Ra(gt,Pt)}(y,p),q=function(Ne,Ye){const gt=[];let Pt=!0;for(const Lr of Jl(Ye)){const Ho=0===Lr.kind?y2(Ne,Lr.fieldPath,Ne.endAt):_2(Ne,Lr.fieldPath,Ne.endAt);gt.push(Ho.value),Pt&&(Pt=Ho.inclusive)}return new Ra(gt,Pt)}(y,p),Q=this.hn(p,y,N),J=this.hn(p,y,q),Ee=this.ln(p,y,S),ze=this.fn(p.indexId,T,Q,N.inclusive,J,q.inclusive,Ee);return te.forEach(ze,Ne=>r.H(Ne,t.limit).next(Ye=>{Ye.forEach(gt=>{const Pt=qe.fromSegments(gt.documentKey);u.has(Pt)||(u=u.add(Pt),f.push(Pt))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wj(fn.create(e.filters,"and")).map(r=>AD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,u,f){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),I=[];for(let T=0;T<p;++T){const S=t?this.dn(t[T/y]):BD,N=this.wn(e,S,r[T%y],i),q=this._n(e,S,s[T%y],u),Q=f.map(J=>this.wn(e,S,J,!0));I.push(...this.createRange(N,q,Q))}return I}wn(e,t,r,i){const s=new ig(e,qe.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new ig(e,qe.empty(),t,r);return i?s.Je():s}an(e,t){const r=new Cj(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const f of s)r.tn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,s=>this.an(e,s).next(u=>{u?0!==r&&u.fields.length<function(f){let p=new vn(rr.comparator),y=!1;for(const I of f.filters)for(const T of I.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:p=p.add(T.field));for(const I of f.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new iI;for(const i of Jl(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.He(i.kind);rg.Ve._e(s,u)}return r.Qe()}dn(e){const t=new iI;return rg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new iI;return rg.Ve._e(Na(this.databaseId,t),r.He(function(i){const s=Jl(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new iI);let s=0;for(const u of Jl(e)){const f=r[s++];for(const p of i)if(this.yn(t,u.fieldPath)&&Zd(f))i=this.pn(i,u,f);else{const y=p.He(u.kind);rg.Ve._e(f,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const f of i){const p=new iI;p.seed(f.Qe()),rg.Ve._e(u,p.He(t.kind)),s.push(p)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof Ht&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=VD(e),i=sI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const u=[];return te.forEach(s,f=>i.get([f.indexId,this.uid]).next(p=>{u.push(function(y,I){const T=I?new $d(I.sequenceNumber,new po(tg(I.readTime),new qe(Js(I.documentKey)),I.largestBatchId)):$d.empty(),S=y.fields.map(([N,q])=>new Cy(rr.fromServerFormat(N),q));return new vy(y.indexId,y.collectionGroup,S,T)}(f,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:It(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=VD(e),s=sI(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,p=>s.put(uU(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?te.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,p=>this.En(e,i,p).next(y=>{const I=this.An(s,p);return y.isEqual(I)?te.resolve():this.vn(e,s,p,y,I)}))))})}Rn(e,t,r,i){return oI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return oI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=oI(e);let s=new vn(Yd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,f)=>{s=s.add(new ig(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>s)}An(e,t){let r=new vn(Yd);const i=this.mn(t,e);if(null==i)return r;const s=Tb(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Zd(u))for(const f of u.arrayValue.values||[])r=r.add(new ig(t.indexId,e.key,this.dn(f),i))}else r=r.add(new ig(t.indexId,e.key,BD,i));return r}vn(e,t,r,i,s){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,p,y,I,T){const S=f.getIterator(),N=p.getIterator();let q=zd(S),Q=zd(N);for(;q||Q;){let J=!1,Ee=!1;if(q&&Q){const ze=y(q,Q);ze<0?Ee=!0:ze>0&&(J=!0)}else null!=q?Ee=!0:J=!0;J?(I(Q),Q=zd(N)):Ee?(T(q),q=zd(S)):(q=zd(S),Q=zd(N))}}(i,s,Yd,f=>{u.push(this.Rn(e,t,r,f))},f=>{u.push(this.Pn(e,t,r,f))}),te.waitFor(u)}Tn(e){let t=1;return sI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Yd(u,f)).filter((u,f,p)=>!f||0!==Yd(u,p[f-1]));const i=[];i.push(e);for(const u of r){const f=Yd(u,e),p=Yd(u,t);if(0===f)i[0]=e.Je();else if(f>0&&p<0)i.push(u),i.push(u.Je());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,BD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,BD,[]]))}return s}bn(e,t){return Yd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vU)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(vU)}}function yU(n){return Gr(n,"collectionParents")}function oI(n){return Gr(n,"indexEntries")}function VD(n){return Gr(n,"indexConfiguration")}function sI(n){return Gr(n,"indexState")}function vU(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;by(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new po(e.readTime,e.documentKey,t)}const CU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class no{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new no(e,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let f=0;const p=r.X({range:u},(I,T,S)=>(f++,S.delete()));s.push(p.next(()=>{rt(1===f)}));const y=[];for(const I of t.mutations){const T=My(e,I.key.path,t.batchId);s.push(i.delete(T)),y.push(I.key)}return te.waitFor(s).next(()=>y)}function jD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(41943040,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);class $D{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new $D(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).X({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=jy(e),u=Qd(e);return u.add({}).next(f=>{rt("number"==typeof f);const p=new I2(f,t,r,i),y=function(S,N,q){const Q=q.baseMutations.map(Ee=>tI(S.fe,Ee)),J=q.mutations.map(Ee=>tI(S.fe,Ee));return{userId:N,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,p),I=[];let T=new vn((S,N)=>It(S.canonicalString(),N.canonicalString()));for(const S of i){const N=My(this.userId,S.key.path,f);T=T.add(S.key.path.popLast()),I.push(u.put(y)),I.push(s.put(N,gD))}return T.forEach(S=>{I.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.Vn[f]=p.keys()}),te.waitFor(I).next(()=>p)})}lookupMutationBatch(e,t){return Qd(e).get(t).next(r=>r?(rt(r.userId===this.userId),ng(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Qd(e).X({index:"userMutationsIndex",range:i},(u,f,p)=>{f.userId===this.userId&&(rt(f.batchId>=r),s=ng(this.serializer,f)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).j("userMutationsIndex",t).next(r=>r.map(i=>ng(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ab(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return jy(e).X({range:i},(u,f,p)=>{const[y,I,T]=u,S=Js(I);if(y===this.userId&&t.path.isEqual(S))return Qd(e).get(T).next(N=>{if(!N)throw et();rt(N.userId===this.userId),s.push(ng(this.serializer,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(It);const i=[];return t.forEach(s=>{const u=Ab(this.userId,s.path),f=IDBKeyRange.lowerBound(u),p=jy(e).X({range:f},(y,I,T)=>{const[S,N,q]=y,Q=Js(N);S===this.userId&&s.path.isEqual(Q)?r=r.add(q):T.done()});i.push(p)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ab(this.userId,r),u=IDBKeyRange.lowerBound(s);let f=new vn(It);return jy(e).X({range:u},(p,y,I)=>{const[T,S,N]=p,q=Js(S);T===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(N)):I.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Qd(e).get(s).next(u=>{if(null===u)throw et();rt(u.userId===this.userId),r.push(ng(this.serializer,u))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wU(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return jy(e).X({range:r},(s,u,f)=>{if(s[0]===this.userId){const p=Js(s[1]);i.push(p)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return bU(e,this.userId,t)}xn(e){return IU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bU(n,e,t){const r=Ab(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return jy(n).X({range:s,Y:!0},(f,p,y)=>{const[I,T,S]=f;I===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function Qd(n){return Gr(n,"mutations")}function jy(n){return Gr(n,"documentMutations")}function IU(n){return Gr(n,"mutationQueues")}class og{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new og(0)}static Mn(){return new og(-1)}}class Ej{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new og(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>at.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$y(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return $y(e).X((u,f)=>{const p=nI(f);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>te.waitFor(s)).next(()=>i)}forEachTarget(e,t){return $y(e).X((r,i)=>{const s=nI(i);t(s)})}$n(e){return EU(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}On(e,t){return EU(e).put("targetGlobalKey",t)}Fn(e,t){return $y(e).put(cU(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=nu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return $y(e).X({range:i,index:"queryTargetsIndex"},(u,f,p)=>{const y=nI(f);Ny(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Jd(e);return t.forEach(u=>{const f=di(u.path);i.push(s.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Jd(e);return te.forEach(t,s=>{const u=di(s.path);return te.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Jd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Jd(e);let s=xt();return i.X({range:r,Y:!0},(u,f,p)=>{const y=Js(u[1]),I=new qe(y);s=s.add(I)}).next(()=>s)}containsKey(e,t){const r=di(t.path),i=IDBKeyRange.bound([r],[uD(r)],!1,!0);let s=0;return Jd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,f],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}le(e,t){return $y(e).get(t).next(r=>r?nI(r):null)}}function $y(n){return Gr(n,"targets")}function EU(n){return Gr(n,"targetGlobal")}function Jd(n){return Gr(n,"targetDocuments")}function TU([n,e],[t,r]){const i=It(n,t);return 0===i?It(e,r):i}class Tj{constructor(e){this.Ln=e,this.buffer=new vn(TU),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,R.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Bi(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fr(r)}yield t.Qn(3e5)}))}}class Mj{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(go.ct);const r=new Tj(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(CU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CU):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,u,f,p,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),sD()<=Ri.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${s} targets in `+(p-f)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-I}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class Dj{constructor(e,t){this.db=e,this.garbageCollector=function DU(n,e){return new Mj(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return HD(e,r)}removeReference(e,t,r){return HD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HD(e,t)}Xn(e,t){return function(r,i){let s=!1;return IU(r).Z(u=>bU(r,u,i).next(f=>(f&&(s=!0),te.resolve(!f)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(u,f)=>{if(f<=t){const p=this.Xn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,at.min()),Jd(e).delete([0,di(u.path)])))});i.push(p)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HD(e,t)}Yn(e,t){const r=Jd(e);let i,s=go.ct;return r.X({index:"documentTargetsIndex"},([u,f],{path:p,sequenceNumber:y})=>{0===u?(s!==go.ct&&t(new qe(Js(i)),s),s=y,i=p):s=go.ct}).next(()=>{s!==go.ct&&t(new qe(Js(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HD(n,e){return Jd(n).put((r=n.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:r}));var r}class SU{constructor(){this.changes=new $e(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sg(e).put(r)}removeEntry(e,t,r){return sg(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],FD(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(aI(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(aI(t))},(i,s)=>{r={document:this.ts(t,s),size:jD(s)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,s)=>{const u=this.ts(i,s);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=fe(),i=new An(qe.comparator);return this.ns(e,t,(s,u)=>{const f=this.ts(s,u);r=r.insert(s,f),i=i.insert(s,jD(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new vn(OU);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(aI(i.first()),aI(i.last())),u=i.getIterator();let f=u.getNext();return sg(e).X({index:"documentKeyIndex",range:s},(p,y,I)=>{const T=qe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&OU(f,T)<0;)r(f,null),f=u.getNext();f&&f.isEqual(T)&&(r(f,y),f=u.hasNext()?u.getNext():null),f?I.G(aI(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,u=[s.popLast().toArray(),s.lastSegment(),FD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sg(e).j(IDBKeyRange.bound(u,f,!0)).next(p=>{let y=fe();for(const I of p){const T=this.ts(qe.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);T.isFoundDocument()&&(Z(t,T)||i.has(T.key))&&(y=y.insert(T.key,T))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=fe();const u=xU(t,r),f=xU(t,po.max());return sg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(p,y,I)=>{const T=this.ts(qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===i&&I.done()}).next(()=>s)}newChangeBuffer(e){return new Pj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AU(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Zn(e,t){return AU(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function pj(n,e){let t;if(e.document)t=eU(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=tg(e.noDocument.readTime);t=xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=qe.fromSegments(e.unknownDocument.path),i=tg(e.unknownDocument.version);t=xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Vn(r[0],r[1]);return at.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(at.min()))return r}return xn.newInvalidDocument(e)}}function PU(n){return new Sj(n)}class Pj extends SU{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $e(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((s,u)=>It(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const f=this.us.get(s);if(t.push(this.os.removeEntry(e,s,f.readTime)),u.isValidDocument()){const p=aU(this.os.serializer,u);i=i.add(s.path.popLast());const y=jD(p);r+=y-f.size,t.push(this.os.addEntry(e,s,p))}else if(r-=f.size,this.trackRemovals){const p=aU(this.os.serializer,u.convertToNoDocument(at.min()));t.push(this.os.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,u)=>{this.us.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function AU(n){return Gr(n,"remoteDocumentGlobal")}function sg(n){return Gr(n,"remoteDocumentsV14")}function aI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xU(n,e){const t=e.documentKey.path.toArray();return[n,FD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=It(t[s],r[s]),i)return i;return i=It(t.length,r.length),i||(i=It(t[t.length-2],r[r.length-2]),i||It(t[t.length-1],r[r.length-1]))}class Aj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Kb(r.mutation,i,Vi.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xt()){const i=Qn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=St();return s.forEach((f,p)=>{u=u.insert(f,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Qn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let s=fe();const u=ta(),f=ta();return t.forEach((p,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof ru)?s=s.insert(y.key,y):void 0!==I?(u.set(y.key,I.mutation.getFieldMask()),Kb(I.mutation,y,I.mutation.getFieldMask(),Vn.now())):u.set(y.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,I)=>u.set(y,I)),t.forEach((y,I)=>{var T;return f.set(y,new Aj(I,null!==(T=u.get(y))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=ta();let i=new An((u,f)=>u-f),s=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let I=r.get(p)||Vi.empty();I=f.applyToLocalView(y,I),r.set(p,I);const T=(i.get(f.batchId)||xt()).add(p);i=i.insert(f.batchId,T)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,I=p.value,T=ea();I.forEach(S=>{if(!s.has(S)){const N=N4(t.get(S),r.get(S));null!==N&&T.set(S,N),s=s.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return te.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):te.resolve(Qn());let f=-1,p=s;return u.next(y=>te.forEach(y,(I,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),s.get(I)?te.resolve():this.remoteDocumentCache.getEntry(e,I).next(S=>{p=p.insert(I,S)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,xt())).next(I=>({batchId:f,changes:ln(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=St();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=St();return this.indexManager.getCollectionParents(e,i).next(u=>te.forEach(u,f=>{const p=(y=t,I=f.child(i),new La(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((I,T)=>{s=s.insert(I,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((f,p)=>{const y=p.getKey();null===s.get(y)&&(s=s.insert(y,xn.newInvalidDocument(y)))});let u=St();return s.forEach((f,p)=>{const y=i.get(f);void 0!==y&&Kb(y.mutation,p,Vi.empty(),Vn.now()),Z(t,p)&&(u=u.insert(f,p))}),u})}}class xj{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Rr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:k2(r.bundledQuery),readTime:Rr(r.readTime)}),te.resolve();var r}}class Oj{constructor(){this.overlays=new An(qe.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qn();return te.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=Qn(),s=t.length+1,u=new qe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new An((y,I)=>y-I);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=s.get(y.largestBatchId);null===I&&(I=Qn(),s=s.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const f=Qn(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,I)=>f.set(y,I)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new T2(t,r));let s=this.ls.get(t);void 0===s&&(s=xt(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class V2{constructor(){this.fs=new vn(Ti.ds),this.ws=new vn(Ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new qe(new Zt([])),r=new Ti(t,e),i=new Ti(t,e+1),s=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qe(new Zt([])),r=new Ti(t,e),i=new Ti(t,e+1);let s=xt();return this.ws.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qe.comparator(e.key,t.key)||It(e.As,t.As)}static _s(e,t){return It(e.As,t.As)||qe.comparator(e.key,t.key)}}class kj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vn(Ti.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const u=new I2(s,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Rs=this.Rs.add(new Ti(f.key,s)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],u=>{const f=this.Ps(u.As);s.push(f)}),te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(It);return t.forEach(i=>{const s=new Ti(i,0),u=new Ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const u=new Ti(new qe(s),0);let f=new vn(It);return this.Rs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(f=f.add(p.As)),!0)},u),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const s=new Ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ti(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nj{constructor(e){this.Ds=e,this.docs=new An(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=fe();const u=t.path,f=new qe(u.child("")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:I}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||by(dD(I),r)<=0||(i.has(I.key)||Z(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return te.resolve(s)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rj(this)}getSize(e){return te.resolve(this.size)}}class Rj extends SU{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Fj{constructor(e){this.persistence=e,this.xs=new $e(t=>nu(t),Ny),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Ns=0,this.ks=new V2,this.targetCount=0,this.Ms=og.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new og(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(s).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),te.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class j2{constructor(e,t){this.$s={},this.overlays={},this.Os=new go(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Fj(this),this.indexManager=new bj,this.remoteDocumentCache=new Nj(r=>this.referenceDelegate.Ls(r)),this.serializer=new sU(t),this.qs=new xj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new kj(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new Lj(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Lj extends YO{constructor(e){super(),this.currentSequenceNumber=e}}class zD{constructor(e){this.persistence=e,this.Qs=new V2,this.js=null}static zs(e){return new zD(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=qe.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,at.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Uj{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Ey("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pb,{unique:!0}),f.createObjectStore("documentMutations"),NU(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),NU(e)),u=u.next(()=>function(f){const p=f.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:at.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,p){return p.store("mutations").j().next(y=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pb,{unique:!0});const I=p.store("mutations"),T=y.map(S=>I.put(S));return te.waitFor(T)})}(e,s))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(s))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(s))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(s))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const p=f.createObjectStore("documentOverlays",{keyPath:wD});p.createIndex("collectionPathOverlayIndex",t2,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",n2,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const p=f.createObjectStore("remoteDocumentsV14",{keyPath:mD});p.createIndex("documentKeyIndex",JO),p.createIndex("collectionGroupIndex",_D)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,s))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:CD}).createIndex("sequenceNumberIndex",XO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:e2}).createIndex("documentKeyIndex",y4,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=jD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>te.forEach(f,p=>{rt(p.userId===s.userId);const y=ng(this.serializer,p);return wU(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((u,f)=>{const p=new Zt(u),y=[0,di(p)];s.push(t.get(y).next(I=>I?te.resolve():t.put({targetId:0,path:di(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:vD});const r=t.store("collectionParents"),i=new B2,s=u=>{if(i.add(u)){const f=u.lastSegment(),p=u.popLast();return r.put({collectionId:f,parent:di(p)})}};return t.store("remoteDocuments").X({Y:!0},(u,f)=>{const p=new Zt(u);return s(p.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,f,p],y)=>{const I=Js(f);return s(I.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=nI(i),u=cU(this.serializer,s);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,u)=>{const f=t.store("remoteDocumentsV14"),p=(y=u,y.document?new qe(Zt.fromString(y.document.name).popFirst(5)):y.noDocument?qe.fromSegments(y.noDocument.path):y.unknownDocument?qe.fromSegments(y.unknownDocument.path):et()).path.toArray();var y;const I={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(I))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=PU(this.serializer),s=new j2(zD.zs,this.serializer.fe);return r.j().next(u=>{const f=new Map;return u.forEach(p=>{var y;let I=null!==(y=f.get(p.userId))&&void 0!==y?y:xt();ng(this.serializer,p).keys().forEach(T=>I=I.add(T)),f.set(p.userId,I)}),te.forEach(f,(p,y)=>{const I=new kr(y),T=LD.de(this.serializer,I),S=s.getIndexManager(I),N=$D.de(I,this.serializer,S,s.referenceDelegate);return new kU(i,N,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Ob(t,go.ct),p).next()})})}}function NU(n){n.createObjectStore("targetDocuments",{keyPath:Hd}).createIndex("documentTargetsIndex",Dy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yD,{unique:!0}),n.createObjectStore("targetGlobal")}const $2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class H2{constructor(e,t,r,i,s,u,f,p,y,I,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=u,this.document=f,this.ri=y,this.oi=I,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=S=>Promise.resolve(),!H2.D())throw new ye(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dj(this,i),this.di=t+"main",this.serializer=new sU(p),this.wi=new Vo(this.di,this.ui,new Uj(this.serializer)),this.Bs=new Ej(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PU(this.serializer),this.qs=new gj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===I&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,$2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new go(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,R.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,R.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,R.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Bi(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return cI(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return qD(e).delete(this.clientId)}bi(){var e=this;return(0,R.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gr(r,"clientMetadata");return i.j().next(s=>{const u=e.Si(s,18e5),f=s.filter(p=>-1===u.indexOf(p));return te.forEach(f,p=>i.delete(p.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):cI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,$2);return!1}}return!(!this.networkEnabled||!this.inForeground)||qD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,R.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ob(t,go.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>qD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return $D.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ij(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return LD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.ui)?o2:14===u?xb:13===u?i2:12===u?v4:11===u?r2:void et();var u;let f;return this.wi.runTransaction(e,i,s,p=>(f=new Ob(p,this.Os?this.Os.next():go.ct),"readwrite-primary"===t?this.Ti(f).next(y=>!!y||this.Ei(f)).next(y=>{if(!y)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ye(ae.FAILED_PRECONDITION,Mb);return r(f)}).next(y=>this.vi(f).next(()=>y)):this.Oi(f).next(()=>r(f)))).then(p=>(f.raiseOnCommittedEvent(),p))}Oi(e){return cI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ae.FAILED_PRECONDITION,$2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cI(e).put("owner",t)}static D(){return Vo.D()}Ai(e){const t=cI(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cI(n){return Gr(n,"owner")}function qD(n){return Gr(n,"clientMetadata")}function z2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class G2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=xt(),i=xt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new G2(e,t.fromCache,r,i)}}class RU{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(a(t))return te.resolve(null);let r=v(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=E(t,null,"F"),r=v(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=xt(...s);return this.Ui.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.ji(t,f);return this.zi(t,y,u,p.readTime)?this.Ki(e,E(t,null,"F")):this.Wi(e,y,t,p)}))})))}Gi(e,t,r,i){return a(t)||i.isEqual(at.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const u=this.ji(t,s);return this.zi(t,u,r,i)?this.Qi(e,t):(sD()<=Ri.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),F(t)),this.Wi(e,u,t,wy(i,-1)))})}ji(e,t){let r=new vn(ue(e));return t.forEach((i,s)=>{Z(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return sD()<=Ri.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",F(t)),this.Ui.getDocumentsMatchingQuery(e,t,po.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class Bj{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new An(It),this.Yi=new $e(s=>nu(s),Ny),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function FU(n,e,t,r){return new Bj(n,e,t,r)}function LU(n,e){return q2.apply(this,arguments)}function q2(){return q2=(0,R.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],f=[];let p=xt();for(const y of i){u.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}for(const y of s){f.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}return t.localDocuments.getDocuments(r,p).next(y=>({er:y,removedBatchIds:u,addedBatchIds:f}))})})}),q2.apply(this,arguments)}function UU(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function BU(n,e,t){let r=xt(),i=xt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=fe();return t.forEach((f,p)=>{const y=s.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(f)),p.isNoDocument()&&p.version.isEqual(at.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{nr:u,sr:i}})}function $j(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hy(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,te.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new iu(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function zy(n,e,t){return Z2.apply(this,arguments)}function Z2(){return Z2=(0,R.Z)(function*(n,e,t){const r=Ze(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Bi(u))throw u;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Z2.apply(this,arguments)}function ZD(n,e,t){const r=Ze(n);let i=at.min(),s=xt();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,p,y){const I=Ze(f),T=I.Yi.get(y);return void 0!==T?te.resolve(I.Ji.get(T)):I.Bs.getTargetData(p,y)}(r,u,v(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,f.targetId).next(p=>{s=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:at.min(),t?s:xt())).next(f=>($U(r,Y(e),f),{documents:f,ir:s})))}function VU(n,e){const t=Ze(n),r=Ze(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(u=>u?u.target:null))}function jU(n,e){const t=Ze(n),r=t.Xi.get(e)||at.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,wy(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($U(t,e,i),i))}function $U(n,e,t){let r=n.Xi.get(e)||at.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function W2(){return W2=(0,R.Z)(function*(n,e,t,r){const i=Ze(n);let s=xt(),u=fe();for(const y of t){const I=e.rr(y.metadata.name);y.document&&(s=s.add(I));const T=e.ur(y);T.setReadTime(e.cr(y.metadata.readTime)),u=u.insert(I,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),p=yield Hy(i,(y=r,v(o(Zt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>BU(y,f,u).next(I=>(f.apply(y),I)).next(I=>i.Bs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Bs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,I.nr,I.sr)).next(()=>I.nr)))}),W2.apply(this,arguments)}function zj(n,e){return K2.apply(this,arguments)}function K2(){return K2=(0,R.Z)(function*(n,e,t=xt()){const r=yield Hy(n,v(k2(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Rr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(s,e);const f=r.withResumeToken(pr.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(s,f).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),K2.apply(this,arguments)}function HU(n,e){return`firestore_clients_${n}_${e}`}function zU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Y2(n,e){return`firestore_targets_${n}_${e}`}class WD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new ye(i.error.code,i.error.message))),u?new WD(e,t,i.state,s):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ye(r.error.code,r.error.message))),s?new lI(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=w2();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=pD(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new KD(e,s):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Q2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Q2(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class J2{constructor(){this.activeTargetIds=w2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X2{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new An(It),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=HU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new J2),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,R.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(HU(e.persistenceKey,i));if(s){const u=KD.ar(i,s);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Y2(this.persistenceKey,e));if(r){const i=lI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Y2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,R.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let u=go.ct;if(null!=s)try{const f=JSON.parse(s);rt("number"==typeof f),u=f}catch(f){Er("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==go.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new WD(this.currentUser,e,t,r),s=zU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=zU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Y2(this.persistenceKey,e),s=new lI(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return KD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return WD.ar(new kr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return lI.ar(i,t)}br(e){return Q2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,R.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),u=[],f=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||f.push(p)}),this.syncEngine.Wr(u,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=w2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class GU{constructor(){this.Hr=new J2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new J2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gj{Yr(e){}shutdown(){}}class qU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YD=null;function ek(){return null===YD?YD=268435456+Math.round(2147483648*Math.random()):YD++,"0x"+YD.toString(16)}const qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zj{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ro="WebChannelConnection";class Wj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const u=ek(),f=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const p={};return this.Eo(p,i,s),this.Ao(e,f,p,r).then(y=>(Pe("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw _s("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",f,"request:",r),y})}vo(e,t,r,i,s,u){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${qj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=ek();return new Promise((u,f)=>{const p=new oD;p.setWithCredentials(!0),p.listenOnce(rD.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case bb.NO_ERROR:const I=p.getResponseJson();Pe(ro,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case bb.TIMEOUT:Pe(ro,`RPC '${e}' ${s} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case bb.HTTP_ERROR:const T=p.getStatus();if(Pe(ro,`RPC '${e}' ${s} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const q=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(N.status);f(new ye(q,N.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Pe(ro,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);Pe(ro,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=ek(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nD(),f=BO(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.xmlHttpFactory=new iD({})),this.Eo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const I=s.join("");Pe(ro,`Creating RPC '${e}' stream ${i}: ${I}`,p);const T=u.createWebChannel(I,p);let S=!1,N=!1;const q=new Zj({ro:J=>{N?Pe(ro,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(S||(Pe(ro,`Opening RPC '${e}' stream ${i} transport.`),T.open(),S=!0),Pe(ro,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,Ee,ze)=>{J.listen(Ee,Ne=>{try{ze(Ne)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,zp.EventType.OPEN,()=>{N||Pe(ro,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,zp.EventType.CLOSE,()=>{N||(N=!0,Pe(ro,`RPC '${e}' stream ${i} transport closed`),q.wo())}),Q(T,zp.EventType.ERROR,J=>{N||(N=!0,_s(ro,`RPC '${e}' stream ${i} transport errored:`,J),q.wo(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,zp.EventType.MESSAGE,J=>{var Ee;if(!N){const ze=J.data[0];rt(!!ze);const Ye=ze.error||(null===(Ee=ze[0])||void 0===Ee?void 0:Ee.error);if(Ye){Pe(ro,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let Pt=function(Ho){const Av=Zr[Ho];if(void 0!==Av)return V4(Av)}(gt),Lr=Ye.message;void 0===Pt&&(Pt=ae.INTERNAL,Lr="Unknown error status: "+gt+" with message "+Ye.message),N=!0,q.wo(new ye(Pt,Lr)),T.close()}else Pe(ro,`RPC '${e}' stream ${i} received:`,ze),q._o(ze)}}),Q(f,VO.STAT_EVENT,J=>{J.stat===Ib.PROXY?Pe(ro,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===Ib.NOPROXY&&Pe(ro,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function ZU(){return typeof window<"u"?window:null}function QD(){return typeof document<"u"?document:null}function uI(n){return new ij(n,!0)}class tk{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class WU{constructor(e,t,r,i,s,u,f,p){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new tk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,R.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,R.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,R.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,R.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kj extends WU{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function aj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:et(),i=e.targetChange.targetIds||[],s=function(p,y){return p.useProto3Json?(rt(void 0===y||"string"==typeof y),pr.fromBase64String(y||"")):(rt(void 0===y||y instanceof Uint8Array),pr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(p){const y=void 0===p.code?ae.UNKNOWN:V4(p.code);return new ye(y,p.message||"")}(u);t=new G4(r,i,s,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Pc(n,r.document.name),s=Rr(r.document.updateTime),u=r.document.createTime?Rr(r.document.createTime):at.min(),f=new qr({mapValue:{fields:r.document.fields}}),p=xn.newFoundDocument(i,s,u,f);t=new RD(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Pc(n,r.document),s=r.readTime?Rr(r.readTime):at.min(),u=xn.newNoDocument(i,s);t=new RD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Pc(n,r.document);t=new RD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new J7(i,s);t=new z4(r.targetId,u)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?at.min():s.readTime?Rr(s.readTime):at.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=eI(this.serializer),t.addTarget=function(i,s){let u;const f=s.target;if(u=Gb(f)?{documents:tU(i,f)}:{query:O2(i,f)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=K4(i,s.resumeToken);const p=S2(i,s.expectedCount);null!==p&&(u.expectedCount=p)}else if(s.snapshotVersion.compareTo(at.min())>0){u.readTime=By(i,s.snapshotVersion.toTimestamp());const p=S2(i,s.expectedCount);null!==p&&(u.expectedCount=p)}return u}(this.serializer,e);const r=function lj(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=eI(this.serializer),t.removeTarget=e,this.Wo(t)}}class Yj extends WU{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function cj(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let s=Rr(r.updateTime?r.updateTime:i);return s.isEqual(at.min())&&(s=Rr(i)),new W7(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.cu(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=eI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tI(this.serializer,r))};this.Wo(t)}}class Qj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ae.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Xj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Er(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class e8{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(f=>{r.enqueueAndForget((0,R.Z)(function*(){var p;Xd(u)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,R.Z)(function*(y){const I=Ze(y);I.vu.add(4),yield Gy(I),I.bu.set("Unknown"),I.vu.delete(4),yield dI(I)}),function(y){return p.apply(this,arguments)})(u))}))}),this.bu=new Xj(r,i)}}function dI(n){return rk.apply(this,arguments)}function rk(){return rk=(0,R.Z)(function*(n){if(Xd(n))for(const e of n.Ru)yield e(!0)}),rk.apply(this,arguments)}function Gy(n){return ik.apply(this,arguments)}function ik(){return ik=(0,R.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),ik.apply(this,arguments)}function JD(n,e){const t=Ze(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),ak(t)?sk(t):Zy(t).Ko()&&ok(t,e))}function hI(n,e){const t=Ze(n),r=Zy(t);t.Au.delete(e),r.Ko()&&KU(t,e),0===t.Au.size&&(r.Ko()?r.jo():Xd(t)&&t.bu.set("Unknown"))}function ok(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zy(n).su(e)}function KU(n,e){n.Vu.qt(e),Zy(n).iu(e)}function sk(n){n.Vu=new ej({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Zy(n).start(),n.bu.gu()}function ak(n){return Xd(n)&&!Zy(n).Uo()&&n.Au.size>0}function Xd(n){return 0===Ze(n).vu.size}function YU(n){n.Vu=void 0}function t8(n){return ck.apply(this,arguments)}function ck(){return ck=(0,R.Z)(function*(n){n.Au.forEach((e,t)=>{ok(n,e)})}),ck.apply(this,arguments)}function n8(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,R.Z)(function*(n,e){YU(n),ak(n)?(n.bu.Iu(e),sk(n)):n.bu.set("Unknown")}),lk.apply(this,arguments)}function r8(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,R.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof G4&&2===e.state&&e.cause)try{yield(r=(0,R.Z)(function*(i,s){const u=s.cause;for(const f of s.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XD(n,r)}else if(e instanceof RD?n.Vu.Ht(e):e instanceof z4?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(at.min()))try{const r=yield UU(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Vu.ce(s);return u.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=i.Au.get(p);y&&i.Au.set(p,y.withResumeToken(f.resumeToken,s))}}),u.targetMismatches.forEach((f,p)=>{const y=i.Au.get(f);if(!y)return;i.Au.set(f,y.withResumeToken(pr.EMPTY_BYTE_STRING,y.snapshotVersion)),KU(i,f);const I=new iu(y.target,f,p,y.sequenceNumber);ok(i,I)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield XD(n,r)}var r}),uk.apply(this,arguments)}function XD(n,e,t){return dk.apply(this,arguments)}function dk(){return dk=(0,R.Z)(function*(n,e,t){if(!Bi(e))throw e;n.vu.add(1),yield Gy(n),n.bu.set("Offline"),t||(t=()=>UU(n.localStore)),n.asyncQueue.enqueueRetryable((0,R.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield dI(n)}))}),dk.apply(this,arguments)}function QU(n,e){return e().catch(t=>XD(n,t,e))}function qy(n){return hk.apply(this,arguments)}function hk(){return hk=(0,R.Z)(function*(n){const e=Ze(n),t=eh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;i8(e);)try{const i=yield $j(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,o8(e,i)}catch(i){yield XD(e,i)}JU(e)&&XU(e)}),hk.apply(this,arguments)}function i8(n){return Xd(n)&&n.Eu.length<10}function o8(n,e){n.Eu.push(e);const t=eh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function JU(n){return Xd(n)&&!eh(n).Uo()&&n.Eu.length>0}function XU(n){eh(n).start()}function s8(n){return fk.apply(this,arguments)}function fk(){return fk=(0,R.Z)(function*(n){eh(n).hu()}),fk.apply(this,arguments)}function a8(n){return pk.apply(this,arguments)}function pk(){return pk=(0,R.Z)(function*(n){const e=eh(n);for(const t of n.Eu)e.uu(t.mutations)}),pk.apply(this,arguments)}function c8(n,e,t){return gk.apply(this,arguments)}function gk(){return gk=(0,R.Z)(function*(n,e,t){const r=n.Eu.shift(),i=E2.from(r,e,t);yield QU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qy(n)}),gk.apply(this,arguments)}function l8(n,e){return mk.apply(this,arguments)}function mk(){return mk=(0,R.Z)(function*(n,e){var t;e&&eh(n).ou&&(yield(t=(0,R.Z)(function*(r,i){if(B4(s=i.code)&&s!==ae.ABORTED){const u=r.Eu.shift();eh(r).Qo(),yield QU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield qy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),JU(n)&&XU(n)}),mk.apply(this,arguments)}function e3(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,R.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Xd(t);t.vu.add(3),yield Gy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield dI(t)}),_k.apply(this,arguments)}function yk(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,R.Z)(function*(n,e){const t=Ze(n);e?(t.vu.delete(2),yield dI(t)):e||(t.vu.add(2),yield Gy(t),t.bu.set("Unknown"))}),vk.apply(this,arguments)}function Zy(n){return n.Su||(n.Su=function(e,t,r){const i=Ze(e);return i.fu(),new Kj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:t8.bind(null,n),ao:n8.bind(null,n),nu:r8.bind(null,n)}),n.Ru.push(function(){var e=(0,R.Z)(function*(t){t?(n.Su.Qo(),ak(n)?sk(n):n.bu.set("Unknown")):(yield n.Su.stop(),YU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function eh(n){return n.Du||(n.Du=function(e,t,r){const i=Ze(e);return i.fu(),new Yj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:s8.bind(null,n),ao:l8.bind(null,n),au:a8.bind(null,n),cu:c8.bind(null,n)}),n.Ru.push(function(){var e=(0,R.Z)(function*(t){t?(n.Du.Qo(),yield qy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Ck{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,f=new Ck(e,t,u,i,s);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wy(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Bi(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=St(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new Ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class t3{constructor(){this.Cu=new An(qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yy{constructor(e,t,r,i,s,u,f,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Yy(e,t,Ky.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&M(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class u8{constructor(){this.Nu=void 0,this.listeners=[]}}class d8{constructor(){this.queries=new $e(e=>P(e),M),this.onlineState="Unknown",this.ku=new Set}}function wk(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,R.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new u8),i)try{s.Nu=yield t.onListen(r)}catch(u){const f=Wy(u,`Initialization of query '${F(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&Tk(t)}),bk.apply(this,arguments)}function Ik(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,R.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ek.apply(this,arguments)}function h8(n,e){const t=Ze(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.$u(i)&&(r=!0);u.Nu=i}}r&&Tk(t)}function f8(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Tk(n){n.ku.forEach(e=>{e.next()})}class Mk{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class p8{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class n3{constructor(e){this.serializer=e}rr(e){return Pc(this.serializer,e)}ur(e){return e.metadata.exists?eU(this.serializer,e.document,!1):xn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Rr(e)}}class g8{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=r3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Zt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new n3(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||xt()).add(s);t.set(u,f)}}return t}complete(){var e=this;return(0,R.Z)(function*(){const t=yield function Hj(n,e,t,r){return W2.apply(this,arguments)}(e.localStore,new n3(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield zj(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function r3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class i3{constructor(e){this.key=e}}class o3{constructor(e){this.key=e}}class s3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=xt(),this.mutatedKeys=xt(),this.tc=ue(e),this.ec=new Ky(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new t3,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,T)=>{const S=i.get(I),N=Z(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),Q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let J=!1;S&&N?S.data.isEqual(N.data)?q!==Q&&(r.track({type:3,doc:N}),J=!0):this.rc(S,N)||(r.track({type:2,doc:N}),J=!0,(p&&this.tc(N,p)>0||y&&this.tc(N,y)<0)&&(f=!0)):!S&&N?(r.track({type:0,doc:N}),J=!0):S&&!N&&(r.track({type:1,doc:S}),J=!0,(p||y)&&(f=!0)),J&&(N?(u=u.add(N),s=Q?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ec:u,ic:r,zi:f,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,I)=>function(T,S){const N=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return N(T)-N(S)}(y.type,I.type)||this.tc(y.doc,I.doc)),this.oc(r);const u=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,p=f!==this.Xu;return this.Xu=f,0!==s.length||p?{snapshot:new Yy(this.query,e.ec,i,s,e.mutatedKeys,0===f,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new t3,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=xt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new o3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new i3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=xt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Yy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class m8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _8{constructor(e){this.key=e,this.fc=!1}}class y8{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new $e(f=>P(f),M),this._c=new Map,this.mc=new Set,this.gc=new An(qe.comparator),this.yc=new Map,this.Ic=new V2,this.Tc={},this.Ec=new Map,this.Ac=og.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function v8(n,e){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,R.Z)(function*(n,e){const t=Yk(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const u=yield Hy(t.localStore,v(e)),f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Sk(t,e,r,"current"===f,u.resumeToken),t.isPrimaryClient&&JD(t.remoteStore,u)}return i}),Dk.apply(this,arguments)}function Sk(n,e,t,r,i){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,R.Z)(function*(n,e,t,r,i){n.Rc=(T,S,N)=>{return(q=(0,R.Z)(function*(Q,J,Ee,ze){let Ne=J.view.sc(Ee);Ne.zi&&(Ne=yield ZD(Q.localStore,J.query,!1).then(({documents:Pt})=>J.view.sc(Pt,Ne)));const Ye=ze&&ze.targetChanges.get(J.targetId),gt=J.view.applyChanges(Ne,Q.isPrimaryClient,Ye);return Bk(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,Ee,ze){return q.apply(this,arguments)})(n,T,S,N);var q};const s=yield ZD(n.localStore,e,!0),u=new s3(e,s.ir),f=u.sc(s.documents),p=Jb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(f,n.isPrimaryClient,p);Bk(n,t,y.cc);const I=new m8(e,t,u);return n.wc.set(e,I),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),Pk.apply(this,arguments)}function C8(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,R.Z)(function*(n,e){const t=Ze(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!M(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hI(t.remoteStore,r.targetId),Qy(t,r.targetId)}).catch(fr))):(Qy(t,r.targetId),yield zy(t.localStore,r.targetId,!0))}),Ak.apply(this,arguments)}function xk(){return xk=(0,R.Z)(function*(n,e,t){const r=Qk(n);try{const i=yield function(s,u){const f=Ze(s),p=Vn.now(),y=u.reduce((S,N)=>S.add(N.key),xt());let I,T;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=fe(),q=xt();return f.Zi.getEntries(S,y).next(Q=>{N=Q,N.forEach((J,Ee)=>{Ee.isValidDocument()||(q=q.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,N)).next(Q=>{I=Q;const J=[];for(const Ee of u){const ze=Y7(Ee,I.get(Ee.key).overlayedDocument);null!=ze&&J.push(new ru(Ee.key,ze,Ub(ze.value.mapValue),ir.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,J,u)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(I,q);return f.documentOverlayCache.saveOverlays(S,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:ln(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,f){let p=s.Tc[s.currentUser.toKey()];p||(p=new An(It)),p=p.insert(u,f),s.Tc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield ou(r,i.changes),yield qy(r.remoteStore)}catch(i){const s=Wy(i,"Failed to persist write");t.reject(s)}}),xk.apply(this,arguments)}function a3(n,e){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,R.Z)(function*(n,e){const t=Ze(n);try{const r=yield function jj(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((I,T)=>{const S=i.get(T);if(!S)return;f.push(t.Bs.removeMatchingKeys(s,I.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(s,I.addedDocuments,T)));let N=S.withSequenceNumber(s.currentSequenceNumber);var q,Q,J;null!==e.targetMismatches.get(T)?N=N.withResumeToken(pr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):I.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(I.resumeToken,r)),i=i.insert(T,N),Q=N,J=I,(0===(q=S).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(s,N))});let p=fe(),y=xt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),f.push(BU(s,u,e.documentUpdates).next(I=>{p=I.nr,y=I.sr})),!r.isEqual(at.min())){const I=t.Bs.getLastRemoteSnapshotVersion(s).next(T=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));f.push(I)}return te.waitFor(f).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.yc.get(s);u&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?rt(u.fc):i.removedDocuments.size>0&&(rt(u.fc),u.fc=!1))}),yield ou(t,r,e)}catch(r){yield fr(r)}}),Ok.apply(this,arguments)}function c3(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,u)=>{const f=u.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(s,u){const f=Ze(s);f.onlineState=u;let p=!1;f.queries.forEach((y,I)=>{for(const T of I.listeners)T.Mu(u)&&(p=!0)}),p&&Tk(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function b8(n,e,t){return kk.apply(this,arguments)}function kk(){return kk=(0,R.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let u=new An(qe.comparator);u=u.insert(s,xn.newNoDocument(s,at.min()));const f=xt().add(s),p=new Qb(at.min(),new Map,new An(It),u,f);yield a3(r,p),r.gc=r.gc.remove(s),r.yc.delete(e),Vk(r)}else yield zy(r.localStore,e,!1).then(()=>Qy(r,e,t)).catch(fr)}),kk.apply(this,arguments)}function I8(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,R.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield function Vj(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,f,p,y){const I=p.batch,T=I.keys();let S=te.resolve();return T.forEach(N=>{S=S.next(()=>y.getEntry(f,N)).next(q=>{const Q=p.docVersions.get(N);rt(null!==Q),q.version.compareTo(Q)<0&&(I.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),y.addEntry(q)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(f,I))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=xt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(f=f.add(u.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Uk(t,r,null),Lk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ou(t,i)}catch(i){yield fr(i)}}),Nk.apply(this,arguments)}function E8(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,R.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(s,u){const f=Ze(s);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,u).next(I=>(rt(null!==I),y=I.keys(),f.mutationQueue.removeMutationBatch(p,I))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(r.localStore,e);Uk(r,e,t),Lk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ou(r,i)}catch(i){yield fr(i)}}),Rk.apply(this,arguments)}function Fk(){return Fk=(0,R.Z)(function*(n,e){const t=Ze(n);Xd(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Ze(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Wy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Fk.apply(this,arguments)}function Lk(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Uk(n,e,t){const r=Ze(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||l3(n,r)})}function l3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(hI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Vk(n))}function Bk(n,e,t){for(const r of t)r instanceof i3?(n.Ic.addReference(r.key,e),M8(n,r)):r instanceof o3?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||l3(n,r.key)):et()}function M8(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),Vk(n))}function Vk(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new qe(Zt.fromString(e)),r=n.Ac.next();n.yc.set(r,new _8(t)),n.gc=n.gc.insert(t,r),JD(n.remoteStore,new iu(v(o(t.path)),r,"TargetPurposeLimboResolution",go.ct))}}function ou(n,e,t){return jk.apply(this,arguments)}function jk(){return jk=(0,R.Z)(function*(n,e,t){const r=Ze(n),i=[],s=[],u=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,p)=>{u.push(r.Rc(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const I=G2.Li(p.targetId,y);s.push(I)}}))}),yield Promise.all(u),r.dc.nu(i),yield(f=(0,R.Z)(function*(p,y){const I=Ze(p);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>te.forEach(y,S=>te.forEach(S.Fi,N=>I.persistence.referenceDelegate.addReference(T,S.targetId,N)).next(()=>te.forEach(S.Bi,N=>I.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))}catch(T){if(!Bi(T))throw T;Pe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const N=I.Ji.get(S),Q=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);I.Ji=I.Ji.insert(S,Q)}}}),function(p,y){return f.apply(this,arguments)})(r.localStore,s))}),jk.apply(this,arguments)}function D8(n,e){return $k.apply(this,arguments)}function $k(){return $k=(0,R.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield LU(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(f=>{f.reject(new ye(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ou(t,r.er)}var i}),$k.apply(this,arguments)}function S8(n,e){const t=Ze(n),r=t.yc.get(e);if(r&&r.fc)return xt().add(r.key);{let i=xt();const s=t._c.get(e);if(!s)return i;for(const u of s){const f=t.wc.get(u);i=i.unionWith(f.view.nc)}return i}}function P8(n,e){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,R.Z)(function*(n,e){const t=Ze(n),r=yield ZD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Bk(t,e.targetId,i.cc),i}),Hk.apply(this,arguments)}function A8(n,e){return zk.apply(this,arguments)}function zk(){return zk=(0,R.Z)(function*(n,e){const t=Ze(n);return jU(t.localStore,e).then(r=>ou(t,r))}),zk.apply(this,arguments)}function x8(n,e,t,r){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,R.Z)(function*(n,e,t,r){const i=Ze(n),s=yield function(u,f){const p=Ze(u),y=Ze(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Sn(I,f).next(T=>T?p.localDocuments.getDocuments(I,T):te.resolve(null)))}(i.localStore,e);var f;null!==s?("pending"===t?yield qy(i.remoteStore):"acknowledged"===t||"rejected"===t?(Uk(i,e,r||null),Lk(i,e),f=e,Ze(Ze(i.localStore).mutationQueue).Cn(f)):et(),yield ou(i,s)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Gk.apply(this,arguments)}function qk(){return qk=(0,R.Z)(function*(n,e){const t=Ze(n);if(Yk(t),Qk(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield u3(t,r.toArray());t.vc=!0,yield yk(t.remoteStore,!0);for(const s of i)JD(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Qy(t,u),zy(t.localStore,u,!0))),hI(t.remoteStore,u)}),yield i,yield u3(t,r),function(s){const u=Ze(s);u.yc.forEach((f,p)=>{hI(u.remoteStore,p)}),u.Ic.Ts(),u.yc=new Map,u.gc=new An(qe.comparator)}(t),t.vc=!1,yield yk(t.remoteStore,!1)}}),qk.apply(this,arguments)}function u3(n,e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,R.Z)(function*(n,e,t){const r=Ze(n),i=[],s=[];for(const u of e){let f;const p=r._c.get(u);if(p&&0!==p.length){f=yield Hy(r.localStore,v(p[0]));for(const y of p){const I=r.wc.get(y),T=yield P8(r,I);T.snapshot&&s.push(T.snapshot)}}else{const y=yield VU(r.localStore,u);f=yield Hy(r.localStore,y),yield Sk(r,d3(y),u,!1,f.resumeToken)}i.push(f)}return r.dc.nu(s),i}),Zk.apply(this,arguments)}function d3(n){return v2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function k8(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).$i()}function N8(n,e,t,r){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,R.Z)(function*(n,e,t,r){const i=Ze(n);if(i.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield jU(i.localStore,Y(s[0])),f=Qb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield ou(i,u,f);break}case"rejected":yield zy(i.localStore,e,!0),Qy(i,e,r);break;default:et()}}),Wk.apply(this,arguments)}function R8(n,e,t){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,R.Z)(function*(n,e,t){const r=Yk(n);if(r.vc){for(const i of e){if(r._c.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const s=yield VU(r.localStore,i),u=yield Hy(r.localStore,s);yield Sk(r,d3(s),u.targetId,!1,u.resumeToken),JD(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield zy(r.localStore,i,!1).then(()=>{hI(r.remoteStore,i),Qy(r,i)}).catch(fr))}}),Kk.apply(this,arguments)}function Yk(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=a3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b8.bind(null,e),e.dc.nu=h8.bind(null,e.eventManager),e.dc.Pc=f8.bind(null,e.eventManager),e}function Qk(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E8.bind(null,e),e}class fI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,R.Z)(function*(){t.serializer=uI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return FU(this.persistence,new RU,e.initialUser,this.serializer)}createPersistence(e){return new j2(zD.zs,this.serializer)}createSharedClientState(e){return new GU}terminate(){var e=this;return(0,R.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Jk extends fI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,R.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Qk(r.Vc.syncEngine),yield qy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return FU(this.persistence,new RU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new MU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new fD(t,this.persistence);return new m4(e.asyncQueue,r)}createPersistence(e){const t=z2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?no.withCacheSize(this.cacheSizeBytes):no.DEFAULT;return new H2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ZU(),QD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new GU}}class h3 extends Jk{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,R.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof X2&&(r.sharedClientState.syncEngine={jr:x8.bind(null,i),zr:N8.bind(null,i),Wr:R8.bind(null,i),$i:k8.bind(null,i),Qr:A8.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,R.Z)(function*(u){yield function O8(n,e){return qk.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ZU();if(!X2.D(t))throw new ye(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=z2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new X2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jy{initialize(e,t){var r=this;return(0,R.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>c3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=D8.bind(null,r.syncEngine),yield yk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new d8}createDatastore(e){const t=uI(e.databaseInfo.databaseId),r=new Wj(e.databaseInfo);return new Qj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=f=>c3(this.syncEngine,f,0),u=qU.D()?new qU:new Gj,new e8(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,f,p,y){const I=new y8(r,i,s,u,f,p);return y&&(I.vc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,R.Z)(function*(t){const r=Ze(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Gy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function f3(n,e=10240){let t=0;return{read:()=>(0,R.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,R.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class U8{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,R.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,R.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,R.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new p8(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,R.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,R.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,R.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class B8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,R.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,R.Z)(function*(s,u){const f=Ze(s),p=eI(f.serializer)+"/documents",y={documents:u.map(N=>Xb(f.serializer,N))},I=yield f.vo("BatchGetDocuments",p,y,u.length),T=new Map;I.forEach(N=>{const q=function sj(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=Pc(t,r.found.name),s=Rr(r.found.updateTime),u=r.found.createTime?Rr(r.found.createTime):at.min(),f=new qr({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(i,s,u,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=Pc(t,r.missing),s=Rr(r.readTime);return xn.newNoDocument(i,s)}(n,e):et()}(f.serializer,N);T.set(q.key.toString(),q)});const S=[];return u.forEach(N=>{const q=T.get(N.toString());rt(!!q),S.push(q)}),S}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,R.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=qe.fromPath(i);e.mutations.push(new b2(s,e.precondition(s)))}),yield(r=(0,R.Z)(function*(i,s){const u=Ze(i),f=eI(u.serializer)+"/documents",p={writes:s.map(y=>tI(u.serializer,y))};yield u.Io("Commit",f,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=at.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(at.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(at.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class V8{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new tk(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,R.Z)(function*(){const t=new B8(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Kp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!B4(t)}return!1}}class j8{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kr.UNAUTHENTICATED,this.clientId=Zp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,R.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield s.authCredentialListener(f),s.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,R.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,R.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Wy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tS(n,e){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,R.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,R.Z)(function*(s){r.isEqual(s)||(yield LU(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Xk.apply(this,arguments)}function eN(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,R.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nN(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>e3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>e3(e.remoteStore,s)),n._onlineComponents=e}),tN.apply(this,arguments)}function p3(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function nN(n){return rN.apply(this,arguments)}function rN(){return rN=(0,R.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!p3(t))throw t;_s("Error using user provided cache. Falling back to memory cache: "+t),yield tS(n,new fI)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield tS(n,new fI);return n._offlineComponents}),rN.apply(this,arguments)}function nS(n){return iN.apply(this,arguments)}function iN(){return iN=(0,R.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield eN(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield eN(n,new Jy))),n._onlineComponents}),iN.apply(this,arguments)}function g3(n){return nN(n).then(e=>e.persistence)}function rS(n){return nN(n).then(e=>e.localStore)}function m3(n){return nS(n).then(e=>e.remoteStore)}function oN(n){return nS(n).then(e=>e.syncEngine)}function Xy(n){return sN.apply(this,arguments)}function sN(){return sN=(0,R.Z)(function*(n){const e=yield nS(n),t=e.eventManager;return t.onListen=v8.bind(null,e.syncEngine),t.onUnlisten=C8.bind(null,e.syncEngine),t}),sN.apply(this,arguments)}function y3(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return function(i,s,u,f,p){const y=new eS({next:T=>{s.enqueueAndForget(()=>Ik(i,I));const S=T.docs.has(u);!S&&T.fromCache?p.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&f&&"server"===f.source?p.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new Mk(o(u.path),y,{includeMetadataChanges:!0,Ku:!0});return wk(i,I)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}function v3(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return function(i,s,u,f,p){const y=new eS({next:T=>{s.enqueueAndForget(()=>Ik(i,I)),T.fromCache&&"server"===f.source?p.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new Mk(u,y,{includeMetadataChanges:!0,Ku:!0});return wk(i,I)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}function C3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const w3=new Map;function aN(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b3(n,e,t,r){if(!0===e&&!0===r)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I3(n){if(!qe.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E3(n){if(qe.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iS(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function T3(n,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class M3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=C3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new f4;switch(t.type){case"firstParty":return new qO(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=w3.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),w3.delete(e),t.terminate())}(this),Promise.resolve()}}function D3(n,e,t,r={}){var i;const s=(n=Xt(n,pI))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let f,p;if("string"==typeof r.mockUserToken)f=r.mockUserToken,p=kr.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new kr(y)}n._authCredentials=new zO(new HO(f,p))}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Ac extends ji{constructor(e,t,r){super(e,t,o(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new qe(e))}withConverter(e){return new Ac(this.firestore,e,this._path)}}function S3(n,e,...t){if(n=(0,z.m9)(n),aN("collection","path",e),n instanceof pI){const r=Zt.fromString(e,...t);return E3(r),new Ac(n,null,r)}{if(!(n instanceof Jn||n instanceof Ac))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return E3(r),new Ac(n.firestore,null,r)}}function oS(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Zp.A()),aN("doc","path",e),n instanceof pI){const r=Zt.fromString(e,...t);return I3(r),new Jn(n,null,new qe(r))}{if(!(n instanceof Jn||n instanceof Ac))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return I3(r),new Jn(n.firestore,n instanceof Ac?n.converter:null,new qe(r))}}function P3(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Jn||n instanceof Ac)&&(e instanceof Jn||e instanceof Ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cN(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&M(n._query,e._query)&&n.converter===e.converter}class Q8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new tk(this,"async_queue_retry"),this.Xc=()=>{const t=QD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=QD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=QD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Nr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,R.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Bi(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Ck.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,R.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function lN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class J8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends pI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Q8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||A3(this),this._firestoreClient.terminate()}}function e$(n,e){const t="object"==typeof n?n:(0,Sn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Sn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,z.P0)("firestore");s&&D3(i,...s)}return i}function Fr(n){return n._firestoreClient||A3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function A3(n){var e,t,r;const i=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new C4(n._databaseId,f,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,C3(y.experimentalLongPollingOptions),y.useFetchStreams));var f,y;n._firestoreClient=new j8(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function x3(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,R.Z)(function*(){try{yield tS(n,t),yield eN(n,e),r.resolve()}catch(i){const s=i;if(!p3(s))throw s;_s("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function O3(n){if(n._initialized||n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(pr.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xc(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ag{constructor(e){this._methodName=e}}class sS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return It(this._lat,e._lat)||It(this._long,e._long)}}const u$=/^__.*__$/;class d${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ly(e,this.data,t,this.fieldTransforms)}}class k3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function N3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class aS{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new aS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return uS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(N3(this.ca)&&u$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class h${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uI(e)}ya(e,t,r,i=!1){return new aS({ca:e,methodName:t,ga:r,path:rr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cg(n){const e=n._freezeSettings(),t=uI(n._databaseId);return new h$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cS(n,e,t,r,i,s={}){const u=n.ya(s.merge||s.mergeFields?2:0,e,t,i);fN("Data must be an object, but it was:",u,r);const f=L3(r,u);let p,y;if(s.merge)p=new Vi(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const T of s.mergeFields){const S=_I(e,T,t);if(!u.contains(S))throw new ye(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);B3(I,S)||I.push(S)}p=new Vi(I),y=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=u.fieldTransforms;return new d$(new qr(f),p,y)}class mI extends ag{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mI}}function R3(n,e,t){return new aS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uN extends ag{_toFieldTransform(e){return new Wb(e.path,new Ry)}isEqual(e){return e instanceof uN}}class f$ extends ag{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=R3(this,e,!0),r=this.pa.map(s=>lg(s,t)),i=new Jp(r);return new Wb(e.path,i)}isEqual(e){return this===e}}class p$ extends ag{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=R3(this,e,!0),r=this.pa.map(s=>lg(s,t)),i=new Xp(r);return new Wb(e.path,i)}isEqual(e){return this===e}}class g$ extends ag{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Fy(e.serializer,S4(e.serializer,this.Ia));return new Wb(e.path,t)}isEqual(e){return this===e}}function dN(n,e,t,r){const i=n.ya(1,e,t);fN("Data must be an object, but it was:",i,r);const s=[],u=qr.empty();eu(r,(p,y)=>{const I=lS(e,p,t);y=(0,z.m9)(y);const T=i.da(I);if(y instanceof mI)s.push(I);else{const S=lg(y,T);null!=S&&(s.push(I),u.set(I,S))}});const f=new Vi(s);return new k3(u,f,i.fieldTransforms)}function hN(n,e,t,r,i,s){const u=n.ya(1,e,t),f=[_I(e,r,t)],p=[i];if(s.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<s.length;S+=2)f.push(_I(e,s[S])),p.push(s[S+1]);const y=[],I=qr.empty();for(let S=f.length-1;S>=0;--S)if(!B3(y,f[S])){const N=f[S];let q=p[S];q=(0,z.m9)(q);const Q=u.da(N);if(q instanceof mI)y.push(N);else{const J=lg(q,Q);null!=J&&(y.push(N),I.set(N,J))}}const T=new Vi(y);return new k3(I,T,u.fieldTransforms)}function F3(n,e,t,r=!1){return lg(t,n.ya(r?4:3,e))}function lg(n,e){if(U3(n=(0,z.m9)(n)))return fN("Unsupported field value:",e,n),L3(n,e);if(n instanceof ag)return function(t,r){if(!N3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let f=lg(u,r.wa(s));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return S4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Vn.fromDate(t);return{timestampValue:By(r.serializer,i)}}if(t instanceof Vn){const i=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:By(r.serializer,i)}}if(t instanceof sS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xc)return{bytesValue:K4(r.serializer,t._byteString)};if(t instanceof Jn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:P2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${iS(t)}`)}(n,e)}function L3(n,e){const t={};return a2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eu(n,(r,i)=>{const s=lg(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function U3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof sS||n instanceof xc||n instanceof Jn||n instanceof ag)}function fN(n,e,t){if(!U3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function _I(n,e,t){if((e=(0,z.m9)(e))instanceof su)return e._internalPath;if("string"==typeof e)return lS(n,e);throw uS("Field path arguments must be of type string or ",n,!1,void 0,t)}const m$=new RegExp("[~\\*/\\[\\]]");function lS(n,e,t){if(e.search(m$)>=0)throw uS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw uS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uS(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new ye(ae.INVALID_ARGUMENT,f+n+p)}function B3(n,e){return n.some(t=>t.isEqual(e))}class yI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _$ extends yI{data(){return super.data()}}function dS(n,e){return"string"==typeof e?lS(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}function V3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pN{}class vI extends pN{}function th(n,e,...t){let r=[];e instanceof pN&&r.push(e),r=r.concat(t),function(i){const s=i.filter(f=>f instanceof ev).length,u=i.filter(f=>f instanceof CI).length;if(s>1||s>0&&u>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class CI extends vI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new CI(e,t,r)}_apply(e){const t=this._parse(e);return z3(e._query,t),new ji(e.firestore,e.converter,C(e._query,t))}_parse(e){const t=cg(e.firestore);return function(i,s,u,f,p,y,I){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){H3(I,y);const S=[];for(const N of I)S.push($3(f,i,N));T={arrayValue:{values:S}}}else T=$3(f,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||H3(I,y),T=F3(u,"where",I,"in"===y||"not-in"===y);return Ht.create(p,y,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ev extends pN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ev(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const u=i.getFlattenedFilters();for(const f of u)z3(s,f),s=C(s,f)}(e._query,t),new ji(e.firestore,e.converter,C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class gN extends vI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gN(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Wd(i,s);return function(f,p){if(null===l(f)){const y=d(f);null!==y&&G3(0,y,p.field)}}(r,u),u}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new La(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hS extends vI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new hS(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,E(e._query,this._limit,this._limitType))}}class fS extends vI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new fS(e,t,r)}_apply(e){const t=j3(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new La((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pS extends vI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pS(e,t,r)}_apply(e){const t=j3(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new La((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function j3(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof yI)return function(i,s,u,f,p){if(!f)throw new ye(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const I of g(i))if(I.field.isKeyField())y.push(Na(s,f.key));else{const T=f.data.field(I.field);if(tu(T))throw new ye(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const S=I.field.canonicalString();throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ra(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cg(n.firestore);return function(s,u,f,p,y,I){const T=s.explicitOrderBy;if(y.length>T.length)throw new ye(ae.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let N=0;N<y.length;N++){const q=y[N];if(T[N].field.isKeyField()){if("string"!=typeof q)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof q}`);if(!h(s)&&-1!==q.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${q}' contains a slash.`);const Q=s.path.child(Zt.fromString(q));if(!qe.isDocumentKey(Q))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new qe(Q);S.push(Na(u,J))}else{const Q=F3(f,p,q);S.push(Q)}}return new Ra(S,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $3(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!qe.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Na(n,new qe(r))}if(t instanceof Jn)return Na(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iS(t)}.`)}function H3(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z3(n,e){if(e.isInequality()){const r=d(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=l(n);null!==s&&G3(0,i,s)}const t=function(r,i){for(const s of r)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function G3(n,e,t){if(!t.isEqual(e))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mN{convertValue(e,t="none"){switch(Sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return eu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new sS(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sy(e));default:return null}}convertTimestamp(e){const t=Mc(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);rt(oU(r));const i=new Oa(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||Er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function gS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class M$ extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class ug{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class au extends yI{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wI extends au{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ug(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wI(this._firestore,this._userDataWriter,r.key,r,new ug(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new wI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ug(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new wI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ug(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:S$(u.type),doc:f,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function Z3(n,e){return n instanceof au&&e instanceof au?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&cN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rh extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function W3(n,e,t){n=Xt(n,Jn);const r=Xt(n.firestore,Xn),i=gS(n.converter,e,t);return tv(r,[cS(cg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function K3(n,e,t,...r){n=Xt(n,Jn);const i=Xt(n.firestore,Xn),s=cg(i);let u;return u="string"==typeof(e=(0,z.m9)(e))||e instanceof su?hN(s,"updateDoc",n._key,e,t,r):dN(s,"updateDoc",n._key,e),tv(i,[u.toMutation(n._key,ir.exists(!0))])}function Y3(n,...e){var t,r,i;n=(0,z.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||lN(e[u])||(s=e[u],u++);const f={includeMetadataChanges:s.includeMetadataChanges};if(lN(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,y,I;if(n instanceof Jn)y=Xt(n.firestore,Xn),I=o(n._key.path),p={next:T=>{e[u]&&e[u](_N(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=Xt(n,ji);y=Xt(T.firestore,Xn),I=T._query;const S=new rh(y);p={next:N=>{e[u]&&e[u](new nh(y,S,T,N))},error:e[u+1],complete:e[u+2]},V3(n._query)}return function(T,S,N,q){const Q=new eS(q),J=new Mk(S,Q,N);return T.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return wk(yield Xy(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return Ik(yield Xy(T),J)}))}}(Fr(y),I,f,p)}function tv(n,e){return function(t,r){const i=new Nr;return t.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return function w8(n,e,t){return xk.apply(this,arguments)}(yield oN(t),r,i)})),i.promise}(Fr(n),e)}function _N(n,e,t){const r=t.docs.get(e._key),i=new rh(n);return new au(n,i,e._key,r,new ug(t.hasPendingWrites,t.fromCache),e.converter)}const q$={maxAttempts:5};class Q3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cg(e)}set(e,t,r){this._verifyNotCommitted();const i=ih(e,this._firestore),s=gS(i.converter,t,r),u=cS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ih(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof su?hN(this._dataReader,"WriteBatch.update",s._key,t,r,i):dN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new Uy(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Z$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cg(e)}get(e){const t=ih(e,this._firestore),r=new M$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const s=i[0];if(s.isFoundDocument())return new yI(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new yI(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=ih(e,this._firestore),s=gS(i.converter,t,r),u=cS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=ih(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof su?hN(this._dataReader,"Transaction.update",s._key,t,r,i):dN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new rh(this._firestore);return super.get(e).then(i=>new au(this._firestore,r,t._key,i._document,new ug(!1,!1),t.converter))}}function yN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function X3(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function e5(){if(!function ID(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gp=Sn.SDK_VERSION,(0,Sn._registerComponent)(new wr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Xn(new cD(t.getProvider("auth-internal")),new p4(t.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(f.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)($O,"3.13.0",n),(0,Sn.registerVersion)($O,"3.13.0","esm2017")}();class bI{constructor(e){this._delegate=e}static fromBase64String(e){return e5(),new bI(xc.fromBase64String(e))}static fromUint8Array(e){return X3(),new bI(xc.fromUint8Array(e))}toBase64(){return e5(),this._delegate.toBase64()}toUint8Array(){return X3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vN(n){return function nH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rH{enableIndexedDbPersistence(e,t){return function t$(n,e){O3(n=Xt(n,Xn));const t=Fr(n);if(t._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Jy;return x3(t,i,new Jk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function n$(n){O3(n=Xt(n,Xn));const e=Fr(n);if(e._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Jy;return x3(e,r,new h3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function r$(n){if(n._initialized&&!n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,R.Z)(function*(){try{yield(t=(0,R.Z)(function*(r){if(!Vo.D())return Promise.resolve();const i=r+"main";yield Vo.delete(i)}),function(r){return t.apply(this,arguments)})(z2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class t5{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){D3(this._delegate,e,t,r)}enableNetwork(){return function o$(n){return function $8(n){return n.asyncQueue.enqueue((0,R.Z)(function*(){const e=yield g3(n),t=yield m3(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.vu.delete(0),dI(i)}(t)}))}(Fr(n=Xt(n,Xn)))}(this._delegate)}disableNetwork(){return function s$(n){return function H8(n){return n.asyncQueue.enqueue((0,R.Z)(function*(){const e=yield g3(n),t=yield m3(n);return e.setNetworkEnabled(!1),(r=(0,R.Z)(function*(i){const s=Ze(i);s.vu.add(0),yield Gy(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Xt(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,b3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function i$(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return function T8(n,e){return Fk.apply(this,arguments)}(yield oN(e),t)})),t.promise}(Fr(n=Xt(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function L$(n,e){return function q8(n,e){const t=new eS(e);return n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return r=yield Xy(n),i=t,Ze(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return r=yield Xy(n),i=t,void Ze(r).ku.delete(i);var r,i}))}}(Fr(n=Xt(n,Xn)),lN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nv(this,S3(this._delegate,e))}catch(t){throw mo(t,"collection()","Firestore.collection()")}}doc(e){try{return new na(this,oS(this._delegate,e))}catch(t){throw mo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _o(this,function Y8(n,e){if(n=Xt(n,pI),aN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new La(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw mo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W$(n,e,t){n=Xt(n,Xn);const r=Object.assign(Object.assign({},q$),t);return function(i){if(i.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const f=new Nr;return i.asyncQueue.enqueueAndForget((0,R.Z)(function*(){const p=yield function _3(n){return nS(n).then(e=>e.datastore)}(i);new V8(i.asyncQueue,p,u,s,f).run()})),f.promise}(Fr(n),i=>e(new Z$(n,i)),r)}(this._delegate,t=>e(new n5(this,t)))}batch(){return Fr(this._delegate),new r5(new Q3(this._delegate,e=>tv(this._delegate,e)))}loadBundle(e){return function a$(n,e){const t=Fr(n=Xt(n,Xn)),r=new J8;return function Z8(n,e,t,r){const i=function(s,u){let f;return f="string"==typeof s?j4().encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return f3(p,y);if(p instanceof ArrayBuffer)return f3(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new U8(p,u);var p}(t,uI(e));n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){!function F8(n,e,t){const r=Ze(n);var i;(i=(0,R.Z)(function*(s,u,f){try{const p=yield u.getMetadata();if(yield function(S,N){const q=Ze(S),Q=Rr(N.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",J=>q.qs.getBundleMetadata(J,N.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(S=p).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);f._updateProgress(r3(p));const y=new g8(p,s.localStore,u.serializer);let I=yield u.bc();for(;I;){const S=yield y.zu(I);S&&f._updateProgress(S),I=yield u.bc()}const T=yield y.complete();return yield ou(s,T.Ju,void 0),yield function(S,N){const q=Ze(S);return q.persistence.runTransaction("Save bundle","readwrite",Q=>q.qs.saveBundleMetadata(Q,N))}(s.localStore,p),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(p){return _s("SyncEngine",`Loading bundle failed with ${p}`),f._failWith(p),Promise.resolve(new Set)}var S}),function(s,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function c$(n,e){return function W8(n,e){return n.asyncQueue.enqueue((0,R.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield rS(n),e)}))}(Fr(n=Xt(n,Xn)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _o(this,t):null)}}class mS extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bI(new xc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return na.forKey(t,this.firestore,null)}}class n5{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}get(e){const t=hg(e);return this._delegate.get(t).then(r=>new II(this._firestore,new au(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hg(e);return r?(yN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}}class r5{constructor(e){this._delegate=e}set(e,t,r){const i=hg(e);return r?(yN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new dg(e,new mS(e),t),i.set(t,s)),s}}dg.INSTANCES=new WeakMap;class na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new na(t,new Jn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new na(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nv(this.firestore,S3(this._delegate,e))}catch(t){throw mo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Jn&&P3(this._delegate,e)}set(e,t){t=yN("DocumentReference.set",t);try{return t?W3(this._delegate,e,t):W3(this._delegate,e)}catch(r){throw mo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?K3(this._delegate,e):K3(this._delegate,e,t,...r)}catch(i){throw mo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function R$(n){return tv(Xt(n.firestore,Xn),[new Uy(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=i5(e),r=o5(e,i=>new II(this.firestore,new au(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Y3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function A$(n){n=Xt(n,Jn);const e=Xt(n.firestore,Xn),t=Fr(e),r=new rh(e);return function z8(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return(r=(0,R.Z)(function*(i,s,u){try{const f=yield function(p,y){const I=Ze(p);return I.persistence.runTransaction("read document","readonly",T=>I.localDocuments.getDocument(T,y))}(i,s);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new ye(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const p=Wy(f,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new au(e,r,n._key,i,new ug(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function x$(n){n=Xt(n,Jn);const e=Xt(n.firestore,Xn);return y3(Fr(e),n._key,{source:"server"}).then(t=>_N(e,n,t))}(this._delegate):function P$(n){n=Xt(n,Jn);const e=Xt(n.firestore,Xn);return y3(Fr(e),n._key).then(t=>_N(e,n,t))}(this._delegate),t.then(r=>new II(this.firestore,new au(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new na(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function mo(n,e,t){return n.message=n.message.replace(e,t),n}function i5(n){for(const e of n)if("object"==typeof e&&!vN(e))return e;return{}}function o5(n,e){var t,r;let i;return i=vN(n[0])?n[0]:vN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class II{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Z3(this._delegate,e._delegate)}}class EI extends II{data(e){const t=this._delegate.data(e);return function Eb(n,e){n||et()}(void 0!==t),t}}class _o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}where(e,t,r){try{return new _o(this.firestore,th(this._delegate,function y$(n,e,t){const r=e,i=dS("where",n);return CI._create(i,r,t)}(e,t,r)))}catch(i){throw mo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _o(this.firestore,th(this._delegate,function v$(n,e="asc"){const t=e,r=dS("orderBy",n);return gN._create(r,t)}(e,t)))}catch(r){throw mo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _o(this.firestore,th(this._delegate,function C$(n){return T3("limit",n),hS._create("limit",n,"F")}(e)))}catch(t){throw mo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _o(this.firestore,th(this._delegate,function w$(n){return T3("limitToLast",n),hS._create("limitToLast",n,"L")}(e)))}catch(t){throw mo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _o(this.firestore,th(this._delegate,function b$(...n){return fS._create("startAt",n,!0)}(...e)))}catch(t){throw mo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _o(this.firestore,th(this._delegate,function I$(...n){return fS._create("startAfter",n,!1)}(...e)))}catch(t){throw mo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _o(this.firestore,th(this._delegate,function E$(...n){return pS._create("endBefore",n,!1)}(...e)))}catch(t){throw mo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _o(this.firestore,th(this._delegate,function T$(...n){return pS._create("endAt",n,!0)}(...e)))}catch(t){throw mo(t,"endAt()","Query.endAt()")}}isEqual(e){return cN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function k$(n){n=Xt(n,ji);const e=Xt(n.firestore,Xn),t=Fr(e),r=new rh(e);return function G8(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,R.Z)(function*(){return(r=(0,R.Z)(function*(i,s,u){try{const f=yield ZD(i,s,!0),p=new s3(s,f.ir),y=p.sc(f.documents),I=p.applyChanges(y,!1);u.resolve(I.snapshot)}catch(f){const p=Wy(f,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate):"server"===e?.source?function N$(n){n=Xt(n,ji);const e=Xt(n.firestore,Xn),t=Fr(e),r=new rh(e);return v3(t,n._query,{source:"server"}).then(i=>new nh(e,r,n,i))}(this._delegate):function O$(n){n=Xt(n,ji);const e=Xt(n.firestore,Xn),t=Fr(e),r=new rh(e);return V3(n._query),v3(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate),t.then(r=>new CN(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=i5(e),r=o5(e,i=>new CN(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Y3(this._delegate,t,r)}withConverter(e){return new _o(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}class oH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new EI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new EI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new EI(this._firestore,r))})}isEqual(e){return Z3(this._delegate,e._delegate)}}class nv extends _o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new na(this.firestore,e):null}doc(e){try{return new na(this.firestore,void 0===e?oS(this._delegate):oS(this._delegate,e))}catch(t){throw mo(t,"doc()","CollectionReference.doc()")}}add(e){return function F$(n,e){const t=Xt(n.firestore,Xn),r=oS(n),i=gS(n.converter,e);return tv(t,[cS(cg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new na(this.firestore,t))}isEqual(e){return P3(this._delegate,e._delegate)}withConverter(e){return new nv(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function hg(n){return Xt(n,Jn)}class wN{constructor(...e){this._delegate=new su(...e)}static documentId(){return new wN(rr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof su&&this._delegate._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Y$(){return new uN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fg(e)}static delete(){const e=function K$(){return new mI("deleteField")}();return e._methodName="FieldValue.delete",new fg(e)}static arrayUnion(...e){const t=function Q$(...n){return new f$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fg(t)}static arrayRemove(...e){const t=function J$(...n){return new p$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fg(t)}static increment(e){const t=function X$(n){return new g$("increment",n)}(e);return t._methodName="FieldValue.increment",new fg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sH={Firestore:t5,GeoPoint:sS,Timestamp:Vn,Blob:bI,Transaction:n5,WriteBatch:r5,DocumentReference:na,DocumentSnapshot:II,Query:_o,QueryDocumentSnapshot:EI,QuerySnapshot:CN,CollectionReference:nv,FieldPath:wN,FieldValue:fg,setLogLevel:function iH(n){!function h4(n){Ql.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cH(n){(function aH(n,e){n.INTERNAL.registerComponent(new wr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sH)))})(n,(e,t)=>new t5(e,t,new rH)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(eo.Z);var lH=L(3019);class uH extends ki.x{constructor(e=1/0,t=1/0,r=kf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let f=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)f=p;f&&r.splice(0,f+1)}}}var dH=L(3020);function s5(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,dH.B)({connector:()=>new uH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function a5(n,e){return(0,ns.m)(e)?(0,Mn.w)(()=>n,e):(0,Mn.w)(()=>n)}class cu{constructor(e){return e}}class rv{constructor(){return(0,Sn.getApps)()}}const bN=new c.OlP("angularfire2._apps"),fH={provide:cu,useFactory:function hH(n){return n&&1===n.length?n[0]:new cu((0,Sn.getApp)())},deps:[[new c.FiY,bN]]},pH={provide:rv,deps:[[new c.FiY,bN]]};function gH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cu(r)}}let mH=(()=>{class n{constructor(t){(0,Sn.registerVersion)("angularfire",Ll.full,"core"),(0,Sn.registerVersion)("angularfire",Ll.full,"app"),(0,Sn.registerVersion)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[fH,pH]}),n})();function _H(n,...e){return{ngModule:mH,providers:[{provide:bN,useFactory:gH(n),multi:!0,deps:[c.R0b,c.zs3,Bl,...e]}]}}const yH=xd(Sn.initializeApp,!0),IN=new Map,c5={activated:!1,tokenObservers:[]},vH={initialized:!1,enabled:!1};function Tr(n){return IN.get(n)||Object.assign({},c5)}function _S(){return vH}const EN="https://content-firebaseappcheck.googleapis.com/v1",IH="exchangeDebugToken",l5={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class TH{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,R.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function MH(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $i=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TN(n){if(!Tr(n).activated)throw $i.create("use-before-activation",{appName:n.name})}function CS(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,R.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,s)}catch(T){throw $i.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==u.status)throw $i.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(T){throw $i.create("fetch-parse-error",{originalErrorMessage:T?.message})}const p=f.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const y=1e3*Number(p[1]),I=Date.now();return{token:f.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}}),DN.apply(this,arguments)}function u5(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${EN}/projects/${t}/apps/${r}:${IH}?key=${i}`,body:{debug_token:e}}}const AH="firebase-app-check-database",xH=1,TI="firebase-app-check-store";let wS=null;function SN(){return SN=(0,R.Z)(function*(n,e){const r=(yield function h5(){return wS||(wS=new Promise((n,e)=>{try{const t=indexedDB.open(AH,xH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(TI,{keyPath:"compositeKey"})}}catch(t){e($i.create("storage-open",{originalErrorMessage:t?.message}))}}),wS)}()).transaction(TI,"readwrite"),s=r.objectStore(TI).put({compositeKey:n,value:e});return new Promise((u,f)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;f($i.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),SN.apply(this,arguments)}const MI=new Ri.Yd("@firebase/app-check");function xN(n,e){return(0,z.hl)()?function kH(n,e){return function f5(n,e){return SN.apply(this,arguments)}(function g5(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{MI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kN(){return _S().enabled}function NN(){return RN.apply(this,arguments)}function RN(){return RN=(0,R.Z)(function*(){const n=_S();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),RN.apply(this,arguments)}const BH={error:"UNKNOWN_ERROR"};function VH(n){return z.US.encodeString(JSON.stringify(n),!1)}function bS(n){return FN.apply(this,arguments)}function FN(){return FN=(0,R.Z)(function*(n,e=!1){const t=n.app;TN(t);const r=Tr(t);let s,i=r.token;if(i&&!iv(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(iv(p)?i=p:yield xN(t,void 0))}if(!e&&i&&iv(i))return{token:i.token};let f,u=!1;if(kN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CS(u5(t,yield NN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield xN(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Tr(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?MI.warn(p.message):MI.error(p),s=p}return i?s?f=iv(i)?{token:i.token,internalError:s}:v5(s):(f={token:i.token},r.token=i,yield xN(t,i)):f=v5(s),u&&function y5(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),FN.apply(this,arguments)}function LN(){return LN=(0,R.Z)(function*(n){const e=n.app;TN(e);const{provider:t}=Tr(e);if(kN()){const r=yield NN(),{token:i}=yield CS(u5(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),LN.apply(this,arguments)}function BN(n,e){const t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _5(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function jH(n){const{app:e}=n;return new TH((0,R.Z)(function*(){let r;if(r=Tr(e).token?yield bS(n,!0):yield bS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},l5.RETRIAL_MIN_WAIT,l5.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function iv(n){return n.expireTimeMillis-Date.now()>0}function v5(n){return{token:VH(BH),error:n}}class $H{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)BN(this.app,t.next);return Promise.resolve()}}const D5="app-check-internal";!function nz(){Ji(new wr.wA("app-check",n=>function HH(n,e){return new $H(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(D5).initialize()})),Ji(new wr.wA(D5,n=>function zH(n){return{getToken:e=>bS(n,e),getLimitedUseToken:()=>function m5(n){return LN.apply(this,arguments)}(n),addTokenListener:e=>function UN(n,e,t,r){const{app:i}=n,s=Tr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&iv(s.token)){const f=s.token;Promise.resolve().then(()=>{t({token:f.token}),_5(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_5(n))}(n,"INTERNAL",e),removeTokenListener:e=>BN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Fi("@firebase/app-check","0.8.0")}();class pg{constructor(){return Fo("app-check")}}typeof window<"u"&&window,L(120);const P5=new c.OlP("angularfire2.auth.use-emulator"),A5=new c.OlP("angularfire2.auth.settings"),x5=new c.OlP("angularfire2.auth.tenant-id"),O5=new c.OlP("angularfire2.auth.langugage-code"),k5=new c.OlP("angularfire2.auth.use-device-language"),N5=new c.OlP("angularfire.auth.persistence"),R5=(n,e,t,r,i,s,u,f)=>(0,Xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,I]of Object.entries(u))p.settings[y]=I;return f&&p.setPersistence(f),p},[t,r,i,s,u,f]);let zN=(()=>{class n{constructor(t,r,i,s,u,f,p,y,I,T,S,N){const q=new ki.x,Q=(0,ut.of)(void 0).pipe((0,Sd.Q)(u.outsideAngular),(0,Mn.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,8661)))),(0,yt.U)(()=>(0,Xi.on)(t,s,r)),(0,yt.U)(J=>R5(J,s,f,y,I,T,p,S)),s5({bufferSize:1,refCount:!1}));if(xi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{Q.pipe(ur()).subscribe();const Ee=Q.pipe((0,Mn.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),Hr,s5({bufferSize:1,refCount:!1})),ze=Q.pipe((0,Mn.w)(Ye=>new _i.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))})))),Ne=Q.pipe((0,Mn.w)(Ye=>new _i.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))}))));this.authState=Ee.pipe(a5(ze),(0,pp.R)(u.outsideAngular),(0,Sd.Q)(u.insideAngular)),this.user=Ee.pipe(a5(Ne),(0,pp.R)(u.outsideAngular),(0,Sd.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Mn.w)(Ye=>Ye?(0,_n.D)(Ye.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe((0,Mn.w)(Ye=>Ye?(0,_n.D)(Ye.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,lH.T)(Ee,q,this.authState.pipe(Cr(Ye=>!Ye))).pipe((0,yt.U)(Ye=>Ye?.user?Ye:null),(0,pp.R)(u.outsideAngular),(0,Sd.Q)(u.insideAngular))}return(0,Xi.pX)(this,Q,s,{spy:{apply:(J,Ee,ze)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&ze.then(Ne=>q.next(Ne))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xi.Dh),c.LFG(Xi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Bl),c.LFG(P5,8),c.LFG(A5,8),c.LFG(x5,8),c.LFG(O5,8),c.LFG(k5,8),c.LFG(N5,8),c.LFG(pg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function F5(n,e){return function cz(n,e=z0){return new _i.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GN(n,e){return F5(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function ES(n,e){return GN(n,e).pipe(sc(void 0),Ic(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const p=i.find(I=>I.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),s}))}function L5(n,e,t){return ES(n,t).pipe(ha((r,i)=>function uz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function dz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,fO.x)(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function U5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class B5{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ES(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(sc(void 0),Ic(),Cr(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),Hr)}auditTrail(e){return this.stateChanges(e).pipe(ha((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=U5(e);return L5(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hr)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Hr)}add(e){return this.ref.add(e)}doc(e){return new V5(this.ref.doc(e),this.afs)}}class V5{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=j5(r,t);return new B5(i,s,this.afs)}snapshotChanges(){return function lz(n,e){return F5(n,e).pipe(sc(void 0),Ic(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Hr)}}class hz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ES(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Cr(t=>t.length>0),Hr):ES(this.query,this.afs.schedulers.outsideAngular).pipe(Hr)}auditTrail(e){return this.stateChanges(e).pipe(ha((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=U5(e);return L5(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Hr)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Hr)}}const fz=new c.OlP("angularfire2.enableFirestorePersistence"),pz=new c.OlP("angularfire2.firestore.persistenceSettings"),gz=new c.OlP("angularfire2.firestore.settings"),mz=new c.OlP("angularfire2.firestore.use-emulator");function j5(n,e=(t=>t)){return{query:e(n),ref:n}}let DI=(()=>{class n{constructor(t,r,i,s,u,f,p,y,I,T,S,N,q,Q,J,Ee,ze){this.schedulers=p;const Ne=(0,Xi.on)(t,f,r),Ye=I;T&&R5(Ne,f,S,q,Q,J,N,Ee),[this.firestore,this.persistenceEnabled$]=(0,Xi.cc)(`${Ne.name}.firestore`,"AngularFirestore",Ne.name,()=>{const gt=f.runOutsideAngular(()=>Ne.firestore());if(s&&gt.settings(s),Ye&&gt.useEmulator(...Ye),i&&!xi(u)){const Pt=()=>{try{return(0,_n.D)(gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Lr){return typeof console<"u"&&console.warn(Lr),(0,ut.of)(!1)}};return[gt,f.runOutsideAngular(Pt)]}return[gt,(0,ut.of)(!1)]},[s,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=j5(i,r),f=this.schedulers.ngZone.run(()=>s);return new B5(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new hz(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new V5(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xi.Dh),c.LFG(Xi.xv,8),c.LFG(fz,8),c.LFG(gz,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Bl),c.LFG(pz,8),c.LFG(mz,8),c.LFG(zN,8),c.LFG(P5,8),c.LFG(A5,8),c.LFG(x5,8),c.LFG(O5,8),c.LFG(k5,8),c.LFG(N5,8),c.LFG(pg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var $5=L(6710);let On=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new lr.X(document.cookie.match(/loggedInUser=(.*)/)?JSON.parse(document.cookie.match(/loggedInUser=(.*)/)[1]):null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,R.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new $5.V);yield t._createOrUpdateUserOnDB(r);const i=yield t.afAuth.currentUser;i&&(document.cookie=`loggedInUser=${JSON.stringify(i)}; max-age=999999999999; path=/`,t._loggedInUser$.next(i))}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,R.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const s=yield r.afAuth.currentUser;s&&(document.cookie=`loggedInUser=${JSON.stringify(s)}; max-age=999999999999; path=/`,r._loggedInUser$.next(s))}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,R.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const s=yield r.afAuth.currentUser;s&&(document.cookie=`loggedInUser=${JSON.stringify(s)}; max-age=999999999999; path=/`,r._loggedInUser$.next(s))}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,R.Z)(function*(){try{yield t.afAuth.signOut(),document.cookie=`loggedInUser=${JSON.stringify(null)}; max-age=0; path=/`,t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}_createOrUpdateUserOnDB(t,r=null){var i=this;return(0,R.Z)(function*(){var s;i.db.collection("users").doc(t.user.uid).get().pipe(Ut(1)).subscribe({next:(s=(0,R.Z)(function*(u){if(u.exists){const f=u.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return s.apply(this,arguments)}),error:s=>{console.error(s)}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(zN),c.LFG(DI))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gg=(()=>{class n{constructor(t){this.db=t}getChatsForUser(t){return this.db.collection("chats",i=>i.where("users","array-contains",t).orderBy("lastModified","desc")).valueChanges().pipe((0,yt.U)(i=>i.filter(s=>s.shownByUsers.includes(t))))}getChatById(t){return this.db.collection("chats").doc(t).valueChanges()}addMessageToChat(t,r){var i=this;return(0,R.Z)(function*(){r.sentAt=Date.now();const s=yield i.db.collection("messages").add(r);yield i.db.collection("messages").doc(s.id).update({_id:s.id});const u=i.db.collection("chats").doc(t).valueChanges().pipe(Ut(1)),p=[...(yield $t(u)).messages,s.id];yield i.db.collection("chats").doc(t).update({messages:p})})()}getMessageById(t){return this.db.collection("messages").doc(t).valueChanges()}getMessagesByChatId(t){return this.db.collection("messages",r=>r.where("chatId","==",t).orderBy("sentAt","asc")).valueChanges()}addNewChat(t,r){var i=this;return(0,R.Z)(function*(){try{const p=i.db.collection("chats",N=>N.where("users","array-contains",t.users[0])).valueChanges(),y=i.db.collection("chats",N=>N.where("users","array-contains",t.users[1])).valueChanges(),I=yield $t(p),T=yield $t(y),S=I.find(N=>T.some(q=>q._id===N._id));if(S)return S.shownByUsers.includes(r)||(yield i.db.collection("chats").doc(S._id).update({shownByUsers:[...S.shownByUsers,r]})),S}catch(p){console.error("Error checking for existing chat:",p)}t.lastModified=Date.now();const s=yield i.db.collection("chats").add(t);yield i.db.collection("chats").doc(s.id).update({_id:s.id});const u=i.db.collection("chats").doc(s.id).valueChanges();return yield $t(u)})()}removeChatById(t,r){var i=this;return(0,R.Z)(function*(){const s=i.db.collection("chats").doc(t).valueChanges(),u=yield $t(s),f=u.shownByUsers.findIndex(p=>p===r);u.shownByUsers.splice(f,1),yield i.db.collection("chats").doc(t).update({shownByUsers:u.shownByUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(DI))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vs=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(vs||{});class $n{}$n.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(vs.NotDefined);const s=i.byteLength;let u=2;for(;u<s;){const f=i.getUint16(u,!1);if(u+=2,65505===f){if(1165519206!==i.getUint32(u+=2,!1))return e(vs.NotJpeg);const p=18761===i.getUint16(u+=6,!1);u+=i.getUint32(u+4,p);const y=i.getUint16(u,p);u+=2;for(let I=0;I<y;I++)if(274===i.getUint16(u+12*I,p))return e(i.getUint16(u+12*I+8,p))}else{if(65280!=(65280&f))break;u+=i.getUint16(u,!1)}}return e(vs.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(vs.Default)}}),$n.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(s||u).then(f=>f?$n.generateUploadInputNative(window.document,e,t):$n.generateUploadInputRenderer(n,e,t)).then(f=>{const p=f?Array.from(f):[],y=p.map(S=>$n.getOrientation(S)),I=p.map(S=>$n.fileToDataURL(S));let T=[];Promise.all(y).then(S=>(T=S,Promise.all(I))).then(S=>{const N=S.map((q,Q)=>({image:q.dataUrl,orientation:T[Q],fileName:q.fileName}));r(e?N:N[0])})}).catch(f=>i(f))}),$n.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),$n.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,s)=>{const u=n.createElement("input");n.setStyle(u,"display","none"),n.setProperty(u,"type","file"),n.setProperty(u,"accept","image/*"),e&&n.setProperty(u,"multiple","true"),n.listen(u,"click",f=>{f.target.value=""}),n.listen(u,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||s(new Error("file upload on blur - no file selected"))},300)},{once:!0}),u.click()})},$n.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,s)=>{const u=n.createElement("input");u.id="upload-input"+new Date,u.style.display="none",u.setAttribute("type","file"),u.setAttribute("accept","image/*"),e&&u.setAttribute("multiple","true"),n.body.appendChild(u),u.addEventListener("change",()=>{r=!0,i(u.files),n.body.removeChild(n.getElementById(u.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(u.id)&&(s(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(u.id)))},300)},{once:!0}),u.click()})},$n.compress=(n,e,t,r=50,i=50,s=0,u=0)=>new Promise(function(f,p){i/=100,r/=100;const y=new Image;y.onload=()=>{const I=t.createElement("canvas"),T=I.getContext("2d");if(!T)return p("No canvas context available");let S=y.naturalWidth,N=y.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===vs.Right||e===vs.Left)){const Ne=S;S=N,N=Ne}r=Math.min(r,s?s/S:1,u?u/N:1),I.width=S*r,I.height=N*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===vs.Up?T.drawImage(y,0,0,I.width,I.height):e===vs.Right?(T.save(),T.rotate(90*J),T.translate(0,-I.width),T.drawImage(y,0,0,I.height,I.width),T.restore()):e===vs.Left?(T.save(),T.rotate(-90*J),T.translate(-I.width,0),T.drawImage(y,0,0,I.height,I.width),T.restore()):e===vs.Down?(T.save(),T.rotate(180*J),T.translate(-I.width,-I.height),T.drawImage(y,0,0,I.width,I.height),T.restore()):T.drawImage(y,0,0,I.width,I.height);const Ee=n.substr(5,n.split(";")[0].length-5),ze=I.toDataURL(Ee,i);f(ze)},y.onerror=I=>p(I),y.src=n}),$n.byteCount=n=>encodeURI(n).split(/%..|./).length-1,$n.getImageMaxSize=function(){var n=(0,R.Z)(function*(e,t,r,i=!1){const u=y=>(y/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield $n.uploadFile(r,!1,i);let p;for(let y=0;y<10;y++){const I=$n.byteCount(f.image);p=yield $n.compress(f.image,f.orientation,r,50,100);const T=$n.byteCount(p);if(console.debug("NgxImageCompress -","Compression from",u(I),"MB to",u(T),"MB"),T>=I)throw 0===y?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",u(I),"MB large"),{...f,image:p}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",u(I),"MB large"),{...f,image:p});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",u(T),"MB large"),{...f,image:p};if(9===y)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",u(I),"MB large"),{...f,image:p};t&&console.debug("NgxImageCompress -","Reached",u(T),"MB large. Trying another time after",y+1,"times"),f.image=p}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let H5=(()=>{class n{constructor(t){this.DOC_ORIENTATION=vs,this.render=t.createRenderer(null,null)}byteCount(t){return $n.byteCount(t)}getOrientation(t){return $n.getOrientation(t)}uploadFile(){return $n.uploadFile(this.render,!1)}uploadMultipleFiles(){return $n.uploadFile(this.render,!0)}uploadFileOrReject(){return $n.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return $n.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,s=50,u=0,f=0){return $n.compress(t,r,this.render,i,s,u,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return $n.getImageMaxSize(t,r,this.render,i).then(s=>s.image).catch(s=>{throw s.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return $n.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ua=(()=>{class n{constructor(t,r,i,s){this.db=t,this.authService=r,this.chatService=i,this.imageCompress=s,this._posts$=new lr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r.uid).valueChanges().pipe(Ut(1)),s=yield $t(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.uid,...s.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(Dn(function(){var f=(0,R.Z)(function*(p){t._posts$.next([...p])});return function(p){return f.apply(this,arguments)}}()))})()}getPostById(t){var r=this;return(0,R.Z)(function*(){const i=r.db.collection("posts").doc(t).valueChanges();return yield $t(i)})()}toggleLike(t,r){var i=this;return(0,R.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,R.Z)(function*(){return new Promise(function(){var i=(0,R.Z)(function*(s,u){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(p=>p._id),t.likedByUsers.push(f.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),s("Add like done")}catch(f){throw u("Add like failed:"),f}});return function(s,u){return i.apply(this,arguments)}}())})()}getPostsForUser(t){return this.db.collection("posts",i=>i.where("creatorId","==",t).orderBy("createdAt","desc")).valueChanges()}removeLike(t){var r=this;return(0,R.Z)(function*(){return new Promise(function(){var i=(0,R.Z)(function*(s,u){try{const p=r.authService.getLoggedInUser().uid;t.likedByUsers=t.likedByUsers.map(I=>I._id);const y=t.likedByUsers.findIndex(I=>I===p);t.likedByUsers.splice(y,1),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),s("Remove like done")}catch(f){throw s("Remove like failed!"),f}});return function(s,u){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,R.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,R.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.uid;const s=r.db.collection("users").doc(i.uid).valueChanges().pipe(Ut(1)),u=yield $t(s);t.creatorFullName=i.displayName||u.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}removePostById(t){var r=this;return(0,R.Z)(function*(){yield r._removeCommentsOfPostId(t),yield r._removeNotificationsOfPostId(t),yield r.db.collection("posts").doc(t).delete()})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).where("isTopLevel","==",!0).orderBy("createdAt","desc")).valueChanges()}getRepliesForComment(t){return t.replies?.length||(t.replies=[""]),this.db.collection("comments",i=>i.where("isTopLevel","==",!1).where("_id","in",t.replies).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,R.Z)(function*(){t.createdAt=Date.now(),t.isTopLevel=!0;const s=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(s.id).update({_id:s.id,parentId:s.id})})()}addReply(t){var r=this;return(0,R.Z)(function*(){t.createdAt=Date.now(),t.createdByUserId=t.createdByUserId._id,t.isTopLevel=!1;const i=r.db.collection("comments").doc(t.parentId).valueChanges().pipe(Ut(1)),s=yield $t(i);s.replies||(s.replies=[]);const u=yield r.db.collection("comments").add(t);yield r.db.collection("comments").doc(u.id).update({_id:u.id}),yield r.db.collection("comments").doc(t.parentId).update({replies:[...s.replies,u.id]})})()}getCommentById(t){return this.db.collection("comments").doc(t).valueChanges()}sendPost(t,r,i){var s=this;return(0,R.Z)(function*(){const u=s.db.collection("chats",y=>y.where("users","array-contains",s.authService.getLoggedInUser().uid&&t._id)).valueChanges();let f=yield $t(u);f.length>1&&(f=[f.find(y=>y.users.every(I=>I===s.authService.getLoggedInUser().uid))]),f.length||(f=[yield s.chatService.addNewChat({_id:"",lastModified:0,isRead:!1,shownByUsers:[s.authService.getLoggedInUser().uid,t._id],users:[s.authService.getLoggedInUser().uid,t._id],messages:[]},s.authService.getLoggedInUser().uid)]);const p=f[0];return i.chatId=p._id,i.postId=r._id,yield s.chatService.addMessageToChat(p._id,i),p._id})()}_removeCommentsOfPostId(t){var r=this;return(0,R.Z)(function*(){const s=r.db.collection("comments",f=>f.where("postId","==",t)).valueChanges(),u=yield $t(s);for(const f of u)yield r.db.collection("comments").doc(f._id).delete()})()}_removeNotificationsOfPostId(t){var r=this;return(0,R.Z)(function*(){const i=r.db.collection("notifications",u=>u.where("postId","==",t)).valueChanges(),s=yield $t(i);for(const u of s)yield r.db.collection("notifications").doc(u._id).delete()})()}_makeId(t=5){let r="";for(let s=0;s<t;s++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),da(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(DI),c.LFG(On),c.LFG(gg),c.LFG(H5))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TS(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let u,s=!1;n.subscribe({next:f=>{u=f,s=!0},error:i,complete:()=>{s?r(u):t?r(e.defaultValue):i(new ss)}})})}const z5=function Cz(n,e){return n===e||n!=n&&e!=e},MS=function wz(n,e){for(var t=n.length;t--;)if(z5(n[t][0],e))return t;return-1};var Iz=Array.prototype.splice;function ov(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ov.prototype.clear=function yz(){this.__data__=[],this.size=0},ov.prototype.delete=function Ez(n){var e=this.__data__,t=MS(e,n);return!(t<0||(t==e.length-1?e.pop():Iz.call(e,t,1),--this.size,0))},ov.prototype.get=function Mz(n){var e=this.__data__,t=MS(e,n);return t<0?void 0:e[t][1]},ov.prototype.has=function Sz(n){return MS(this.__data__,n)>-1},ov.prototype.set=function Az(n,e){var t=this.__data__,r=MS(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const DS=ov,G5="object"==typeof global&&global&&global.Object===Object&&global;var jz="object"==typeof self&&self&&self.Object===Object&&self;const Oc=G5||jz||Function("return this")(),sv=Oc.Symbol;var q5=Object.prototype,zz=q5.hasOwnProperty,Gz=q5.toString,SI=sv?sv.toStringTag:void 0;var Kz=Object.prototype.toString;var Z5=sv?sv.toStringTag:void 0;const PI=function eG(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Z5&&Z5 in Object(n)?function qz(n){var e=zz.call(n,SI),t=n[SI];try{n[SI]=void 0;var r=!0}catch{}var i=Gz.call(n);return r&&(e?n[SI]=t:delete n[SI]),i}(n):function Yz(n){return Kz.call(n)}(n)},AI=function tG(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},W5=function sG(n){if(!AI(n))return!1;var e=PI(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},ZN=Oc["__core-js_shared__"];var K5=function(){var n=/[^.]+$/.exec(ZN&&ZN.keys&&ZN.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var dG=Function.prototype.toString;const mg=function hG(n){if(null!=n){try{return dG.call(n)}catch{}try{return n+""}catch{}}return""};var pG=/^\[object .+?Constructor\]$/,vG=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const wG=function CG(n){return!(!AI(n)||function cG(n){return!!K5&&K5 in n}(n))&&(W5(n)?vG:pG).test(mg(n))},_g=function EG(n,e){var t=function bG(n,e){return n?.[e]}(n,e);return wG(t)?t:void 0},xI=_g(Oc,"Map"),OI=_g(Object,"create");var kG=Object.prototype.hasOwnProperty;var LG=Object.prototype.hasOwnProperty;function av(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}av.prototype.clear=function DG(){this.__data__=OI?OI(null):{},this.size=0},av.prototype.delete=function PG(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},av.prototype.get=function NG(n){var e=this.__data__;if(OI){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return kG.call(e,n)?e[n]:void 0},av.prototype.has=function UG(n){var e=this.__data__;return OI?void 0!==e[n]:LG.call(e,n)},av.prototype.set=function jG(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=OI&&void 0===e?"__lodash_hash_undefined__":e,this};const Y5=av,SS=function ZG(n,e){var t=n.__data__;return function GG(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function cv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}cv.prototype.clear=function HG(){this.size=0,this.__data__={hash:new Y5,map:new(xI||DS),string:new Y5}},cv.prototype.delete=function WG(n){var e=SS(this,n).delete(n);return this.size-=e?1:0,e},cv.prototype.get=function YG(n){return SS(this,n).get(n)},cv.prototype.has=function JG(n){return SS(this,n).has(n)},cv.prototype.set=function eq(n,e){var t=SS(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const nq=cv;function lv(n){var e=this.__data__=new DS(n);this.size=e.size}lv.prototype.clear=function Oz(){this.__data__=new DS,this.size=0},lv.prototype.delete=function Nz(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},lv.prototype.get=function Fz(n){return this.__data__.get(n)},lv.prototype.has=function Uz(n){return this.__data__.has(n)},lv.prototype.set=function iq(n,e){var t=this.__data__;if(t instanceof DS){var r=t.__data__;if(!xI||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new nq(r)}return t.set(n,e),this.size=t.size,this};const sq=lv;var lq=function(){try{var n=_g(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Q5=lq,J5=function uq(n,e,t){"__proto__"==e&&Q5?Q5(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var hq=Object.prototype.hasOwnProperty;const X5=function fq(n,e,t){var r=n[e];(!hq.call(n,e)||!z5(r,t)||void 0===t&&!(e in n))&&J5(n,e,t)},PS=function pq(n,e,t,r){var i=!t;t||(t={});for(var s=-1,u=e.length;++s<u;){var f=e[s],p=r?r(t[f],n[f],f,t,n):void 0;void 0===p&&(p=n[f]),i?J5(t,f,p):X5(t,f,p)}return t},kI=function _q(n){return null!=n&&"object"==typeof n},e6=function vq(n){return kI(n)&&"[object Arguments]"==PI(n)};var t6=Object.prototype,Cq=t6.hasOwnProperty,wq=t6.propertyIsEnumerable,bq=e6(function(){return arguments}())?e6:function(n){return kI(n)&&Cq.call(n,"callee")&&!wq.call(n,"callee")};const Iq=bq,WN=Array.isArray;var n6="object"==typeof exports&&exports&&!exports.nodeType&&exports,r6=n6&&"object"==typeof module&&module&&!module.nodeType&&module,i6=r6&&r6.exports===n6?Oc.Buffer:void 0;const o6=(i6?i6.isBuffer:void 0)||function Tq(){return!1};var xq=/^(?:0|[1-9]\d*)$/;const kq=function Oq(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&xq.test(n))&&n>-1&&n%1==0&&n<e},s6=function Rq(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var er={};er["[object Float32Array]"]=er["[object Float64Array]"]=er["[object Int8Array]"]=er["[object Int16Array]"]=er["[object Int32Array]"]=er["[object Uint8Array]"]=er["[object Uint8ClampedArray]"]=er["[object Uint16Array]"]=er["[object Uint32Array]"]=!0,er["[object Arguments]"]=er["[object Array]"]=er["[object ArrayBuffer]"]=er["[object Boolean]"]=er["[object DataView]"]=er["[object Date]"]=er["[object Error]"]=er["[object Function]"]=er["[object Map]"]=er["[object Number]"]=er["[object Object]"]=er["[object RegExp]"]=er["[object Set]"]=er["[object String]"]=er["[object WeakMap]"]=!1;const KN=function cZ(n){return function(e){return n(e)}};var a6="object"==typeof exports&&exports&&!exports.nodeType&&exports,NI=a6&&"object"==typeof module&&module&&!module.nodeType&&module,YN=NI&&NI.exports===a6&&G5.process;const uv=function(){try{return NI&&NI.require&&NI.require("util").types||YN&&YN.binding&&YN.binding("util")}catch{}}();var c6=uv&&uv.isTypedArray;const hZ=c6?KN(c6):function sZ(n){return kI(n)&&s6(n.length)&&!!er[PI(n)]};var pZ=Object.prototype.hasOwnProperty;const l6=function gZ(n,e){var t=WN(n),r=!t&&Iq(n),i=!t&&!r&&o6(n),s=!t&&!r&&!i&&hZ(n),u=t||r||i||s,f=u?function gq(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],p=f.length;for(var y in n)(e||pZ.call(n,y))&&(!u||!("length"==y||i&&("offset"==y||"parent"==y)||s&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||kq(y,p)))&&f.push(y);return f};var mZ=Object.prototype;const QN=function _Z(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||mZ)},u6=function yZ(n,e){return function(t){return n(e(t))}},CZ=u6(Object.keys,Object);var bZ=Object.prototype.hasOwnProperty;const d6=function TZ(n){return null!=n&&s6(n.length)&&!W5(n)},JN=function MZ(n){return d6(n)?l6(n):function IZ(n){if(!QN(n))return CZ(n);var e=[];for(var t in Object(n))bZ.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var OZ=Object.prototype.hasOwnProperty;const NZ=function kZ(n){if(!AI(n))return function PZ(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=QN(n),t=[];for(var r in n)"constructor"==r&&(e||!OZ.call(n,r))||t.push(r);return t},XN=function RZ(n){return d6(n)?l6(n,!0):NZ(n)};var h6="object"==typeof exports&&exports&&!exports.nodeType&&exports,f6=h6&&"object"==typeof module&&module&&!module.nodeType&&module,p6=f6&&f6.exports===h6?Oc.Buffer:void 0,g6=p6?p6.allocUnsafe:void 0;const m6=function GZ(){return[]};var ZZ=Object.prototype.propertyIsEnumerable,_6=Object.getOwnPropertySymbols,WZ=_6?function(n){return null==n?[]:(n=Object(n),function HZ(n,e){for(var t=-1,r=null==n?0:n.length,i=0,s=[];++t<r;){var u=n[t];e(u,t,n)&&(s[i++]=u)}return s}(_6(n),function(e){return ZZ.call(n,e)}))}:m6;const eR=WZ,y6=function QZ(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},v6=u6(Object.getPrototypeOf,Object);var eW=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)y6(e,eR(n)),n=v6(n);return e}:m6;const C6=eW,w6=function rW(n,e,t){var r=e(n);return WN(n)?r:y6(r,t(n))},oW=function iW(n){return w6(n,JN,eR)},aW=function sW(n){return w6(n,XN,C6)},tR=_g(Oc,"DataView"),nR=_g(Oc,"Promise"),rR=_g(Oc,"Set"),iR=_g(Oc,"WeakMap");var b6="[object Map]",I6="[object Promise]",E6="[object Set]",T6="[object WeakMap]",M6="[object DataView]",fW=mg(tR),pW=mg(xI),gW=mg(nR),mW=mg(rR),_W=mg(iR),yg=PI;(tR&&yg(new tR(new ArrayBuffer(1)))!=M6||xI&&yg(new xI)!=b6||nR&&yg(nR.resolve())!=I6||rR&&yg(new rR)!=E6||iR&&yg(new iR)!=T6)&&(yg=function(n){var e=PI(n),t="[object Object]"==e?n.constructor:void 0,r=t?mg(t):"";if(r)switch(r){case fW:return M6;case pW:return b6;case gW:return I6;case mW:return E6;case _W:return T6}return e});const oR=yg;var vW=Object.prototype.hasOwnProperty;const D6=Oc.Uint8Array,sR=function IW(n){var e=new n.constructor(n.byteLength);return new D6(e).set(new D6(n)),e};var MW=/\w*$/;var S6=sv?sv.prototype:void 0,P6=S6?S6.valueOf:void 0;const XW=function JW(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return sR(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function EW(n,e){var t=e?sR(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function xW(n,e){var t=e?sR(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function DW(n){var e=new n.constructor(n.source,MW.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function PW(n){return P6?Object(P6.call(n)):{}}(n)}};var A6=Object.create,eK=function(){function n(){}return function(e){if(!AI(e))return{};if(A6)return A6(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const tK=eK;var x6=uv&&uv.isMap;const cK=x6?KN(x6):function oK(n){return kI(n)&&"[object Map]"==oR(n)};var O6=uv&&uv.isSet;const fK=O6?KN(O6):function uK(n){return kI(n)&&"[object Set]"==oR(n)};var k6="[object Arguments]",N6="[object Function]",R6="[object Object]",Hn={};Hn[k6]=Hn["[object Array]"]=Hn["[object ArrayBuffer]"]=Hn["[object DataView]"]=Hn["[object Boolean]"]=Hn["[object Date]"]=Hn["[object Float32Array]"]=Hn["[object Float64Array]"]=Hn["[object Int8Array]"]=Hn["[object Int16Array]"]=Hn["[object Int32Array]"]=Hn["[object Map]"]=Hn["[object Number]"]=Hn[R6]=Hn["[object RegExp]"]=Hn["[object Set]"]=Hn["[object String]"]=Hn["[object Symbol]"]=Hn["[object Uint8Array]"]=Hn["[object Uint8ClampedArray]"]=Hn["[object Uint16Array]"]=Hn["[object Uint32Array]"]=!0,Hn["[object Error]"]=Hn[N6]=Hn["[object WeakMap]"]=!1;const VK=function AS(n,e,t,r,i,s){var u,f=1&e,p=2&e,y=4&e;if(t&&(u=i?t(n,r,i,s):t(n)),void 0!==u)return u;if(!AI(n))return n;var I=WN(n);if(I){if(u=function CW(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&vW.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function jZ(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,u)}else{var T=oR(n),S=T==N6||"[object GeneratorFunction]"==T;if(o6(n))return function BZ(n,e){if(e)return n.slice();var t=n.length,r=g6?g6(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==R6||T==k6||S&&!i){if(u=p||S?{}:function nK(n){return"function"!=typeof n.constructor||QN(n)?{}:tK(v6(n))}(n),!f)return p?function tW(n,e){return PS(n,C6(n),e)}(n,function FZ(n,e){return n&&PS(e,XN(e),n)}(u,n)):function KZ(n,e){return PS(n,eR(n),e)}(n,function DZ(n,e){return n&&PS(e,JN(e),n)}(u,n))}else{if(!Hn[T])return i?n:{};u=XW(n,T,f)}}s||(s=new sq);var N=s.get(n);if(N)return N;s.set(n,u),fK(n)?n.forEach(function(J){u.add(AS(J,e,t,J,n,s))}):cK(n)&&n.forEach(function(J,Ee){u.set(Ee,AS(J,e,t,Ee,n,s))});var Q=I?void 0:(y?p?aW:oW:p?XN:JN)(n);return function aq(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,Ee){Q&&(J=n[Ee=J]),X5(u,Ee,AS(J,e,t,Ee,n,s))}),u},RI=function HK(n){return VK(n,5)};let ra=(()=>{class n{constructor(t,r,i){this.authService=t,this.db=r,this.imageCompress=i,this._isSearchModalShown$=new lr.X(!1),this.isSearchModalShown$=this._isSearchModalShown$.asObservable()}toggleFollow(t,r){var i=this;return(0,R.Z)(function*(){return new Promise(t?function(){var s=(0,R.Z)(function*(u){yield i.addFollow(r),u("Add follow completed successfully!")});return function(u){return s.apply(this,arguments)}}():function(){var s=(0,R.Z)(function*(u){yield i.removeFollow(r),u("Remove follow completed successfully!")});return function(u){return s.apply(this,arguments)}}())})()}addFollow(t){var r=this;return(0,R.Z)(function*(){var p;r.authService.loggedInUser$.pipe(Ut(1)).subscribe({next:(p=(0,R.Z)(function*(y){yield r.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,y?.uid]})}),function(I){return p.apply(this,arguments)})});const i=r.authService.loggedInUser$.pipe(Ut(1)),s=yield TS(i),u=r.db.collection("users").doc(s.uid).valueChanges().pipe(Ut(1)),f=yield TS(u);yield r.db.collection("users").doc(f._id).update({followingUsers:[...f.followingUsers,t._id]})})()}removeFollow(t){var r=this;return(0,R.Z)(function*(){const i=r.authService.loggedInUser$.pipe(Ut(1)),s=yield TS(i),u=r.db.collection("users").doc(s.uid).valueChanges().pipe(Ut(1)),f=yield TS(u),p=RI(t.followedByUsers),y=p.findIndex(T=>T===s.uid);if(-1===y)return;p.splice(y,1),yield r.db.collection("users").doc(t._id).update({followedByUsers:p});const I=f.followingUsers.findIndex(T=>T===t._id);f.followingUsers.splice(I,1),yield r.db.collection("users").doc(f._id).update({followingUsers:f.followingUsers})})()}getUsers(t){return this.db.collection("users").valueChanges().pipe((0,yt.U)(r=>{const i=new RegExp(t.account,"i");return r.filter(s=>i.test(s.fullName))}))}uploadMedia(){var t=this;return(0,R.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}updateUserProfile(t){this.db.collection("users").doc(t._id).set(t)}setIsSearchModalShown(t){this._isSearchModalShown$.next(t)}getLikedByUsers(t){return t=t.map(i=>i._id),this.db.collection("users",i=>i.where("_id","in",t)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(On),c.LFG(DI),c.LFG(H5))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aR=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,R.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const s=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(s.id).update({_id:s.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,R.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(DI))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F6(...n){const e=(0,is.jO)(n),{args:t,keys:r}=bn(n),i=new _i.y(s=>{const{length:u}=t;if(!u)return void s.complete();const f=new Array(u);let p=u,y=u;for(let I=0;I<u;I++){let T=!1;(0,Vu.Xf)(t[I]).subscribe((0,yi.x)(s,S=>{T||(T=!0,y--),f[I]=S},()=>p--,void 0,()=>{(!p||!T)&&(y||s.next(r?os(r,f):f),s.complete())}))}});return e?i.pipe(rl(e)):i}function zK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function GK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onRemovePost())}),c._uU(1," Remove "),c.qZA()}}function qK(n,e){if(1&n&&(c.TgZ(0,"div",1)(1,"ul"),c.YNc(2,zK,2,1,"li",2),c.YNc(3,GK,2,0,"li",2),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("ngIf",t.creator._id!==t.loggedInUser.uid),c.xp6(1),c.Q6J("ngIf",t.creator._id===t.loggedInUser.uid)}}let ZK=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleFollow=new c.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield $t(r),s=t.authService.getLoggedInUser();t.loggedInUser=s,t.isFollowClicked=!!i.followedByUsers.find(u=>u===s.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}onRemovePost(){var t=this;return(0,R.Z)(function*(){yield t.postService.removePostById(t.post._id)})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(Ua))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,qK,4,2,"div",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[gn],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),xS=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function WK(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"more-options-modal",10),c.NdJ("onToggleFollow",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("creator",t.creator)}}function KK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1)(1,"div",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._UZ(2,"img",3),c.TgZ(3,"h5"),c._uU(4),c.TgZ(5,"span"),c._uU(6),c.ALo(7,"timeAgo"),c.qZA()()(),c.TgZ(8,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),c.O4$(),c.TgZ(9,"svg",5),c._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),c.qZA(),c.YNc(13,WK,1,2,"more-options-modal",9),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.creator.imgUrl,c.LSH),c.xp6(2),c.hij(" ",t.creator.fullName," "),c.xp6(2),c.hij("\u2022 ",c.lcZ(7,4,t.post.createdAt),""),c.xp6(7),c.Q6J("ngIf",t.isMoreOptionsModalShown)}}let YK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator",3,"click"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&c.YNc(0,KK,14,6,"div",0),2&r&&c.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[gn,ZK,xS],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative;cursor:pointer}"]})}return n})();const QK=function(n,e){return{"btn-toggle-follow":!0,following:n,disabled:e}};function JK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,QK,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function XK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"img",1),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c.qZA(),c.TgZ(2,"h4",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c._uU(3),c.qZA(),c.YNc(4,JK,2,6,"button",3),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.user._id!==t.loggedInUser.uid)}}let eY=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield $t(r),s=t.authService.getLoggedInUser();t.loggedInUser=s,t.isFollowClicked=!!i.followedByUsers.find(u=>u===s.uid),t.isComponentInitialized=!0})()}ngOnChanges(t){t.user.firstChange||(this.isFollowClicked=!!this.user.followedByUsers.find(r=>r===this.loggedInUser?.uid))}toggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({user:this.user,isFollowClicked:this.isFollowClicked}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["alt","loggedInUser",3,"src","click"],[3,"click"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,XK,5,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Qr,gn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function tY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-user-row",7),c.NdJ("onToggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.Q6J("post",r.post)("user",t)}}let nY=(()=>{class n{constructor(t,r){this.renderer=t,this.userService=r,this.onToggleLikedByUsersModal=new c.vpe,this.onToggleFollow=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.onClickUserImg=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.usersSubscription=this.userService.getLikedByUsers(this.post.likedByUsers).subscribe({next:t=>{this.post.likedByUsers=t}})}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable"),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow",onCloseLikedByUsers:"onCloseLikedByUsers",onClickUserImg:"onClickUserImg"},decls:12,vars:2,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","user","onToggleFollow","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"article",0)(1,"div",1)(2,"h3"),c._uU(3,"Likes"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return i.toggleLikedByUsersModal(),i.onCloseLikedByUsers.emit(!1)}),c.O4$(),c.TgZ(5,"svg",3)(6,"title"),c._uU(7,"Close"),c.qZA(),c._UZ(8,"polyline",4)(9,"line",5),c.qZA()()(),c.kcU(),c.TgZ(10,"ul"),c.YNc(11,tY,1,2,"liked-by-user-row",6),c.qZA()()),2&r&&(c.xp6(11),c.Q6J("ngForOf",i.post.likedByUsers)("ngForTrackBy",i.trackByUserId))},dependencies:[Jr,eY],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),L6=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n})}return n})(),vg=(()=>{class n extends L6{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275dir=c.lG2({type:n,features:[c.qOj]})}return n})();const kc=new c.OlP("NgValueAccessor"),iY={provide:kc,useExisting:(0,c.Gpc)(()=>Cs),multi:!0},sY=new c.OlP("CompositionEventMode");let Cs=(()=>{class n extends L6{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oY(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(sY,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&c.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[c._Bn([iY]),c.qOj]})}return n})();const io=new c.OlP("NgValidators"),sh=new c.OlP("NgAsyncValidators");function W6(n){return null!=n}function K6(n){return(0,c.QGY)(n)?(0,_n.D)(n):n}function Y6(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Q6(n,e){return e.map(t=>t(n))}function J6(n){return n.map(e=>function cY(n){return!n.validate}(e)?e:t=>e.validate(t))}function cR(n){return null!=n?function X6(n){if(!n)return null;const e=n.filter(W6);return 0==e.length?null:function(t){return Y6(Q6(t,e))}}(J6(n)):null}function lR(n){return null!=n?function eB(n){if(!n)return null;const e=n.filter(W6);return 0==e.length?null:function(t){return F6(Q6(t,e).map(K6)).pipe((0,yt.U)(Y6))}}(J6(n)):null}function tB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uR(n){return n?Array.isArray(n)?n:[n]:[]}function kS(n,e){return Array.isArray(n)?n.includes(e):n===e}function iB(n,e){const t=uR(e);return uR(n).forEach(i=>{kS(t,i)||t.push(i)}),t}function oB(n,e){return uR(e).filter(t=>!kS(n,t))}class sB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yo extends sB{get formDirective(){return null}get path(){return null}}class ah extends sB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ba=(()=>{class n extends aB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ah,2))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[c.qOj]})}return n})(),lu=(()=>{class n extends aB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(yo,10))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[c.qOj]})}return n})();const FI="VALID",RS="INVALID",dv="PENDING",LI="DISABLED";function fR(n){return(FS(n)?n.validators:n)||null}function pR(n,e){return(FS(e)?e.asyncValidators:n)||null}function FS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class dB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===FI}get invalid(){return this.status===RS}get pending(){return this.status==dv}get disabled(){return this.status===LI}get enabled(){return this.status!==LI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oB(e,this._rawAsyncValidators))}hasValidator(e){return kS(this._rawValidators,e)}hasAsyncValidator(e){return kS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=LI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===FI||this.status===dv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?LI:FI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dv,this._hasOwnPendingAsyncValidator=!0;const t=K6(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?LI:this.errors?RS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dv)?dv:this._anyControlsHaveStatus(RS)?RS:FI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function hY(n){return Array.isArray(n)?cR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function fY(n){return Array.isArray(n)?lR(n):n||null}(this._rawAsyncValidators)}}class gR extends dB{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function uB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function lB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Cg=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>UI}),UI="always";function BI(n,e,t=UI){mR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function mY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hB(n,e)})}(n,e),function yY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _Y(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function BS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mR(n,e){const t=function nB(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(tB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function rB(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(tB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();BS(e._rawValidators,i),BS(e._rawAsyncValidators,i)}function hB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const IY={provide:yo,useExisting:(0,c.Gpc)(()=>Va)},VI=(()=>Promise.resolve())();let Va=(()=>{class n extends yo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new gR({},cR(t),lR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){VI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),BI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){VI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){VI.then(()=>{const r=this._findContainer(t.path),i=new gR({});(function fB(n,e){mR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){VI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){VI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function pB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(io,10),c.Y36(sh,10),c.Y36(Cg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&c.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([IY]),c.qOj]})}return n})();function gB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function mB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _B=class extends dB{constructor(e=null,t,r){super(fR(t),pR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},MY={provide:ah,useExisting:(0,c.Gpc)(()=>ia)},CB=(()=>Promise.resolve())();let ia=(()=>{class n extends ah{constructor(t,r,i,s,u,f){super(),this._changeDetectorRef=u,this.callSetDisabledState=f,this.control=new _B,this._registered=!1,this.name="",this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Cs?t=s:function wY(n){return Object.getPrototypeOf(n.constructor)===vg}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function yR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){BI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){CB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.VuI)(r);CB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function LS(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(yo,9),c.Y36(io,10),c.Y36(sh,10),c.Y36(kc,10),c.Y36(c.sBO,8),c.Y36(Cg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([MY]),c.qOj,c.TTD]})}return n})(),uu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),bB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const CR=new c.OlP("NgModelWithFormControlWarning");let BB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[bB]})}return n})(),QY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Cg,useValue:t.callSetDisabledState??UI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[BB]})}return n})(),JY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:CR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Cg,useValue:t.callSetDisabledState??UI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[BB]})}return n})();function XY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",1),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addReply())}),c._UZ(1,"img",2),c.TgZ(2,"input",3),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.reply.message=i)}),c.qZA(),c.TgZ(3,"button",4),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.reply.createdByUserId.imgUrl,c.LSH),c.xp6(1),c.MGl("placeholder","Add a reply to ",t.comment.createdByUserId.fullName,"..."),c.Q6J("ngModel",t.reply.message)}}let eQ=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r,this.onAddReply=new c.vpe,this.onReplyFormInitialized=new c.vpe,this.reply={_id:"",parentId:"",isTopLevel:!1,postId:"",createdByUserId:this.authService.getLoggedInUser().uid,message:"",createdAt:0},this.isReplyFormInitialized=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.postService.getCommentById(t.comment._id).pipe(Ut(1));t.comment=yield $t(r);const i=t.authService.getUserById(t.comment.createdByUserId);t.comment.createdByUserId=yield $t(i),t.reply.postId=t.comment.postId,t.reply.parentId=t.comment.parentId;const s=t.authService.getUserById(t.reply.createdByUserId);t.reply.createdByUserId=yield $t(s),t.isReplyFormInitialized=!0,t.onReplyFormInitialized.emit(!0)})()}addReply(){this.reply.message&&(this.onAddReply.emit({...this.reply}),this.reply.message="")}ngOnDestroy(){this.onReplyFormInitialized.emit(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Ua),c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-form"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply",onReplyFormInitialized:"onReplyFormInitialized"},decls:1,vars:1,consts:[[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["alt","user",3,"src"],["type","text","name","reply-message",3,"ngModel","placeholder","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&c.YNc(0,XY,5,3,"form",0),2&r&&c.Q6J("ngIf",i.isReplyFormInitialized)},dependencies:[gn,uu,Cs,Ba,lu,ia,Va],styles:["[_nghost-%COMP%]{position:fixed;bottom:61.5px;left:0;z-index:100;background-color:#000;height:3.5em;width:100%;padding-inline:25px}.reply-form-initialized[_nghost-%COMP%]{z-index:130}@media (min-width: 600px){[_nghost-%COMP%]{width:500px;left:unset;bottom:27px}}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:100%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;color:#f5f5f5;height:100%;background-color:#000;border:none;flex:3}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right;flex:1}"]})}return n})(),tQ=(()=>{class n{constructor(t){this.router=t,this.onNavigateUserProfileFromReply=new c.vpe}navigateToUserProfile(){this.router.navigateByUrl(`profile/${this.reply.createdByUserId._id}`),this.onNavigateUserProfileFromReply.emit()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-preview"]],inputs:{reply:"reply"},outputs:{onNavigateUserProfileFromReply:"onNavigateUserProfileFromReply"},decls:11,vars:6,consts:[["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"]],template:function(r,i){1&r&&(c.TgZ(0,"li")(1,"img",0),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(2,"div",1)(3,"div",2)(4,"span",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(5),c.qZA(),c.TgZ(6,"span",4),c._uU(7),c.ALo(8,"timeAgo"),c.qZA()(),c.TgZ(9,"p"),c._uU(10),c.qZA()()()),2&r&&(c.xp6(1),c.Q6J("src",i.reply.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.reply.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(8,4,i.reply.createdAt)),c.xp6(3),c.hij(" ",i.reply.message," "))},dependencies:[xS],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}"]})}return n})();function nQ(n,e){1&n&&c._UZ(0,"reply-preview",3),2&n&&c.Q6J("reply",e.$implicit)}function rQ(n,e){if(1&n&&(c.TgZ(0,"ul",1),c.YNc(1,nQ,1,1,"reply-preview",2),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.replies)("ngForTrackBy",t.trackByReplyId)}}let iQ=(()=>{class n{trackByReplyId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-list"]],inputs:{replies:"replies"},decls:1,vars:1,consts:[["class","replies",4,"ngIf"],[1,"replies"],[3,"reply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"reply"]],template:function(r,i){1&r&&c.YNc(0,rQ,2,2,"ul",0),2&r&&c.Q6J("ngIf",null==i.replies?null:i.replies.length)},dependencies:[Jr,gn,tQ],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-inline-start:2.7em}"]})}return n})();function oQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickReply())}),c._uU(1," Reply "),c.qZA()}}function sQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p",13),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isReplyListShown=!i.isReplyListShown)}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.lnq(" ",t.isReplyListShown?"Hide":"Show"," ",t.replies.length," ",1===t.replies.length?"reply":"replies"," ")}}function aQ(n,e){if(1&n&&c._UZ(0,"reply-list",14),2&n){const t=c.oxw();c.Q6J("replies",t.replies)}}const cQ=function(n){return{"reply-form-initialized":n}};function lQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"reply-form",15),c.NdJ("onAddReply",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.addReply(i))})("onReplyFormInitialized",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.isReplyFormInitialized=i)}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngClass",c.VKq(2,cQ,t.isReplyFormInitialized))("comment",t.comment)}}let uQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.router=i,this.onAddReply=new c.vpe,this.isReplyFormShown=!1,this.replies=[],this.isReplyListShown=!1,this.isReplyFormInitialized=!1}ngOnInit(){var t=this;document.body.addEventListener("click",this.handleOutsideClick.bind(this)),this.comment.replies?.length&&this.postService.getRepliesForComment(this.comment).pipe(Ut(1),(0,Mn.w)(function(){var r=(0,R.Z)(function*(i){const s=i.map(function(){var u=(0,R.Z)(function*(f){const p=t.authService.getUserById(f.createdByUserId),y=yield $t(p);return{...f,createdByUserId:y}});return function(f){return u.apply(this,arguments)}}());return yield Promise.all(s)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.replies=r}})}ngOnChanges(t){var r=this;t.comment.firstChange||t.comment.currentValue.replies.length&&this.postService.getRepliesForComment(this.comment).pipe(Ut(1),(0,Mn.w)(function(){var i=(0,R.Z)(function*(s){const u=s.map(function(){var f=(0,R.Z)(function*(p){const y=r.authService.getUserById(p.createdByUserId),I=yield $t(y);return{...p,createdByUserId:I}});return function(p){return f.apply(this,arguments)}}());return yield Promise.all(u)});return function(s){return i.apply(this,arguments)}}())).subscribe({next:i=>{this.replies=i}})}addReply(t){this.onAddReply.emit(t),this.isReplyFormShown=!1}onClickReply(){this.isReplyFormShown=!0}handleOutsideClick(t){const r=t.target;!r.closest(".reply-form")&&!r.classList.contains("btn-reply")&&(this.isReplyFormShown=!1)}navigateToUserProfile(){this.router.navigateByUrl(`/profile/${this.comment.createdByUserId._id}`)}ngOnDestroy(){document.body.removeEventListener("click",this.handleOutsideClick)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Ua),c.Y36(On),c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comment-cmp"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply"},features:[c.TTD],decls:17,vars:10,consts:[[1,"comment"],[1,"meter"],[1,"comment-top-level"],["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"],["class","btn-reply",3,"click",4,"ngIf"],["class","btn-toggle-replies",3,"click",4,"ngIf"],[3,"replies",4,"ngIf"],["class","reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized",4,"ngIf"],[1,"btn-reply",3,"click"],[1,"btn-toggle-replies",3,"click"],[3,"replies"],[1,"reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c._UZ(1,"div",1),c.TgZ(2,"div",2)(3,"img",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"span",6),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(7),c.qZA(),c.TgZ(8,"span",7),c._uU(9),c.ALo(10,"timeAgo"),c.qZA()(),c.TgZ(11,"p"),c._uU(12),c.qZA(),c.YNc(13,oQ,2,0,"button",8),c.qZA()(),c.YNc(14,sQ,2,3,"p",9),c.YNc(15,aQ,1,1,"reply-list",10),c.YNc(16,lQ,1,4,"reply-form",11),c.qZA()),2&r&&(c.xp6(3),c.Q6J("src",i.comment.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.comment.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(10,8,i.comment.createdAt)),c.xp6(3),c.hij(" ",i.comment.message," "),c.xp6(1),c.Q6J("ngIf",i.comment.isTopLevel),c.xp6(1),c.Q6J("ngIf",i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyListShown&&i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyFormShown))},dependencies:[Qr,gn,eQ,iQ,xS],styles:["[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em;position:relative}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .meter[_ngcontent-%COMP%]{position:absolute;z-index:-10;width:1px;height:100%;background-color:#ffffff82;left:17px;top:1px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .btn-toggle-replies[_ngcontent-%COMP%]{font-size:13px;padding-inline-start:2.7em;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .btn-reply[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px;cursor:pointer}"]})}return n})();function dQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"comment-cmp",9),c.NdJ("onAddReply",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddReply.emit(i))}),c.qZA()}2&n&&c.Q6J("comment",e.$implicit)}function hQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",10),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addComment())}),c._UZ(1,"img",11),c.TgZ(2,"input",12),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.comment.message=i)}),c.qZA(),c.TgZ(3,"button",13),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.comment.message)}}let fQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onToggleCommentsModal=new c.vpe,this.onGetCommentsLength=new c.vpe,this.comment={_id:"",parentId:"",isTopLevel:!0,postId:"",createdByUserId:"",message:"",createdAt:0,replies:[]}}ngOnInit(){var t=this;return(0,R.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable");const r=t.authService.getUserById(t.loggedInUser.uid),i=yield $t(r);t.loggedInUserFromDB=i,t.comment.postId=t.post._id,t.comment.createdByUserId=i._id,t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).pipe((0,Mn.w)(function(){var s=(0,R.Z)(function*(u){const f=u.map(function(){var p=(0,R.Z)(function*(y){const I=t.authService.getUserById(y.createdByUserId),T=yield $t(I);return{...y,createdByUserId:T}});return function(y){return p.apply(this,arguments)}}());return yield Promise.all(f)});return function(u){return s.apply(this,arguments)}}())).subscribe({next:s=>{t.comments=s,t.onGetCommentsLength.emit(t.comments.length)}})})()}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}trackByCommentId(t,r){return r._id}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Ua),c.Y36(On),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onAddReply:"onAddReply",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:10,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],[3,"comment","onAddReply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSubmit",4,"ngIf"],[1,"hiding-flach"],[3,"comment","onAddReply"],[3,"ngSubmit"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],["type","submit",1,"btn-add-comment"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4)(5,"div",5)(6,"ul"),c.YNc(7,dQ,1,1,"comment-cmp",6),c.qZA()()(),c.YNc(8,hQ,5,2,"form",7),c._UZ(9,"div",8),c.qZA()),2&r&&(c.xp6(7),c.Q6J("ngForOf",i.comments)("ngForTrackBy",i.trackByCommentId),c.xp6(1),c.Q6J("ngIf",i.loggedInUserFromDB))},dependencies:[Jr,gn,uu,Cs,Ba,lu,ia,Va,uQ],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:150;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{padding-block-start:unset;display:grid;left:75px;width:calc(100% - 75px);grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:30px 1fr 30px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{width:100%;grid-template-rows:auto 1fr auto;grid-template-columns:auto;padding-block-start:unset;display:grid;grid-row:2;grid-column:2}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40;width:-moz-fit-content;width:fit-content}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;right:0;top:32px;grid-column:unset;padding-inline:unset;padding-block-end:unset;grid-row:unset;justify-self:end}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{grid-column:unset;margin-block-start:-17px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5em;padding-block-end:5.5em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-end:2em}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:60px;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{bottom:30px;border-block-end:1px solid rgba(255,255,255,.24);grid-column:unset}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000;font-size:16px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:none;background-color:#000;grid-column:1/-1;position:fixed;bottom:0;left:75px;height:30px;width:calc(100% - 92px);grid-row:4;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:block}}"]})}return n})(),pQ=(()=>{class n{constructor(){this.onChooseUserToSendPost=new c.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row-send-post-modal"]],inputs:{user:"user"},outputs:{onChooseUserToSendPost:"onChooseUserToSendPost"},decls:8,vars:2,consts:[[1,"user-row-send-post-modal"],[1,"user"],["alt","user",3,"src"],[1,"send"],[1,"btn-send",3,"click"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",3)(6,"button",4),c.NdJ("click",function(){return i.onChooseUserToSendPost.emit(i.user)}),c._uU(7," Send "),c.qZA()()()),2&r&&(c.xp6(2),c.Q6J("src",i.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(i.user.fullName))},styles:["[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{border:none;font-size:16px;color:#0095f6;font-weight:bolder;background-color:transparent;cursor:pointer}"]})}return n})();function gQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row-send-post-modal",2),c.NdJ("onChooseUserToSendPost",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onChooseUserToSendPost.emit(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let mQ=(()=>{class n{constructor(){this.onChooseUserToSendPost=new c.vpe}ngOnInit(){}trackByUserId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-list-send-post-modal"]],inputs:{users:"users"},outputs:{onChooseUserToSendPost:"onChooseUserToSendPost"},decls:2,vars:2,consts:[[1,"user-list-send-post-modal"],[3,"user","onChooseUserToSendPost",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","onChooseUserToSendPost"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,gQ,1,1,"user-row-send-post-modal",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Jr,pQ],styles:["[_nghost-%COMP%]   .user-list-send-post-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function _Q(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-list-send-post-modal",11),c.NdJ("onChooseUserToSendPost",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onChooseUserToSendPost(i))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("users",t.users)}}const VB=function(n){return{"message-form-shown":n}};let yQ=(()=>{class n{constructor(t,r,i,s,u){this.userService=t,this.authService=r,this.postService=i,this.router=s,this.renderer=u,this.onCloseSendPostModal=new c.vpe,this.filterBy={account:""},this.isMessageShown=!1,this.userToSendPost={_id:"",fullName:"",imgUrl:"",followedByUsers:[],followingUsers:[],notifications:[]},this.newMessage={_id:"",chatId:"",txt:"",sentAt:0,sentBy:this.authService.getLoggedInUser().uid}}ngOnInit(){var t=this;return(0,R.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable"),yield t.getUsers()})()}getUsers(){var t=this;return(0,R.Z)(function*(){const r=t.userService.getUsers(t.filterBy);try{const i=yield $t(r);t.users=i}catch(i){console.error(i)}})()}onChooseUserToSendPost(t){var r=this;return(0,R.Z)(function*(){r.userToSendPost=t,r.isMessageShown=!0})()}onSendPost(){var t=this;return(0,R.Z)(function*(){const r=yield t.postService.sendPost(t.userToSendPost,t.post,t.newMessage);yield t.router.navigateByUrl(`chat/${r}`)})()}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ra),c.Y36(On),c.Y36(Ua),c.Y36(hn),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["send-post-modal"]],inputs:{post:"post"},outputs:{onCloseSendPostModal:"onCloseSendPostModal"},decls:15,vars:11,consts:[[1,"send-post-modal",3,"ngClass"],[1,"user-to-send-post"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],["type","search","name","user","id","user","placeholder","Search",3,"ngModel","ngModelChange","input"],[3,"users","onChooseUserToSendPost",4,"ngIf"],[1,"message",3,"ngClass","ngSubmit"],["alt","post",1,"img-post",3,"src"],["type","text","name","txt","id","txt",3,"ngModel","placeholder","ngModelChange"],["type","submit",1,"btn-send"],[3,"users","onChooseUserToSendPost"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return i.onCloseSendPostModal.emit(!1)}),c.O4$(),c.TgZ(3,"svg",3),c._UZ(4,"path",4),c.qZA()(),c.kcU(),c.TgZ(5,"form")(6,"p"),c._uU(7,"To:"),c.qZA(),c.TgZ(8,"input",5),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()}),c.qZA()(),c.YNc(9,_Q,1,1,"user-list-send-post-modal",6),c.qZA(),c.TgZ(10,"form",7),c.NdJ("ngSubmit",function(){return i.onSendPost()}),c._UZ(11,"img",8),c.TgZ(12,"input",9),c.NdJ("ngModelChange",function(u){return i.newMessage.txt=u}),c.qZA(),c.TgZ(13,"button",10),c._uU(14,"Send"),c.qZA()()()),2&r&&(c.Q6J("ngClass",c.VKq(7,VB,i.isMessageShown)),c.xp6(8),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("ngIf",i.users),c.xp6(1),c.Q6J("ngClass",c.VKq(9,VB,i.isMessageShown)),c.xp6(1),c.Q6J("src",i.post.imgUrl,c.LSH),c.xp6(1),c.MGl("placeholder","Message to ",i.userToSendPost.fullName,""),c.Q6J("ngModel",i.newMessage.txt))},dependencies:[Qr,gn,uu,Cs,Ba,lu,ia,Va,mQ],styles:["[_nghost-%COMP%]{position:fixed;background-color:#000;left:0;width:100%;height:calc(100% - 121px);top:61px;overflow:auto;z-index:200}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]{padding-inline:25px;padding-block:1em;padding-block-end:1.5em}[_nghost-%COMP%]   .send-post-modal.message-form-shown[_ngcontent-%COMP%]{padding-block-end:5.5em}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;position:fixed;right:25px;top:93px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em;height:50px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;font-size:16px;width:100%;height:100%}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;height:0;background-color:#000;display:flex;align-items:center;gap:.5em;padding-inline:25px;border-block:1px solid rgba(255,255,255,.19);transition:all .3s ease-in-out}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message.message-form-shown[_ngcontent-%COMP%]{bottom:58px;height:70px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .img-post[_ngcontent-%COMP%]{width:40px;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   #txt[_ngcontent-%COMP%]{width:100%;height:30px;background-color:transparent;border:none;color:#f5f5f5;font-size:16px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   #txt[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{height:30px;color:#f5f5f5;border:none;background-color:#0095f6;font-size:16px;font-weight:bolder;padding-inline:.7em;border-radius:.2em;cursor:pointer;margin-inline-start:.5em}"]})}return n})();function vQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",24)(2,"title"),c._uU(3,"Like"),c.qZA(),c._UZ(4,"path",25),c.qZA()()}}function CQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",26)(2,"title"),c._uU(3,"Unlike"),c.qZA(),c._UZ(4,"path",27),c.qZA()()}}function wQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return i.isLikedByUsersModalShown=!0,c.KtG(i.onClickLikedByUsers.emit(!0))}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function bQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",34),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.onToggleFollow.emit(i))})("onCloseLikedByUsers",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.onCloseLikedByUsers.emit(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function IQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",28)(1,"img",29),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c.qZA(),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",30),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c._uU(5),c.qZA(),c.YNc(6,wQ,5,4,"span",31),c.qZA(),c.YNc(7,bQ,1,2,"liked-by-users-list",32),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.post.likedByUsers[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.post.likedByUsers[0].fullName),c.xp6(1),c.Q6J("ngIf",t.post.likedByUsers.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function EQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.likedByUsersCloneDeep.length-1)," ",t.likedByUsersCloneDeep.length>2?"others":"other","")}}function TQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",39),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw(3);return c.KtG(s.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function MQ(n,e){if(1&n&&(c.O4$(),c.kcU(),c.TgZ(0,"div",35),c._UZ(1,"img",36),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",37),c._uU(5),c.qZA(),c.YNc(6,EQ,5,4,"span",31),c.qZA(),c.YNc(7,TQ,1,2,"liked-by-users-list",38),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.likedByUsersCloneDeep[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.likedByUsersCloneDeep[0].fullName),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function DQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",44),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(4);return c.KtG(i.isMoreClicked=!i.isMoreClicked)}),c._uU(1," more "),c.qZA()}}function SQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p")(1,"span",42),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._uU(2),c.qZA(),c._uU(3),c.ALo(4,"slice"),c.YNc(5,DQ,2,0,"button",43),c.qZA()}if(2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.AsE(" ",c.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),c.xp6(2),c.Q6J("ngIf",t.post.content.length>=120)}}function PQ(n,e){if(1&n&&(c.TgZ(0,"p")(1,"span",45),c._uU(2),c.qZA(),c._uU(3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.hij(" ",t.post.content," ")}}function AQ(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View ",t.commentsLength," comment")}}function xQ(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View all ",t.commentsLength," comments")}}function OQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",40),c.YNc(1,SQ,6,8,"p",31),c.YNc(2,PQ,4,2,"p",31),c.TgZ(3,"p",41),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())}),c.YNc(4,AQ,2,1,"span",31),c.YNc(5,xQ,2,1,"span",31),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!t.isMoreClicked),c.xp6(1),c.Q6J("ngIf",t.isMoreClicked),c.xp6(2),c.Q6J("ngIf",1===t.commentsLength),c.xp6(1),c.Q6J("ngIf",t.commentsLength>=2)}}function kQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"comments-modal",46),c.NdJ("onAddComment",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddComment.emit(i))})("onToggleCommentsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.commentsLength=i)})("onAddReply",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddReply.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function NQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"send-post-modal",47),c.NdJ("onCloseSendPostModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isSendPostModalShown=!1)}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)}}function RQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"post-header",2),c.NdJ("onToggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onClickUserImg.emit(i))}),c.qZA(),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"div",5)(5,"div",6),c.YNc(6,vQ,5,0,"button",7),c.YNc(7,CQ,5,0,"button",7),c.TgZ(8,"button",8),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onToggleCommentModal())}),c.O4$(),c.TgZ(9,"svg",9)(10,"title"),c._uU(11,"CommentModel"),c.qZA(),c._UZ(12,"path",10),c.qZA()(),c.kcU(),c.TgZ(13,"button",11),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isSendPostModalShown=!0)}),c.O4$(),c.TgZ(14,"svg",12)(15,"title"),c._uU(16,"Share PostModel"),c.qZA(),c._UZ(17,"line",13)(18,"polygon",14),c.qZA()()(),c.kcU(),c.TgZ(19,"button",15),c.O4$(),c.TgZ(20,"svg",16)(21,"title"),c._uU(22,"Save"),c.qZA(),c._UZ(23,"polygon",17),c.qZA()()(),c.YNc(24,IQ,8,4,"div",18),c.YNc(25,MQ,8,4,"div",19),c.YNc(26,OQ,6,4,"div",20),c.qZA(),c.YNc(27,kQ,1,2,"comments-modal",21),c.YNc(28,NQ,1,1,"send-post-modal",22),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),c.xp6(1),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(4),c.Q6J("ngIf",!t.isLikeClicked),c.xp6(1),c.Q6J("ngIf",t.isLikeClicked),c.xp6(17),c.Q6J("ngIf",t.post.likedByUsers.length&&"object"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep[0]&&"string"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.creator),c.xp6(1),c.Q6J("ngIf",t.isCommentModalShown),c.xp6(1),c.Q6J("ngIf",t.isSendPostModalShown)}}let jB=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.onClickLikedByUsers=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0,this.isSendPostModalShown=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.post.likedByUsers?.map(function(){var i=(0,R.Z)(function*(s){"string"!=typeof s&&(s=s._id);const u=t.authService.getUserById(s).pipe(Ut(1));return yield $t(u)});return function(s){return i.apply(this,arguments)}}());if(t.post.likedByUsers=yield Promise.all(r),"object"!=typeof t.post.likedByUsers?.[0]){const i=t.post.likedByUsers?.map(function(){var s=(0,R.Z)(function*(u){"string"!=typeof u&&(u=u._id);const f=t.authService.getUserById(u).pipe(Ut(1));return yield $t(f)});return function(u){return s.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(i)}t.likedByUsersCloneDeep=RI(t.post.likedByUsers),t.postService.getCommentsByPostId(t.post._id).pipe(Ut(1)).subscribe({next:i=>{t.commentsLength=i.length}}),t.authService.getUserById(t.post.creatorId).pipe(Ut(1)).subscribe({next:i=>{t.creator=i,t.post.likedByUsers.find(u=>u._id===t.loggedInUser.uid||u===t.loggedInUser.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}ngOnChanges(t){var r=this;return(0,R.Z)(function*(){if(!t.post.firstChange&&t.post)try{const s=t.post.currentValue.likedByUsers.length?F6(r.post.likedByUsers.map(function(){var f=(0,R.Z)(function*(p){const y=r.authService.getUserById(p);try{return yield $t(y)}catch(I){return console.error(`Error fetching user ${p}`,I),null}});return function(p){return f.apply(this,arguments)}}())):(0,ut.of)([]),u=yield $t(s);r.post.likedByUsers=u,r.likedByUsersCloneDeep=RI(r.post.likedByUsers)}catch(i){console.error("Error in ngOnChanges:",i)}})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:this.post,isLikeClicked:this.isLikeClicked}),this.loggedInUser.uid!==this.creator._id&&this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}getTypeOfLikedByUsers(){return typeof this.post.likedByUsers[0]}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(Ua))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg",onClickLikedByUsers:"onClickLikedByUsers",onCloseLikedByUsers:"onCloseLikedByUsers"},features:[c.TTD],decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow","onClickUserImg"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share",3,"click"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","likedByUsersCloneDeep",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply",4,"ngIf"],[3,"post","onCloseSendPostModal",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src","click"],[1,"username",3,"click"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg"],[1,"likedByUsersCloneDeep"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName",3,"click"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[1,"creatorFullName"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply"],[3,"post","onCloseSendPostModal"]],template:function(r,i){1&r&&c.YNc(0,RQ,29,13,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[gn,YK,nY,fQ,yQ,Sr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function FQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",2),c.NdJ("onToggleLike",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}let LQ=(()=>{class n{constructor(){this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:3,vars:2,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,FQ,1,1,"post-card",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.posts)("ngForTrackBy",i.trackByPostId))},dependencies:[Jr,jB],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function UQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-list",4),c.NdJ("onToggleLike",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.navigateToUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("posts",t.posts)}}function BQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",5)(1,"p"),c._uU(2," No posts to show! "),c._UZ(3,"br"),c.TgZ(4,"span",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.navigateToCreatePost())}),c._uU(5,"Let's upload your first post."),c.qZA()()()}}function VQ(n,e){if(1&n&&(c.TgZ(0,"section",1),c.YNc(1,UQ,1,1,"post-list",2),c.YNc(2,BQ,6,0,"ng-template",null,3,c.W1O),c.qZA()),2&n){const t=c.MAs(3),r=c.oxw();c.xp6(1),c.Q6J("ngIf",r.posts.length)("ngIfElse",t)}}let jQ=(()=>{class n{constructor(t,r,i,s,u){this.postService=t,this.authService=r,this.userService=i,this.notificationService=s,this.router=u,this.isToggleLikeProcessing=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=yield t.postService.getPosts();r&&(t.postsSubscription=r.subscribe({next:i=>{t.posts=i},error:i=>{console.error(i)}}))})()}onToggleLike(t){var r=this;return(0,R.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(Ut(1)).subscribe(function(){var s=(0,R.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return s.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,R.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,postId:t._id,postImgUrl:t.imgUrl,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,R.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,R.Z)(function*(){yield r.postService.addReply(t)})()}navigateToUserProfile(t){this.router.navigateByUrl(`profile/${t}`)}navigateToCreatePost(){this.router.navigateByUrl("create-post")}ngOnDestroy(){this.postsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Ua),c.Y36(On),c.Y36(ra),c.Y36(aR),c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["home-page"]],decls:1,vars:1,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf","ngIfElse"],["noPostsTemplate",""],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[1,"page-cmp-layout"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,VQ,4,2,"section",0),2&r&&c.Q6J("ngIf",i.posts)},dependencies:[gn,LQ],styles:["[_nghost-%COMP%]{display:block;padding-block:1em;padding-block-end:2em}@media (min-width: 600px){[_nghost-%COMP%]{padding-block:2em}}"]})}return n})();function $Q(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onLogInWithEmailAndPassword())}),c.TgZ(1,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.userCred.email=i)}),c.qZA(),c.TgZ(2,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.userCred.password=i)}),c.qZA(),c.TgZ(3,"button",15),c._uU(4,"Log in"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}function HQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onRegisterWithEmailAndPassword())}),c.TgZ(1,"input",16),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.userCred.fullName=i)}),c.qZA(),c.TgZ(2,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.userCred.email=i)}),c.qZA(),c.TgZ(3,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.userCred.password=i)}),c.qZA(),c.TgZ(4,"button",17),c._uU(5,"Register"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.fullName),c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}let zQ=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.postService=r,this.router=i,this.userService=s,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0,this.userService.setIsSearchModalShown(!1)}onLogInWithGoogle(){var t=this;return(0,R.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(Ut(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,R.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Ut(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,R.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Ut(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(Ua),c.Y36(hn),c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.YNc(4,$Q,5,2,"form",4),c.YNc(5,HQ,6,3,"form",4),c.kcU(),c.TgZ(6,"p",5),c.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),c._uU(7," Don't you have a user? Register here "),c.qZA(),c.TgZ(8,"button",6),c.NdJ("click",function(){return i.onLogInWithGoogle()}),c.O4$(),c.TgZ(9,"svg",7),c._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),c.qZA(),c.kcU(),c.TgZ(14,"span"),c._uU(15,"Log in with Google"),c.qZA()()()),2&r&&(c.xp6(4),c.Q6J("ngIf",i.isLogInFormShown),c.xp6(1),c.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[gn,uu,Cs,Ba,lu,ia,Va],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})();function GQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"p"),c._uU(5),c.qZA(),c.TgZ(6,"span"),c._uU(7),c.qZA()()(),c.TgZ(8,"button",5),c.NdJ("click",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.removeChat(i))}),c._uU(9,"Remove"),c.qZA()()}if(2&n){const t=c.oxw();c.MGl("routerLink","/chat/",t.chat._id,""),c.xp6(2),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.participantUser.fullName),c.xp6(2),c.Oqu(t.lastMessage.txt.length>20?t.lastMessage.txt.substring(0,20)+" ...":t.lastMessage.txt)}}let qQ=(()=>{class n{constructor(t,r){this.authService=t,this.chatService=r,this.onRemoveChat=new c.vpe,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),yield t.getLastMessage(),t.isComponentInitialized=!0})()}getLoggedInUserFromDB(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield $t(r)})()}getParticipantUser(){var t=this;return(0,R.Z)(function*(){let r=t.chat.users.filter(s=>s!==t.loggedInUserFromDB._id)[0];r||(r=t.loggedInUserFromDB._id);const i=t.authService.getUserById(r);t.participantUser=yield $t(i)})()}getLastMessage(){var t=this;return(0,R.Z)(function*(){var r;t.chatSubscription=t.chatService.getChatById(t.chat._id).subscribe({next:(r=(0,R.Z)(function*(i){t.chat=i;const s=t.chatService.getMessageById(t.chat.messages[t.chat.messages.length-1]);let u=yield $t(s);u||(u={_id:"",chatId:t.chat._id,sentAt:0,sentBy:t.loggedInUserFromDB._id,txt:"No messages yet"}),t.lastMessage=u}),function(s){return r.apply(this,arguments)})})})()}removeChat(t){t.stopPropagation(),this.onRemoveChat.emit(this.chat._id)}ngOnDestroy(){this.chatSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(gg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-preview"]],inputs:{chat:"chat"},outputs:{onRemoveChat:"onRemoveChat"},decls:1,vars:1,consts:[["class","chat-preview",3,"routerLink",4,"ngIf"],[1,"chat-preview",3,"routerLink"],[1,"inner-container"],["alt","Participant",3,"src"],[1,"chat-content"],[1,"btn-remove-chat",3,"click"]],template:function(r,i){1&r&&c.YNc(0,GQ,10,4,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized&&i.lastMessage)},dependencies:[gn,cd],styles:["[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;justify-content:space-between;height:100%}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .btn-remove-chat[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;height:40px;padding-inline:10px;cursor:pointer;font-size:14px}"]})}return n})();function ZQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"chat-preview",2),c.NdJ("onRemoveChat",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onRemoveChat.emit(i))}),c.qZA()}2&n&&c.Q6J("chat",e.$implicit)}let WQ=(()=>{class n{constructor(){this.onRemoveChat=new c.vpe}ngOnInit(){}trackByChatId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-list"]],inputs:{chats:"chats"},outputs:{onRemoveChat:"onRemoveChat"},decls:2,vars:2,consts:[[1,"chat-list"],[3,"chat","onRemoveChat",4,"ngFor","ngForOf","ngForTrackBy"],[3,"chat","onRemoveChat"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,ZQ,1,1,"chat-preview",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.chats)("ngForTrackBy",i.trackByChatId))},dependencies:[Jr,qQ],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .chat-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-block-start:3.5em;height:100%}"]})}return n})();function KQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"button",3),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"line",5)(5,"polyline",6),c.qZA()(),c.kcU(),c.TgZ(6,"button",7),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.navigateToAddChat())}),c.O4$(),c.TgZ(7,"svg",8)(8,"title"),c._uU(9,"\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d7\u05d3\u05e9\u05d4"),c.qZA(),c._UZ(10,"path",9)(11,"path",10)(12,"line",11),c.qZA()()(),c.kcU(),c.TgZ(13,"chat-list",12),c.NdJ("onRemoveChat",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onRemoveChat(i))}),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(13),c.Q6J("chats",t.chats)}}let YQ=(()=>{class n{constructor(t,r,i,s){this.userService=t,this.chatService=r,this.authService=i,this.router=s,this.chats=[],this.isChatPageInitialized=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,R.Z)(function*(){t.chatService.getChatsForUser(t.authService.getLoggedInUser().uid).subscribe({next:r=>{t.chats=r,t.isChatPageInitialized=!0},error:r=>{console.error(r)}})})()}onRemoveChat(t){var r=this;return(0,R.Z)(function*(){yield r.chatService.removeChatById(t,r.authService.getLoggedInUser().uid)})()}navigateToAddChat(){var t=this;return(0,R.Z)(function*(){yield t.router.navigateByUrl("chat/add")})()}ngOnDestroy(){this.chatsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ra),c.Y36(gg),c.Y36(On),c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","message-page",4,"ngIf"],[1,"message-page"],[1,"header"],["title","Back","routerLink","/",1,"btn-back"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"btn-add-chat",3,"click"],["aria-label","\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d7\u05d3\u05e9\u05d4","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M12.202 3.203H5.25a3 3 0 0 0-3 3V18.75a3 3 0 0 0 3 3h12.547a3 3 0 0 0 3-3v-6.952","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M10.002 17.226H6.774v-3.228L18.607 2.165a1.417 1.417 0 0 1 2.004 0l1.224 1.225a1.417 1.417 0 0 1 0 2.004Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.848","x2","20.076","y1","3.924","y2","7.153"],[3,"chats","onRemoveChat"]],template:function(r,i){1&r&&c.YNc(0,KQ,14,1,"section",0),2&r&&c.Q6J("ngIf",i.isChatPageInitialized)},dependencies:[gn,cd,WQ],styles:["[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]{padding-block:1em;display:flex;flex-direction:column;gap:1em;height:100%}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#000;width:100%;display:flex;align-items:center;justify-content:space-between;height:50px;position:fixed;left:0;top:60px;padding-inline:25px;border-block-end:1px solid rgba(245,245,245,.21)}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:calc(100% - 75px);left:75px;top:0;display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content;display:flex;align-items:center}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{grid-column:2;grid-row:1;justify-self:start}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]{background-color:#000;border:unset;cursor:pointer;display:flex;align-items:center;width:-moz-fit-content;width:fit-content}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]{grid-column:2;grid-row:1;justify-self:end}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}"]})}return n})();function QQ(n,e){if(1&n&&(c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"p")(4,"span",4),c._uU(5),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"span",5),c._uU(8),c.ALo(9,"timeAgo"),c.qZA()(),c._UZ(10,"img",6),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.s9C("src",t.sender.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.sender.fullName),c.xp6(1),c.hij(" ",t.notification.message," "),c.xp6(2),c.hij(" ",c.lcZ(9,5,t.notification.createdAt),""),c.xp6(2),c.s9C("src",t.notification.postImgUrl,c.LSH)}}let JQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(Ut(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&c.YNc(0,QQ,11,7,"li",0),2&r&&c.Q6J("ngIf",i.sender)},dependencies:[gn,xS],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function XQ(n,e){1&n&&c._UZ(0,"notification-preview",2),2&n&&c.Q6J("notification",e.$implicit)}let eJ=(()=>{class n{trackByNotificationId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:2,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf","ngForTrackBy"],[3,"notification"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,XQ,1,1,"notification-preview",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.notifications)("ngForTrackBy",i.trackByNotificationId))},dependencies:[Jr,JQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function tJ(n,e){1&n&&(c.TgZ(0,"p"),c._uU(1,"You dont have notifications yet!"),c.qZA())}function nJ(n,e){if(1&n&&(c.TgZ(0,"section",1),c._UZ(1,"notification-list",2),c.YNc(2,tJ,2,0,"p",3),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("notifications",t.notifications),c.xp6(1),c.Q6J("ngIf",!t.notifications.length)}}let rJ=(()=>{class n{constructor(t,r,i){this.notificationService=t,this.authService=r,this.userService=i,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getLoggedInUser();t.notificationService.getNotificationsForUser(r.uid).subscribe({next:i=>{t.notifications=i}})})()}ngOnDestroy(){this.notificationsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(aR),c.Y36(On),c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&c.YNc(0,nJ,3,2,"section",0),2&r&&c.Q6J("ngIf",i.notifications)},dependencies:[gn,eJ],styles:["[_nghost-%COMP%]{padding-block:1em}"]})}return n})();function iJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",4)(1,"button",5),c.NdJ("click",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onMediaSelected(i))}),c.TgZ(2,"span"),c._uU(3," Upload photos here "),c.qZA(),c.TgZ(4,"div"),c.O4$(),c.TgZ(5,"svg",6),c._UZ(6,"path",7)(7,"path",8)(8,"path",9),c.qZA()()()()}}const oJ=function(n){return{active:n}};function sJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",21),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.onSelectFilterPreview(s.value))}),c.TgZ(1,"span"),c._uU(2),c.qZA(),c._UZ(3,"img",22),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw(2);c.Q6J("ngClass",c.VKq(6,oJ,t.value===r.post.filterSelected)),c.xp6(2),c.Oqu(t.name),c.xp6(1),c.Tol(t.value),c.MGl("alt","",t," - filter preview"),c.Q6J("src",r.post.imgUrl,c.LSH)}}function aJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isSelectMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isFormMediaShown=!0)}),c._uU(7," Next "),c.qZA()(),c.TgZ(8,"article",17),c._UZ(9,"img",18),c.qZA(),c.TgZ(10,"div",19),c.YNc(11,sJ,4,8,"article",20),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(9),c.Tol(t.post.filterSelected),c.s9C("src",t.post.imgUrl,c.LSH),c.xp6(2),c.Q6J("ngForOf",t.filterPreviews)("ngForTrackBy",t.trackByFilterName)}}function cJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",23)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFormMediaShown=!1,c.KtG(i.isFilterMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",24),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onCreatePost())}),c._uU(7," Share "),c.qZA()(),c.TgZ(8,"form")(9,"div",25),c._UZ(10,"img",26),c.TgZ(11,"textarea",27),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.post.content=i)}),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(10),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.post.content)}}let lJ=(()=>{class n{constructor(t,r,i){this.postService=t,this.router=r,this.userService=i,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],filterSelected:"normal"},this.userService.setIsSearchModalShown(!1)}onMediaSelected(t){var r=this;return(0,R.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,R.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}trackByFilterName(t,r){return r.name}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Ua),c.Y36(hn),c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["create-post-page"]],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,iJ,9,0,"div",1),c.YNc(2,aJ,12,5,"div",2),c.YNc(3,cJ,12,4,"div",3),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngIf",i.isSelectMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFilterMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Qr,Jr,gn,uu,Cs,Ba,lu,ia,Va],styles:["[_nghost-%COMP%]{height:100%;width:100%;grid-column:2;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative;grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{grid-column:auto}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;font-size:17px;cursor:pointer;padding-block:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;position:relative;padding-block-end:1em}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{padding-block-end:37px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:56px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{top:0;height:71px;align-items:flex-end;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}@media (min-width: 524px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 67px)}}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 125px)}}@media (min-width: 625px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{min-width:auto;max-width:500px;width:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{gap:1.5em}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:66px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{align-items:flex-end;top:0;height:81.5px;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding-block-end:20px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:120px;flex-direction:row}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:100%;object-fit:contain}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex:2;object-fit:contain;height:100%}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:3}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const bg=()=>!!(0,c.f3M)(On).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,c.f3M)(hn).navigateByUrl("/login"),!1);function uJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",5),c.NdJ("onClickLikedByUsers",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.isLikedByUsersClicked=i)})("onCloseLikedByUsers",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.isLikedByUsersClicked=i)})("onToggleLike",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}const dJ=function(n){return{unscrollable:n}};let hJ=(()=>{class n{constructor(){this.onClosePostsModal=new c.vpe,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.isLikedByUsersClicked=!1}ngOnInit(){}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["posts-modal"]],inputs:{userPosts:"userPosts"},outputs:{onClosePostsModal:"onClosePostsModal",onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:6,vars:5,consts:[[1,"posts-modal",3,"ngClass"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onClosePostsModal.emit(!1)}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,uJ,1,1,"post-card",4),c.qZA()()),2&r&&(c.Q6J("ngClass",c.VKq(3,dJ,i.isLikedByUsersClicked)),c.xp6(5),c.Q6J("ngForOf",i.userPosts)("ngForTrackBy",i.trackByPostId))},dependencies:[Qr,Jr,jB],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;background-color:#000;height:100%;width:100%;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{width:calc(100% - 75px);left:75px;display:grid;justify-content:center}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{height:calc(100% + 1px);display:grid;grid-template-rows:auto 1fr;position:relative}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{width:500px;padding-block-start:15px;padding-block-end:25px}}[_nghost-%COMP%]   .posts-modal.unscrollable[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{border:none;background-color:transparent;position:fixed;z-index:130;top:85px;right:27px;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;grid-row:1;top:40px;right:10px;justify-self:end}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto;gap:3em;position:relative;padding-block:4.7em;padding-block-end:5.7em}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block:unset;width:100%}}"]})}return n})();const fJ=function(n){return{disabled:n}};let pJ=(()=>{class n{constructor(t){this.userService=t,this.onBack=new c.vpe,this.onSubmitUserEdit=new c.vpe,this.isImgUrlChanged=!1}ngOnInit(){this.userFromDBToEdit=RI(this.userFromDB)}submitUserEdit(){this.onSubmitUserEdit.emit(this.userFromDBToEdit)}onUploadUserPicture(){var t=this;return(0,R.Z)(function*(){try{const r=yield t.userService.uploadMedia();r&&(t.userFromDBToEdit.imgUrl=r),t.isImgUrlChanged=!0}catch(r){console.error(r)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["edit-profile-modal"]],hostAttrs:[1,"page-cmp-layout"],inputs:{userFromDB:"userFromDB"},outputs:{onBack:"onBack",onSubmitUserEdit:"onSubmitUserEdit"},decls:19,vars:6,consts:[[1,"edit-profile-modal"],["_ngcontent-ng-c994055254","","title","Back",1,"btn-back",3,"click"],["_ngcontent-ng-c994055254","","aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["_ngcontent-ng-c994055254","","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["_ngcontent-ng-c994055254","","fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"user-image"],[1,"content"],["alt","user-image",3,"src","click"],[3,"click"],[1,"edit-user-form"],[3,"ngSubmit"],[1,"user-full-name"],["for","full-name"],["type","text","name","full-name","id","full-name",3,"ngModel","ngModelChange"],["fullName",""],["type","submit",1,"btn-submit",3,"disabled","ngClass"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onBack.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"line",3)(4,"polyline",4),c.qZA()(),c.kcU(),c.TgZ(5,"div",5)(6,"div",6)(7,"img",7),c.NdJ("click",function(){return i.onUploadUserPicture()}),c.qZA(),c.TgZ(8,"span",8),c.NdJ("click",function(){return i.onUploadUserPicture()}),c._uU(9,"Edit picture"),c.qZA()()(),c.TgZ(10,"div",9)(11,"form",10),c.NdJ("ngSubmit",function(){return i.submitUserEdit()}),c.TgZ(12,"div",11)(13,"label",12),c._uU(14,"Name"),c.qZA(),c.TgZ(15,"input",13,14),c.NdJ("ngModelChange",function(u){return i.userFromDBToEdit.fullName=u}),c.qZA()(),c.TgZ(17,"button",15),c._uU(18," Save "),c.qZA()()()()),2&r&&(c.xp6(7),c.Q6J("src",i.userFromDBToEdit.imgUrl,c.LSH),c.xp6(8),c.Q6J("ngModel",i.userFromDBToEdit.fullName),c.xp6(2),c.Q6J("disabled",!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)("ngClass",c.VKq(4,fJ,!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)))},dependencies:[Qr,uu,Cs,Ba,lu,ia,Va],styles:["[_nghost-%COMP%]{height:calc(100vh - 121px);width:100%;background-color:#000;position:fixed;left:0;top:61px}@media (min-width: 600px){[_nghost-%COMP%]{height:100%;top:0;left:75px;width:calc(100% - 75px);display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr)}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{padding-block:1em;display:flex;flex-direction:column;gap:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{height:100%;padding-block:2.3em}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;gap:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:80px;cursor:pointer;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0095f6;font-size:14px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;justify-content:space-between;height:45px;border-block:1px solid rgba(245,245,245,.151)}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;flex:1;height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:transparent;flex:3;height:100%;font-size:16px;border-radius:unset;color:#f5f5f5;font-style:italic}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{cursor:pointer;border:none;color:#f5f5f5;background-color:#0095f6;font-size:18px;margin-block-start:2em;height:40px;width:-moz-fit-content;width:fit-content;padding-inline:1.5em;border-radius:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit.disabled[_ngcontent-%COMP%]{background-color:#8f8f8f;cursor:not-allowed}"]})}return n})();function gJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",15)(1,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!0)}),c._uU(2," Edit profile "),c.qZA()()}}function mJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",17),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isPostsModalShown=!0)}),c._UZ(1,"img",18),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.Tol(t.filterSelected),c.Q6J("src",t.imgUrl,c.LSH)}}function _J(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"posts-modal",19),c.NdJ("onClosePostsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isPostsModalShown=!1)})("onToggleLike",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.navigateToUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userPosts",t.userPosts)}}function yJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"edit-profile-modal",20),c.NdJ("onBack",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!1)})("onSubmitUserEdit",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onUpdateUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userFromDB",t.userFromDB)}}const vJ=function(n){return{"no-edit-profile":n}};function CJ(n,e){if(1&n&&(c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c._UZ(3,"img",4),c.TgZ(4,"span"),c._uU(5),c.qZA()(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"span"),c._uU(10),c.qZA(),c.TgZ(11,"span"),c._uU(12,"Posts"),c.qZA()(),c.TgZ(13,"div",8)(14,"span"),c._uU(15),c.qZA(),c.TgZ(16,"span"),c._uU(17,"Followers"),c.qZA()(),c.TgZ(18,"div",9)(19,"span"),c._uU(20),c.qZA(),c.TgZ(21,"span"),c._uU(22,"Following"),c.qZA()()(),c.YNc(23,gJ,3,0,"div",10),c.qZA()(),c.TgZ(24,"div",11),c.YNc(25,mJ,2,3,"article",12),c.qZA(),c.YNc(26,_J,1,1,"posts-modal",13),c.YNc(27,yJ,1,1,"edit-profile-modal",14),c.qZA()),2&n){const t=c.oxw();c.xp6(3),c.Q6J("src",t.userFromDB.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.userFromDB.fullName),c.xp6(2),c.Q6J("ngClass",c.VKq(11,vJ,t.userFromDB._id!==t.loggedInUser.uid)),c.xp6(3),c.Oqu(t.userPosts.length),c.xp6(5),c.Oqu(t.userFromDB.followedByUsers.length),c.xp6(5),c.Oqu(t.userFromDB.followingUsers.length),c.xp6(3),c.Q6J("ngIf",t.userFromDB._id===t.loggedInUser.uid),c.xp6(2),c.Q6J("ngForOf",t.userPosts)("ngForTrackBy",t.trackByPostId),c.xp6(1),c.Q6J("ngIf",t.isPostsModalShown),c.xp6(1),c.Q6J("ngIf",t.isEditProfileModalShown)}}let wJ=(()=>{class n{constructor(t,r,i,s,u,f,p){this.userService=t,this.authService=r,this.postService=i,this.router=s,this.route=u,this.location=f,this.notificationService=p,this.isPostsModalShown=!1,this.isProfilePageInitialized=!1,this.isToggleLikeProcessing=!1,this.isEditProfileModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.userService.setIsSearchModalShown(!1)}ngOnInit(){this.dataSubscription=this.route.data.pipe((0,yt.U)(t=>t.user)).subscribe({next:t=>{this.isProfilePageInitialized=!1,t?this.userFromDB=t:this.location.back(),this.getPostsForUser()}}),this.routerChangesSubscription=this.router.events.pipe(Cr(t=>t instanceof Ao)).subscribe(t=>{console.log("Navigation ended:",t.url),this.isPostsModalShown=!1})}getPostsForUser(){const t=this.postService.getPostsForUser(this.userFromDB._id);this.userPostsSubscription=t.subscribe({next:r=>{this.userPosts=r,this.isProfilePageInitialized=!0},error:r=>{console.error(r)}})}trackByPostId(t,r){return r._id}onToggleLike(t){var r=this;return(0,R.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(Ut(1)).subscribe(function(){var s=(0,R.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return s.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,R.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,postId:t._id,postImgUrl:t.imgUrl,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,R.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,R.Z)(function*(){yield r.postService.addReply(t)})()}onUpdateUserProfile(t){this.userService.updateUserProfile(t),this.userFromDB=t,this.isEditProfileModalShown=!1}navigateToUserProfile(t){this.router.navigateByUrl(`profile/${t}`)}navigateUserProfileFromComment(){this.isPostsModalShown=!1}navigateUserProfileFromLikedByUsers(){console.log("hi"),this.isPostsModalShown=!1}ngOnDestroy(){this.userPostsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.routerChangesSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ra),c.Y36(On),c.Y36(Ua),c.Y36(hn),c.Y36(va),c.Y36(De),c.Y36(aR))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["profile"]],decls:1,vars:1,consts:[["class","user-profile",4,"ngIf"],[1,"user-profile"],[1,"user-info"],[1,"user-image-profile"],["alt","loggedin user",3,"src"],[1,"user-data"],[1,"user-data-inner-container",3,"ngClass"],[1,"posts-count"],[1,"followers-count"],[1,"following-count"],["class","actions-profile",4,"ngIf"],[1,"user-posts"],["class","post-preview",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf"],[3,"userFromDB","onBack","onSubmitUserEdit",4,"ngIf"],[1,"actions-profile"],[1,"btn-edit-profile",3,"click"],[1,"post-preview",3,"click"],["alt","post-preview",3,"src"],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[3,"userFromDB","onBack","onSubmitUserEdit"]],template:function(r,i){1&r&&c.YNc(0,CJ,28,13,"section",0),2&r&&c.Q6J("ngIf",i.isProfilePageInitialized&&i.userFromDB&&i.userPosts)},dependencies:[Qr,Jr,gn,hJ,pJ],styles:["[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]{padding-block:2em;display:flex;flex-direction:column;gap:2em;height:100%;position:relative}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-inline:25px;gap:2em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container.no-edit-profile[_ngcontent-%COMP%]{margin-block-start:1em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .actions-profile[_ngcontent-%COMP%]   .btn-edit-profile[_ngcontent-%COMP%]{border:none;height:2.1em;padding-inline:2em;border-radius:.4em;color:#f5f5f5;background-color:#363636;font-size:15px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]{display:flex;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover}"]})}return n})(),DR=(()=>{class n{constructor(){this._isChatDetailsShown$=new lr.X(!1),this.isChatDetailsShown$=this._isChatDetailsShown$.asObservable()}setChatDetailsShown(t){this._isChatDetailsShown$.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EJ=(()=>{class n{transform(t){const r=new Date(t);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}  ${r.getDate()}/${r.getMonth()+1}/${r.getFullYear().toString().substring(2)}`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"formatTime",type:n,pure:!0})}return n})();function TJ(n,e){if(1&n&&c._UZ(0,"img",7),2&n){const t=c.oxw(2);c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH)}}function MJ(n,e){if(1&n&&(c.TgZ(0,"div",3),c.YNc(1,TJ,1,1,"img",4),c.TgZ(2,"div",5)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",6)(6,"p"),c._uU(7),c.ALo(8,"formatTime"),c.qZA()()()),2&n){const t=c.oxw();c.Q6J("ngClass",t.message.sentBy===t.loggedInUserFromDB._id?"loggedInUser":"participant"),c.xp6(1),c.Q6J("ngIf",t.message.sentBy!==t.loggedInUserFromDB._id),c.xp6(3),c.Oqu(t.message.txt),c.xp6(3),c.Oqu(c.lcZ(8,4,t.message.sentAt))}}function DJ(n,e){if(1&n&&c._UZ(0,"img",7),2&n){const t=c.oxw(3);c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH)}}function SJ(n,e){if(1&n&&(c.TgZ(0,"div",16),c.YNc(1,DJ,1,1,"img",4),c.TgZ(2,"div",5)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",6)(6,"p"),c._uU(7),c.ALo(8,"formatTime"),c.qZA()()()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.message.sentBy!==t.loggedInUserFromDB._id),c.xp6(3),c.Oqu(t.message.txt),c.xp6(3),c.Oqu(c.lcZ(8,3,t.message.sentAt))}}function PJ(n,e){if(1&n&&(c.TgZ(0,"div",8)(1,"div",9)(2,"div",10),c._UZ(3,"img",7),c.TgZ(4,"p"),c._uU(5),c.qZA()(),c._UZ(6,"img",11),c.TgZ(7,"div",12),c._UZ(8,"img",7),c.TgZ(9,"p",13),c._uU(10),c.qZA(),c.TgZ(11,"p",14),c._uU(12),c.qZA()()(),c.YNc(13,SJ,9,5,"div",15),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.message.sentBy===t.loggedInUserFromDB._id?"loggedInUser":"participant"),c.xp6(3),c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH),c.xp6(2),c.hij(" ",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.fullName:t.participantUser.fullName," "),c.xp6(1),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(2),c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.post.creatorFullName),c.xp6(2),c.Oqu(t.post.content),c.xp6(1),c.Q6J("ngIf",t.message.txt)}}let AJ=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r}ngOnInit(){var t=this;return(0,R.Z)(function*(){if(t.message.postId){const r=yield t.postService.getPostById(t.message.postId);t.post=r}})()}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(Ua))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message"]],inputs:{message:"message",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},decls:3,vars:2,consts:[[1,"message"],["class","message-with-no-post",3,"ngClass",4,"ngIf"],["class","message-with-post",3,"ngClass",4,"ngIf"],[1,"message-with-no-post",3,"ngClass"],["alt","user",3,"src",4,"ngIf"],[1,"txt"],[1,"time"],["alt","user",3,"src"],[1,"message-with-post",3,"ngClass"],[1,"post"],[1,"header"],["alt","post",3,"src"],[1,"footer"],[1,"creator-full-name"],[1,"post-content"],["class","message-with-post-content",4,"ngIf"],[1,"message-with-post-content"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c.YNc(1,MJ,9,6,"div",1),c.YNc(2,PJ,14,8,"div",2),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngIf",!i.message.postId),c.xp6(1),c.Q6J("ngIf",i.post))},dependencies:[Qr,gn,EJ],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(38,38,38),rgb(49,49,49))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.participant[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(55,151,240),rgb(100,180,255))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5em;border-radius:50%;margin-block-end:.2em;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{border-radius:1.4em;padding-inline:1em;padding-block:.5em;font-size:17px;overflow-wrap:break-word;max-width:200px}@media (min-width: 600px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{max-width:300px}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em;display:flex;flex-wrap:wrap;max-width:40px;text-align:left}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]{align-items:end}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(38,38,38),rgb(49,49,49))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.participant[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(55,151,240),rgb(100,180,255))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]{border-radius:15px;background-color:#333;width:65%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:45px;display:flex;align-items:center;gap:.5em;padding-inline:.7em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%;aspect-ratio:1/1;object-fit:cover;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;color:#f5f5f5}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{height:45px;display:flex;align-items:center;gap:.5em;padding-inline:.7em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .creator-full-name[_ngcontent-%COMP%]{margin-inline-start:-3px;font-weight:bolder}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;object-fit:cover;aspect-ratio:1/1;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5em;border-radius:50%;margin-block-end:.2em;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{border-radius:1.4em;padding-inline:1em;padding-block:.5em;font-size:17px;overflow-wrap:break-word;max-width:200px}@media (min-width: 600px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{max-width:300px}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em;display:flex;flex-wrap:wrap;max-width:40px;text-align:left}"]})}return n})();function xJ(n,e){if(1&n&&c._UZ(0,"message",2),2&n){const t=e.$implicit,r=c.oxw();c.Q6J("message",t)("loggedInUserFromDB",r.loggedInUserFromDB)("participantUser",r.participantUser)}}let OJ=(()=>{class n{constructor(t){this.chatService=t,this.onScrollToBottom=new c.vpe}ngOnInit(){this.getChatMessages()}getChatMessages(){this.chatService.getMessagesByChatId(this.chat._id).subscribe({next:t=>{this.messages=t,this.scrollToBottom()}})}scrollToBottom(){this.onScrollToBottom.emit()}trackByMessageId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(gg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message-list"]],inputs:{chat:"chat",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},outputs:{onScrollToBottom:"onScrollToBottom"},decls:2,vars:2,consts:[[1,"message-list"],[3,"message","loggedInUserFromDB","participantUser",4,"ngFor","ngForOf","ngForTrackBy"],[3,"message","loggedInUserFromDB","participantUser"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,xJ,1,3,"message",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.messages)("ngForTrackBy",i.trackByMessageId))},dependencies:[Jr,AJ],styles:["[_nghost-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.4em;width:100%;padding-block:4em}"]})}return n})();const kJ=["chatDetails"];function NJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1,2)(2,"div",3)(3,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.goBack())}),c.O4$(),c.TgZ(4,"svg",5),c._UZ(5,"line",6)(6,"polyline",7),c.qZA()(),c.kcU(),c.TgZ(7,"div",8),c._UZ(8,"img",9),c.TgZ(9,"span"),c._uU(10),c.qZA()()(),c.TgZ(11,"message-list",10),c.NdJ("onScrollToBottom",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onScrollToBottom())}),c.qZA(),c.TgZ(12,"form",11),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onAddMessage())}),c._UZ(13,"img",12),c.TgZ(14,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.message.txt=i)}),c.qZA(),c.TgZ(15,"button",14),c._uU(16,"Send"),c.qZA()()()}if(2&n){const t=c.oxw();c.xp6(8),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.participantUser.fullName),c.xp6(1),c.Q6J("chat",t.chat)("loggedInUserFromDB",t.loggedInUserFromDB)("participantUser",t.participantUser),c.xp6(2),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.message.txt)}}let RJ=(()=>{class n{constructor(t,r,i,s,u,f){this.route=t,this.location=r,this.authService=i,this.chatService=s,this.sharedStateService=u,this.router=f,this.isComponentInitialized=!1,this.message={_id:"",chatId:"",sentAt:0,sentBy:this.authService.getLoggedInUser().uid,txt:""},this.sharedStateService.setChatDetailsShown(!0)}ngOnInit(){var t=this;return(0,R.Z)(function*(){var r;t.dataSubscription=t.route.data.pipe((0,yt.U)(r=>r.chat)).subscribe({next:r=>{r?t.chat=r:t.location.back(),r&&(t.message.chatId=r._id)}}),t.paramsSubscription=t.route.params.subscribe({next:(r=(0,R.Z)(function*(i){i.chatId?t.chatId=i.chatId:t.location.back()}),function(s){return r.apply(this,arguments)})}),yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),t.isComponentInitialized=!0})()}ngAfterContentInit(){let t=setInterval(()=>{this.elChatDetails&&(setTimeout(()=>{this.elChatDetails.nativeElement.scrollIntoView({behavior:"smooth",block:"end"})},500),clearInterval(t))},500)}onAddMessage(){var t=this;return(0,R.Z)(function*(){const r=RI(t.message);yield t.chatService.addMessageToChat(t.chat._id,r),t.message.txt=""})()}getLoggedInUserFromDB(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield $t(r)})()}getParticipantUser(){var t=this;return(0,R.Z)(function*(){let r=t.chat.users.filter(u=>u!==t.loggedInUserFromDB._id)[0];r||(r=t.loggedInUserFromDB._id);const i=t.authService.getUserById(r),s=yield $t(i);t.participantUser=s})()}onScrollToBottom(){this.elChatDetails.nativeElement.scrollIntoView({behavior:"smooth",block:"end"})}goBack(){var t=this;return(0,R.Z)(function*(){yield t.router.navigateByUrl("chat")})()}ngOnDestroy(){this.paramsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.sharedStateService.setChatDetailsShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(va),c.Y36(De),c.Y36(On),c.Y36(gg),c.Y36(DR),c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-details"]],viewQuery:function(r,i){if(1&r&&c.Gf(kJ,5),2&r){let s;c.iGM(s=c.CRH())&&(i.elChatDetails=s.first)}},hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","chat-details",4,"ngIf"],[1,"chat-details"],["chatDetails",""],[1,"header"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"participant-user"],["alt","Participant",3,"src"],[3,"chat","loggedInUserFromDB","participantUser","onScrollToBottom"],[1,"add-message",3,"ngSubmit"],["alt","loggedInUser",3,"src"],["type","text","name","message","id","message","placeholder","Message...",3,"ngModel","ngModelChange"],[1,"btn-send"]],template:function(r,i){1&r&&c.YNc(0,NJ,17,7,"section",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[gn,uu,Cs,Ba,lu,ia,Va,OJ],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]{padding-block:1.4em;width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;border-block-end:1px solid rgba(245,245,245,.29);width:100%;position:fixed;left:0;top:0;z-index:999;background-color:#000;height:61px;padding-inline:25px}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset;gap:unset}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;display:flex;align-items:center;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content;margin-inline-start:3em}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;aspect-ratio:1/1;object-fit:cover;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;position:fixed;left:0;bottom:0;background-color:#000;height:61px;width:100%;padding-inline:25px;border-block-start:1px solid rgba(245,245,245,.24);z-index:999}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset;gap:unset}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-column:2;grid-row:1}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{width:100%;height:100%;background-color:unset;border:none;font-size:16px;color:#f5f5f5}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{grid-column:2;grid-row:1;margin-inline-start:2.5em}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;background-color:unset;border:none;height:100%;color:#0095f6;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content;justify-self:end}}"]})}return n})(),LJ=(()=>{class n{constructor(){this.onAddNewChat=new c.vpe}addNewChat(){this.onAddNewChat.emit(this.user._id)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row"]],inputs:{user:"user"},outputs:{onAddNewChat:"onAddNewChat"},decls:4,vars:2,consts:[[1,"user-row"],["alt","user",3,"src","click"],[3,"click"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0)(1,"img",1),c.NdJ("click",function(){return i.addNewChat()}),c.qZA(),c.TgZ(2,"p",2),c.NdJ("click",function(){return i.addNewChat()}),c._uU(3),c.qZA()()),2&r&&(c.xp6(1),c.Q6J("src",i.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(i.user.fullName))},styles:["[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function UJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row",2),c.NdJ("onAddNewChat",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.addNewChat(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let BJ=(()=>{class n{constructor(){this.onAddNewChat=new c.vpe}trackByUserId(t,r){return r._id}addNewChat(t){this.onAddNewChat.emit(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-list"]],inputs:{users:"users"},outputs:{onAddNewChat:"onAddNewChat"},decls:2,vars:2,consts:[[1,"user-list"],[3,"user","onAddNewChat",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","onAddNewChat"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,UJ,1,1,"user-row",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Jr,LJ],styles:["[_nghost-%COMP%]   .user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2em}"]})}return n})();const VJ=[{path:"chat/add",component:(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.authService=r,this.userService=i,this.sharedStateService=s,this.chatService=u,this.newChat={_id:"",lastModified:0,isRead:!1,shownByUsers:[this.authService.getLoggedInUser().uid],users:[this.authService.getLoggedInUser().uid],messages:[]},this.filterBy={account:""},this.sharedStateService.setChatDetailsShown(!0)}ngOnInit(){var t=this;return(0,R.Z)(function*(){yield t.getUsers()})()}getUsers(){var t=this;return(0,R.Z)(function*(){const r=t.userService.getUsers(t.filterBy),i=yield $t(r);t.users=i})()}onAddNewChat(t){var r=this;return(0,R.Z)(function*(){r.newChat.users.push(t),r.newChat.shownByUsers.push(t);const i=yield r.chatService.addNewChat(r.newChat,r.authService.getLoggedInUser().uid);yield r.router.navigateByUrl(`chat/${i._id}`)})()}navigateToChatPage(){this.router.navigateByUrl("chat")}ngOnDestroy(){this.sharedStateService.setChatDetailsShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn),c.Y36(On),c.Y36(ra),c.Y36(DR),c.Y36(gg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["add-chat"]],hostAttrs:[1,"page-cmp-layout"],decls:12,vars:2,consts:[[1,"add-chat-page"],[1,"header"],[1,"btn-cancel",3,"click"],[1,"add-chat-inner-container"],["type","search","name","user","id","user","placeholder","Search",3,"ngModel","ngModelChange","input"],[3,"users","onAddNewChat"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return i.navigateToChatPage()}),c._uU(3," Cancel "),c.qZA(),c.TgZ(4,"h4"),c._uU(5,"New message"),c.qZA()(),c.TgZ(6,"div",3)(7,"form")(8,"p"),c._uU(9,"To:"),c.qZA(),c.TgZ(10,"input",4),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()}),c.qZA()(),c.TgZ(11,"user-list",5),c.NdJ("onAddNewChat",function(u){return i.onAddNewChat(u)}),c.qZA()()()),2&r&&(c.xp6(10),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("users",i.users))},dependencies:[uu,Cs,Ba,lu,ia,Va,BJ],styles:["[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]{padding-block-start:65px;padding-block-end:25px;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;position:fixed;width:100%;height:50px;left:0;top:0;padding-inline:25px;border-block-end:1px solid rgba(255,255,255,.24);background-color:#000}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:unset;border:none;color:#f5f5f5;font-size:16px;flex:1;text-align:left;cursor:pointer}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;flex:1.5}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4f4f4f;height:100%;display:flex;align-items:center;font-size:16px}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]{width:100%;color:#f5f5f5;background-color:transparent;border:none;font-size:16px;height:100%;padding-inline:.5em}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]::placeholder{color:#4f4f4f;font-size:16px}"]})}return n})(),canActivate:[bg]},{path:"chat/:chatId",component:RJ,canActivate:[bg],resolve:{chat:function FJ(n){const e=n.params.chatId;return(0,c.f3M)(gg).getChatById(e).pipe(Ut(1))}}},{path:"chat",component:YQ,canActivate:[bg]},{path:"notification",component:rJ,canActivate:[bg]},{path:"create-post",component:lJ,canActivate:[bg]},{path:"profile/:userId",component:wJ,canActivate:[bg],resolve:{user:function IJ(n){const e=n.params.userId;return(0,c.f3M)(On).getUserById(e)}}},{path:"login",component:zQ,canActivate:[()=>!(0,c.f3M)(On).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,c.f3M)(hn).navigateByUrl("/"),!1)]},{path:"",component:jQ,canActivate:[bg]}];let jJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Um.forRoot(VJ,{useHash:!0}),Um]})}return n})();const $J=function(n,e){return{"btn-toggle-follow-following":n,disabled:e}};function HJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,$J,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function zJ(n,e){if(1&n&&(c.TgZ(0,"li")(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"div",3)(4,"span"),c._uU(5),c.qZA()()(),c.YNc(6,HJ,2,6,"button",4),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.loggedInUser._id!==t.user._id)}}let GJ=(()=>{class n{constructor(t){this.authService=t,this.toggleFollow=new c.vpe,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){const r=t.authService.getLoggedInUser(),i=t.authService.getUserById(r.uid);t.loggedInUser=yield $t(i),t.isFollowClicked=!!t.loggedInUser.followingUsers.find(s=>s===t.user._id),t.isComponentInitialized=!0})()}ngOnChanges(t){this.isComponentInitialized&&t.user&&(this.isFollowClicked=this.user.followedByUsers.includes(this.loggedInUser._id))}onToggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.toggleFollow.emit({isFollowClicked:this.isFollowClicked,user:this.user}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row-search-modal"]],inputs:{user:"user"},outputs:{toggleFollow:"toggleFollow"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"user-content"],["alt","loggedInUser",3,"src"],[1,"content"],["class","btn-toggle-follow",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn-toggle-follow",3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,zJ,7,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Qr,gn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{border:none;font-size:16px;height:2em;padding-inline:1em;border-radius:.3em;background-color:#0095f6;color:#f5f5f5;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow-following[_ngcontent-%COMP%]{background-color:#919191}"]})}return n})();function qJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row-search-modal",5),c.NdJ("toggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.toggleFollow.emit(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let $B=(()=>{class n{constructor(t){this.renderer=t,this.closeModal=new c.vpe,this.getUsers=new c.vpe,this.toggleFollow=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.getUsers.emit()}onCloseModal(){this.closeModal.emit(!1)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},outputs:{closeModal:"closeModal",getUsers:"getUsers",toggleFollow:"toggleFollow"},decls:6,vars:2,consts:[[1,"search-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"user","toggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onCloseModal()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,qJ,1,1,"user-row-search-modal",4),c.qZA()()),2&r&&(c.xp6(5),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Jr,GJ],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset;display:block;position:unset;left:75px;grid-column:2;grid-row:3;overflow:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-block:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;top:88px;right:29px;border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;display:flex;align-items:center;padding-inline-start:.8em;padding-block-end:.8em;align-self:end;cursor:pointer;z-index:200}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;top:115px}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;position:relative;padding-block-end:8em;padding-block-start:2em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-start:unset;padding-block-end:unset}}"]})}return n})();function ZJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",41),c.qZA())}function WJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",42),c.qZA())}function KJ(n,e){if(1&n&&c._UZ(0,"img",43),2&n){const t=c.oxw(2);c.Q6J("src",t.user.imgUrl,c.LSH)}}function YJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",44),c._UZ(1,"path",45)(2,"circle",46),c.qZA())}function QJ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",47)(1,"ul")(2,"li",48),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3,"Log out"),c.qZA()()()}}function JJ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",49)(1,"div",50),c.O4$(),c.TgZ(2,"svg",51)(3,"title"),c._uU(4,"Search"),c.qZA(),c._UZ(5,"path",13)(6,"line",14),c.qZA(),c.kcU(),c.TgZ(7,"input",52),c.NdJ("ngModelChange",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.filterBy.account=i)})("input",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleSearchModal(!0))}),c.qZA()(),c.TgZ(8,"search-modal",53),c.NdJ("closeModal",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onToggleFollow(i))}),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(7),c.Q6J("ngModel",t.filterBy.account),c.xp6(1),c.Q6J("users",t.users)}}const XJ=function(){return{exact:!0}},eX=function(n){return{"search-active":n}};function tX(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"path",5),c.qZA()(),c.kcU(),c.TgZ(5,"nav")(6,"ul")(7,"li",6,7),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(9,"svg",8),c._UZ(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8),s=c.MAs(19),u=c.MAs(24),f=c.MAs(28),p=c.MAs(34),y=c.oxw();return y.onToggleSearchModal(!0),c.KtG(y.onClickSearchModal([i,s,u,f,p]))}),c.O4$(),c.TgZ(13,"svg",12)(14,"title"),c._uU(15,"\u05d7\u05d9\u05e4\u05d5\u05e9"),c.qZA(),c._UZ(16,"path",13)(17,"line",14),c.qZA()(),c.kcU(),c.TgZ(18,"li",15,16),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(19);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(20,"svg",17),c._UZ(21,"path",18)(22,"path",19),c.qZA()(),c.kcU(),c.TgZ(23,"li",20,21),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(24);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(25,ZJ,2,0,"svg",22),c.YNc(26,WJ,2,0,"svg",22),c.qZA(),c.TgZ(27,"li",23,24),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(28);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(29,"svg",25),c._UZ(30,"path",26)(31,"line",27)(32,"line",28),c.qZA()(),c.kcU(),c.TgZ(33,"li",29,30),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(34);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(35,KJ,1,1,"img",31),c.YNc(36,YJ,3,0,"ng-template",null,32,c.W1O),c.qZA()()()(),c.TgZ(38,"div",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(39,"svg",34),c._UZ(40,"line",35)(41,"line",36)(42,"line",37),c.qZA(),c.YNc(43,QJ,4,0,"div",38),c.qZA(),c.YNc(44,JJ,9,2,"div",39),c.qZA()}if(2&n){const t=c.MAs(24),r=c.MAs(37),i=c.oxw();c.xp6(7),c.Q6J("routerLinkActiveOptions",c.DdM(9,XJ)),c.xp6(4),c.Q6J("ngClass",c.VKq(10,eX,i.isSearchModalShown)),c.xp6(14),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(7),c.MGl("routerLink","/profile/",i.user._id,""),c.xp6(2),c.Q6J("ngIf",i.user.imgUrl)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown)}}let nX=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.userService=i,this.isExtraMenuOpen=!1,this.isSearchModalShown=!1,this.filterBy={account:""}}ngOnInit(){var r,t=this;this.userSubscription=this.authService.loggedInUser$.subscribe({next:(r=(0,R.Z)(function*(i){if(i){const s=t.authService.getUserById(i.uid),u=yield $t(s);t.user=u}else t.router.navigateByUrl("login")}),function(s){return r.apply(this,arguments)})}),this.userService.isSearchModalShown$.subscribe({next:r=>{this.isSearchModalShown=r}})}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,R.Z)(function*(){const s=i.authService.getUserById(r._id).pipe(Ut(1));r=yield $t(s),yield i.userService.toggleFollow(t,r)})()}onClickSearchModal(t){t.forEach(r=>{r.classList.remove("active")})}onLogOut(){var t=this;return(0,R.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(hn),c.Y36(ra))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions","click"],["elHome",""],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["title","Search",1,"search",3,"ngClass","click"],["elSearch",""],["aria-label","\u05d7\u05d9\u05e4\u05d5\u05e9","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["routerLink","/chat","routerLinkActive","active","title","Messages",1,"messages",3,"click"],["elMessages",""],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications",3,"click"],["elNotifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post",3,"click"],["elCreatePost",""],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink","click"],["elProfile",""],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["class","search-container",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"],[1,"search-container"],[1,"header"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&c.YNc(0,tX,45,12,"section",0),2&r&&c.Q6J("ngIf",i.user)},dependencies:[Qr,gn,cd,Sf,Cs,Ba,ia,$B],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.21);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:fixed;top:0;left:75px;width:calc(100% - 75px);height:100%;display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:50px 65px 1fr 50px;overflow:auto;background-color:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{grid-column:2;grid-row:2;display:flex;align-items:center;background-color:#262626;border-radius:.5em;gap:.5em;height:40px;padding-inline:1em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.search-active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:60px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function rX(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",28),c.qZA())}function iX(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",29),c.qZA())}function oX(n,e){if(1&n&&c._UZ(0,"img",30),2&n){const t=c.oxw(2);c.Q6J("src",t.loggedInUser.imgUrl,c.LSH)}}function sX(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",31),c._UZ(1,"path",32)(2,"circle",33),c.qZA())}function aX(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",34)(1,"ul")(2,"li",35),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3," Log out "),c.qZA()()()}}const cX=function(){return{exact:!0}};function lX(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),c.O4$(),c.TgZ(5,"svg",4),c._UZ(6,"path",5),c.qZA()(),c.kcU(),c.TgZ(7,"li",6),c.O4$(),c.TgZ(8,"svg",7),c._UZ(9,"path",8)(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.YNc(13,rX,2,0,"svg",12),c.YNc(14,iX,2,0,"svg",12),c.qZA(),c.TgZ(15,"li",13),c.O4$(),c.TgZ(16,"svg",14),c._UZ(17,"path",15)(18,"line",16)(19,"line",17),c.qZA()(),c.kcU(),c.TgZ(20,"li",18),c.YNc(21,oX,1,1,"img",19),c.YNc(22,sX,3,0,"ng-template",null,20,c.W1O),c.qZA(),c.TgZ(24,"li",21),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(25,"svg",22),c._UZ(26,"line",23)(27,"line",24)(28,"line",25),c.qZA(),c.YNc(29,aX,4,0,"div",26),c.qZA()()()()()}if(2&n){const t=c.MAs(12),r=c.MAs(23),i=c.oxw();c.xp6(4),c.Q6J("routerLinkActiveOptions",c.DdM(7,cX)),c.xp6(9),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(6),c.MGl("routerLink","/profile/",i.loggedInUser._id,""),c.xp6(1),c.Q6J("ngIf",i.loggedInUser)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen)}}let uX=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){var r,t=this;this.userSubscription=this.authService.loggedInUser$.subscribe({next:(r=(0,R.Z)(function*(i){if(i){const s=t.authService.getUserById(i.uid),u=yield $t(s);t.loggedInUser=u}else t.router.navigateByUrl("login")}),function(s){return r.apply(this,arguments)})})}onLogOut(){var t=this;return(0,R.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(hn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/chat","routerLinkActive","active","title","Chats",1,"chats"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&c.YNc(0,lX,30,8,"section",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[gn,cd,Sf],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;left:0;z-index:299;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();function dX(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"search-modal",10),c.NdJ("closeModal",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.onToggleFollow(i))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("users",t.users)}}let hX=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.authService=i,this.filterBy={account:""}}ngOnInit(){this.searchModalSubscription=this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t,this.filterBy.account=""}})}onClickLogo(){this.router.navigateByUrl("/")}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,R.Z)(function*(){const s=i.authService.getUserById(r._id).pipe(Ut(1));r=yield $t(s),yield i.userService.toggleFollow(t,r)})()}ngOnDestroy(){this.searchModalSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn),c.Y36(ra),c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow",4,"ngIf"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"header",0)(1,"div",1),c.NdJ("click",function(){return i.onClickLogo()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4),c.O4$(),c.TgZ(5,"svg",5)(6,"title"),c._uU(7,"Search"),c.qZA(),c._UZ(8,"path",6)(9,"line",7),c.qZA(),c.kcU(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()})("click",function(){return i.onToggleSearchModal(!0)}),c.qZA(),c.YNc(11,dX,1,1,"search-modal",9),c.qZA()()),2&r&&(c.xp6(10),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown))},dependencies:[gn,Cs,Ba,ia,$B],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:199;top:0;left:0;border-block-end:1px solid rgba(245,245,245,.21);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function fX(n,e){1&n&&c._UZ(0,"router-outlet")}function pX(n,e){1&n&&c._UZ(0,"app-header-mobile")}function gX(n,e){1&n&&c._UZ(0,"aside-menu")}function mX(n,e){1&n&&(c.TgZ(0,"main",3),c._UZ(1,"router-outlet"),c.qZA())}function _X(n,e){1&n&&c._UZ(0,"menu-mobile")}const yX=function(n){return{"main-app-remove-rows":n}};let vX=(()=>{class n{constructor(t,r){this.router=t,this.sharedState=r,this.routerUrl=this.router.url,this.isChatDetailsShown=!1}ngOnInit(){var t=this;return(0,R.Z)(function*(){t.getIsChatDetailsShown(),t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Ao&&(t.routerUrl=t.router.url)})})()}getIsChatDetailsShown(){this.chatDetailsSubscription=this.sharedState.isChatDetailsShown$.subscribe({next:t=>{this.isChatDetailsShown=t}})}ngOnDestroy(){this.routerUrlSubscription?.unsubscribe(),this.chatDetailsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hn),c.Y36(DR))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:10,consts:[[1,"app",3,"ngClass"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,fX,1,0,"router-outlet",1),c.YNc(2,pX,1,0,"app-header-mobile",1),c.YNc(3,gX,1,0,"aside-menu",1),c.YNc(4,mX,2,0,"main",2),c.YNc(5,_X,1,0,"menu-mobile",1),c.qZA()),2&r&&(c.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),c.Q6J("ngClass",c.VKq(8,yX,i.isChatDetailsShown)),c.xp6(1),c.Q6J("ngIf","/login"===i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown))},dependencies:[Qr,gn,pf,nX,uX,hX],styles:["[_nghost-%COMP%]   .app[_ngcontent-%COMP%]{position:relative}"]})}return n})();class jS{}class $S{}class Nc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Nc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Nc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Nc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===s.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class CX{encodeKey(e){return HB(e)}encodeValue(e){return HB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bX=/%(\d[a-f0-9])/gi,IX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HB(n){return encodeURIComponent(n).replace(bX,(e,t)=>IX[t]??e)}function HS(n){return`${n}`}class ch{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new CX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,f]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(f),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(HS):[HS(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ch({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class EX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function GB(n){return typeof Blob<"u"&&n instanceof Blob}function qB(n){return typeof FormData<"u"&&n instanceof FormData}class jI{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function TX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Nc),this.context||(this.context=new EX),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new ch,this.urlWithParams=t}serializeBody(){return null===this.body?null:zB(this.body)||GB(this.body)||qB(this.body)||function MX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ch?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qB(this.body)?null:GB(this.body)?this.body.type||null:zB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ch?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((T,S)=>T.set(S,e.setHeaders[S]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,S)=>T.set(S,e.setParams[S]),y)),new jI(t,r,s,{params:y,headers:p,context:I,reportProgress:f,responseType:i,withCredentials:u})}}var hv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(hv||{});class SR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Nc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class PR extends SR{constructor(e={}){super(e),this.type=hv.ResponseHeader}clone(e={}){return new PR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class fv extends SR{constructor(e={}){super(e),this.type=hv.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new fv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ZB extends SR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function AR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let DX=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof jI)s=t;else{let p,y;p=i.headers instanceof Nc?i.headers:new Nc(i.headers),i.params&&(y=i.params instanceof ch?i.params:new ch({fromObject:i.params})),s=new jI(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,ut.of)(s).pipe(Ns(p=>this.handler.handle(p)));if(t instanceof jI||"events"===i.observe)return u;const f=u.pipe(Cr(p=>p instanceof fv));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return f.pipe((0,yt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return f.pipe((0,yt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return f.pipe((0,yt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return f.pipe((0,yt.U)(p=>p.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ch).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,AR(i,r))}post(t,r,i={}){return this.request("POST",t,AR(i,r))}put(t,r,i={}){return this.request("PUT",t,AR(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(jS))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function YB(n,e){return e(n)}function PX(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const xX=new c.OlP(""),$I=new c.OlP(""),QB=new c.OlP("");function OX(){let n=null;return(e,t)=>{null===n&&(n=((0,c.f3M)(xX,{optional:!0})??[]).reduceRight(PX,YB));const r=(0,c.f3M)(c.HDt),i=r.add();return n(e,t).pipe(cc(()=>r.remove(i)))}}let JB=(()=>{class n extends jS{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,c.f3M)(c.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get($I),...this.injector.get(QB,[])]));this.chain=i.reduceRight((s,u)=>function AX(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,u,this.injector),YB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(cc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG($S),c.LFG(c.lqb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const FX=/^\)\]\}',?\n/;let eV=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new c.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,_n.D)(r.\u0275loadImpl()):(0,ut.of)(null)).pipe((0,Mn.w)(()=>new _i.y(s=>{const u=r.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((Q,J)=>u.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&u.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();u.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let p=null;const y=()=>{if(null!==p)return p;const Q=u.statusText||"OK",J=new Nc(u.getAllResponseHeaders()),Ee=function LX(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||t.url;return p=new PR({headers:J,status:u.status,statusText:Q,url:Ee}),p},I=()=>{let{headers:Q,status:J,statusText:Ee,url:ze}=y(),Ne=null;204!==J&&(Ne=typeof u.response>"u"?u.responseText:u.response),0===J&&(J=Ne?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ne){const gt=Ne;Ne=Ne.replace(FX,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(Pt){Ne=gt,Ye&&(Ye=!1,Ne={error:Pt,text:Ne})}}Ye?(s.next(new fv({body:Ne,headers:Q,status:J,statusText:Ee,url:ze||void 0})),s.complete()):s.error(new ZB({error:Ne,headers:Q,status:J,statusText:Ee,url:ze||void 0}))},T=Q=>{const{url:J}=y(),Ee=new ZB({error:Q,status:u.status||0,statusText:u.statusText||"Unknown Error",url:J||void 0});s.error(Ee)};let S=!1;const N=Q=>{S||(s.next(y()),S=!0);let J={type:hv.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&u.responseText&&(J.partialText=u.responseText),s.next(J)},q=Q=>{let J={type:hv.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),s.next(J)};return u.addEventListener("load",I),u.addEventListener("error",T),u.addEventListener("timeout",T),u.addEventListener("abort",T),t.reportProgress&&(u.addEventListener("progress",N),null!==f&&u.upload&&u.upload.addEventListener("progress",q)),u.send(f),s.next({type:hv.Sent}),()=>{u.removeEventListener("error",T),u.removeEventListener("abort",T),u.removeEventListener("load",I),u.removeEventListener("timeout",T),t.reportProgress&&(u.removeEventListener("progress",N),null!==f&&u.upload&&u.upload.removeEventListener("progress",q)),u.readyState!==u.DONE&&u.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Eo))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const xR=new c.OlP("XSRF_ENABLED"),tV=new c.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nV=new c.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rV{}let VX=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Za(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(be),c.LFG(c.Lbi),c.LFG(tV))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function jX(n,e){const t=n.url.toLowerCase();if(!(0,c.f3M)(xR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,c.f3M)(rV).getToken(),i=(0,c.f3M)(nV);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var lh=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(lh||{});function $X(...n){const e=[DX,eV,JB,{provide:jS,useExisting:JB},{provide:$S,useExisting:eV},{provide:$I,useValue:jX,multi:!0},{provide:xR,useValue:!0},{provide:rV,useClass:VX}];for(const t of n)e.push(...t.\u0275providers);return(0,c.MR2)(e)}const iV=new c.OlP("LEGACY_INTERCEPTOR_FN");function HX(){return function Ig(n,e){return{\u0275kind:n,\u0275providers:e}}(lh.LegacyInterceptors,[{provide:iV,useFactory:OX},{provide:$I,useExisting:iV,multi:!0}])}let zX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[$X(HX())]})}return n})();class OR{constructor(e){return e}}class GS{constructor(){return Fo("auth")}}const kR=new c.OlP("angularfire2.auth-instances");function QX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OR(r)}}const JX={provide:GS,deps:[[new c.FiY,kR]]},XX={provide:OR,useFactory:function YX(n,e){const t=Ul("auth",n,e);return t&&new OR(t)},deps:[[new c.FiY,kR],cu]};let eee=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Ll.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[XX,JX]}),n})();function tee(n,...e){return{ngModule:eee,providers:[{provide:kR,useFactory:QX(n),multi:!0,deps:[c.R0b,c.zs3,Bl,rv,[new c.FiY,pg],...e]}]}}const nee=xd($5.o,!0);class NR{constructor(e){return e}}const sV="firestore",RR=new c.OlP("angularfire2.firestore-instances");function oee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new NR(r)}}const see={provide:class ree{constructor(){return Fo(sV)}},deps:[[new c.FiY,RR]]},aee={provide:NR,useFactory:function iee(n,e){const t=Ul(sV,n,e);return t&&new NR(t)},deps:[[new c.FiY,RR],cu]};let cee=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Ll.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aee,see]}),n})();function lee(n,...e){return{ngModule:cee,providers:[{provide:RR,useFactory:oee(n),multi:!0,deps:[c.R0b,c.zs3,Bl,rv,[new c.FiY,GS],[new c.FiY,pg],...e]}]}}const uee=xd(e$,!0),aV="@firebase/database";let FR="";class hee{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class fee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const lV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hee(e)}}catch{}return new fee},Eg=lV("localStorage"),LR=lV("sessionStorage"),pv=new Ri.Yd("@firebase/database"),uV=function(){let n=1;return function(){return n++}}(),dV=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},HI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=HI.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let Tg=null,hV=!0;const Mi=function(...n){if(!0===hV&&(hV=!1,null===Tg&&!0===LR.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(pv.logLevel=Ri.in.VERBOSE,Tg=pv.log.bind(pv),e&&LR.set("logging_enabled",!0)):"function"==typeof n?Tg=n:(Tg=null,LR.remove("logging_enabled"))}(!0)),Tg){const e=HI.apply(null,n);Tg(e)}},zI=function(n){return function(...e){Mi(n,...e)}},UR=function(...n){const e="FIREBASE INTERNAL ERROR: "+HI(...n);pv.error(e)},Rc=function(...n){const e=`FIREBASE FATAL ERROR: ${HI(...n)}`;throw pv.error(e),new Error(e)},oo=function(...n){const e="FIREBASE WARNING: "+HI(...n);pv.warn(e)},qS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},uh="[MIN_NAME]",du="[MAX_NAME]",Mg=function(n,e){if(n===e)return 0;if(n===uh||e===du)return-1;if(e===uh||n===du)return 1;{const t=mV(n),r=mV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},mee=function(n,e){return n===e?0:n<e?-1:1},GI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},BR=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=BR(n[e[r]]);return t+="}",t},pV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const gV=function(n){(0,z.hu)(!qS(n),"Invalid JSON number");const r=1023;let i,s,u,f,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const I=y.join("");let T="";for(p=0;p<64;p+=8){let S=parseInt(I.substr(p,8),2).toString(16);1===S.length&&(S="0"+S),T+=S}return T.toLowerCase()},Cee=new RegExp("^-?(0*)\\d{1,10}$"),mV=function(n){if(Cee.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},gv=function(n){try{n()}catch(e){setTimeout(()=>{throw oo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},qI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Eee{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){oo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Tee{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oo(e)}}let ZI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EV="websocket",TV="long_polling";class jR{constructor(e,t,r,i,s=!1,u="",f=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Eg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Eg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function MV(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===EV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==TV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Mee(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Di(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class Dee{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const $R={},HR={};function zR(n){const e=n.toString();return $R[e]||($R[e]=new Dee),$R[e]}class Pee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&gv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class dh{constructor(e,t,r,i,s,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zI(e),this.stats_=zR(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),MV(t,TV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Pee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new GR((...s)=>{const[u,f,p,y,I]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,f]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dh.forceAllow_=!0}static forceDisallow(){dh.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!dh.forceAllow_&&(dh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=pV(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class GR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=GR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Mi("frame writing exception"),f.stack&&Mi(f.stack),Mi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Mi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let WS=null;typeof MozWebSocket<"u"?WS=MozWebSocket:typeof WebSocket<"u"&&(WS=WebSocket);let mv=(()=>{class n{constructor(t,r,i,s,u,f,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zI(this.connId),this.stats_=zR(r),this.connURL=n.connectionURL_(r,f,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&wV.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),s&&(f.ac=s),u&&(f.p=u),MV(t,EV,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Eg.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${FR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new WS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==WS&&!n.forceDisallow_}static previouslyFailed(){return Eg.isInMemoryStorage||!0===Eg.get("previous_websocket_failure")}markConnectionHealthy(){Eg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=pV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),kV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[dh,mv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=mv&&mv.isAvailable();let i=r&&!mv.previouslyFailed();if(t.webSocketOnly&&(r||oo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mv];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class VV{constructor(e,t,r,i,s,u,f,p,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zI("c:"+this.id+":"),this.transportManager_=new kV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=GI("t",e),r=GI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=GI("t",e),r=GI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=GI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?UR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&oo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Eg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class $V{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class KS extends $V{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KS}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function un(){return new Cn("")}function zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hh(n){return n.pieces_.length-n.pieceNum_}function kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function ZR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function WI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function GV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function or(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function Gt(n){return n.pieceNum_>=n.pieces_.length}function vo(n,e){const t=zt(n),r=zt(e);if(null===t)return e;if(t===r)return vo(kn(n),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WR(n,e){if(hh(n)!==hh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function oa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(hh(n)>hh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Jee{constructor(e,t){this.errorPrefix_=t,this.parts_=WI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);qV(this)}}function qV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dg(n))}function Dg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class KR extends $V{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new KR}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KI=1e3;let QS,Sg=(()=>{class n extends jV{constructor(t,r,i,s,u,f,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&KS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,z.Wl)(u)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new z.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const p=f.d;"ok"===f.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,I=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(i,s),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();oo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,f=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{s&&setTimeout(()=>{s(f.s,f.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):UR("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,R.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let p=!1,y=null;const I=function(){y?y.close():(p=!0,s())};t.realtime_={close:I,sendRequest:function(N){(0,z.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,q]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);p?Mi("getToken() completed but was canceled"):(Mi("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=q&&q.token,y=new VV(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Q=>{oo(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(N){t.log_("Failed to get token: "+N),p||(t.repoInfo_.nodeAdmin&&oo(N),I())}}})()}interrupt(t){Mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>BR(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+FR.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=KS.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class YS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(uh,e),i=new Wt(uh,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class KV extends YS{static get __EMPTY_NODE(){return QS}static set __EMPTY_NODE(e){QS=e}compare(e,t){return Mg(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(du,QS)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,QS)}toString(){return".key"}}const Fc=new KV;class JS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let QR,ja=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??jo.EMPTY_NODE,this.right=u??jo.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return jo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return jo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class jo{constructor(e,t=jo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new jo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ja.BLACK,null,null))}remove(e){return new jo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ja.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new JS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new JS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new JS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new JS(this.root_,null,this.comparator_,!0,e)}}function ste(n,e){return Mg(n.name,e.name)}function YR(n,e){return Mg(n,e)}jo.EMPTY_NODE=new class ote{copy(e,t,r,i,s){return this}insert(e,t,r){return new ja(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YV=function(n){return"number"==typeof n?"number:"+gV(n):"string:"+n},QV=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===QR||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===QR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JV,XV,e9,_v=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),QV(this.priorityNode_)}static set __childrenNodeConstructor(t){JV=t}static get __childrenNodeConstructor(){return JV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Gt(t)?this:".priority"===zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===hh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+YV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?gV(this.value_):this.value_,this.lazyHash_=dV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(s>=0,"Unknown leaf type: "+r),(0,z.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class ute extends YS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Mg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(du,new _v("[PRIORITY-POST]",e9))}makePost(e,t){const r=XV(e);return new Wt(t,new _v("[PRIORITY-POST]",r))}toString(){return".priority"}},dte=Math.log(2);class hte{constructor(e){this.count=parseInt(Math.log(e+1)/dte,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XS=function(n,e,t,r){n.sort(e);const i=function(p,y){const I=y-p;let T,S;if(0===I)return null;if(1===I)return T=n[p],S=t?t(T):T,new ja(S,T.node,ja.BLACK,null,null);{const N=parseInt(I/2,10)+p,q=i(p,N),Q=i(N+1,y);return T=n[N],S=t?t(T):T,new ja(S,T.node,ja.BLACK,q,Q)}},f=function(p){let y=null,I=null,T=n.length;const S=function(q,Q){const J=T-q,Ee=T;T-=q;const ze=i(J+1,Ee),Ne=n[J],Ye=t?t(Ne):Ne;N(new ja(Ye,Ne.node,Q,null,ze))},N=function(q){y?(y.left=q,y=q):(I=q,y=q)};for(let q=0;q<p.count;++q){const Q=p.nextBitIsOne(),J=Math.pow(2,p.count-(q+1));Q?S(J,ja.BLACK):(S(J,ja.BLACK),S(J,ja.RED))}return I}(new hte(n.length));return new jo(r||e,f)};let JR;const yv={};class hu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(yv&&zn,"ChildrenNode.ts has not been loaded"),JR=JR||new hu({".priority":yv},{".priority":zn}),JR}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jo?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==Fc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Wt.Wrap);let f,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();f=i?XS(r,e.getCompare()):yv;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const I=Object.assign({},this.indexes_);return I[p]=f,new hu(I,y)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,s)=>{const u=(0,z.DV)(this.indexSet_,s);if((0,z.hu)(u,"Missing index implementation for "+s),i===yv){if(u.isDefinedOn(e.node)){const f=[],p=t.getIterator(Wt.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&f.push(y),y=p.getNext();return f.push(e),XS(f,u.getCompare())}return yv}{const f=t.get(e.name);let p=i;return f&&(p=p.remove(new Wt(e.name,f))),p.insert(e,e.node)}});return new hu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===yv)return i;{const s=t.get(e.name);return s?i.remove(new Wt(e.name,s)):i}});return new hu(r,this.indexSet_)}}let YI,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QV(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YI||(YI=new n(new jo(YR),null,hu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?YI:r}}getChild(t){const r=zt(t);return null===r?this:this.getImmediateChild(r).getChild(kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=s.isEmpty()?YI:this.priorityNode_;return new n(s,f,u)}}updateChild(t,r){const i=zt(t);if(null===i)return r;{(0,z.hu)(".priority"!==zt(t)||1===hh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(kn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(zn,(f,p)=>{r[f]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?s=Math.max(s,Number(f)):u=!1}),!t&&u&&s<2*i){const f=[];for(const p in r)f[p]=r[p];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+YV(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":dV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new Wt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Wt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===QI?-1:0}withIndex(t){if(t===Fc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),s=r.getIterator(zn);let u=i.getNext(),f=s.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=s.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===Fc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const QI=new class fte extends Ot{constructor(){super(new jo(YR),Ot.EMPTY_NODE,hu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Wt,{MIN:{value:new Wt(uh,Ot.EMPTY_NODE)},MAX:{value:new Wt(du,QI)}}),KV.__EMPTY_NODE=Ot.EMPTY_NODE,_v.__childrenNodeConstructor=Ot,function ate(n){QR=n}(QI),function lte(n){e9=n}(QI);const pte=!0;function gr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new _v(n,gr(e));if(n instanceof Array||!pte){let t=Ot.EMPTY_NODE;return Di(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const s=gr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(gr(e))}{const t=[];let r=!1;if(Di(n,(u,f)=>{if("."!==u.substring(0,1)){const p=gr(f);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Wt(u,p)))}}),0===t.length)return Ot.EMPTY_NODE;const s=XS(t,ste,u=>u.name,YR);if(r){const u=XS(t,zn.getCompare());return new Ot(s,gr(e),new hu({".priority":u},{".priority":zn}))}return new Ot(s,gr(e),hu.Default)}}!function cte(n){XV=n}(gr);class XR extends YS{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!Gt(e)&&".priority"!==zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Mg(e.name,t.name):s}makePost(e,t){const r=gr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,QI);return new Wt(du,e)}toString(){return WI(this.indexPath_,0).join("/")}}const eF=new class gte extends YS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=gr(e);return new Wt(t,r)}toString(){return".value"}};function XI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class nF{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new nF;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function n9(n){const e={};if(n.isDefault())return e;let t;if(n.index_===zn?t="$priority":n.index_===eF?t="$value":n.index_===Fc?t="$key":((0,z.hu)(n.index_ instanceof XR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function r9(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class tP extends jV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=tP.getListenId_(e,r),f={};this.listens_[u]=f;const p=n9(e._queryParams);this.restRequest_(s+".json",p,(y,I)=>{let T=I;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,r),(0,z.DV)(this.listens_,u)===f){let S;S=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(S,null)}})}unlisten(e,t){const r=tP.getListenId_(e,t);delete this.listens_[r]}get(e){const t=n9(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(s,u)=>{let f=u;404===s&&(f=null,s=null),null===s?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let p=null;if(f.status>=200&&f.status<300){try{p=(0,z.cI)(f.responseText)}catch{oo("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,p)}else 401!==f.status&&404!==f.status&&oo("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class Ite{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nP(){return{value:null,children:new Map}}function Cv(n,e,t){if(Gt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=zt(e);n.children.has(r)||n.children.set(r,nP()),Cv(n.children.get(r),e=kn(e),t)}}function sF(n,e,t){null!==n.value?t(e,n.value):function Ete(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{sF(i,new Cn(e.toString()+"/"+r),t)})}class Tte{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Di(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Ste{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tte(e);const r=1e4+2e4*Math.random();qI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Di(e,(i,s)=>{s>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),qI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Lc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Lc||{});function lF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class rP{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Lc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gt(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new rP(un(),t,this.revert)}}return(0,z.hu)(zt(this.path)===e,"operationForChild called for unrelated child."),new rP(kn(this.path),this.affectedTree,this.revert)}}class Pg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Lc.OVERWRITE}operationForChild(e){return Gt(this.path)?new Pg(this.source,un(),this.snap.getImmediateChild(e)):new Pg(this.source,kn(this.path),this.snap)}}class wv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Lc.MERGE}operationForChild(e){if(Gt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new Pg(this.source,un(),t.value):new wv(this.source,un(),t)}return(0,z.hu)(zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wv(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gt(e))return this.isFullyInitialized()&&!this.filtered_;const t=zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function n1(n,e,t,r,i,s){const u=r.filter(f=>f.type===t);u.sort((f,p)=>function Ote(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,p)),u.forEach(f=>{const p=function xte(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,s);i.forEach(y=>{y.respondsTo(f.type)&&e.push(y.createEvent(p,n.query_))})})}function iP(n,e){return{eventCache:n,serverCache:e}}function r1(n,e,t,r){return iP(new fh(e,t,r),n.serverCache)}function o9(n,e,t,r){return iP(n.eventCache,new fh(e,t,r))}function oP(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ag(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let uF;class Gn{constructor(e,t=(()=>(uF||(uF=new jo(mee)),uF))()){this.value=e,this.children=t}static fromObject(e){let t=new Gn(null);return Di(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:un(),value:this.value};if(Gt(e))return null;{const r=zt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(kn(e),t);return null!=s?{path:or(new Cn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Gt(e))return this;{const t=zt(e),r=this.children.get(t);return null!==r?r.subtree(kn(e)):new Gn(null)}}set(e,t){if(Gt(e))return new Gn(t,this.children);{const r=zt(e),s=(this.children.get(r)||new Gn(null)).set(kn(e),t),u=this.children.insert(r,s);return new Gn(this.value,u)}}remove(e){if(Gt(e))return this.children.isEmpty()?new Gn(null):new Gn(null,this.children);{const t=zt(e),r=this.children.get(t);if(r){const i=r.remove(kn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Gn(null):new Gn(this.value,s)}return this}}get(e){if(Gt(e))return this.value;{const t=zt(e),r=this.children.get(t);return r?r.get(kn(e)):null}}setTree(e,t){if(Gt(e))return t;{const r=zt(e),s=(this.children.get(r)||new Gn(null)).setTree(kn(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Gn(this.value,u)}}fold(e){return this.fold_(un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(or(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Gt(e))return null;{const s=zt(e),u=this.children.get(s);return u?u.findOnPath_(kn(e),or(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,un(),t)}foreachOnPath_(e,t,r){if(Gt(e))return this;{this.value&&r(t,this.value);const i=zt(e),s=this.children.get(i);return s?s.foreachOnPath_(kn(e),or(t,i),r):new Gn(null)}}foreach(e){this.foreach_(un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(or(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class $a{constructor(e){this.writeTree_=e}static empty(){return new $a(new Gn(null))}}function o1(n,e,t){if(Gt(e))return new $a(new Gn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=vo(i,e);return s=s.updateChild(u,t),new $a(n.writeTree_.set(i,s))}{const i=new Gn(t),s=n.writeTree_.setTree(e,i);return new $a(s)}}}function dF(n,e,t){let r=n;return Di(t,(i,s)=>{r=o1(r,or(e,i),s)}),r}function s9(n,e){if(Gt(e))return $a.empty();{const t=n.writeTree_.setTree(e,new Gn(null));return new $a(t)}}function hF(n,e){return null!=xg(n,e)}function xg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(vo(t.path,e)):null}function a9(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function ph(n,e){if(Gt(e))return n;{const t=xg(n,e);return new $a(null!=t?new Gn(t):n.writeTree_.subtree(e))}}function fF(n){return n.writeTree_.isEmpty()}function bv(n,e){return c9(un(),n.writeTree_,e)}function c9(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,z.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=c9(or(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(or(n,".priority"),r)),t}}function sP(n,e){return f9(e,n)}function Ute(n,e){if(n.snap)return oa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&oa(or(n.path,t),e))return!0;return!1}function Vte(n){return n.visible}function l9(n,e,t){let r=$a.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let f;if(s.snap)oa(t,u)?(f=vo(t,u),r=o1(r,f,s.snap)):oa(u,t)&&(f=vo(u,t),r=o1(r,un(),s.snap.getChild(f)));else{if(!s.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(oa(t,u))f=vo(t,u),r=dF(r,f,s.children);else if(oa(u,t))if(f=vo(u,t),Gt(f))r=dF(r,un(),s.children);else{const p=(0,z.DV)(s.children,zt(f));if(p){const y=p.getChild(kn(f));r=o1(r,un(),y)}}}}}return r}function u9(n,e,t,r,i){if(r||i){const s=ph(n.visibleWrites,e);return!i&&fF(s)?t:i||null!=t||hF(s,un())?bv(l9(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(oa(y.path,e)||oa(e,y.path))},e),t||Ot.EMPTY_NODE):null}{const s=xg(n.visibleWrites,e);if(null!=s)return s;{const u=ph(n.visibleWrites,e);return fF(u)?t:null!=t||hF(u,un())?bv(u,t||Ot.EMPTY_NODE):null}}}function aP(n,e,t,r){return u9(n.writeTree,n.treePath,e,t,r)}function pF(n,e){return function jte(n,e,t){let r=Ot.EMPTY_NODE;const i=xg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=ph(n.visibleWrites,e);return t.forEachChild(zn,(u,f)=>{const p=bv(ph(s,new Cn(u)),f);r=r.updateImmediateChild(u,p)}),a9(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return a9(ph(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function d9(n,e,t,r){return function $te(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=or(e,t);if(hF(n.visibleWrites,s))return null;{const u=ph(n.visibleWrites,s);return fF(u)?i.getChild(t):bv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cP(n,e){return function zte(n,e){return xg(n.visibleWrites,e)}(n.writeTree,or(n.treePath,e))}function gF(n,e,t){return function Hte(n,e,t,r){const i=or(e,t),s=xg(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?bv(ph(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function h9(n,e){return f9(or(n.treePath,e),n.writeTree)}function f9(n,e){return{treePath:n,writeTree:e}}class Wte{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,XI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function JI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function vv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,XI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const p9=new class Kte{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class mF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new fh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ag(this.viewCache_),s=function Zte(n,e,t,r,i,s){return function Gte(n,e,t,r,i,s,u){let f;const p=ph(n.visibleWrites,e),y=xg(p,un());if(null!=y)f=y;else{if(null==t)return[];f=bv(p,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const I=[],T=u.getCompare(),S=s?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let N=S.getNext();for(;N&&I.length<i;)0!==T(N,r)&&I.push(N),N=S.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function g9(n,e,t,r,i,s){const u=e.eventCache;if(null!=cP(r,t))return e;{let f,p;if(Gt(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Ag(e),T=pF(r,y instanceof Ot?y:Ot.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=aP(r,Ag(e));f=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=zt(t);if(".priority"===y){(0,z.hu)(1===hh(t),"Can't have a priority with additional path components");const I=u.getNode();p=e.serverCache.getNode();const T=d9(r,t,I,p);f=null!=T?n.filter.updatePriority(I,T):u.getNode()}else{const I=kn(t);let T;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const S=d9(r,t,u.getNode(),p);T=null!=S?u.getNode().getImmediateChild(y).updateChild(I,S):u.getNode().getImmediateChild(y)}else T=gF(r,y,e.serverCache);f=null!=T?n.filter.updateChild(u.getNode(),y,T,I,i,s):u.getNode()}}return r1(e,f,u.isFullyInitialized()||Gt(t),n.filter.filtersNodes())}}function lP(n,e,t,r,i,s,u,f){const p=e.serverCache;let y;const I=u?n.filter:n.filter.getIndexedFilter();if(Gt(t))y=I.updateFullNode(p.getNode(),r,null);else if(I.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(t,r);y=I.updateFullNode(p.getNode(),N,null)}else{const N=zt(t);if(!p.isCompleteForPath(t)&&hh(t)>1)return e;const q=kn(t),J=p.getNode().getImmediateChild(N).updateChild(q,r);y=".priority"===N?I.updatePriority(p.getNode(),J):I.updateChild(p.getNode(),N,J,q,p9,null)}const T=o9(e,y,p.isFullyInitialized()||Gt(t),I.filtersNodes());return g9(n,T,t,i,new mF(i,T,s),f)}function _F(n,e,t,r,i,s,u){const f=e.eventCache;let p,y;const I=new mF(i,e,s);if(Gt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=r1(e,y,!0,n.filter.filtersNodes());else{const T=zt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=r1(e,y,f.isFullyInitialized(),f.isFiltered());else{const S=kn(t),N=f.getNode().getImmediateChild(T);let q;if(Gt(S))q=r;else{const Q=I.getCompleteChild(T);q=null!=Q?".priority"===ZR(S)&&Q.getChild(GV(S)).isEmpty()?Q:Q.updateChild(S,r):Ot.EMPTY_NODE}p=N.equals(q)?e:r1(e,n.filter.updateChild(f.getNode(),T,q,S,I,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return p}function m9(n,e){return n.eventCache.isCompleteForChild(e)}function _9(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function yF(n,e,t,r,i,s,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Gt(t)?r:new Gn(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((T,S)=>{if(I.hasChild(T)){const q=_9(0,e.serverCache.getNode().getImmediateChild(T),S);p=lP(n,p,new Cn(T),q,i,s,u,f)}}),y.children.inorderTraversal((T,S)=>{const N=!e.serverCache.isCompleteForChild(T)&&null===S.value;if(!I.hasChild(T)&&!N){const Q=_9(0,e.serverCache.getNode().getImmediateChild(T),S);p=lP(n,p,new Cn(T),Q,i,s,u,f)}}),p}function ane(n,e){const t=Ag(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Gt(e)&&!t.getImmediateChild(zt(e)).isEmpty())?t.getChild(e):null}function C9(n,e,t,r){e.type===Lc.MERGE&&null!==e.source.queryId&&((0,z.hu)(Ag(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(oP(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Jte(n,e,t,r,i){const s=new Wte;let u,f;if(t.type===Lc.OVERWRITE){const y=t;y.source.fromUser?u=_F(n,e,y.path,y.snap,r,i,s):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered()&&!Gt(y.path),u=lP(n,e,y.path,y.snap,r,i,f,s))}else if(t.type===Lc.MERGE){const y=t;y.source.fromUser?u=function ene(n,e,t,r,i,s,u){let f=e;return r.foreach((p,y)=>{const I=or(t,p);m9(e,zt(I))&&(f=_F(n,f,I,y,i,s,u))}),r.foreach((p,y)=>{const I=or(t,p);m9(e,zt(I))||(f=_F(n,f,I,y,i,s,u))}),f}(n,e,y.path,y.children,r,i,s):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered(),u=yF(n,e,y.path,y.children,r,i,f,s))}else if(t.type===Lc.ACK_USER_WRITE){const y=t;u=y.revert?function rne(n,e,t,r,i,s){let u;if(null!=cP(r,t))return e;{const f=new mF(r,e,i),p=e.eventCache.getNode();let y;if(Gt(t)||".priority"===zt(t)){let I;if(e.serverCache.isFullyInitialized())I=aP(r,Ag(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof Ot,"serverChildren would be complete if leaf node"),I=pF(r,T)}y=n.filter.updateFullNode(p,I,s)}else{const I=zt(t);let T=gF(r,I,e.serverCache);null==T&&e.serverCache.isCompleteForChild(I)&&(T=p.getImmediateChild(I)),y=null!=T?n.filter.updateChild(p,I,T,kn(t),f,s):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,Ot.EMPTY_NODE,kn(t),f,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=aP(r,Ag(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=cP(r,un()),r1(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function tne(n,e,t,r,i,s,u){if(null!=cP(i,t))return e;const f=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Gt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return lP(n,e,t,p.getNode().getChild(t),i,s,f,u);if(Gt(t)){let y=new Gn(null);return p.getNode().forEachChild(Fc,(I,T)=>{y=y.set(new Cn(I),T)}),yF(n,e,t,y,i,s,f,u)}return e}{let y=new Gn(null);return r.foreach((I,T)=>{const S=or(t,I);p.isCompleteForPath(S)&&(y=y.set(I,p.getNode().getChild(S)))}),yF(n,e,t,y,i,s,f,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Lc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);u=function nne(n,e,t,r,i){const s=e.serverCache;return g9(n,o9(e,s.getNode(),s.isFullyInitialized()||Gt(t),s.isFiltered()),t,r,p9,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function Xte(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oP(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function t9(n){return{type:"value",snapshotNode:n}}(oP(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function Qte(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,z.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function w9(n,e,t,r){return function Ate(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function mte(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),n1(n,i,"child_removed",e,r,t),n1(n,i,"child_added",e,r,t),n1(n,i,"child_moved",s,r,t),n1(n,i,"child_changed",e,r,t),n1(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let uP,hP;function vF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,z.hu)(null!=s,"SyncTree gave us an op for an invalid query."),C9(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(C9(u,e,t,r));return s}}function gh(n,e){let t=null;for(const r of n.views.values())t=t||ane(r,e);return t}class D9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gn(null),this.pendingWriteTree_=function qte(){return{visibleWrites:$a.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CF(n,e,t,r,i){return function Nte(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=o1(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Iv(n,new Pg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _h(n,e,t=!1){const r=function Fte(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Lte(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&Ute(f,r.path)?i=!1:oa(r.path,f.path)&&(s=!0)),u--}return!!i&&(s?(function Bte(n){n.visibleWrites=l9(n.allWrites,Vte,un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=s9(n.visibleWrites,r.path):Di(r.children,p=>{n.visibleWrites=s9(n.visibleWrites,or(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Gn(null);return null!=r.snap?s=s.set(un(),!0):Di(r.children,u=>{s=s.set(new Cn(u),!0)}),Iv(n,new rP(r.path,s,t))}return[]}function s1(n,e,t){return Iv(n,new Pg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pP(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,f)=>{const y=gh(f,vo(u,e));if(y)return y});return u9(i,e,s,t,!0)}function Iv(n,e){return P9(e,n.syncPointTree_,null,sP(n.pendingWriteTree_,un()))}function P9(n,e,t,r){if(Gt(n.path))return A9(n,e,t,r);{const i=e.get(un());null==t&&null!=i&&(t=gh(i,un()));let s=[];const u=zt(n.path),f=n.operationForChild(u),p=e.children.get(u);if(p&&f){const y=t?t.getImmediateChild(u):null,I=h9(r,u);s=s.concat(P9(f,p,y,I))}return i&&(s=s.concat(vF(i,n,r,t))),s}}function A9(n,e,t,r){const i=e.get(un());null==t&&null!=i&&(t=gh(i,un()));let s=[];return e.children.inorderTraversal((u,f)=>{const p=t?t.getImmediateChild(u):null,y=h9(r,u),I=n.operationForChild(u);I&&(s=s.concat(A9(I,f,p,y)))}),i&&(s=s.concat(vF(i,n,r,t))),s}function bF(n,e){return n.tagToQueryMap.get(e)}function IF(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function EF(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),vF(r,t,sP(n.pendingWriteTree_,e),null)}class TF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new TF(t)}node(){return this.node_}}class MF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=or(this.path_,e);return new MF(this.syncTree_,t)}node(){return pP(this.syncTree_,this.path_)}}const Sne=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},O9=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Pne(n[".sv"],e,t):"object"==typeof n[".sv"]?Ane(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Pne=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},Ane=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},k9=function(n,e,t,r){return SF(e,new MF(t,n),r)},DF=function(n,e,t){return SF(n,new TF(e),t)};function SF(n,e,t){const r=n.getPriority().val(),i=O9(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,f=O9(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new _v(f,gr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new _v(i))),u.forEachChild(zn,(f,p)=>{const y=SF(p,e.getImmediateChild(f),t);y!==p&&(s=s.updateImmediateChild(f,y))}),s}}class PF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function mP(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=zt(t);for(;null!==i;){const s=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new PF(i,r,s),t=kn(t),i=zt(t)}return r}function Og(n){return n.node.value}function AF(n,e){n.node.value=e,xF(n)}function N9(n){return n.node.childCount>0}function _P(n,e){Di(n.node.children,(t,r)=>{e(new PF(t,n,r))})}function R9(n,e,t,r){t&&!r&&e(n),_P(n,i=>{R9(i,e,!0,r)}),t&&r&&e(n)}function l1(n){return new Cn(null===n.parent?n.name:l1(n.parent)+"/"+n.name)}function xF(n){null!==n.parent&&function kne(n,e,t){const r=function xne(n){return void 0===Og(n)&&!N9(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xF(n))}(n.parent,n.name,n)}const Nne=/[\[\].#$\/\u0000-\u001F\u007F]/,Rne=/[\[\].#$\u0000-\u001F\u007F]/,OF=10485760,yP=function(n){return"string"==typeof n&&0!==n.length&&!Nne.test(n)},d1=function(n,e,t){const r=t instanceof Cn?new Jee(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Dg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Dg(r)+" with contents = "+e.toString());if(qS(e))throw new Error(n+"contains "+e.toString()+" "+Dg(r));if("string"==typeof e&&e.length>OF/3&&(0,z.ug)(e)>OF)throw new Error(n+"contains a string greater than "+OF+" utf8 bytes "+Dg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Di(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!yP(u)))throw new Error(n+" contains an invalid key ("+u+") "+Dg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Xee(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),qV(n)})(r,u),d1(n,f,r),function ete(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Dg(r)+" in addition to actual children.")}},U9=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!yP(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Rne.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Bne{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ws(n,e,t){(function vP(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!WR(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function V9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Vne(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>oa(r,e)||oa(e,r))}function Vne(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Tg&&Mi("event: "+t.toString()),gv(r)}}}const jne=25;class $ne{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bne,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nP(),this.transactionQueueTree_=new PF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $9(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function f1(n){return Sne({timestamp:$9(n)})}function H9(n,e,t,r,i){n.dataUpdateCount++;const s=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,z.UI)(t,y=>gr(y));u=function bne(n,e,t,r){const i=bF(n,r);if(i){const s=IF(i),u=s.path,f=s.queryId,p=vo(u,e),y=Gn.fromObject(t);return EF(n,u,new wv(lF(f),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=gr(t);u=function S9(n,e,t,r){const i=bF(n,r);if(null!=i){const s=IF(i),u=s.path,f=s.queryId,p=vo(u,e);return EF(n,u,new Pg(lF(f),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,z.UI)(t,y=>gr(y));u=function vne(n,e,t){const r=Gn.fromObject(t);return Iv(n,new wv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=gr(t);u=s1(n.serverSyncTree_,s,p)}let f=s;u.length>0&&(f=Tv(n,s)),ws(n.eventQueue_,f,u)}function z9(n,e){RF(n,"connected",e),!1===e&&function Zne(n){Ev(n,"onDisconnectEvents");const e=f1(n),t=nP();sF(n.onDisconnect_,un(),(i,s)=>{const u=k9(i,s,n.serverSyncTree_,e);Cv(t,i,u)});let r=[];sF(t,un(),(i,s)=>{r=r.concat(s1(n.serverSyncTree_,i,s));const u=function BF(n,e){const t=l1(Z9(n,e)),r=mP(n.transactionQueueTree_,e);return function One(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{VF(n,i)}),VF(n,r),R9(r,i=>{VF(n,i)}),t}(n,i);Tv(n,u)}),n.onDisconnect_=nP(),ws(n.eventQueue_,un(),r)}(n)}function RF(n,e,t){const r=new Cn("/.info/"+e),i=gr(t);n.infoData_.updateSnapshot(r,i);const s=s1(n.infoSyncTree_,r,i);ws(n.eventQueue_,r,s)}function CP(n){return n.nextWriteId_++}function Ev(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Mi(t,...e)}function UF(n,e,t){return pP(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function wP(n,e=n.transactionQueueTree_){if(e||bP(n,e),Og(e)){const t=W9(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function ere(n,e,t){const r=t.map(y=>y.currentWriteId),i=UF(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,z.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=vo(e,I.path);s=s.updateChild(T,I.currentOutputSnapshotRaw)}const f=s.val(!0),p=e;n.server_.put(p.toString(),f,y=>{Ev(n,"transaction put response",{path:p.toString(),status:y});let I=[];if("ok"===y){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,I=I.concat(_h(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();bP(n,mP(n.transactionQueueTree_,e)),wP(n,n.transactionQueueTree_),ws(n.eventQueue_,e,I);for(let S=0;S<T.length;S++)gv(T[S])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{oo("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}Tv(n,e)}},u)}(n,l1(e),t)}else N9(e)&&_P(e,t=>{wP(n,t)})}function Tv(n,e){const t=Z9(n,e),r=l1(t);return function tre(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const p=e[f],y=vo(t,p.path);let T,I=!1;if((0,z.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,T=p.abortReason,i=i.concat(_h(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=jne)I=!0,T="maxretry",i=i.concat(_h(n.serverSyncTree_,p.currentWriteId,!0));else{const S=UF(n,p.path,u);p.currentInputSnapshot=S;const N=e[f].update(S.val());if(void 0!==N){d1("transaction failed: Data returned ",N,p.path);let q=gr(N);"object"==typeof N&&null!=N&&(0,z.r3)(N,".priority")||(q=q.updatePriority(S.getPriority()));const J=p.currentWriteId,Ee=f1(n),ze=DF(q,S,Ee);p.currentOutputSnapshotRaw=q,p.currentOutputSnapshotResolved=ze,p.currentWriteId=CP(n),u.splice(u.indexOf(J),1),i=i.concat(CF(n.serverSyncTree_,p.path,ze,p.currentWriteId,p.applyLocally)),i=i.concat(_h(n.serverSyncTree_,J,!0))}else I=!0,T="nodata",i=i.concat(_h(n.serverSyncTree_,p.currentWriteId,!0))}ws(n.eventQueue_,t,i),i=[],I&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}bP(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)gv(r[f]);wP(n,n.transactionQueueTree_)}(n,W9(n,t),r),r}function Z9(n,e){let t,r=n.transactionQueueTree_;for(t=zt(e);null!==t&&void 0===Og(r);)r=mP(r,t),t=zt(e=kn(e));return r}function W9(n,e){const t=[];return K9(n,e,t),t.sort((r,i)=>r.order-i.order),t}function K9(n,e,t){const r=Og(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);_P(e,i=>{K9(n,i,t)})}function bP(n,e){const t=Og(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,AF(e,t.length>0?t:void 0)}_P(e,r=>{bP(n,r)})}function VF(n,e){const t=Og(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,z.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,z.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(_h(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?AF(e,void 0):t.length=s+1,ws(n.eventQueue_,l1(e),i);for(let u=0;u<r.length;u++)gv(r[u])}}const jF=function(n,e){const t=ire(n),r=t.namespace;return"firebase.com"===t.domain&&Rc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Rc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},ire=function(n){let e="",t="",r="",i="",s="",u=!0,f="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(f=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(I,T)),I<T&&(i=function nre(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,T)));const S=function rre(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):oo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===f||"wss"===f,p=parseInt(e.substring(y+1),10)):y=e.length;const N=e.slice(0,y);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),s=r}"ns"in S&&(s=S.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:s}};class bs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Gt(this._path)?null:ZR(this._path)}get ref(){return new Ha(this._repo,this._path)}get _queryIdentifier(){const e=r9(this._queryParams),t=BR(e);return"{}"===t?"default":t}get _queryObject(){return r9(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof bs))return!1;const t=this._repo===e._repo,r=WR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Yee(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ha extends bs{constructor(e,t){super(e,t,new nF,!1)}get parent(){const e=GV(this._path);return null===e?null:new Ha(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function une(n){(0,z.hu)(!uP,"__referenceConstructor has already been defined"),uP=n})(Ha),function gne(n){(0,z.hu)(!hP,"__referenceConstructor has already been defined"),hP=n}(Ha);const HF={};class Ere{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Hne(n,e,t){if(n.stats_=zR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new tP(n.repoInfo_,(r,i,s,u)=>{H9(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>z9(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Sg(n.repoInfo_,e,(r,i,s,u)=>{H9(n,r,i,s,u)},r=>{z9(n,r)},r=>{!function zne(n,e){Di(e,(t,r)=>{RF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function See(n,e){const t=n.toString();return HR[t]||(HR[t]=e()),HR[t]}(n.repoInfo_,()=>new Ste(n.stats_,n.server_)),n.infoData_=new Ite,n.infoSyncTree_=new D9({startListening:(r,i,s,u)=>{let f=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(f=s1(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),RF(n,"connected",!1),n.serverSyncTree_=new D9({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(f,p)=>{const y=u(f,p);ws(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ha(this._repo,un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wre(n,e){const t=HF[e];(!t||t[n.key]!==n)&&Rc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function q9(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Rc("Cannot call "+e+" on a deleted database.")}}function Tre(n=(0,Sn.getApp)(),e){const t=(0,Sn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function Mre(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Rc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Rc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ZI(ZI.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);s=new ZI(u)}!function vre(n,e,t,r){n.repoInfo_=new jR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}Sg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Sg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Dre(n){(function dee(n){FR=n})(Sn.SDK_VERSION),(0,Sn._registerComponent)(new wr.wA("database",(e,{instanceIdentifier:t})=>function Cre(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Rc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=jF(s,i),f=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${f.namespace}`,u=jF(s,i),f=u.repoInfo):p=!u.repoInfo.secure;const I=i&&p?new ZI(ZI.OWNER):new Tee(n.name,n.options,e);U9("Invalid Firebase Database URL",u),Gt(u.path)||Rc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function bre(n,e,t,r){let i=HF[e.name];i||(i={},HF[e.name]=i);let s=i[n.toURLString()];return s&&Rc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $ne(n,!1,t,r),i[n.toURLString()]=s,s}(f,n,I,new Eee(n.name,t));return new Ere(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)(aV,"0.14.4",n),(0,Sn.registerVersion)(aV,"0.14.4","esm2017")}();class zF{constructor(e){return e}}const i7="database",GF=new c.OlP("angularfire2.database-instances");function Ore(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new zF(r)}}const kre={provide:class Are{constructor(){return Fo(i7)}},deps:[[new c.FiY,GF]]},Nre={provide:zF,useFactory:function xre(n,e){const t=Ul(i7,n,e);return t&&new zF(t)},deps:[[new c.FiY,GF],cu]};let Rre=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Ll.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Nre,kre]}),n})();function Fre(n,...e){return{ngModule:Rre,providers:[{provide:GF,useFactory:Ore(n),multi:!0,deps:[c.R0b,c.zs3,Bl,rv,[new c.FiY,GS],[new c.FiY,pg],...e]}]}}const Lre=xd(Tre,!0);class qF{constructor(e){return e}}const o7="messaging",ZF=new c.OlP("angularfire2.messaging-instances");function Vre(n){return(e,t)=>{if(!gp.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new qF(r)}}const jre={provide:class Ure{constructor(){return Fo(o7)}},deps:[[new c.FiY,ZF]]},$re={provide:qF,useFactory:function Bre(n,e){if(!gp.sync())return null;const t=Ul(o7,n,e);return t&&new qF(t)},deps:[[new c.FiY,ZF],cu]};let Hre=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Ll.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$re,jre,{provide:c.ip1,useValue:gp.async,multi:!0}]}),n})();function zre(n,...e){return{ngModule:Hre,providers:[{provide:ZF,useFactory:Vre(n),multi:!0,deps:[c.R0b,c.zs3,Bl,rv,...e]}]}}const Gre=xd(kT,!0),s7="firebasestorage.googleapis.com";class mr extends z.ZR{constructor(e,t,r=0){super(WF(e),`Firebase Storage: ${t} (${WF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var sr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(sr||{});function WF(n){return"storage/"+n}function YF(n){return new mr(sr.INVALID_ARGUMENT,n)}function d7(){return new mr(sr.APP_DELETED,"The Firebase app was deleted.")}class Co{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Co.makeFromUrl(e,t)}catch{return new Co(e,"")}if(""===r.path)return r;throw function tie(n){return new mr(sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Ne=[{regex:f,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===s7?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<Ne.length;Ye++){const gt=Ne[Ye],Pt=gt.regex.exec(e);if(Pt){let Ho=Pt[gt.indices.path];Ho||(Ho=""),r=new Co(Pt[gt.indices.bucket],Ho),gt.postModify(r);break}}if(null==r)throw function eie(n){return new mr(sr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class aie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JF(n,e,t,r){if(r<e)throw YF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw YF(`Invalid value for '${n}'. Expected ${t} or less.`)}var Dv=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Dv||{});class fie{constructor(e,t,r,i,s,u,f,p,y,I,T,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=T,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,q)=>{this.resolve_=N,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());!function uie(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==f){const p=function KF(){return new mr(sr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,p):p)}else u(i.canceled?this.appDelete_?d7():function l7(){return new mr(sr.CANCELED,"User canceled the upload/download.")}():function c7(){return new mr(sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new DP(!1,null,!0)):this.backoffId_=function cie(n,e,t){let r=1,i=null,s=null,u=!1,f=0;function p(){return 2===f}let y=!1;function I(...J){y||(y=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(N,p())},J)}function S(){s&&clearTimeout(s)}function N(J,...Ee){if(y)return void S();if(J)return S(),void I.call(null,J,...Ee);if(p()||u)return S(),void I.call(null,J,...Ee);let Ne;r<64&&(r*=2),1===f?(f=2,Ne=0):Ne=1e3*(r+Math.random()),T(Ne)}let q=!1;function Q(J){q||(q=!0,S(),!y&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),s=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new DP(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const f=s.getErrorCode()===Dv.NO_ERROR,p=s.getStatus();if(!f||function p7(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}(p,this.additionalRetryCodes_)&&this.retry){const I=s.getErrorCode()===Dv.ABORT;return void r(!1,new DP(!1,null,I))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new DP(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function lie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class DP{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Ng{constructor(e,t){this._service=e,this._location=t instanceof Co?t:Co.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ng(e,t)}get root(){const e=new Co(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function v7(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function Die(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Co(this._location.bucket,e);return new Ng(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function sie(n){return new mr(sr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function N7(n,e){const t=e?.storageBucket;return null==t?null:Co.makeFromBucketSpec(t,n)}class oL{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=s7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Co.makeFromBucketSpec(i,this._host):N7(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Co.makeFromBucketSpec(this._url,e):N7(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,R.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,R.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ng(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new aie(d7());{const u=function yie(n,e,t,r,i,s,u=!0){const f=function f7(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),p=n.url+f,y=Object.assign({},n.headers);return function mie(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function pie(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function gie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function _ie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new fie(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,R.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const R7="@firebase/storage",L7="storage";function hoe(n=Uf(),e){const r=El(n=(0,z.m9)(n),L7).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function foe(n,e,t,r={}){!function doe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function poe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new oL(t,r,i,e,"10.5.0")}!function goe(){Ji(new wr.wA(L7,poe,"PUBLIC").setMultipleInstances(!0)),Fi(R7,"0.11.2",""),Fi(R7,"0.11.2","esm2017")}();class sL{constructor(e){return e}}const U7="storage",aL=new c.OlP("angularfire2.storage-instances");function yoe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sL(r)}}const voe={provide:class moe{constructor(){return Fo(U7)}},deps:[[new c.FiY,aL]]},Coe={provide:sL,useFactory:function _oe(n,e){const t=Ul(U7,n,e);return t&&new sL(t)},deps:[[new c.FiY,aL],cu]};let woe=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Ll.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Coe,voe]}),n})();function boe(n,...e){return{ngModule:woe,providers:[{provide:aL,useFactory:yoe(n),multi:!0,deps:[c.R0b,c.zs3,Bl,rv,[new c.FiY,GS],[new c.FiY,pg],...e]}]}}const Ioe=xd(hoe,!0),cL={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};Fi("firebase","10.5.0","app"),xE(cL.firebase);let Moe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n,bootstrap:[vX]});static#n=this.\u0275inj=c.cJS({providers:[{provide:Xi.Dh,useValue:cL.firebase}],imports:[el,jJ,zX,QY,JY,_H(()=>yH(cL.firebase)),tee(()=>nee()),lee(()=>uee()),boe(()=>Ioe()),Fre(()=>Lre()),zre(()=>Gre())]})}return n})();tm().bootstrapModule(Moe).catch(n=>console.error(n))},5619:(ot,Ie,L)=>{L.d(Ie,{X:()=>V});var c=L(8645);class V extends c.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ge=super._subscribe(ne);return!ge.closed&&ne.next(this._value),ge}getValue(){const{hasError:ne,thrownError:ge,_value:be}=this;if(ne)throw ge;return this._throwIfClosed(),be}next(ne){super.next(this._value=ne)}}},5592:(ot,Ie,L)=>{L.d(Ie,{y:()=>Fe});var c=L(305),V=L(7394),U=L(4850),ne=L(8407),ge=L(2653),be=L(4674),xe=L(1441);let Fe=(()=>{class X{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Je=new X;return Je.source=this,Je.operator=Ae,Je}subscribe(Ae,Je,Ce){const De=function G(X){return X&&X instanceof c.Lv||function B(X){return X&&(0,be.m)(X.next)&&(0,be.m)(X.error)&&(0,be.m)(X.complete)}(X)&&(0,V.Nn)(X)}(Ae)?Ae:new c.Hp(Ae,Je,Ce);return(0,xe.x)(()=>{const{operator:Te,source:tt}=this;De.add(Te?Te.call(De,tt):tt?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Je){Ae.error(Je)}}forEach(Ae,Je){return new(Je=Me(Je))((Ce,De)=>{const Te=new c.Hp({next:tt=>{try{Ae(tt)}catch(st){De(st),Te.unsubscribe()}},error:De,complete:Ce});this.subscribe(Te)})}_subscribe(Ae){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Ae)}[U.L](){return this}pipe(...Ae){return(0,ne.U)(Ae)(this)}toPromise(Ae){return new(Ae=Me(Ae))((Je,Ce)=>{let De;this.subscribe(Te=>De=Te,Te=>Ce(Te),()=>Je(De))})}}return X.create=Oe=>new X(Oe),X})();function Me(X){var Oe;return null!==(Oe=X??ge.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(ot,Ie,L)=>{L.d(Ie,{x:()=>xe});var c=L(5592),V=L(7394);const ne=(0,L(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=L(9039),be=L(1441);let xe=(()=>{class Me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Oe,observers:Ae}=this;return X||Oe?V.Lc:(this.currentObservers=null,Ae.push(G),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(Ae,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Oe,isStopped:Ae}=this;X?G.error(Oe):Ae&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return Me.create=(B,G)=>new Fe(B,G),Me})();class Fe extends xe{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,B)}error(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==X?X:V.Lc}}},305:(ot,Ie,L)=>{L.d(Ie,{Hp:()=>Ce,Lv:()=>X});var c=L(4674),V=L(7394),U=L(2653),ne=L(3894),ge=L(2420);const be=Me("C",void 0,void 0);function Me(ee,de,re){return{kind:ee,value:de,error:re}}var B=L(7599),G=L(1441);class X extends V.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Nn)(de)&&de.add(this)):this.destination=st}static create(de,re,he){return new Ce(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return Me("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function xe(ee){return Me("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Ae(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){De(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){De(he)}else De(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){De(re)}}}class Ce extends X{constructor(de,re,he){let Re;if(super(),(0,c.m)(de)||!de)Re={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&U.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),Re={next:de.next&&Ae(de.next,j),error:de.error&&Ae(de.error,j),complete:de.complete&&Ae(de.complete,j)}):Re=de}this.destination=new Je(Re)}}function De(ee){U.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,ne.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=U.config;re&&B.z.setTimeout(()=>re(ee,de))}const st={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(ot,Ie,L)=>{L.d(Ie,{Lc:()=>be,w0:()=>ge,Nn:()=>xe});var c=L(4674);const U=(0,L(2306).d)(Me=>function(G){Me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Oe)=>`${Oe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=L(9039);class ge{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ae of G)Ae.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,c.m)(X))try{X()}catch(Ae){B=Ae instanceof U?Ae.errors:[Ae]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Ae of Oe)try{Fe(Ae)}catch(Je){B=B??[],Je instanceof U?B=[...B,...Je.errors]:B.push(Je)}}if(B)throw new U(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Fe(B);else{if(B instanceof ge){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ne.P)(G,B),B instanceof ge&&B._removeParent(this)}}ge.EMPTY=(()=>{const Me=new ge;return Me.closed=!0,Me})();const be=ge.EMPTY;function xe(Me){return Me instanceof ge||Me&&"closed"in Me&&(0,c.m)(Me.remove)&&(0,c.m)(Me.add)&&(0,c.m)(Me.unsubscribe)}function Fe(Me){(0,c.m)(Me)?Me():Me.unsubscribe()}},2653:(ot,Ie,L)=>{L.d(Ie,{config:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ot,Ie,L)=>{L.d(Ie,{E:()=>V});const V=new(L(5592).y)(ge=>ge.complete())},2459:(ot,Ie,L)=>{L.d(Ie,{D:()=>de});var c=L(4829),V=L(3093),U=L(5137),be=L(5592),Fe=L(4971),Me=L(4674),B=L(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new be.y(Re=>{(0,B.f)(Re,he,()=>{const j=re[Symbol.asyncIterator]();(0,B.f)(Re,he,()=>{j.next().then(we=>{we.done?Re.complete():Re.next(we.value)})},0,!0)})})}var Oe=L(8382),Ae=L(4026),Je=L(4266),Ce=L(3664),De=L(5726),Te=L(9853),tt=L(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function ne(re,he){return(0,c.Xf)(re).pipe((0,U.R)(he),(0,V.Q)(he))}(re,he);if((0,Je.z)(re))return function xe(re,he){return new be.y(Re=>{let j=0;return he.schedule(function(){j===re.length?Re.complete():(Re.next(re[j++]),Re.closed||this.schedule())})})}(re,he);if((0,Ae.t)(re))return function ge(re,he){return(0,c.Xf)(re).pipe((0,U.R)(he),(0,V.Q)(he))}(re,he);if((0,De.D)(re))return X(re,he);if((0,Ce.T)(re))return function G(re,he){return new be.y(Re=>{let j;return(0,B.f)(Re,he,()=>{j=re[Fe.h](),(0,B.f)(Re,he,()=>{let we,Ue;try{({value:we,done:Ue}=j.next())}catch(lt){return void Re.error(lt)}Ue?Re.complete():Re.next(we)},0,!0)}),()=>(0,Me.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function st(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,Te.z)(re)}(re,he):(0,c.Xf)(re)}},4829:(ot,Ie,L)=>{L.d(Ie,{Xf:()=>Oe});var c=L(7582),V=L(4266),U=L(4026),ne=L(5592),ge=L(8382),be=L(5726),xe=L(9853),Fe=L(3664),Me=L(541),B=L(4674),G=L(3894),X=L(4850);function Oe(ee){if(ee instanceof ne.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function Ae(ee){return new ne.y(de=>{const re=ee[X.L]();if((0,B.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new ne.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,U.t)(ee))return function Ce(ee){return new ne.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,G.h)})}(ee);if((0,be.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function De(ee){return new ne.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,Me.L)(ee))return function tt(ee){return Te((0,Me.Q)(ee))}(ee)}throw(0,xe.z)(ee)}function Te(ee){return new ne.y(de=>{(function st(ee,de){var re,he,Re,j;return(0,c.mG)(this,void 0,void 0,function*(){try{for(re=(0,c.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){Re={error:we}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(Re)throw Re.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(ot,Ie,L)=>{L.d(Ie,{T:()=>be});var c=L(7537),V=L(4829),U=L(6232),ne=L(4564),ge=L(2459);function be(...xe){const Fe=(0,ne.yG)(xe),Me=(0,ne._6)(xe,1/0),B=xe;return B.length?1===B.length?(0,V.Xf)(B[0]):(0,c.J)(Me)((0,ge.D)(B,Fe)):U.E}},2096:(ot,Ie,L)=>{L.d(Ie,{of:()=>U});var c=L(4564),V=L(2459);function U(...ne){const ge=(0,c.yG)(ne);return(0,V.D)(ne,ge)}},8251:(ot,Ie,L)=>{L.d(Ie,{x:()=>V});var c=L(305);function V(ne,ge,be,xe,Fe){return new U(ne,ge,be,xe,Fe)}class U extends c.Lv{constructor(ge,be,xe,Fe,Me,B){super(ge),this.onFinalize=Me,this.shouldUnsubscribe=B,this._next=be?function(G){try{be(G)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(ot,Ie,L)=>{L.d(Ie,{x:()=>ne});var c=L(2737),V=L(9360),U=L(8251);function ne(be,xe=c.y){return be=be??ge,(0,V.e)((Fe,Me)=>{let B,G=!0;Fe.subscribe((0,U.x)(Me,X=>{const Oe=xe(X);(G||!be(B,Oe))&&(G=!1,B=Oe,Me.next(X))}))})}function ge(be,xe){return be===xe}},7398:(ot,Ie,L)=>{L.d(Ie,{U:()=>U});var c=L(9360),V=L(8251);function U(ne,ge){return(0,c.e)((be,xe)=>{let Fe=0;be.subscribe((0,V.x)(xe,Me=>{xe.next(ne.call(ge,Me,Fe++))}))})}},7537:(ot,Ie,L)=>{L.d(Ie,{J:()=>U});var c=L(1631),V=L(2737);function U(ne=1/0){return(0,c.z)(V.y,ne)}},1631:(ot,Ie,L)=>{L.d(Ie,{z:()=>Fe});var c=L(7398),V=L(4829),U=L(9360),ne=L(7103),ge=L(8251),xe=L(4674);function Fe(Me,B,G=1/0){return(0,xe.m)(B)?Fe((X,Oe)=>(0,c.U)((Ae,Je)=>B(X,Ae,Oe,Je))((0,V.Xf)(Me(X,Oe))),G):("number"==typeof B&&(G=B),(0,U.e)((X,Oe)=>function be(Me,B,G,X,Oe,Ae,Je,Ce){const De=[];let Te=0,tt=0,st=!1;const ee=()=>{st&&!De.length&&!Te&&B.complete()},de=he=>Te<X?re(he):De.push(he),re=he=>{Ae&&B.next(he),Te++;let Re=!1;(0,V.Xf)(G(he,tt++)).subscribe((0,ge.x)(B,j=>{Oe?.(j),Ae?de(j):B.next(j)},()=>{Re=!0},void 0,()=>{if(Re)try{for(Te--;De.length&&Te<X;){const j=De.shift();Je?(0,ne.f)(B,Je,()=>re(j)):re(j)}ee()}catch(j){B.error(j)}}))};return Me.subscribe((0,ge.x)(B,de,()=>{st=!0,ee()})),()=>{Ce?.()}}(X,Oe,Me,G)))}},3093:(ot,Ie,L)=>{L.d(Ie,{Q:()=>ne});var c=L(7103),V=L(9360),U=L(8251);function ne(ge,be=0){return(0,V.e)((xe,Fe)=>{xe.subscribe((0,U.x)(Fe,Me=>(0,c.f)(Fe,ge,()=>Fe.next(Me),be),()=>(0,c.f)(Fe,ge,()=>Fe.complete(),be),Me=>(0,c.f)(Fe,ge,()=>Fe.error(Me),be)))})}},3020:(ot,Ie,L)=>{L.d(Ie,{B:()=>ge});var c=L(4829),V=L(8645),U=L(305),ne=L(9360);function ge(xe={}){const{connector:Fe=(()=>new V.x),resetOnError:Me=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=xe;return X=>{let Oe,Ae,Je,Ce=0,De=!1,Te=!1;const tt=()=>{Ae?.unsubscribe(),Ae=void 0},st=()=>{tt(),Oe=Je=void 0,De=Te=!1},ee=()=>{const de=Oe;st(),de?.unsubscribe()};return(0,ne.e)((de,re)=>{Ce++,!Te&&!De&&tt();const he=Je=Je??Fe();re.add(()=>{Ce--,0===Ce&&!Te&&!De&&(Ae=be(ee,G))}),he.subscribe(re),!Oe&&Ce>0&&(Oe=new U.Hp({next:Re=>he.next(Re),error:Re=>{Te=!0,tt(),Ae=be(st,Me,Re),he.error(Re)},complete:()=>{De=!0,tt(),Ae=be(st,B),he.complete()}}),(0,c.Xf)(de).subscribe(Oe))})(X)}}function be(xe,Fe,...Me){if(!0===Fe)return void xe();if(!1===Fe)return;const B=new U.Hp({next:()=>{B.unsubscribe(),xe()}});return(0,c.Xf)(Fe(...Me)).subscribe(B)}},5137:(ot,Ie,L)=>{L.d(Ie,{R:()=>V});var c=L(9360);function V(U,ne=0){return(0,c.e)((ge,be)=>{be.add(U.schedule(()=>ge.subscribe(be),ne))})}},4664:(ot,Ie,L)=>{L.d(Ie,{w:()=>ne});var c=L(4829),V=L(9360),U=L(8251);function ne(ge,be){return(0,V.e)((xe,Fe)=>{let Me=null,B=0,G=!1;const X=()=>G&&!Me&&Fe.complete();xe.subscribe((0,U.x)(Fe,Oe=>{Me?.unsubscribe();let Ae=0;const Je=B++;(0,c.Xf)(ge(Oe,Je)).subscribe(Me=(0,U.x)(Fe,Ce=>Fe.next(be?be(Oe,Ce,Je,Ae++):Ce),()=>{Me=null,X()}))},()=>{G=!0,X()}))})}},7599:(ot,Ie,L)=>{L.d(Ie,{z:()=>c});const c={setTimeout(V,U,...ne){const{delegate:ge}=c;return ge?.setTimeout?ge.setTimeout(V,U,...ne):setTimeout(V,U,...ne)},clearTimeout(V){const{delegate:U}=c;return(U?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(ot,Ie,L)=>{L.d(Ie,{h:()=>V});const V=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ot,Ie,L)=>{L.d(Ie,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ot,Ie,L)=>{L.d(Ie,{_6:()=>be,jO:()=>ne,yG:()=>ge});var c=L(4674);function U(xe){return xe[xe.length-1]}function ne(xe){return(0,c.m)(U(xe))?xe.pop():void 0}function ge(xe){return function V(xe){return xe&&(0,c.m)(xe.schedule)}(U(xe))?xe.pop():void 0}function be(xe,Fe){return"number"==typeof U(xe)?xe.pop():Fe}},9039:(ot,Ie,L)=>{function c(V,U){if(V){const ne=V.indexOf(U);0<=ne&&V.splice(ne,1)}}L.d(Ie,{P:()=>c})},2306:(ot,Ie,L)=>{function c(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}L.d(Ie,{d:()=>c})},1441:(ot,Ie,L)=>{L.d(Ie,{O:()=>ne,x:()=>U});var c=L(2653);let V=null;function U(ge){if(c.config.useDeprecatedSynchronousErrorHandling){const be=!V;if(be&&(V={errorThrown:!1,error:null}),ge(),be){const{errorThrown:xe,error:Fe}=V;if(V=null,xe)throw Fe}}else ge()}function ne(ge){c.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(ot,Ie,L)=>{function c(V,U,ne,ge=0,be=!1){const xe=U.schedule(function(){ne(),be?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(xe),!be)return xe}L.d(Ie,{f:()=>c})},2737:(ot,Ie,L)=>{function c(V){return V}L.d(Ie,{y:()=>c})},4266:(ot,Ie,L)=>{L.d(Ie,{z:()=>c});const c=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(ot,Ie,L)=>{L.d(Ie,{D:()=>V});var c=L(4674);function V(U){return Symbol.asyncIterator&&(0,c.m)(U?.[Symbol.asyncIterator])}},4674:(ot,Ie,L)=>{function c(V){return"function"==typeof V}L.d(Ie,{m:()=>c})},8382:(ot,Ie,L)=>{L.d(Ie,{c:()=>U});var c=L(4850),V=L(4674);function U(ne){return(0,V.m)(ne[c.L])}},3664:(ot,Ie,L)=>{L.d(Ie,{T:()=>U});var c=L(4971),V=L(4674);function U(ne){return(0,V.m)(ne?.[c.h])}},4026:(ot,Ie,L)=>{L.d(Ie,{t:()=>V});var c=L(4674);function V(U){return(0,c.m)(U?.then)}},541:(ot,Ie,L)=>{L.d(Ie,{L:()=>ne,Q:()=>U});var c=L(7582),V=L(4674);function U(ge){return(0,c.FC)(this,arguments,function*(){const xe=ge.getReader();try{for(;;){const{value:Fe,done:Me}=yield(0,c.qq)(xe.read());if(Me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Fe)}}finally{xe.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},9360:(ot,Ie,L)=>{L.d(Ie,{A:()=>V,e:()=>U});var c=L(4674);function V(ne){return(0,c.m)(ne?.lift)}function U(ne){return ge=>{if(V(ge))return ge.lift(function(be){try{return ne(be,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ot,Ie,L)=>{function c(){}L.d(Ie,{Z:()=>c})},8407:(ot,Ie,L)=>{L.d(Ie,{U:()=>U,z:()=>V});var c=L(2737);function V(...ne){return U(ne)}function U(ne){return 0===ne.length?c.y:1===ne.length?ne[0]:function(be){return ne.reduce((xe,Fe)=>Fe(xe),be)}}},3894:(ot,Ie,L)=>{L.d(Ie,{h:()=>U});var c=L(2653),V=L(7599);function U(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=c.config;if(!ge)throw ne;ge(ne)})}},9853:(ot,Ie,L)=>{function c(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ie,{z:()=>c})},5879:(ot,Ie,L)=>{L.d(Ie,{$8M:()=>Gu,$WT:()=>Wa,$Z:()=>ZE,AFp:()=>Ri,ALo:()=>Ec,AaK:()=>X,AsE:()=>WT,CHM:()=>co,CRH:()=>ly,DdM:()=>ty,Dn7:()=>xp,EJc:()=>Nr,EpF:()=>MT,F4k:()=>DT,FYo:()=>NA,FiY:()=>se,Gf:()=>WM,GfV:()=>fd,Gpc:()=>Je,HDt:()=>cD,JOm:()=>ff,KtG:()=>Jh,LFG:()=>Ve,LSH:()=>Af,Lbi:()=>G0,Lck:()=>MO,MAs:()=>rw,MGl:()=>__,MMx:()=>Fd,MR2:()=>j0,NdJ:()=>uw,O4$:()=>Os,Ojb:()=>ME,OlP:()=>cn,Oqu:()=>Ro,P3R:()=>wA,PXZ:()=>Kp,Q6J:()=>iw,QGY:()=>lp,Qsj:()=>RL,R0b:()=>jr,RDi:()=>rE,Rgc:()=>Uo,SBq:()=>Tl,Sil:()=>qO,Suo:()=>gb,TTD:()=>zh,TgZ:()=>f_,Tol:()=>b_,VKq:()=>Jw,VuI:()=>g2,W1O:()=>Bp,WLB:()=>Xw,X6Q:()=>n2,XFs:()=>dt,Xpm:()=>yu,Xq5:()=>uT,Xts:()=>ld,Y36:()=>Dl,YKP:()=>$l,YNc:()=>d_,Yjl:()=>bu,Yz7:()=>ft,Z0I:()=>on,ZZ4:()=>Na,_Bn:()=>EM,_UZ:()=>sw,_c5:()=>l2,_uU:()=>Dw,aQg:()=>Ay,c2e:()=>Ze,cJS:()=>Nn,cg1:()=>Ta,dDg:()=>Ey,dqk:()=>Nt,eFA:()=>Sb,eJc:()=>fy,ekj:()=>ww,eoX:()=>Vo,f3M:()=>Ke,g9A:()=>EE,h0i:()=>jl,hGG:()=>u2,hij:()=>Dd,iGM:()=>pb,ifc:()=>Go,ip1:()=>rt,jDz:()=>Ei,kL8:()=>bc,kcU:()=>yt,lG2:()=>wu,lcZ:()=>ib,lnq:()=>Sw,lqb:()=>$s,lri:()=>Iy,n5z:()=>mm,oAB:()=>Dh,oxw:()=>xT,q4F:()=>Gm,qFp:()=>La,qLn:()=>gc,qOj:()=>Ea,qZA:()=>ap,rWj:()=>te,rg0:()=>Hh,s9C:()=>up,sBO:()=>o2,s_b:()=>sy,soG:()=>ye,tb:()=>Ty,tp0:()=>He,uIk:()=>ep,vHH:()=>ee,vpe:()=>Hs,wAp:()=>Hr,xp6:()=>mc,z2F:()=>Hd,zSh:()=>R,zs3:()=>us});var c=L(8645),V=L(7394),U=L(5592),ne=L(3019),ge=L(5619),be=L(2096),xe=L(3020),Fe=L(4664),Me=L(3997);function B(o){for(let a in o)if(o[a]===B)return a;throw Error("Could not find renamed property on target object.")}function G(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function X(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(X).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Oe(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Ae=B({__forward_ref__:B});function Je(o){return o.__forward_ref__=Je,o.toString=function(){return X(this())},o}function Ce(o){return De(o)?o():o}function De(o){return"function"==typeof o&&o.hasOwnProperty(Ae)&&o.__forward_ref__===Je}function Te(o){return o&&!!o.\u0275providers}const st="https://g.co/ng/security#xss";class ee extends Error{constructor(a,l){super(function de(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function re(o){return"string"==typeof o?o:null==o?"":String(o)}function Ue(o,a){throw new ee(-201,!1)}function Qe(o,a){null==o&&function Be(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function ft(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Nn(o){return{providers:o.providers||[],imports:o.imports||[]}}function En(o){return Zn(o,_r)||Zn(o,Kr)}function on(o){return null!==En(o)}function Zn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ur(o){return o&&(o.hasOwnProperty(Wn)||o.hasOwnProperty(bo))?o[Wn]:null}const _r=B({\u0275prov:B}),Wn=B({\u0275inj:B}),Kr=B({ngInjectableDef:B}),bo=B({ngInjectorDef:B});var dt=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(dt||{});let mt;function sn(o){const a=mt;return mt=o,a}function fi(o,a,l){const d=En(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&dt.Optional?null:void 0!==a?a:void Ue(X(o))}const Nt=globalThis,it={},Rt="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let k;function K(o){const a=k;return k=o,a}function me(o,a=dt.Default){if(void 0===k)throw new ee(-203,!1);return null===k?fi(o,void 0,a):k.get(o,a&dt.Optional?null:void 0,a)}function Ve(o,a=dt.Default){return(function Tt(){return mt}()||me)(Ce(o),a)}function Ke(o,a=dt.Default){return Ve(o,Jt(a))}function Jt(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function wt(o){const a=[];for(let l=0;l<o.length;l++){const d=Ce(o[l]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,g=dt.Default;for(let v=0;v<d.length;v++){const C=d[v],E=At(C);"number"==typeof E?-1===E?h=C.token:g|=E:h=C}a.push(Ve(h,g))}else a.push(Ve(d))}return a}function pn(o,a){return o[Rt]=a,o.prototype[Rt]=a,o}function At(o){return o[Rt]}function zo(o){return{toString:o}.toString()}var Es=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(Es||{}),Go=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Go||{});const Gi={},Yt=[],sa=B({\u0275cmp:B}),qa=B({\u0275dir:B}),gu=B({\u0275pipe:B}),mu=B({\u0275mod:B}),qo=B({\u0275fac:B}),Za=B({__NG_ELEMENT_ID__:B}),_u=B({__NG_ENV_ID__:B});function Ch(o,a,l){let d=o.length;for(;;){const h=o.indexOf(a,l);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const g=a.length;if(h+g===d||o.charCodeAt(h+g)<=32)return h}l=h+1}}function Qr(o,a,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const g=l[d++],v=l[d++],C=l[d++];o.setAttribute(a,v,C,g)}else{const g=h,v=l[++d];Hc(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),d++}}return d}function Zo(o){return 3===o||4===o||6===o}function Hc(o){return 64===o.charCodeAt(0)}function zc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||Jr(o,l,h,null,-1===l||2===l?a[++d]:null)}}return o}function Jr(o,a,l,d,h){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const C=o[g++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=g-1;break}}}for(;g<o.length;){const C=o[g];if("number"==typeof C)break;if(C===l){if(null===d)return void(null!==h&&(o[g+1]=h));if(d===o[g+1])return void(o[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==h&&o.splice(g++,0,h)}const Ln="ng-template";function xv(o,a,l){let d=0,h=!0;for(;d<o.length;){let g=o[d++];if("string"==typeof g&&h){const v=o[d++];if(l&&"class"===g&&-1!==Ch(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;d<o.length&&"string"==typeof(g=o[d++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function gn(o){return 4===o.type&&o.value!==Ln}function Ov(o,a,l){return a===(4!==o.type||l?o.value:Ln)}function wh(o,a,l){let d=4;const h=o.attrs||[],g=function Gc(o){for(let a=0;a<o.length;a++)if(Zo(o[a]))return a;return o.length}(h);let v=!1;for(let C=0;C<a.length;C++){const E=a[C];if("number"!=typeof E){if(!v)if(4&d){if(d=2|1&d,""!==E&&!Ov(o,E,l)||""===E&&1===a.length){if(pi(d))return!1;v=!0}}else{const M=8&d?E:a[++C];if(8&d&&null!==o.attrs){if(!xv(o.attrs,M,l)){if(pi(d))return!1;v=!0}continue}const F=bh(8&d?"class":E,h,gn(o),l);if(-1===F){if(pi(d))return!1;v=!0;continue}if(""!==M){let Z;Z=F>g?"":h[F+1].toLowerCase();const Y=8&d?Z:null;if(Y&&-1!==Ch(Y,M,0)||2&d&&M!==Z){if(pi(d))return!1;v=!0}}}}else{if(!v&&!pi(d)&&!pi(E))return!1;if(v&&pi(E))continue;v=!1,d=E|1&d}}return pi(d)||v}function pi(o){return 0==(1&o)}function bh(o,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let g=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=a[++h];for(;"string"==typeof C;)C=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Eh(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function Ih(o,a,l=!1){for(let d=0;d<a.length;d++)if(wh(o,a[d],l))return!0;return!1}function Fg(o,a){return o?":not("+a.trim()+")":a}function Lg(o){let a=o[0],l=1,d=2,h="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const C=o[++l];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!pi(v)&&(a+=Fg(g,h),h=""),d=v,g=g||!pi(d);l++}return""!==h&&(a+=Fg(g,h)),a}function yu(o){return zo(()=>{const a=Ug(o),l={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===Es.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Go.Emulated,styles:o.styles||Yt,_:null,schemas:o.schemas||null,tView:null,id:""};Iu(l);const d=o.dependencies;return l.directiveDefs=Ts(d,!1),l.pipeDefs=Ts(d,!0),l.id=function Ph(o){let a=0;const l=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const h of l)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(l),l})}function vu(o){return Ft(o)||Mr(o)}function Mh(o){return null!==o}function Dh(o){return zo(()=>({type:o.type,bootstrap:o.bootstrap||Yt,declarations:o.declarations||Yt,imports:o.imports||Yt,exports:o.exports||Yt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Cu(o,a){if(null==o)return Gi;const l={};for(const d in o)if(o.hasOwnProperty(d)){let h=o[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=d,a&&(a[h]=g)}return l}function wu(o){return zo(()=>{const a=Ug(o);return Iu(a),a})}function bu(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Ft(o){return o[sa]||null}function Mr(o){return o[qa]||null}function Dr(o){return o[gu]||null}function Wa(o){const a=Ft(o)||Mr(o)||Dr(o);return null!==a&&a.standalone}function Xr(o,a){const l=o[mu]||null;if(!l&&!0===a)throw new Error(`Type ${X(o)} does not have '\u0275mod' property.`);return l}function Ug(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||Gi,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||Yt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cu(o.inputs,a),outputs:Cu(o.outputs)}}function Iu(o){o.features?.forEach(a=>a(o))}function Ts(o,a){if(!o)return null;const l=a?Dr:vu;return()=>("function"==typeof o?o():o).map(d=>l(d)).filter(Mh)}const Tn=0,je=1,Et=2,mn=3,Ai=4,Ko=5,Sr=6,aa=7,Kn=8,Yo=9,Ms=10,pt=11,qc=12,Nv=13,xi=14,ar=15,Ka=16,Oi=17,ei=18,Qo=19,Bg=20,ca=21,Eo=22,Eu=23,qi=24,Lt=25,xh=1,Zc=2,ti=7,Ya=9,cr=11;function gi(o){return Array.isArray(o)&&"object"==typeof o[xh]}function Br(o){return Array.isArray(o)&&!0===o[xh]}function Oh(o){return 0!=(4&o.flags)}function Jo(o){return o.componentOffset>-1}function Kc(o){return 1==(1&o.flags)}function Zi(o){return!!o.template}function Qa(o){return 0!=(512&o[Et])}function Xo(o,a){return o.hasOwnProperty(qo)?o[qo]:null}let vr=null,Lh=!1;function ri(o){const a=vr;return vr=o,a}const Uh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function zv(o){if(!Su(o)||o.dirty){if(!o.producerMustRecompute(o)&&!qv(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Gv(o){o.dirty=!0,function Hg(o){if(void 0===o.liveConsumerNode)return;const a=Lh;Lh=!0;try{for(const l of o.liveConsumerNode)l.dirty||Gv(l)}finally{Lh=a}}(o),o.consumerMarkedDirty?.(o)}function zg(o){return o&&(o.nextProducerIndex=0),ri(o)}function Du(o,a){if(ri(a),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(Su(o))for(let l=o.nextProducerIndex;l<o.producerNode.length;l++)Qc(o.producerNode[l],o.producerIndexOfThis[l]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function qv(o){Ss(o);for(let a=0;a<o.producerNode.length;a++){const l=o.producerNode[a],d=o.producerLastReadVersion[a];if(d!==l.version||(zv(l),d!==l.version))return!0}return!1}function Vh(o){if(Ss(o),Su(o))for(let a=0;a<o.producerNode.length;a++)Qc(o.producerNode[a],o.producerIndexOfThis[a]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Qc(o,a){if(function Wv(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),Ss(o),1===o.liveConsumerNode.length)for(let d=0;d<o.producerNode.length;d++)Qc(o.producerNode[d],o.producerIndexOfThis[d]);const l=o.liveConsumerNode.length-1;if(o.liveConsumerNode[a]=o.liveConsumerNode[l],o.liveConsumerIndexOfThis[a]=o.liveConsumerIndexOfThis[l],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,a<o.liveConsumerNode.length){const d=o.liveConsumerIndexOfThis[a],h=o.liveConsumerNode[a];Ss(h),h.producerIndexOfThis[d]=a}}function Su(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function Ss(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let Yv=null;function Hh(o){const a=ri(null);try{return o()}finally{ri(a)}}const Yg=()=>{},M1=(()=>({...Uh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:Yg}))();class e0{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function zh(){return Gh}function Gh(o){return o.type.prototype.ngOnChanges&&(o.setInput=es),xu}function xu(){const o=qh(this),a=o?.current;if(a){const l=o.previous;if(l===Gi)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function es(o,a,l,d){const h=this.declaredInputs[l],g=qh(o)||function t0(o,a){return o[ec]=a}(o,{previous:Gi,current:null}),v=g.current||(g.current={}),C=g.previous,E=C[h];v[h]=new e0(E&&E.currentValue,a,C===Gi),o[d]=a}zh.ngInherit=!0;const ec="__ngSimpleChanges__";function qh(o){return o[ec]||null}const To=function(o,a,l){},Qg="svg";function an(o){for(;Array.isArray(o);)o=o[Tn];return o}function ts(o,a){return an(a[o])}function ii(o,a){return an(a[o.index])}function Wh(o,a){return o.data[a]}function tc(o,a){return o[a]}function mi(o,a){const l=a[o];return gi(l)?l:l[Tn]}function Ps(o,a){return null==a?null:o[a]}function Jg(o){o[Oi]=0}function Xc(o){1024&o[Et]||(o[Et]|=1024,nr(o,1))}function n0(o){1024&o[Et]&&(o[Et]&=-1025,nr(o,-1))}function nr(o,a){let l=o[mn];if(null===l)return;l[Ko]+=a;let d=l;for(l=l[mn];null!==l&&(1===a&&1===d[Ko]||-1===a&&0===d[Ko]);)l[Ko]+=a,d=l,l=l[mn]}const _t={lFrame:um(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nc(){return _t.bindingsEnabled}function ve(){return _t.lFrame.lView}function jt(){return _t.lFrame.tView}function co(o){return _t.lFrame.contextLView=o,o[Kn]}function Jh(o){return _t.lFrame.contextLView=null,o}function Pr(){let o=Fu();for(;null!==o&&64===o.type;)o=o.parent;return o}function Fu(){return _t.lFrame.currentTNode}function Mo(o,a){const l=_t.lFrame;l.currentTNode=o,l.isParent=a}function im(){return _t.lFrame.isParent}function Ar(){const o=_t.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function xs(){return _t.lFrame.bindingIndex}function nl(){return _t.lFrame.bindingIndex++}function Do(o){const a=_t.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function am(o,a){const l=_t.lFrame;l.bindingIndex=l.bindingRootIndex=o,cm(a)}function cm(o){_t.lFrame.currentDirectiveIndex=o}function l0(){return _t.lFrame.currentQueryIndex}function lm(o){_t.lFrame.currentQueryIndex=o}function k1(o){const a=o[je];return 2===a.type?a.declTNode:1===a.type?o[Sr]:null}function ef(o,a,l){if(l&dt.SkipSelf){let h=a,g=o;for(;!(h=h.parent,null!==h||l&dt.Host||(h=k1(g),null===h||(g=g[xi],10&h.type))););if(null===h)return!1;a=h,o=g}const d=_t.lFrame=ns();return d.currentTNode=a,d.lView=o,!0}function _i(o){const a=ns(),l=o[je];_t.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function ns(){const o=_t.lFrame,a=null===o?null:o.child;return null===a?um(o):a}function um(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function _n(){const o=_t.lFrame;return _t.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ut=_n;function lr(){const o=_n();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function oi(){return _t.lFrame.selectedIndex}function rs(o){_t.lFrame.selectedIndex=o}function bn(){const o=_t.lFrame;return Wh(o.tView,o.selectedIndex)}function Os(){_t.lFrame.currentNamespace=Qg}function yt(){!function u0(){_t.lFrame.currentNamespace=null}()}let rl=!0;function is(){return rl}function os(o){rl=o}function rc(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:M,ngOnDestroy:P}=g;v&&(o.contentHooks??=[]).push(-l,v),C&&((o.contentHooks??=[]).push(l,C),(o.contentCheckHooks??=[]).push(l,C)),E&&(o.viewHooks??=[]).push(-l,E),M&&((o.viewHooks??=[]).push(l,M),(o.viewCheckHooks??=[]).push(l,M)),null!=P&&(o.destroyHooks??=[]).push(l,P)}}function ic(o,a,l){Bu(o,a,3,l)}function oc(o,a,l,d){(3&o[Et])===l&&Bu(o,a,l,d)}function Uu(o,a){let l=o[Et];(3&l)===a&&(l&=8191,l+=1,o[Et]=l)}function Bu(o,a,l,d){const g=d??-1,v=a.length-1;let C=0;for(let E=void 0!==d?65535&o[Oi]:0;E<v;E++)if("number"==typeof a[E+1]){if(C=a[E],null!=d&&C>=d)break}else a[E]<0&&(o[Oi]+=65536),(C<g||-1==g)&&(il(o,l,a,E),o[Oi]=(4294901760&o[Oi])+E+2),E++}function ss(o,a){To(4,o,a);const l=ri(null);try{a.call(o)}finally{ri(l),To(5,o,a)}}function il(o,a,l,d){const h=l[d]<0,g=l[d+1],C=o[h?-l[d]:l[d]];h?o[Et]>>13<o[Oi]>>16&&(3&o[Et])===a&&(o[Et]+=8192,ss(C,g)):ss(C,g)}const So=-1;class ua{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ju(o){return o!==So}function ki(o){return 32767&o}function Ut(o,a){let l=function Mn(o){return o>>16}(o),d=a;for(;l>0;)d=d[xi],l--;return d}let sc=!0;function Cr(o){const a=sc;return sc=o,a}const al=255,cl=5;let d0=0;const ur={};function Dn(o,a){const l=$u(o,a);if(-1!==l)return l;const d=a[je];d.firstCreatePass&&(o.injectorIndex=a.length,Po(d.data,o),Po(a,null),Po(d.blueprint,null));const h=ha(o,a),g=o.injectorIndex;if(ju(h)){const v=ki(h),C=Ut(h,a),E=C[je].data;for(let M=0;M<8;M++)a[g+M]=C[v+M]|E[v+M]}return a[g+8]=h,g}function Po(o,a){o.push(0,0,0,0,0,0,0,0,a)}function $u(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ha(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){if(d=ym(h),null===d)return So;if(l++,h=h[xi],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return So}function ac(o,a,l){!function Ns(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Za)&&(d=l[Za]),null==d&&(d=l[Za]=d0++);const h=d&al;a.data[o+(h>>cl)]|=1<<h}(o,a,l)}function sf(o,a,l){if(l&dt.Optional||void 0!==o)return o;Ue()}function cc(o,a,l,d){if(l&dt.Optional&&void 0===d&&(d=null),!(l&(dt.Self|dt.Host))){const h=o[Yo],g=sn(void 0);try{return h?h.get(a,d,l&dt.Optional):fi(a,d,l&dt.Optional)}finally{sn(g)}}return sf(d,0,l)}function af(o,a,l,d=dt.Default,h){if(null!==o){if(2048&a[Et]&&!(d&dt.Self)){const v=function _m(o,a,l,d,h){let g=o,v=a;for(;null!==g&&null!==v&&2048&v[Et]&&!(512&v[Et]);){const C=Hu(g,v,l,d|dt.Self,ur);if(C!==ur)return C;let E=g.parent;if(!E){const M=v[Bg];if(M){const P=M.get(l,ur,d);if(P!==ur)return P}E=ym(v),v=v[xi]}g=E}return h}(o,a,l,d,ur);if(v!==ur)return v}const g=Hu(o,a,l,d,ur);if(g!==ur)return g}return cc(a,l,d,h)}function Hu(o,a,l,d,h){const g=function Fs(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Za)?o[Za]:void 0;return"number"==typeof a?a>=0?a&al:Ls:a}(l);if("function"==typeof g){if(!ef(a,o,d))return d&dt.Host?sf(h,0,d):cc(a,l,d,h);try{let v;if(v=g(d),null!=v||d&dt.Optional)return v;Ue()}finally{ut()}}else if("number"==typeof g){let v=null,C=$u(o,a),E=So,M=d&dt.Host?a[ar][Sr]:null;for((-1===C||d&dt.SkipSelf)&&(E=-1===C?ha(o,a):a[C+8],E!==So&&pm(d,!1)?(v=a[je],C=ki(E),a=Ut(E,a)):C=-1);-1!==C;){const P=a[je];if(fm(g,C,P.data)){const F=Mt(C,a,l,v,d,M);if(F!==ur)return F}E=a[C+8],E!==So&&pm(d,a[je].data[C+8]===M)&&fm(g,C,a)?(v=P,C=ki(E),a=Ut(E,a)):C=-1}}return h}function Mt(o,a,l,d,h,g){const v=a[je],C=v.data[o+8],P=Rs(C,v,l,null==d?Jo(C)&&sc:d!=v&&0!=(3&C.type),h&dt.Host&&g===C);return null!==P?fa(a,v,P,C):ur}function Rs(o,a,l,d,h){const g=o.providerIndexes,v=a.data,C=1048575&g,E=o.directiveStart,P=g>>20,Z=h?C+P:o.directiveEnd;for(let Y=d?C:C+P;Y<Z;Y++){const ue=v[Y];if(Y<E&&l===ue||Y>=E&&ue.type===l)return Y}if(h){const Y=v[E];if(Y&&Zi(Y)&&Y.type===l)return E}return null}function fa(o,a,l,d){let h=o[l];const g=a.data;if(function Vu(o){return o instanceof ua}(h)){const v=h;v.resolving&&function Re(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new ee(-200,`Circular dependency in DI detected for ${o}${l}`)}(function he(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():re(o)}(g[l]));const C=Cr(v.canSeeViewProviders);v.resolving=!0;const M=v.injectImpl?sn(v.injectImpl):null;ef(o,d,dt.Default);try{h=o[l]=v.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function yi(o,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(d){const v=Gh(a);(l.preOrderHooks??=[]).push(o,v),(l.preOrderCheckHooks??=[]).push(o,v)}h&&(l.preOrderHooks??=[]).push(0-o,h),g&&((l.preOrderHooks??=[]).push(o,g),(l.preOrderCheckHooks??=[]).push(o,g))}(l,g[l],a)}finally{null!==M&&sn(M),Cr(C),v.resolving=!1,ut()}}return h}function fm(o,a,l){return!!(l[a+(o>>cl)]&1<<o)}function pm(o,a){return!(o&dt.Self||o&dt.Host&&a)}class dr{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return af(this._tNode,this._lView,a,Jt(d),l)}}function Ls(){return new dr(Pr(),ve())}function mm(o){return zo(()=>{const a=o.prototype.constructor,l=a[qo]||zu(a),d=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==d;){const g=h[qo]||zu(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function zu(o){return De(o)?()=>{const a=zu(Ce(o));return a&&a()}:Xo(o)}function ym(o){const a=o[je],l=a.type;return 2===l?a.declTNode:1===l?o[Sr]:null}function Gu(o){return function hm(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const g=l[h];if(Zo(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(g===a)return l[h+1];h+=2}}}return null}(Pr(),o)}const pa="__parameters__";function qt(o,a,l){return zo(()=>{const d=function Us(o){return function(...l){if(o){const d=o(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...g){if(this instanceof h)return d.apply(this,g),this;const v=new h(...g);return C.annotation=v,C;function C(E,M,P){const F=E.hasOwnProperty(pa)?E[pa]:Object.defineProperty(E,pa,{value:[]})[pa];for(;F.length<=P;)F.push(null);return(F[P]=F[P]||[]).push(v),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}function uc(o,a){o.forEach(l=>Array.isArray(l)?uc(l,a):a(l))}function f0(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function dc(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Ni(o,a,l){let d=hc(o,a);return d>=0?o[1|d]=l:(d=~d,function wm(o,a,l,d){let h=o.length;if(h==a)o.push(l,d);else if(1===h)o.push(d,o[0]),o[0]=l;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function uf(o,a){const l=hc(o,a);if(l>=0)return o[1|l]}function hc(o,a){return function Qu(o,a,l){let d=0,h=o.length>>l;for(;h!==d;){const g=d+(h-d>>1),v=o[g<<l];if(a===v)return g<<l;v>a?h=g:d=g+1}return~(h<<l)}(o,a,1)}const se=pn(qt("Optional"),8),He=pn(qt("SkipSelf"),4);function Em(o){return 128==(128&o.flags)}var ff=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(ff||{});const pf=new Map;let jP=0;const Dm="__ngContext__";function wi(o,a){gi(a)?(o[Dm]=a[Qo],function $1(o){pf.set(o[Qo],o)}(a)):o[Dm]=a}let _f;function lo(o,a){return _f(o,a)}function Ca(o){const a=o[mn];return Br(a)?a[mn]:a}function G1(o){return yf(o[qc])}function M0(o){return yf(o[Ai])}function yf(o){for(;null!==o&&!Br(o);)o=o[Ai];return o}function rd(o,a,l,d,h){if(null!=d){let g,v=!1;Br(d)?g=d:gi(d)&&(v=!0,d=d[Tn]);const C=an(d);0===o&&null!==l?null==h?K1(a,l,C):yl(a,l,C,h||null,!0):1===o&&null!==l?yl(a,l,C,h||null,!0):2===o?function Om(o,a,l){const d=xm(o,a);d&&function nA(o,a,l,d){o.removeChild(a,l,d)}(o,d,a,l)}(a,C,v):3===o&&a.destroyNode(C),null!=g&&function iA(o,a,l,d,h){const g=l[ti];g!==an(l)&&rd(a,o,d,g,h);for(let C=cr;C<l.length;C++){const E=l[C];Ef(E[je],E,o,a,d,g)}}(a,o,g,l,h)}}function Pm(o,a,l){return o.createElement(a,l)}function q1(o,a){const l=o[Ya],d=l.indexOf(a);n0(a),l.splice(d,1)}function Am(o,a){if(o.length<=cr)return;const l=cr+a,d=o[l];if(d){const h=d[Ka];null!==h&&h!==o&&q1(h,d),a>0&&(o[l-1][Ai]=d[Ai]);const g=dc(o,cr+a);!function QP(o,a){Ef(o,a,a[pt],2,null,null),a[Tn]=null,a[Sr]=null}(d[je],d);const v=g[ei];null!==v&&v.detachView(g[je]),d[mn]=null,d[Ai]=null,d[Et]&=-129}return d}function D0(o,a){if(!(256&a[Et])){const l=a[pt];a[Eu]&&Vh(a[Eu]),a[qi]&&Vh(a[qi]),l.destroyNode&&Ef(o,a,l,3,null,null),function JP(o){let a=o[qc];if(!a)return Z1(o[je],o);for(;a;){let l=null;if(gi(a))l=a[qc];else{const d=a[cr];d&&(l=d)}if(!l){for(;a&&!a[Ai]&&a!==o;)gi(a)&&Z1(a[je],a),a=a[mn];null===a&&(a=o),gi(a)&&Z1(a[je],a),l=a&&a[Ai]}a=l}}(a)}}function Z1(o,a){if(!(256&a[Et])){a[Et]&=-129,a[Et]|=256,function W1(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof ua)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=h[g[v]],E=g[v+1];To(4,C,E);try{E.call(C)}finally{To(5,C,E)}}else{To(4,h,g);try{g.call(h)}finally{To(5,h,g)}}}}}(o,a),function tA(o,a){const l=o.cleanup,d=a[aa];if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+3];v>=0?d[v]():d[-v].unsubscribe(),g+=2}else l[g].call(d[l[g+1]]);null!==d&&(a[aa]=null);const h=a[ca];if(null!==h){a[ca]=null;for(let g=0;g<h.length;g++)(0,h[g])()}}(o,a),1===a[je].type&&a[pt].destroy();const l=a[Ka];if(null!==l&&Br(a[mn])){l!==a[mn]&&q1(l,a);const d=a[ei];null!==d&&d.detachView(o)}!function gf(o){pf.delete(o[Qo])}(a)}}function id(o,a,l){return function _l(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[Tn];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:g}=o.data[d.directiveStart+h];if(g===Go.None||g===Go.Emulated)return null}return ii(d,l)}}(o,a.parent,l)}function yl(o,a,l,d,h){o.insertBefore(a,l,d,h)}function K1(o,a,l){o.appendChild(a,l)}function Y1(o,a,l,d,h){null!==d?yl(o,a,l,d,h):K1(o,a,l)}function xm(o,a){return o.parentNode(a)}let P0,nE,Nm,S0=function J1(o,a,l){return 40&o.type?ii(o,l):null};function bf(o,a,l,d){const h=id(o,d,a),g=a[pt],C=function Q1(o,a,l){return S0(o,a,l)}(d.parent||a[Sr],d,a);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)Y1(g,h,l[E],C,!1);else Y1(g,h,l,C,!1);void 0!==P0&&P0(g,d,a,l,h)}function js(o,a){if(null!==a){const l=a.type;if(3&l)return ii(a,o);if(4&l)return x0(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return js(o,d);{const h=o[a.index];return Br(h)?x0(-1,h):an(h)}}if(32&l)return lo(a,o)()||an(o[a.index]);{const d=A0(o,a);return null!==d?Array.isArray(d)?d[0]:js(Ca(o[ar]),d):js(o,a.next)}}return null}function A0(o,a){return null!==a?o[ar][Sr].projection[a.projection]:null}function x0(o,a){const l=cr+o+1;if(l<a.length){const d=a[l],h=d[je].firstChild;if(null!==h)return js(d,h)}return a[ti]}function If(o,a,l,d,h,g,v){for(;null!=l;){const C=d[l.index],E=l.type;if(v&&0===a&&(C&&wi(an(C),d),l.flags|=2),32!=(32&l.flags))if(8&E)If(o,a,l.child,d,h,g,!1),rd(a,o,h,C,g);else if(32&E){const M=lo(l,d);let P;for(;P=M();)rd(a,o,h,P,g);rd(a,o,h,C,g)}else 16&E?k0(o,a,d,l,h,g):rd(a,o,h,C,g);l=v?l.projectionNext:l.next}}function Ef(o,a,l,d,h,g){If(l,d,o.firstChild,a,h,g,!1)}function k0(o,a,l,d,h,g){const v=l[ar],E=v[Sr].projection[d.projection];if(Array.isArray(E))for(let M=0;M<E.length;M++)rd(a,o,h,E[M],g);else{let M=E;const P=v[mn];Em(d)&&(M.flags|=128),If(o,a,M,P,h,g,!0)}}function eE(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function Tf(o,a,l){const{mergedAttrs:d,classes:h,styles:g}=l;null!==d&&Qr(o,a,d),null!==h&&eE(o,a,h),null!==g&&function sA(o,a,l){o.setAttribute(a,"style",l)}(o,a,g)}function rE(o){nE=o}function sE(o){return function R0(){if(void 0===Nm&&(Nm=null,Nt.trustedTypes))try{Nm=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Nm}()?.createScriptURL(o)||o}class aE{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${st})`}}function pc(o){return o instanceof aE?o.changingThisBreaksApplicationSecurity:o}function ad(o,a){const l=function Rm(o){return o instanceof aE&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${st})`)}return l===a}const Mf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Pf=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Pf||{});function Af(o){const a=xf();return a?a.sanitize(Pf.URL,o)||"":ad(o,"URL")?pc(o):function Lm(o){return(o=String(o)).match(Mf)?o:"unsafe:"+o}(re(o))}function mE(o){const a=xf();if(a)return sE(a.sanitize(Pf.RESOURCE_URL,o)||"");if(ad(o,"ResourceURL"))return sE(pc(o));throw new ee(904,!1)}function wA(o,a,l){return function CA(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?mE:Af}(a,l)(o)}function xf(){const o=ve();return o&&o[Ms].sanitizer}class cn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ft({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ld=new cn("ENVIRONMENT_INITIALIZER"),yE=new cn("INJECTOR",-1),vE=new cn("INJECTOR_DEF_TYPES");class Um{get(a,l=it){if(l===it){const d=new Error(`NullInjectorError: No provider for ${X(a)}!`);throw d.name="NullInjectorError",d}return l}}function j0(o){return{\u0275providers:o}}function bA(...o){return{\u0275providers:CE(0,o),\u0275fromNgModule:!0}}function CE(o,...a){const l=[],d=new Set;let h;const g=v=>{l.push(v)};return uc(a,v=>{const C=v;Bm(C,g,[],d)&&(h||=[],h.push(C))}),void 0!==h&&wE(h,g),l}function wE(o,a){for(let l=0;l<o.length;l++){const{ngModule:d,providers:h}=o[l];$0(h,g=>{a(g,d)})}}function Bm(o,a,l,d){if(!(o=Ce(o)))return!1;let h=null,g=Ur(o);const v=!g&&Ft(o);if(g||v){if(v&&!v.standalone)return!1;h=o}else{const E=o.ngModule;if(g=Ur(E),!g)return!1;h=E}const C=d.has(h);if(v){if(C)return!1;if(d.add(h),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of E)Bm(M,a,l,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let M;d.add(h);try{uc(g.imports,P=>{Bm(P,a,l,d)&&(M||=[],M.push(P))})}finally{}void 0!==M&&wE(M,a)}if(!C){const M=Xo(h)||(()=>new h);a({provide:h,useFactory:M,deps:Yt},h),a({provide:vE,useValue:h,multi:!0},h),a({provide:ld,useValue:()=>Ve(h),multi:!0},h)}const E=g.providers;if(null!=E&&!C){const M=o;$0(E,P=>{a(P,M)})}}}return h!==o&&void 0!==o.providers}function $0(o,a){for(let l of o)Te(l)&&(l=l.\u0275providers),Array.isArray(l)?$0(l,a):a(l)}const TL=B({provide:String,useValue:B});function bE(o){return null!==o&&"object"==typeof o&&TL in o}function ud(o){return"function"==typeof o}const R=new cn("Set Injector scope."),Vm={},$t={};let H0;function Cl(){return void 0===H0&&(H0=new Um),H0}class $s{}class Of extends $s{get destroyed(){return this._destroyed}constructor(a,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wr(a,v=>this.processProvider(v)),this.records.set(yE,Rf(void 0,this)),h.has("environment")&&this.records.set($s,Rf(void 0,this));const g=this.records.get(R);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(vE.multi,Yt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=K(this),d=sn(void 0);try{return a()}finally{K(l),sn(d)}}get(a,l=it,d=dt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(_u))return a[_u](this);d=Jt(d);const g=K(this),v=sn(void 0);try{if(!(d&dt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const M=function DA(o){return"function"==typeof o||"object"==typeof o&&o instanceof cn}(a)&&En(a);E=M&&this.injectableDefInScope(M)?Rf(kf(a),Vm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&dt.Self?Cl():this.parent).get(a,l=d&dt.Optional&&l===it?null:l)}catch(C){if("NullInjectorError"===C.name){if((C[Vt]=C[Vt]||[]).unshift(X(a)),g)throw C;return function zi(o,a,l,d){const h=o[Vt];throw a[O]&&h.unshift(a[O]),o.message=function $c(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=X(a);if(Array.isArray(a))h=a.map(X).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${o.replace(H,"\n  ")}`}("\n"+o.message,h,l,d),o.ngTokenPath=h,o[Vt]=null,o}(C,a,"R3InjectorError",this.source)}throw C}finally{sn(v),K(g)}}resolveInjectorInitializers(){const a=K(this),l=sn(void 0);try{const h=this.get(ld.multi,Yt,dt.Self);for(const g of h)g()}finally{K(a),sn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(X(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(a){let l=ud(a=Ce(a))?a:Ce(a&&a.provide);const d=function IE(o){return bE(o)?Rf(void 0,o.useValue):Rf(z0(o),Vm)}(a);if(ud(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Rf(void 0,Vm,!0),h.factory=()=>wt(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===Vm&&(l.value=$t,l.value=l.factory()),"object"==typeof l.value&&l.value&&function MA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Ce(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function kf(o){const a=En(o),l=null!==a?a.factory:Xo(o);if(null!==l)return l;if(o instanceof cn)throw new ee(204,!1);if(o instanceof Function)return function Nf(o){const a=o.length;if(a>0)throw function Bs(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}(a,"?"),new ee(204,!1);const l=function Si(o){return o&&(o[_r]||o[Kr])||null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new ee(204,!1)}function z0(o,a,l){let d;if(ud(o)){const h=Ce(o);return Xo(h)||kf(h)}if(bE(o))d=()=>Ce(o.useValue);else if(function TA(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...wt(o.deps||[]));else if(function EA(o){return!(!o||!o.useExisting)}(o))d=()=>Ve(Ce(o.useExisting));else{const h=Ce(o&&(o.useClass||o.provide));if(!function Sn(o){return!!o.deps}(o))return Xo(h)||kf(h);d=()=>new h(...wt(o.deps))}return d}function Rf(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function wr(o,a){for(const l of o)Array.isArray(l)?wr(l,a):l&&Te(l)?wr(l.\u0275providers,a):a(l)}const Ri=new cn("AppId",{providedIn:"root",factory:()=>z}),z="ng",EE=new cn("Platform Initializer"),G0=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ME=new cn("CSP nonce",{providedIn:"root",factory:()=>function vl(){if(void 0!==nE)return nE;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let DE=(o,a,l)=>null;function X0(o,a,l=!1){return DE(o,a,l)}class kL{}class PE{}class xE{resolveComponentFactory(a){throw function ba(o){const a=Error(`No component factory found for ${X(o)}.`);return a.ngComponent=o,a}(a)}}let Uf=(()=>{class o{static#e=this.NULL=new xE}return o})();function NL(){return Bf(Pr(),ve())}function Bf(o,a){return new Tl(ii(o,a))}let Tl=(()=>{class o{constructor(l){this.nativeElement=l}static#e=this.__NG_ELEMENT_ID__=NL}return o})();function Fi(o){return o instanceof Tl?o.nativeElement:o}class NA{}let RL=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function RA(){const o=ve(),l=mi(Pr().index,o);return(gi(l)?l:o)[pt]}()}return o})(),FA=(()=>{class o{static#e=this.\u0275prov=ft({token:o,providedIn:"root",factory:()=>null})}return o})();class fd{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Gm=new fd("16.2.9"),qm={};function iC(o,a=null,l=null,d){const h=FE(o,a,l,d);return h.resolveInjectorInitializers(),h}function FE(o,a=null,l=null,d,h=new Set){const g=[l||Yt,bA(o)];return d=d||("object"==typeof o?void 0:X(o)),new Of(g,a||Cl(),d||null,h)}let us=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new Um;static create(l,d){if(Array.isArray(l))return iC({name:""},d,l,"");{const h=l.name??"";return iC({name:h},l.parent,l.providers,h)}}static#n=this.\u0275prov=ft({token:o,providedIn:"any",factory:()=>Ve(yE)});static#r=this.__NG_ELEMENT_ID__=-1}return o})();function sC(o){return o.ngOriginalError}class gc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&sC(a);for(;l&&sC(l);)l=sC(l);return l||null}}function jf(o){return a=>{setTimeout(o,void 0,a)}}const Hs=class cC extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let h=a,g=l||(()=>null),v=d;if(a&&"object"==typeof a){const E=a;h=E.next?.bind(E),g=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(g=jf(g),h&&(h=jf(h)),v&&(v=jf(v)));const C=super.subscribe({next:h,error:g,complete:v});return a instanceof V.w0&&a.add(C),C}};function LE(...o){}class jr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hs(!1),this.onMicrotaskEmpty=new Hs(!1),this.onStable=new Hs(!1),this.onError=new Hs(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function lC(){const o="function"==typeof Nt.requestAnimationFrame;let a=Nt[o?"requestAnimationFrame":"setTimeout"],l=Nt[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function $A(o){const a=()=>{!function uC(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Nt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,UE(o),o.isCheckStableRunning=!0,zs(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),UE(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,g,v,C)=>{if(function pC(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(C))return l.invokeTask(h,g,v,C);try{return BE(o),l.invokeTask(h,g,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),VE(o)}},onInvoke:(l,d,h,g,v,C,E)=>{try{return BE(o),l.invoke(h,g,v,C,E)}finally{o.shouldCoalesceRunChangeDetection&&a(),VE(o)}},onHasTask:(l,d,h,g)=>{l.hasTask(h,g),d===h&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,UE(o),zs(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,h,g)=>(l.handleError(h,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(jr.isInAngularZone())throw new ee(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,a,jA,LE,LE);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const jA={};function zs(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function UE(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function BE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function VE(o){o._nesting--,zs(o)}class dC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hs,this.onMicrotaskEmpty=new Hs,this.onStable=new Hs,this.onError=new Hs}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}const hC=new cn("",{providedIn:"root",factory:fC});function fC(){const o=Ke(jr);let a=!0;const l=new U.y(h=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{h.next(a),h.complete()})}),d=new U.y(h=>{let g;o.runOutsideAngular(()=>{g=o.onStable.subscribe(()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=o.onUnstable.subscribe(()=>{jr.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{h.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,ne.T)(l,d.pipe((0,xe.B)()))}function Ia(o){return o instanceof Function?o():o}let $f=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:o,providedIn:"root",factory:()=>new o})}return o})();function md(o){for(;o;){o[Et]|=64;const a=Ca(o);if(Qa(o)&&!a)return o;o=a}return null}const _C=new cn("",{providedIn:"root",factory:()=>!1});let Ym=null;function Ml(o,a){return o[a]??bC()}function wC(o,a){const l=bC();l.producerNode?.length&&(o[a]=Ym,l.lView=o,Ym=qE())}const ZA={...Uh,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{md(o.lView)},lView:null};function qE(){return Object.create(ZA)}function bC(){return Ym??=qE(),Ym}const Dt={};function mc(o){IC(jt(),ve(),oi()+o,!1)}function IC(o,a,l,d){if(!d)if(3==(3&a[Et])){const g=o.preOrderCheckHooks;null!==g&&ic(a,g,l)}else{const g=o.preOrderHooks;null!==g&&oc(a,g,0,l)}rs(l)}function Dl(o,a=dt.Default){const l=ve();return null===l?Ve(o,a):af(Pr(),l,Ce(o),a)}function ZE(){throw new Error("invalid")}function qs(o,a,l,d,h,g,v,C,E,M,P){const F=a.blueprint.slice();return F[Tn]=h,F[Et]=140|d,(null!==M||o&&2048&o[Et])&&(F[Et]|=2048),Jg(F),F[mn]=F[xi]=o,F[Kn]=l,F[Ms]=v||o&&o[Ms],F[pt]=C||o&&o[pt],F[Yo]=E||o&&o[Yo]||null,F[Sr]=g,F[Qo]=function Mm(){return jP++}(),F[Eo]=P,F[Bg]=M,F[ar]=2==a.type?o[ar]:F,F}function _c(o,a,l,d,h){let g=o.data[a];if(null===g)g=function zf(o,a,l,d,h){const g=Fu(),v=im(),E=o.data[a]=function KE(o,a,l,d,h,g){let v=a?a.injectorIndex:-1,C=0;return function As(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,h);return null===o.firstChild&&(o.firstChild=E),null!==g&&(v?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E,E.prev=g)),E}(o,a,l,d,h),function x1(){return _t.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=l,g.value=d,g.attrs=h;const v=function tl(){const o=_t.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Mo(g,!0),g}function yc(o,a,l,d){if(0===l)return-1;const h=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return h}function Qm(o,a,l,d,h){const g=Ml(a,Eu),v=oi(),C=2&d;try{rs(-1),C&&a.length>Lt&&IC(o,a,Lt,!1),To(C?2:0,h);const M=C?g:null,P=zg(M);try{null!==M&&(M.dirty=!1),l(d,h)}finally{Du(M,P)}}finally{C&&null===a[Eu]&&wC(a,Eu),rs(v),To(C?3:1,h)}}function Gf(o,a,l){if(Oh(a)){const d=ri(null);try{const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const C=o.data[v];C.contentQueries&&C.contentQueries(1,l[v],v)}}finally{ri(d)}}}function qf(o,a,l){nc()&&(function QE(o,a,l,d){const h=l.directiveStart,g=l.directiveEnd;Jo(l)&&function ix(o,a,l){const d=ii(a,o),h=Jm(l);let v=16;l.signals?v=4096:l.onPush&&(v=64);const C=UC(o,qs(o,h,null,v,d,a,null,o[Ms].rendererFactory.createRenderer(d,l),null,null,null));o[a.index]=C}(a,l,o.data[h+l.componentOffset]),o.firstCreatePass||Dn(l,a),wi(d,a);const v=l.initialInputs;for(let C=h;C<g;C++){const E=o.data[C],M=fa(a,o,C,l);wi(M,a),null!==v&&LC(0,C-h,M,E,0,v),Zi(E)&&(mi(l.index,a)[Kn]=fa(a,o,C,l))}}(o,a,l,ii(l,a)),64==(64&l.flags)&&JE(o,a,l))}function Sl(o,a,l=ii){const d=a.localNames;if(null!==d){let h=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],C=-1===v?l(a,o):o[v];o[h++]=C}}}function Jm(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Zf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function Zf(o,a,l,d,h,g,v,C,E,M,P){const F=Lt+d,Z=F+h,Y=function EC(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Dt);return l}(F,Z),ue="function"==typeof M?M():M;return Y[je]={type:o,blueprint:Y,template:l,queries:null,viewQuery:C,declTNode:a,data:Y.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:ue,incompleteFirstPass:!1,ssrId:P}}let WE=o=>null;function DC(o,a,l,d){for(let h in o)if(o.hasOwnProperty(h)){l=null===l?{}:l;const g=o[h];null===d?YE(l,a,h,g):d.hasOwnProperty(h)&&YE(l,a,d[h],g)}return l}function YE(o,a,l,d){o.hasOwnProperty(l)?o[l].push(a,d):o[l]=[a,d]}function uo(o,a,l,d,h,g,v,C){const E=ii(a,l);let P,M=a.inputs;!C&&null!=M&&(P=M[d])?(jC(o,l,P,d,h),Jo(a)&&function PC(o,a){const l=mi(a,o);16&l[Et]||(l[Et]|=64)}(l,a.index)):3&a.type&&(d=function SC(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),h=null!=v?v(h,a.value||"",d):h,g.setProperty(E,d,h))}function Wf(o,a,l,d){if(nc()){const h=null===d?null:{"":-1},g=function tx(o,a){const l=o.directiveRegistry;let d=null,h=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];if(Ih(a,v.selectors,!1))if(d||(d=[]),Zi(v))if(null!==v.findHostDirectiveDefs){const C=[];h=h||new Map,v.findHostDirectiveDefs(v,C,h),d.unshift(...C,v),kC(o,a,C.length)}else d.unshift(v),kC(o,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,d,h),d.push(v)}return null===d?null:[d,h]}(o,l);let v,C;null===g?v=C=null:[v,C]=g,null!==v&&xC(o,a,l,v,h,C),h&&function nx(o,a,l){if(a){const d=o.localNames=[];for(let h=0;h<a.length;h+=2){const g=l[a[h+1]];if(null==g)throw new ee(-301,!1);d.push(a[h],g)}}}(l,d,h)}l.mergedAttrs=zc(l.mergedAttrs,l.attrs)}function xC(o,a,l,d,h,g){for(let M=0;M<d.length;M++)ac(Dn(l,a),o,d[M].type);!function rx(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}(l,o.data.length,d.length);for(let M=0;M<d.length;M++){const P=d[M];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,E=yc(o,a,d.length,null);for(let M=0;M<d.length;M++){const P=d[M];l.mergedAttrs=zc(l.mergedAttrs,P.hostAttrs),RC(o,l,a,E,P),NC(E,P,h),null!==P.contentQueries&&(l.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=64);const F=P.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((o.preOrderHooks??=[]).push(l.index),v=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(l.index),C=!0),E++}!function JA(o,a,l){const h=a.directiveEnd,g=o.data,v=a.attrs,C=[];let E=null,M=null;for(let P=a.directiveStart;P<h;P++){const F=g[P],Z=l?l.get(F):null,ue=Z?Z.outputs:null;E=DC(F.inputs,P,E,Z?Z.inputs:null),M=DC(F.outputs,P,M,ue);const Se=null===E||null===v||gn(a)?null:HL(E,P,v);C.push(Se)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=8),E.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=E,a.outputs=M}(o,l,g)}function JE(o,a,l){const d=l.directiveStart,h=l.directiveEnd,g=l.index,v=function O1(){return _t.lFrame.currentDirectiveIndex}();try{rs(g);for(let C=d;C<h;C++){const E=o.data[C],M=a[C];cm(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&ex(E,M)}}finally{rs(-1),cm(v)}}function ex(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function kC(o,a,l){a.componentOffset=l,(o.components??=[]).push(a.index)}function NC(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;Zi(a)&&(l[""]=o)}}function RC(o,a,l,d,h){o.data[d]=h;const g=h.factory||(h.factory=Xo(h.type)),v=new ua(g,Zi(h),Dl);o.blueprint[d]=v,l[d]=v,function XA(o,a,l,d,h){const g=h.hostBindings;if(g){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const C=~a.index;(function OC(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(v)!=C&&v.push(C),v.push(l,d,g)}}(o,a,d,yc(o,l,h.hostVars,Dt),h)}function ko(o,a,l,d,h,g){const v=ii(o,a);!function FC(o,a,l,d,h,g,v){if(null==g)o.removeAttribute(a,h,l);else{const C=null==v?re(g):v(g,d||"",h);o.setAttribute(a,h,C,l)}}(a[pt],v,g,o.value,l,d,h)}function LC(o,a,l,d,h,g){const v=g[a];if(null!==v)for(let C=0;C<v.length;)XE(d,l,v[C++],v[C++],v[C++])}function XE(o,a,l,d,h){const g=ri(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(h=v[d].call(a,h)),null!==o.setInput?o.setInput(a,h,l,d):a[d]=h}finally{ri(g)}}function HL(o,a,l){let d=null,h=0;for(;h<l.length;){const g=l[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(o.hasOwnProperty(g)){null===d&&(d=[]);const v=o[g];for(let C=0;C<v.length;C+=2)if(v[C]===a){d.push(g,v[C+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Xm(o,a,l,d){return[o,!0,!1,a,null,0,d,l,null,null,null]}function ox(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const g=l[d+1];if(-1!==g){const v=o.data[g];lm(l[d]),v.contentQueries(2,a[g],g)}}}function UC(o,a){return o[qc]?o[Nv][Ai]=a:o[qc]=a,o[Nv]=a,a}function BC(o,a,l){lm(0);const d=ri(null);try{a(o,l)}finally{ri(d)}}function VC(o){return o[aa]||(o[aa]=[])}function tT(o){return o.cleanup||(o.cleanup=[])}function rT(o,a){const l=o[Yo],d=l?l.get(gc,null):null;d&&d.handleError(a)}function jC(o,a,l,d,h){for(let g=0;g<l.length;){const v=l[g++],C=l[g++];XE(o.data[v],a[v],d,C,h)}}function ds(o,a,l){const d=ts(a,o);!function gl(o,a,l){o.setValue(a,l)}(o[pt],d,l)}function iT(o,a){const l=mi(a,o),d=l[je];!function sx(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])}(d,l);const h=l[Tn];null!==h&&null===l[Eo]&&(l[Eo]=X0(h,l[Yo])),e_(d,l,l[Kn])}function e_(o,a,l){_i(a);try{const d=o.viewQuery;null!==d&&BC(1,d,l);const h=o.template;null!==h&&Qm(o,a,h,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&ox(o,a),o.staticViewQueries&&BC(2,o.viewQuery,l);const g=o.components;null!==g&&function ax(o,a){for(let l=0;l<a.length;l++)iT(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[Et]&=-5,lr()}}let Li=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(l,d,h){const g=typeof Zone>"u"?null:Zone.current,v=function Jv(o,a,l){const d=Object.create(M1);l&&(d.consumerAllowSignalWrites=!0),d.fn=o,d.schedule=a;const h=v=>{d.cleanupFn=v};return d.ref={notify:()=>Gv(d),run:()=>{if(d.dirty=!1,d.hasRun&&!qv(d))return;d.hasRun=!0;const v=zg(d);try{d.cleanupFn(),d.cleanupFn=Yg,d.fn(h)}finally{Du(d,v)}},cleanup:()=>d.cleanupFn()},d.ref}(l,M=>{this.all.has(M)&&this.queue.set(M,g)},h);let C;this.all.add(v),v.notify();const E=()=>{v.cleanup(),C?.(),this.all.delete(v),this.queue.delete(v)};return C=d?.onDestroy(E),{destroy:E}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:o,providedIn:"root",factory:()=>new o})}return o})();function t_(o,a,l){let d=l?o.styles:null,h=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?g=C:1==g?h=Oe(h,C):2==g&&(d=Oe(d,C+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=h:o.classesWithoutHost=h}function Kf(o,a,l,d,h=!1){for(;null!==l;){const g=a[l.index];null!==g&&d.push(an(g)),Br(g)&&$C(g,d);const v=l.type;if(8&v)Kf(o,a,l.child,d);else if(32&v){const C=lo(l,a);let E;for(;E=C();)d.push(E)}else if(16&v){const C=A0(a,l);if(Array.isArray(C))d.push(...C);else{const E=Ca(a[ar]);Kf(E[je],E,C,d,!0)}}l=h?l.projectionNext:l.next}return d}function $C(o,a){for(let l=cr;l<o.length;l++){const d=o[l],h=d[je].firstChild;null!==h&&Kf(d[je],d,h,a)}o[ti]!==o[Tn]&&a.push(o[ti])}function n_(o,a,l,d=!0){const h=a[Ms],g=h.rendererFactory,v=h.afterRenderEventManager;g.begin?.(),v?.begin();try{sT(o,a,o.template,l)}catch(E){throw d&&rT(a,E),E}finally{g.end?.(),h.effectManager?.flush(),v?.end()}}function sT(o,a,l,d){const h=a[Et];if(256!=(256&h)){a[Ms].effectManager?.flush(),_i(a);try{Jg(a),function c0(o){return _t.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&Qm(o,a,l,2,d);const v=3==(3&h);if(v){const M=o.preOrderCheckHooks;null!==M&&ic(a,M,null)}else{const M=o.preOrderHooks;null!==M&&oc(a,M,0,null),Uu(a,0)}if(function lx(o){for(let a=G1(o);null!==a;a=M0(a)){if(!a[Zc])continue;const l=a[Ya];for(let d=0;d<l.length;d++){Xc(l[d])}}}(a),r_(a,2),null!==o.contentQueries&&ox(o,a),v){const M=o.contentCheckHooks;null!==M&&ic(a,M)}else{const M=o.contentHooks;null!==M&&oc(a,M,1),Uu(a,1)}!function WA(o,a){const l=o.hostBindingOpCodes;if(null===l)return;const d=Ml(a,qi);try{for(let h=0;h<l.length;h++){const g=l[h];if(g<0)rs(~g);else{const v=g,C=l[++h],E=l[++h];am(C,v),d.dirty=!1;const M=zg(d);try{E(2,a[v])}finally{Du(d,M)}}}}finally{null===a[qi]&&wC(a,qi),rs(-1)}}(o,a);const C=o.components;null!==C&&dx(a,C,0);const E=o.viewQuery;if(null!==E&&BC(2,E,d),v){const M=o.viewCheckHooks;null!==M&&ic(a,M)}else{const M=o.viewHooks;null!==M&&oc(a,M,2),Uu(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Et]&=-73,n0(a)}finally{lr()}}}function r_(o,a){for(let l=G1(o);null!==l;l=M0(l))for(let d=cr;d<l.length;d++)i_(l[d],a)}function ux(o,a,l){i_(mi(a,o),l)}function i_(o,a){if(!function P1(o){return 128==(128&o[Et])}(o))return;const l=o[je],d=o[Et];if(80&d&&0===a||1024&d||2===a)sT(l,o,l.template,o[Kn]);else if(o[Ko]>0){r_(o,1);const h=l.components;null!==h&&dx(o,h,1)}}function dx(o,a,l){for(let d=0;d<a.length;d++)ux(o,a[d],l)}class o_{get rootNodes(){const a=this._lView,l=a[je];return Kf(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(a){this._lView[Kn]=a}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[mn];if(Br(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Am(a,d),dc(l,d))}this._attachedToViewContainer=!1}D0(this._lView[je],this._lView)}onDestroy(a){!function Yh(o,a){if(256==(256&o[Et]))throw new ee(911,!1);null===o[ca]&&(o[ca]=[]),o[ca].push(a)}(this._lView,a)}markForCheck(){md(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){n_(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cf(o,a){Ef(o,a,a[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=a}}class GL extends o_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;n_(a[je],a,a[Kn],!1)}checkNoChanges(){}get context(){return null}}class hx extends Uf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Ft(a);return new Qf(l,this.ngModule)}}function Yf(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class fx{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=Jt(d);const h=this.injector.get(a,qm,d);return h!==qm||l===qm?h:this.parentInjector.get(a,l,d)}}class Qf extends PE{get inputs(){const a=this.componentDef,l=a.inputTransforms,d=Yf(a.inputs);if(null!==l)for(const h of d)l.hasOwnProperty(h.propName)&&(h.transform=l[h.propName]);return d}get outputs(){return Yf(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function C1(o){return o.map(Lg).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,h){let g=(h=h||this.ngModule)instanceof $s?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new fx(a,g):a,C=v.get(NA,null);if(null===C)throw new ee(407,!1);const F={rendererFactory:C,sanitizer:v.get(FA,null),effectManager:v.get(Li,null),afterRenderEventManager:v.get($f,null)},Z=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=d?function KA(o,a,l,d){const g=d.get(_C,!1)||l===Go.ShadowDom,v=o.selectRootElement(a,g);return function YA(o){WE(o)}(v),v}(Z,d,this.componentDef.encapsulation,v):Pm(Z,Y,function qL(o){const a=o.toLowerCase();return"svg"===a?Qg:"math"===a?"math":null}(Y)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let fe=null;null!==ue&&(fe=X0(ue,v,!0));const Ct=Zf(0,null,null,1,0,null,null,null,null,null,null),St=qs(null,Ct,null,ct,null,null,F,Z,v,null,fe);let ln,Qn;_i(St);try{const ea=this.componentDef;let ta,Zb=null;ea.findHostDirectiveDefs?(ta=[],Zb=new Map,ea.findHostDirectiveDefs(ea,ta,Zb),ta.push(ea)):ta=[ea];const C2=function gx(o,a){const l=o[je],d=Lt;return o[d]=a,_c(l,d,2,"#host",null)}(St,ue),xt=function mx(o,a,l,d,h,g,v){const C=h[je];!function _x(o,a,l,d){for(const h of o)a.mergedAttrs=zc(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(t_(a,a.mergedAttrs,!0),null!==l&&Tf(d,l,a))}(d,o,a,v);let E=null;null!==a&&(E=X0(a,h[Yo]));const M=g.rendererFactory.createRenderer(a,l);let P=16;l.signals?P=4096:l.onPush&&(P=64);const F=qs(h,Jm(l),null,P,h[o.index],o,g,M,null,null,E);return C.firstCreatePass&&kC(C,o,d.length-1),UC(h,F),h[o.index]=F}(C2,ue,ea,ta,St,F,Z);Qn=Wh(Ct,Lt),ue&&function vx(o,a,l,d){if(d)Qr(o,l,["ng-version",Gm.full]);else{const{attrs:h,classes:g}=function Pi(o){const a=[],l=[];let d=1,h=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===h?""!==g&&a.push(g,o[++d]):8===h&&l.push(g);else{if(!pi(h))break;h=g}d++}return{attrs:a,classes:l}}(a.selectors[0]);h&&Qr(o,l,h),g&&g.length>0&&eE(o,l,g.join(" "))}}(Z,ea,ue,d),void 0!==l&&function Cx(o,a,l){const d=o.projection=[];for(let h=0;h<a.length;h++){const g=l[h];d.push(null!=g?Array.from(g):null)}}(Qn,this.ngContentSelectors,l),ln=function yx(o,a,l,d,h,g){const v=Pr(),C=h[je],E=ii(v,h);xC(C,h,v,l,null,d);for(let P=0;P<l.length;P++)wi(fa(h,C,v.directiveStart+P,v),h);JE(C,h,v),E&&wi(E,h);const M=fa(h,C,v.directiveStart+v.componentOffset,v);if(o[Kn]=h[Kn]=M,null!==g)for(const P of g)P(M,a);return Gf(C,v,o),M}(xt,ea,ta,Zb,St,[wx]),e_(Ct,St,null)}finally{lr()}return new px(this.componentType,ln,Bf(Qn,St),St,Qn)}}class px extends kL{constructor(a,l,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new GL(h),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const g=this._rootLView;jC(g[je],g,h,a,l),this.previousInputValues.set(a,l),md(mi(this._tNode.index,g))}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function wx(){const o=Pr();rc(ve()[je],o)}function Ea(o){let a=function Jf(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let h;if(Zi(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ee(903,!1);h=a.\u0275dir}if(h){if(l){d.push(h);const v=o;v.inputs=s_(o.inputs),v.inputTransforms=s_(o.inputTransforms),v.declaredInputs=s_(o.declaredInputs),v.outputs=s_(o.outputs);const C=h.hostBindings;C&&Tx(o,C);const E=h.viewQuery,M=h.contentQueries;if(E&&Ix(o,E),M&&Ex(o,M),G(o.inputs,h.inputs),G(o.declaredInputs,h.declaredInputs),G(o.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),G(v.inputTransforms,h.inputTransforms)),Zi(h)&&h.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(o),C===Ea&&(l=!1)}}a=Object.getPrototypeOf(a)}!function bx(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const h=o[d];h.hostVars=a+=h.hostVars,h.hostAttrs=zc(h.hostAttrs,l=zc(l,h.hostAttrs))}}(d)}function s_(o){return o===Gi?{}:o===Yt?[]:o}function Ix(o,a){const l=o.viewQuery;o.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function Ex(o,a){const l=o.contentQueries;o.contentQueries=l?(d,h,g)=>{a(d,h,g),l(d,h,g)}:a}function Tx(o,a){const l=o.hostBindings;o.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}function uT(o){const a=o.inputConfig,l={};for(const d in a)if(a.hasOwnProperty(d)){const h=a[d];Array.isArray(h)&&h[2]&&(l[d]=h[2])}o.inputTransforms=l}function yd(o){return!!Xf(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function Xf(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Zs(o,a,l){return o[a]=l}function bi(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Al(o,a,l,d){const h=bi(o,a,l);return bi(o,a+1,d)||h}function c_(o,a,l,d,h){const g=Al(o,a,l,d);return bi(o,a+2,h)||g}function ep(o,a,l,d){const h=ve();return bi(h,nl(),a)&&(jt(),ko(bn(),h,o,a,l,d)),ep}function vc(o,a,l,d){return bi(o,nl(),l)?a+re(l)+d:Dt}function d_(o,a,l,d,h,g,v,C){const E=ve(),M=jt(),P=o+Lt,F=M.firstCreatePass?function Lx(o,a,l,d,h,g,v,C,E){const M=a.consts,P=_c(a,o,4,v||null,Ps(M,C));Wf(a,l,P,Ps(M,E)),rc(a,P);const F=P.tView=Zf(2,P,d,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M,null);return null!==a.queries&&(a.queries.template(a,P),F.queries=a.queries.embeddedTView(P)),P}(P,M,E,a,l,d,h,g,v):M.data[P];Mo(F,!1);const Z=tw(M,E,F,o);is()&&bf(M,E,Z,F),wi(Z,E),UC(E,E[P]=Xm(Z,E,Z,F)),Kc(F)&&qf(M,E,F),null!=v&&Sl(E,F,C)}let tw=function h_(o,a,l,d){return os(!0),a[pt].createComment("")};function rw(o){return tc(function s0(){return _t.lFrame.contextLView}(),Lt+o)}function iw(o,a,l){const d=ve();return bi(d,nl(),a)&&uo(jt(),bn(),d,o,a,d[pt],l,!1),iw}function ow(o,a,l,d,h){const v=h?"class":"style";jC(o,l,a.inputs[v],v,d)}function f_(o,a,l,d){const h=ve(),g=jt(),v=Lt+o,C=h[pt],E=g.firstCreatePass?function Vx(o,a,l,d,h,g){const v=a.consts,E=_c(a,o,2,d,Ps(v,h));return Wf(a,l,E,Ps(v,g)),null!==E.attrs&&t_(E,E.attrs,!1),null!==E.mergedAttrs&&t_(E,E.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,E),E}(v,g,h,a,l,d):g.data[v],M=p_(g,h,E,C,a,o);h[v]=M;const P=Kc(E);return Mo(E,!0),Tf(C,M,E),32!=(32&E.flags)&&is()&&bf(g,h,M,E),0===function em(){return _t.lFrame.elementDepthCount}()&&wi(M,h),function tm(){_t.lFrame.elementDepthCount++}(),P&&(qf(g,h,E),Gf(g,E,h)),null!==d&&Sl(h,E),f_}function ap(){let o=Pr();im()?function om(){_t.lFrame.isParent=!1}():(o=o.parent,Mo(o,!1));const a=o;(function el(o){return _t.skipHydrationRootTNode===o})(a)&&function rm(){_t.skipHydrationRootTNode=null}(),function r0(){_t.lFrame.elementDepthCount--}();const l=jt();return l.firstCreatePass&&(rc(l,o),Oh(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function ks(o){return 0!=(8&o.flags)}(a)&&ow(l,a,ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function sl(o){return 0!=(16&o.flags)}(a)&&ow(l,a,ve(),a.stylesWithoutHost,!1),ap}function sw(o,a,l,d){return f_(o,a,l,d),ap(),sw}let p_=(o,a,l,d,h,g)=>(os(!0),Pm(d,h,function dm(){return _t.lFrame.currentNamespace}()));function MT(){return ve()}function lp(o){return!!o&&"function"==typeof o.then}function DT(o){return!!o&&"function"==typeof o.subscribe}function uw(o,a,l,d){const h=ve(),g=jt(),v=Pr();return function dw(o,a,l,d,h,g,v){const C=Kc(d),M=o.firstCreatePass&&tT(o),P=a[Kn],F=VC(a);let Z=!0;if(3&d.type||v){const Se=ii(d,a),$e=v?v(Se):Se,ct=F.length,fe=v?St=>v(an(St[d.index])):d.index;let Ct=null;if(!v&&C&&(Ct=function ST(o,a,l,d){const h=o.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===d){const C=a[aa],E=h[g+2];return C.length>E?C[E]:null}"string"==typeof v&&(g+=2)}return null}(o,a,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=g,Ct.__ngLastListenerFn__=g,Z=!1;else{g=AT(d,a,P,g,!1);const St=l.listen($e,h,g);F.push(g,St),M&&M.push(h,fe,ct,ct+1)}}else g=AT(d,a,P,g,!1);const Y=d.outputs;let ue;if(Z&&null!==Y&&(ue=Y[h])){const Se=ue.length;if(Se)for(let $e=0;$e<Se;$e+=2){const ln=a[ue[$e]][ue[$e+1]].subscribe(g),Qn=F.length;F.push(g,ln),M&&M.push(h,d.index,Qn,-(Qn+1))}}}(g,h,h[pt],v,o,a,d),uw}function PT(o,a,l,d){try{return To(6,a,l),!1!==l(d)}catch(h){return rT(o,h),!1}finally{To(7,a,l)}}function AT(o,a,l,d,h){return function g(v){if(v===Function)return d;md(o.componentOffset>-1?mi(o.index,a):a);let E=PT(a,l,d,v),M=g.__ngNextListenerFn__;for(;M;)E=PT(a,l,M,v)&&E,M=M.__ngNextListenerFn__;return h&&!1===E&&v.preventDefault(),E}}function xT(o=1){return function Lu(o){return(_t.lFrame.contextLView=function tf(o,a){for(;o>0;)a=a[xi],o--;return a}(o,_t.lFrame.contextLView))[Kn]}(o)}function up(o,a,l){return __(o,"",a,"",l),up}function __(o,a,l,d,h){const g=ve(),v=vc(g,a,l,d);return v!==Dt&&uo(jt(),bn(),g,o,v,g[pt],h,!1),__}function v_(o,a){return o<<17|a<<2}function wc(o){return o>>17&32767}function pw(o){return 2|o}function hr(o){return(131068&o)>>2}function gw(o,a){return-131069&o|a<<2}function mw(o){return 1|o}function LT(o,a,l,d,h){const g=o[l+1],v=null===a;let C=d?wc(g):hr(g),E=!1;for(;0!==C&&(!1===E||v);){const P=o[C+1];yw(o[C],a)&&(E=!0,o[C+1]=d?mw(P):pw(P)),C=d?wc(P):hr(P)}E&&(o[l+1]=d?pw(g):mw(g))}function yw(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&hc(o,a)>=0}const xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UT(o){return o.substring(xr.key,xr.keyEnd)}function BT(o,a){const l=xr.textEnd;return l===a?-1:(a=xr.keyEnd=function Cw(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,xr.key=a,l),Md(o,a,l))}function Md(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function ww(o,a){return function ho(o,a,l,d){const h=ve(),g=jt(),v=Do(2);g.firstUpdatePass&&HT(g,o,v,d),a!==Dt&&bi(h,v,a)&&GT(g,g.data[oi()],h,h[pt],o,h[v+1]=function Ys(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=X(pc(o)))),o}(a,l),d,v)}(o,a,null,!0),ww}function b_(o){!function hs(o,a,l,d){const h=jt(),g=Do(2);h.firstUpdatePass&&HT(h,null,g,d);const v=ve();if(l!==Dt&&bi(v,g,l)){const C=h.data[oi()];if(Mw(C,d)&&!I_(h,g)){let E=d?C.classesWithoutHost:C.stylesWithoutHost;null!==E&&(l=Oe(E,l||"")),ow(h,C,v,l,d)}else!function Tw(o,a,l,d,h,g,v,C){h===Dt&&(h=Yt);let E=0,M=0,P=0<h.length?h[0]:null,F=0<g.length?g[0]:null;for(;null!==P||null!==F;){const Z=E<h.length?h[E+1]:void 0,Y=M<g.length?g[M+1]:void 0;let Se,ue=null;P===F?(E+=2,M+=2,Z!==Y&&(ue=F,Se=Y)):null===F||null!==P&&P<F?(E+=2,ue=P):(M+=2,ue=F,Se=Y),null!==ue&&GT(o,a,l,d,ue,Se,v,C),P=E<h.length?h[E]:null,F=M<g.length?g[M]:null}}(h,C,v,v[pt],v[g+1],v[g+1]=function zT(o,a,l){if(null==l||""===l)return Yt;const d=[],h=pc(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)o(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&o(d,g,h[g]);else"string"==typeof h&&a(d,h);return d}(o,a,l),d,g)}}(eO,Ks,o,!0)}function Ks(o,a){for(let l=function Wx(o){return function VT(o){xr.key=0,xr.keyEnd=0,xr.value=0,xr.valueEnd=0,xr.textEnd=o.length}(o),BT(o,Md(o,0,xr.textEnd))}(a);l>=0;l=BT(a,l))Ni(o,UT(a),!0)}function I_(o,a){return a>=o.expandoStartIndex}function HT(o,a,l,d){const h=o.data;if(null===h[l+1]){const g=h[oi()],v=I_(o,l);Mw(g,d)&&null===a&&!v&&(a=!1),a=function bw(o,a,l,d){const h=function Xh(o){const a=_t.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=Fl(l=hp(null,o,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(l=hp(h,o,a,l,d),null===g){let E=function Jx(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==hr(d))return o[wc(d)]}(o,a,d);void 0!==E&&Array.isArray(E)&&(E=hp(null,o,a,E[1],d),E=Fl(E,a.attrs,d),function Iw(o,a,l,d){o[wc(l?a.classBindings:a.styleBindings)]=d}(o,a,d,E))}else g=function Xx(o,a,l){let d;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)d=Fl(d,o[g].hostAttrs,l);return Fl(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(h,g,a,d),function qx(o,a,l,d,h,g){let v=g?a.classBindings:a.styleBindings,C=wc(v),E=hr(v);o[d]=l;let P,M=!1;if(Array.isArray(l)?(P=l[1],(null===P||hc(l,P)>0)&&(M=!0)):P=l,h)if(0!==E){const Z=wc(o[C+1]);o[d+1]=v_(Z,C),0!==Z&&(o[Z+1]=gw(o[Z+1],d)),o[C+1]=function $r(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=v_(C,0),0!==C&&(o[C+1]=gw(o[C+1],d)),C=d;else o[d+1]=v_(E,0),0===C?C=d:o[E+1]=gw(o[E+1],d),E=d;M&&(o[d+1]=pw(o[d+1])),LT(o,P,d,!0),LT(o,P,d,!1),function _w(o,a,l,d,h){const g=h?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&hc(g,a)>=0&&(l[d+1]=mw(l[d+1]))}(a,P,o,d,g),v=v_(C,E),g?a.classBindings=v:a.styleBindings=v}(h,g,a,l,v,d)}}function hp(o,a,l,d,h){let g=null;const v=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<v&&(g=a[C],d=Fl(d,g.hostAttrs,h),g!==o);)C++;return null!==o&&(l.directiveStylingLast=C),d}function Fl(o,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?h=v:h===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ni(o,v,!!l||a[++g]))}return void 0===o?null:o}function eO(o,a,l){const d=String(a);""!==d&&!d.includes(" ")&&Ni(o,d,l)}function GT(o,a,l,d,h,g,v,C){if(!(3&a.type))return;const E=o.data,M=E[C+1],P=function FT(o){return 1==(1&o)}(M)?E_(E,a,l,h,hr(M),v):void 0;T_(P)||(T_(g)||function fw(o){return 2==(2&o)}(M)&&(g=E_(E,null,l,h,C,v)),function oA(o,a,l,d,h){if(a)h?o.addClass(l,d):o.removeClass(l,d);else{let g=-1===d.indexOf("-")?void 0:ff.DashCase;null==h?o.removeStyle(l,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=ff.Important),o.setStyle(l,d,h,g))}}(d,v,ts(oi(),l),h,g))}function E_(o,a,l,d,h,g){const v=null===a;let C;for(;h>0;){const E=o[h],M=Array.isArray(E),P=M?E[1]:E,F=null===P;let Z=l[h+1];Z===Dt&&(Z=F?Yt:void 0);let Y=F?uf(Z,d):P===d?Z:void 0;if(M&&!T_(Y)&&(Y=uf(E,d)),T_(Y)&&(C=Y,v))return C;const ue=o[h+1];h=v?wc(ue):hr(ue)}if(null!==a){let E=g?a.residualClasses:a.residualStyles;null!=E&&(C=uf(E,d))}return C}function T_(o){return void 0!==o}function Mw(o,a){return 0!=(o.flags&(a?8:16))}function Dw(o,a=""){const l=ve(),d=jt(),h=o+Lt,g=d.firstCreatePass?_c(d,h,1,a,null):d.data[h],v=fp(d,l,g,a,o);l[h]=v,is()&&bf(d,l,v,g),Mo(g,!1)}let fp=(o,a,l,d,h)=>(os(!0),function Sm(o,a){return o.createText(a)}(a[pt],d));function Ro(o){return Dd("",o,""),Ro}function Dd(o,a,l){const d=ve(),h=vc(d,o,a,l);return h!==Dt&&ds(d,oi(),h),Dd}function WT(o,a,l,d,h){const g=ve(),v=function vd(o,a,l,d,h,g){const C=Al(o,xs(),l,h);return Do(2),C?a+re(l)+d+re(h)+g:Dt}(g,o,a,l,d,h);return v!==Dt&&ds(g,oi(),v),WT}function Sw(o,a,l,d,h,g,v){const C=ve(),E=function Cd(o,a,l,d,h,g,v,C){const M=c_(o,xs(),l,h,v);return Do(3),M?a+re(l)+d+re(h)+g+re(v)+C:Dt}(C,o,a,l,d,h,g,v);return E!==Dt&&ds(C,oi(),E),Sw}const Fo=void 0;var eM=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pd(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Ad={};function Ta(o){const a=function dO(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=uO(a);if(l)return l;const d=a.split("-")[0];if(l=uO(d),l)return l;if("en"===d)return eM;throw new ee(701,!1)}function bc(o){return Ta(o)[Hr.PluralCase]}function uO(o){return o in Ad||(Ad[o]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[o]),Ad[o]}var Hr=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(Hr||{});const Ic="en-US";let Lo=Ic;function Ep(o,a,l,d,h){if(o=Ce(o),Array.isArray(o))for(let g=0;g<o.length;g++)Ep(o[g],a,l,d,h);else{const g=jt(),v=ve(),C=Pr();let E=ud(o)?o:Ce(o.provide);const M=z0(o),P=1048575&C.providerIndexes,F=C.directiveStart,Z=C.providerIndexes>>20;if(ud(o)||!o.multi){const Y=new ua(M,h,Dl),ue=Vl(E,a,h?P:P+Z,F);-1===ue?(ac(Dn(C,v),g,E),q_(g,o,a.length),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(Y),v.push(Y)):(l[ue]=Y,v[ue]=Y)}else{const Y=Vl(E,a,P+Z,F),ue=Vl(E,a,P,P+Z),$e=ue>=0&&l[ue];if(h&&!$e||!h&&!(Y>=0&&l[Y])){ac(Dn(C,v),g,E);const ct=function W_(o,a,l,d,h){const g=new ua(o,l,Dl);return g.multi=[],g.index=a,g.componentProviders=0,wM(g,h,d&&!l),g}(h?IM:bM,l.length,h,d,M);!h&&$e&&(l[ue].providerFactory=ct),q_(g,o,a.length,0),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(ct),v.push(ct)}else q_(g,o,Y>-1?Y:ue,wM(l[h?ue:Y],M,!h&&d));!h&&d&&$e&&l[ue].componentProviders++}}}function q_(o,a,l,d){const h=ud(a),g=function ML(o){return!!o.useClass}(a);if(h||g){const E=(g?Ce(a.useClass):a).prototype.ngOnDestroy;if(E){const M=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const P=M.indexOf(l);-1===P?M.push(l,[d,E]):M[P+1].push(d,E)}else M.push(l,E)}}}function wM(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Vl(o,a,l,d){for(let h=l;h<d;h++)if(a[h]===o)return h;return-1}function bM(o,a,l,d){return Z_(this.multi,[])}function IM(o,a,l,d){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=fa(l,l[je],this.providerFactory.index,d);g=C.slice(0,v),Z_(h,g);for(let E=v;E<C.length;E++)g.push(C[E])}else g=[],Z_(h,g);return g}function Z_(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function EM(o,a=[]){return l=>{l.providersResolver=(d,h)=>function Zw(o,a,l){const d=jt();if(d.firstCreatePass){const h=Zi(o);Ep(l,d.data,d.blueprint,h,!0),Ep(a,d.data,d.blueprint,h,!1)}}(d,h?h(o):o,a)}}class jl{}class $l{}function MO(o,a){return new Da(o,a??null,[])}class Da extends jl{constructor(a,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hx(this);const h=Xr(a);this._bootstrapComponents=Ia(h.bootstrap),this._r3Injector=FE(a,l,[{provide:jl,useValue:this},{provide:Uf,useValue:this.componentFactoryResolver},...d],X(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class K_ extends $l{constructor(a){super(),this.moduleType=a}create(a){return new Da(this.moduleType,a,[])}}class Ww extends jl{constructor(a){super(),this.componentFactoryResolver=new hx(this),this.instance=null;const l=new Of([...a.providers,{provide:jl,useValue:this},{provide:Uf,useValue:this.componentFactoryResolver}],a.parent||Cl(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Fd(o,a,l=null){return new Ww({providers:o,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let TM=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const d=CE(0,l.type),h=d.length>0?Fd([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,h)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:o,providedIn:"environment",factory:()=>new o(Ve($s))})}return o})();function Ei(o){o.getStandaloneInjector=a=>a.get(TM).getOrCreateStandaloneInjector(o)}function ty(o,a,l){const d=Ar()+o,h=ve();return h[d]===Dt?Zs(h,d,l?a.call(l):a()):function Pl(o,a){return o[a]}(h,d)}function Jw(o,a,l,d){return OM(ve(),Ar(),o,a,l,d)}function Xw(o,a,l,d,h){return function kM(o,a,l,d,h,g,v){const C=a+l;return Al(o,C,h,g)?Zs(o,C+2,v?d.call(v,h,g):d(h,g)):zl(o,C+2)}(ve(),Ar(),o,a,l,d,h)}function zl(o,a){const l=o[a];return l===Dt?void 0:l}function OM(o,a,l,d,h,g){const v=a+l;return bi(o,v,h)?Zs(o,v+1,g?d.call(g,h):d(h)):zl(o,v+1)}function Ec(o,a){const l=jt();let d;const h=o+Lt;l.firstCreatePass?(d=function Sa(o,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(o===d.name)return d}}(a,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks??=[]).push(h,d.onDestroy)):d=l.data[h];const g=d.factory||(d.factory=Xo(d.type)),C=sn(Dl);try{const E=Cr(!1),M=g();return Cr(E),function Bx(o,a,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=d}(l,ve(),h,M),M}finally{sn(C)}}function ib(o,a,l){const d=o+Lt,h=ve(),g=tc(h,d);return Np(h,d)?OM(h,Ar(),a,g.transform,l,g):g.transform(l)}function xp(o,a,l,d,h){const g=o+Lt,v=ve(),C=tc(v,g);return Np(v,g)?function eb(o,a,l,d,h,g,v,C){const E=a+l;return c_(o,E,h,g,v)?Zs(o,E+3,C?d.call(C,h,g,v):d(h,g,v)):zl(o,E+3)}(v,Ar(),a,C.transform,l,d,h,C):C.transform(l,d,h)}function Np(o,a){return o[je].data[a].pure}function RM(){return this._results[Symbol.iterator]()}class ob{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Hs)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=ob.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=RM)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=function ai(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Cm(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let h=o[d],g=a[d];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function PO(o,a,l,d=!0){const h=a[je];if(function XP(o,a,l,d){const h=cr+d,g=l.length;d>0&&(l[h-1][Ai]=a),d<g-cr?(a[Ai]=l[h],f0(l,cr+d,a)):(l.push(a),a[Ai]=null),a[mn]=l;const v=a[Ka];null!==v&&l!==v&&function eA(o,a){const l=o[Ya];a[ar]!==a[mn][mn][ar]&&(o[Zc]=!0),null===l?o[Ya]=[a]:l.push(a)}(v,a);const C=a[ei];null!==C&&C.insertView(o),a[Et]|=128}(h,a,o,l),d){const g=x0(l,o),v=a[pt],C=xm(v,o[ti]);null!==C&&function vf(o,a,l,d,h,g){d[Tn]=h,d[Sr]=a,Ef(o,d,l,1,h,g)}(h,o[Sr],v,a,C,g)}}let Uo=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=UM}return o})();const FM=Uo,LM=class extends FM{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,d){const h=function SO(o,a,l,d){const h=a.tView,C=qs(o,h,l,4096&o[Et]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[Ka]=o[a.index];const M=o[ei];return null!==M&&(C[ei]=M.createEmbeddedView(h)),e_(h,C,l),C}(this._declarationLView,this._declarationTContainer,a,{injector:l,hydrationInfo:d});return new o_(h)}};function UM(){return Pa(Pr(),ve())}function Pa(o,a){return 4&o.type?new LM(a,o,Bf(o,a)):null}let sy=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=xO}return o})();function xO(){return Fp(Pr(),ve())}const OO=sy,HM=class extends OO{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Bf(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){const a=ha(this._hostTNode,this._hostLView);if(ju(a)){const l=Ut(a,this._hostLView),d=ki(a);return new dr(l[je].data[d+8],l)}return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Rp(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(a,l,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const C=a.createEmbeddedViewImpl(l||{},g,null);return this.insertImpl(C,h,false),C}createComponent(a,l,d,h,g){const v=a&&!function cs(o){return"function"==typeof o}(a);let C;if(v)C=l;else{const Se=l||{};C=Se.index,d=Se.injector,h=Se.projectableNodes,g=Se.environmentInjector||Se.ngModuleRef}const E=v?a:new Qf(Ft(a)),M=d||this.parentInjector;if(!g&&null==E.ngModule){const $e=(v?M:this.parentInjector).get($s,null);$e&&(g=$e)}Ft(E.componentType??{});const Y=E.create(M,h,null,g);return this.insertImpl(Y.hostView,C,false),Y}insert(a,l){return this.insertImpl(a,l,!1)}insertImpl(a,l,d){const h=a._lView;if(function Nu(o){return Br(o[mn])}(h)){const E=this.indexOf(a);if(-1!==E)this.detach(E);else{const M=h[mn],P=new HM(M,M[Sr],M[mn]);P.detach(P.indexOf(a))}}const v=this._adjustIndex(l),C=this._lContainer;return PO(C,h,v,!d),a.attachToViewContainerRef(),f0(Gl(C),v,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Rp(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Am(this._lContainer,l);d&&(dc(Gl(this._lContainer),l),D0(d[je],d))}detach(a){const l=this._adjustIndex(a,-1),d=Am(this._lContainer,l);return d&&null!=dc(Gl(this._lContainer),l)?new o_(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function Rp(o){return o[8]}function Gl(o){return o[8]||(o[8]=[])}function Fp(o,a){let l;const d=a[o.index];return Br(d)?l=d:(l=Xm(d,a,null,o),a[o.index]=l,UC(a,l)),ub(l,a,o,d),new HM(l,o,a)}let ub=function Ud(o,a,l,d){if(o[ti])return;let h;h=8&l.type?an(d):function lb(o,a){const l=o[pt],d=l.createComment(""),h=ii(a,o);return yl(l,xm(l,h),d,function rA(o,a){return o.nextSibling(a)}(l,h),!1),d}(a,l),o[ti]=h};class Bn{constructor(a){this.queryList=a,this.matches=null}clone(){return new Bn(this.queryList)}setDirty(){this.queryList.setDirty()}}class ay{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new ay(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==_b(a,l).matches&&this.queries[l].setDirty()}}class zM{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class db{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,h);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new db(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class hb{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new hb(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(a,l,GM(l,g)),this.matchTNodeWithReadOption(a,l,Rs(l,a,g,!1,!1))}else d===Uo?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Rs(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Tl||h===sy||h===Uo&&4&l.type)this.addMatch(l.index,-2);else{const g=Rs(l,a,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function GM(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function ZM(o,a,l,d){return-1===l?function qM(o,a){return 11&o.type?Bf(o,a):4&o.type?Pa(o,a):null}(a,o):-2===l?function cy(o,a,l){return l===Tl?Bf(a,o):l===Uo?Pa(a,o):l===sy?Fp(a,o):void 0}(o,a,d):fa(o,o[je],l,a)}function fb(o,a,l,d){const h=a[ei].queries[d];if(null===h.matches){const g=o.data,v=l.matches,C=[];for(let E=0;E<v.length;E+=2){const M=v[E];C.push(M<0?null:ZM(a,g[M],v[E+1],l.metadata.read))}h.matches=C}return h.matches}function Bo(o,a,l,d){const h=o.queries.getByIndex(l),g=h.matches;if(null!==g){const v=fb(o,a,h,l);for(let C=0;C<g.length;C+=2){const E=g[C];if(E>0)d.push(v[C/2]);else{const M=g[C+1],P=a[-E];for(let F=cr;F<P.length;F++){const Z=P[F];Z[Ka]===Z[mn]&&Bo(Z[je],Z,M,d)}if(null!==P[Ya]){const F=P[Ya];for(let Z=0;Z<F.length;Z++){const Y=F[Z];Bo(Y[je],Y,M,d)}}}}}return d}function pb(o){const a=ve(),l=jt(),d=l0();lm(d+1);const h=_b(l,d);if(o.dirty&&function Kh(o){return 4==(4&o[Et])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const g=h.crossesNgTemplate?Bo(l,a,d,[]):fb(l,a,h,d);o.reset(g,Fi),o.notifyOnChanges()}return!0}return!1}function WM(o,a,l){const d=jt();d.firstCreatePass&&(uy(d,new zM(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),mb(d,ve(),a)}function gb(o,a,l,d){const h=jt();if(h.firstCreatePass){const g=Pr();uy(h,new zM(a,l,d),g.index),function dy(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(h,o),2==(2&l)&&(h.staticContentQueries=!0)}mb(h,ve(),l)}function ly(){return function Up(o,a){return o[ei].queries[a].queryList}(ve(),l0())}function mb(o,a,l){const d=new ob(4==(4&l));(function MC(o,a,l,d){const h=VC(a);h.push(l),o.firstCreatePass&&tT(o).push(d,h.length-1)})(o,a,d,d.destroy),null===a[ei]&&(a[ei]=new ay),a[ei].queries.push(new Bn(d))}function uy(o,a,l){null===o.queries&&(o.queries=new db),o.queries.track(new hb(a,l))}function _b(o,a){return o.queries.getByIndex(a)}function Bp(o,a){return Pa(o,a)}function fy(o){return!!Xr(o)}const rt=new cn("Application Initializer");let Eb=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=Ke(rt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const h of this.appInits){const g=h();if(lp(g))l.push(g);else if(DT(g)){const v=new Promise((C,E)=>{g.subscribe({complete:C,error:E})});l.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ze=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const ye=new cn("LocaleId",{providedIn:"root",factory:()=>Ke(ye,dt.Optional|dt.SkipSelf)||function ae(){return typeof $localize<"u"&&$localize.locale||Ic}()}),Nr=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let cD=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class GO{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let qO=(()=>{class o{compileModuleSync(l){return new K_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=Ia(Xr(l).declarations).reduce((v,C)=>{const E=Ft(C);return E&&v.push(new Qf(E)),v},[]);return new GO(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Iy=new cn(""),te=new cn("");let Xl,Ey=(()=>{class o{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xl||(function QO(o){Xl=o}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||o)(Ve(jr),Ve(Vo),Ve(te))};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac})}return o})(),Vo=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Xl?.findTestabilityInTree(this,l,d)??null}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),Bi=null;const hD=new cn("AllowMultipleToken"),xa=new cn("PlatformDestroyListeners"),Ty=new cn("appBootstrapListener");class Kp{constructor(a,l){this.name=a,this.token=l}}function Sb(o,a,l=[]){const d=`Platform: ${a}`,h=new cn(d);return(g=[])=>{let v=My();if(!v||v.injector.get(hD,!1)){const C=[...l,...g,{provide:h,useValue:!0}];o?o(C):function Yp(o){if(Bi&&!Bi.get(hD,!1))throw new ee(400,!1);(function fD(){!function Zg(o){Yv=o}(()=>{throw new ee(600,!1)})})(),Bi=o;const a=o.get(gD);(function di(o){o.get(EE,null)?.forEach(l=>l())})(o)}(function Pb(o=[],a){return us.create({name:a,providers:[{provide:R,useValue:"platform"},{provide:xa,useValue:new Set([()=>Bi=null])},...o]})}(C,d))}return function Js(o){const a=My();if(!a)throw new ee(401,!1);return a}()}}function My(){return Bi?.get(gD)??null}let gD=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function JO(o="zone.js",a){return"noop"===o?new dC:"zone.js"===o?new jr(a):o}(d?.ngZone,function mD(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const g=function Y_(o,a,l){return new Da(o,a,l)}(l.moduleType,this.injector,function wD(o){return[{provide:jr,useFactory:o},{provide:ld,multi:!0,useFactory:()=>{const a=Ke(e2,{optional:!0});return()=>a.initialize()}},{provide:CD,useFactory:XO},{provide:hC,useFactory:fC}]}(()=>h)),v=g.injector.get(gc,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:E=>{v.handleError(E)}});g.onDestroy(()=>{Dy(this._modules,g),C.unsubscribe()})}),function _D(o,a,l){try{const d=l();return lp(d)?d.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(v,h,()=>{const C=g.injector.get(Eb);return C.runInitializers(),C.donePromise.then(()=>(function We(o){Qe(o,"Expected localeId to be defined"),"string"==typeof o&&(Lo=o.toLowerCase().replace(/_/g,"-"))}(g.injector.get(ye,Ic)||Ic),this._moduleDoBootstrap(g),g))})})}bootstrapModule(l,d=[]){const h=yD({},d);return function Db(o,a,l){const d=new K_(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const d=l.injector.get(Hd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ee(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(xa,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||o)(Ve(us))};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function yD(o,a){return Array.isArray(a)?a.reduce(yD,o):{...o,...a}}let Hd=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(CD),this.zoneIsStable=Ke(hC),this.componentTypes=[],this.components=[],this.isStable=Ke(cD).hasPendingTasks.pipe((0,Fe.w)(l=>l?(0,be.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,xe.B)()),this._injector=Ke($s)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof PE;if(!this._injector.get(Eb).done)throw!h&&Wa(l),new ee(405,!1);let v;v=h?l:this._injector.get(Uf).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const C=function go(o){return o.isBoundToModule}(v)?void 0:this._injector.get(jl),M=v.create(us.NULL,[],d||v.selector,C),P=M.location.nativeElement,F=M.injector.get(Iy,null);return F?.registerApplication(P),M.onDestroy(()=>{this.detachView(M.hostView),Dy(this.components,M),F?.unregisterApplication(P)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Dy(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(Ty,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Dy(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ee(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Dy(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}const CD=new cn("",{providedIn:"root",factory:()=>Ke(gc).handleError.bind(void 0)});function XO(){const o=Ke(jr),a=Ke(gc);return l=>o.runOutsideAngular(()=>a.handleError(l))}let e2=(()=>{class o{constructor(){this.zone=Ke(jr),this.applicationRef=Ke(Hd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function n2(){return!1}let o2=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=Ob}return o})();function Ob(o){return function Gr(o,a,l){if(Jo(o)&&!l){const d=mi(o.index,a);return new o_(d,d)}return 47&o.type?new o_(a[ar],a):null}(Pr(),ve(),16==(16&o))}class Oa{constructor(){}supports(a){return yd(a)}create(a){return new Py(a)}}const Dc=(o,a)=>a;class Py{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Dc}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<ka(d,h,g)?l:d,C=ka(v,h,g),E=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const M=C-h,P=E-h;if(M!=P){for(let Z=0;Z<M;Z++){const Y=Z<g.length?g[Z]:g[Z]=0,ue=Y+Z;P<=ue&&ue<M&&(g[Z]=Y+1)}g[v.previousIndex]=P-M}}C!==E&&a(v,C,E)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!yd(a))throw new ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],v=this._trackByFn(C,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,C)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,C),d=!0),l=l._next}else h=0,function zC(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(h,C),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,C,v,h)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,h)):a=this._addAfter(new Sc(l,d),g,h),a}_verifyReinsertion(a,l,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new Gd),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gd),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Sc{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xs{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class Gd{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new Xs,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ka(o,a,l){const d=o.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class Fb{constructor(){}supports(a){return a instanceof Map||Xf(a)}create(){return new qd}}class qd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Xf(a)))throw new ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const d=new Lb(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class Lb{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qp(){return new Na([new Oa])}let Na=(()=>{class o{static#e=this.\u0275prov=ft({token:o,providedIn:"root",factory:Qp});constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Qp()),deps:[[o,new He,new se]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new ee(901,!1)}}return o})();function Zd(){return new Ay([new Fb])}let Ay=(()=>{class o{static#e=this.\u0275prov=ft({token:o,providedIn:"root",factory:Zd});constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Zd()),deps:[[o,new He,new se]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new ee(901,!1)}}return o})();const l2=Sb(null,"core",[]);let u2=(()=>{class o{constructor(l){}static#e=this.\u0275fac=function(d){return new(d||o)(Ve(Hd))};static#t=this.\u0275mod=Dh({type:o});static#n=this.\u0275inj=Nn({})}return o})();function g2(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function La(o){const a=Ft(o);if(!a)return null;const l=new Qf(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(ot,Ie,L)=>{L.d(Ie,{Z:()=>Je});var c=L(9058),V=L(4537),U=L(7592),ne=L(7879);class ge{constructor(De,Te){this._delegate=De,this.firebase=Te,(0,U._addComponent)(De,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(De,Te=U._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(De);return!st.isInitialized()&&"EXPLICIT"===(null===(tt=st.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&st.initialize(),st.getImmediate({identifier:Te})}_removeServiceInstance(De,Te=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(Te)}_addComponent(De){(0,U._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,U._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function Me(){const Ce=function Fe(Ce){const De={},Te={__esModule:!0,initializeApp:function ee(Re,j={}){const we=U.initializeApp(Re,j);if((0,c.r3)(De,we.name))return De[we.name];const Ue=new Ce(we,Te);return De[we.name]=Ue,Ue},app:st,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function re(Re){const j=Re.name,we=j.replace("-compat","");if(U._registerComponent(Re)&&"PUBLIC"===Re.type){const Ue=(lt=st())=>{if("function"!=typeof lt[we])throw xe.create("invalid-app-argument",{appName:j});return lt[we]()};void 0!==Re.serviceProps&&(0,c.ZB)(Ue,Re.serviceProps),Te[we]=Ue,Ce.prototype[we]=function(...lt){return this._getService.bind(this,j).apply(this,Re.multipleInstances?lt:[])}}return"PUBLIC"===Re.type?Te[we]:null},removeApp:function tt(Re){delete De[Re]},useAsService:function he(Re,j){return"serverAuth"===j?null:j},modularAPIs:U}};function st(Re){if(!(0,c.r3)(De,Re=Re||U._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:Re});return De[Re]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function de(){return Object.keys(De).map(Re=>De[Re])}}),st.App=Ce,Te}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function De(Te){(0,c.ZB)(Ce,Te)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ce}(),G=new ne.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=B;!function Ae(Ce){(0,U.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},7592:(ot,Ie,L)=>{L.r(Ie),L.d(Ie,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Nn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>ke,_apps:()=>le,_clearComponents:()=>ht,_components:()=>oe,_getProvider:()=>Be,_registerComponent:()=>Qe,_removeServiceInstance:()=>nn,deleteApp:()=>Si,getApp:()=>on,getApps:()=>Zn,initializeApp:()=>En,onLog:()=>Wn,registerVersion:()=>_r,setLogLevel:()=>Kr});var c=L(5861),V=L(4537),U=L(7879),ne=L(9058),ge=L(1878);class be{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function xe(Ge){const _e=Ge.getComponent();return"VERSION"===_e?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",B=new U.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,oe=new Map;function pe(Ge,_e){try{Ge.container.addComponent(_e)}catch(Xe){B.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function ke(Ge,_e){Ge.container.addOrOverwriteComponent(_e)}function Qe(Ge){const _e=Ge.name;if(oe.has(_e))return B.debug(`There were multiple attempts to register component ${_e}.`),!1;oe.set(_e,Ge);for(const Xe of le.values())pe(Xe,Ge);return!0}function Be(Ge,_e){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(_e)}function nn(Ge,_e,Xe=ie){Be(Ge,_e).clearInstance(Xe)}function ht(){oe.clear()}const ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rn{constructor(_e,Xe,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Nn="9.23.0";function En(Ge,_e={}){let Xe=Ge;"object"!=typeof _e&&(_e={name:_e});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),Rt=it.name;if("string"!=typeof Rt||!Rt)throw ft.create("bad-app-name",{appName:String(Rt)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw ft.create("no-options");const Vt=le.get(Rt);if(Vt){if((0,ne.vZ)(Xe,Vt.options)&&(0,ne.vZ)(it,Vt.config))return Vt;throw ft.create("duplicate-app",{appName:Rt})}const tr=new V.H0(Rt);for(const $ of oe.values())tr.addComponent($);const H=new rn(Xe,it,tr);return le.set(Rt,H),H}function on(Ge=ie){const _e=le.get(Ge);if(!_e&&Ge===ie&&(0,ne.aH)())return En();if(!_e)throw ft.create("no-app",{appName:Ge});return _e}function Zn(){return Array.from(le.values())}function Si(Ge){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(Ge){const _e=Ge.name;le.has(_e)&&(le.delete(_e),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function _r(Ge,_e,Xe){var it;let Rt=null!==(it=ce[Ge])&&void 0!==it?it:Ge;Xe&&(Rt+=`-${Xe}`);const Vt=Rt.match(/\s|\//),tr=_e.match(/\s|\//);if(Vt||tr){const H=[`Unable to register library "${Rt}" with version "${_e}":`];return Vt&&H.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Vt&&tr&&H.push("and"),tr&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void B.warn(H.join(" "))}Qe(new V.wA(`${Rt}-version`,()=>({library:Rt,version:_e}),"VERSION"))}function Wn(Ge,_e){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,U.Am)(Ge,_e)}function Kr(Ge){(0,U.Ub)(Ge)}const bo="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Tt=null;function sn(){return Tt||(Tt=(0,ge.X3)(bo,dt,{upgrade:(Ge,_e)=>{0===_e&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Tt}function Yr(){return(Yr=(0,c.Z)(function*(Ge){try{return yield(yield sn()).transaction(mt).objectStore(mt).get(Io(Ge))}catch(_e){if(_e instanceof ne.ZR)B.warn(_e.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:_e?.message});B.warn(Xe.message)}}})).apply(this,arguments)}function Nt(Ge,_e){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(Ge,_e){try{const it=(yield sn()).transaction(mt,"readwrite");yield it.objectStore(mt).put(_e,Io(Ge)),yield it.done}catch(Xe){if(Xe instanceof ne.ZR)B.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});B.warn(it.message)}}})).apply(this,arguments)}function Io(Ge){return`${Ge.name}!${Ge.options.appId}`}class Bt{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new so(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,c.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Fn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!_e._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Rt))return _e._heartbeatsCache.heartbeats.push({date:Rt,agent:it}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Vt=>{const tr=new Date(Vt.date).valueOf();return Date.now()-tr<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,c.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=Fn(),{heartbeatsToSend:it,unsentEntries:Rt}=function Hi(Ge,_e=1024){const Xe=[];let it=Ge.slice();for(const Rt of Ge){const Vt=Xe.find(tr=>tr.agent===Rt.agent);if(Vt){if(Vt.dates.push(Rt.date),ao(Xe)>_e){Vt.dates.pop();break}}else if(Xe.push({agent:Rt.agent,dates:[Rt.date]}),ao(Xe)>_e){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(_e._heartbeatsCache.heartbeats),Vt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,Rt.length>0?(_e._heartbeatsCache.heartbeats=Rt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Vt})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class so{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,c.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function fi(Ge){return Yr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,..._e.heartbeats]})}})()}}function ao(Ge){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function yr(Ge){Qe(new V.wA("platform-logger",_e=>new be(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Bt(_e),"PRIVATE")),_r(Fe,"0.9.13",Ge),_r(Fe,"0.9.13","esm2017"),_r("fire-js","")}("")},120:(ot,Ie,L)=>{L.d(Ie,{Z:()=>c.Z});var c=L(3399);c.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(ot,Ie,L)=>{L.r(Ie);var c=L(5861),V=L(3399),U=L(6710),ne=L(9058),xe=(L(7592),L(7879),L(4537));function Fe(){return window}function G(){return G=(0,c.Z)(function*(O,k,A){var K;const{BuildInfo:me}=Fe();(0,U.as)(k.sessionId,"AuthEvent did not contain a session ID");const Ve=yield function Te(O){return tt.apply(this,arguments)}(k.sessionId),vt={};return(0,U.at)()?vt.ibi=me.packageName:(0,U.au)()?vt.apn=me.packageName:(0,U.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Ve,(0,U.aw)(O,A,k.type,void 0,null!==(K=k.eventId)&&void 0!==K?K:void 0,vt)}),G.apply(this,arguments)}function Oe(){return(Oe=(0,c.Z)(function*(O){const{BuildInfo:k}=Fe(),A={};(0,U.at)()?A.iosBundleId=k.packageName:(0,U.au)()?A.androidPackageName=k.packageName:(0,U.av)(O,"operation-not-supported-in-this-environment"),yield(0,U.ax)(O,A)})).apply(this,arguments)}function Ce(){return(Ce=(0,c.Z)(function*(O,k,A){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Ve,vt)=>{let Ke=null;function Jt(){var At;Ve();const zi=null===(At=K.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof zi&&zi(),"function"==typeof A?.close&&A.close()}function wt(){Ke||(Ke=window.setTimeout(()=>{vt((0,U.az)(O,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&wt()}k.addPassiveListener(Jt),document.addEventListener("resume",wt,!1),(0,U.au)()&&document.addEventListener("visibilitychange",pn,!1),me=()=>{k.removePassiveListener(Jt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",pn,!1),Ke&&window.clearTimeout(Ke)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(O){const k=function st(O){if((0,U.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const k=new ArrayBuffer(O.length),A=new Uint8Array(k);for(let K=0;K<O.length;K++)A[K]=O.charCodeAt(K);return A}(O),A=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(A)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends U.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(A=>A(k)),super.onEvent(k)}initialized(){var k=this;return(0,c.Z)(function*(){yield k.initPromise})()}}function Re(O){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(O){const k=yield lt()._get(tn(O));return k&&(yield lt()._remove(tn(O))),k})).apply(this,arguments)}function Ue(){const O=[];for(let A=0;A<20;A++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function lt(){return(0,U.aC)(U.b)}function tn(O){return(0,U.aD)("authEvent",O.config.apiKey,O.name)}function In(O){if(!O?.includes("?"))return{};const[k,...A]=O.split("?");return(0,ne.zd)(A.join("?"))}const ie=class Wr{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(k){var A=this;return(0,c.Z)(function*(){const K=k._key();let me=A.eventManagers.get(K);return me||(me=new de(k),A.eventManagers.set(K,me),A.attachCallbackListeners(k,me)),me})()}_openPopup(k){(0,U.av)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,A,K,me){var Ve=this;return(0,c.Z)(function*(){!function De(O){var k,A,K,me,Ve,vt,Ke,Jt,wt,pn;const At=Fe();(0,U.aA)("function"==typeof(null===(k=At?.universalLinks)||void 0===k?void 0:k.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aA)(typeof(null===(A=At?.BuildInfo)||void 0===A?void 0:A.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aA)("function"==typeof(null===(Ve=null===(me=null===(K=At?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ve?void 0:Ve.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(Jt=null===(Ke=null===(vt=At?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Jt?void 0:Jt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(pn=null===(wt=At?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===pn?void 0:pn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const vt=yield Ve._initialize(k);yield vt.initialized(),vt.resetRedirect(),(0,U.aG)(),yield Ve._originValidation(k);const Ke=function re(O,k,A=null){return{type:k,eventId:A,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,U.az)(O,"no-auth-event")}}(k,K,me);yield function he(O,k){return lt()._set(tn(O),k)}(k,Ke);const Jt=yield function B(O,k,A){return G.apply(this,arguments)}(k,Ke,A),wt=yield function Ae(O){const{cordova:k}=Fe();return new Promise(A=>{k.plugins.browsertab.isAvailable(K=>{let me=null;K?k.plugins.browsertab.openUrl(O):me=k.InAppBrowser.open(O,(0,U.ay)()?"_blank":"_system","location=yes"),A(me)})})}(Jt);return function Je(O,k,A){return Ce.apply(this,arguments)}(k,vt,wt)})()}_isIframeWebStorageSupported(k,A){throw new Error("Method not implemented.")}_originValidation(k){const A=k._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function X(O){return Oe.apply(this,arguments)}(k)),this.originValidationPromises[A]}attachCallbackListeners(k,A){const{universalLinks:K,handleOpenURL:me,BuildInfo:Ve}=Fe(),vt=setTimeout((0,c.Z)(function*(){yield Re(k),A.onEvent(ce())}),500),Ke=function(){var pn=(0,c.Z)(function*(At){clearTimeout(vt);const zi=yield Re(k);let $c=null;zi&&At?.url&&($c=function we(O,k){var A,K;const me=function wn(O){const k=In(O),A=k.link?decodeURIComponent(k.link):void 0,K=In(A).link,me=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return In(me).link||me||K||A||O}(k);if(me.includes("/__/auth/callback")){const Ve=In(me),vt=Ve.firebaseError?function qn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ve.firebaseError)):null,Ke=null===(K=null===(A=vt?.code)||void 0===A?void 0:A.split("auth/"))||void 0===K?void 0:K[1],Jt=Ke?(0,U.az)(Ke):null;return Jt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Jt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}(zi,At.url)),A.onEvent($c||ce())});return function(zi){return pn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Jt=me,wt=`${Ve.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var pn=(0,c.Z)(function*(At){if(At.toLowerCase().startsWith(wt)&&Ke({url:At}),"function"==typeof Jt)try{Jt(At)}catch(zi){console.error(zi)}});return function(At){return pn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function nn(O=(0,ne.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nn(){try{const O=self.localStorage,k=U.aL();if(O)return O.setItem(k,"1"),O.removeItem(k),!function rn(O=(0,ne.z$)()){return function Qt(){return(0,ne.w1)()&&11===document?.documentMode}()||function ft(O=(0,ne.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ne.hl)()}catch{return En()&&(0,ne.hl)()}return!1}function En(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function on(){return(function Be(){return"http:"===Qe()||"https:"===Qe()}()||(0,ne.ru)()||nn())&&!function ht(){return(0,ne.b$)()||(0,ne.UG)()}()&&Nn()&&!En()}function Zn(){return nn()&&typeof document<"u"}function Ur(){return(Ur=(0,c.Z)(function*(){return!!Zn()&&new Promise(O=>{const k=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),O(!0)})})})).apply(this,arguments)}const Wn={LOCAL:"local",NONE:"none",SESSION:"session"},Kr=U.aA,bo="persistence";function mt(O){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(O){yield O._initializationPromise;const k=fi(),A=U.aD(bo,O.config.apiKey,O.name);k&&k.setItem(A,O._getPersistence())})).apply(this,arguments)}function fi(){var O;try{return(null===(O=function _r(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Yr=U.aA;class Nt{constructor(){this.browserResolver=U.aC(U.k),this.cordovaResolver=U.aC(ie),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(k){var A=this;return(0,c.Z)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,A,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(k,A,K,me)})()}_openRedirect(k,A,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(k,A,K,me)})()}_isIframeWebStorageSupported(k,A){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,A)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,c.Z)(function*(){if(k.underlyingResolver)return;const A=yield function Si(){return Ur.apply(this,arguments)}();k.underlyingResolver=A?k.cordovaResolver:k.browserResolver})()}}function Rn(O){return O.unwrap()}function Kt(O){return Bt(O)}function Bt(O){const{_tokenResponse:k}=O instanceof ne.ZR?O.customData:O;if(!k)return null;if(!(O instanceof ne.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return U.P.credentialFromResult(O);const A=k.providerId;if(!A||A===U.p.PASSWORD)return null;let K;switch(A){case U.p.GOOGLE:K=U.V;break;case U.p.FACEBOOK:K=U.U;break;case U.p.GITHUB:K=U.W;break;case U.p.TWITTER:K=U.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ve,oauthTokenSecret:vt,pendingToken:Ke,nonce:Jt}=k;return Ve||vt||me||Ke?Ke?A.startsWith("saml.")?U.aO._create(A,Ke):U.L._fromParams({providerId:A,signInMethod:A,pendingToken:Ke,idToken:me,accessToken:Ve}):new U.X(A).credential({idToken:me,accessToken:Ve,rawNonce:Jt}):null}return O instanceof ne.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Fn(O,k){return k.catch(A=>{throw A instanceof ne.ZR&&function Is(O,k){var A;const K=null===(A=k.customData)||void 0===A?void 0:A._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new ao(O,U.aq(O,k));else if(K){const me=Bt(k),Ve=k;me&&(Ve.credential=me,Ve.tenantId=K.tenantId||void 0,Ve.email=K.email||void 0,Ve.phoneNumber=K.phoneNumber||void 0)}}(O,A),A}).then(A=>{const me=A.user;return{operationType:A.operationType,credential:Kt(A),additionalUserInfo:U.ao(A),user:yr.getOrCreate(me)}})}function Hi(O,k){return so.apply(this,arguments)}function so(){return(so=(0,c.Z)(function*(O,k){const A=yield k;return{verificationId:A.verificationId,confirm:K=>Fn(O,A.confirm(K))}})).apply(this,arguments)}class ao{constructor(k,A){this.resolver=A,this.auth=function Io(O){return O.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Fn(Rn(this.auth),this.resolver.resolveSignIn(k))}}class yr{constructor(k){this._delegate=k,this.multiFactor=U.ar(k)}static getOrCreate(k){return yr.USER_MAP.has(k)||yr.USER_MAP.set(k,new yr(k)),yr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var A=this;return(0,c.Z)(function*(){return Fn(A.auth,U.a0(A._delegate,k))})()}linkWithPhoneNumber(k,A){var K=this;return(0,c.Z)(function*(){return Hi(K.auth,U.l(K._delegate,k,A))})()}linkWithPopup(k){var A=this;return(0,c.Z)(function*(){return Fn(A.auth,U.d(A._delegate,k,Nt))})()}linkWithRedirect(k){var A=this;return(0,c.Z)(function*(){return yield mt(U.aH(A.auth)),U.g(A._delegate,k,Nt)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var A=this;return(0,c.Z)(function*(){return Fn(A.auth,U.a1(A._delegate,k))})()}reauthenticateWithPhoneNumber(k,A){return Hi(this.auth,U.r(this._delegate,k,A))}reauthenticateWithPopup(k){return Fn(this.auth,U.e(this._delegate,k,Nt))}reauthenticateWithRedirect(k){var A=this;return(0,c.Z)(function*(){return yield mt(U.aH(A.auth)),U.h(A._delegate,k,Nt)})()}sendEmailVerification(k){return U.ae(this._delegate,k)}unlink(k){var A=this;return(0,c.Z)(function*(){return yield U.an(A._delegate,k),A})()}updateEmail(k){return U.aj(this._delegate,k)}updatePassword(k){return U.ak(this._delegate,k)}updatePhoneNumber(k){return U.u(this._delegate,k)}updateProfile(k){return U.ai(this._delegate,k)}verifyBeforeUpdateEmail(k,A){return U.af(this._delegate,k,A)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yr.USER_MAP=new WeakMap;const Ge=U.aA;let _e=(()=>{class O{constructor(A,K){if(this.app=A,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=A.options;Ge(me,"invalid-api-key",{appName:A.name}),Ge(me,"invalid-api-key",{appName:A.name});const Ve=typeof window<"u"?Nt:void 0;this._delegate=K.initialize({options:{persistence:it(me,A.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(U.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(A){this._delegate.languageCode=A}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(A){this._delegate.tenantId=A}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(A,K){U.I(this._delegate,A,K)}applyActionCode(A){return U.a5(this._delegate,A)}checkActionCode(A){return U.a6(this._delegate,A)}confirmPasswordReset(A,K){return U.a4(this._delegate,A,K)}createUserWithEmailAndPassword(A,K){var me=this;return(0,c.Z)(function*(){return Fn(me._delegate,U.a8(me._delegate,A,K))})()}fetchProvidersForEmail(A){return this.fetchSignInMethodsForEmail(A)}fetchSignInMethodsForEmail(A){return U.ad(this._delegate,A)}isSignInWithEmailLink(A){return U.ab(this._delegate,A)}getRedirectResult(){var A=this;return(0,c.Z)(function*(){Ge(on(),A._delegate,"operation-not-supported-in-this-environment");const K=yield U.j(A._delegate,Nt);return K?Fn(A._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(A){!function le(O,k){(0,U.aH)(O)._logFramework(k)}(this._delegate,A)}onAuthStateChanged(A,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(A,K,me);return this._delegate.onAuthStateChanged(Ve,vt,Ke)}onIdTokenChanged(A,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(A,K,me);return this._delegate.onIdTokenChanged(Ve,vt,Ke)}sendSignInLinkToEmail(A,K){return U.aa(this._delegate,A,K)}sendPasswordResetEmail(A,K){return U.a3(this._delegate,A,K||void 0)}setPersistence(A){var K=this;return(0,c.Z)(function*(){let me;switch(function dt(O,k){Kr(Object.values(Wn).includes(k),O,"invalid-persistence-type"),(0,ne.b$)()?Kr(k!==Wn.SESSION,O,"unsupported-persistence-type"):(0,ne.UG)()?Kr(k===Wn.NONE,O,"unsupported-persistence-type"):En()?Kr(k===Wn.NONE||k===Wn.LOCAL&&(0,ne.hl)(),O,"unsupported-persistence-type"):Kr(k===Wn.NONE||Nn(),O,"unsupported-persistence-type")}(K._delegate,A),A){case Wn.SESSION:me=U.a;break;case Wn.LOCAL:me=(yield U.aC(U.i)._isAvailable())?U.i:U.b;break;case Wn.NONE:me=U.N;break;default:return U.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(A){return this.signInWithCredential(A)}signInAnonymously(){return Fn(this._delegate,U._(this._delegate))}signInWithCredential(A){return Fn(this._delegate,U.$(this._delegate,A))}signInWithCustomToken(A){return Fn(this._delegate,U.a2(this._delegate,A))}signInWithEmailAndPassword(A,K){return Fn(this._delegate,U.a9(this._delegate,A,K))}signInWithEmailLink(A,K){return Fn(this._delegate,U.ac(this._delegate,A,K))}signInWithPhoneNumber(A,K){return Hi(this._delegate,U.s(this._delegate,A,K))}signInWithPopup(A){var K=this;return(0,c.Z)(function*(){return Ge(on(),K._delegate,"operation-not-supported-in-this-environment"),Fn(K._delegate,U.c(K._delegate,A,Nt))})()}signInWithRedirect(A){var K=this;return(0,c.Z)(function*(){return Ge(on(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),U.f(K._delegate,A,Nt)})()}updateCurrentUser(A){return this._delegate.updateCurrentUser(A)}verifyPasswordResetCode(A){return U.a7(this._delegate,A)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Wn,O})();function Xe(O,k,A){let K=O;"function"!=typeof O&&({next:K,error:k,complete:A}=O);const me=K;return{next:vt=>me(vt&&yr.getOrCreate(vt)),error:k,complete:A}}function it(O,k){const A=function sn(O,k){const A=fi();if(!A)return[];const K=U.aD(bo,O,k);switch(A.getItem(K)){case Wn.NONE:return[U.N];case Wn.LOCAL:return[U.i,U.a];case Wn.SESSION:return[U.a];default:return[]}}(O,k);if(typeof self<"u"&&!A.includes(U.i)&&A.push(U.i),typeof window<"u")for(const K of[U.b,U.a])A.includes(K)||A.push(K);return A.includes(U.N)||A.push(U.N),A}class Rt{constructor(){this.providerId="phone",this._delegate=new U.P(Rn(V.Z.auth()))}static credential(k,A){return U.P.credential(k,A)}verifyPhoneNumber(k,A){return this._delegate.verifyPhoneNumber(k,A)}unwrap(){return this._delegate}}Rt.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Rt.PROVIDER_ID=U.P.PROVIDER_ID;const Vt=U.aA;class tr{constructor(k,A,K=V.Z.app()){var me;Vt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new U.R(k,A,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new xe.wA("auth-compat",k=>{const A=k.getProvider("app-compat").getImmediate(),K=k.getProvider("auth");return new _e(A,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.Q,FacebookAuthProvider:U.U,GithubAuthProvider:U.W,GoogleAuthProvider:U.V,OAuthProvider:U.X,SAMLAuthProvider:U.Y,PhoneAuthProvider:Rt,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:tr,TwitterAuthProvider:U.Z,Auth:_e,AuthCredential:U.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(ot,Ie,L)=>{L.d(Ie,{H0:()=>Fe,wA:()=>U});var c=L(5861),V=L(9058);class U{constructor(B,G,X){this.name=B,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ne="[DEFAULT]";class ge{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const X=new V.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:G});Oe&&X.resolve(Oe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const X=this.normalizeInstanceIdentifier(B?.identifier),Oe=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(Oe)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function xe(Me){return"EAGER"===Me.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(G);try{const Ae=this.getOrInitializeService({instanceIdentifier:Oe});X.resolve(Ae)}catch{}}}}clearInstance(B=ne){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ne){return this.instances.has(B)}getOptions(B=ne){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,X=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Ae,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Je.resolve(Oe);return Oe}onInit(B,G){var X;const Oe=this.normalizeInstanceIdentifier(G),Ae=null!==(X=this.onInitCallbacks.get(Oe))&&void 0!==X?X:new Set;Ae.add(B),this.onInitCallbacks.set(Oe,Ae);const Je=this.instances.get(Oe);return Je&&B(Je,Oe),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,G){const X=this.onInitCallbacks.get(G);if(X)for(const Oe of X)try{Oe(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let X=this.instances.get(B);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=B,Me===ne?void 0:Me),options:G}),this.instances.set(B,X),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(X,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,X)}catch{}var Me;return X||null}normalizeInstanceIdentifier(B=ne){return this.component?this.component.multipleInstances?B:ne:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new ge(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(ot,Ie,L)=>{L.d(Ie,{Am:()=>Me,Ub:()=>Fe,Yd:()=>xe,in:()=>V});const c=[];var V=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(V||{});const U={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},be=(B,G,...X)=>{if(G<B.logLevel)return;const Oe=(new Date).toISOString(),Ae=ge[G];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ae](`[${Oe}]  ${B.name}:`,...X)};class xe{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=be,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?U[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function Fe(B){c.forEach(G=>{G.setLogLevel(B)})}function Me(B,G){for(const X of c){let Oe=null;G&&G.level&&(Oe=U[G.level]),X.userLogHandler=null===B?null:(Ae,Je,...Ce)=>{const De=Ce.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Oe??Ae.logLevel)&&B({level:V[Je].toLowerCase(),message:De,args:Ce,type:Ae.name})}}}},1878:(ot,Ie,L)=>{L.d(Ie,{X3:()=>st});var c=L(5861);const V=(j,we)=>we.some(Ue=>j instanceof Ue);let U,ne;const xe=new WeakMap,Fe=new WeakMap,Me=new WeakMap,B=new WeakMap,G=new WeakMap;let Ae={get(j,we,Ue){if(j instanceof IDBTransaction){if("done"===we)return Fe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||Me.get(j);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(j[we])},set:(j,we,Ue)=>(j[we]=Ue,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function De(j){return"function"==typeof j?function Ce(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(tt(this),we),Te(xe.get(this))}:function(...we){return Te(j.apply(tt(this),we))}:function(we,...Ue){const lt=j.call(tt(this),we,...Ue);return Me.set(lt,we.sort?we.sort():[we]),Te(lt)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const we=new Promise((Ue,lt)=>{const tn=()=>{j.removeEventListener("complete",qn),j.removeEventListener("error",wn),j.removeEventListener("abort",wn)},qn=()=>{Ue(),tn()},wn=()=>{lt(j.error||new DOMException("AbortError","AbortError")),tn()};j.addEventListener("complete",qn),j.addEventListener("error",wn),j.addEventListener("abort",wn)});Fe.set(j,we)}(j),V(j,function ge(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ae):j)}function Te(j){if(j instanceof IDBRequest)return function X(j){const we=new Promise((Ue,lt)=>{const tn=()=>{j.removeEventListener("success",qn),j.removeEventListener("error",wn)},qn=()=>{Ue(Te(j.result)),tn()},wn=()=>{lt(j.error),tn()};j.addEventListener("success",qn),j.addEventListener("error",wn)});return we.then(Ue=>{Ue instanceof IDBCursor&&xe.set(Ue,j)}).catch(()=>{}),G.set(we,j),we}(j);if(B.has(j))return B.get(j);const we=De(j);return we!==j&&(B.set(j,we),G.set(we,j)),we}const tt=j=>G.get(j);function st(j,we,{blocked:Ue,upgrade:lt,blocking:tn,terminated:qn}={}){const wn=indexedDB.open(j,we),In=Te(wn);return lt&&wn.addEventListener("upgradeneeded",dn=>{lt(Te(wn.result),dn.oldVersion,dn.newVersion,Te(wn.transaction),dn)}),Ue&&wn.addEventListener("blocked",dn=>Ue(dn.oldVersion,dn.newVersion,dn)),In.then(dn=>{qn&&dn.addEventListener("close",()=>qn()),tn&&dn.addEventListener("versionchange",Wr=>tn(Wr.oldVersion,Wr.newVersion,Wr))}).catch(()=>{}),In}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function Re(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),lt=we!==Ue,tn=re.includes(Ue);if(!(Ue in(lt?IDBIndex:IDBObjectStore).prototype)||!tn&&!de.includes(Ue))return;const qn=function(){var wn=(0,c.Z)(function*(In,...dn){const Wr=this.transaction(In,tn?"readwrite":"readonly");let ie=Wr.store;return lt&&(ie=ie.index(dn.shift())),(yield Promise.all([ie[Ue](...dn),tn&&Wr.done]))[0]});return function(dn){return wn.apply(this,arguments)}}();return he.set(we,qn),qn}!function Je(j){Ae=j(Ae)}(j=>({...j,get:(we,Ue,lt)=>Re(we,Ue)||j.get(we,Ue,lt),has:(we,Ue)=>!!Re(we,Ue)||j.has(we,Ue)}))},5861:(ot,Ie,L)=>{function c(U,ne,ge,be,xe,Fe,Me){try{var B=U[Fe](Me),G=B.value}catch(X){return void ge(X)}B.done?ne(G):Promise.resolve(G).then(be,xe)}function V(U){return function(){var ne=this,ge=arguments;return new Promise(function(be,xe){var Fe=U.apply(ne,ge);function Me(G){c(Fe,be,xe,Me,B,"next",G)}function B(G){c(Fe,be,xe,Me,B,"throw",G)}Me(void 0)})}}L.d(Ie,{Z:()=>V})},7582:(ot,Ie,L)=>{function ne(ie,ce){var le={};for(var oe in ie)Object.prototype.hasOwnProperty.call(ie,oe)&&ce.indexOf(oe)<0&&(le[oe]=ie[oe]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(oe=Object.getOwnPropertySymbols(ie);pe<oe.length;pe++)ce.indexOf(oe[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,oe[pe])&&(le[oe[pe]]=ie[oe[pe]])}return le}function X(ie,ce,le,oe){return new(le||(le=Promise))(function(ke,Qe){function Be(Qt){try{ht(oe.next(Qt))}catch(ft){Qe(ft)}}function nn(Qt){try{ht(oe.throw(Qt))}catch(ft){Qe(ft)}}function ht(Qt){Qt.done?ke(Qt.value):function pe(ke){return ke instanceof le?ke:new le(function(Qe){Qe(ke)})}(Qt.value).then(Be,nn)}ht((oe=oe.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,oe=le.apply(ie,ce||[]),ke=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(rn){oe[rn]&&(pe[rn]=function(Nn){return new Promise(function(En,on){ke.push([rn,Nn,En,on])>1||Be(rn,Nn)})})}function Be(rn,Nn){try{!function nn(rn){rn.value instanceof ee?Promise.resolve(rn.value.v).then(ht,Qt):ft(ke[0][2],rn)}(oe[rn](Nn))}catch(En){ft(ke[0][3],En)}}function ht(rn){Be("next",rn)}function Qt(rn){Be("throw",rn)}function ft(rn,Nn){rn(Nn),ke.shift(),ke.length&&Be(ke[0][0],ke[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function Ce(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],oe=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&oe>=ie.length&&(ie=void 0),{value:ie&&ie[oe++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},oe("next"),oe("throw"),oe("return"),le[Symbol.asyncIterator]=function(){return this},le);function oe(ke){le[ke]=ie[ke]&&function(Qe){return new Promise(function(Be,nn){!function pe(ke,Qe,Be,nn){Promise.resolve(nn).then(function(ht){ke({value:ht,done:Be})},Qe)}(Be,nn,(Qe=ie[ke](Qe)).done,Qe.value)})}}}L.d(Ie,{FC:()=>de,KL:()=>he,_T:()=>ne,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},ot=>{ot(ot.s=8596)}]);