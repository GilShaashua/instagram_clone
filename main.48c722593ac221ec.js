"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,be,F)=>{F.d(be,{Dh:()=>Pe,GT:()=>pe,cc:()=>Oe,on:()=>Se,pX:()=>te,xv:()=>Fe});var u=F(5879),B=F(120);st=F.hmd(st);const L=["ngOnDestroy"],te=(Ae,De,tt,ot={})=>new Proxy(Ae,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(Ae[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,Ae[de]),Ae[de];if(L.indexOf(de)>-1)return()=>{};const he=De.toPromise().then(ke=>{const j=ke&&ke[de];return"function"==typeof j?j.bind(ke):j&&j.then?j.then(Ce=>tt.run(()=>Ce)):tt.run(()=>j)});return new Proxy(()=>{},{get:(ke,j)=>he[j],apply:(ke,j,Ce)=>he.then(Ue=>{var at;const Xt=Ue&&Ue(...Ce);return!(null===(at=ot?.spy)||void 0===at)&&at.apply&&ot.spy.apply(de,Ce,Xt),Xt})})})}),pe=(Ae,De)=>{De.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(Ae.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class we{constructor(De){return De}}const Pe=new u.OlP("angularfire2.app.options"),Fe=new u.OlP("angularfire2.app.name");function Se(Ae,De,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=B.Z.apps.filter(he=>he&&he.name===ee.name)[0]||De.runOutsideAngular(()=>B.Z.initializeApp(Ae,ee));try{JSON.stringify(Ae)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(re)}const U=(Ae,...De)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ae](...De)};function Oe(Ae,De,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Ae)||[];if(de)return function Me(Ae,De){try{return Ae.toString()===De.toString()}catch{return Ae===De}}(ee,re)||(ve("error",`${De} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Ae,he,ee]),he}}const Je=!!st.hot,ve=(Ae,...De)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ae](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,be,F)=>{F.d(be,{$:()=>lh,A:()=>W,D:()=>Me,I:()=>Yd,J:()=>Sc,L:()=>je,N:()=>Vt,P:()=>yn,Q:()=>Ea,R:()=>_g,U:()=>qp,V:()=>Wo,W:()=>ds,X:()=>Fs,Y:()=>ih,Z:()=>sh,_:()=>Pc,a:()=>cu,a0:()=>CE,a1:()=>Pn,a2:()=>cx,a3:()=>lx,a4:()=>Vy,a5:()=>mo,a6:()=>Nc,a7:()=>dh,a8:()=>hh,a9:()=>By,aA:()=>j,aB:()=>ka,aC:()=>it,aD:()=>Zn,aE:()=>Eo,aF:()=>Hc,aG:()=>Io,aH:()=>xn,aL:()=>Fc,aO:()=>Oi,aa:()=>Qp,ab:()=>jy,ac:()=>Jp,ad:()=>Hy,ae:()=>nu,af:()=>zy,ai:()=>IE,aj:()=>ux,ak:()=>Wy,an:()=>oh,ao:()=>kc,aq:()=>Ch,ar:()=>au,as:()=>Ue,at:()=>Ke,au:()=>ge,av:()=>ee,aw:()=>Ri,ax:()=>Nh,ay:()=>Zt,az:()=>de,b:()=>Eh,c:()=>ri,d:()=>hu,e:()=>Oa,f:()=>gu,g:()=>si,h:()=>on,i:()=>fs,j:()=>ov,k:()=>qs,l:()=>yg,m:()=>Ua,o:()=>ea,p:()=>Fe,r:()=>lt,s:()=>ni,u:()=>Gr});var u=F(5861),B=F(9058),L=F(7592),te=F(7582),pe=F(7879),we=F(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new pe.Yd("@firebase/auth");function ot(w,...m){De.logLevel<=pe.in.ERROR&&De.error(`Auth (${L.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw ke(w,...m)}function de(w,...m){return ke(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new B.LL("auth","Firebase",I).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return ve.create(w,...m)}function j(w,m,..._){if(!w)throw ke(m,..._)}function Ce(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ot(m),new Error(m)}function Ue(w,m){w||Ce(m)}function at(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Xt(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function _n(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new un(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function fe(w,m,_,I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)(function*(w,m,_,I,S={}){return Qe(w,S,(0,u.Z)(function*(){let P={},Z={};I&&("GET"===m?Z=I:P={body:JSON.stringify(I)});const oe=(0,B.xO)(Object.assign({key:w.config.apiKey},Z)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(qt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(w,m,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,u.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},le),m);try{const S=new ft(w),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw tn(w,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,$e]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw tn(w,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw tn(w,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw tn(w,"user-disabled",Z);const nt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw re(w,nt,$e);ee(w,nt)}}catch(S){if(S instanceof B.ZR)throw S;ee(w,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function en(w,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(w,m,_,I,S={}){const P=yield fe(w,m,_,I,S);return"mfaPendingCredential"in P&&ee(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function qt(w,m,_,I){const S=`${m}${_}?${I}`;return w.config.emulator?kr(w.config,S):`${w.config.apiScheme}://${S}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const S=de(w,m,I);return S.customData._tokenResponse=_,S}function In(){return(In=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Ln(){return(Ln=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ar(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ls(){return(ls=(0,u.Z)(function*(w,m=!1){const _=(0,B.m9)(w),I=yield _.getIdToken(m),S=mt(I);j(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:I,authTime:ar(dt(S.auth_time)),issuedAtTime:ar(dt(S.iat)),expirationTime:ar(dt(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,B.tV)(_);return S?JSON.parse(S):(ot("Failed to decode base64 JWT payload"),null)}catch(S){return ot("Caught error parsing JWT payload as JSON",S?.toString()),null}}function rn(w,m){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof B.ZR&&function Lr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class An{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ar(this.lastLoginAt),this.creationTime=ar(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function us(w){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,u.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),S=yield rn(w,function pi(w,m){return Ar.apply(this,arguments)}(_,{idToken:I}));j(S?.users.length,_,"internal-error");const P=S.users[0];w._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Mi(w){return w.map(m=>{var{providerId:_}=m,I=(0,te._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],oe=function Mn(w,m){return[...w.filter(I=>!m.some(S=>S.providerId===I.providerId)),...m]}(w.providerData,Z),nt=!!w.isAnonymous&&!(w.email&&P.passwordHash||oe?.length),Pt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new An(P.createdAt,P.lastLoginAt),isAnonymous:nt};Object.assign(w,Pt)}),Gt.apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(w){const m=(0,B.m9)(w);yield us(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(w,m){const _=yield Qe(w,{},(0,u.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=w.config,Z=qt(w,S,"/v1/token",`key=${P}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,u.Z)(function*(){return j(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,u.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function Zi(w,m){return Ki.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:S,expirationTime:P}=_,Z=new cr;return I&&(j("string"==typeof I,"internal-error",{appName:m}),Z.refreshToken=I),S&&(j("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(j("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new cr,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class me{constructor(m){var{uid:_,auth:I,stsTokenManager:S}=m,P=(0,te._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new An(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const I=yield rn(_,_.stsTokenManager.getToken(_.auth,m));return j(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function Fr(w){return ls.apply(this,arguments)}(this,m)}reload(){return function uo(w){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new me(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,u.Z)(function*(){let S=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield us(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield rn(m,function Sn(w,m){return In.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,S,P,Z,oe,Le,$e,nt;const Pt=null!==(I=_.displayName)&&void 0!==I?I:void 0,xr=null!==(S=_.email)&&void 0!==S?S:void 0,ki=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Zs=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,xg=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,qc=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,ta=null!==($e=_.createdAt)&&void 0!==$e?$e:void 0,na=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Du,emailVerified:Zc,isAnonymous:Fi,providerData:ja,stsTokenManager:Ks}=_;j(Du&&Ks,m,"internal-error");const Kc=cr.fromJSON(this.name,Ks);j("string"==typeof Du,m,"internal-error"),Ge(Pt,m.name),Ge(xr,m.name),j("boolean"==typeof Zc,m,"internal-error"),j("boolean"==typeof Fi,m,"internal-error"),Ge(ki,m.name),Ge(Zs,m.name),Ge(xg,m.name),Ge(qc,m.name),Ge(ta,m.name),Ge(na,m.name);const Mo=new me({uid:Du,auth:m,email:xr,emailVerified:Zc,displayName:Pt,isAnonymous:Fi,photoURL:Zs,phoneNumber:ki,tenantId:xg,stsTokenManager:Kc,createdAt:ta,lastLoginAt:na});return ja&&Array.isArray(ja)&&(Mo.providerData=ja.map(Su=>Object.assign({},Su))),qc&&(Mo._redirectEventId=qc),Mo}static _fromIdTokenResponse(m,_,I=!1){return(0,u.Z)(function*(){const S=new cr;S.updateFromServerResponse(_);const P=new me({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:I});return yield us(P),P})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,I){var S=this;return(0,u.Z)(function*(){S.storage[_]=I})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=I.storage[_];return void 0===S?null:S})()}_remove(_){var I=this;return(0,u.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Zn(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=Zn(this.userKey,S.apiKey,P),this.fullPersistenceKey=Zn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?me._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,u.Z)(function*(){if(!_.length)return new H(it(Vt),m,I);const S=(yield Promise.all(_.map(function(){var $e=(0,u.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let P=S[0]||it(Vt);const Z=Zn(I,m.config.apiKey,m.name);let oe=null;for(const $e of _)try{const nt=yield $e._get(Z);if(nt){const Pt=me._fromJSON(m,nt);$e!==P&&(oe=Pt),P=$e;break}}catch{}const Le=S.filter($e=>$e._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var $e=(0,u.Z)(function*(nt){if(nt!==P)try{yield nt._remove(Z)}catch{}});return function(nt){return $e.apply(this,arguments)}}())),new H(P,m,I)):new H(P,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Be(m))return"Blackberry";if(yt(m))return"Webos";if(N(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(ge(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,B.z$)()){return/firefox\//i.test(w)}function N(w=(0,B.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,B.z$)()){return/crios\//i.test(w)}function K(w=(0,B.z$)()){return/iemobile/i.test(w)}function ge(w=(0,B.z$)()){return/android/i.test(w)}function Be(w=(0,B.z$)()){return/blackberry/i.test(w)}function yt(w=(0,B.z$)()){return/webos/i.test(w)}function Ke(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Zt(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Mt(w=(0,B.z$)()){return Ke(w)||ge(w)||yt(w)||Be(w)||/windows phone/i.test(w)||K(w)}function bc(w,m=[]){let _;switch(w){case"Browser":_=$((0,B.z$)());break;case"Worker":_=`${$((0,B.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}function ho(){return(ho=(0,u.Z)(function*(w){return(yield fe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xs(w,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(w,m){return fe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Wt(w){return void 0!==w&&void 0!==w.getResponse}function zo(w){return void 0!==w&&void 0!==w.enterprise}class va{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function zl(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=S=>{const P=de("internal-error");P.customData=S,_(P)},I.type="text/javascript",I.charset="UTF-8",function Hl(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Ps(w){return`__${w}${Math.floor(1e6*Math.random())}`}class wa{constructor(m){this.type="recaptcha-enterprise",this.auth=xn(m)}verify(m="verify",_=!1){var I=this;return(0,u.Z)(function*(){function P(){return P=(0,u.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,u.Z)(function*($e,nt){xs(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Pt=>{if(void 0!==Pt.recaptchaKey){const xr=new va(Pt);return null==oe.tenantId?oe._agentRecaptchaConfig=xr:oe._tenantRecaptchaConfigs[oe.tenantId]=xr,$e(xr.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(Pt=>{nt(Pt)})});return function($e,nt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,$e){const nt=window.grecaptcha;zo(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(Pt=>{Le(Pt)}).catch(()=>{Le("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(I.auth).then($e=>{if(!_&&zo(window.grecaptcha))Z($e,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));zl("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{Z($e,oe,Le)}).catch(nt=>{Le(nt)})}}).catch($e=>{Le($e)})})})()}}function Os(w,m,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(w,m,_,I=!1){const S=new wa(w);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Dc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const S of _.queue)yield S(m),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const P of I)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class fo{constructor(m,_,I,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sy(this),this.idTokenSubscription=new Sy(this),this.beforeStateQueue=new Dc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var I;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=P?._redirectEventId,$e=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&$e?.user&&(P=$e.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield us(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function wn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const I=m?(0,B.m9)(m):null;return I&&j(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,u.Z)(function*(){if(!I._deleted)return m&&j(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,u.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,u.Z)(function*(){const _=yield xs(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new va(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new wa(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new B.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,u.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&it(m)||_._popupRedirectResolver;j(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var I,S;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=bc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(I["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var m=this;return(0,u.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){De.logLevel<=pe.in.WARN&&De.warn(`Auth (${L.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function xn(w){return(0,B.m9)(w)}class Sy{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yd(w,m,_){const I=xn(w);j(I._canInitEmulator,I,"emulator-config-failed"),j(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=Xr(m),{host:Z,port:oe}=function Qd(w){const m=Xr(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:Jd(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:Jd(Z)}}}(m);I.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function My(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Xr(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Jd(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Sc{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(m){return Ce("not implemented")}_linkToIdToken(m,_){return Ce("not implemented")}_getReauthenticationResolver(m){return Ce("not implemented")}}function Xd(w,m){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function zp(w,m){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function Wl(w,m){return eh.apply(this,arguments)}function eh(){return(eh=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function ql(w,m){return th.apply(this,arguments)}function th(){return(th=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function nh(){return(nh=(0,u.Z)(function*(w,m){return ql(w,m)})).apply(this,arguments)}function Zl(w,m){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,u.Z)(function*(w,m){return ql(w,m)})).apply(this,arguments)}function Yl(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(w,m){return ql(w,m)})).apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(w,m){return ql(w,m)})).apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function Ql(){return(Ql=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class po extends Sc{constructor(m,_,I,S=null){super("password",I),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new po(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new po(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){var I;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield Os(m,S,"signInWithPassword");return Wl(m,P)}return Wl(m,S).catch(function(){var P=(0,u.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield Os(m,S,"signInWithPassword");return Wl(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function Ia(w,m){return Vr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,u.Z)(function*(){switch(I.signInMethod){case"password":return zp(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Wp(w,m){return Ql.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ns(w,m){return rh.apply(this,arguments)}function rh(){return(rh=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends Sc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S}=_,P=(0,te._T)(_,["providerId","signInMethod"]);if(!I||!S)return null;const Z=new je(I,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Ns(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Ns(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ns(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,B.xO)(_)}return m}}function hn(){return(hn=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function Go(){return(Go=(0,u.Z)(function*(w,m){const _=yield en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw tn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Vn={USER_NOT_FOUND:"user-not-found"};function go(){return(go=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Vn)})).apply(this,arguments)}class pt extends Sc{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function mi(w,m){return Rs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function mr(w,m){return Go.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ks(w,m){return go.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}=m;return I||_||S||P?new pt({verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class _i{constructor(m){var _,I,S,P,Z,oe;const Le=(0,B.zd)((0,B.pd)(m)),$e=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(I=Le.oobCode)&&void 0!==I?I:null,Pt=function Mc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);j($e&&nt&&Pt,"argument-error"),this.apiKey=$e,this.operation=Pt,this.code=nt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function xy(w){const m=(0,B.zd)((0,B.pd)(w)).link,_=m?(0,B.zd)((0,B.pd)(m)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||m||w}(m);try{return new _i(_)}catch{return null}}}let Ea=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return po._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const S=_i.parseLink(I);return j(S,"argument-error"),po._fromEmailAndCode(_,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class yi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Br extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Fs extends Br{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Fs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Fs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!I&&!S&&!_&&!P||!oe)return null;try{return new Fs(oe)._credential({idToken:_,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let qp=(()=>{class w extends Br{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Wo=(()=>{class w extends Br{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:S}=_;if(!I&&!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ds=(()=>{class w extends Br{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Oi extends Sc{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Ns(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Ns(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ns(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S,pendingToken:P}=_;return I&&S&&P&&I===S?new Oi(I,P):null}static _create(m,_){return new Oi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ih extends yi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ih.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ih.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Oi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Oi._create(I,_)}catch{return null}}}let sh=(()=>{class w extends Br{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=_;if(!I||!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function xc(w,m){return jr.apply(this,arguments)}function jr(){return(jr=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class $r{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,S=!1){return(0,u.Z)(function*(){const P=yield me._fromIdTokenResponse(m,I,S),Z=ba(I);return new $r({user:P,providerId:Z,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const S=ba(I);return new $r({user:m,providerId:S,_tokenResponse:I,operationType:_})})()}}function ba(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Pc(w){return tr.apply(this,arguments)}function tr(){return(tr=(0,u.Z)(function*(w){var m;const _=xn(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new $r({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield xc(_,{returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Zp extends B.ZR{constructor(m,_,I,S){var P;super(_.code,_.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,Zp.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,S){return new Zp(m,_,I,S)}}function ei(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Zp._fromErrorAndOperation(w,P,m,I):P})}function Mr(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function oh(w,m){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w);yield Ta(!0,_,m);const{providerUserInfo:I}=yield function nn(w,m){return Ln.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=Mr(I||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ls.apply(this,arguments)}function Oc(w,m){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,u.Z)(function*(w,m,_=!1){const I=yield rn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return $r._forOperation(w,"link",I)})).apply(this,arguments)}function Ta(w,m,_){return ah.apply(this,arguments)}function ah(){return(ah=(0,u.Z)(function*(w,m,_){yield us(m);const S=!1===w?"provider-already-linked":"no-such-provider";j(Mr(m.providerData).has(_)===w,m.auth,S)})).apply(this,arguments)}function Kp(w,m){return Py.apply(this,arguments)}function Py(){return(Py=(0,u.Z)(function*(w,m,_=!1){const{auth:I}=w,S="reauthenticate";try{const P=yield rn(w,ei(I,S,m,w),_);j(P.idToken,I,"internal-error");const Z=mt(P.idToken);j(Z,I,"internal-error");const{sub:oe}=Z;return j(w.uid===oe,I,"user-mismatch"),$r._forOperation(w,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function Oy(w,m){return ch.apply(this,arguments)}function ch(){return(ch=(0,u.Z)(function*(w,m,_=!1){const I="signIn",S=yield ei(w,I,m),P=yield $r._fromIdTokenResponse(w,I,S);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function lh(w,m){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,u.Z)(function*(w,m){return Oy(xn(w),m)})).apply(this,arguments)}function CE(w,m){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w);return yield Ta(!1,_,m.providerId),Oc(_,m)})).apply(this,arguments)}function Pn(w,m){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,u.Z)(function*(w,m){return Kp((0,B.m9)(w),m)})).apply(this,arguments)}function ky(){return(ky=(0,u.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function cx(w,m){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,u.Z)(function*(w,m){const _=xn(w),I=yield function ax(w,m){return ky.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(S.user),S}),Fy.apply(this,arguments)}class uh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ly._fromServerResponse(m,_):"totpInfo"in _?Xl._fromServerResponse(m,_):ee(m,"internal-error")}}class Ly extends uh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ly(_)}}class Xl extends uh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new Xl(_)}}function Da(w,m,_){var I;j((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function lx(w,m,_){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,u.Z)(function*(w,m,_){var I;const S=xn(w),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield Os(S,P,"getOobCode",!0);_&&Da(S,Z,_),yield Zl(S,Z)}else _&&Da(S,P,_),yield Zl(S,P).catch(function(){var Z=(0,u.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield Os(S,P,"getOobCode",!0);_&&Da(S,Le,_),yield Zl(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),Uy.apply(this,arguments)}function Vy(w,m,_){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(w,m,_){yield Xd((0,B.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function mo(w,m){return eu.apply(this,arguments)}function eu(){return eu=(0,u.Z)(function*(w,m){yield function vE(w,m){return gi.apply(this,arguments)}((0,B.m9)(w),{oobCode:m})}),eu.apply(this,arguments)}function Nc(w,m){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w),I=yield Xd(_,{oobCode:m}),S=I.requestType;switch(j(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(I.mfaInfo,_,"internal-error");default:j(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=uh._fromServerResponse(xn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function dh(w,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(w,m){const{data:_}=yield Nc((0,B.m9)(w),m);return _.email})).apply(this,arguments)}function hh(w,m,_){return fh.apply(this,arguments)}function fh(){return fh=(0,u.Z)(function*(w,m,_){var I;const S=xn(w),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const $e=yield Os(S,P,"signUpPassword");Z=xc(S,$e)}else Z=xc(S,P).catch(function(){var $e=(0,u.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Pt=yield Os(S,P,"signUpPassword");return xc(S,Pt)}return Promise.reject(nt)});return function(nt){return $e.apply(this,arguments)}}());const oe=yield Z.catch($e=>Promise.reject($e)),Le=yield $r._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),fh.apply(this,arguments)}function By(w,m,_){return lh((0,B.m9)(w),Ea.credential(m,_))}function Qp(w,m,_){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,u.Z)(function*(w,m,_){var I;const S=xn(w),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){j(Le.handleCodeInApp,S,"argument-error"),Le&&Da(S,oe,Le)}if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield Os(S,P,"getOobCode",!0);Z(oe,_),yield Yl(S,oe)}else Z(P,_),yield Yl(S,P).catch(function(){var oe=(0,u.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Os(S,P,"getOobCode",!0);Z($e,_),yield Yl(S,$e)}});return function(Le){return oe.apply(this,arguments)}}())}),Sa.apply(this,arguments)}function jy(w,m){const _=_i.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function Jp(w,m,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),S=Ea.credentialWithLink(m,_||at());return j(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),lh(I,S)})).apply(this,arguments)}function ph(){return(ph=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function Hy(w,m){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,u.Z)(function*(w,m){const I={identifier:m,continueUri:Xt()?at():"http://localhost"},{signinMethods:S}=yield function $y(w,m){return ph.apply(this,arguments)}((0,B.m9)(w),I);return S||[]}),Rc.apply(this,arguments)}function nu(w,m){return _o.apply(this,arguments)}function _o(){return _o=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Da(_.auth,S,m);const{email:P}=yield function Ac(w,m){return nh.apply(this,arguments)}(_.auth,S);P!==w.email&&(yield w.reload())}),_o.apply(this,arguments)}function zy(w,m,_){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Da(I.auth,P,_);const{email:Z}=yield function pr(w,m){return gr.apply(this,arguments)}(I.auth,P);Z!==w.email&&(yield w.reload())}),Xp.apply(this,arguments)}function Gy(){return(Gy=(0,u.Z)(function*(w,m){return fe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function IE(w,m){return eg.apply(this,arguments)}function eg(){return eg=(0,u.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,B.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield rn(I,function wE(w,m){return Gy.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),eg.apply(this,arguments)}function ux(w,m){return gh((0,B.m9)(w),m,null)}function Wy(w,m){return gh((0,B.m9)(w),null,m)}function gh(w,m,_){return tg.apply(this,arguments)}function tg(){return(tg=(0,u.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield rn(w,zp(I,P));yield w._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class ru{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class EE extends ru{constructor(m,_,I,S){super(m,_,I),this.username=S}}class iu extends ru{constructor(m,_){super(m,"facebook.com",_)}}class qy extends EE{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class rg extends ru{constructor(m,_){super(m,"google.com",_)}}class mh extends EE{constructor(m,_,I){super(m,"twitter.com",_,I)}}function kc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ng(w){var m,_;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Z=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new ru(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new iu(P,S);case"github.com":return new qy(P,S);case"google.com":return new rg(P,S);case"twitter.com":return new mh(P,S,w.screenName||null);case"custom":case"anonymous":return new ru(P,null);default:return new ru(P,I,S)}}(_)}class Vs{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Vs("enroll",m,_)}static _fromMfaPendingCredential(m){return new Vs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Vs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Vs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Aa{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=xn(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>uh._fromServerResponse(I,oe));j(S.mfaPendingCredential,I,"internal-error");const Z=Vs._fromMfaPendingCredential(S.mfaPendingCredential);return new Aa(Z,P,function(){var oe=(0,u.Z)(function*(Le){const $e=yield Le._process(I,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const nt=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(_.operationType){case"signIn":const Pt=yield $r._fromIdTokenResponse(I,_.operationType,nt);return yield I._updateCurrentUser(Pt.user),Pt;case"reauthenticate":return j(_.user,I,"internal-error"),$r._forOperation(_.user,_.operationType,nt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function Ch(w,m){var _;const I=(0,B.m9)(w),S=m;return j(m.customData.operationType,I,"argument-error"),j(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Aa._fromError(I,S)}class ou{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>uh._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new ou(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Vs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,u.Z)(function*(){const S=m,P=yield I.getSession(),Z=yield rn(I.user,S._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const I="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield rn(_.user,function sg(w,m){return fe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==I),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const sn=new WeakMap;function au(w){const m=(0,B.m9)(w);return sn.has(m)||sn.set(m,ou._fromUser(m)),sn.get(m)}const Bs="__sak";class zr{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Eh=(()=>{class w extends zr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function SE(){const w=(0,B.z$)();return N(w)||Ke(w)}()&&function xi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&_(I,P,S)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,$e)=>{this.notifyListeners(oe,$e)});const S=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!I)return}const P=()=>{const oe=this.storage.getItem(S);!I&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function dn(){return(0,B.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var S=()=>super._set,P=this;return(0,u.Z)(function*(){yield S().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,S=this;return(0,u.Z)(function*(){const P=yield I().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,S=this;return(0,u.Z)(function*(){yield I().call(S,_),delete S.localCache[_]})()}}return w.type="LOCAL",w})(),cu=(()=>{class w extends zr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let og=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const S=new w(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,u.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=I.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const $e=Array.from(Le).map(function(){var Pt=(0,u.Z)(function*(xr){return xr(S.origin,oe)});return function(xr){return Pt.apply(this,arguments)}}()),nt=yield function yo(w){return Promise.all(w.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:nt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Fc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Jy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var S=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,$e)=>{const nt=Fc("",20);P.port1.start();const Pt=setTimeout(()=>{$e(new Error("unsupported_event"))},I);oe={messageChannel:P,onMessage(xr){const ki=xr;if(ki.data.eventId===nt)switch(ki.data.status){case"ack":clearTimeout(Pt),Z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(ki.data.response);break;default:clearTimeout(Pt),clearTimeout(Z),$e(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:nt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function Kn(){return window}function ag(){return typeof Kn().WorkerGlobalScope<"u"&&"function"==typeof Kn().importScripts}function lu(){return(lu=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lg="firebaseLocalStorageDb",xa="firebaseLocalStorage",vo="fbase_key";class Lc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Th(w,m){return w.transaction([xa],m?"readwrite":"readonly").objectStore(xa)}function ug(){const w=indexedDB.open(lg,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(xa,{keyPath:vo})}catch(S){_(S)}}),w.addEventListener("success",(0,u.Z)(function*(){const I=w.result;I.objectStoreNames.contains(xa)?m(I):(I.close(),yield function ev(){const w=indexedDB.deleteDatabase(lg);return new Lc(w).toPromise()}(),m(yield ug()))}))})}function dg(w,m,_){return ye.apply(this,arguments)}function ye(){return(ye=(0,u.Z)(function*(w,m,_){const I=Th(w,!0).put({[vo]:m,value:_});return new Lc(I).toPromise()})).apply(this,arguments)}function Yi(){return(Yi=(0,u.Z)(function*(w,m){const _=Th(w,!1).get(m),I=yield new Lc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Dh(w,m){const _=Th(w,!0).delete(m);return new Lc(_).toPromise()}const fs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield ug()),_.db})()}_withRetries(_){var I=this;return(0,u.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return ag()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=og._getInstance(function cg(){return ag()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,u.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,u.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var I,S;if(_.activeServiceWorker=yield function _t(){return lu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Jy(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,u.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ME(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ug();return yield dg(_,Bs,"1"),yield Dh(_,Bs),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,u.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(P=>dg(P,_,I)),S.localCache[_]=I,S.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=yield I._withRetries(P=>function Bt(w,m){return Yi.apply(this,arguments)}(P,_));return I.localCache[_]=S,S})()}_remove(_){var I=this;return(0,u.Z)(function*(){return I._withPendingWrite((0,u.Z)(function*(){return yield I._withRetries(S=>Dh(S,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const I=yield _._withRetries(Z=>{const oe=Th(Z,!1).getAll();return new Lc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of I)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),yr=1e12;class Co{constructor(m){this.auth=m,this.counter=yr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new rv(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||yr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||yr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var I;return null===(I=_._widgets.get(m||yr))||void 0===I||I.execute(),""})()}}class rv{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;j(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ps=Ps("rcb"),xE=new un(3e4,6e4);class gg{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Kn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function PE(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Wt(Kn().grecaptcha)?Promise.resolve(Kn().grecaptcha):new Promise((I,S)=>{const P=Kn().setTimeout(()=>{S(de(m,"network-request-failed"))},xE.get());Kn()[ps]=()=>{Kn().clearTimeout(P),delete Kn()[ps];const oe=Kn().grecaptcha;if(!oe||!Wt(oe))return void S(de(m,"internal-error"));const Le=oe.render;oe.render=($e,nt)=>{const Pt=Le($e,nt);return this.counter++,Pt},this.hostLanguage=_,I(oe)},zl(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:ps,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Kn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mg{load(m){return(0,u.Z)(function*(){return new Co(m)})()}clearedOneInstance(){}}const Sh="recaptcha",iv={theme:"light",type:"image"};class _g{constructor(m,_=Object.assign({},iv),I){this.parameters=_,this.type=Sh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xn(I),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;j(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mg:new gg,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Kn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){j(Xt()&&!ag(),m.auth,"internal-error"),yield function OE(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ms(w){return ho.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ah{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function ni(w,m,_){return js.apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(w,m,_){const I=xn(w),S=yield du(I,m,(0,B.m9)(_));return new Ah(S,P=>lh(I,P))})).apply(this,arguments)}function yg(w,m,_){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);yield Ta(!1,I,"phone");const S=yield du(I.auth,m,(0,B.m9)(_));return new Ah(S,P=>CE(I,P))})).apply(this,arguments)}function lt(w,m,_){return vr.apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),S=yield du(I.auth,m,(0,B.m9)(_));return new Ah(S,P=>Pn(I,P))})).apply(this,arguments)}function du(w,m,_){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,u.Z)(function*(w,m,_){var I;const S=yield _.verify();try{let P;if(j("string"==typeof S,w,"argument-error"),j(_.type===Sh,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return j("enroll"===Z.type,w,"internal-error"),(yield function Qy(w,m){return fe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,w,"internal-error");const oe=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return j(oe,w,"missing-multi-factor-info"),(yield function hg(w,m){return fe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function bt(w,m){return hn.apply(this,arguments)}(w,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Mh.apply(this,arguments)}function Gr(w,m){return $s.apply(this,arguments)}function $s(){return($s=(0,u.Z)(function*(w,m){yield Oc((0,B.m9)(w),m)})).apply(this,arguments)}let yn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=xn(_)}verifyPhoneNumber(_,I){return du(this.auth,_,(0,B.m9)(I))}static credential(_,I){return pt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:S}=_;return I&&S?pt._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function wo(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class qo extends Sc{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ns(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Ns(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Ns(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function wt(w){return Oy(w.auth,new qo(w),w.bypassAuthState)}function sv(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Kp(_,new qo(w),w.bypassAuthState)}function vg(w){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,u.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Oc(_,new qo(w),w.bypassAuthState)})).apply(this,arguments)}class Hs{constructor(m,_,I,S,P=!1){this.auth=m,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(I,S){m.pendingPromise={resolve:I,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const $e={auth:_.auth,requestUri:I,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)($e))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return vg;case"reauthViaPopup":case"reauthViaRedirect":return sv;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zs=new un(2e3,1e4);function ri(w,m,_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,u.Z)(function*(w,m,_){const I=xn(w);he(w,m,yi);const S=wo(I,_);return new Gs(I,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function Oa(w,m,_){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,yi);const S=wo(I.auth,_);return new Gs(I.auth,"reauthViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}function hu(w,m,_){return fu.apply(this,arguments)}function fu(){return(fu=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,yi);const S=wo(I.auth,_);return new Gs(I.auth,"linkViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}let Gs=(()=>{class w extends Hs{constructor(_,I,S,P,Z){super(_,I,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const I=yield _.execute();return j(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,u.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=Fc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,zs.get())};_()}}return w.currentPopupAction=null,w})();const jc="pendingRedirect",gs=new Map;class Zo extends Hs{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let I=gs.get(_.auth._key());if(!I){try{const P=(yield function pu(w,m){return xh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}gs.set(_.auth._key(),I)}return _.bypassAuthState||gs.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const S=yield I.auth._redirectUserForId(m.eventId);if(S)return I.user=S,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function xh(){return(xh=(0,u.Z)(function*(w,m){const _=Ph(m),I=ii(w);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(_));return yield I._remove(_),S})).apply(this,arguments)}function $c(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(w,m){return ii(w)._set(Ph(m),"true")})).apply(this,arguments)}function Io(){gs.clear()}function Hc(w,m){gs.set(w._key(),m)}function ii(w){return it(w._redirectPersistence)}function Ph(w){return Zn(jc,w.config.apiKey,w.name)}function gu(w,m,_){return function vi(w,m,_){return Bn.apply(this,arguments)}(w,m,_)}function Bn(){return(Bn=(0,u.Z)(function*(w,m,_){const I=xn(w);he(w,m,yi),yield I._initializationPromise;const S=wo(I,_);return yield $c(S,I),S._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function on(w,m,_){return function Ra(w,m,_){return Cr.apply(this,arguments)}(w,m,_)}function Cr(){return(Cr=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,yi),yield I.auth._initializationPromise;const S=wo(I.auth,_);yield $c(S,I.auth);const P=yield ms(I);return S._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function si(w,m,_){return function zc(w,m,_){return Gc.apply(this,arguments)}(w,m,_)}function Gc(){return(Gc=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,yi),yield I.auth._initializationPromise;const S=wo(I.auth,_);yield Ta(!1,I,m.providerId),yield $c(S,I.auth);const P=yield ms(I);return S._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function ov(w,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,u.Z)(function*(w,m){return yield xn(w)._initializationPromise,Eo(w,m,!1)})).apply(this,arguments)}function Eo(w,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(w,m,_=!1){const I=xn(w),S=wo(I,m),Z=yield new Zo(I,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,m)),Z})).apply(this,arguments)}function ms(w){return mu.apply(this,arguments)}function mu(){return(mu=(0,u.Z)(function*(w){const m=Fc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class ka{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Fa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oh(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Oh(m)){const S=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(de(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cg(m))}saveEventToCache(m){this.cachedEventUids.add(Cg(m)),this.lastProcessedEventTime=Date.now()}}function Cg(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Oh({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Nh(w){return _u.apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(w,m={}){return fe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Dt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bo=/^https?/;function To(){return(To=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Nh(w);for(const _ of m)try{if(wg(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function wg(w){const m=at(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const Z=new URL(w);return""===Z.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===I}if(!bo.test(_))return!1;if(Dt.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const Ig=new un(3e4,6e4);function Wr(){const w=Kn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let rr=null;const bg=new un(5e3,15e3),yu="__/auth/iframe",Tg="emulator/auth/iframe",Dg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function La(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?kr(m,Tg):`https://${w.config.authDomain}/${yu}`,I={apiKey:m.apiKey,appName:w.name,v:L.SDK_VERSION},S=vu.get(w.config.apiHost);S&&(I.eid=S);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function Ws(){return Ws=(0,u.Z)(function*(w){const m=yield function Do(w){return rr=rr||function Eg(w){return new Promise((m,_)=>{var I,S,P;function Z(){Wr(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Wr(),_(de(w,"network-request-failed"))},timeout:Ig.get()})}if(null!==(S=null===(I=Kn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Kn().gapi)||void 0===P||!P.load){const oe=Ps("iframefcb");return Kn()[oe]=()=>{gapi.load?Z():_(de(w,"network-request-failed"))},zl(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw rr=null,m})}(w),rr}(w),_=Kn().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:La(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dg,dontclear:!0},I=>new Promise(function(){var S=(0,u.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const oe=de(w,"network-request-failed"),Le=Kn().setTimeout(()=>{Z(oe)},bg.get());function $e(){Kn().clearTimeout(Le),P(I)}I.ping($e).then($e,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),Ws.apply(this,arguments)}const Wc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xo{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Sg="__/auth/handler",RE="emulator/auth/handler",Rh=encodeURIComponent("fac");function Ri(w,m,_,I,S,P){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,u.Z)(function*(w,m,_,I,S,P){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const Z={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:S};if(m instanceof yi){m.setDefaultLanguage(w.languageCode),Z.providerId=m.providerId||"",(0,B.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,Pt]of Object.entries(P||{}))Z[nt]=Pt}if(m instanceof Br){const nt=m.getScopes().filter(Pt=>""!==Pt);nt.length>0&&(Z.scopes=nt.join(","))}w.tenantId&&(Z.tid=w.tenantId);const oe=Z;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield w._getAppCheckToken(),$e=Le?`#${Rh}=${encodeURIComponent(Le)}`:"";return`${function Eu({config:w}){return w.emulator?kr(w,RE):`https://${w.authDomain}/${Sg}`}(w)}?${(0,B.xO)(oe).slice(1)}${$e}`})).apply(this,arguments)}const jn="webStorageSupport",qs=class kh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cu,this._completeRedirectFn=Eo,this._overrideRedirectResult=Hc}_openPopup(m,_,I,S){var P=this;return(0,u.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Ri(m,_,I,at(),S);return function NE(w,m,_,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},Wc),{width:I.toString(),height:S.toString(),top:P,left:Z}),$e=(0,B.z$)().toLowerCase();_&&(oe=x($e)?"_blank":_),O($e)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((xr,[ki,Zs])=>`${xr}${ki}=${Zs},`,"");if(function vt(w=(0,B.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}($e)&&"_self"!==oe)return function wu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new Xo(null);const Pt=window.open(m||"",oe,nt);j(Pt,w,"popup-blocked");try{Pt.focus()}catch{}return new Xo(Pt)}(m,oe,Fc())})()}_openRedirect(m,_,I,S){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function bh(w){Kn().location.href=w}(yield Ri(m,_,I,at(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const I=yield function Jo(w){return Ws.apply(this,arguments)}(m),S=new ka(m);return I.register("authEvent",P=>(j(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=I,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(jn,{type:jn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[jn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Qo(w){return To.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Mt()||N()||Ke()}};class Ag{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class qr extends Ag{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new qr(m)}_finalizeEnroll(m,_,I){return function wh(w,m){return fe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function fg(w,m){return fe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ua=(()=>{class w{constructor(){}static assertion(_){return qr._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var lv="@firebase/auth";class kE{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const uv=(0,B.Pz)("authIdTokenMaxAge")||300;let Tu=null;const dv=w=>function(){var m=(0,u.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>uv)return;const P=I?.token;Tu!==P&&(Tu=P,yield fetch(w,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function ea(w=(0,L.getApp)()){const m=(0,L._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function Ur(w,m){const _=(0,L._getProvider)(w,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,B.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:qs,persistence:[fs,Eh,cu]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const P=dv(I);(function ig(w,m,_){(0,B.m9)(w).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Zy(w,m,_,I){(0,B.m9)(w).onIdTokenChanged(m,_,I)}(_,Z=>P(Z))}const S=(0,B.q4)("auth");return S&&Yd(_,`http://${S}`),_}!function Fh(w){(0,L._registerComponent)(new we.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=I.options;j(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bc(w)},$e=new fo(I,S,P,Le);return function Ay(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}($e,_),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new we.wA("auth-internal",m=>{const _=xn(m.getProvider("auth").getImmediate());return new kE(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(lv,"0.23.2",function Ci(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(lv,"0.23.2","esm2017")}("Browser")},9058:(st,be,F)=>{F.d(be,{$s:()=>it,BH:()=>re,DV:()=>Ln,G6:()=>kr,GJ:()=>In,L:()=>Se,LL:()=>Ne,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>Ce,UI:()=>Ar,US:()=>we,Wl:()=>ht,Yr:()=>un,ZB:()=>X,ZR:()=>fe,aH:()=>ee,b$:()=>Xt,cI:()=>en,dS:()=>Mi,eu:()=>le,g5:()=>L,gK:()=>Gt,gQ:()=>Tt,h$:()=>Fe,hl:()=>ie,hu:()=>B,jU:()=>Ue,m9:()=>Zn,ne:()=>rn,p$:()=>W,pd:()=>mt,q4:()=>tt,r3:()=>nn,ru:()=>at,tV:()=>U,uI:()=>j,ug:()=>Zi,vZ:()=>ar,w1:()=>_n,w9:()=>Sn,xO:()=>ls,xb:()=>pi,z$:()=>ke,zI:()=>ue,zd:()=>dt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},B=function(H,$){if(!H)throw L($)},L=function(H){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},te=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&N+1<H.length&&56320==(64512&H.charCodeAt(N+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++N)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let x=0;x<H.length;x+=3){const K=H[x],ge=x+1<H.length,Be=ge?H[x+1]:0,yt=x+2<H.length,Ke=yt?H[x+2]:0;let dn=(15&Be)<<2|Ke>>6,Mt=63&Ke;yt||(Mt=64,ge||(dn=64)),N.push(O[K>>2],O[(3&K)<<4|Be>>4],O[dn],O[Mt])}return N.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(te(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,N=0;for(;O<H.length;){const x=H[O++];if(x<128)$[N++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[N++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const yt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[N++]=String.fromCharCode(55296+(yt>>10)),$[N++]=String.fromCharCode(56320+(1023&yt))}else{const K=H[O++],ge=H[O++];$[N++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&ge)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Be=x<H.length?O[H.charAt(x)]:0;++x;const Ke=x<H.length?O[H.charAt(x)]:64;++x;const vt=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Be||null==Ke||null==vt)throw new Pe;N.push(K<<2|Be>>4),64!==Ke&&(N.push(Be<<4&240|Ke>>2),64!==vt&&N.push(Ke<<6&192|vt))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=te(H);return we.encodeByteArray($,!0)},Se=function(H){return Fe(H).replace(/\./g,"")},U=function(H){try{return we.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function W(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=X(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const De=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&U(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=De())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},ot=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const N=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),N]:[$.substring(0,O),N]},ee=()=>{var H;return null===(H=De())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=De())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,N)=>{O?this.reject(O):this.resolve(N),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,N))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ge=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(ge)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ce(){var H;const $=null===(H=De())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function at(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _n(){const H=ke();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function un(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function kr(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((H,$)=>{try{let O=!0;const N="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(N);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(N),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fe extends Error{constructor($,O,N){super(O),this.code=$,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor($,O,N){this.service=$,this.serviceName=O,this.errors=N}create($,...O){const N=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],ge=K?function Qe(H,$){return H.replace(Ve,(O,N)=>{const x=$[N];return null!=x?String(x):`<${N}?>`})}(K,N):"Error";return new fe(x,`${this.serviceName}: ${ge} (${x}).`,N)}}const Ve=/\{\$([^}]+)}/g;function en(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const qt=function(H){let $={},O={},N={},x="";try{const K=H.split(".");$=en(U(K[0])||""),O=en(U(K[1])||""),x=K[2],N=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:N,signature:x}},Sn=function(H){const O=qt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},In=function(H){const $=qt(H).claims;return"object"==typeof $&&!0===$.admin};function nn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function Ln(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function pi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Ar(H,$,O){const N={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(N[x]=$.call(O,H[x],x,H));return N}function ar(H,$){if(H===$)return!0;const O=Object.keys(H),N=Object.keys($);for(const x of O){if(!N.includes(x))return!1;const K=H[x],ge=$[x];if(Un(K)&&Un(ge)){if(!ar(K,ge))return!1}else if(K!==ge)return!1}for(const x of N)if(!O.includes(x))return!1;return!0}function Un(H){return null!==H&&"object"==typeof H}function ls(H){const $=[];for(const[O,N]of Object.entries(H))Array.isArray(N)?N.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(N));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[x,K]=N.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const N=this.W_;if("string"==typeof $)for(let vt=0;vt<16;vt++)N[vt]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let vt=0;vt<16;vt++)N[vt]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let vt=16;vt<80;vt++){const dn=N[vt-3]^N[vt-8]^N[vt-14]^N[vt-16];N[vt]=4294967295&(dn<<1|dn>>>31)}let Ke,Zt,x=this.chain_[0],K=this.chain_[1],ge=this.chain_[2],Be=this.chain_[3],yt=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(Ke=Be^K&(ge^Be),Zt=1518500249):(Ke=K^ge^Be,Zt=1859775393):vt<60?(Ke=K&ge|Be&(K|ge),Zt=2400959708):(Ke=K^ge^Be,Zt=3395469782);const dn=(x<<5|x>>>27)+Ke+yt+Zt+N[vt]&4294967295;yt=Be,Be=ge,ge=4294967295&(K<<30|K>>>2),K=x,x=dn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+ge&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const N=O-this.blockSize;let x=0;const K=this.buf_;let ge=this.inbuf_;for(;x<O;){if(0===ge)for(;x<=N;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[ge]=$.charCodeAt(x),++ge,++x,ge===this.blockSize){this.compress_(K),ge=0;break}}else for(;x<O;)if(K[ge]=$[x],++ge,++x,ge===this.blockSize){this.compress_(K),ge=0;break}}this.inbuf_=ge,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let N=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[N]=this.chain_[x]>>K&255,++N;return $}}function rn(H,$){const O=new Jr(H,$);return O.subscribe.bind(O)}class Jr{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(N=>{this.error(N)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,N){let x;if(void 0===$&&void 0===O&&void 0===N)throw new Error("Missing Observer.");x=function Rt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:N},void 0===x.next&&(x.next=An),void 0===x.error&&(x.error=An),void 0===x.complete&&(x.complete=An);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function Gt(H,$){return`${H} failed: ${$} argument `}const Mi=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);if(x>=55296&&x<=56319){const K=x-55296;N++,B(N<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(N)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Zi=function(H){let $=0;for(let O=0;O<H.length;O++){const N=H.charCodeAt(O);N<128?$++:N<2048?$+=2:N>=55296&&N<=56319?($+=4,O++):$+=3}return $},cr=1e3,Ge=2,me=144e5,Xe=.5;function it(H,$=cr,O=Ge){const N=$*Math.pow(O,H),x=Math.round(Xe*N*(Math.random()-.5)*2);return Math.min(me,N+x)}function Zn(H){return H&&H._delegate?H._delegate:H}},7083:(st,be,F)=>{var u=F(5879);let B=null;function L(){return B}class pe{}const we=new u.OlP("DocumentToken");let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Se)},providedIn:"platform"})}return n})();const Fe=new u.OlP("Location Initialized");let Se=(()=>{class n extends Pe{constructor(){super(),this._doc=(0,u.f3M)(we),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function W(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Je)},providedIn:"root"})}return n})();const Me=new u.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(Me,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ve=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(Me,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ae=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(W(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=W;static#r=this.\u0275fac=function(r){return new(r||n)(u.LFG(Oe))};static#i=this.\u0275prov=u.Yz7({token:n,factory:function(){return function De(){return new Ae((0,u.LFG)(Oe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function fe(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[u.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[u.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function zo(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ca(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const Gl=/\s+/,Kd=[];let wa=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=Kd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Gl):Kd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Gl):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Gl).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Dc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Dc(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),xn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function xn(n,e){n.context.$implicit=e.item}let Ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ay,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ay{constructor(){this.$implicit=null,this.ngIf=null}}function Yd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function gi(n,e){return new u.vHH(2100,!1)}class Wl{createSubscription(e,t){return(0,u.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,u.rg0)(()=>e.unsubscribe())}}class eh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ql=new eh,th=new Wl;let Ac=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return ql;if((0,u.F4k)(t))return th;throw gi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.sBO,16))};static#t=this.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function mi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Ms(n,e,t){return function Mt(n,e,t,r,i,a,l=!1){let f="",g=!1;if(isFinite(n)){let y=function Pi(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function xs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let E=e.minInt,T=e.minFrac,A=e.maxFrac;if(a){const He=a.match(x);if(null===He)throw new Error(`${a} is not a valid digit info`);const Re=He[1],Ye=He[3],gt=He[5];null!=Re&&(E=zo(Re)),null!=Ye&&(T=zo(Ye)),null!=gt?A=zo(gt):null!=Ye&&T>A&&(A=T)}!function Wt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let T=l;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let T=1;T<l;T++)r[T]=0}if(f>=5)if(l-1<0){for(let T=0;T>l;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const y=e+n.integerLen,E=r.reduceRight(function(T,A,R,G){return G[R]=(A+=T)<10?A:A-10,g&&(0===G[R]&&R>=y?G.pop():g=!1),A>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(y,T,A);let R=y.digits,G=y.integerLen;const Q=y.exponent;let J=[];for(g=R.every(He=>!He);G<E;G++)R.unshift(0);for(;G<0;G++)R.unshift(0);G>0?J=R.splice(G,R.length):(J=R,R=[0]);const Te=[];for(R.length>=e.lgSize&&Te.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)Te.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&Te.unshift(R.join("")),f=Te.join(fe(t,r)),J.length&&(f+=fe(t,i)+J.join("")),Q&&(f+=fe(t,Ue.Exponential)+"+"+Q)}else f=fe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function ho(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],g=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let E=0;E<g.length;E++){const T=g.charAt(E);"0"===T?t.minFrac=t.maxFrac=E+1:"#"===T?t.maxFrac=E+1:t.posSuf+=T}const y=f.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,a){const E=i.length-t.posPre.length-t.posSuf.length,T=a.indexOf("#");t.negPre=a.substring(0,T).replace(/'/g,""),t.negSuf=a.slice(T+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ne(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}(e,re.Decimal),fe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Rs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw gi()}}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.soG,16))};static#t=this.\u0275pipe=u.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let mr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw gi();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Vn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function _i(n){return"server"===n}let Br=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Fs((0,u.LFG)(we),window)})}return n})();class Fs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qp(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ds{}class rg extends pe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mh extends rg{static makeCurrent(){!function te(n){B||(B=n)}(new mh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bE(){return kc=kc||document.querySelector("base"),kc?kc.getAttribute("href"):null}();return null==t?null:function Zy(n){_h=_h||document.createElement("a"),_h.setAttribute("href",n);const e=_h.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ca(document.cookie,e)}}let _h,kc=null,TE=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ky=new u.OlP("EventManagerPlugins");let Yy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ky),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class yh{constructor(e){this._doc=e}}const vh="ng-app-id";let su=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_i(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${vh}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(vh),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(vh,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(we),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Vs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aa=/%COMP%/g,hs=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sn(n,e){return e.map(t=>t.replace(Aa,n))}let au=(()=>{class n{constructor(t,r,i,a,l,f,g,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=f,this.ngZone=g,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=_i(f),this.defaultRenderer=new Bs(t,l,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===u.ifc.ShadowDom&&(r={...r,encapsulation:u.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Eh?i.applyToHost(t):i instanceof ti&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,f=this.ngZone,g=this.eventManager,y=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case u.ifc.Emulated:a=new Eh(g,y,r,this.appId,E,l,f,T);break;case u.ifc.ShadowDom:return new Ma(g,y,t,r,l,f,this.nonce,T);default:a=new ti(g,y,r,E,l,f,T)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Yy),u.LFG(su),u.LFG(u.AFp),u.LFG(hs),u.LFG(we),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Bs{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Vs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ih(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ih(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Vs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Vs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Ih(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ma extends Bs{constructor(e,t,r,i,a,l,f,g){super(e,a,l,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=sn(i.id,i.styles);for(const E of y){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=E,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ti extends Bs{constructor(e,t,r,i,a,l,f,g){super(e,a,l,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?sn(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Eh extends ti{constructor(e,t,r,i,a,l,f,g){const y=i+"-"+r.id;super(e,t,r,a,l,f,g,y),this.contentAttr=function sg(n){return"_ngcontent-%COMP%".replace(Aa,n)}(y),this.hostAttr=function ou(n){return"_nghost-%COMP%".replace(Aa,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let AE=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(we))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const cu=["alt","control","meta","shift"],yo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},og={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Fc=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),cu.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),l+=y+".")}),l+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=yo[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cu.forEach(l=>{l!==i&&(0,og[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(we))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const lg=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function _t(){mh.makeCurrent()},multi:!0},{provide:we,useFactory:function ME(){return(0,u.RDi)(document),document},deps:[]}]),Xy=new u.OlP(""),xa=[{provide:u.rWj,useClass:class ig{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new u.vHH(5103,!1);return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],vo=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function lu(){return new u.qLn},deps:[]},{provide:Ky,useClass:AE,multi:!0,deps:[we,u.R0b,u.Lbi]},{provide:Ky,useClass:Fc,multi:!0,deps:[we]},au,su,Yy,{provide:u.FYo,useExisting:au},{provide:ds,useClass:TE,deps:[]},[]];let Lc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Xy,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...vo,...xa],imports:[Vn,u.hGG]})}return n})(),ye=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(we))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function dg(){return new ye((0,u.LFG)(we))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var ni=F(5592),js=F(4674),fn=F(2459),lt=F(2096),vr=F(5619);const{isArray:du}=Array,{getPrototypeOf:Mh,prototype:Gr,keys:$s}=Object;function yn(n){if(1===n.length){const e=n[0];if(du(e))return{args:e,keys:null};if(function wo(n){return n&&"object"==typeof n&&Mh(n)===Gr}(e)){const t=$s(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var qo=F(2737),wt=F(7398);const{isArray:sv}=Array;function Bc(n){return(0,wt.U)(e=>function vg(n,e){return sv(e)?n(...e):n(e)}(n,e))}var Hs=F(4564);function zs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ri=F(8251),Pa=F(7103);function Oa(...n){const e=(0,Hs.yG)(n),t=(0,Hs.jO)(n),{args:r,keys:i}=yn(n);if(0===r.length)return(0,fn.D)([],e);const a=new ni.y(function Na(n,e,t=qo.y){return r=>{hu(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let g=0;g<i;g++)hu(e,()=>{const y=(0,fn.D)(n[g],e);let E=!1;y.subscribe((0,ri.x)(r,T=>{a[g]=T,E||(E=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>zs(i,l):qo.y));return t?a.pipe(Bc(t)):a}function hu(n,e,t){n?(0,Pa.f)(t,n,e):e()}const Gs=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var jc=F(7537);function Zo(...n){return function gs(){return(0,jc.J)(1)}()((0,fn.D)(n,(0,Hs.yG)(n)))}var pu=F(4829);function xh(n){return new ni.y(e=>{(0,pu.Xf)(n()).subscribe(e)})}var $c=F(8407);function Ko(n,e){const t=(0,js.m)(n)?n:()=>n,r=i=>i.error(t());return new ni.y(e?i=>e.schedule(r,0,i):r)}var Io=F(6232),Hc=F(7394),ii=F(9360);function Ph(){return(0,ii.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ri.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gu extends ni.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Hc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ri.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Hc.w0.EMPTY)}return e}refCount(){return Ph()(this)}}var vi=F(8645),Bn=F(4664);function on(n){return n<=0?()=>Io.E:(0,ii.e)((e,t)=>{let r=0;e.subscribe((0,ri.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ra(...n){const e=(0,Hs.yG)(n);return(0,ii.e)((t,r)=>{(e?Zo(n,t,e):Zo(n,t)).subscribe(r)})}function Cr(n,e){return(0,ii.e)((t,r)=>{let i=0;t.subscribe((0,ri.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var si=F(1631);function zc(n){return(0,ii.e)((e,t)=>{let r=!1;e.subscribe((0,ri.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gc(n=ov){return(0,ii.e)((e,t)=>{let r=!1;e.subscribe((0,ri.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ov(){return new Gs}function nr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,a)=>n(i,a,r)):qo.y,on(1),t?zc(e):Gc(()=>new Gs))}function Eo(n,e){return(0,js.m)(e)?(0,si.z)(n,e,1):(0,si.z)(n,1)}function bn(n,e,t){const r=(0,js.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,ii.e)((i,a)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let f=!0;i.subscribe((0,ri.x)(a,g=>{var y;null===(y=r.next)||void 0===y||y.call(r,g),a.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),a.complete()},g=>{var y;f=!1,null===(y=r.error)||void 0===y||y.call(r,g),a.error(g)},()=>{var g,y;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):qo.y}function ms(n){return(0,ii.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ri.x)(t,void 0,void 0,l=>{a=(0,pu.Xf)(n(l,ms(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Yo(n,e){return(0,ii.e)(function mu(n,e,t,r,i){return(a,l)=>{let f=t,g=e,y=0;a.subscribe((0,ri.x)(l,E=>{const T=y++;g=f?n(g,E,T):(f=!0,E),r&&l.next(g)},i&&(()=>{f&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ka(n){return n<=0?()=>Io.E:(0,ii.e)((e,t)=>{let r=[];e.subscribe((0,ri.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fa(n){return(0,ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Nh=F(2420);const Dt="primary",bo=Symbol("RouteTitle");class Qo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function To(n){return new Qo(n)}function wg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Eg(n[i],e[i]))return!1;return!0}function Eg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function rr(n){return n.length>0?n[n.length-1]:null}function Do(n){return function yg(n){return!!n&&(n instanceof ni.y||(0,js.m)(n.lift)&&(0,js.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,fn.D)(Promise.resolve(n)):(0,lt.of)(n)}const bg={exact:function vu(n,e,t){if(!Xo(n.segments,e.segments)||!Wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vu(n.children[r],e.children[r],t))return!1;return!0},subset:Jo},yu={exact:function Dg(n,e){return Wr(n,e)},subset:function La(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Eg(n[t],e[t]))},ignored:()=>!0};function Tg(n,e,t){return bg[t.paths](n.root,e.root,t.matrixParams)&&yu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Jo(n,e,t){return Ws(n,e,e.segments,t)}function Ws(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Xo(i,t)||e.hasChildren()||!Wc(i,t,r))}if(n.segments.length===t.length){if(!Xo(n.segments,t)||!Wc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Jo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Xo(n.segments,i)&&Wc(n.segments,i,r)&&n.children[Dt])&&Ws(n.children[Dt],e,a,r)}}function Wc(n,e,t){return e.every((r,i)=>yu[t](n[i].parameters,r.parameters))}class So{constructor(e=new Ht([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=To(this.queryParams)),this._queryParamMap}toString(){return RE.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rh(this)}}class Cu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=To(this.parameters)),this._parameterMap}toString(){return qr(this)}}function Xo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let wu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new Sg},providedIn:"root"})}return n})();class Sg{parse(e){const t=new Ba(e);return new So(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ri(e.root,!0)}`,r=function cv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Eu(t)}=${Eu(i)}`).join("&"):`${Eu(t)}=${Eu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const RE=new Sg;function Rh(n){return n.segments.map(e=>qr(e)).join("/")}function Ri(n,e){if(!n.hasChildren())return Rh(n);if(e){const t=n.children[Dt]?Ri(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Dt&&r.push(`${i}:${Ri(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function NE(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dt?[Ri(n.children[Dt],!1)]:[`${i}:${Ri(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${Rh(n)}/${t[0]}`:`${Rh(n)}/(${t.join("//")})`}}function Iu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eu(n){return Iu(n).replace(/%3B/gi,";")}function kh(n){return Iu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qs(n){return decodeURIComponent(n)}function Ag(n){return qs(n.replace(/\+/g,"%20"))}function qr(n){return`${kh(n.path)}${function Ua(n){return Object.keys(n).map(e=>`;${kh(e)}=${kh(n[e])}`).join("")}(n.parameters)}`}const Va=/^[^\/()?;#]+/;function Ao(n){const e=n.match(Va);return e?e[0]:""}const bu=/^[^\/()?;=#]+/,Mg=/^[^=?&#]+/,Ci=/^[^&#]+/;class Ba{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new Ht(e,t)),r}parseSegment(){const e=Ao(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new Cu(qs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function lv(n){const e=n.match(bu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ao(this.remaining);i&&(r=i,this.capture(r))}e[qs(t)]=qs(r)}parseQueryParam(e){const t=function kE(n){const e=n.match(Mg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Fh(n){const e=n.match(Ci);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ag(t),a=Ag(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ao(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Dt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Dt]:new Ht([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function uv(n){return n.segments.length>0?new Ht([],{[Dt]:n}):n}function Tu(n){const e={};for(const r of Object.keys(n.children)){const a=Tu(n.children[r]);if(r===Dt&&0===a.segments.length&&a.hasChildren())for(const[l,f]of Object.entries(a.children))e[l]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function dv(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function ea(n){return n instanceof So}function m(n){let e;const i=uv(function t(a){const l={};for(const g of a.children){const y=t(g);l[g.outlet]=y}const f=new Ht(a.url,l);return a===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const a=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([g,y])=>{f[g]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oe(t,e,r)}(e);if(a.toRoot())return P(i,i,new Ht([],{}),t,r);const l=function nt(n,e,t){if(n.isAbsolute)return new $e(e,!0,0);if(!t)return new $e(e,!1,NaN);if(null===t.parent)return new $e(t,!0,0);const r=I(n.commands[0])?0:1;return function Pt(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new $e(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=l.processChildren?Zs(l.segmentGroup,l.index,a.commands):ki(l.segmentGroup,l.index,a.commands);return P(i,l.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([g,y])=>{a[g]=Array.isArray(y)?y.map(E=>`${E}`):`${y}`}),l=n===e?t:Z(n,e,t);const f=uv(Tu(l));return new So(f,a,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Z(a,e,t)}),new Ht(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new u.vHH(4003,!1);const i=r.find(S);if(i&&i!==rr(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $e{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ki(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Zs(n,e,t);const r=function xg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Du(g,y,l))return a;r+=2}else{if(!Du(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ht(n.segments.slice(0,r.pathIndex),{});return a.children[Dt]=new Ht(n.segments.slice(r.pathIndex),n.children),Zs(a,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?qc(n,e,t):r.match?Zs(n,0,i):qc(n,e,t)}function Zs(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function xr(n){return S(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const a=Zs(n.children[Dt],e,t);return new Ht(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=ki(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new Ht(n.segments,i)}}function qc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(S(a)){const g=ta(a.outlets);return new Ht(r,g)}if(0===i&&I(t[0])){r.push(new Cu(n.segments[e].path,na(t[0]))),i++;continue}const l=S(a)?a.outlets[Dt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&I(f)?(r.push(new Cu(l,na(f))),i+=2):(r.push(new Cu(l,{})),i++)}return new Ht(r,{})}function ta(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=qc(new Ht([],{}),0,r))}),e}function na(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Du(n,e,t){return n==t.path&&Wr(e,t.parameters)}const Zc="imperative";class Fi{constructor(e,t){this.id=e,this.url=t}}class ja extends Fi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ks extends Fi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kc extends Fi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mo extends Fi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Su extends Fi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lh extends Fi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FE extends Fi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hx extends Fi{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LE extends Fi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k3 extends Fi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class F3{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class px{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class L3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Uh{}class VE{constructor(e){this.url=e}}class U3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Pg,this.attachRef=null}}let Pg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new U3,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Au(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Au(e,this._root).map(t=>t.value)}}function fv(n,e){if(n===e.value)return e;for(const t of e.children){const r=fv(n,t);if(r)return r}return null}function Au(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Au(n,t);if(r.length)return r.unshift(e),r}return[]}class _s{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Yc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pv extends mx{constructor(e,t){super(e),this.snapshot=t,_v(this,e)}toString(){return this.snapshot.toString()}}function gv(n,e){const t=function Mu(n,e){const l=new Jc([],{},{},"",{},Dt,e,null,{});return new Vh("",new _s(l,[]))}(0,e),r=new vr.X([new Cu("",{})]),i=new vr.X({}),a=new vr.X({}),l=new vr.X({}),f=new vr.X(""),g=new Qc(r,i,l,f,a,Dt,e,t.root);return g.snapshot=t.root,new pv(new _s(g,[]),t)}class Qc{constructor(e,t,r,i,a,l,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,wt.U)(y=>y[bo]))??(0,lt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>To(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>To(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Og(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jc{get title(){return this.data?.[bo]}constructor(e,t,r,i,a,l,f,g,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=g,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=To(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=To(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vh extends mx{constructor(e,t){super(t),this.url=e,_v(this,t)}toString(){return BE(this._root)}}function _v(n,e){e.value._routerState=n,e.children.forEach(t=>_v(n,t))}function BE(n){const e=n.children.length>0?` { ${n.children.map(BE).join(", ")} } `:"";return`${n.value}${e}`}function yv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wr(e.params,t.params)||n.paramsSubject.next(t.params),function Ig(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Wr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ng(n,e){const t=Wr(n.params,e.params)&&function av(n,e){return Xo(n,e)&&n.every((t,r)=>Wr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ng(n.parent,e.parent))}let Bh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Pg),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(Rg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new _x(t,f,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class _x{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qc?this.route:e===Pg?this.childContexts:this.parent.get(e,t)}}const Rg=new u.OlP("");let jE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Oa([r.queryParams,r.params,r.data]).pipe((0,Bn.w)(([a,l,f],g)=>(f={...a,...l,...f},0===g?(0,lt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,u.qFp)(r.component);if(l)for(const{templateName:f}of l.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function jh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function yx(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jh(n,r,i);return jh(n,r)})}(n,e,t);return new _s(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>jh(n,f)),l}}const r=function Li(n){return new Qc(new vr.X(n.url),new vr.X(n.params),new vr.X(n.queryParams),new vr.X(n.fragment),new vr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>jh(n,a));return new _s(r,i)}}const $h="ngNavigationCancelingError";function vv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ea(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function kg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[$h]=!0,r.cancellationCode=e,t&&(r.url=t),r}function xu(n){return n&&n[$h]}let Cv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(r,i){1&r&&u._UZ(0,"router-outlet")},dependencies:[Bh],encapsulation:2})}return n})();function Hh(n){const e=n.children&&n.children.map(Hh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=Cv),t}function Qi(n){return n.outlet||Dt}function ra(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zE{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Yc(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Yc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new L3(a.value.snapshot))}),e.children.length&&this.forwardEvent(new px(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(yv(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),yv(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=ra(i.snapshot);l.attachRef=null,l.route=i,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class wv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zh{constructor(e,t){this.component=e,this.route=t}}function Pu(n,e,t){const r=n._root;return el(r,e?e._root:null,t,[r.value])}function Xc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function el(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Yc(e);return n.children.forEach(l=>{(function Lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function Sx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xo(n.url,e.url)||!Wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ng(n,e)||!Wr(n.queryParams,e.queryParams);default:return!Ng(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new wv(r)):(a.data=l.data,a._resolvedData=l._resolvedData),el(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new zh(f.outlet.component,l))}else l&&Gh(e,f,i),i.canActivateChecks.push(new wv(r)),el(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,f])=>Gh(f,t.getContext(l),i)),i}function Gh(n,e,t){const r=Yc(n),i=n.value;Object.entries(r).forEach(([a,l])=>{Gh(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new zh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Wh(n){return"function"==typeof n}function qE(n){return n instanceof Gs||"EmptyError"===n?.name}const Ou=Symbol("INITIAL_VALUE");function tl(){return(0,Bn.w)(n=>Oa(n.map(e=>e.pipe(on(1),Ra(Ou)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ou)return Ou;if(!1===t||t instanceof So)return t}return!0}),Cr(e=>e!==Ou),on(1)))}function Ev(n){return(0,$c.z)(bn(e=>{if(ea(e))throw vv(0,e)}),(0,wt.U)(e=>!0===e))}class qh{constructor(e){this.segmentGroup=e||null}}class Zh{constructor(e){this.urlTree=e}}function xo(n){return Ko(new qh(n))}function Tv(n){return Ko(new Zh(n))}class JE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,lt.of)(r);if(i.numberOfChildren>1||!i.children[Dt])return Ko(new u.vHH(4e3,!1));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new So(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([f,g])=>{l[f]=this.createSegmentGroup(e,g,r,i)}),new Ht(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Kh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yh(n,e,t,r,i){const a=Sv(n,e,t);return a.matched?(r=function HE(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function bv(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,lt.of)(!0);const a=i.map(l=>{const f=Xc(l,n);return Do(function Iv(n){return n&&Wh(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,lt.of)(a).pipe(tl(),Ev())}(r,e,t).pipe((0,wt.U)(l=>!0===l?a:{...Kh}))):(0,lt.of)(a)}function Sv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Kh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wg)(t,n,e);if(!i)return{...Kh};const a={};Object.entries(i.posParams??{}).forEach(([f,g])=>{a[f]=g.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Av(n,e,t,r){return t.length>0&&function Fx(n,e,t){return t.some(r=>Qh(n,e,r)&&Qi(r)!==Dt)}(n,t,r)?{segmentGroup:new Ht(e,kx(r,new Ht(t,n.children))),slicedSegments:[]}:0===t.length&&function XE(n,e,t){return t.some(r=>Qh(n,e,r))}(n,t,r)?{segmentGroup:new Ht(n.segments,Rx(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function Rx(n,e,t,r,i){const a={};for(const l of r)if(Qh(n,t,l)&&!i[Qi(l)]){const f=new Ht([],{});a[Qi(l)]=f}return{...i,...a}}function kx(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&Qi(r)!==Dt){const i=new Ht([],{});t[Qi(r)]=i}return t}function Qh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Lx{constructor(e,t,r,i,a,l,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new JE(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=Av(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe(ms(t=>{if(t instanceof Zh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof qh?this.noMatchError(t):t}),(0,wt.U)(t=>{const r=new Jc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),i=new _s(r,t),a=new Vh("",i),l=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Dt).pipe(ms(r=>{throw r instanceof qh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=mv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,fn.D)(i).pipe(Eo(a=>{const l=r.children[a],f=function Tx(n,e){const t=n.filter(r=>Qi(r)===e);return t.push(...n.filter(r=>Qi(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,l,a)}),Yo((a,l)=>(a.push(...l),a)),zc(null),function Cg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,a)=>n(i,a,r)):qo.y,ka(1),t?zc(e):Gc(()=>new Gs))}(),(0,si.z)(a=>{if(null===a)return xo(r);const l=eb(a);return function Ux(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,lt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,fn.D)(t).pipe(Eo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,l).pipe(ms(g=>{if(g instanceof qh)return(0,lt.of)(null);throw g}))),nr(f=>!!f),ms(f=>{if(qE(f))return function Mv(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,lt.of)([]):xo(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,l,f){return function jg(n,e,t,r){return!!(Qi(n)===r||r!==Dt&&Qh(e,t,n))&&("**"===n.path||Sv(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):xo(i):xo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tv(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,si.z)(l=>{const f=new Ht(l,{});return this.processSegment(e,t,f,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=Sv(t,i,a);if(!f)return xo(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?Tv(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,si.z)(A=>this.processSegment(e,r,t,A.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let f;if("**"===r.path){const g=i.length>0?rr(i).parameters:{},y=new Jc(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nb(r),Qi(r),r.component??r._loadedComponent??null,r,rl(r));f=(0,lt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Yh(t,r,i,e).pipe((0,wt.U)(({matched:g,consumedSegments:y,remainingSegments:E,parameters:T})=>g?{snapshot:new Jc(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nb(r),Qi(r),r.component??r._loadedComponent??null,r,rl(r)),consumedSegments:y,remainingSegments:E}:null));return f.pipe((0,Bn.w)(g=>null===g?xo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Bn.w)(({routes:y})=>{const E=r._loadedInjector??e,{snapshot:T,consumedSegments:A,remainingSegments:R}=g,{segmentGroup:G,slicedSegments:Q}=Av(t,A,R,y);if(0===Q.length&&G.hasChildren())return this.processChildren(E,y,G).pipe((0,wt.U)(Te=>null===Te?null:[new _s(T,Te)]));if(0===y.length&&0===Q.length)return(0,lt.of)([new _s(T,[])]);const J=Qi(r)===a;return this.processSegment(E,y,G,Q,J?Dt:a,!0).pipe((0,wt.U)(Te=>[new _s(T,Te)]))}))))}getChildConfig(e,t,r){return t.children?(0,lt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,lt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function QE(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,lt.of)(!0);const a=i.map(l=>{const f=Xc(l,n);return Do(function Mx(n){return n&&Wh(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,lt.of)(a).pipe(tl(),Ev())}(e,t,r).pipe((0,si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(bn(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Bg(n){return Ko(kg(!1,3))}())):(0,lt.of)({routes:[],injector:e})}}function H3(n){const e=n.value.routeConfig;return e&&""===e.path}function eb(n){const e=[],t=new Set;for(const r of n){if(!H3(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=eb(r.children);e.push(new _s(r.value,i))}return e.filter(r=>!t.has(r))}function nb(n){return n.data||{}}function rl(n){return n.resolve||{}}function ab(n){return"string"==typeof n.title||null===n.title}function Pv(n){return(0,Bn.w)(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,wt.U)(()=>e)):(0,lt.of)(e)})}const Ru=new u.OlP("ROUTES");let Ov=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,lt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Do(t.loadComponent()).pipe((0,wt.U)(ku),bn(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Fa(()=>{this.componentLoaders.delete(t)})),i=new gu(r,()=>new vi.x).pipe(Ph());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,lt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function Vx(n,e,t,r){return Do(n.loadChildren()).pipe((0,wt.U)(ku),(0,si.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,lt.of)(i):(0,fn.D)(e.compileModuleAsync(i))),(0,wt.U)(i=>{r&&r(n);let a,l,f=!1;return Array.isArray(i)?(l=i,!0):(a=i.create(t).injector,l=a.get(Ru,[],{optional:!0,self:!0}).flat()),{routes:l.map(Hh),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Fa(()=>{this.childrenLoaders.delete(r)})),l=new gu(a,()=>new vi.x).pipe(Ph());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ku(n){return function $a(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Hg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vi.x,this.transitionAbortSubject=new vi.x,this.configLoader=(0,u.f3M)(Ov),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(wu),this.rootContexts=(0,u.f3M)(Pg),this.inputBindingEnabled=null!==(0,u.f3M)(Rg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,lt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new F3(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new UE(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new vr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Cr(a=>0!==a.id),(0,wt.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Bn.w)(a=>{this.currentTransition=a;let l=!1,f=!1;return(0,lt.of)(a).pipe(bn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Bn.w)(g=>{const y=g.currentBrowserUrl.toString(),E=!t.navigated||g.extractedUrl.toString()!==y||y!==g.currentUrlTree.toString();if(!E&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new Mo(g.id,this.urlSerializer.serialize(g.rawUrl),A,0)),g.resolve(null),Io.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,lt.of)(g).pipe((0,Bn.w)(A=>{const R=this.transitions?.getValue();return this.events.next(new ja(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?Io.E:Promise.resolve(A)}),function $g(n,e,t,r,i,a){return(0,si.z)(l=>function Nu(n,e,t,r,i,a,l="emptyOnly"){return new Lx(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,wt.U)(({state:f,tree:g})=>({...l,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),bn(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const R=new Lh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(E&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:A,extractedUrl:R,source:G,restoredState:Q,extras:J}=g,Te=new ja(A,this.urlSerializer.serialize(R),G,Q);this.events.next(Te);const He=gv(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:He,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,lt.of)(a)}{const A="";return this.events.next(new Mo(g.id,this.urlSerializer.serialize(g.extractedUrl),A,1)),g.resolve(null),Io.E}}),bn(g=>{const y=new FE(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}),(0,wt.U)(g=>(this.currentTransition=a={...g,guards:Pu(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function nl(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,lt.of)({...t,guardsResult:!0}):function ZE(n,e,t,r){return(0,fn.D)(n).pipe((0,si.z)(i=>function YE(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,lt.of)(!0);const l=a.map(f=>{const g=ra(e)??i,y=Xc(f,g);return Do(function Ug(n){return n&&Wh(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(nr())});return(0,lt.of)(l).pipe(tl())}(i.component,i.route,t,e,r)),nr(i=>!0!==i,!0))}(l,r,i,n).pipe((0,si.z)(f=>f&&function Ax(n){return"boolean"==typeof n}(f)?function KE(n,e,t,r){return(0,fn.D)(e).pipe(Eo(i=>Zo(function $3(n,e){return null!==n&&e&&e(new fx(n)),(0,lt.of)(!0)}(i.route.parent,r),function Ox(n,e){return null!==n&&e&&e(new hv(n)),(0,lt.of)(!0)}(i.route,r),function Nx(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Fg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xh(()=>{const f=l.guards.map(g=>{const y=ra(l.node)??t,E=Xc(g,y);return Do(function GE(n){return n&&Wh(n.canActivateChild)}(E)?E.canActivateChild(r,n):y.runInContext(()=>E(r,n))).pipe(nr())});return(0,lt.of)(f).pipe(tl())}));return(0,lt.of)(a).pipe(tl())}(n,i.path,t),function Vg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,lt.of)(!0);const i=r.map(a=>xh(()=>{const l=ra(e)??t,f=Xc(a,l);return Do(function xx(n){return n&&Wh(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(nr())}));return(0,lt.of)(i).pipe(tl())}(n,i.route,t))),nr(i=>!0!==i,!0))}(r,a,n,e):(0,lt.of)(f)),(0,wt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),bn(g=>{if(a.guardsResult=g.guardsResult,ea(g.guardsResult))throw vv(0,g.guardsResult);const y=new hx(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(y)}),Cr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),Pv(g=>{if(g.guards.canActivateChecks.length)return(0,lt.of)(g).pipe(bn(y=>{const E=new LE(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}),(0,Bn.w)(y=>{let E=!1;return(0,lt.of)(y).pipe(function xv(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,lt.of)(t);let a=0;return(0,fn.D)(i).pipe(Eo(l=>function rb(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ab(i)&&(a[bo]=i.title),function ib(n,e,t,r){const i=function sb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,lt.of)({});const a={};return(0,fn.D)(i).pipe((0,si.z)(l=>function ob(n,e,t,r){const i=ra(e)??r,a=Xc(n,i);return Do(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(nr(),bn(f=>{a[l]=f}))),ka(1),function Oh(n){return(0,wt.U)(()=>n)}(a),ms(l=>qE(l)?Io.E:Ko(l)))}(a,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=mv(n,t).resolve,i&&ab(i)&&(n.data[bo]=i.title),null)))}(l.route,r,n,e)),bn(()=>a++),ka(1),(0,si.z)(l=>a===i.length?(0,lt.of)(t):Io.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),bn({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(y,"",2)}}))}),bn(y=>{const E=new k3(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}))}),Pv(g=>{const y=E=>{const T=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(E.routeConfig).pipe(bn(A=>{E.component=A}),(0,wt.U)(()=>{})));for(const A of E.children)T.push(...y(A));return T};return Oa(y(g.targetSnapshot.root)).pipe(zc(),on(1))}),Pv(()=>this.afterPreactivation()),(0,wt.U)(g=>{const y=function $E(n,e,t){const r=jh(n,e._root,t?t._root:void 0);return new pv(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:y},a}),bn(()=>{this.events.next(new Uh)}),((n,e,t,r)=>(0,wt.U)(i=>(new zE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),on(1),bn({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ks(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),function _u(n){return(0,ii.e)((e,t)=>{(0,pu.Xf)(n).subscribe((0,ri.x)(t,()=>t.complete(),Nh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(bn(g=>{throw g}))),Fa(()=>{l||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),ms(g=>{if(f=!0,xu(g))this.events.next(new Kc(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function oi(n){return xu(n)&&ea(n.url)}(g)?this.events.next(new VE(g.url)):a.resolve(!1);else{this.events.next(new Su(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(y){a.reject(y)}}return Io.E}))}))}cancelNavigationTransition(t,r,i){const a=new Kc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bx(n){return n!==Zc}let jx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[bo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(z3)},providedIn:"root"})}return n})(),z3=(()=>{class n extends jx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(ye))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(cb)},providedIn:"root"})}return n})();class W3{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let cb=(()=>{class n extends W3{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zg=new u.OlP("",{providedIn:"root",factory:()=>({})});let $x=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Hx)},providedIn:"root"})}return n})(),Hx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Jh||{});function Gg(n,e){n.events.pipe(Cr(t=>t instanceof Ks||t instanceof Kc||t instanceof Su||t instanceof Mo),(0,wt.U)(t=>t instanceof Ks||t instanceof Mo?Jh.COMPLETE:t instanceof Kc&&(0===t.code||1===t.code)?Jh.REDIRECTING:Jh.FAILED),Cr(t=>t!==Jh.REDIRECTING),on(1)).subscribe(()=>{e()})}function ia(n){throw n}function Xh(n,e,t){return e.parse("/")}const lb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ub={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new vi.x,this.options=(0,u.f3M)(zg,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||ia,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Xh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)($x),this.routeReuseStrategy=(0,u.f3M)(G3),this.titleStrategy=(0,u.f3M)(jx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(Ru,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(Hg),this.urlSerializer=(0,u.f3M)(wu),this.location=(0,u.f3M)(Ae),this.componentInputBindingEnabled=!!(0,u.f3M)(Rg,{optional:!0}),this.eventsSubscription=new Hc.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new So,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gv(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(zx(r)&&this._events.next(r));if(r instanceof ja)Bx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Mo)this.rawUrlTree=i.rawUrl;else if(r instanceof Lh){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Uh)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Kc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof VE){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bx(i.source)};this.scheduleNavigation(a,Zc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Su&&this.restoreHistory(i,!0),r instanceof Ks&&(this.navigated=!0),zx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Zc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:l;let T,E=null;switch(f){case"merge":E={...this.currentUrlTree.queryParams,...a};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=a||null}null!==E&&(E=this.removeEmptyProps(E));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,E,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ea(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Zc,null,r)}navigate(t,r={skipLocationChange:!1}){return function q3(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...lb}:!1===r?{...ub}:r,ea(t))return Tg(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Tg(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,g,y;l?(f=l.resolve,g=l.reject,y=l.promise):y=new Promise((T,A)=>{f=T,g=A});const E=this.pendingTasks.add();return Gg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:f,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zx(n){return!(n instanceof Uh||n instanceof VE)}let Wg=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new vi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Ks&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ir),u.Y36(Qc),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Oe))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&u.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})(),ef=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Ks&&this.update()})}ngAfterContentInit(){(0,lt.of)(this.links.changes,(0,lt.of)(null)).pipe((0,jc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,fn.D)(t).pipe((0,jc.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Nv(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ir),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Wg,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&u.Suo(a,Wg,5),2&r){let l;u.iGM(l=u.CRH())&&(i.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]})}return n})();class Gx{}let qx=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof Ks),Eo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,u.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,fn.D)(i).pipe((0,jc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,lt.of)(null);const a=i.pipe((0,si.z)(l=>null===l?(0,lt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([a,l]).pipe((0,jc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(ir),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Gx),u.LFG(Ov))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Rv=new u.OlP("");let db=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ja?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ks?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Mo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function ys(n,e){return{\u0275kind:n,\u0275providers:e}}function fb(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(ir),i=n.get(pb);1===n.get(nf)&&r.initialNavigation(),n.get(mb,null,u.XFs.Optional)?.setUpPreloading(),n.get(Rv,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const pb=new u.OlP("",{factory:()=>new vi.x}),nf=new u.OlP("",{providedIn:"root",factory:()=>1}),mb=new u.OlP("");function Yx(n){return ys(0,[{provide:mb,useExisting:qx},{provide:Gx,useExisting:n}])}const Fu=new u.OlP("ROUTER_FORROOT_GUARD"),_b=[Ae,{provide:wu,useClass:Sg},ir,Pg,{provide:Qc,useFactory:function kv(n){return n.routerState.root},deps:[ir]},Ov,[]];function yb(){return new u.PXZ("Router",ir)}let qg=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_b,[],{provide:Ru,multi:!0,useValue:t},{provide:Fu,useFactory:Cb,deps:[[ir,new u.FiY,new u.tp0]]},{provide:zg,useValue:r||{}},r?.useHash?{provide:Oe,useClass:ve}:{provide:Oe,useClass:Je},{provide:Rv,useFactory:()=>{const n=(0,u.f3M)(Br),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(zg),r=(0,u.f3M)(Hg),i=(0,u.f3M)(wu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new db(i,r,n,e,t)}},r?.preloadingStrategy?Yx(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:yb},r?.initialNavigation?Zg(r):[],r?.bindToComponentInputs?ys(8,[jE,{provide:Rg,useExisting:jE}]).\u0275providers:[],[{provide:Xx,useFactory:fb},{provide:u.tb,multi:!0,useExisting:Xx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ru,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Fu,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function Cb(n){return"guarded"}function Zg(n){return["disabled"===n.initialNavigation?ys(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(ir);return()=>{e.setUpLocationChangeListener()}}},{provide:nf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ys(2,[{provide:nf,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ir),a=e.get(pb);Gg(i,()=>{r(!0)}),e.get(Hg).afterPreactivation=()=>(r(!0),a.closed?(0,lt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Xx=new u.OlP("");var V=F(5861),Kg=F(305);function il(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new Kg.Hp({next:l=>{r(l),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Gs)}});n.subscribe(a)})}const sf=function Po(n,e){return n===e||n!=n&&e!=e},Qg=function Vv(n,e){for(var t=n.length;t--;)if(sf(n[t][0],e))return t;return-1};var Ib=Array.prototype.splice;function Ha(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ha.prototype.clear=function Uv(){this.__data__=[],this.size=0},Ha.prototype.delete=function Uu(n){var e=this.__data__,t=Qg(e,n);return!(t<0||(t==e.length-1?e.pop():Ib.call(e,t,1),--this.size,0))},Ha.prototype.get=function iP(n){var e=this.__data__,t=Qg(e,n);return t<0?void 0:e[t][1]},Ha.prototype.has=function Bv(n){return Qg(this.__data__,n)>-1},Ha.prototype.set=function oP(n,e){var t=this.__data__,r=Qg(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const jv=Ha,sl="object"==typeof global&&global&&global.Object===Object&&global;var zv="object"==typeof self&&self&&self.Object===Object&&self;const Ui=sl||zv||Function("return this")(),Ys=Ui.Symbol;var em=Object.prototype,Wv=em.hasOwnProperty,tm=em.toString,nm=Ys?Ys.toStringTag:void 0;var Tb=Object.prototype.toString;var Sb=Ys?Ys.toStringTag:void 0;const rm=function fP(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Sb&&Sb in Object(n)?function qv(n){var e=Wv.call(n,nm),t=n[nm];try{n[nm]=void 0;var r=!0}catch{}var i=tm.call(n);return r&&(e?n[nm]=t:delete n[nm]),i}(n):function dP(n){return Tb.call(n)}(n)},za=function pP(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Mb=function im(n){if(!za(n))return!1;var e=rm(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,xb=Ui["__core-js_shared__"],Jv=(n=/[^.]+$/.exec(xb&&xb.keys&&xb.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var _P=Function.prototype.toString;const Qs=function Vu(n){if(null!=n){try{return _P.call(n)}catch{}try{return n+""}catch{}}return""};var Pb=/^\[object .+?Constructor\]$/,Nb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const rU=function Xv(n){return!(!za(n)||function nU(n){return!!Jv&&Jv in n}(n))&&(Mb(n)?Nb:Pb).test(Qs(n))},ol=function IP(n,e){var t=function e0(n,e){return n?.[e]}(n,e);return rU(t)?t:void 0},cf=ol(Ui,"Map"),lf=ol(Object,"create");var sU=Object.prototype.hasOwnProperty;var bP=Object.prototype.hasOwnProperty;function Bu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Bu.prototype.clear=function EP(){this.__data__=lf?lf(null):{},this.size=0},Bu.prototype.delete=function Lb(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Bu.prototype.get=function t0(n){var e=this.__data__;if(lf){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return sU.call(e,n)?e[n]:void 0},Bu.prototype.has=function oU(n){var e=this.__data__;return lf?void 0!==e[n]:bP.call(e,n)},Bu.prototype.set=function Oo(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=lf&&void 0===e?"__lodash_hash_undefined__":e,this};const DP=Bu,ju=function MP(n,e){var t=n.__data__;return function s0(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function al(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}al.prototype.clear=function Pr(){this.size=0,this.__data__={hash:new DP,map:new(cf||jv),string:new DP}},al.prototype.delete=function jb(n){var e=ju(this,n).delete(n);return this.size-=e?1:0,e},al.prototype.get=function xP(n){return ju(this,n).get(n)},al.prototype.has=function zb(n){return ju(this,n).has(n)},al.prototype.set=function OP(n,e){var t=ju(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const $u=al;function zu(n){var e=this.__data__=new jv(n);this.size=e.size}zu.prototype.clear=function X3(){this.__data__=new jv,this.size=0},zu.prototype.delete=function cP(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},zu.prototype.get=function tU(n){return this.__data__.get(n)},zu.prototype.has=function lP(n){return this.__data__.has(n)},zu.prototype.set=function Hu(n,e){var t=this.__data__;if(t instanceof jv){var r=t.__data__;if(!cf||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new $u(r)}return t.set(n,e),this.size=t.size,this};const Gb=zu;var uf=function(){try{var n=ol(Object,"defineProperty");return n({},"",{}),n}catch{}}();const df=uf,a0=function qb(n,e,t){"__proto__"==e&&df?df(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var FP=Object.prototype.hasOwnProperty;const Zb=function LP(n,e,t){var r=n[e];(!FP.call(n,e)||!sf(r,t)||void 0===t&&!(e in n))&&a0(n,e,t)},c0=function Kb(n,e,t,r){var i=!t;t||(t={});for(var a=-1,l=e.length;++a<l;){var f=e[a],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?a0(t,f,g):Zb(t,f,g)}return t},Gu=function cU(n){return null!=n&&"object"==typeof n},hf=function lU(n){return Gu(n)&&"[object Arguments]"==rm(n)};var VP=Object.prototype,Qb=VP.hasOwnProperty,Jb=VP.propertyIsEnumerable,BP=hf(function(){return arguments}())?hf:function(n){return Gu(n)&&Qb.call(n,"callee")&&!Jb.call(n,"callee")};const Xb=BP,It=Array.isArray;var cl="object"==typeof exports&&exports&&!exports.nodeType&&exports,l0=cl&&"object"==typeof module&&module&&!module.nodeType&&module,ff=l0&&l0.exports===cl?Ui.Buffer:void 0;const qu=(ff?ff.isBuffer:void 0)||function tT(){return!1};var d0=/^(?:0|[1-9]\d*)$/;const f0=function h0(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&d0.test(n))&&n>-1&&n%1==0&&n<e},sT=function p0(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var Tn={};Tn["[object Float32Array]"]=Tn["[object Float64Array]"]=Tn["[object Int8Array]"]=Tn["[object Int16Array]"]=Tn["[object Int32Array]"]=Tn["[object Uint8Array]"]=Tn["[object Uint8ClampedArray]"]=Tn["[object Uint16Array]"]=Tn["[object Uint32Array]"]=!0,Tn["[object Arguments]"]=Tn["[object Array]"]=Tn["[object ArrayBuffer]"]=Tn["[object Boolean]"]=Tn["[object DataView]"]=Tn["[object Date]"]=Tn["[object Error]"]=Tn["[object Function]"]=Tn["[object Map]"]=Tn["[object Number]"]=Tn["[object Object]"]=Tn["[object RegExp]"]=Tn["[object Set]"]=Tn["[object String]"]=Tn["[object WeakMap]"]=!1;const _0=function sO(n){return function(e){return n(e)}};var Xs="object"==typeof exports&&exports&&!exports.nodeType&&exports,ll=Xs&&"object"==typeof module&&module&&!module.nodeType&&module,om=ll&&ll.exports===Xs&&sl.process;const ul=function(){try{return ll&&ll.require&&ll.require("util").types||om&&om.binding&&om.binding("util")}catch{}}();var y0=ul&&ul.isTypedArray;const v0=y0?_0(y0):function rO(n){return Gu(n)&&sT(n.length)&&!!Tn[rm(n)]};var dT=Object.prototype.hasOwnProperty;const C0=function hT(n,e){var t=It(n),r=!t&&Xb(n),i=!t&&!r&&qu(n),a=!t&&!r&&!i&&v0(n),l=t||r||i||a,f=l?function UP(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var y in n)(e||dT.call(n,y))&&(!l||!("length"==y||i&&("offset"==y||"parent"==y)||a&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||f0(y,g)))&&f.push(y);return f};var fT=Object.prototype;const eo=function w0(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||fT)},pT=function cO(n,e){return function(t){return n(e(t))}},lO=pT(Object.keys,Object);var uO=Object.prototype.hasOwnProperty;const gf=function mT(n){return null!=n&&sT(n.length)&&!Mb(n)},E0=function hU(n){return gf(n)?C0(n):function cm(n){if(!eo(n))return lO(n);var e=[];for(var t in Object(n))uO.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var CT=Object.prototype.hasOwnProperty;const fO=function mf(n){if(!za(n))return function dO(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=eo(n),t=[];for(var r in n)"constructor"==r&&(e||!CT.call(n,r))||t.push(r);return t},lm=function wT(n){return gf(n)?C0(n,!0):fO(n)};var Zu="object"==typeof exports&&exports&&!exports.nodeType&&exports,IT=Zu&&"object"==typeof module&&module&&!module.nodeType&&module,ET=IT&&IT.exports===Zu?Ui.Buffer:void 0,bT=ET?ET.allocUnsafe:void 0;const _f=function wO(){return[]};var EO=Object.prototype.propertyIsEnumerable,DT=Object.getOwnPropertySymbols,bO=DT?function(n){return null==n?[]:(n=Object(n),function TT(n,e){for(var t=-1,r=null==n?0:n.length,i=0,a=[];++t<r;){var l=n[t];e(l,t,n)&&(a[i++]=l)}return a}(DT(n),function(e){return EO.call(n,e)}))}:_f;const T0=bO,D0=function ST(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},AO=pT(Object.getPrototypeOf,Object);var MT=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)D0(e,T0(n)),n=AO(n);return e}:_f;const MO=MT,dm=function PO(n,e,t){var r=e(n);return It(n)?r:D0(r,t(n))},No=function OO(n){return dm(n,E0,T0)},ai=function yf(n){return dm(n,lm,MO)},Ku=ol(Ui,"DataView"),vf=ol(Ui,"Promise"),Wa=ol(Ui,"Set"),qa=ol(Ui,"WeakMap");var hl="[object Map]",fl="[object Promise]",pl="[object Set]",gl="[object WeakMap]",S0="[object DataView]",xT=Qs(Ku),PT=Qs(cf),OT=Qs(vf),NT=Qs(Wa),RT=Qs(qa),Za=rm;(Ku&&Za(new Ku(new ArrayBuffer(1)))!=S0||cf&&Za(new cf)!=hl||vf&&Za(vf.resolve())!=fl||Wa&&Za(new Wa)!=pl||qa&&Za(new qa)!=gl)&&(Za=function(n){var e=rm(n),t="[object Object]"==e?n.constructor:void 0,r=t?Qs(t):"";if(r)switch(r){case xT:return S0;case PT:return hl;case OT:return fl;case NT:return pl;case RT:return gl}return e});const hm=Za;var A0=Object.prototype.hasOwnProperty;const FT=Ui.Uint8Array,LT=function RO(n){var e=new n.constructor(n.byteLength);return new FT(e).set(new FT(n)),e};var FO=/\w*$/;var fm=Ys?Ys.prototype:void 0,Xu=fm?fm.valueOf:void 0;const HT=function $T(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return LT(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function kO(n,e){var t=e?LT(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function UT(n,e){var t=e?LT(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function LO(n){var e=new n.constructor(n.source,FO.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function M0(n){return Xu?Object(Xu.call(n)):{}}(n)}};var zT=Object.create,KO=function(){function n(){}return function(e){if(!za(e))return{};if(zT)return zT(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const YO=KO;var If=ul&&ul.isMap;const WT=If?_0(If):function QO(n){return Gu(n)&&"[object Map]"==hm(n)};var ym=ul&&ul.isSet;const qT=ym?_0(ym):function XO(n){return Gu(n)&&"[object Set]"==hm(n)};var F0="[object Arguments]",QT="[object Function]",V0="[object Object]",vn={};vn[F0]=vn["[object Array]"]=vn["[object ArrayBuffer]"]=vn["[object DataView]"]=vn["[object Boolean]"]=vn["[object Date]"]=vn["[object Float32Array]"]=vn["[object Float64Array]"]=vn["[object Int8Array]"]=vn["[object Int16Array]"]=vn["[object Int32Array]"]=vn["[object Map]"]=vn["[object Number]"]=vn[V0]=vn["[object RegExp]"]=vn["[object Set]"]=vn["[object String]"]=vn["[object Symbol]"]=vn["[object Uint8Array]"]=vn["[object Uint8ClampedArray]"]=vn["[object Uint16Array]"]=vn["[object Uint32Array]"]=!0,vn["[object Error]"]=vn[QT]=vn["[object WeakMap]"]=!1;const ml=function ed(n,e,t,r,i,a){var l,f=1&e,g=2&e,y=4&e;if(t&&(l=i?t(n,r,i,a):t(n)),void 0!==l)return l;if(!za(n))return n;var E=It(n);if(E){if(l=function NO(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&A0.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function vO(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var T=hm(n),A=T==QT||"[object GeneratorFunction]"==T;if(qu(n))return function _O(n,e){if(e)return n.slice();var t=n.length,r=bT?bT(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==V0||T==F0||A&&!i){if(l=g||A?{}:function GT(n){return"function"!=typeof n.constructor||eo(n)?{}:YO(AO(n))}(n),!f)return g?function um(n,e){return c0(n,MO(n),e)}(n,function pO(n,e){return n&&c0(e,lm(e),n)}(l,n)):function TO(n,e){return c0(n,T0(n),e)}(n,function _T(n,e){return n&&c0(e,E0(e),n)}(l,n))}else{if(!vn[T])return i?n:{};l=HT(n,T,f)}}a||(a=new Gb);var R=a.get(n);if(R)return R;a.set(n,l),qT(n)?n.forEach(function(J){l.add(ed(J,e,t,J,n,a))}):WT(n)&&n.forEach(function(J,Te){l.set(Te,ed(J,e,t,Te,n,a))});var Q=E?void 0:(y?g?ai:No:g?lm:E0)(n);return function Wb(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,Te){Q&&(J=n[Te=J]),Zb(l,Te,ed(J,e,t,Te,n,a))}),l},u1=function $0(n){return ml(n,5)};class _U extends Hc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const wm={setInterval(n,e,...t){const{delegate:r}=wm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=wm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var cN=F(9039);class H0 extends _U{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return wm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&wm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,cN.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const z0={now:()=>(z0.delegate||Date).now(),delegate:void 0};class $n{constructor(e,t=$n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}$n.now=z0.now;class G0 extends $n{constructor(e,t=$n.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const d1=new G0(H0);var Cn=F(7592);(0,Cn.registerVersion)("firebase","9.23.0","app");var wr=F(4537),Ir=F(7879),z=F(9058),uN=F(1878);class f1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function dN(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Im="@firebase/app",Ya=new Ir.Yd("@firebase/app"),bf="[DEFAULT]",IN={[Im]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_l=new Map,td=new Map;function bm(n,e){try{n.container.addComponent(e)}catch(t){Ya.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vi(n){const e=n.name;if(td.has(e))return Ya.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,n);for(const t of _l.values())bm(t,n);return!0}function nd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Fo=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class b1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}function D1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:bf,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Fo.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw Fo.create("no-options");const a=_l.get(i);if(a){if((0,z.vZ)(t,a.options)&&(0,z.vZ)(r,a.config))return a;throw Fo.create("duplicate-app",{appName:i})}const l=new wr.H0(i);for(const g of td.values())l.addComponent(g);const f=new b1(t,r,l);return _l.set(i,f),f}function S1(n=bf){const e=_l.get(n);if(!e&&n===bf&&(0,z.aH)())return D1();if(!e)throw Fo.create("no-app",{appName:n});return e}function wi(n,e,t){var r;let i=null!==(r=IN[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const f=[`Unable to register library "${i}" with version "${e}":`];return a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ya.warn(f.join(" "))}Vi(new wr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const TN="firebase-heartbeat-database",DN=1,Tf="firebase-heartbeat-store";let K0=null;function A1(){return K0||(K0=(0,uN.X3)(TN,DN,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Tf)}}).catch(n=>{throw Fo.create("idb-open",{originalErrorMessage:n.message})})),K0}function Y0(){return Y0=(0,V.Z)(function*(n){try{return yield(yield A1()).transaction(Tf).objectStore(Tf).get(J0(n))}catch(e){if(e instanceof z.ZR)Ya.warn(e.message);else{const t=Fo.create("idb-get",{originalErrorMessage:e?.message});Ya.warn(t.message)}}}),Y0.apply(this,arguments)}function M1(n,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,V.Z)(function*(n,e){try{const r=(yield A1()).transaction(Tf,"readwrite");yield r.objectStore(Tf).put(e,J0(n)),yield r.done}catch(t){if(t instanceof z.ZR)Ya.warn(t.message);else{const r=Fo.create("idb-set",{originalErrorMessage:t?.message});Ya.warn(r.message)}}}),Q0.apply(this,arguments)}function J0(n){return`${n.name}!${n.options.appId}`}class O1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new R1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,V.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=X0();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,V.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=X0(),{heartbeatsToSend:r,unsentEntries:i}=function N1(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),eC(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function X0(){return(new Date).toISOString().substring(0,10)}class R1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,V.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,V.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function SN(n){return Y0.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,V.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return M1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,V.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return M1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function eC(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function k1(n){Vi(new wr.wA("platform-logger",e=>new f1(e),"PRIVATE")),Vi(new wr.wA("heartbeat",e=>new O1(e),"PRIVATE")),wi(Im,"0.9.20",n),wi(Im,"0.9.20","esm2017"),wi("fire-js","")}("");const F1=(n,e)=>e.some(t=>n instanceof t);let tC,Qa;const yl=new WeakMap,L1=new WeakMap,Tm=new WeakMap,U1=new WeakMap,Dm=new WeakMap;let Ja={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return L1.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Tm.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ON(n){return"function"==typeof n?function PN(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function MN(){return Qa||(Qa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(nC(this),e),Xi(yl.get(this))}:function(...e){return Xi(n.apply(nC(this),e))}:function(e,...t){const r=n.call(nC(this),e,...t);return Tm.set(r,e.sort?e.sort():[e]),Xi(r)}}(n):(n instanceof IDBTransaction&&function EU(n){if(L1.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});L1.set(n,e)}(n),F1(n,function AN(){return tC||(tC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ja):n)}function Xi(n){if(n instanceof IDBRequest)return function V1(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Xi(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&yl.set(t,n)}).catch(()=>{}),Dm.set(e,n),e}(n);if(U1.has(n))return U1.get(n);const e=ON(n);return e!==n&&(U1.set(n,e),Dm.set(e,n)),e}const nC=n=>Dm.get(n),Bi=["get","getKey","getAll","getAllKeys","count"],bU=["put","add","delete","clear"],Am=new Map;function iC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Am.get(e))return Am.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=bU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bi.includes(t))return;const a=function(){var l=(0,V.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&y.done]))[0]});return function(g){return l.apply(this,arguments)}}();return Am.set(e,a),a}!function xN(n){Ja=n(Ja)}(n=>({...n,get:(e,t,r)=>iC(e,t)||n.get(e,t,r),has:(e,t)=>!!iC(e,t)||n.has(e,t)}));const B1="@firebase/installations",Mm="0.6.4",sC=1e4,oC=`w:${Mm}`,aC="FIS_v2",NN="https://firebaseinstallations.googleapis.com/v1",RN=36e5,oa=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function j1(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function rd({projectId:n}){return`${NN}/projects/${n}/installations`}function cC(n){return{token:n.token,requestStatus:2,expiresIn:LN(n.expiresIn),creationTime:Date.now()}}function xm(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,V.Z)(function*(n,e){const r=(yield e.json()).error;return oa.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),Pm.apply(this,arguments)}function $1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vl(n){return lC.apply(this,arguments)}function lC(){return lC=(0,V.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),lC.apply(this,arguments)}function LN(n){return Number(n.replace("s","000"))}function Om(){return Om=(0,V.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=rd(n),i=$1(n),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:aC,appId:n.appId,sdkVersion:oC})},g=yield vl(()=>fetch(r,f));if(g.ok){const y=yield g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:cC(y.authToken)}}throw yield xm("Create Installation",g)}),Om.apply(this,arguments)}function uC(n){return new Promise(e=>{setTimeout(e,n)})}const z1=/^[cdef][\w-]{21}$/,dC="";function BN(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function TU(n){return function VN(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return z1.test(t)?t:dC}catch{return dC}}function Sf(n){return`${n.appName}!${n.appId}`}const Af=new Map;function jN(n,e){const t=Sf(n);W1(t,e),function $N(n,e){const t=function sd(){return!Xa&&"BroadcastChannel"in self&&(Xa=new BroadcastChannel("[Firebase] FID Change"),Xa.onmessage=n=>{W1(n.data.key,n.data.fid)}),Xa}();t&&t.postMessage({key:n,fid:e}),function q1(){0===Af.size&&Xa&&(Xa.close(),Xa=null)}()}(t,e)}function W1(n,e){const t=Af.get(n);if(t)for(const r of t)r(e)}let Xa=null;const HN="firebase-installations-database",zN=1,Cl="firebase-installations-store";let Z1=null;function hC(){return Z1||(Z1=function Sm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=Xi(l);return r&&l.addEventListener("upgradeneeded",g=>{r(Xi(l.result),g.oldVersion,g.newVersion,Xi(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(HN,zN,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Cl)}})),Z1}function Mf(n,e){return fC.apply(this,arguments)}function fC(){return fC=(0,V.Z)(function*(n,e){const t=Sf(n),i=(yield hC()).transaction(Cl,"readwrite"),a=i.objectStore(Cl),l=yield a.get(t);return yield a.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&jN(n,e.fid),e}),fC.apply(this,arguments)}function pC(n){return wl.apply(this,arguments)}function wl(){return wl=(0,V.Z)(function*(n){const e=Sf(n),r=(yield hC()).transaction(Cl,"readwrite");yield r.objectStore(Cl).delete(e),yield r.done}),wl.apply(this,arguments)}function xf(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,V.Z)(function*(n,e){const t=Sf(n),i=(yield hC()).transaction(Cl,"readwrite"),a=i.objectStore(Cl),l=yield a.get(t),f=e(l);return void 0===f?yield a.delete(t):yield a.put(f,t),yield i.done,f&&(!l||l.fid!==f.fid)&&jN(n,f.fid),f}),Rm.apply(this,arguments)}function gC(n){return km.apply(this,arguments)}function km(){return km=(0,V.Z)(function*(n){let e;const t=yield xf(n.appConfig,r=>{const i=function GN(n){return Y1(n||{fid:BN(),registrationStatus:0})}(r),a=function K1(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(oa.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function WN(n,e){return Pf.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:qN(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===dC?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),km.apply(this,arguments)}function Pf(){return Pf=(0,V.Z)(function*(n,e){try{const t=yield function H1(n,e){return Om.apply(this,arguments)}(n,e);return Mf(n.appConfig,t)}catch(t){throw j1(t)&&409===t.customData.serverCode?yield pC(n.appConfig):yield Mf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Pf.apply(this,arguments)}function qN(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,V.Z)(function*(n){let e=yield mC(n.appConfig);for(;1===e.registrationStatus;)yield uC(100),e=yield mC(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield gC(n);return r||t}return e}),Fm.apply(this,arguments)}function mC(n){return xf(n,e=>{if(!e)throw oa.create("installation-not-found");return Y1(e)})}function Y1(n){return function ZN(n){return 1===n.registrationStatus&&n.registrationTime+sC<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Of(){return Of=(0,V.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function YN(n,{fid:e}){return`${rd(n)}/${e}/authTokens:generate`}(n,t),i=function id(n,{refreshToken:e}){const t=$1(n);return t.append("Authorization",function UN(n){return`${aC} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:oC,appId:n.appId}})},g=yield vl(()=>fetch(r,f));if(g.ok)return cC(yield g.json());throw yield xm("Generate Auth Token",g)}),Of.apply(this,arguments)}function Lm(n){return _C.apply(this,arguments)}function _C(){return _C=(0,V.Z)(function*(n,e=!1){let t;const r=yield xf(n.appConfig,a=>{if(!J1(a))throw oa.create("not-registered");const l=a.authToken;if(!e&&function XN(n){return 2===n.requestStatus&&!function X1(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+RN}(n)}(l))return a;if(1===l.requestStatus)return t=function QN(n,e){return yC.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw oa.create("app-offline");const f=function eD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function JN(n,e){return vC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),_C.apply(this,arguments)}function yC(){return yC=(0,V.Z)(function*(n,e){let t=yield Q1(n.appConfig);for(;1===t.authToken.requestStatus;)yield uC(100),t=yield Q1(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Lm(n,e):r}),yC.apply(this,arguments)}function Q1(n){return xf(n,e=>{if(!J1(e))throw oa.create("not-registered");return function eR(n){return 1===n.requestStatus&&n.requestTime+sC<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function vC(){return vC=(0,V.Z)(function*(n,e){try{const t=yield function KN(n,e){return Of.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Mf(n.appConfig,r),t}catch(t){if(!j1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Mf(n.appConfig,r)}else yield pC(n.appConfig);throw t}}),vC.apply(this,arguments)}function J1(n){return void 0!==n&&2===n.registrationStatus}function Um(){return Um=(0,V.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield gC(e);return r?r.catch(console.error):Lm(e).catch(console.error),t.fid}),Um.apply(this,arguments)}function CC(){return CC=(0,V.Z)(function*(n,e=!1){const t=n;return yield function rR(n){return wC.apply(this,arguments)}(t),(yield Lm(t,e)).token}),CC.apply(this,arguments)}function wC(){return wC=(0,V.Z)(function*(n){const{registrationPromise:e}=yield gC(n);e&&(yield e)}),wC.apply(this,arguments)}function Vm(n){return oa.create("missing-app-config-values",{valueName:n})}const ec="installations",sR=n=>{const e=n.getProvider("app").getImmediate(),t=function iR(n){if(!n||!n.options)throw Vm("App Configuration");if(!n.name)throw Vm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Vm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:nd(e,"heartbeat"),_delete:()=>Promise.resolve()}},SU=n=>{const t=nd(n.getProvider("app").getImmediate(),ec).getImmediate();return{getId:()=>function tR(n){return Um.apply(this,arguments)}(t),getToken:i=>function nR(n){return CC.apply(this,arguments)}(t,i)}};(function bC(){Vi(new wr.wA(ec,sR,"PUBLIC")),Vi(new wr.wA("installations-internal",SU,"PRIVATE"))})(),wi(B1,Mm),wi(B1,Mm,"esm2017");const Rf="@firebase/remote-config",Ii=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lR{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,V.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&l.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(l),a})()}}function uR(n=navigator){return n.languages&&n.languages[0]||n.language}class dR{constructor(e,t,r,i,a,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=l}fetch(e){var t=this;return(0,V.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:uR()},y={method:"POST",headers:f,body:JSON.stringify(g)},E=fetch(l,y),T=new Promise((Te,He)=>{e.signal.addEventListener(()=>{const Re=new Error("The operation was aborted.");Re.name="AbortError",He(Re)})});let A;try{yield Promise.race([E,T]),A=yield E}catch(Te){let He="fetch-client-network";throw"AbortError"===Te?.name&&(He="fetch-timeout"),Ii.create(He,{originalErrorMessage:Te?.message})}let R=A.status;const G=A.headers.get("ETag")||void 0;let Q,J;if(200===A.status){let Te;try{Te=yield A.json()}catch(He){throw Ii.create("fetch-client-parse",{originalErrorMessage:He?.message})}Q=Te.entries,J=Te.state}if("INSTANCE_STATE_UNSPECIFIED"===J?R=500:"NO_CHANGE"===J?R=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==R&&200!==R)throw Ii.create("fetch-status",{httpStatus:R});return{status:R,eTag:G,config:Q}})()}}class pR{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,V.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,V.Z)(function*(){yield function hR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function fR(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const l={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class kf{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ff(n,e){const t=n.target.error||void 0;return Ii.create(e,{originalErrorMessage:t&&t?.message})}const tc="app_namespace_store";class gD{constructor(e,t,r,i=function pD(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Ff(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(tc,{keyPath:"compositeKey"})}}catch(t){e(Ii.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,V.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([tc],"readonly").objectStore(tc),g=t.createCompositeKey(e);try{const y=f.get(g);y.onerror=E=>{a(Ff(E,"storage-get"))},y.onsuccess=E=>{const T=E.target.result;i(T?T.value:void 0)}}catch(y){a(Ii.create("storage-get",{originalErrorMessage:y?.message}))}})})()}set(e,t){var r=this;return(0,V.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,l)=>{const g=i.transaction([tc],"readwrite").objectStore(tc),y=r.createCompositeKey(e);try{const E=g.put({compositeKey:y,value:t});E.onerror=T=>{l(Ff(T,"storage-set"))},E.onsuccess=()=>{a()}}catch(E){l(Ii.create("storage-set",{originalErrorMessage:E?.message}))}})})()}delete(e){var t=this;return(0,V.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([tc],"readwrite").objectStore(tc),g=t.createCompositeKey(e);try{const y=f.delete(g);y.onerror=E=>{a(Ff(E,"storage-delete"))},y.onsuccess=()=>{i()}}catch(y){a(Ii.create("storage-delete",{originalErrorMessage:y?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class _R{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,V.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function yR(){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,V.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function NU(){Vi(new wr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ii.create("registration-window");if(!(0,z.hl)())throw Ii.create("indexed-db-unavailable");const{projectId:a,apiKey:l,appId:f}=r.options;if(!a)throw Ii.create("registration-project-id");if(!l)throw Ii.create("registration-api-key");if(!f)throw Ii.create("registration-app-id");const g=new gD(f,r.name,t=t||"firebase"),y=new _R(g),E=new Ir.Yd(Rf);E.logLevel=Ir.in.ERROR;const T=new dR(i,"10.5.0",t,a,l,f),A=new pR(T,g),R=new lR(A,g,y,E),G=new kf(r,R,y,g,E);return function uD(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(G),G},"PUBLIC").setMultipleInstances(!0)),wi(Rf,"0.4.4"),wi(Rf,"0.4.4","esm2017")}();const vR=(n,e)=>e.some(t=>n instanceof t);let mD,od;const _D=new WeakMap,yD=new WeakMap,vD=new WeakMap,CD=new WeakMap,Il=new WeakMap;let PC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return yD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||vD.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lo(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ER(n){return"function"==typeof n?function wD(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xC(){return od||(od=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ad(this),e),Lo(_D.get(this))}:function(...e){return Lo(n.apply(ad(this),e))}:function(e,...t){const r=n.call(ad(this),e,...t);return vD.set(r,e.sort?e.sort():[e]),Lo(r)}}(n):(n instanceof IDBTransaction&&function IR(n){if(yD.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});yD.set(n,e)}(n),vR(n,function CR(){return mD||(mD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,PC):n)}function Lo(n){if(n instanceof IDBRequest)return function wR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Lo(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&_D.set(t,n)}).catch(()=>{}),Il.set(e,n),e}(n);if(CD.has(n))return CD.get(n);const e=ER(n);return e!==n&&(CD.set(n,e),Il.set(e,n)),e}const ad=n=>Il.get(n);function ID(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=Lo(l);return r&&l.addEventListener("upgradeneeded",g=>{r(Lo(l.result),g.oldVersion,g.newVersion,Lo(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function OC(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Lo(t).then(()=>{})}const ED=["get","getKey","getAll","getAllKeys","count"],bR=["put","add","delete","clear"],NC=new Map;function RC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(NC.get(e))return NC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=bR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ED.includes(t))return;const a=function(){var l=(0,V.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&y.done]))[0]});return function(g){return l.apply(this,arguments)}}();return NC.set(e,a),a}!function zm(n){PC=n(PC)}(n=>({...n,get:(e,t,r)=>RC(e,t)||n.get(e,t,r),has:(e,t)=>!!RC(e,t)||n.has(e,t)}));const Gm="/firebase-messaging-sw.js",TR="/firebase-cloud-messaging-push-scope",bD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",TD="https://fcmregistrations.googleapis.com/v1",kC="google.c.a.c_id",FC="google.c.a.c_l",DD="google.c.a.ts";var Lf=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Lf||{});function aa(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function SR(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const Uf="fcm_token_details_db",LC=5,UC="fcm_token_object_Store";function Vf(){return Vf=(0,V.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(Uf))return null;let e=null;return(yield ID(Uf,LC,{upgrade:(r=(0,V.Z)(function*(i,a,l,f){var g;if(a<2||!i.objectStoreNames.contains(UC))return;const y=f.objectStore(UC),E=yield y.index("fcmSenderId").get(n);if(yield y.clear(),E)if(2===a){const T=E;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:aa(T.vapidKey)}}}else if(3===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:aa(T.auth),p256dh:aa(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:aa(T.vapidKey)}}}else if(4===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:aa(T.auth),p256dh:aa(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:aa(T.vapidKey)}}}}),function(a,l,f,g){return r.apply(this,arguments)})})).close(),yield OC(Uf),yield OC("fcm_vapid_details_db"),yield OC("undefined"),function AR(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Vf.apply(this,arguments)}const MR="firebase-messaging-database",xR=1,El="firebase-messaging-store";let Wm=null;function Bf(){return Wm||(Wm=ID(MR,xR,{upgrade:(n,e)=>{0===e&&n.createObjectStore(El)}})),Wm}function BC(n){return jC.apply(this,arguments)}function jC(){return jC=(0,V.Z)(function*(n){const e=Ym(n),r=yield(yield Bf()).transaction(El).objectStore(El).get(e);if(r)return r;{const i=yield function VC(n){return Vf.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield qm(n,i),i}}),jC.apply(this,arguments)}function qm(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,V.Z)(function*(n,e){const t=Ym(n),i=(yield Bf()).transaction(El,"readwrite");return yield i.objectStore(El).put(e,t),yield i.done,e}),Zm.apply(this,arguments)}function Km(){return Km=(0,V.Z)(function*(n){const e=Ym(n),r=(yield Bf()).transaction(El,"readwrite");yield r.objectStore(El).delete(e),yield r.done}),Km.apply(this,arguments)}function Ym({appConfig:n}){return n.appId}const Or=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function AD(n,e){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,V.Z)(function*(n,e){const t=yield Qm(n),r=NR(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(PD(n.appConfig),i)).json()}catch(l){throw Or.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error)throw Or.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw Or.create("token-subscribe-no-token");return a.token}),Zr.apply(this,arguments)}function $C(){return $C=(0,V.Z)(function*(n,e){const t=yield Qm(n),r=NR(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${PD(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw Or.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error)throw Or.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw Or.create("token-update-no-token");return a.token}),$C.apply(this,arguments)}function MD(n,e){return xD.apply(this,arguments)}function xD(){return xD=(0,V.Z)(function*(n,e){const r={method:"DELETE",headers:yield Qm(n)};try{const a=yield(yield fetch(`${PD(n.appConfig)}/${e}`,r)).json();if(a.error)throw Or.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw Or.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),xD.apply(this,arguments)}function PD({projectId:n}){return`${TD}/projects/${n}/registrations`}function Qm(n){return jf.apply(this,arguments)}function jf(){return jf=(0,V.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),jf.apply(this,arguments)}function NR({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==bD&&(i.web.applicationPubKey=r),i}const RU=6048e5;function bl(){return bl=(0,V.Z)(function*(n){const e=yield function kR(n,e){return Hf.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:aa(e.getKey("auth")),p256dh:aa(e.getKey("p256dh"))},r=yield BC(n.firebaseDependencies);if(r){if(function RD(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+RU?function RR(n,e){return Jm.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield MD(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return ND(n.firebaseDependencies,t)}return ND(n.firebaseDependencies,t)}),bl.apply(this,arguments)}function $f(){return $f=(0,V.Z)(function*(n){const e=yield BC(n.firebaseDependencies);e&&(yield MD(n.firebaseDependencies,e.token),yield function PR(n){return Km.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),$f.apply(this,arguments)}function Jm(){return Jm=(0,V.Z)(function*(n,e){try{const t=yield function cd(n,e){return $C.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield qm(n.firebaseDependencies,r),t}catch(t){throw yield function OD(n){return $f.apply(this,arguments)}(n),t}}),Jm.apply(this,arguments)}function ND(n,e){return HC.apply(this,arguments)}function HC(){return HC=(0,V.Z)(function*(n,e){const r={token:yield AD(n,e),createTime:Date.now(),subscriptionOptions:e};return yield qm(n,r),r.token}),HC.apply(this,arguments)}function Hf(){return Hf=(0,V.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:SR(e)})}),Hf.apply(this,arguments)}function kD(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Xm(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function zC(n,e){e.data&&(n.data=e.data)}(e,n),function FU(n,e){var t,r,i,a,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;f&&(n.fcmOptions.link=f);const g=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function LD(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function nc(n){return Or.create("missing-app-config-values",{valueName:n})}LD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),LD("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class FR{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function UD(n){if(!n||!n.options)throw nc("App Configuration Object");if(!n.name)throw nc("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw nc(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function zf(){return zf=(0,V.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Gm,{scope:TR}),n.swRegistration.update().catch(()=>{})}catch(e){throw Or.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),zf.apply(this,arguments)}function WC(){return WC=(0,V.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function GC(n){return zf.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");n.swRegistration=e}}),WC.apply(this,arguments)}function qC(){return qC=(0,V.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=bD)}),qC.apply(this,arguments)}function ZC(){return ZC=(0,V.Z)(function*(n,e){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield function UU(n,e){return qC.apply(this,arguments)}(n,e?.vapidKey),yield function LU(n,e){return WC.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function kU(n){return bl.apply(this,arguments)}(n)}),ZC.apply(this,arguments)}function e_(){return e_=(0,V.Z)(function*(n,e,t){const r=function LR(n){switch(n){case Lf.NOTIFICATION_CLICKED:return"notification_open";case Lf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[kC],message_name:t[FC],message_time:t[DD],message_device_time:Math.floor(Date.now()/1e3)})}),e_.apply(this,arguments)}function t_(){return t_=(0,V.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Lf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(kD(t)):n.onMessageHandler.next(kD(t)));const r=t.data;(function FD(n){return"object"==typeof n&&!!n&&kC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function BD(n,e,t){return e_.apply(this,arguments)}(n,t.messageType,r))}),t_.apply(this,arguments)}const $D="@firebase/messaging",zD=n=>{const e=new FR(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function jD(n,e){return t_.apply(this,arguments)}(e,t)),e},UR=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function VD(n,e){return ZC.apply(this,arguments)}(e,r)}};function KC(){return n_.apply(this,arguments)}function n_(){return(n_=(0,V.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function VU(n=S1()){return KC().then(e=>{if(!e)throw Or.create("unsupported-browser")},e=>{throw Or.create("indexed-db-unsupported")}),nd((0,z.m9)(n),"messaging").getImmediate()}!function GD(){Vi(new wr.wA("messaging",zD,"PUBLIC")),Vi(new wr.wA("messaging-internal",UR,"PRIVATE")),wi($D,"0.12.4"),wi($D,"0.12.4","esm2017")}();const QC="analytics",BU="firebase_id",jU="origin",$U=6e4,HU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ZD="https://www.googletagmanager.com/gtag/js",Er=new Ir.Yd("@firebase/analytics"),ci=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function jR(n){if(!n.startsWith(ZD)){const e=ci.create("invalid-gtag-resource",{gtagURL:n});return Er.warn(e.message),""}return n}function Gf(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function r_(){return r_=(0,V.Z)(function*(n,e,t,r,i,a){const l=r[i];try{if(l)yield e[l];else{const g=(yield Gf(t)).find(y=>y.measurementId===i);g&&(yield e[g.appId])}}catch(f){Er.error(f)}n("config",i,a)}),r_.apply(this,arguments)}function XC(){return XC=(0,V.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const f=yield Gf(t);for(const g of l){const y=f.find(T=>T.measurementId===g),E=y&&e[y.appId];if(!E){a=[];break}a.push(E)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){Er.error(a)}}),XC.apply(this,arguments)}const Wf=30,KD=new class qR{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ZR(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function ew(){return ew=(0,V.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:ZR(r)},a=HU.replace("{app-id}",t),l=yield fetch(a,i);if(200!==l.status&&304!==l.status){let f="";try{const g=yield l.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw ci.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()}),ew.apply(this,arguments)}function qf(){return qf=(0,V.Z)(function*(n,e=KD,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw ci.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw ci.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new XR;return setTimeout((0,V.Z)(function*(){f.abort()}),void 0!==t?t:$U),YD({appId:r,apiKey:i,measurementId:a},l,f,e)}),qf.apply(this,arguments)}function YD(n,e,t){return tw.apply(this,arguments)}function tw(){return tw=(0,V.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=KD){var a;const{appId:l,measurementId:f}=n;try{yield function QR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(ci.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return Er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:f};throw g}try{const g=yield function KR(n){return ew.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),g}catch(g){const y=g;if(!function JR(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y)){if(i.deleteThrottleMetadata(l),f)return Er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:l,measurementId:f};throw g}const E=503===Number(null===(a=y?.customData)||void 0===a?void 0:a.httpStatus)?(0,z.$s)(t,i.intervalMillis,Wf):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(l,T),Er.debug(`Calling attemptFetch again in ${E} millis`),YD(n,T,r,i)}}),tw.apply(this,arguments)}class XR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let nw,c_;function rw(){return rw=(0,V.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}}),rw.apply(this,arguments)}function Zf(){return Zf=(0,V.Z)(function*(){if(!(0,z.hl)())return Er.warn(ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return Er.warn(ci.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Zf.apply(this,arguments)}function l_(){return l_=(0,V.Z)(function*(n,e,t,r,i,a,l){var f;const g=function YR(n){return qf.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&Er.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Er.error(R)),e.push(g);const y=function rk(){return Zf.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[E,T]=yield Promise.all([g,y]);(function WR(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ZD)&&t.src.includes(n))return t;return null})(a)||function zU(n,e){const t=function $R(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:jR}),r=document.createElement("script"),i=`${ZD}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,E.measurementId),c_&&(i("consent","default",c_),function XD(n){c_=n}(void 0)),i("js",new Date);const A=null!==(f=l?.config)&&void 0!==f?f:{};return A[jU]="firebase",A.update=!0,null!=T&&(A[BU]=T),i("config",E.measurementId,A),nw&&(i("set",nw),function ow(n){nw=n}(void 0)),E.measurementId}),l_.apply(this,arguments)}class aw{constructor(e){this.app=e}_delete(){return delete Cs[this.app.options.appId],Promise.resolve()}}let Cs={},eS=[];const ik={};let nS,Uo,Kf="dataLayer",cw=!1;function rS(n,e,t){!function qU(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ci.create("invalid-analytics-context",{errorInfo:e});Er.warn(t.message)}}();const r=n.options.appId;if(!r)throw ci.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ci.create("no-api-key");Er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cs[r])throw ci.create("already-exists",{id:r});if(!cw){!function GU(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Kf);const{wrappedGtag:a,gtagCore:l}=function WU(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function GR(n,e,t,r){function a(){return a=(0,V.Z)(function*(l,...f){try{if("event"===l){const[g,y]=f;yield function zR(n,e,t,r,i){return XC.apply(this,arguments)}(n,e,t,g,y)}else if("config"===l){const[g,y]=f;yield function HR(n,e,t,r,i,a){return r_.apply(this,arguments)}(n,e,t,r,g,y)}else if("consent"===l){const[g]=f;n("consent","update",g)}else if("get"===l){const[g,y,E]=f;n("get",g,y,E)}else if("set"===l){const[g]=f;n("set",g)}else n(l,...f)}catch(g){Er.error(g)}}),a.apply(this,arguments)}return function i(l){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(Cs,eS,ik,Kf,"gtag");Uo=a,nS=l,cw=!0}return Cs[r]=function rc(n,e,t,r,i,a,l){return l_.apply(this,arguments)}(n,eS,ik,e,nS,Kf,t),new aw(n)}function KU(){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,V.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const oS="@firebase/analytics";!function YU(){Vi(new wr.wA(QC,(e,{options:t})=>rS(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Vi(new wr.wA("analytics-internal",function n(e){try{const t=e.getProvider(QC).getImmediate();return{logEvent:(r,i,a)=>function sS(n,e,t,r){n=(0,z.m9)(n),function ek(n,e,t,r,i){return rw.apply(this,arguments)}(Uo,Cs[n.app.options.appId],e,t,r).catch(i=>Er.error(i))}(t,r,i,a)}}catch(t){throw ci.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),wi(oS,"0.10.0"),wi(oS,"0.10.0","esm2017")}();const hk=new class dk extends G0{}(class cS extends H0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var u_=F(5137),Jf=F(3093);const ic=new u.GfV("7.6.1"),dw="__angularfire_symbol__analyticsIsSupportedValue",hw="__angularfire_symbol__analyticsIsSupported",fw="__angularfire_symbol__remoteConfigIsSupportedValue",lS="__angularfire_symbol__remoteConfigIsSupported",uS="__angularfire_symbol__messagingIsSupportedValue",dS="__angularfire_symbol__messagingIsSupported";globalThis[hw]||(globalThis[hw]=KU().then(n=>globalThis[dw]=n).catch(()=>globalThis[dw]=!1)),globalThis[dS]||(globalThis[dS]=KC().then(n=>globalThis[uS]=n).catch(()=>globalThis[uS]=!1)),globalThis[lS]||(globalThis[lS]=yR().then(n=>globalThis[fw]=n).catch(()=>globalThis[fw]=!1));const pw={async:()=>globalThis[dS],sync:()=>{const n=globalThis[uS];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function ld(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(l=>l.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ud=(n,e)=>{const t=e?[e]:(0,Cn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function Tl(){}class sc{constructor(e,t=hk){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class fS{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tl,{},Tl,Tl)),t.pipe(bn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vo=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sc(Zone.current)),this.insideAngular=t.run(()=>new sc(Zone.current,d1)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ca(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function la(n){return ca().ngZone.run(()=>n())}function ws(n){return ca(),function JU(n){return function(t){return(t=t.lift(new fS(n.ngZone))).pipe((0,u_.R)(n.outsideAngular),(0,Jf.Q)(n.insideAngular))}}(ca())(n)}const XU=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),la(()=>n.apply(void 0,r))},Dl=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=la(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tl,{},Tl,Tl)))),r[a]=XU(r[a],t));const i=function fk(n){return ca().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ni.y){const a=ca();return i.pipe((0,u_.R)(a.outsideAngular),(0,Jf.Q)(a.insideAngular))}return la(()=>i)}return i instanceof ni.y?i.pipe(ws):i instanceof Promise?la(()=>new Promise((a,l)=>i.then(f=>la(()=>a(f)),f=>la(()=>l(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:la(()=>i)};function _w(){return(0,ii.e)((n,e)=>{let t,r=!1;n.subscribe((0,ri.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var qe,pk=F(3997),ro=F(6304),gS=(F(8661),F(3399)),mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Is={},yw=yw||{},Et=mS||self;function dd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function d_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xf="closure_uid_"+(1e9*Math.random()>>>0),gk=0;function mk(n,e,t){return n.call.apply(n.bind,arguments)}function t5(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ei(n,e,t){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mk:t5).apply(null,arguments)}function h_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function oc(){this.s=this.s,this.o=this.o}oc.prototype.s=!1,oc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function _S(n){Object.prototype.hasOwnProperty.call(n,Xf)&&n[Xf]||(n[Xf]=++gk)}(this)},oc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function f_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function yS(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dd(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kr.prototype.h=function(){this.defaultPrevented=!0};var vS=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",()=>{},e),Et.removeEventListener("test",()=>{},e)}catch{}return n}();function p_(n){return/^[\s\xa0]*$/.test(n)}function g_(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function Es(n){return-1!=g_().indexOf(n)}function m_(n){return m_[" "](n),n}m_[" "]=function(){};var Iw,yk=Es("Opera"),ua=Es("Trident")||Es("MSIE"),wS=Es("Edge"),Cw=wS||ua,ww=Es("Gecko")&&!(-1!=g_().toLowerCase().indexOf("webkit")&&!Es("Edge"))&&!(Es("Trident")||Es("MSIE"))&&!Es("Edge"),IS=-1!=g_().toLowerCase().indexOf("webkit")&&!Es("Edge");function vk(){var n=Et.document;return n?n.documentMode:void 0}e:{var ES="",Ew=function(){var n=g_();return ww?/rv:([^\);]+)(\)|;)/.exec(n):wS?/Edge\/([\d\.]+)/.exec(n):ua?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IS?/WebKit\/(\S+)/.exec(n):yk?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Ew&&(ES=Ew?Ew[1]:""),ua){var bS=vk();if(null!=bS&&bS>parseFloat(ES)){Iw=String(bS);break e}}Iw=ES}var Ck=Et.document&&ua&&(vk()||parseInt(Iw,10))||void 0;function __(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ww){e:{try{m_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:n5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&__.$.h.call(this)}}Nr(__,Kr);var n5={2:"touch",3:"pen",4:"mouse"};__.prototype.h=function(){__.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var y_="closure_listenable_"+(1e6*Math.random()|0),r5=0;function i5(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++r5,this.fa=this.ia=!1}function v_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function SS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wk(n){const e={};for(const t in n)e[t]=n[t];return e}const Ik="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ek(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Ik.length;a++)t=Ik[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function C_(n){this.src=n,this.g={},this.h=0}function AS(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=vw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(v_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function s(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}C_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=s(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new i5(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var o="closure_lm_"+(1e6*Math.random()|0),c={};function d(n,e,t,r,i){if(r&&r.once)return v(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)d(n,e[a],t,r,i);return null}return t=Y(t),n&&n[y_]?n.O(e,t,d_(r)?!!r.capture:!!r,i):h(n,e,t,!1,r,i)}function h(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=d_(i)?!!i.capture:!!i,f=k(n);if(f||(n[o]=f=new C_(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function p(){const e=M;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(D(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function v(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)v(n,e[a],t,r,i);return null}return t=Y(t),n&&n[y_]?n.P(e,t,d_(r)?!!r.capture:!!r,i):h(n,e,t,!0,r,i)}function C(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)C(n,e[a],t,r,i);else r=d_(r)?!!r.capture:!!r,t=Y(t),n&&n[y_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=s(a=n.g[e],t,r,i))&&(v_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=k(n))&&(e=n.g[e.toString()],n=-1,e&&(n=s(e,t,r,i)),(t=-1<n?e[n]:null)&&b(t))}function b(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[y_])AS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(D(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=k(e))?(AS(t,n),0==t.h&&(t.src=null,e[o]=null)):v_(n)}}}function D(n){return n in c?c[n]:c[n]="on"+n}function M(n,e){if(n.fa)n=!0;else{e=new __(e,this);var t=n.listener,r=n.la||n.src;n.ia&&b(n),n=t.call(r,e)}return n}function k(n){return(n=n[o])instanceof C_?n:null}var q="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(n){return"function"==typeof n?n:(n[q]||(n[q]=function(e){return n.handleEvent(e)}),n[q])}function ae(){oc.call(this),this.i=new C_(this),this.S=this,this.J=null}function _e(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var i=e;Ek(e=new Kr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ze(l,r,!0,e)&&i}if(i=ze(l=e.g=n,r,!0,e)&&i,i=ze(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ze(l=e.g=t[a],r,!1,e)&&i}function ze(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,g=l.la||l.src;l.ia&&AS(n.i,l),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}Nr(ae,oc),ae.prototype[y_]=!0,ae.prototype.removeEventListener=function(n,e,t,r){C(this,n,e,t,r)},ae.prototype.N=function(){if(ae.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)v_(t[r]);delete n.g[e],n.h--}}this.J=null},ae.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ae.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rt=Et.JSON.stringify;function Ct(){var n=bw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cn=new class Ie{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new $i,n=>n.reset());class $i{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function da(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function hd(n){Et.setTimeout(()=>{throw n},0)}let Sl,ep=!1,bw=new class Ot{constructor(){this.h=this.g=null}add(e,t){const r=cn.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},o5=()=>{const n=Et.Promise.resolve(void 0);Sl=()=>{n.then(SH)}};var SH=()=>{for(var n;n=Ct();){try{n.h.call(n.g)}catch(t){hd(t)}var e=cn;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ep=!1};function MS(n,e){ae.call(this),this.h=n||1,this.g=e||Et,this.j=Ei(this.qb,this),this.l=Date.now()}function bk(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Tk(n,e,t){if("function"==typeof n)t&&(n=Ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function a5(n){n.g=Tk(()=>{n.g=null,n.i&&(n.i=!1,a5(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(MS,ae),(qe=MS.prototype).ga=!1,qe.T=null,qe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_e(this,"tick"),this.ga&&(bk(this),this.start()))}},qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.N=function(){MS.$.N.call(this),bk(this),delete this.g};class AH extends oc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:a5(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tw(n){oc.call(this),this.h=n,this.g={}}Nr(Tw,oc);var c5=[];function l5(n,e,t,r){Array.isArray(t)||(t&&(c5[0]=t.toString()),t=c5);for(var i=0;i<t.length;i++){var a=d(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function u5(n){SS(n.g,function(e,t){this.g.hasOwnProperty(t)&&b(e)},n),n.g={}}function xS(){this.g=!0}function w_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function OH(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return rt(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Tw.prototype.N=function(){Tw.$.N.call(this),u5(this)},Tw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xS.prototype.Ea=function(){this.g=!1},xS.prototype.info=function(){};var tp={},d5=null;function PS(){return d5=d5||new ae}function h5(n){Kr.call(this,tp.Ta,n)}function Dw(n){const e=PS();_e(e,new h5(e))}function f5(n,e){Kr.call(this,tp.STAT_EVENT,n),this.stat=e}function es(n){const e=PS();_e(e,new f5(e,n))}function p5(n,e){Kr.call(this,tp.Ua,n),this.size=e}function Sw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}tp.Ta="serverreachability",Nr(h5,Kr),tp.STAT_EVENT="statevent",Nr(f5,Kr),tp.Ua="timingevent",Nr(p5,Kr);var OS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},g5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dk(){}function _5(){}Dk.prototype.h=null;var Mk,Aw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sk(){Kr.call(this,"d")}function Ak(){Kr.call(this,"c")}function NS(){}function Mw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Tw(this),this.P=NH,this.V=new MS(n=Cw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new y5}function y5(){this.i=null,this.g="",this.h=!1}Nr(Sk,Kr),Nr(Ak,Kr),Nr(NS,Dk),NS.prototype.g=function(){return new XMLHttpRequest},NS.prototype.i=function(){return{}},Mk=new NS;var NH=45e3,xk={},RS={};function Pk(n,e,t){n.L=1,n.v=US(Al(e)),n.s=t,n.S=!0,v5(n,null)}function v5(n,e){n.G=Date.now(),xw(n),n.A=Al(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),M5(t.i,"t",r),n.C=0,t=n.l.J,n.h=new y5,n.g=X5(n.l,t?e:null,!n.s),0<n.O&&(n.M=new AH(Ei(n.Pa,n,n.g),n.O)),l5(n.U,n.g,"readystatechange",n.nb),e=n.I?wk(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Dw(),function MH(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),g=0;g<f.length;g++){var y=f[g].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");l=2<=T.length&&"type"==T[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function C5(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function w5(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=RH(n,t),i==RS){4==e&&(n.o=4,es(14),r=!1),w_(n.j,n.m,null,"[Incomplete Response]");break}if(i==xk){n.o=4,es(15),w_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}w_(n.j,n.m,i,null),Ok(n,i)}C5(n)&&i!=RS&&i!=xk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,es(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vk(e),e.M=!0,es(11))):(w_(n.j,n.m,t,"[Invalid Chunked Response]"),np(n),Pw(n))}function RH(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?RS:(t=Number(e.substring(t,r)),isNaN(t)?xk:(r+=1)+t>e.length?RS:(e=e.slice(r,r+t),n.C=r+t,e))}function xw(n){n.Y=Date.now()+n.P,I5(n,n.P)}function I5(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sw(Ei(n.lb,n),e)}function kS(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function Pw(n){0==n.l.H||n.J||K5(n.l,n)}function np(n){kS(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,bk(n.V),u5(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ok(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Nk(t.i,n)))if(!n.K&&Nk(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;zS(t),$S(t)}Uk(t),es(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Sw(Ei(t.ib,t),6e3));if(1>=O5(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ip(t,11)}else if((n.K||t.g==n)&&zS(t),!p_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const E=y[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const T=y[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(t.L=r=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const G=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.i;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Rk(a,a.h),a.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Hn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=J5(r,r.J?r.pa:null,r.Y),l.K){N5(r.i,l);var f=l,g=r.L;g&&f.setTimeout(g),f.B&&(kS(f),xw(f)),r.g=l}else q5(r);0<t.j.length&&HS(t)}else"stop"!=y[0]&&"close"!=y[0]||ip(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ip(t,7):Lk(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Dw()}catch{}}function E5(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function FH(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function kH(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(qe=Mw.prototype).setTimeout=function(n){this.P=n},qe.nb=function(n){n=n.target;const e=this.M;e&&3==ac(n)?e.l():this.Pa(n)},qe.Pa=function(n){try{if(n==this.g)e:{const E=ac(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||Cw||this.g&&(this.h.h||this.g.ja()||j5(this.g)))){this.J||4!=E||7==e||Dw(),kS(this);var t=this.g.da();this.ca=t;t:if(C5(this)){var r=j5(this.g);n="";var i=r.length,a=4==ac(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){np(this),Pw(this);var l="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function xH(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p_(f)){var y=f;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,es(12),np(this),Pw(this);break e}w_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ok(this,t)}this.S?(w5(this,E,l),Cw&&this.i&&3==E&&(l5(this.U,this.V,"tick",this.mb),this.V.start())):(w_(this.j,this.m,l,null),Ok(this,l)),4==E&&np(this),this.i&&!this.J&&(4==E?K5(this.l,this):(this.i=!1,xw(this)))}else(function ez(n){const e={};n=(n.g&&2<=ac(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(p_(n[r]))continue;var t=da(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function s5(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,es(12)):(this.o=0,es(13)),np(this),Pw(this)}}}catch{}},qe.mb=function(){if(this.g){var n=ac(this.g),e=this.g.ja();this.C<e.length&&(kS(this),w5(this,n,e),this.i&&4!=n&&xw(this))}},qe.cancel=function(){this.J=!0,np(this)},qe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function PH(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Dw(),es(17)),np(this),this.o=2,Pw(this)):I5(this,this.Y-n)};var b5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rp(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof rp){this.h=n.h,FS(this,n.j),this.s=n.s,this.g=n.g,LS(this,n.m),this.l=n.l;var e=n.i,t=new Rw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),T5(this,t),this.o=n.o}else n&&(e=String(n).match(b5))?(this.h=!1,FS(this,e[1]||"",!0),this.s=Ow(e[2]||""),this.g=Ow(e[3]||"",!0),LS(this,e[4]),this.l=Ow(e[5]||"",!0),T5(this,e[6]||"",!0),this.o=Ow(e[7]||"")):(this.h=!1,this.i=new Rw(null,this.h))}function Al(n){return new rp(n)}function FS(n,e,t){n.j=t?Ow(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function LS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function T5(n,e,t){e instanceof Rw?(n.i=e,function HH(n,e){e&&!n.j&&(fd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(S5(this,r),M5(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Nw(e,jH)),n.i=new Rw(e,n.h))}function Hn(n,e,t){n.i.set(e,t)}function US(n){return Hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ow(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,UH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}rp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nw(e,D5,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nw(e,D5,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nw(t,"/"==t.charAt(0)?BH:VH,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nw(t,$H)),n.join("")};var D5=/[#\/\?@]/g,VH=/[#\?:]/g,BH=/[#\?]/g,jH=/[#\?@]/g,$H=/#/g;function Rw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fd(n){n.g||(n.g=new Map,n.h=0,n.i&&function LH(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function S5(n,e){fd(n),e=I_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function A5(n,e){return fd(n),e=I_(n,e),n.g.has(e)}function M5(n,e,t){S5(n,e),0<t.length&&(n.i=null,n.g.set(I_(n,e),f_(t)),n.h+=t.length)}function I_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function x5(n){this.l=n||GH,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=Rw.prototype).add=function(n,e){fd(this),this.i=null,n=I_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qe.forEach=function(n,e){fd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},qe.ta=function(){fd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},qe.Z=function(n){fd(this);let e=[];if("string"==typeof n)A5(this,n)&&(e=e.concat(this.g.get(I_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},qe.set=function(n,e){return fd(this),this.i=null,A5(this,n=I_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var GH=10;function P5(n){return!!n.h||!!n.g&&n.g.size>=n.j}function O5(n){return n.h?1:n.g?n.g.size:0}function Nk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rk(n,e){n.g?n.g.add(e):n.h=e}function N5(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function R5(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return f_(n.i)}x5.prototype.cancel=function(){if(this.i=R5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var WH=class{stringify(n){return Et.JSON.stringify(n,void 0)}parse(n){return Et.JSON.parse(n,void 0)}};function qH(){this.g=new WH}function ZH(n,e,t){const r=t||"";try{E5(n,function(i,a){let l=i;d_(i)&&(l=rt(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function VS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kw(n){this.l=n.fc||null,this.j=n.ob||!1}function BS(n,e){ae.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=kk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nr(kw,Dk),kw.prototype.g=function(){return new BS(this.l,this.j)},kw.prototype.i=function(n){return function(){return n}}({}),Nr(BS,ae);var kk=0;function k5(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Fw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Lw(n)}function Lw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qe=BS.prototype).open=function(n,e){if(this.readyState!=kk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Lw(this)},qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fw(this)),this.readyState=kk},qe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Lw(this)),this.g&&(this.readyState=3,Lw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;k5(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},qe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fw(this):Lw(this),3==this.readyState&&k5(this)}},qe.Za=function(n){this.g&&(this.response=this.responseText=n,Fw(this))},qe.Ya=function(n){this.g&&(this.response=n,Fw(this))},qe.ka=function(){this.g&&Fw(this)},qe.setRequestHeader=function(n,e){this.v.append(n,e)},qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(BS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var YH=Et.JSON.parse;function ur(n){ae.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=F5,this.L=this.M=!1}Nr(ur,ae);var F5="",QH=/^https?$/i,JH=["POST","PUT"];function L5(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,U5(n),jS(n)}function U5(n){n.F||(n.F=!0,_e(n,"complete"),_e(n,"error"))}function V5(n){if(n.h&&typeof yw<"u"&&(!n.C[1]||4!=ac(n)||2!=n.da()))if(n.v&&4==ac(n))Tk(n.La,0,n);else if(_e(n,"readystatechange"),4==ac(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(b5)[1]||null;!i&&Et.self&&Et.self.location&&(i=Et.self.location.protocol.slice(0,-1)),r=!QH.test(i?i.toLowerCase():"")}t=r}if(t)_e(n,"complete"),_e(n,"success");else{n.m=6;try{var a=2<ac(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",U5(n)}}finally{jS(n)}}}function jS(n,e){if(n.g){B5(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||_e(n,"ready");try{t.onreadystatechange=r}catch{}}}function B5(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function ac(n){return n.g?n.g.readyState:0}function j5(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case F5:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $5(n){let e="";return SS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Fk(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$5(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hn(n,e,t))}function Uw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function H5(n){this.Ga=0,this.j=[],this.l=new xS,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uw("baseRetryDelayMs",5e3,n),this.hb=Uw("retryDelaySeedMs",1e4,n),this.eb=Uw("forwardChannelMaxRetries",2,n),this.xa=Uw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new x5(n&&n.concurrentRequestLimit),this.Ja=new qH,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lk(n){if(z5(n),3==n.H){var e=n.W++,t=Al(n.I);if(Hn(t,"SID",n.K),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),Vw(n,t),(e=new Mw(n,n.l,e)).L=2,e.v=US(Al(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon)try{t=Et.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=X5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xw(e)}Q5(n)}function $S(n){n.g&&(Vk(n),n.g.cancel(),n.g=null)}function z5(n){$S(n),n.u&&(Et.clearTimeout(n.u),n.u=null),zS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function HS(n){if(!P5(n.i)&&!n.m){n.m=!0;var e=n.Na;Sl||o5(),ep||(Sl(),ep=!0),bw.add(e,n),n.C=0}}function G5(n,e){var t;t=e?e.m:n.W++;const r=Al(n.I);Hn(r,"SID",n.K),Hn(r,"RID",t),Hn(r,"AID",n.V),Vw(n,r),n.o&&n.s&&Fk(r,n.o,n.s),t=new Mw(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=W5(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Rk(n.i,t),Pk(t,r,e)}function Vw(n,e){n.na&&SS(n.na,function(t,r){Hn(e,r,t)}),n.h&&E5({},function(t,r){Hn(e,r,t)})}function W5(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ei(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let y=i[g].g;const E=i[g].map;if(y-=a,0>y)a=Math.max(0,i[g].g-100),f=!1;else try{ZH(E,l,"req"+y+"_")}catch{r&&r(E)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function q5(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Sl||o5(),ep||(Sl(),ep=!0),bw.add(e,n),n.A=0}}function Uk(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Sw(Ei(n.Ma,n),Y5(n,n.A)),n.A++,0))}function Vk(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function Z5(n){n.g=new Mw(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Al(n.wa);Hn(e,"RID","rpc"),Hn(e,"SID",n.K),Hn(e,"AID",n.V),Hn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Hn(e,"TO",n.qa),Hn(e,"TYPE","xmlhttp"),Vw(n,e),n.o&&n.s&&Fk(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=US(Al(e)),t.s=null,t.S=!0,v5(t,n)}function zS(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function K5(n,e){var t=null;if(n.g==e){zS(n),Vk(n),n.g=null;var r=2}else{if(!Nk(n.i,e))return;t=e.F,N5(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;_e(r=PS(),new p5(r,t)),HS(n)}else q5(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function tz(n,e){return!(O5(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Sw(Ei(n.Na,n,e),Y5(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ip(n,5);break;case 4:ip(n,10);break;case 3:ip(n,6);break;default:ip(n,2)}}function Y5(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ip(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ei(n.pb,n);t||(t=new rp("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||FS(t,"https"),US(t)),function KH(n,e){const t=new xS;if(Et.Image){const r=new Image;r.onload=h_(VS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=h_(VS,t,r,"TestLoadImage: error",!1,e),r.onabort=h_(VS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=h_(VS,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else es(2);n.H=0,n.h&&n.h.za(e),Q5(n),z5(n)}function Q5(n){if(n.H=0,n.ma=[],n.h){const e=R5(n.i);(0!=e.length||0!=n.j.length)&&(yS(n.ma,e),yS(n.ma,n.j),n.i.i.length=0,f_(n.j),n.j.length=0),n.h.ya()}}function J5(n,e,t){var r=t instanceof rp?Al(t):new rp(t);if(""!=r.g)e&&(r.g=e+"."+r.g),LS(r,r.m);else{var i=Et.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new rp(null);r&&FS(a,r),e&&(a.g=e),i&&LS(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Hn(r,t,e),Hn(r,"VER",n.ra),Vw(n,r),r}function X5(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ha&&!n.va?new kw({ob:!0}):n.va)).Oa(n.J),e}function e6(){}function GS(){if(ua&&!(10<=Number(Ck)))throw Error("Environmental error: no available transport.")}function io(n,e){ae.call(this),this.g=new H5(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!p_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new E_(this)}function t6(n){Sk.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function n6(){Ak.call(this),this.status=1}function E_(n){this.g=n}function ha(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bk(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function gn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(qe=ur.prototype).Oa=function(n){this.M=n},qe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Mk.g(),this.C=function m5(n){return n.h||(n.h=n.i())}(this.u?this.u:Mk),this.g.onreadystatechange=Ei(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void L5(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Et.FormData&&n instanceof Et.FormData,!(0<=vw(JH,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{B5(this),0<this.B&&((this.L=function XH(n){return ua&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.ua,this)):this.A=Tk(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){L5(this,a)}},qe.ua=function(){typeof yw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_e(this,"timeout"),this.abort(8))},qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_e(this,"complete"),_e(this,"abort"),jS(this))},qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jS(this,!0)),ur.$.N.call(this)},qe.La=function(){this.s||(this.G||this.v||this.l?V5(this):this.kb())},qe.kb=function(){V5(this)},qe.isActive=function(){return!!this.g},qe.da=function(){try{return 2<ac(this)?this.g.status:-1}catch{return-1}},qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},qe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),YH(e)}},qe.Ia=function(){return this.m},qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=H5.prototype).ra=8,qe.H=1,qe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Mw(this,this.l,n);let a=this.s;if(this.U&&(a?(a=wk(a),Ek(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=W5(this,i,e),Hn(t=Al(this.I),"RID",n),Hn(t,"CVER",22),this.F&&Hn(t,"X-HTTP-Session-Id",this.F),Vw(this,t),a&&(this.O?e="headers="+encodeURIComponent(String($5(a)))+"&"+e:this.o&&Fk(t,this.o,a)),Rk(this.i,i),this.bb&&Hn(t,"TYPE","init"),this.P?(Hn(t,"$req",e),Hn(t,"SID","null"),i.aa=!0,Pk(i,t,null)):Pk(i,t,e),this.H=2}}else 3==this.H&&(n?G5(this,n):0==this.j.length||P5(this.i)||G5(this))},qe.Ma=function(){if(this.u=null,Z5(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Sw(Ei(this.jb,this),n)}},qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,es(10),$S(this),Z5(this))},qe.ib=function(){null!=this.v&&(this.v=null,$S(this),Uk(this),es(19))},qe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),es(2)):(this.l.info("Failed to ping google.com"),es(1))},qe.isActive=function(){return!!this.h&&this.h.isActive(this)},(qe=e6.prototype).Ba=function(){},qe.Aa=function(){},qe.za=function(){},qe.ya=function(){},qe.isActive=function(){return!0},qe.Va=function(){},GS.prototype.g=function(n,e){return new io(n,e)},Nr(io,ae),io.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;es(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=J5(n,null,n.Y),HS(n)},io.prototype.close=function(){Lk(this.g)},io.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=rt(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&HS(e)},io.prototype.N=function(){this.g.h=null,delete this.j,Lk(this.g),delete this.g,io.$.N.call(this)},Nr(t6,Sk),Nr(n6,Ak),Nr(E_,e6),E_.prototype.Ba=function(){_e(this.g,"a")},E_.prototype.Aa=function(n){_e(this.g,new t6(n))},E_.prototype.za=function(n){_e(this.g,new n6)},E_.prototype.ya=function(){_e(this.g,"b")},Nr(ha,function nz(){this.blockSize=-1}),ha.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ha.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)Bk(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){Bk(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){Bk(this,r),i=0;break}}this.h=i,this.i+=e},ha.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var rz={};function jk(n){return-128<=n&&128>n?function CS(n,e){var t=rz;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new gn([0|e],0>e?-1:0)}):new gn([0|n],0>n?-1:0)}function cc(n){if(isNaN(n)||!isFinite(n))return b_;if(0>n)return bi(cc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=$k;return new gn(e,0)}var $k=4294967296,b_=jk(0),Hk=jk(1),i6=jk(16777216);function Ml(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Bo(n){return-1==n.h}function bi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new gn(t,~n.h).add(Hk)}function WS(n,e){return n.add(bi(e))}function qS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Bw(n,e){this.g=n,this.h=e}function ZS(n,e){if(Ml(e))throw Error("division by zero");if(Ml(n))return new Bw(b_,b_);if(Bo(n))return e=ZS(bi(n),e),new Bw(bi(e.g),bi(e.h));if(Bo(e))return e=ZS(n,bi(e)),new Bw(bi(e.g),e.h);if(30<n.g.length){if(Bo(n)||Bo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Hk,r=e;0>=r.X(n);)t=s6(t),r=s6(r);var i=T_(t,1),a=T_(r,1);for(r=T_(r,2),t=T_(t,2);!Ml(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=T_(r,1),t=T_(t,1)}return e=WS(n,i.R(e)),new Bw(i,e)}for(i=b_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=cc(t)).R(e);Bo(l)||0<l.X(n);)l=(a=cc(t-=r)).R(e);Ml(a)&&(a=Hk),i=i.add(a),n=WS(n,l)}return new Bw(i,n)}function s6(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new gn(t,n.h)}function T_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new gn(i,n.h)}(qe=gn.prototype).ea=function(){if(Bo(this))return-bi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:$k+r)*e,e*=$k}return n},qe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ml(this))return"0";if(Bo(this))return"-"+bi(this).toString(n);for(var e=cc(Math.pow(n,6)),t=this,r="";;){var i=ZS(t,e).g,a=((0<(t=WS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ml(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},qe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},qe.X=function(n){return Bo(n=WS(this,n))?-1:Ml(n)?0:1},qe.abs=function(){return Bo(this)?bi(this):this},qe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new gn(t,-2147483648&t[t.length-1]?-1:0)},qe.R=function(n){if(Ml(this)||Ml(n))return b_;if(Bo(this))return Bo(n)?bi(this).R(bi(n)):bi(bi(this).R(n));if(Bo(n))return bi(this.R(bi(n)));if(0>this.X(i6)&&0>n.X(i6))return cc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=l*g,qS(t,2*r+2*i),t[2*r+2*i+1]+=a*g,qS(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,qS(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,qS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new gn(t,0)},qe.gb=function(n){return ZS(this,n).h},qe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new gn(t,this.h&n.h)},qe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new gn(t,this.h|n.h)},qe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new gn(t,this.h^n.h)},GS.prototype.createWebChannel=GS.prototype.g,io.prototype.send=io.prototype.u,io.prototype.open=io.prototype.m,io.prototype.close=io.prototype.close,OS.NO_ERROR=0,OS.TIMEOUT=8,OS.HTTP_ERROR=6,g5.COMPLETE="complete",_5.EventType=Aw,Aw.OPEN="a",Aw.CLOSE="b",Aw.ERROR="c",Aw.MESSAGE="d",ae.prototype.listen=ae.prototype.O,ur.prototype.listenOnce=ur.prototype.P,ur.prototype.getLastError=ur.prototype.Sa,ur.prototype.getLastErrorCode=ur.prototype.Ia,ur.prototype.getStatus=ur.prototype.da,ur.prototype.getResponseJson=ur.prototype.Wa,ur.prototype.getResponseText=ur.prototype.ja,ur.prototype.send=ur.prototype.ha,ur.prototype.setWithCredentials=ur.prototype.Oa,ha.prototype.digest=ha.prototype.l,ha.prototype.reset=ha.prototype.reset,ha.prototype.update=ha.prototype.j,gn.prototype.add=gn.prototype.add,gn.prototype.multiply=gn.prototype.R,gn.prototype.modulo=gn.prototype.gb,gn.prototype.compare=gn.prototype.X,gn.prototype.toNumber=gn.prototype.ea,gn.prototype.toString=gn.prototype.toString,gn.prototype.getBits=gn.prototype.D,gn.fromNumber=cc,gn.fromString=function r6(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return bi(r6(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=cc(Math.pow(e,8)),r=b_,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=cc(Math.pow(e,a)),r=r.R(a).add(cc(l))):r=(r=r.R(t)).add(cc(l))}return r};var iz=Is.createWebChannelTransport=function(){return new GS},sz=Is.getStatEventTarget=function(){return PS()},zk=Is.ErrorCode=OS,oz=Is.EventType=g5,az=Is.Event=tp,o6=Is.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cz=Is.FetchXmlHttpFactory=kw,KS=Is.WebChannel=_5,lz=Is.XhrIo=ur,uz=Is.Md5=ha,D_=Is.Integer=gn;const a6="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let S_="9.23.0";const pd=new Ir.Yd("@firebase/firestore");function Gk(){return pd.logLevel}function xe(n,...e){if(pd.logLevel<=Ir.in.DEBUG){const t=e.map(Wk);pd.debug(`Firestore (${S_}): ${n}`,...t)}}function br(n,...e){if(pd.logLevel<=Ir.in.ERROR){const t=e.map(Wk);pd.error(`Firestore (${S_}): ${n}`,...t)}}function jo(n,...e){if(pd.logLevel<=Ir.in.WARN){const t=e.map(Wk);pd.warn(`Firestore (${S_}): ${n}`,...t)}}function Wk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${S_}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function ct(n,e){n||et()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class c6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class pz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gz{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const y=l;e.enqueueRetryable((0,V.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new c6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new li(e)}}class mz{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=li.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _z{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yz{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new l6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class u6{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=vz(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function A_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function d6(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Yn(0,0))}static max(){return new ut(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jw{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends jw{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Cz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends jw{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return Cz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ee(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ee(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ee(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ee(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Qt.fromString(e))}static fromName(e){return new We(Qt.fromString(e).popFirst(5))}static empty(){return new We(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Qt(e.slice()))}}class YS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function qk(n){return n.fields.find(e=>2===e.kind)}function sp(n){return n.fields.filter(e=>2!==e.kind)}YS.UNKNOWN_ID=-1;class QS{constructor(e,t){this.fieldPath=e,this.kind=t}}class $w{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $w(0,so.min())}}function h6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new so(i,We.empty(),e)}function f6(n){return new so(n.readTime,n.key,-1)}class so{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new so(ut.min(),We.empty(),-1)}static max(){return new so(ut.max(),We.empty(),-1)}}function Zk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}const p6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gd(n){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,V.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==p6)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),Kk.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let g=0;g<a;g++){const y=g;t(e[y]).next(E=>{l[y]=E,++f,f===a&&r(l)},E=>i(E))}})}static doWhile(e,t){return new ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class JS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Yr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Hw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Yk(r.target.error);this.v.reject(new Hw(e,i))}}static open(e,t,r,i){try{return new JS(t,e.transaction(i,r))}catch(a){throw new Hw(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bz(t)}}class fa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===fa.S((0,z.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),op(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(fa.C())return!0;const e=(0,z.z$)(),t=fa.S(e),r=0<t&&t<10,i=fa.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,V.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Hw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ee(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ee(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Hw(e,f))},a.onupgradeneeded=l=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,V.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const g=JS.open(a.db,e,l?"readonly":"readwrite",r),y=i(g).next(E=>(g.P(),E)).catch(E=>(g.abort(E),ne.reject(E))).toPromise();return y.catch(()=>{}),yield g.R,y}catch(g){const y=g,E="FirebaseError"!==y.name&&f<3;if(xe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),a.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ez{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return op(this.L.delete())}}class Hw extends Ee{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function md(n){return"IndexedDbTransactionError"===n.name}class bz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),op(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),op(this.store.add(e))}get(e){return op(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),op(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),op(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ne((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=a=>{const l=Yk(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const g=new Ez(f),y=t(f.primaryKey,f.value,g);if(y instanceof ne){const E=y.catch(T=>(g.done(),ne.reject(T)));r.push(E)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function op(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Yk(r.target.error);t(i)}})}let m6=!1;function Yk(n){const e=fa.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m6||(m6=!0,setTimeout(()=>{throw r},0)),r}}return n}class Tz{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,V.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){md(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gd(r)}yield t.et(6e4)}))}}class Dz{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,V.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return xe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(xe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=f6(a);Zk(l,r)>0&&(r=l)}),new so(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let oo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function zw(n){return null==n}function Gw(n){return 0===n&&1/n==-1/0}function _6(n){return"number"==typeof n&&Number.isInteger(n)&&!Gw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y6(e)),e=Sz(n.get(t),e);return y6(e)}function Sz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function y6(n){return n+"\x01\x01"}function lc(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:et()}a=l+2}return new Qt(r)}const v6=["userId","batchId"];function XS(n,e){return[n,Hi(e)]}function C6(n,e,t){return[n,Hi(e),t]}const Az={},Mz=["prefixPath","collectionGroup","readTime","documentId"],xz=["prefixPath","collectionGroup","documentId"],Pz=["collectionGroup","readTime","prefixPath","documentId"],Oz=["canonicalId","targetId"],Nz=["targetId","path"],Rz=["path","targetId"],kz=["collectionId","parent"],Fz=["indexId","uid"],Lz=["uid","sequenceNumber"],Uz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vz=["indexId","uid","orderedDocumentKey"],Bz=["userId","collectionPath","documentId"],jz=["userId","collectionPath","largestBatchId"],$z=["userId","collectionGroup","largestBatchId"],w6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hz=[...w6,"documentOverlays"],I6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],E6=I6,zz=[...E6,"indexConfiguration","indexState","indexEntries"];class Qk extends g6{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ui(n,e){const t=Ze(n);return fa.M(t.ht,e)}function b6(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _d(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function T6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class On{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eA(this.root,e,this.comparator,!1)}getReverseIterator(){return new eA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eA(this.root,e,this.comparator,!0)}}class eA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ti.RED,this.left=i??Ti.EMPTY,this.right=a??Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ti(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D6(this.data.getIterator())}getIteratorFrom(e){return new D6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class D6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function M_(n){return n.hasNext()?n.getNext():void 0}class bs{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new bs([])}unionWith(e){let t=new zn(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new bs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return A_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class S6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new S6("Invalid base64 string: "+i):i}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const Wz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yd(n){if(ct(!!n),"string"==typeof n){let e=0;const t=Wz.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(n.seconds),nanos:hr(n.nanos)}}function hr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xl(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function tA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nA(n){const e=n.mapValue.fields.__previous_value__;return tA(e)?nA(e):e}function Ww(n){const e=yd(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class qz{constructor(e,t,r,i,a,l,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y}}class vd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vd&&e.projectId===this.projectId&&e.database===this.database}}const Cd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rA={nullValue:"NULL_VALUE"};function wd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tA(n)?4:P6(n)?9007199254740991:10:et()}function uc(n,e){if(n===e)return!0;const t=wd(n);if(t!==wd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ww(n).isEqual(Ww(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=yd(r.timestampValue),l=yd(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xl(n.bytesValue).isEqual(xl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hr(r.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(r.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hr(r.integerValue)===hr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=hr(r.doubleValue),l=hr(i.doubleValue);return a===l?Gw(a)===Gw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return A_(n.arrayValue.values||[],e.arrayValue.values||[],uc);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(b6(a)!==b6(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!uc(a[f],l[f])))return!1;return!0}(n,e);default:return et()}var i}function qw(n,e){return void 0!==(n.values||[]).find(t=>uc(t,e))}function Id(n,e){if(n===e)return 0;const t=wd(n),r=wd(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=hr(i.integerValue||i.doubleValue),f=hr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return A6(n.timestampValue,e.timestampValue);case 4:return A6(Ww(n),Ww(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(i,a){const l=xl(i),f=xl(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let g=0;g<l.length&&g<f.length;g++){const y=St(l[g],f[g]);if(0!==y)return y}return St(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=St(hr(i.latitude),hr(a.latitude));return 0!==l?l:St(hr(i.longitude),hr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let g=0;g<l.length&&g<f.length;++g){const y=Id(l[g],f[g]);if(y)return y}return St(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Cd.mapValue&&a===Cd.mapValue)return 0;if(i===Cd.mapValue)return 1;if(a===Cd.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),g=a.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const T=St(f[E],y[E]);if(0!==T)return T;const A=Id(l[f[E]],g[y[E]]);if(0!==A)return A}return St(f.length,y.length)}(n.mapValue,e.mapValue);default:throw et()}}function A6(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=yd(n),r=yd(e),i=St(t.seconds,r.seconds);return 0!==i?i:St(t.nanos,r.nanos)}function x_(n){return Jk(n)}function Jk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xl(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Jk(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Jk(r.fields[f])}`;return a+"}"}(n.mapValue):et();var e}function ap(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xk(n){return!!n&&"integerValue"in n}function Zw(n){return!!n&&"arrayValue"in n}function M6(n){return!!n&&"nullValue"in n}function x6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sA(n){return!!n&&"mapValue"in n}function Kw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _d(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function P6(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Zz(n){return"nullValue"in n?rA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ap(vd.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function Kz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ap(vd.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cd:et()}function O6(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function N6(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kw(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Kw(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());sA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_d(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Di(Kw(this.value))}}function R6(n){const e=[];return _d(n.fields,(t,r)=>{const i=new dr([t]);if(sA(r)){const a=R6(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new bs(e)}class Gn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Gn(e,0,ut.min(),ut.min(),ut.min(),Di.empty(),0)}static newFoundDocument(e,t,r,i){return new Gn(e,1,t,ut.min(),r,i,0)}static newNoDocument(e,t){return new Gn(e,2,t,ut.min(),ut.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,ut.min(),ut.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function k6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Id(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function F6(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!uc(n.position[t],e.position[t]))return!1;return!0}class P_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class L6{}class Kt extends L6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Qz(e,t,r):"array-contains"===t?new eG(e,r):"in"===t?new H6(e,r):"not-in"===t?new tG(e,r):"array-contains-any"===t?new nG(e,r):new Kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Jz(e,r):new Xz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Id(t,this.value)):null!==t&&wd(this.value)===wd(t)&&this.matchesComparison(Id(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mn extends L6{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new mn(e,t)}matches(e){return O_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function O_(n){return"and"===n.op}function e2(n){return"or"===n.op}function t2(n){return U6(n)&&O_(n)}function U6(n){for(const e of n.filters)if(e instanceof mn)return!1;return!0}function n2(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+x_(n.value);if(t2(n))return n.filters.map(e=>n2(e)).join(",");{const e=n.filters.map(t=>n2(t)).join(",");return`${n.op}(${e})`}}function V6(n,e){return n instanceof Kt?(t=n,(r=e)instanceof Kt&&t.op===r.op&&t.field.isEqual(r.field)&&uc(t.value,r.value)):n instanceof mn?function(t,r){return r instanceof mn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&V6(a,r.filters[l]),!0)}(n,e):void et();var t,r}function B6(n,e){const t=n.filters.concat(e);return mn.create(t,n.op)}function j6(n){return n instanceof Kt?`${(e=n).field.canonicalString()} ${e.op} ${x_(e.value)}`:n instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(j6).join(" ,")+"}"}(n):"Filter";var e}class Qz extends Kt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class Jz extends Kt{constructor(e,t){super(e,"in",t),this.keys=$6(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xz extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=$6(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $6(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class eG extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zw(t)&&qw(t.arrayValue,this.value)}}class H6 extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qw(this.value.arrayValue,t)}}class tG extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qw(this.value.arrayValue,t)}}class nG extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qw(this.value.arrayValue,r))}}class rG{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function r2(n,e=null,t=[],r=[],i=null,a=null,l=null){return new rG(n,e,t,r,i,a,l)}function cp(n){const e=Ze(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>n2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>x_(r)).join(",")),e.dt=t}return e.dt}function Yw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Yz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!V6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F6(n.startAt,e.startAt)&&F6(n.endAt,e.endAt)}function oA(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function aA(n,e){return n.filters.filter(t=>t instanceof Kt&&t.field.isEqual(e))}function z6(n,e,t){let r=rA,i=!0;for(const a of aA(n,e)){let l=rA,f=!0;switch(a.op){case"<":case"<=":l=Zz(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=rA}O6({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];O6({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function G6(n,e,t){let r=Cd,i=!0;for(const a of aA(n,e)){let l=Cd,f=!0;switch(a.op){case">=":case">":l=Kz(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cd}N6({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];N6({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Pl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function W6(n,e,t,r,i,a,l,f){return new Pl(n,e,t,r,i,a,l,f)}function N_(n){return new Pl(n)}function q6(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function i2(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function s2(n){return null!==n.collectionGroup}function lp(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=cA(e),r=i2(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new P_(t)),e.wt.push(new P_(dr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new P_(dr.keyField(),a))}}}return e.wt}function ts(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=r2(e.path,e.collectionGroup,lp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of lp(e))t.push(new P_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ed(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ed(e.startAt.position,e.startAt.inclusive):null;e._t=r2(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function o2(n,e){e.getFirstInequalityField(),cA(n);const t=n.filters.concat([e]);return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lA(n,e,t){return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qw(n,e){return Yw(ts(n),ts(e))&&n.limitType===e.limitType}function Z6(n){return`${cp(ts(n))}|lt:${n.limitType}`}function a2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>j6(r)).join(", ")}]`),zw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>x_(r)).join(",")),`Target(${t})`}(ts(n))}; limitType=${n.limitType})`}function Jw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of lp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=k6(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,lp(t),r)||t.endAt&&!function(i,a,l){const f=k6(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,lp(t),r)));var t,r}function K6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y6(n){return(e,t)=>{let r=!1;for(const i of lp(n)){const a=iG(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function iG(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),g=l.data.field(i);return null!==f&&null!==g?Id(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_d(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return T6(this.inner)}size(){return this.innerSize}}const sG=new On(We.comparator);function Ts(){return sG}const Q6=new On(We.comparator);function Xw(...n){let e=Q6;for(const t of n)e=e.insert(t.key,t);return e}function J6(n){let e=Q6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function dc(){return eI()}function X6(){return eI()}function eI(){return new Ol(n=>n.toString(),(n,e)=>n.isEqual(e))}const oG=new On(We.comparator),aG=new zn(We.comparator);function Nt(...n){let e=aG;for(const t of n)e=e.add(t);return e}const cG=new zn(St);function c2(){return cG}function eV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gw(e)?"-0":e}}function tV(n){return{integerValue:""+n}}function nV(n,e){return _6(e)?tV(e):eV(n,e)}class uA{constructor(){this._=void 0}}function lG(n,e,t){return n instanceof R_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&tA(i)&&(i=nA(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof up?iV(n,e):n instanceof dp?sV(n,e):function(r,i){const a=rV(r,i),l=oV(a)+oV(r.gt);return Xk(a)&&Xk(r.gt)?tV(l):eV(r.serializer,l)}(n,e)}function uG(n,e,t){return n instanceof up?iV(n,e):n instanceof dp?sV(n,e):t}function rV(n,e){return n instanceof k_?Xk(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class R_ extends uA{}class up extends uA{constructor(e){super(),this.elements=e}}function iV(n,e){const t=aV(e);for(const r of n.elements)t.some(i=>uc(i,r))||t.push(r);return{arrayValue:{values:t}}}class dp extends uA{constructor(e){super(),this.elements=e}}function sV(n,e){let t=aV(e);for(const r of n.elements)t=t.filter(i=>!uc(i,r));return{arrayValue:{values:t}}}class k_ extends uA{constructor(e,t){super(),this.serializer=e,this.gt=t}}function oV(n){return hr(n.integerValue||n.doubleValue)}function aV(n){return Zw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tI{constructor(e,t){this.field=e,this.transform=t}}class hG{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hA{}function cV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new L_(n.key,Qn.none()):new F_(n.key,n.data,Qn.none());{const t=n.data,r=Di.empty();let i=new zn(dr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Nl(n.key,r,new bs(i.toArray()),Qn.none())}}function fG(n,e,t){n instanceof F_?function(r,i,a){const l=r.value.clone(),f=dV(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Nl?function(r,i,a){if(!dA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=dV(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(uV(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nI(n,e,t,r){return n instanceof F_?function(i,a,l,f){if(!dA(i.precondition,a))return l;const g=i.value.clone(),y=hV(i.fieldTransforms,f,a);return g.setAll(y),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nl?function(i,a,l,f){if(!dA(i.precondition,a))return l;const g=hV(i.fieldTransforms,f,a),y=a.data;return y.setAll(uV(i)),y.setAll(g),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,dA(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function pG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=rV(r.transform,i||null);null!=a&&(null===t&&(t=Di.empty()),t.set(r.field,a))}return t||null}function lV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&A_(t,r,(i,a)=>function dG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof up&&r instanceof up||t instanceof dp&&r instanceof dp?A_(t.elements,r.elements,uc):t instanceof k_&&r instanceof k_?uc(t.gt,r.gt):t instanceof R_&&r instanceof R_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class F_ extends hA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nl extends hA{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dV(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,uG(l,f,t[i]))}return r}function hV(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,lG(a,l,e))}return r}class L_ extends hA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends hA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&fG(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=X6();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const g=cV(l,f);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&A_(this.mutations,e.mutations,(t,r)=>lV(t,r))&&A_(this.baseMutations,e.baseMutations,(t,r)=>lV(t,r))}}class d2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=oG;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new d2(e,t,r,i)}}class h2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mG{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rr,Jt;function fV(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function pV(n){if(void 0===n)return br("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Rr.OK:return ce.OK;case Rr.CANCELLED:return ce.CANCELLED;case Rr.UNKNOWN:return ce.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return ce.INTERNAL;case Rr.UNAVAILABLE:return ce.UNAVAILABLE;case Rr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Rr.NOT_FOUND:return ce.NOT_FOUND;case Rr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Rr.ABORTED:return ce.ABORTED;case Rr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Rr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(Jt=Rr||(Rr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class f2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fA}static getOrCreateInstance(){return null===fA&&(fA=new f2),fA}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let fA=null;function gV(){return new TextEncoder}const _G=new D_([4294967295,4294967295],0);function mV(n){const e=gV().encode(n),t=new uz;return t.update(e),new Uint8Array(t.digest())}function _V(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new D_([t,r],0),new D_([i,a],0)]}class p2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rI(`Invalid padding: ${t}`);if(r<0)throw new rI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new rI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new rI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=D_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(D_.fromNumber(r)));return 1===i.compare(_G)&&(i=new D_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=mV(e),[r,i]=_V(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new p2(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=mV(e),[r,i]=_V(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class rI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class iI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new iI(ut.min(),i,new On(St),Ts(),Nt())}}class sI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sI(r,t,Nt(),Nt(),Nt())}}class pA{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class yV{constructor(e,t){this.targetId=e,this.Vt=t}}class vV{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class CV{constructor(){this.St=0,this.Dt=IV(),this.Ct=Qr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Nt(),t=Nt(),r=Nt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new sI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=IV()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class yG{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ts(),this.zt=wV(),this.Wt=new On(St)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(oA(l))if(0===i){const f=new We(l.path);this.Yt(r,f,Gn.newNoDocument(f,ut.min()))}else ct(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=f2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,E,T){var A,R,G,Q,J,Te;const He={localCacheCount:E,existenceFilterCount:T.count},Re=T.unchangedNames;return Re&&(He.bloomFilter={applied:0===y,hashCount:null!==(A=Re?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Q=null===(G=null===(R=Re?.bits)||void 0===R?void 0:R.bitmap)||void 0===G?void 0:G.length)&&void 0!==Q?Q:0,padding:null!==(Te=null===(J=Re?.bits)||void 0===J?void 0:J.padding)&&void 0!==Te?Te:0}),He}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let g,y;try{g=xl(a).toUint8Array()}catch(E){if(E instanceof S6)return jo("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{y=new p2(g,l,f)}catch(E){return jo(E instanceof rI?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&oA(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,Gn.newNoDocument(g,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Nt();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(g=>{const y=this.se(g);return!y||"TargetPurposeLimboResolution"===y.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new iI(e,t,this.Wt,this.jt,r);return this.jt=Ts(),this.zt=wV(),this.Wt=new On(St),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new CV,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new zn(St),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new CV),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function wV(){return new On(We.comparator)}function IV(){return new On(We.comparator)}const vG={asc:"ASCENDING",desc:"DESCENDING"},CG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wG={and:"AND",or:"OR"};class IG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function g2(n,e){return n.useProto3Json||zw(e)?e:{value:e}}function U_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EG(n,e){return U_(n,e.toTimestamp())}function Tr(n){return ct(!!n),ut.fromTimestamp(function(e){const t=yd(e);return new Yn(t.seconds,t.nanos)}(n))}function m2(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bV(n){const e=Qt.fromString(n);return ct(NV(e)),e}function oI(n,e){return m2(n.databaseId,e.path)}function hc(n,e){const t=bV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(DV(t))}function _2(n,e){return m2(n.databaseId,e)}function TV(n){const e=bV(n);return 4===e.length?Qt.emptyPath():DV(e)}function aI(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DV(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function SV(n,e,t){return{name:oI(n,e),fields:t.value.mapValue.fields}}function AV(n,e,t){const r=hc(n,e.name),i=Tr(e.updateTime),a=e.createTime?Tr(e.createTime):ut.min(),l=new Di({mapValue:{fields:e.fields}}),f=Gn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function cI(n,e){let t;if(e instanceof F_)t={update:SV(n,e.key,e.value)};else if(e instanceof L_)t={delete:oI(n,e.key)};else if(e instanceof Nl)t={update:SV(n,e.key,e.data),updateMask:PG(e.fieldMask)};else{if(!(e instanceof l2))return et();t={verify:oI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof R_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof up)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof k_)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:EG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function y2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Qn.updateTime(Tr(i.updateTime)):void 0!==i.exists?Qn.exists(i.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(ct("REQUEST_TIME"===l.setToServerValue),f=new R_):"appendMissingElements"in l?f=new up(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new dp(l.removeAllFromArray.values||[]):"increment"in l?f=new k_(a,l.increment):et();const g=dr.fromServerFormat(l.fieldPath);return new tI(g,f)}(n,i)):[];var i;if(e.update){const i=hc(n,e.update.name),a=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new bs((e.updateMask.fieldPaths||[]).map(y=>dr.fromServerFormat(y)));return new Nl(i,a,l,t,r)}return new F_(i,a,t,r)}if(e.delete){const i=hc(n,e.delete);return new L_(i,t)}if(e.verify){const i=hc(n,e.verify);return new l2(i,t)}return et()}function MV(n,e){return{documents:[_2(n,e.path)]}}function v2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return OV(mn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:bd((E=y).field),direction:AG(E.dir)};var E})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=g2(n,e.limit);var f,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function xV(n){let e=TV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(E){const T=PV(E);return T instanceof mn&&t2(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new P_(V_((T=E).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(E){let T;return T="object"==typeof E?E.value:E,zw(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Ed((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Ed(E.values||[],!E.before)}(t.endAt)),W6(e,i,l,a,f,"F",g,y)}function PV(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=V_(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=V_(e.unaryFilter.field);return Kt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=V_(e.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=V_(e.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Kt.create(V_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(t=>PV(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function AG(n){return vG[n]}function MG(n){return CG[n]}function xG(n){return wG[n]}function bd(n){return{fieldPath:n.canonicalString()}}function V_(n){return dr.fromServerFormat(n.fieldPath)}function OV(n){return n instanceof Kt?function(e){if("=="===e.op){if(x6(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NAN"}};if(M6(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(x6(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NAN"}};if(M6(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(e.field),op:MG(e.op),value:e.value}}}(n):n instanceof mn?function(e){const t=e.getFilters().map(r=>OV(r));return 1===t.length?t[0]:{compositeFilter:{op:xG(e.op),filters:t}}}(n):et()}function PG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Rl{constructor(e,t,r,i,a=ut.min(),l=ut.min(),f=Qr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class RV{constructor(e){this.fe=e}}function kV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:oI(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:U_(i,a.version.toTimestamp()),createTime:U_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:hp(e.version)}}var i,a;return r}function gA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fp(n){const e=new Yn(n.seconds,n.nanoseconds);return ut.fromTimestamp(e)}function pp(n,e){const t=(e.baseMutations||[]).map(a=>y2(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>y2(n.fe,a)),i=Yn.fromMillis(e.localWriteTimeMs);return new u2(e.batchId,i,t,r)}function lI(n){const e=fp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fp(n.lastLimboFreeSnapshotVersion):ut.min();let r;var i;return void 0!==n.query.documents?(ct(1===(i=n.query).documents.length),r=ts(N_(TV(i.documents[0])))):r=ts(xV(n.query)),new Rl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function FV(n,e){const t=hp(e.snapshotVersion),r=hp(e.lastLimboFreeSnapshotVersion);let i;i=oA(e.target)?MV(n.fe,e.target):v2(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function C2(n){const e=xV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lA(e,e.limit,"L"):e}function w2(n,e){return new h2(e.largestBatchId,y2(n.fe,e.overlayMutation))}function LV(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}function UV(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hp(r.readTime),documentKey:Hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class NG{getBundleMetadata(e,t){return VV(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:fp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return VV(e).put({bundleId:(r=t).id,createTime:hp(Tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return BV(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:C2(i.bundledQuery),readTime:fp(i.readTime)};var i})}saveNamedQuery(e,t){return BV(e).put({name:(r=t).name,readTime:hp(Tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function VV(n){return ui(n,"bundles")}function BV(n){return ui(n,"namedQueries")}class mA{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new mA(e,t.uid||"")}getOverlay(e,t){return uI(e).get(LV(this.userId,t)).next(r=>r?w2(this.serializer,r):null)}getOverlays(e,t){const r=dc();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new h2(t,l);i.push(this.we(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Hi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(uI(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=dc(),a=Hi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return uI(e).j("collectionPathOverlayIndex",l).next(f=>{for(const g of f){const y=w2(this.serializer,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=dc();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uI(e).X({index:"collectionGroupOverlayIndex",range:f},(g,y,E)=>{const T=w2(this.serializer,y);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):E.done()}).next(()=>a)}we(e,t){return uI(e).put(function(r,i,a){const[l,f,g]=LV(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:cI(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function uI(n){return ui(n,"documentOverlays")}class gp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(hr(e.integerValue));else if("doubleValue"in e){const r=hr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Gw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(xl(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?P6(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function RG(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jV(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=RG(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}gp.Ve=new gp;class kG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=jV(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=jV(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FG{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class LG{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class dI{constructor(){this.je=new kG,this.ze=new FG(this.je),this.We=new LG(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class mp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mp(this.indexId,this.documentKey,this.arrayValue,r)}}function Td(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$V(n.arrayValue,e.arrayValue),0!==t?t:(t=$V(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function $V(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=qk(e);if(void 0!==t&&!this.en(t))return!1;const r=sp(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function HV(n){var e,t;if(ct(n instanceof Kt||n instanceof mn),n instanceof Kt){if(n instanceof H6){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Kt.create(n.field,"==",a)))||[];return mn.create(i,"or")}return n}const r=n.filters.map(i=>HV(i));return mn.create(r,n.op)}function VG(n){if(0===n.getFilters().length)return[];const e=b2(HV(n));return ct(zV(e)),I2(e)||E2(e)?[e]:e.getFilters()}function I2(n){return n instanceof Kt}function E2(n){return n instanceof mn&&t2(n)}function zV(n){return I2(n)||E2(n)||function(e){if(e instanceof mn&&e2(e)){for(const t of e.getFilters())if(!I2(t)&&!E2(t))return!1;return!0}return!1}(n)}function b2(n){if(ct(n instanceof Kt||n instanceof mn),n instanceof Kt)return n;if(1===n.filters.length)return b2(n.filters[0]);const e=n.filters.map(r=>b2(r));let t=mn.create(e,n.op);return t=_A(t),zV(t)?t:(ct(t instanceof mn),ct(O_(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>T2(r,i)))}function T2(n,e){let t;return ct(n instanceof Kt||n instanceof mn),ct(e instanceof Kt||e instanceof mn),t=n instanceof Kt?e instanceof Kt?mn.create([n,e],"and"):GV(n,e):e instanceof Kt?GV(e,n):function(r,i){if(ct(r.filters.length>0&&i.filters.length>0),O_(r)&&O_(i))return B6(r,i.getFilters());const a=e2(r)?r:i,l=e2(r)?i:r,f=a.filters.map(g=>T2(g,l));return mn.create(f,"or")}(n,e),_A(t)}function GV(n,e){if(O_(e))return B6(e,n.getFilters());{const t=e.filters.map(r=>T2(n,r));return mn.create(t,"or")}}function _A(n){if(ct(n instanceof Kt||n instanceof mn),n instanceof Kt)return n;const e=n.getFilters();if(1===e.length)return _A(e[0]);if(U6(n))return n;const t=e.map(i=>_A(i)),r=[];return t.forEach(i=>{i instanceof Kt?r.push(i):i instanceof mn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:mn.create(r,n.op)}class BG{constructor(){this.rn=new D2}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(so.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(so.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class D2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Qt.comparator)).toArray()}}const yA=new Uint8Array(0);class jG{constructor(e,t){this.user=e,this.databaseId=t,this.on=new D2,this.un=new Ol(r=>cp(r),(r,i)=>Yw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Hi(i)};return WV(e).put(a)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[d6(t),""],!1,!0);return WV(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(lc(l.parent))}return r})}addFieldIndex(e,t){const r=vA(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=fI(e);return a.next(f=>{l.put(UV(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=vA(e),i=fI(e),a=hI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hI(e);let i=!0;const a=new Map;return ne.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Nt();const f=[];return ne.forEach(a,(g,y)=>{var E;xe("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`} to execute ${cp(t)}`);const T=function(Re,Ye){const gt=qk(Ye);if(void 0===gt)return null;for(const At of aA(Re,gt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(y,g),A=function(Re,Ye){const gt=new Map;for(const At of sp(Ye))for(const Sr of aA(Re,At.fieldPath))switch(Sr.op){case"==":case"in":gt.set(At.fieldPath.canonicalString(),Sr.value);break;case"not-in":case"!=":return gt.set(At.fieldPath.canonicalString(),Sr.value),Array.from(gt.values())}return null}(y,g),R=function(Re,Ye){const gt=[];let At=!0;for(const Sr of sp(Ye)){const As=0===Sr.kind?z6(Re,Sr.fieldPath,Re.startAt):G6(Re,Sr.fieldPath,Re.startAt);gt.push(As.value),At&&(At=As.inclusive)}return new Ed(gt,At)}(y,g),G=function(Re,Ye){const gt=[];let At=!0;for(const Sr of sp(Ye)){const As=0===Sr.kind?G6(Re,Sr.fieldPath,Re.endAt):z6(Re,Sr.fieldPath,Re.endAt);gt.push(As.value),At&&(At=As.inclusive)}return new Ed(gt,At)}(y,g),Q=this.hn(g,y,R),J=this.hn(g,y,G),Te=this.ln(g,y,A),He=this.fn(g.indexId,T,Q,R.inclusive,J,G.inclusive,Te);return ne.forEach(He,Re=>r.H(Re,t.limit).next(Ye=>{Ye.forEach(gt=>{const At=We.fromSegments(gt.documentKey);l.has(At)||(l=l.add(At),f.push(At))})}))}).next(()=>f)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:VG(mn.create(e.filters,"and")).map(r=>r2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),y=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const A=t?this.dn(t[T/y]):yA,R=this.wn(e,A,r[T%y],i),G=this._n(e,A,a[T%y],l),Q=f.map(J=>this.wn(e,A,J,!0));E.push(...this.createRange(R,G,Q))}return E}wn(e,t,r,i){const a=new mp(e,We.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new mp(e,We.empty(),t,r);return i?a.Je():a}an(e,t){const r=new UG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let g=new zn(dr.comparator),y=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:g=g.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(y?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new dI;for(const i of sp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);gp.Ve._e(a,l)}return r.Qe()}dn(e){const t=new dI;return gp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new dI;return gp.Ve._e(ap(this.databaseId,t),r.He(function(i){const a=sp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new dI);let a=0;for(const l of sp(e)){const f=r[a++];for(const g of i)if(this.yn(t,l.fieldPath)&&Zw(f))i=this.pn(i,l,f);else{const y=g.He(l.kind);gp.Ve._e(f,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const g=new dI;g.seed(f.Qe()),gp.Ve._e(l,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vA(e),i=fI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(g=>{l.push(function(y,E){const T=E?new $w(E.sequenceNumber,new so(fp(E.readTime),new We(lc(E.documentKey)),E.largestBatchId)):$w.empty(),A=y.fields.map(([R,G])=>new QS(dr.fromServerFormat(R),G));return new YS(y.indexId,y.collectionGroup,A,T)}(f,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:St(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=vA(e),a=fI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,g=>a.put(UV(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,g=>this.En(e,i,g).next(y=>{const E=this.An(a,g);return y.isEqual(E)?ne.resolve():this.vn(e,a,g,y,E)}))))})}Rn(e,t,r,i){return hI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return hI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=hI(e);let a=new zn(Td);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new mp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new zn(Td);const i=this.mn(t,e);if(null==i)return r;const a=qk(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Zw(l))for(const f of l.arrayValue.values||[])r=r.add(new mp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new mp(t.indexId,e.key,yA,i));return r}vn(e,t,r,i,a){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,g,y,E,T){const A=f.getIterator(),R=g.getIterator();let G=M_(A),Q=M_(R);for(;G||Q;){let J=!1,Te=!1;if(G&&Q){const He=y(G,Q);He<0?Te=!0:He>0&&(J=!0)}else null!=G?Te=!0:J=!0;J?(E(Q),Q=M_(R)):Te?(T(G),G=M_(A)):(G=M_(A),Q=M_(R))}}(i,a,Td,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),ne.waitFor(l)}Tn(e){let t=1;return fI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Td(l,f)).filter((l,f,g)=>!f||0!==Td(l,g[f-1]));const i=[];i.push(e);for(const l of r){const f=Td(l,e),g=Td(l,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(l),i.push(l.Je());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,yA,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,yA,[]]))}return a}bn(e,t){return Td(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qV)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(qV)}}function WV(n){return ui(n,"collectionParents")}function hI(n){return ui(n,"indexEntries")}function vA(n){return ui(n,"indexConfiguration")}function fI(n){return ui(n,"indexState")}function qV(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Zk(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new so(e.readTime,e.documentKey,t)}const ZV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function KV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:l},(E,T,A)=>(f++,A.delete()));a.push(g.next(()=>{ct(1===f)}));const y=[];for(const E of t.mutations){const T=C6(e,E.key.path,t.batchId);a.push(i.delete(T)),y.push(E.key)}return ne.waitFor(a).next(()=>y)}function CA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class wA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new wA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=B_(e),l=Dd(e);return l.add({}).next(f=>{ct("number"==typeof f);const g=new u2(f,t,r,i),y=function(A,R,G){const Q=G.baseMutations.map(Te=>cI(A.fe,Te)),J=G.mutations.map(Te=>cI(A.fe,Te));return{userId:R,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),E=[];let T=new zn((A,R)=>St(A.canonicalString(),R.canonicalString()));for(const A of i){const R=C6(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),E.push(l.put(y)),E.push(a.put(R,Az))}return T.forEach(A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),ne.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Dd(e).get(t).next(r=>r?(ct(r.userId===this.userId),pp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Dd(e).X({index:"userMutationsIndex",range:i},(l,f,g)=>{f.userId===this.userId&&(ct(f.batchId>=r),a=pp(this.serializer,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).j("userMutationsIndex",t).next(r=>r.map(i=>pp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=XS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return B_(e).X({range:i},(l,f,g)=>{const[y,E,T]=l,A=lc(E);if(y===this.userId&&t.path.isEqual(A))return Dd(e).get(T).next(R=>{if(!R)throw et();ct(R.userId===this.userId),a.push(pp(this.serializer,R))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(St);const i=[];return t.forEach(a=>{const l=XS(this.userId,a.path),f=IDBKeyRange.lowerBound(l),g=B_(e).X({range:f},(y,E,T)=>{const[A,R,G]=y,Q=lc(R);A===this.userId&&a.path.isEqual(Q)?r=r.add(G):T.done()});i.push(g)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=XS(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new zn(St);return B_(e).X({range:l},(g,y,E)=>{const[T,A,R]=g,G=lc(A);T===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(R)):E.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Dd(e).get(a).next(l=>{if(null===l)throw et();ct(l.userId===this.userId),r.push(pp(this.serializer,l))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return KV(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return B_(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const g=lc(a[1]);i.push(g)}else f.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return YV(e,this.userId,t)}xn(e){return QV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function YV(n,e,t){const r=XS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return B_(n).X({range:a,Y:!0},(f,g,y)=>{const[E,T,A]=f;E===e&&T===i&&(l=!0),y.done()}).next(()=>l)}function Dd(n){return ui(n,"mutations")}function B_(n){return ui(n,"documentMutations")}function QV(n){return ui(n,"mutationQueues")}class _p{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _p(0)}static Mn(){return new _p(-1)}}class $G{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new _p(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ut.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>j_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return j_(e).X((l,f)=>{const g=lI(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return j_(e).X((r,i)=>{const a=lI(i);t(a)})}$n(e){return JV(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return JV(e).put("targetGlobalKey",t)}Fn(e,t){return j_(e).put(FV(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return j_(e).X({range:i,index:"queryTargetsIndex"},(l,f,g)=>{const y=lI(f);Yw(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Sd(e);return t.forEach(l=>{const f=Hi(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sd(e);return ne.forEach(t,a=>{const l=Hi(a.path);return ne.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Sd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sd(e);let a=Nt();return i.X({range:r,Y:!0},(l,f,g)=>{const y=lc(l[1]),E=new We(y);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=Hi(t.path),i=IDBKeyRange.bound([r],[d6(r)],!1,!0);let a=0;return Sd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],g,y)=>{0!==l&&(a++,y.done())}).next(()=>a>0)}le(e,t){return j_(e).get(t).next(r=>r?lI(r):null)}}function j_(n){return ui(n,"targets")}function JV(n){return ui(n,"targetGlobal")}function Sd(n){return ui(n,"targetDocuments")}function XV([n,e],[t,r]){const i=St(n,t);return 0===i?St(e,r):i}class HG{constructor(e){this.Ln=e,this.buffer=new zn(XV),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,V.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){md(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gd(r)}yield t.Qn(3e5)}))}}class zG{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(oo.ct);const r=new HG(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ZV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZV):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Gk()<=Ir.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class GG{constructor(e,t){this.db=e,this.garbageCollector=function tB(n,e){return new zG(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return IA(e,r)}removeReference(e,t,r){return IA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return IA(e,t)}Xn(e,t){return function(r,i){let a=!1;return QV(r).Z(l=>YV(r,l,i).next(f=>(f&&(a=!0),ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const g=this.Xn(e,l).next(y=>{if(!y)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ut.min()),Sd(e).delete([0,Hi(l.path)])))});i.push(g)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return IA(e,t)}Yn(e,t){const r=Sd(e);let i,a=oo.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:g,sequenceNumber:y})=>{0===l?(a!==oo.ct&&t(new We(lc(i)),a),a=y,i=g):a=oo.ct}).next(()=>{a!==oo.ct&&t(new We(lc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function IA(n,e){return Sd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class nB{constructor(){this.changes=new Ol(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yp(e).put(r)}removeEntry(e,t,r){return yp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],gA(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return yp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pI(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return yp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pI(t))},(i,a)=>{r={document:this.ts(t,a),size:CA(a)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ts(),i=new On(We.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,CA(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new zn(oB);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(pI(i.first()),pI(i.last())),l=i.getIterator();let f=l.getNext();return yp(e).X({index:"documentKeyIndex",range:a},(g,y,E)=>{const T=We.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&oB(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,y),f=l.hasNext()?l.getNext():null),f?E.G(pI(f)):E.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),gA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yp(e).j(IDBKeyRange.bound(l,f,!0)).next(g=>{let y=Ts();for(const E of g){const T=this.ts(We.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Jw(t,T)||i.has(T.key))&&(y=y.insert(T.key,T))}return y})}getAllFromCollectionGroup(e,t,r,i){let a=Ts();const l=sB(t,r),f=sB(t,so.max());return yp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(g,y,E)=>{const T=this.ts(We.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&E.done()}).next(()=>a)}newChangeBuffer(e){return new qG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iB(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return iB(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function OG(n,e){let t;if(e.document)t=AV(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=fp(e.noDocument.readTime);t=Gn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=fp(e.unknownDocument.version);t=Gn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Yn(r[0],r[1]);return ut.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ut.min()))return r}return Gn.newInvalidDocument(e)}}function rB(n){return new WG(n)}class qG extends nB{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ol(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zn((a,l)=>St(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const g=kV(this.os.serializer,l);i=i.add(a.path.popLast());const y=CA(g);r+=y-f.size,t.push(this.os.addEntry(e,a,g))}else if(r-=f.size,this.trackRemovals){const g=kV(this.os.serializer,l.convertToNoDocument(ut.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function iB(n){return ui(n,"remoteDocumentGlobal")}function yp(n){return ui(n,"remoteDocumentsV14")}function pI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sB(n,e){const t=e.documentKey.path.toArray();return[n,gA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=St(t[a],r[a]),i)return i;return i=St(t.length,r.length),i||(i=St(t[t.length-2],r[r.length-2]),i||St(t[t.length-1],r[r.length-1]))}class ZG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class aB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&nI(r.mutation,i,bs.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=dc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Xw();return a.forEach((f,g)=>{l=l.insert(f,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=dc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ts();const l=eI(),f=eI();return t.forEach((g,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Nl)?a=a.insert(y.key,y):void 0!==E?(l.set(y.key,E.mutation.getFieldMask()),nI(E.mutation,y,E.mutation.getFieldMask(),Yn.now())):l.set(y.key,bs.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((y,E)=>l.set(y,E)),t.forEach((y,E)=>{var T;return f.set(y,new ZG(E,null!==(T=l.get(y))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=eI();let i=new On((l,f)=>l-f),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let E=r.get(g)||bs.empty();E=f.applyToLocalView(y,E),r.set(g,E);const T=(i.get(f.batchId)||Nt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,T=X6();E.forEach(A=>{if(!a.has(A)){const R=cV(t.get(A),r.get(A));null!==R&&T.set(A,R),a=a.add(A)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):s2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ne.resolve(dc());let f=-1,g=a;return l.next(y=>ne.forEach(y,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{g=g.insert(E,A)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,g,y,Nt())).next(E=>({batchId:f,changes:J6(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=Xw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Xw();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,f=>{const g=(y=t,E=f.child(i),new Pl(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((E,T)=>{a=a.insert(E,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,g)=>{const y=g.getKey();null===a.get(y)&&(a=a.insert(y,Gn.newInvalidDocument(y)))});let l=Xw();return a.forEach((f,g)=>{const y=i.get(f);void 0!==y&&nI(y.mutation,g,bs.empty(),Yn.now()),Jw(t,g)&&(l=l.insert(f,g))}),l})}}class KG{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Tr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:C2(r.bundledQuery),readTime:Tr(r.readTime)}),ne.resolve();var r}}class YG{constructor(){this.overlays=new On(We.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=dc();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=dc(),a=t.length+1,l=new We(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new On((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=a.get(y.largestBatchId);null===E&&(E=dc(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=dc(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>f.set(y,E)),!(f.size()>=i)););return ne.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new h2(t,r));let a=this.ls.get(t);void 0===a&&(a=Nt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class S2{constructor(){this.fs=new zn(di.ds),this.ws=new zn(di._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new di(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new di(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Qt([])),r=new di(t,e),i=new di(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Qt([])),r=new di(t,e),i=new di(t,e+1);let a=Nt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new di(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||St(e.As,t.As)}static _s(e,t){return St(e.As,t.As)||We.comparator(e.key,t.key)}}class QG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new zn(di.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new u2(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new di(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(St);return t.forEach(i=>{const a=new di(i,0),l=new di(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new di(new We(a),0);let f=new zn(St);return this.Rs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(f=f.add(g.As)),!0)},l),ne.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const a=new di(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new di(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JG{constructor(e){this.Ds=e,this.docs=new On(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ts();const l=t.path,f=new We(l.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||Zk(f6(E),r)<=0||(i.has(E.key)||Jw(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XG(this)}getSize(e){return ne.resolve(this.size)}}class XG extends nB{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class eW{constructor(e){this.persistence=e,this.xs=new Ol(t=>cp(t),Yw),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Ns=0,this.ks=new S2,this.targetCount=0,this.Ms=_p.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new _p(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class A2{constructor(e,t){this.$s={},this.overlays={},this.Os=new oo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new eW(this),this.indexManager=new BG,this.remoteDocumentCache=new JG(r=>this.referenceDelegate.Ls(r)),this.serializer=new RV(t),this.qs=new KG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new QG(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const i=new tW(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class tW extends g6{constructor(e){super(),this.currentSequenceNumber=e}}class EA{constructor(e){this.persistence=e,this.Qs=new S2,this.js=null}static zs(e){return new EA(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,ut.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class nW{constructor(e){this.serializer=e}O(e,t,r,i){const a=new JS("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v6,{unique:!0}),f.createObjectStore("documentMutations"),cB(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),cB(e)),l=l.next(()=>function(f){const g=f.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,g){return g.store("mutations").j().next(y=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v6,{unique:!0});const E=g.store("mutations"),T=y.map(A=>E.put(A));return ne.waitFor(T)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:Bz});g.createIndex("collectionPathOverlayIndex",jz,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",$z,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:Mz});g.createIndex("documentKeyIndex",xz),g.createIndex("collectionGroupIndex",Pz)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Fz}).createIndex("sequenceNumberIndex",Lz,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Uz}).createIndex("documentKeyIndex",Vz,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=CA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>ne.forEach(f,g=>{ct(g.userId===a.userId);const y=pp(this.serializer,g);return KV(e,a.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const g=new Qt(l),y=[0,Hi(g)];a.push(t.get(y).next(E=>E?ne.resolve():t.put({targetId:0,path:Hi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:kz});const r=t.store("collectionParents"),i=new D2,a=l=>{if(i.add(l)){const f=l.lastSegment(),g=l.popLast();return r.put({collectionId:f,parent:Hi(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const g=new Qt(l);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,g],y)=>{const E=lc(f);return a(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=lI(i),l=FV(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),g=(y=l,y.document?new We(Qt.fromString(y.document.name).popFirst(5)):y.noDocument?We.fromSegments(y.noDocument.path):y.unknownDocument?We.fromSegments(y.unknownDocument.path):et()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(E))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=rB(this.serializer),a=new A2(EA.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(g=>{var y;let E=null!==(y=f.get(g.userId))&&void 0!==y?y:Nt();pp(this.serializer,g).keys().forEach(T=>E=E.add(T)),f.set(g.userId,E)}),ne.forEach(f,(g,y)=>{const E=new li(y),T=mA.de(this.serializer,E),A=a.getIndexManager(E),R=wA.de(E,this.serializer,A,a.referenceDelegate);return new aB(i,R,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Qk(t,oo.ct),g).next()})})}}function cB(n){n.createObjectStore("targetDocuments",{keyPath:Nz}).createIndex("documentTargetsIndex",Rz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Oz,{unique:!0}),n.createObjectStore("targetGlobal")}const M2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class x2{constructor(e,t,r,i,a,l,f,g,y,E,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=y,this.oi=E,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!x2.D())throw new Ee(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GG(this,i),this.di=t+"main",this.serializer=new RV(g),this.wi=new fa(this.di,this.ui,new nW(this.serializer)),this.Bs=new $G(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rB(this.serializer),this.qs=new NG,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(ce.FAILED_PRECONDITION,M2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new oo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,V.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,V.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,V.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>TA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(md(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return gI(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return TA(e).delete(this.clientId)}bi(){var e=this;return(0,V.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ui(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(g=>-1===l.indexOf(g));return ne.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):gI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ee(ce.FAILED_PRECONDITION,M2);return!1}}return!(!this.networkEnabled||!this.inForeground)||TA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,V.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Qk(t,oo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>TA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return wA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jG(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return mA.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?zz:14===l?E6:13===l?I6:12===l?Hz:11===l?w6:void et();var l;let f;return this.wi.runTransaction(e,i,a,g=>(f=new Qk(g,this.Os?this.Os.next():oo.ct),"readwrite-primary"===t?this.Ti(f).next(y=>!!y||this.Ei(f)).next(y=>{if(!y)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ee(ce.FAILED_PRECONDITION,p6);return r(f)}).next(y=>this.vi(f).next(()=>y)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return gI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ee(ce.FAILED_PRECONDITION,M2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gI(e).put("owner",t)}static D(){return fa.D()}Ai(e){const t=gI(e);return t.get("owner").next(r=>this.Ri(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gI(n){return ui(n,"owner")}function TA(n){return ui(n,"clientMetadata")}function P2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class O2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new O2(e,t.fromCache,r,i)}}class lB{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(q6(t))return ne.resolve(null);let r=ts(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lA(t,null,"F"),r=ts(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Nt(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.ji(t,f);return this.zi(t,y,l,g.readTime)?this.Ki(e,lA(t,null,"F")):this.Wi(e,y,t,g)}))})))}Gi(e,t,r,i){return q6(t)||i.isEqual(ut.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(Gk()<=Ir.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),a2(t)),this.Wi(e,l,t,h6(i,-1)))})}ji(e,t){let r=new zn(Y6(e));return t.forEach((i,a)=>{Jw(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return Gk()<=Ir.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",a2(t)),this.Ui.getDocumentsMatchingQuery(e,t,so.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class rW{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new On(St),this.Yi=new Ol(a=>cp(a),Yw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aB(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function uB(n,e,t,r){return new rW(n,e,t,r)}function dB(n,e){return N2.apply(this,arguments)}function N2(){return N2=(0,V.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let g=Nt();for(const y of i){l.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of a){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(y=>({er:y,removedBatchIds:l,addedBatchIds:f}))})})}),N2.apply(this,arguments)}function hB(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fB(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ts();return t.forEach((f,g)=>{const y=a.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(ut.min())?(e.removeEntry(f,g.readTime),l=l.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),l=l.insert(f,g)):xe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)}),{nr:l,sr:i}})}function oW(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $_(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Rl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function H_(n,e,t){return R2.apply(this,arguments)}function R2(){return R2=(0,V.Z)(function*(n,e,t){const r=Ze(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!md(l))throw l;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),R2.apply(this,arguments)}function DA(n,e,t){const r=Ze(n);let i=ut.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,g,y){const E=Ze(f),T=E.Yi.get(y);return void 0!==T?ne.resolve(E.Ji.get(T)):E.Bs.getTargetData(g,y)}(r,l,ts(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:ut.min(),t?a:Nt())).next(f=>(mB(r,K6(e),f),{documents:f,ir:a})))}function pB(n,e){const t=Ze(n),r=Ze(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function gB(n,e){const t=Ze(n),r=t.Xi.get(e)||ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,h6(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(mB(t,e,i),i))}function mB(n,e,t){let r=n.Xi.get(e)||ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function k2(){return k2=(0,V.Z)(function*(n,e,t,r){const i=Ze(n);let a=Nt(),l=Ts();for(const y of t){const E=e.rr(y.metadata.name);y.document&&(a=a.add(E));const T=e.ur(y);T.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(E,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield $_(i,(y=r,ts(N_(Qt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>fB(y,f,l).next(E=>(f.apply(y),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Bs.addMatchingKeys(y,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.nr,E.sr)).next(()=>E.nr)))}),k2.apply(this,arguments)}function cW(n,e){return F2.apply(this,arguments)}function F2(){return F2=(0,V.Z)(function*(n,e,t=Nt()){const r=yield $_(n,ts(C2(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Tr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Qr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),F2.apply(this,arguments)}function _B(n,e){return`firestore_clients_${n}_${e}`}function yB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function L2(n,e){return`firestore_targets_${n}_${e}`}class SA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ee(i.error.code,i.error.message))),l?new SA(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ee(r.error.code,r.error.message))),a?new mI(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=c2();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=_6(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new AA(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class U2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new U2(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class V2{constructor(){this.activeTargetIds=c2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new On(St),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=_B(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new V2),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,V.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(_B(e.persistenceKey,i));if(a){const l=AA.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(L2(this.persistenceKey,e));if(r){const i=mI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(L2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,V.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=oo.ct;if(null!=a)try{const f=JSON.parse(a);ct("number"==typeof f),l=f}catch(f){br("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==oo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new SA(this.currentUser,e,t,r),a=yB(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=yB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=L2(this.persistenceKey,e),a=new mI(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return AA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return SA.ar(new li(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return mI.ar(i,t)}br(e){return U2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,V.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=c2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class vB{constructor(){this.Hr=new V2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new V2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lW{Yr(e){}shutdown(){}}class CB{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let MA=null;function j2(){return null===MA?MA=268435456+Math.round(2147483648*Math.random()):MA++,"0x"+MA.toString(16)}const uW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dW{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gi="WebChannelConnection";class hW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=j2(),f=this.To(e,t);xe("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const g={};return this.Eo(g,i,a),this.Ao(e,f,g,r).then(y=>(xe("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw jo("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",f,"request:",r),y})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+S_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${uW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=j2();return new Promise((l,f)=>{const g=new lz;g.setWithCredentials(!0),g.listenOnce(oz.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zk.NO_ERROR:const E=g.getResponseJson();xe(Gi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(E)),l(E);break;case zk.TIMEOUT:xe(Gi,`RPC '${e}' ${a} timed out`),f(new Ee(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zk.HTTP_ERROR:const T=g.getStatus();if(xe(Gi,`RPC '${e}' ${a} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const G=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(J)>=0?J:ce.UNKNOWN}(R.status);f(new Ee(G,R.message))}else f(new Ee(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new Ee(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{xe(Gi,`RPC '${e}' ${a} completed.`)}});const y=JSON.stringify(i);xe(Gi,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=j2(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iz(),f=sz(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.xmlHttpFactory=new cz({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=a.join("");xe(Gi,`Creating RPC '${e}' stream ${i}: ${E}`,g);const T=l.createWebChannel(E,g);let A=!1,R=!1;const G=new dW({ro:J=>{R?xe(Gi,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(xe(Gi,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),xe(Gi,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,Te,He)=>{J.listen(Te,Re=>{try{He(Re)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,KS.EventType.OPEN,()=>{R||xe(Gi,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,KS.EventType.CLOSE,()=>{R||(R=!0,xe(Gi,`RPC '${e}' stream ${i} transport closed`),G.wo())}),Q(T,KS.EventType.ERROR,J=>{R||(R=!0,jo(Gi,`RPC '${e}' stream ${i} transport errored:`,J),G.wo(new Ee(ce.UNAVAILABLE,"The operation could not be completed")))}),Q(T,KS.EventType.MESSAGE,J=>{var Te;if(!R){const He=J.data[0];ct(!!He);const Ye=He.error||(null===(Te=He[0])||void 0===Te?void 0:Te.error);if(Ye){xe(Gi,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let At=function(As){const Dy=Rr[As];if(void 0!==Dy)return pV(Dy)}(gt),Sr=Ye.message;void 0===At&&(At=ce.INTERNAL,Sr="Unknown error status: "+gt+" with message "+Ye.message),R=!0,G.wo(new Ee(At,Sr)),T.close()}else xe(Gi,`RPC '${e}' stream ${i} received:`,He),G._o(He)}}),Q(f,az.STAT_EVENT,J=>{J.stat===o6.PROXY?xe(Gi,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===o6.NOPROXY&&xe(Gi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{G.fo()},0),G}}function wB(){return typeof window<"u"?window:null}function xA(){return typeof document<"u"?document:null}function _I(n){return new IG(n,!0)}class $2{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class IB{constructor(e,t,r,i,a,l,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new $2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,V.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,V.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,V.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ee(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,V.Z)(function*(){e.state=0,e.start()}))}tu(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fW extends IB{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function TG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],a=function(g,y){return g.useProto3Json?(ct(void 0===y||"string"==typeof y),Qr.fromBase64String(y||"")):(ct(void 0===y||y instanceof Uint8Array),Qr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(g){const y=void 0===g.code?ce.UNKNOWN:pV(g.code);return new Ee(y,g.message||"")}(l);t=new vV(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=hc(n,r.document.name),a=Tr(r.document.updateTime),l=r.document.createTime?Tr(r.document.createTime):ut.min(),f=new Di({mapValue:{fields:r.document.fields}}),g=Gn.newFoundDocument(i,a,l,f);t=new pA(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=hc(n,r.document),a=r.readTime?Tr(r.readTime):ut.min(),l=Gn.newNoDocument(i,a);t=new pA([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=hc(n,r.document);t=new pA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new mG(i,a);t=new yV(r.targetId,l)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?Tr(a.readTime):ut.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=aI(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=oA(f)?{documents:MV(i,f)}:{query:v2(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=EV(i,a.resumeToken);const g=g2(i,a.expectedCount);null!==g&&(l.expectedCount=g)}else if(a.snapshotVersion.compareTo(ut.min())>0){l.readTime=U_(i,a.snapshotVersion.toTimestamp());const g=g2(i,a.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const r=function SG(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=aI(this.serializer),t.removeTarget=e,this.Wo(t)}}class pW extends IB{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function DG(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,i){let a=Tr(r.updateTime?r.updateTime:i);return a.isEqual(ut.min())&&(a=Tr(i)),new hG(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=aI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cI(this.serializer,r))};this.Wo(t)}}class gW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ce.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class _W{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(br(t),this.mu=!1):xe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yW{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,V.Z)(function*(){var g;Ad(l)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,V.Z)(function*(y){const E=Ze(y);E.vu.add(4),yield z_(E),E.bu.set("Unknown"),E.vu.delete(4),yield yI(E)}),function(y){return g.apply(this,arguments)})(l))}))}),this.bu=new _W(r,i)}}function yI(n){return z2.apply(this,arguments)}function z2(){return z2=(0,V.Z)(function*(n){if(Ad(n))for(const e of n.Ru)yield e(!0)}),z2.apply(this,arguments)}function z_(n){return G2.apply(this,arguments)}function G2(){return G2=(0,V.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),G2.apply(this,arguments)}function PA(n,e){const t=Ze(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Z2(t)?q2(t):W_(t).Ko()&&W2(t,e))}function vI(n,e){const t=Ze(n),r=W_(t);t.Au.delete(e),r.Ko()&&EB(t,e),0===t.Au.size&&(r.Ko()?r.jo():Ad(t)&&t.bu.set("Unknown"))}function W2(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}W_(n).su(e)}function EB(n,e){n.Vu.qt(e),W_(n).iu(e)}function q2(n){n.Vu=new yG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),W_(n).start(),n.bu.gu()}function Z2(n){return Ad(n)&&!W_(n).Uo()&&n.Au.size>0}function Ad(n){return 0===Ze(n).vu.size}function bB(n){n.Vu=void 0}function vW(n){return K2.apply(this,arguments)}function K2(){return K2=(0,V.Z)(function*(n){n.Au.forEach((e,t)=>{W2(n,e)})}),K2.apply(this,arguments)}function CW(n,e){return Y2.apply(this,arguments)}function Y2(){return Y2=(0,V.Z)(function*(n,e){bB(n),Z2(n)?(n.bu.Iu(e),q2(n)):n.bu.set("Unknown")}),Y2.apply(this,arguments)}function wW(n,e,t){return Q2.apply(this,arguments)}function Q2(){return Q2=(0,V.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof vV&&2===e.state&&e.cause)try{yield(r=(0,V.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield OA(n,r)}else if(e instanceof pA?n.Vu.Ht(e):e instanceof yV?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ut.min()))try{const r=yield hB(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=i.Au.get(g);y&&i.Au.set(g,y.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,g)=>{const y=i.Au.get(f);if(!y)return;i.Au.set(f,y.withResumeToken(Qr.EMPTY_BYTE_STRING,y.snapshotVersion)),EB(i,f);const E=new Rl(y.target,f,g,y.sequenceNumber);W2(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield OA(n,r)}var r}),Q2.apply(this,arguments)}function OA(n,e,t){return J2.apply(this,arguments)}function J2(){return J2=(0,V.Z)(function*(n,e,t){if(!md(e))throw e;n.vu.add(1),yield z_(n),n.bu.set("Offline"),t||(t=()=>hB(n.localStore)),n.asyncQueue.enqueueRetryable((0,V.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield yI(n)}))}),J2.apply(this,arguments)}function TB(n,e){return e().catch(t=>OA(n,t,e))}function G_(n){return X2.apply(this,arguments)}function X2(){return X2=(0,V.Z)(function*(n){const e=Ze(n),t=Md(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;IW(e);)try{const i=yield oW(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,EW(e,i)}catch(i){yield OA(e,i)}DB(e)&&SB(e)}),X2.apply(this,arguments)}function IW(n){return Ad(n)&&n.Eu.length<10}function EW(n,e){n.Eu.push(e);const t=Md(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function DB(n){return Ad(n)&&!Md(n).Uo()&&n.Eu.length>0}function SB(n){Md(n).start()}function bW(n){return eF.apply(this,arguments)}function eF(){return eF=(0,V.Z)(function*(n){Md(n).hu()}),eF.apply(this,arguments)}function TW(n){return tF.apply(this,arguments)}function tF(){return tF=(0,V.Z)(function*(n){const e=Md(n);for(const t of n.Eu)e.uu(t.mutations)}),tF.apply(this,arguments)}function DW(n,e,t){return nF.apply(this,arguments)}function nF(){return nF=(0,V.Z)(function*(n,e,t){const r=n.Eu.shift(),i=d2.from(r,e,t);yield TB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield G_(n)}),nF.apply(this,arguments)}function SW(n,e){return rF.apply(this,arguments)}function rF(){return rF=(0,V.Z)(function*(n,e){var t;e&&Md(n).ou&&(yield(t=(0,V.Z)(function*(r,i){if(fV(a=i.code)&&a!==ce.ABORTED){const l=r.Eu.shift();Md(r).Qo(),yield TB(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield G_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),DB(n)&&SB(n)}),rF.apply(this,arguments)}function AB(n,e){return iF.apply(this,arguments)}function iF(){return iF=(0,V.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Ad(t);t.vu.add(3),yield z_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield yI(t)}),iF.apply(this,arguments)}function sF(n,e){return oF.apply(this,arguments)}function oF(){return oF=(0,V.Z)(function*(n,e){const t=Ze(n);e?(t.vu.delete(2),yield yI(t)):e||(t.vu.add(2),yield z_(t),t.bu.set("Unknown"))}),oF.apply(this,arguments)}function W_(n){return n.Su||(n.Su=function(e,t,r){const i=Ze(e);return i.fu(),new fW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:vW.bind(null,n),ao:CW.bind(null,n),nu:wW.bind(null,n)}),n.Ru.push(function(){var e=(0,V.Z)(function*(t){t?(n.Su.Qo(),Z2(n)?q2(n):n.bu.set("Unknown")):(yield n.Su.stop(),bB(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Md(n){return n.Du||(n.Du=function(e,t,r){const i=Ze(e);return i.fu(),new pW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:bW.bind(null,n),ao:SW.bind(null,n),au:TW.bind(null,n),cu:DW.bind(null,n)}),n.Ru.push(function(){var e=(0,V.Z)(function*(t){t?(n.Du.Qo(),yield G_(n)):(yield n.Du.stop(),n.Eu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class aF{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new aF(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ee(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q_(n,e){if(br("AsyncQueue",`${e}: ${n}`),md(n))return new Ee(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Z_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Xw(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new Z_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Z_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Z_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MB{constructor(){this.Cu=new On(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class K_{constructor(e,t,r,i,a,l,f,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new K_(e,t,Z_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class AW{constructor(){this.Nu=void 0,this.listeners=[]}}class MW{constructor(){this.queries=new Ol(e=>Z6(e),Qw),this.onlineState="Unknown",this.ku=new Set}}function cF(n,e){return lF.apply(this,arguments)}function lF(){return lF=(0,V.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new AW),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=q_(l,`Initialization of query '${a2(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&hF(t)}),lF.apply(this,arguments)}function uF(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,V.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dF.apply(this,arguments)}function xW(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&hF(t)}function PW(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function hF(n){n.ku.forEach(e=>{e.next()})}class fF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new K_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=K_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class OW{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class xB{constructor(e){this.serializer=e}rr(e){return hc(this.serializer,e)}ur(e){return e.metadata.exists?AV(this.serializer,e.document,!1):Gn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Tr(e)}}class NW{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PB(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new xB(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Nt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,V.Z)(function*(){const t=yield function aW(n,e,t,r){return k2.apply(this,arguments)}(e.localStore,new xB(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield cW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function PB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OB{constructor(e){this.key=e}}class NB{constructor(e){this.key=e}}class RB{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Nt(),this.mutatedKeys=Nt(),this.tc=Y6(e),this.ec=new Z_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new MB,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const A=i.get(E),R=Jw(this.query,T)?T:null,G=!!A&&this.mutatedKeys.has(A.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;A&&R?A.data.isEqual(R.data)?G!==Q&&(r.track({type:3,doc:R}),J=!0):this.rc(A,R)||(r.track({type:2,doc:R}),J=!0,(g&&this.tc(R,g)>0||y&&this.tc(R,y)<0)&&(f=!0)):!A&&R?(r.track({type:0,doc:R}),J=!0):A&&!R&&(r.track({type:1,doc:A}),J=!0,(g||y)&&(f=!0)),J&&(R?(l=l.add(R),a=Q?a.add(E):a.delete(E)):(l=l.delete(E),a=a.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((y,E)=>function(T,A){const R=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(T)-R(A)}(y.type,E.type)||this.tc(y.doc,E.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==a.length||g?{snapshot:new K_(this.query,e.ec,i,a,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new MB,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Nt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new NB(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new OB(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Nt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return K_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class RW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kW{constructor(e){this.key=e,this.fc=!1}}class FW{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ol(f=>Z6(f),Qw),this._c=new Map,this.mc=new Set,this.gc=new On(We.comparator),this.yc=new Map,this.Ic=new S2,this.Tc={},this.Ec=new Map,this.Ac=_p.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function LW(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,V.Z)(function*(n,e){const t=LF(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield $_(t.localStore,ts(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield gF(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&PA(t.remoteStore,l)}return i}),pF.apply(this,arguments)}function gF(n,e,t,r,i){return mF.apply(this,arguments)}function mF(){return mF=(0,V.Z)(function*(n,e,t,r,i){n.Rc=(T,A,R)=>{return(G=(0,V.Z)(function*(Q,J,Te,He){let Re=J.view.sc(Te);Re.zi&&(Re=yield DA(Q.localStore,J.query,!1).then(({documents:At})=>J.view.sc(At,Re)));const Ye=He&&He.targetChanges.get(J.targetId),gt=J.view.applyChanges(Re,Q.isPrimaryClient,Ye);return DF(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,Te,He){return G.apply(this,arguments)})(n,T,A,R);var G};const a=yield DA(n.localStore,e,!0),l=new RB(e,a.ir),f=l.sc(a.documents),g=sI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(f,n.isPrimaryClient,g);DF(n,t,y.cc);const E=new RW(e,t,l);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),mF.apply(this,arguments)}function UW(n,e){return _F.apply(this,arguments)}function _F(){return _F=(0,V.Z)(function*(n,e){const t=Ze(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Qw(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield H_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vI(t.remoteStore,r.targetId),Y_(t,r.targetId)}).catch(gd))):(Y_(t,r.targetId),yield H_(t.localStore,r.targetId,!0))}),_F.apply(this,arguments)}function yF(){return yF=(0,V.Z)(function*(n,e,t){const r=UF(n);try{const i=yield function(a,l){const f=Ze(a),g=Yn.now(),y=l.reduce((A,R)=>A.add(R.key),Nt());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Ts(),G=Nt();return f.Zi.getEntries(A,y).next(Q=>{R=Q,R.forEach((J,Te)=>{Te.isValidDocument()||(G=G.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,R)).next(Q=>{E=Q;const J=[];for(const Te of l){const He=pG(Te,E.get(Te.key).overlayedDocument);null!=He&&J.push(new Nl(Te.key,He,R6(He.value.mapValue),Qn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,g,J,l)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(E,G);return f.documentOverlayCache.saveOverlays(A,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:J6(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let g=a.Tc[a.currentUser.toKey()];g||(g=new On(St)),g=g.insert(l,f),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield kl(r,i.changes),yield G_(r.remoteStore)}catch(i){const a=q_(i,"Failed to persist write");t.reject(a)}}),yF.apply(this,arguments)}function kB(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,V.Z)(function*(n,e){const t=Ze(n);try{const r=yield function sW(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((E,T)=>{const A=i.get(T);if(!A)return;f.push(t.Bs.removeMatchingKeys(a,E.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(a,E.addedDocuments,T)));let R=A.withSequenceNumber(a.currentSequenceNumber);var G,Q,J;null!==e.targetMismatches.get(T)?R=R.withResumeToken(Qr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(T,R),Q=R,J=E,(0===(G=A).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,R))});let g=Ts(),y=Nt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),f.push(fB(a,l,e.documentUpdates).next(E=>{g=E.nr,y=E.sr})),!r.isEqual(ut.min())){const E=t.Bs.getLastRemoteSnapshotVersion(a).next(T=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(E)}return ne.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,y)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?ct(l.fc):i.removedDocuments.size>0&&(ct(l.fc),l.fc=!1))}),yield kl(t,r,e)}catch(r){yield gd(r)}}),vF.apply(this,arguments)}function FB(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ze(a);f.onlineState=l;let g=!1;f.queries.forEach((y,E)=>{for(const T of E.listeners)T.Mu(l)&&(g=!0)}),g&&hF(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BW(n,e,t){return CF.apply(this,arguments)}function CF(){return CF=(0,V.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new On(We.comparator);l=l.insert(a,Gn.newNoDocument(a,ut.min()));const f=Nt().add(a),g=new iI(ut.min(),new Map,new On(St),l,f);yield kB(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),SF(r)}else yield H_(r.localStore,e,!1).then(()=>Y_(r,e,t)).catch(gd)}),CF.apply(this,arguments)}function jW(n,e){return wF.apply(this,arguments)}function wF(){return wF=(0,V.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield function iW(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,g,y){const E=g.batch,T=E.keys();let A=ne.resolve();return T.forEach(R=>{A=A.next(()=>y.getEntry(f,R)).next(G=>{const Q=g.docVersions.get(R);ct(null!==Q),G.version.compareTo(Q)<0&&(E.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),y.addEntry(G)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(f,E))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Nt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(f=f.add(l.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);TF(t,r,null),bF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kl(t,i)}catch(i){yield gd(i)}}),wF.apply(this,arguments)}function $W(n,e,t){return IF.apply(this,arguments)}function IF(){return IF=(0,V.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const f=Ze(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return f.mutationQueue.lookupMutationBatch(g,l).next(E=>(ct(null!==E),y=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>f.localDocuments.getDocuments(g,y))})}(r.localStore,e);TF(r,e,t),bF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kl(r,i)}catch(i){yield gd(i)}}),IF.apply(this,arguments)}function EF(){return EF=(0,V.Z)(function*(n,e){const t=Ze(n);Ad(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=q_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),EF.apply(this,arguments)}function bF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function TF(n,e,t){const r=Ze(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Y_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||LB(n,r)})}function LB(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(vI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),SF(n))}function DF(n,e,t){for(const r of t)r instanceof OB?(n.Ic.addReference(r.key,e),zW(n,r)):r instanceof NB?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||LB(n,r.key)):et()}function zW(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.mc.add(r),SF(n))}function SF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new kW(t)),n.gc=n.gc.insert(t,r),PA(n.remoteStore,new Rl(ts(N_(t.path)),r,"TargetPurposeLimboResolution",oo.ct))}}function kl(n,e,t){return AF.apply(this,arguments)}function AF(){return AF=(0,V.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{l.push(r.Rc(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const E=O2.Li(g.targetId,y);a.push(E)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,V.Z)(function*(g,y){const E=Ze(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ne.forEach(y,A=>ne.forEach(A.Fi,R=>E.persistence.referenceDelegate.addReference(T,A.targetId,R)).next(()=>ne.forEach(A.Bi,R=>E.persistence.referenceDelegate.removeReference(T,A.targetId,R)))))}catch(T){if(!md(T))throw T;xe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const R=E.Ji.get(A),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);E.Ji=E.Ji.insert(A,Q)}}}),function(g,y){return f.apply(this,arguments)})(r.localStore,a))}),AF.apply(this,arguments)}function GW(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,V.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield dB(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new Ee(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kl(t,r.er)}var i}),MF.apply(this,arguments)}function WW(n,e){const t=Ze(n),r=t.yc.get(e);if(r&&r.fc)return Nt().add(r.key);{let i=Nt();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function qW(n,e){return xF.apply(this,arguments)}function xF(){return xF=(0,V.Z)(function*(n,e){const t=Ze(n),r=yield DA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&DF(t,e.targetId,i.cc),i}),xF.apply(this,arguments)}function ZW(n,e){return PF.apply(this,arguments)}function PF(){return PF=(0,V.Z)(function*(n,e){const t=Ze(n);return gB(t.localStore,e).then(r=>kl(t,r))}),PF.apply(this,arguments)}function KW(n,e,t,r){return OF.apply(this,arguments)}function OF(){return OF=(0,V.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,f){const g=Ze(l),y=Ze(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.Sn(E,f).next(T=>T?g.localDocuments.getDocuments(E,T):ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield G_(i.remoteStore):"acknowledged"===t||"rejected"===t?(TF(i,e,r||null),bF(i,e),f=e,Ze(Ze(i.localStore).mutationQueue).Cn(f)):et(),yield kl(i,a)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),OF.apply(this,arguments)}function NF(){return NF=(0,V.Z)(function*(n,e){const t=Ze(n);if(LF(t),UF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UB(t,r.toArray());t.vc=!0,yield sF(t.remoteStore,!0);for(const a of i)PA(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Y_(t,l),H_(t.localStore,l,!0))),vI(t.remoteStore,l)}),yield i,yield UB(t,r),function(a){const l=Ze(a);l.yc.forEach((f,g)=>{vI(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new On(We.comparator)}(t),t.vc=!1,yield sF(t.remoteStore,!1)}}),NF.apply(this,arguments)}function UB(n,e,t){return RF.apply(this,arguments)}function RF(){return RF=(0,V.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let f;const g=r._c.get(l);if(g&&0!==g.length){f=yield $_(r.localStore,ts(g[0]));for(const y of g){const E=r.wc.get(y),T=yield qW(r,E);T.snapshot&&a.push(T.snapshot)}}else{const y=yield pB(r.localStore,l);f=yield $_(r.localStore,y),yield gF(r,VB(y),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),RF.apply(this,arguments)}function VB(n){return W6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QW(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).$i()}function JW(n,e,t,r){return kF.apply(this,arguments)}function kF(){return kF=(0,V.Z)(function*(n,e,t,r){const i=Ze(n);if(i.vc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield gB(i.localStore,K6(a[0])),f=iI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Qr.EMPTY_BYTE_STRING);yield kl(i,l,f);break}case"rejected":yield H_(i.localStore,e,!0),Y_(i,e,r);break;default:et()}}),kF.apply(this,arguments)}function XW(n,e,t){return FF.apply(this,arguments)}function FF(){return FF=(0,V.Z)(function*(n,e,t){const r=LF(n);if(r.vc){for(const i of e){if(r._c.has(i)){xe("SyncEngine","Adding an already active target "+i);continue}const a=yield pB(r.localStore,i),l=yield $_(r.localStore,a);yield gF(r,VB(a),l.targetId,!1,l.resumeToken),PA(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield H_(r.localStore,i,!1).then(()=>{vI(r.remoteStore,i),Y_(r,i)}).catch(gd))}}),FF.apply(this,arguments)}function LF(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BW.bind(null,e),e.dc.nu=xW.bind(null,e.eventManager),e.dc.Pc=PW.bind(null,e.eventManager),e}function UF(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$W.bind(null,e),e}class CI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,V.Z)(function*(){t.serializer=_I(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uB(this.persistence,new lB,e.initialUser,this.serializer)}createPersistence(e){return new A2(EA.zs,this.serializer)}createSharedClientState(e){return new vB}terminate(){var e=this;return(0,V.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VF extends CI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,V.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield UF(r.Vc.syncEngine),yield G_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return uB(this.persistence,new lB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new eB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Dz(t,this.persistence);return new Tz(e.asyncQueue,r)}createPersistence(e){const t=P2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new x2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wB(),xA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new vB}}class BB extends VF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,V.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof B2&&(r.sharedClientState.syncEngine={jr:KW.bind(null,i),zr:JW.bind(null,i),Wr:XW.bind(null,i),$i:QW.bind(null,i),Qr:ZW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,V.Z)(function*(l){yield function YW(n,e){return NF.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=wB();if(!B2.D(t))throw new Ee(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=P2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new B2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Q_{initialize(e,t){var r=this;return(0,V.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>FB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=GW.bind(null,r.syncEngine),yield sF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new MW}createDatastore(e){const t=_I(e.databaseInfo.databaseId),r=new hW(e.databaseInfo);return new gW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>FB(this.syncEngine,f,0),l=CB.D()?new CB:new lW,new yW(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,g,y){const E=new FW(r,i,a,l,f,g);return y&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,V.Z)(function*(t){const r=Ze(t);xe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield z_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jB(n,e=10240){let t=0;return{read:()=>(0,V.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,V.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class NA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nq{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,V.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,V.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,V.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new OW(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,V.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,V.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,V.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,V.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ee(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,V.Z)(function*(a,l){const f=Ze(a),g=aI(f.serializer)+"/documents",y={documents:l.map(R=>oI(f.serializer,R))},E=yield f.vo("BatchGetDocuments",g,y,l.length),T=new Map;E.forEach(R=>{const G=function bG(n,e){return"found"in e?function(t,r){ct(!!r.found);const i=hc(t,r.found.name),a=Tr(r.found.updateTime),l=r.found.createTime?Tr(r.found.createTime):ut.min(),f=new Di({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const i=hc(t,r.missing),a=Tr(r.readTime);return Gn.newNoDocument(i,a)}(n,e):et()}(f.serializer,R);T.set(G.key.toString(),G)});const A=[];return l.forEach(R=>{const G=T.get(R.toString());ct(!!G),A.push(G)}),A}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new L_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,V.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new l2(a,e.precondition(a)))}),yield(r=(0,V.Z)(function*(i,a){const l=Ze(i),f=aI(l.serializer)+"/documents",g={writes:a.map(y=>cI(l.serializer,y))};yield l.Io("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ee(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new Ee(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iq{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new $2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,V.Z)(function*(){const t=new rq(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!zw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fV(t)}return!1}}class sq{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=u6.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,V.Z)(function*(f){xe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(xe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,V.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=q_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RA(n,e){return BF.apply(this,arguments)}function BF(){return BF=(0,V.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,V.Z)(function*(a){r.isEqual(a)||(yield dB(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),BF.apply(this,arguments)}function jF(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,V.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HF(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>AB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>AB(e.remoteStore,a)),n._onlineComponents=e}),$F.apply(this,arguments)}function $B(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function HF(n){return zF.apply(this,arguments)}function zF(){return zF=(0,V.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield RA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!$B(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),yield RA(n,new CI)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),yield RA(n,new CI);return n._offlineComponents}),zF.apply(this,arguments)}function kA(n){return GF.apply(this,arguments)}function GF(){return GF=(0,V.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),yield jF(n,n._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),yield jF(n,new Q_))),n._onlineComponents}),GF.apply(this,arguments)}function HB(n){return HF(n).then(e=>e.persistence)}function FA(n){return HF(n).then(e=>e.localStore)}function zB(n){return kA(n).then(e=>e.remoteStore)}function WF(n){return kA(n).then(e=>e.syncEngine)}function J_(n){return qF.apply(this,arguments)}function qF(){return qF=(0,V.Z)(function*(n){const e=yield kA(n),t=e.eventManager;return t.onListen=LW.bind(null,e.syncEngine),t.onUnlisten=UW.bind(null,e.syncEngine),t}),qF.apply(this,arguments)}function WB(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(i,a,l,f,g){const y=new NA({next:T=>{a.enqueueAndForget(()=>uF(i,E));const A=T.docs.has(l);!A&&T.fromCache?g.reject(new Ee(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&f&&"server"===f.source?g.reject(new Ee(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new fF(N_(l.path),y,{includeMetadataChanges:!0,Ku:!0});return cF(i,E)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}function qB(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(i,a,l,f,g){const y=new NA({next:T=>{a.enqueueAndForget(()=>uF(i,E)),T.fromCache&&"server"===f.source?g.reject(new Ee(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new fF(l,y,{includeMetadataChanges:!0,Ku:!0});return cF(i,E)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}function ZB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const KB=new Map;function ZF(n,e,t){if(!t)throw new Ee(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YB(n,e,t,r){if(!0===e&&!0===r)throw new Ee(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QB(n){if(!We.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JB(n){if(We.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LA(n);throw new Ee(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XB(n,e){if(e<=0)throw new Ee(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ej{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ee(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ee(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ZB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ej({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ee(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ee(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ej(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fz;switch(t.type){case"firstParty":return new _z(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ee(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KB.get(e);t&&(xe("ComponentProvider","Removing Datastore"),KB.delete(e),t.terminate())}(this),Promise.resolve()}}function tj(n,e,t,r={}){var i;const a=(n=Yt(n,wI))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=li.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ee(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new li(y)}n._authCredentials=new pz(new c6(f,g))}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class fc extends Si{constructor(e,t,r){super(e,t,N_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new We(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function nj(n,e,...t){if(n=(0,z.m9)(n),ZF("collection","path",e),n instanceof wI){const r=Qt.fromString(e,...t);return JB(r),new fc(n,null,r)}{if(!(n instanceof Wn||n instanceof fc))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return JB(r),new fc(n.firestore,null,r)}}function UA(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=u6.A()),ZF("doc","path",e),n instanceof wI){const r=Qt.fromString(e,...t);return QB(r),new Wn(n,null,new We(r))}{if(!(n instanceof Wn||n instanceof fc))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return QB(r),new Wn(n.firestore,n instanceof fc?n.converter:null,new We(r))}}function rj(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Wn||n instanceof fc)&&(e instanceof Wn||e instanceof fc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KF(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&Qw(n._query,e._query)&&n.converter===e.converter}class gq{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new $2(this,"async_queue_retry"),this.Xc=()=>{const t=xA();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=xA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=xA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Yr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,V.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!md(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=aF.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,V.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function YF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class mq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends wI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ij(this),this._firestoreClient.terminate()}}function yq(n,e){const t="object"==typeof n?n:(0,Cn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Cn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,z.P0)("firestore");a&&tj(i,...a)}return i}function Dr(n){return n._firestoreClient||ij(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ij(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qz(n._databaseId,f,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ZB(y.experimentalLongPollingOptions),y.useFetchStreams));var f,y;n._firestoreClient=new sq(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function sj(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,V.Z)(function*(){try{yield RA(n,t),yield jF(n,e),r.resolve()}catch(i){const a=i;if(!$B(a))throw a;jo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function oj(n){if(n._initialized||n._terminated)throw new Ee(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(Qr.fromBase64String(e))}catch(t){throw new Ee(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pc(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ee(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vp{constructor(e){this._methodName=e}}class VA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const Aq=/^__.*__$/;class Mq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new F_(e,this.data,t,this.fieldTransforms)}}class aj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class BA{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new BA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return HA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(cj(this.ca)&&Aq.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class xq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_I(e)}ya(e,t,r,i=!1){return new BA({ca:e,methodName:t,ga:r,path:dr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=_I(n._databaseId);return new xq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jA(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);eL("Data must be an object, but it was:",l,r);const f=dj(r,l);let g,y;if(a.merge)g=new bs(l.fieldMask),y=l.fieldTransforms;else if(a.mergeFields){const E=[];for(const T of a.mergeFields){const A=bI(e,T,t);if(!l.contains(A))throw new Ee(ce.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fj(E,A)||E.push(A)}g=new bs(E),y=l.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=l.fieldTransforms;return new Mq(new Di(f),g,y)}class EI extends vp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof EI}}function lj(n,e,t){return new BA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class QF extends vp{_toFieldTransform(e){return new tI(e.path,new R_)}isEqual(e){return e instanceof QF}}class Pq extends vp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=lj(this,e,!0),r=this.pa.map(a=>wp(a,t)),i=new up(r);return new tI(e.path,i)}isEqual(e){return this===e}}class Oq extends vp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=lj(this,e,!0),r=this.pa.map(a=>wp(a,t)),i=new dp(r);return new tI(e.path,i)}isEqual(e){return this===e}}class Nq extends vp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new k_(e.serializer,nV(e.serializer,this.Ia));return new tI(e.path,t)}isEqual(e){return this===e}}function JF(n,e,t,r){const i=n.ya(1,e,t);eL("Data must be an object, but it was:",i,r);const a=[],l=Di.empty();_d(r,(g,y)=>{const E=$A(e,g,t);y=(0,z.m9)(y);const T=i.da(E);if(y instanceof EI)a.push(E);else{const A=wp(y,T);null!=A&&(a.push(E),l.set(E,A))}});const f=new bs(a);return new aj(l,f,i.fieldTransforms)}function XF(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[bI(e,r,t)],g=[i];if(a.length%2!=0)throw new Ee(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)f.push(bI(e,a[A])),g.push(a[A+1]);const y=[],E=Di.empty();for(let A=f.length-1;A>=0;--A)if(!fj(y,f[A])){const R=f[A];let G=g[A];G=(0,z.m9)(G);const Q=l.da(R);if(G instanceof EI)y.push(R);else{const J=wp(G,Q);null!=J&&(y.push(R),E.set(R,J))}}const T=new bs(y);return new aj(E,T,l.fieldTransforms)}function uj(n,e,t,r=!1){return wp(t,n.ya(r?4:3,e))}function wp(n,e){if(hj(n=(0,z.m9)(n)))return eL("Unsupported field value:",e,n),dj(n,e);if(n instanceof vp)return function(t,r){if(!cj(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=wp(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nV(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Yn.fromDate(t);return{timestampValue:U_(r.serializer,i)}}if(t instanceof Yn){const i=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:U_(r.serializer,i)}}if(t instanceof VA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pc)return{bytesValue:EV(r.serializer,t._byteString)};if(t instanceof Wn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:m2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${LA(t)}`)}(n,e)}function dj(n,e){const t={};return T6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_d(n,(r,i)=>{const a=wp(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function hj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof VA||n instanceof pc||n instanceof Wn||n instanceof vp)}function eL(n,e,t){if(!hj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function bI(n,e,t){if((e=(0,z.m9)(e))instanceof Fl)return e._internalPath;if("string"==typeof e)return $A(n,e);throw HA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rq=new RegExp("[~\\*/\\[\\]]");function $A(n,e,t){if(e.search(Rq)>=0)throw HA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fl(...e.split("."))._internalPath}catch{throw HA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function HA(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Ee(ce.INVALID_ARGUMENT,f+n+g)}function fj(n,e){return n.some(t=>t.isEqual(e))}class TI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kq extends TI{data(){return super.data()}}function zA(n,e){return"string"==typeof e?$A(n,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}function pj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ee(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tL{}class DI extends tL{}function xd(n,e,...t){let r=[];e instanceof tL&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof X_).length,l=i.filter(f=>f instanceof SI).length;if(a>1||a>0&&l>0)throw new Ee(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class SI extends DI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new SI(e,t,r)}_apply(e){const t=this._parse(e);return yj(e._query,t),new Si(e.firestore,e.converter,o2(e._query,t))}_parse(e){const t=Cp(e.firestore);return function(i,a,l,f,g,y,E){let T;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){_j(E,y);const A=[];for(const R of E)A.push(mj(f,i,R));T={arrayValue:{values:A}}}else T=mj(f,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||_j(E,y),T=uj(l,"where",E,"in"===y||"not-in"===y);return Kt.create(g,y,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class X_ extends tL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new X_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)yj(a,f),a=o2(a,f)}(e._query,t),new Si(e.firestore,e.converter,o2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nL extends DI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nL(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new P_(i,a);return function(f,g){if(null===i2(f)){const y=cA(f);null!==y&&vj(0,y,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Pl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class GA extends DI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new GA(e,t,r)}_apply(e){return new Si(e.firestore,e.converter,lA(e._query,this._limit,this._limitType))}}class WA extends DI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new WA(e,t,r)}_apply(e){const t=gj(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(i=t,new Pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class qA extends DI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qA(e,t,r)}_apply(e){const t=gj(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(i=t,new Pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gj(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof TI)return function(i,a,l,f,g){if(!f)throw new Ee(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of lp(i))if(E.field.isKeyField())y.push(ap(a,f.key));else{const T=f.data.field(E.field);if(tA(T))throw new Ee(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=E.field.canonicalString();throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ed(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Cp(n.firestore);return function(a,l,f,g,y,E){const T=a.explicitOrderBy;if(y.length>T.length)throw new Ee(ce.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<y.length;R++){const G=y[R];if(T[R].field.isKeyField()){if("string"!=typeof G)throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!s2(a)&&-1!==G.indexOf("/"))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const Q=a.path.child(Qt.fromString(G));if(!We.isDocumentKey(Q))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);A.push(ap(l,J))}else{const Q=uj(f,g,G);A.push(Q)}}return new Ed(A,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mj(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s2(e)&&-1!==t.indexOf("/"))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!We.isDocumentKey(r))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ap(n,new We(r))}if(t instanceof Wn)return ap(n,t._key);throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LA(t)}.`)}function _j(n,e){if(!Array.isArray(n)||0===n.length)throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yj(n,e){if(e.isInequality()){const r=cA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=i2(n);null!==a&&vj(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ee(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vj(n,e,t){if(!t.isEqual(e))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rL{convertValue(e,t="none"){switch(wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return _d(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new VA(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ww(e));default:return null}}convertTimestamp(e){const t=yd(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);ct(NV(r));const i=new vd(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ZA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class zq extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ll extends TI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new AI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class AI extends Ll{data(e={}){return super.data(e)}}class Pd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ip(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new AI(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new AI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ip(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new AI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ip(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),y=a.indexOf(l.doc.key)),{type:Wq(l.type),doc:f,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function wj(n,e){return n instanceof Ll&&e instanceof Ll?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pd&&e instanceof Pd&&n._firestore===e._firestore&&KF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Od extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function Ij(n,e,t){n=Yt(n,Wn);const r=Yt(n.firestore,qn),i=ZA(n.converter,e,t);return ey(r,[jA(Cp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function Ej(n,e,t,...r){n=Yt(n,Wn);const i=Yt(n.firestore,qn),a=Cp(i);let l;return l="string"==typeof(e=(0,z.m9)(e))||e instanceof Fl?XF(a,"updateDoc",n._key,e,t,r):JF(a,"updateDoc",n._key,e),ey(i,[l.toMutation(n._key,Qn.exists(!0))])}function bj(n,...e){var t,r,i;n=(0,z.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||YF(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(YF(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,y,E;if(n instanceof Wn)y=Yt(n.firestore,qn),E=N_(n._key.path),g={next:T=>{e[l]&&e[l](iL(y,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Yt(n,Si);y=Yt(T.firestore,qn),E=T._query;const A=new Od(y);g={next:R=>{e[l]&&e[l](new Pd(y,A,T,R))},error:e[l+1],complete:e[l+2]},pj(n._query)}return function(T,A,R,G){const Q=new NA(G),J=new fF(A,Q,R);return T.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return cF(yield J_(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return uF(yield J_(T),J)}))}}(Dr(y),E,f,g)}function ey(n,e){return function(t,r){const i=new Yr;return t.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function VW(n,e,t){return yF.apply(this,arguments)}(yield WF(t),r,i)})),i.promise}(Dr(n),e)}function iL(n,e,t){const r=t.docs.get(e._key),i=new Od(n);return new Ll(n,i,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}const uZ={maxAttempts:5};class Tj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const i=Nd(e,this._firestore),a=ZA(i.converter,t,r),l=jA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof Fl?XF(this._dataReader,"WriteBatch.update",a._key,t,r,i):JF(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new L_(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new Ee(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=Nd(e,this._firestore),r=new zq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const a=i[0];if(a.isFoundDocument())return new TI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new TI(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Nd(e,this._firestore),a=ZA(i.converter,t,r),l=jA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Nd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof Fl?XF(this._dataReader,"Transaction.update",a._key,t,r,i):JF(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Nd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),r=new Od(this._firestore);return super.get(e).then(i=>new Ll(this._firestore,r,t._key,i._document,new Ip(!1,!1),t.converter))}}function sL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ee("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sj(){if(typeof Uint8Array>"u")throw new Ee("unimplemented","Uint8Arrays are not available in this environment.")}function Aj(){if(!function Gz(){return typeof atob<"u"}())throw new Ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){S_=Cn.SDK_VERSION,(0,Cn._registerComponent)(new wr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new qn(new gz(t.getProvider("auth-internal")),new yz(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ee(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vd(f.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Cn.registerVersion)(a6,"3.13.0",n),(0,Cn.registerVersion)(a6,"3.13.0","esm2017")}();class MI{constructor(e){this._delegate=e}static fromBase64String(e){return Aj(),new MI(pc.fromBase64String(e))}static fromUint8Array(e){return Sj(),new MI(pc.fromUint8Array(e))}toBase64(){return Aj(),this._delegate.toBase64()}toUint8Array(){return Sj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oL(n){return function CZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wZ{enableIndexedDbPersistence(e,t){return function vq(n,e){oj(n=Yt(n,qn));const t=Dr(n);if(t._uninitializedComponentsProvider)throw new Ee(ce.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Q_;return sj(t,i,new VF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Cq(n){oj(n=Yt(n,qn));const e=Dr(n);if(e._uninitializedComponentsProvider)throw new Ee(ce.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Q_;return sj(e,r,new BB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wq(n){if(n._initialized&&!n._terminated)throw new Ee(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{yield(t=(0,V.Z)(function*(r){if(!fa.D())return Promise.resolve();const i=r+"main";yield fa.delete(i)}),function(r){return t.apply(this,arguments)})(P2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Mj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){tj(this._delegate,e,t,r)}enableNetwork(){return function Eq(n){return function oq(n){return n.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield HB(n),t=yield zB(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.vu.delete(0),yI(i)}(t)}))}(Dr(n=Yt(n,qn)))}(this._delegate)}disableNetwork(){return function bq(n){return function aq(n){return n.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield HB(n),t=yield zB(n);return e.setNetworkEnabled(!1),(r=(0,V.Z)(function*(i){const a=Ze(i);a.vu.add(0),yield z_(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Dr(n=Yt(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Iq(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function HW(n,e){return EF.apply(this,arguments)}(yield WF(e),t)})),t.promise}(Dr(n=Yt(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function tZ(n,e){return function uq(n,e){const t=new NA(e);return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return r=yield J_(n),i=t,Ze(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return r=yield J_(n),i=t,void Ze(r).ku.delete(i);var r,i}))}}(Dr(n=Yt(n,qn)),YF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,nj(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new $o(this,UA(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function pq(n,e){if(n=Yt(n,wI),ZF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new Pl(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hZ(n,e,t){n=Yt(n,qn);const r=Object.assign(Object.assign({},uZ),t);return function(i){if(i.maxAttempts<1)throw new Ee(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Yr;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){const g=yield function GB(n){return kA(n).then(e=>e.datastore)}(i);new iq(i.asyncQueue,g,l,a,f).run()})),f.promise}(Dr(n),i=>e(new dZ(n,i)),r)}(this._delegate,t=>e(new xj(this,t)))}batch(){return Dr(this._delegate),new Pj(new Tj(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function Tq(n,e){const t=Dr(n=Yt(n,qn)),r=new mq;return function dq(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?gV().encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return jB(g,y);if(g instanceof ArrayBuffer)return jB(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new nq(g,l);var g}(t,_I(e));n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){!function eq(n,e,t){const r=Ze(n);var i;(i=(0,V.Z)(function*(a,l,f){try{const g=yield l.getMetadata();if(yield function(A,R){const G=Ze(A),Q=Tr(R.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",J=>G.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(a.localStore,g))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);f._updateProgress(PB(g));const y=new NW(g,a.localStore,l.serializer);let E=yield l.bc();for(;E;){const A=yield y.zu(E);A&&f._updateProgress(A),E=yield l.bc()}const T=yield y.complete();return yield kl(a,T.Ju,void 0),yield function(A,R){const G=Ze(A);return G.persistence.runTransaction("Save bundle","readwrite",Q=>G.qs.saveBundleMetadata(Q,R))}(a.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return jo("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var A}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield WF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Dq(n,e){return function hq(n,e){return n.asyncQueue.enqueue((0,V.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield FA(n),e)}))}(Dr(n=Yt(n,qn)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class KA extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new MI(new pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $o.forKey(t,this.firestore,null)}}class xj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KA(e)}get(e){const t=bp(e);return this._delegate.get(t).then(r=>new xI(this._firestore,new Ll(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bp(e);return r?(sL("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=bp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}}class Pj{constructor(e){this._delegate=e}set(e,t,r){const i=bp(e);return r?(sL("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=bp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new AI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new PI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Ep(e,new KA(e),t),i.set(t,a)),a}}Ep.INSTANCES=new WeakMap;class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $o(t,new Wn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new $o(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,nj(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Wn&&rj(this._delegate,e)}set(e,t){t=sL("DocumentReference.set",t);try{return t?Ij(this._delegate,e,t):Ij(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ej(this._delegate,e):Ej(this._delegate,e,t,...r)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Xq(n){return ey(Yt(n.firestore,qn),[new L_(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=Oj(e),r=Nj(e,i=>new xI(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Zq(n){n=Yt(n,Wn);const e=Yt(n.firestore,qn),t=Dr(e),r=new Od(e);return function cq(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(r=(0,V.Z)(function*(i,a,l){try{const f=yield function(g,y){const E=Ze(g);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,y))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ee(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=q_(f,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield FA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ll(e,r,n._key,i,new Ip(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Kq(n){n=Yt(n,Wn);const e=Yt(n.firestore,qn);return WB(Dr(e),n._key,{source:"server"}).then(t=>iL(e,n,t))}(this._delegate):function qq(n){n=Yt(n,Wn);const e=Yt(n.firestore,qn);return WB(Dr(e),n._key).then(t=>iL(e,n,t))}(this._delegate),t.then(r=>new xI(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function Oj(n){for(const e of n)if("object"==typeof e&&!oL(e))return e;return{}}function Nj(n,e){var t,r;let i;return i=oL(n[0])?n[0]:oL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wj(this._delegate,e._delegate)}}class PI extends xI{data(e){const t=this._delegate.data(e);return function hz(n,e){n||et()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KA(e)}where(e,t,r){try{return new rs(this.firestore,xd(this._delegate,function Fq(n,e,t){const r=e,i=zA("where",n);return SI._create(i,r,t)}(e,t,r)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,xd(this._delegate,function Lq(n,e="asc"){const t=e,r=zA("orderBy",n);return nL._create(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,xd(this._delegate,function Uq(n){return XB("limit",n),GA._create("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,xd(this._delegate,function Vq(n){return XB("limitToLast",n),GA._create("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,xd(this._delegate,function Bq(...n){return WA._create("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,xd(this._delegate,function jq(...n){return WA._create("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,xd(this._delegate,function $q(...n){return qA._create("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,xd(this._delegate,function Hq(...n){return qA._create("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return KF(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Qq(n){n=Yt(n,Si);const e=Yt(n.firestore,qn),t=Dr(e),r=new Od(e);return function lq(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(r=(0,V.Z)(function*(i,a,l){try{const f=yield DA(i,a,!0),g=new RB(a,f.ir),y=g.sc(f.documents),E=g.applyChanges(y,!1);l.resolve(E.snapshot)}catch(f){const g=q_(f,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield FA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate):"server"===e?.source?function Jq(n){n=Yt(n,Si);const e=Yt(n.firestore,qn),t=Dr(e),r=new Od(e);return qB(t,n._query,{source:"server"}).then(i=>new Pd(e,r,n,i))}(this._delegate):function Yq(n){n=Yt(n,Si);const e=Yt(n.firestore,qn),t=Dr(e),r=new Od(e);return pj(n._query),qB(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate),t.then(r=>new aL(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Oj(e),r=Nj(e,i=>new aL(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bj(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class EZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new PI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new PI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new PI(this._firestore,r))})}isEqual(e){return wj(this._delegate,e._delegate)}}class ty extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $o(this.firestore,e):null}doc(e){try{return new $o(this.firestore,void 0===e?UA(this._delegate):UA(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function eZ(n,e){const t=Yt(n.firestore,qn),r=UA(n),i=ZA(n.converter,e);return ey(t,[jA(Cp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new $o(this.firestore,t))}isEqual(e){return rj(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function bp(n){return Yt(n,Wn)}class cL{constructor(...e){this._delegate=new Fl(...e)}static documentId(){return new cL(dr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof Fl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pZ(){return new QF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tp(e)}static delete(){const e=function fZ(){return new EI("deleteField")}();return e._methodName="FieldValue.delete",new Tp(e)}static arrayUnion(...e){const t=function gZ(...n){return new Pq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tp(t)}static arrayRemove(...e){const t=function mZ(...n){return new Oq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tp(t)}static increment(e){const t=function _Z(n){return new Nq("increment",n)}(e);return t._methodName="FieldValue.increment",new Tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bZ={Firestore:Mj,GeoPoint:VA,Timestamp:Yn,Blob:MI,Transaction:xj,WriteBatch:Pj,DocumentReference:$o,DocumentSnapshot:xI,Query:rs,QueryDocumentSnapshot:PI,QuerySnapshot:aL,CollectionReference:ty,FieldPath:cL,FieldValue:Tp,setLogLevel:function IZ(n){!function dz(n){pd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function DZ(n){(function TZ(n,e){n.INTERNAL.registerComponent(new wr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bZ)))})(n,(e,t)=>new Mj(e,t,new wZ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(gS.Z);var SZ=F(3019);class AZ extends vi.x{constructor(e=1/0,t=1/0,r=z0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)f=g;f&&r.splice(0,f+1)}}}var MZ=F(3020);function Rj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,MZ.B)({connector:()=>new AZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function kj(n,e){return(0,js.m)(e)?(0,Bn.w)(()=>n,e):(0,Bn.w)(()=>n)}class Ul{constructor(e){return e}}class ny{constructor(){return(0,Cn.getApps)()}}const lL=new u.OlP("angularfire2._apps"),PZ={provide:Ul,useFactory:function xZ(n){return n&&1===n.length?n[0]:new Ul((0,Cn.getApp)())},deps:[[new u.FiY,lL]]},OZ={provide:ny,deps:[[new u.FiY,lL]]};function NZ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ul(r)}}let RZ=(()=>{class n{constructor(t){(0,Cn.registerVersion)("angularfire",ic.full,"core"),(0,Cn.registerVersion)("angularfire",ic.full,"app"),(0,Cn.registerVersion)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[PZ,OZ]}),n})();function kZ(n,...e){return{ngModule:RZ,providers:[{provide:lL,useFactory:NZ(n),multi:!0,deps:[u.R0b,u.zs3,Vo,...e]}]}}const FZ=Dl(Cn.initializeApp,!0),uL=new Map,Fj={activated:!1,tokenObservers:[]},LZ={initialized:!1,enabled:!1};function fr(n){return uL.get(n)||Object.assign({},Fj)}function YA(){return LZ}const dL="https://content-firebaseappcheck.googleapis.com/v1",jZ="exchangeDebugToken",Lj={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class HZ{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,V.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function zZ(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ai=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hL(n){if(!fr(n).activated)throw Ai.create("use-before-activation",{appName:n.name})}function XA(n,e){return pL.apply(this,arguments)}function pL(){return pL=(0,V.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(T){throw Ai.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw Ai.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw Ai.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:f.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),pL.apply(this,arguments)}function Uj(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dL}/projects/${t}/apps/${r}:${jZ}?key=${i}`,body:{debug_token:e}}}const ZZ="firebase-app-check-database",KZ=1,OI="firebase-app-check-store";let eM=null;function gL(){return gL=(0,V.Z)(function*(n,e){const r=(yield function Bj(){return eM||(eM=new Promise((n,e)=>{try{const t=indexedDB.open(ZZ,KZ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ai.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(OI,{keyPath:"compositeKey"})}}catch(t){e(Ai.create("storage-open",{originalErrorMessage:t?.message}))}}),eM)}()).transaction(OI,"readwrite"),a=r.objectStore(OI).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var y;f(Ai.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),gL.apply(this,arguments)}const NI=new Ir.Yd("@firebase/app-check");function yL(n,e){return(0,z.hl)()?function QZ(n,e){return function jj(n,e){return gL.apply(this,arguments)}(function Hj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{NI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CL(){return YA().enabled}function wL(){return IL.apply(this,arguments)}function IL(){return IL=(0,V.Z)(function*(){const n=YA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),IL.apply(this,arguments)}const rK={error:"UNKNOWN_ERROR"};function iK(n){return z.US.encodeString(JSON.stringify(n),!1)}function tM(n){return EL.apply(this,arguments)}function EL(){return EL=(0,V.Z)(function*(n,e=!1){const t=n.app;hL(t);const r=fr(t);let a,i=r.token;if(i&&!ry(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(ry(g)?i=g:yield yL(t,void 0))}if(!e&&i&&ry(i))return{token:i.token};let f,l=!1;if(CL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=XA(Uj(t,yield wL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield yL(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield fr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?NI.warn(g.message):NI.error(g),a=g}return i?a?f=ry(i)?{token:i.token,internalError:a}:qj(a):(f={token:i.token},r.token=i,yield yL(t,i)):f=qj(a),l&&function Wj(n,e){const t=fr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),EL.apply(this,arguments)}function bL(){return bL=(0,V.Z)(function*(n){const e=n.app;hL(e);const{provider:t}=fr(e);if(CL()){const r=yield wL(),{token:i}=yield XA(Uj(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),bL.apply(this,arguments)}function DL(n,e){const t=fr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Gj(n){const{app:e}=n,t=fr(e);let r=t.tokenRefresher;r||(r=function sK(n){const{app:e}=n;return new HZ((0,V.Z)(function*(){let r;if(r=fr(e).token?yield tM(n,!0):yield tM(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=fr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Lj.RETRIAL_MIN_WAIT,Lj.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ry(n){return n.expireTimeMillis-Date.now()>0}function qj(n){return{token:iK(rK),error:n}}class oK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fr(this.app);for(const t of e)DL(this.app,t.next);return Promise.resolve()}}const t7="app-check-internal";!function CK(){Vi(new wr.wA("app-check",n=>function aK(n,e){return new oK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(t7).initialize()})),Vi(new wr.wA(t7,n=>function cK(n){return{getToken:e=>tM(n,e),getLimitedUseToken:()=>function zj(n){return bL.apply(this,arguments)}(n),addTokenListener:e=>function TL(n,e,t,r){const{app:i}=n,a=fr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&ry(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Gj(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Gj(n))}(n,"INTERNAL",e),removeTokenListener:e=>DL(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),wi("@firebase/app-check","0.8.0")}();class Dp{constructor(){return ud("app-check")}}typeof window<"u"&&window,F(120);const r7=new u.OlP("angularfire2.auth.use-emulator"),i7=new u.OlP("angularfire2.auth.settings"),s7=new u.OlP("angularfire2.auth.tenant-id"),o7=new u.OlP("angularfire2.auth.langugage-code"),a7=new u.OlP("angularfire2.auth.use-device-language"),c7=new u.OlP("angularfire.auth.persistence"),l7=(n,e,t,r,i,a,l,f)=>(0,ro.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))g.settings[y]=E;return f&&g.setPersistence(f),g},[t,r,i,a,l,f]);let PL=(()=>{class n{constructor(t,r,i,a,l,f,g,y,E,T,A,R){const G=new vi.x,Q=(0,lt.of)(void 0).pipe((0,Jf.Q)(l.outsideAngular),(0,Bn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8661)))),(0,wt.U)(()=>(0,ro.on)(t,a,r)),(0,wt.U)(J=>l7(J,a,f,y,E,T,g,A)),Rj({bufferSize:1,refCount:!1}));if(_i(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{Q.pipe(nr()).subscribe();const Te=Q.pipe((0,Bn.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),ws,Rj({bufferSize:1,refCount:!1})),He=Q.pipe((0,Bn.w)(Ye=>new ni.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))})))),Re=Q.pipe((0,Bn.w)(Ye=>new ni.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))}))));this.authState=Te.pipe(kj(He),(0,u_.R)(l.outsideAngular),(0,Jf.Q)(l.insideAngular)),this.user=Te.pipe(kj(Re),(0,u_.R)(l.outsideAngular),(0,Jf.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Bn.w)(Ye=>Ye?(0,fn.D)(Ye.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe((0,Bn.w)(Ye=>Ye?(0,fn.D)(Ye.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,SZ.T)(Te,G,this.authState.pipe(Cr(Ye=>!Ye))).pipe((0,wt.U)(Ye=>Ye?.user?Ye:null),(0,u_.R)(l.outsideAngular),(0,Jf.Q)(l.insideAngular))}return(0,ro.pX)(this,Q,a,{spy:{apply:(J,Te,He)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&He.then(Re=>G.next(Re))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ro.Dh),u.LFG(ro.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vo),u.LFG(r7,8),u.LFG(i7,8),u.LFG(s7,8),u.LFG(o7,8),u.LFG(a7,8),u.LFG(c7,8),u.LFG(Dp,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function u7(n,e){return function DK(n,e=d1){return new ni.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function OL(n,e){return u7(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function rM(n,e){return OL(n,e).pipe(Ra(void 0),_w(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const g=i.find(E=>E.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function d7(n,e,t){return rM(n,t).pipe(Yo((r,i)=>function AK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function MK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return NL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return NL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,pk.x)(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function NL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function h7(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class f7{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ra(void 0),_w(),Cr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),ws)}auditTrail(e){return this.stateChanges(e).pipe(Yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h7(e);return d7(this.query,t,this.afs.schedulers.outsideAngular).pipe(ws)}valueChanges(e={}){return OL(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ws)}get(e){return(0,fn.D)(this.query.get(e)).pipe(ws)}add(e){return this.ref.add(e)}doc(e){return new p7(this.ref.doc(e),this.afs)}}class p7{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=g7(r,t);return new f7(i,a,this.afs)}snapshotChanges(){return function SK(n,e){return u7(n,e).pipe(Ra(void 0),_w(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ws)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(ws)}}class xK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rM(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Cr(t=>t.length>0),ws):rM(this.query,this.afs.schedulers.outsideAngular).pipe(ws)}auditTrail(e){return this.stateChanges(e).pipe(Yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h7(e);return d7(this.query,t,this.afs.schedulers.outsideAngular).pipe(ws)}valueChanges(e={}){return OL(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ws)}get(e){return(0,fn.D)(this.query.get(e)).pipe(ws)}}const PK=new u.OlP("angularfire2.enableFirestorePersistence"),OK=new u.OlP("angularfire2.firestore.persistenceSettings"),NK=new u.OlP("angularfire2.firestore.settings"),RK=new u.OlP("angularfire2.firestore.use-emulator");function g7(n,e=(t=>t)){return{query:e(n),ref:n}}let iM=(()=>{class n{constructor(t,r,i,a,l,f,g,y,E,T,A,R,G,Q,J,Te,He){this.schedulers=g;const Re=(0,ro.on)(t,f,r),Ye=E;T&&l7(Re,f,A,G,Q,J,R,Te),[this.firestore,this.persistenceEnabled$]=(0,ro.cc)(`${Re.name}.firestore`,"AngularFirestore",Re.name,()=>{const gt=f.runOutsideAngular(()=>Re.firestore());if(a&&gt.settings(a),Ye&&gt.useEmulator(...Ye),i&&!_i(l)){const At=()=>{try{return(0,fn.D)(gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Sr){return typeof console<"u"&&console.warn(Sr),(0,lt.of)(!1)}};return[gt,f.runOutsideAngular(At)]}return[gt,(0,lt.of)(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=g7(i,r),f=this.schedulers.ngZone.run(()=>a);return new f7(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new xK(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new p7(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ro.Dh),u.LFG(ro.xv,8),u.LFG(PK,8),u.LFG(NK,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vo),u.LFG(OK,8),u.LFG(RK,8),u.LFG(PL,8),u.LFG(r7,8),u.LFG(i7,8),u.LFG(s7,8),u.LFG(o7,8),u.LFG(a7,8),u.LFG(c7,8),u.LFG(Dp,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var m7=F(6710);let is=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new vr.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,V.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new m7.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,V.Z)(function*(){try{yield t.afAuth.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var i=this;return(0,V.Z)(function*(){var a;i.db.collection("users").doc(t.user.uid).get().pipe(on(1)).subscribe({next:(a=(0,V.Z)(function*(l){if(l.exists){const f=l.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return a.apply(this,arguments)}),error:a=>{console.error(a)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(PL),u.LFG(iM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ao=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(ao||{});class Nn{}Nn.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(ao.NotDefined);const a=i.byteLength;let l=2;for(;l<a;){const f=i.getUint16(l,!1);if(l+=2,65505===f){if(1165519206!==i.getUint32(l+=2,!1))return e(ao.NotJpeg);const g=18761===i.getUint16(l+=6,!1);l+=i.getUint32(l+4,g);const y=i.getUint16(l,g);l+=2;for(let E=0;E<y;E++)if(274===i.getUint16(l+12*E,g))return e(i.getUint16(l+12*E+8,g))}else{if(65280!=(65280&f))break;l+=i.getUint16(l,!1)}}return e(ao.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(ao.Default)}}),Nn.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(a||l).then(f=>f?Nn.generateUploadInputNative(window.document,e,t):Nn.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],y=g.map(A=>Nn.getOrientation(A)),E=g.map(A=>Nn.fileToDataURL(A));let T=[];Promise.all(y).then(A=>(T=A,Promise.all(E))).then(A=>{const R=A.map((G,Q)=>({image:G.dataUrl,orientation:T[Q],fileName:G.fileName}));r(e?R:R[0])})}).catch(f=>i(f))}),Nn.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),Nn.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");n.setStyle(l,"display","none"),n.setProperty(l,"type","file"),n.setProperty(l,"accept","image/*"),e&&n.setProperty(l,"multiple","true"),n.listen(l,"click",f=>{f.target.value=""}),n.listen(l,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),l.click()})},Nn.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");l.id="upload-input"+new Date,l.style.display="none",l.setAttribute("type","file"),l.setAttribute("accept","image/*"),e&&l.setAttribute("multiple","true"),n.body.appendChild(l),l.addEventListener("change",()=>{r=!0,i(l.files),n.body.removeChild(n.getElementById(l.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(l.id)&&(a(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(l.id)))},300)},{once:!0}),l.click()})},Nn.compress=(n,e,t,r=50,i=50,a=0,l=0)=>new Promise(function(f,g){i/=100,r/=100;const y=new Image;y.onload=()=>{const E=t.createElement("canvas"),T=E.getContext("2d");if(!T)return g("No canvas context available");let A=y.naturalWidth,R=y.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===ao.Right||e===ao.Left)){const Re=A;A=R,R=Re}r=Math.min(r,a?a/A:1,l?l/R:1),E.width=A*r,E.height=R*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===ao.Up?T.drawImage(y,0,0,E.width,E.height):e===ao.Right?(T.save(),T.rotate(90*J),T.translate(0,-E.width),T.drawImage(y,0,0,E.height,E.width),T.restore()):e===ao.Left?(T.save(),T.rotate(-90*J),T.translate(-E.width,0),T.drawImage(y,0,0,E.height,E.width),T.restore()):e===ao.Down?(T.save(),T.rotate(180*J),T.translate(-E.width,-E.height),T.drawImage(y,0,0,E.width,E.height),T.restore()):T.drawImage(y,0,0,E.width,E.height);const Te=n.substr(5,n.split(";")[0].length-5),He=E.toDataURL(Te,i);f(He)},y.onerror=E=>g(E),y.src=n}),Nn.byteCount=n=>encodeURI(n).split(/%..|./).length-1,Nn.getImageMaxSize=function(){var n=(0,V.Z)(function*(e,t,r,i=!1){const l=y=>(y/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield Nn.uploadFile(r,!1,i);let g;for(let y=0;y<10;y++){const E=Nn.byteCount(f.image);g=yield Nn.compress(f.image,f.orientation,r,50,100);const T=Nn.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",l(E),"MB to",l(T),"MB"),T>=E)throw 0===y?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",l(E),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",l(E),"MB large"),{...f,image:g});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",l(T),"MB large"),{...f,image:g};if(9===y)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",l(E),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",l(T),"MB large. Trying another time after",y+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let FK=(()=>{class n{constructor(t){this.DOC_ORIENTATION=ao,this.render=t.createRenderer(null,null)}byteCount(t){return Nn.byteCount(t)}getOrientation(t){return Nn.getOrientation(t)}uploadFile(){return Nn.uploadFile(this.render,!1)}uploadMultipleFiles(){return Nn.uploadFile(this.render,!0)}uploadFileOrReject(){return Nn.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return Nn.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,a=50,l=0,f=0){return Nn.compress(t,r,this.render,i,a,l,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return Nn.getImageMaxSize(t,r,this.render,i).then(a=>a.image).catch(a=>{throw a.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return Nn.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iy=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.imageCompress=i,this._posts$=new vr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r?.user?.uid).valueChanges().pipe(on(1)),a=yield il(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.user.uid,...a.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(on(1),bn(function(){var f=(0,V.Z)(function*(g){t._posts$.next([...g])});return function(g){return f.apply(this,arguments)}}()))})()}toggleLike(t,r){var i=this;return(0,V.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,V.Z)(function*(){return new Promise(function(){var i=(0,V.Z)(function*(a,l){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(E=>E._id),t.likedByUsers.push(f.user.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]});const g=r._posts$.value,y=g.findIndex(E=>E._id===t._id);g.splice(y,1,t),r._posts$.next([...g]),a("Add like done")}catch(f){throw l("Add like failed:"),f}});return function(a,l){return i.apply(this,arguments)}}())})()}removeLike(t){var r=this;return(0,V.Z)(function*(){return new Promise(function(){var i=(0,V.Z)(function*(a,l){try{const f=u1(t),y=r.authService.getLoggedInUser().user.uid,E=f.likedByUsers.findIndex(G=>G._id===y);f.likedByUsers.splice(E,1),f.likedByUsers=f.likedByUsers.map(G=>G._id),yield r.db.collection("posts").doc(f._id).update({likedByUsers:[...f.likedByUsers]});const T=r._posts$.value,A=T.findIndex(G=>G._id===t._id);t.likedByUsers.splice(E,1);const R={...t,likedByUsers:[...t.likedByUsers]};T.splice(A,1,R),r._posts$.next([...T]),a("Remove like done")}catch(f){throw a("Remove like failed!"),f}});return function(a,l){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,V.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();console.log("orientation",i),console.log("Size in bytes of the uploaded image was:",t.imageCompress.byteCount(r));const a=yield t.imageCompress.compressFile(r,i,50,50);return console.log("Size in bytes after compression is now:",t.imageCompress.byteCount(a)),a}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,V.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.user.uid;const a=r.db.collection("users").doc(i.user.uid).valueChanges().pipe(on(1)),l=yield il(a);t.creatorFullName=i.user.displayName||l.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,V.Z)(function*(){t.createdAt=Date.now();const a=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(a.id).update({_id:a.id,parentId:a.id})})()}_makeId(t=5){let r="";for(let a=0;a<t;a++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),Ko(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(iM),u.LFG(is),u.LFG(FK))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sM(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let l,a=!1;n.subscribe({next:f=>{l=f,a=!0},error:i,complete:()=>{a?r(l):t?r(e.defaultValue):i(new Gs)}})})}let _7=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,i){var a=this;return(0,V.Z)(function*(){t?yield a.addFollow(r,i):yield a.removeFollow(r,i)})()}addFollow(t,r){var i=this;return(0,V.Z)(function*(){var y;i.authService.loggedInUser$.pipe(on(1)).subscribe({next:(y=(0,V.Z)(function*(E){yield i.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,E?.user?.uid]})}),function(T){return y.apply(this,arguments)})});const a=i.authService.loggedInUser$.pipe(on(1)),l=yield sM(a),f=i.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(on(1)),g=yield sM(f);yield i.db.collection("users").doc(g._id).update({followingUsers:[...g.followingUsers,t._id]})})()}removeFollow(t,r){var i=this;return(0,V.Z)(function*(){const a=i.authService.loggedInUser$.pipe(on(1)),l=yield sM(a),f=i.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(on(1)),g=yield sM(f),y=u1(t.followedByUsers),E=y.findIndex(A=>A===l?.user?.uid);if(-1===E)return;y.splice(E,1),yield i.db.collection("users").doc(t._id).update({followedByUsers:y});const T=g.followingUsers.findIndex(A=>A===t._id);g.followingUsers.splice(T,1),yield i.db.collection("users").doc(g._id).update({followingUsers:g.followingUsers})})()}getUsers(t){var r=this;return(0,V.Z)(function*(){if(t.account){const i=r.db.collection("users").valueChanges();let a=yield il(i);const l=new RegExp(t.account,"i");return a=a.filter(f=>l.test(f.fullName)),(0,lt.of)(a)}return r.db.collection("users").valueChanges()})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(is),u.LFG(iM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y7=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,V.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const a=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(a.id).update({_id:a.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,V.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(iM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function UK(n,e){if(1&n&&(u.TgZ(0,"div",1)(1,"ul"),u.YNc(2,LK,2,1,"li",2),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",t.creator._id!==t.loggedInUser.user.uid)}}let VK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield il(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a.user.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&u.YNc(0,UK,3,1,"div",0),2&r&&u.Q6J("ngIf",i.loggedInUser)},dependencies:[Ur],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),RL=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function BK(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"more-options-modal",10),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("creator",t.creator)}}function jK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1)(1,"div",2),u._UZ(2,"img",3),u.TgZ(3,"h5"),u._uU(4),u.TgZ(5,"span"),u._uU(6),u.ALo(7,"timeAgo"),u.qZA()()(),u.TgZ(8,"button",4),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),u.O4$(),u.TgZ(9,"svg",5),u._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),u.qZA(),u.YNc(13,BK,1,2,"more-options-modal",9),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Q6J("src",t.creator.imgUrl,u.LSH),u.xp6(2),u.hij(" ",t.creator.fullName," "),u.xp6(2),u.hij("\u2022 ",u.lcZ(7,4,t.post.createdAt),""),u.xp6(7),u.Q6J("ngIf",t.isMoreOptionsModalShown)}}let $K=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&u.YNc(0,jK,14,6,"div",0),2&r&&u.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[Ur,VK,RL],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative}"]})}return n})();const HK=function(n){return{"btn-toggle-follow":!0,following:n}};function zK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.VKq(2,HK,t.isFollowClicked)),u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function GK(n,e){if(1&n&&(u.TgZ(0,"li"),u._UZ(1,"img",1),u.TgZ(2,"h4"),u._uU(3),u.qZA(),u.YNc(4,zK,2,4,"button",2),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.user.imgUrl,u.LSH),u.xp6(2),u.Oqu(t.user.fullName),u.xp6(1),u.Q6J("ngIf",t.user._id!==t.loggedInUser.user.uid)}}let WK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield il(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(r,i){1&r&&u.YNc(0,GK,5,3,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[wa,Ur],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function qK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-user-row",7),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("post",r.post)("user",t)}}let ZK=(()=>{class n{constructor(t){this.renderer=t,this.onToggleLikedByUsersModal=new u.vpe,this.onToggleFollow=new u.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable")}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"article",0)(1,"div",1)(2,"h3"),u._uU(3,"Likes"),u.qZA(),u.TgZ(4,"button",2),u.NdJ("click",function(){return i.toggleLikedByUsersModal()}),u.O4$(),u.TgZ(5,"svg",3)(6,"title"),u._uU(7,"Close"),u.qZA(),u._UZ(8,"polyline",4)(9,"line",5),u.qZA()()(),u.kcU(),u.TgZ(10,"ul"),u.YNc(11,qK,1,2,"liked-by-user-row",6),u.qZA()()),2&r&&(u.xp6(11),u.Q6J("ngForOf",i.post.likedByUsers))},dependencies:[fo,WK],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),v7=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),Sp=(()=>{class n extends v7{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const gc=new u.OlP("NgValueAccessor"),QK={provide:gc,useExisting:(0,u.Gpc)(()=>Ap),multi:!0},XK=new u.OlP("CompositionEventMode");let Ap=(()=>{class n extends v7{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JK(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(XK,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&u.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[u._Bn([QK]),u.qOj]})}return n})();const Wi=new u.OlP("NgValidators"),kd=new u.OlP("NgAsyncValidators");function x7(n){return null!=n}function P7(n){return(0,u.QGY)(n)?(0,fn.D)(n):n}function O7(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function N7(n,e){return e.map(t=>t(n))}function R7(n){return n.map(e=>function tY(n){return!n.validate}(e)?e:t=>e.validate(t))}function kL(n){return null!=n?function k7(n){if(!n)return null;const e=n.filter(x7);return 0==e.length?null:function(t){return O7(N7(t,e))}}(R7(n)):null}function FL(n){return null!=n?function F7(n){if(!n)return null;const e=n.filter(x7);return 0==e.length?null:function(t){return function KK(...n){const e=(0,Hs.jO)(n),{args:t,keys:r}=yn(n),i=new ni.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let g=l,y=l;for(let E=0;E<l;E++){let T=!1;(0,pu.Xf)(t[E]).subscribe((0,ri.x)(a,A=>{T||(T=!0,y--),f[E]=A},()=>g--,void 0,()=>{(!g||!T)&&(y||a.next(r?zs(r,f):f),a.complete())}))}});return e?i.pipe(Bc(e)):i}(N7(t,e).map(P7)).pipe((0,wt.U)(O7))}}(R7(n)):null}function L7(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LL(n){return n?Array.isArray(n)?n:[n]:[]}function aM(n,e){return Array.isArray(n)?n.includes(e):n===e}function B7(n,e){const t=LL(e);return LL(n).forEach(i=>{aM(t,i)||t.push(i)}),t}function j7(n,e){return LL(e).filter(t=>!aM(n,t))}class $7{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ss extends $7{get formDirective(){return null}get path(){return null}}class Fd extends $7{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class H7{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let RI=(()=>{class n extends H7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Fd,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]})}return n})(),cM=(()=>{class n extends H7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ss,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]})}return n})();const kI="VALID",uM="INVALID",sy="PENDING",FI="DISABLED";function BL(n){return(dM(n)?n.validators:n)||null}function jL(n,e){return(dM(e)?e.asyncValidators:n)||null}function dM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class q7{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kI}get invalid(){return this.status===uM}get pending(){return this.status==sy}get disabled(){return this.status===FI}get enabled(){return this.status!==FI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B7(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B7(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j7(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j7(e,this._rawAsyncValidators))}hasValidator(e){return aM(this._rawValidators,e)}hasAsyncValidator(e){return aM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kI||this.status===sy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?FI:kI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sy,this._hasOwnPendingAsyncValidator=!0;const t=P7(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?FI:this.errors?uM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sy)?sy:this._anyControlsHaveStatus(uM)?uM:kI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function sY(n){return Array.isArray(n)?kL(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function oY(n){return Array.isArray(n)?FL(n):n||null}(this._rawAsyncValidators)}}class $L extends q7{constructor(e,t,r){super(BL(t),jL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function W7(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function G7(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Mp=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>LI}),LI="always";function UI(n,e,t=LI){HL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function lY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Z7(n,e)})}(n,e),function dY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Z7(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HL(n,e){const t=function U7(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(L7(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function V7(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(L7(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();pM(e._rawValidators,i),pM(e._rawAsyncValidators,i)}function Z7(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const mY={provide:ss,useExisting:(0,u.Gpc)(()=>oy)},VI=(()=>Promise.resolve())();let oy=(()=>{class n extends ss{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new $L({},kL(t),FL(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){VI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),UI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){VI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){VI.then(()=>{const r=this._findContainer(t.path),i=new $L({});(function K7(n,e){HL(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){VI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){VI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Y7(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Wi,10),u.Y36(kd,10),u.Y36(Mp,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([mY]),u.qOj]})}return n})();function Q7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function J7(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const X7=class extends q7{constructor(e=null,t,r){super(BL(t),jL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=J7(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Q7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Q7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){J7(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vY={provide:Fd,useExisting:(0,u.Gpc)(()=>ay)},n9=(()=>Promise.resolve())();let ay=(()=>{class n extends Fd{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new X7,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function WL(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Ap?t=a:function pY(n){return Object.getPrototypeOf(n.constructor)===Sp}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function GL(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){UI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){n9.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.VuI)(r);n9.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hM(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ss,9),u.Y36(Wi,10),u.Y36(kd,10),u.Y36(gc,10),u.Y36(u.sBO,8),u.Y36(Mp,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([vY]),u.qOj,u.TTD]})}return n})(),mM=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),i9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const qL=new u.OlP("NgModelWithFormControlWarning");let w9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[i9]})}return n})(),zY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mp,useValue:t.callSetDisabledState??LI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[w9]})}return n})(),GY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Mp,useValue:t.callSetDisabledState??LI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[w9]})}return n})();function WY(n,e){if(1&n&&(u.TgZ(0,"li",10),u._UZ(1,"img",11),u.TgZ(2,"div",12)(3,"div",13)(4,"span",14),u._uU(5),u.qZA(),u.TgZ(6,"span",15),u._uU(7),u.ALo(8,"timeAgo"),u.qZA()(),u.TgZ(9,"p"),u._uU(10),u.qZA(),u.TgZ(11,"button",16),u._uU(12,"Reply"),u.qZA()()()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("src",t.createdByUserId.imgUrl,u.LSH),u.xp6(4),u.Oqu(t.createdByUserId.fullName),u.xp6(2),u.Oqu(u.lcZ(8,4,t.createdAt)),u.xp6(3),u.hij(" ",t.message," ")}}let qY=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new u.vpe,this.onToggleCommentsModal=new u.vpe,this.onGetCommentsLength=new u.vpe,this.comment={_id:"",parentId:"",postId:"",createdByUserId:"",message:"",createdAt:0}}ngOnInit(){var t=this;this.renderer.addClass(document.body,"body-unscrollable"),this.comment.postId=this.post._id,this.comment.createdByUserId=this.loggedInUser.user.uid,this.commentsSubscription=this.postService.getCommentsByPostId(this.post._id).pipe((0,Bn.w)(function(){var r=(0,V.Z)(function*(i){const a=i.map(function(){var l=(0,V.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),y=yield il(g);return f.createdByUserId=y,f});return function(f){return l.apply(this,arguments)}}());return yield Promise.all(a)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.comments=r,this.onGetCommentsLength.emit(this.comments.length)}})}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(iy),u.Y36(is),u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:13,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],["class","comment",4,"ngFor","ngForOf"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"btn-add-comment",3,"click"],[1,"comment"],["alt","user",3,"src"],[1,"content"],[1,"inner-container"],[1,"fullname"],[1,"created-at"],[1,"btn-reply"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4)(5,"div",5)(6,"ul"),u.YNc(7,WY,13,6,"li",6),u.qZA()()(),u.TgZ(8,"form"),u._UZ(9,"img",7),u.TgZ(10,"input",8),u.NdJ("ngModelChange",function(l){return i.comment.message=l}),u.qZA(),u.TgZ(11,"button",9),u.NdJ("click",function(){return i.addComment()}),u._uU(12,"Post"),u.qZA()()()),2&r&&(u.xp6(7),u.Q6J("ngForOf",i.comments),u.xp6(2),u.Q6J("src",i.loggedInUser.user.photoURL,u.LSH),u.xp6(1),u.Q6J("ngModel",i.comment.message))},dependencies:[fo,mM,Ap,RI,cM,ay,oy,RL],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:30;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding-block-end:5.5em;height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:3.5em;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}"]})}return n})();function ZY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",22)(2,"title"),u._uU(3,"Like"),u.qZA(),u._UZ(4,"path",23),u.qZA()()}}function KY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",24)(2,"title"),u._uU(3,"Unlike"),u.qZA(),u._UZ(4,"path",25),u.qZA()()}}function YY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span"),u._uU(1," and "),u.TgZ(2,"span",31),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),u._uU(3),u.ALo(4,"number"),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.AsE("",u.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function QY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-users-list",32),u.NdJ("onToggleLikedByUsersModal",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(3);u.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function JY(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",26),u._UZ(1,"img",27),u.TgZ(2,"p"),u._uU(3," Liked by "),u.TgZ(4,"span",28),u._uU(5),u.qZA(),u.YNc(6,YY,5,4,"span",29),u.qZA(),u.YNc(7,QY,1,2,"liked-by-users-list",30),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("src",t.post.likedByUsers[0].imgUrl,u.LSH),u.xp6(4),u.Oqu(t.post.likedByUsers[0].fullName),u.xp6(1),u.Q6J("ngIf",t.post.likedByUsers.length>1),u.xp6(1),u.Q6J("ngIf",t.isLikedByUsersModalShown)}}function XY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",37),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(4);return u.KtG(i.isMoreClicked=!i.isMoreClicked)}),u._uU(1," more "),u.qZA()}}function eQ(n,e){if(1&n&&(u.TgZ(0,"p")(1,"span",35),u._uU(2),u.qZA(),u._uU(3),u.ALo(4,"slice"),u.YNc(5,XY,2,0,"button",36),u.qZA()),2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.AsE(" ",u.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),u.xp6(2),u.Q6J("ngIf",t.post.content.length>=120)}}function tQ(n,e){if(1&n&&(u.TgZ(0,"p")(1,"span",35),u._uU(2),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.hij(" ",t.post.content," ")}}function nQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View ",t.commentsLength," comment")}}function rQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View all ",t.commentsLength," comments")}}function iQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",33),u.YNc(1,eQ,6,8,"p",29),u.YNc(2,tQ,4,2,"p",29),u.TgZ(3,"p",34),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())}),u.YNc(4,nQ,2,1,"span",29),u.YNc(5,rQ,2,1,"span",29),u.qZA()()}if(2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",!t.isMoreClicked),u.xp6(1),u.Q6J("ngIf",t.isMoreClicked),u.xp6(2),u.Q6J("ngIf",1===t.commentsLength),u.xp6(1),u.Q6J("ngIf",t.commentsLength>=2)}}function sQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"comments-modal",38),u.NdJ("onAddComment",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddComment.emit(i))})("onToggleCommentsModal",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.commentsLength=i)}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function oQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",1)(1,"post-header",2),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))}),u.qZA(),u._UZ(2,"img",3),u.TgZ(3,"div",4)(4,"div",5)(5,"div",6),u.YNc(6,ZY,5,0,"button",7),u.YNc(7,KY,5,0,"button",7),u.TgZ(8,"button",8),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onToggleCommentModal())}),u.O4$(),u.TgZ(9,"svg",9)(10,"title"),u._uU(11,"CommentModel"),u.qZA(),u._UZ(12,"path",10),u.qZA()(),u.kcU(),u.TgZ(13,"button",11),u.O4$(),u.TgZ(14,"svg",12)(15,"title"),u._uU(16,"Share PostModel"),u.qZA(),u._UZ(17,"line",13)(18,"polygon",14),u.qZA()()(),u.kcU(),u.TgZ(19,"button",15),u.O4$(),u.TgZ(20,"svg",16)(21,"title"),u._uU(22,"Save"),u.qZA(),u._UZ(23,"polygon",17),u.qZA()()(),u.YNc(24,JY,8,4,"div",18),u.YNc(25,iQ,6,4,"div",19),u.qZA(),u.YNc(26,sQ,1,2,"comments-modal",20),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),u.xp6(1),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(4),u.Q6J("ngIf",!t.isLikeClicked),u.xp6(1),u.Q6J("ngIf",t.isLikeClicked),u.xp6(17),u.Q6J("ngIf",t.post.likedByUsers.length),u.xp6(1),u.Q6J("ngIf",t.creator),u.xp6(1),u.Q6J("ngIf",t.isCommentModalShown)}}let aQ=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0}ngOnInit(){var t=this;return(0,V.Z)(function*(){if(t.post.likedByUsers.length){const r=t.post.likedByUsers.map(function(){var i=(0,V.Z)(function*(a){const l=t.authService.getUserById(a).pipe(on(1));return yield il(l)});return function(a){return i.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(r)}t.postService.getCommentsByPostId(t.post._id).pipe(on(1)).subscribe({next:r=>{t.commentsLength=r.length}}),t.authService.getUserById(t.post.creatorId).pipe(on(1)).subscribe({next:r=>{t.creator=r,t.post.likedByUsers.find(a=>a._id===t.loggedInUser?.user?.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:u1(this.post),isLikeClicked:this.isLikeClicked}),this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is),u.Y36(iy))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength"]],template:function(r,i){1&r&&u.YNc(0,oQ,27,11,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Ur,$K,ZK,qY,mr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function cQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-card",2),u.NdJ("onToggleLike",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleLike.emit(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))})("onAddNotification",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onAddNotification.emit(i))})("onAddComment",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onAddComment.emit(i))}),u.qZA()}2&n&&u.Q6J("post",e.$implicit)}let lQ=(()=>{class n{constructor(){this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,cQ,1,1,"post-card",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.posts))},dependencies:[fo,aQ],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function uQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-list",3),u.NdJ("onToggleLike",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleLike(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleFollow(i))})("onAddNotification",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddNotification(i))})("onAddComment",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddComment(i))}),u.qZA()}if(2&n){const t=u.oxw().ngIf;u.Q6J("posts",t)}}function dQ(n,e){if(1&n&&(u.TgZ(0,"section",1),u.YNc(1,uQ,1,1,"post-list",2),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.isComponentInitialized)}}let hQ=(()=>{class n{constructor(t,r,i,a){this.postService=t,this.authService=r,this.userService=i,this.notificationService=a,this.isComponentInitialized=!1,this.isToggleLikeProcessing=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){(yield t.postService.getPosts()).pipe(on(1)).subscribe({error:i=>{console.error(i)},complete:()=>{t.posts$=t.postService.posts$,t.isComponentInitialized=!0}})})()}onToggleLike(t){var r=this;return(0,V.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(on(1)).subscribe(function(){var i=(0,V.Z)(function*(a){t.user=a,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(a){return i.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,V.Z)(function*(){const i={sender:r.authService.getLoggedInUser().user.uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){this.postService.addComment(t,r)}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(iy),u.Y36(is),u.Y36(_7),u.Y36(y7))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["home-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngIf"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment"]],template:function(r,i){1&r&&(u.YNc(0,dQ,2,1,"section",0),u.ALo(1,"async")),2&r&&u.Q6J("ngIf",u.lcZ(1,1,i.posts$))},dependencies:[Ur,lQ,Ac],styles:["[_nghost-%COMP%]{display:block;padding-block:2em}"]})}return n})();function fQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onLogInWithEmailAndPassword())}),u.TgZ(1,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.email=i)}),u.qZA(),u.TgZ(2,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.password=i)}),u.qZA(),u.TgZ(3,"button",15),u._uU(4,"Log in"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}function pQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onRegisterWithEmailAndPassword())}),u.TgZ(1,"input",16),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.fullName=i)}),u.qZA(),u.TgZ(2,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.email=i)}),u.qZA(),u.TgZ(3,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.password=i)}),u.qZA(),u.TgZ(4,"button",17),u._uU(5,"Register"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.fullName),u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}let gQ=(()=>{class n{constructor(t,r,i){this.authService=t,this.postService=r,this.router=i,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}onLogInWithGoogle(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(on(1)).subscribe({next:i=>{i&&t.router.navigateByUrl("/")},error:i=>{console.error(i)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(on(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(on(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is),u.Y36(iy),u.Y36(ir))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.YNc(4,fQ,5,2,"form",4),u.YNc(5,pQ,6,3,"form",4),u.kcU(),u.TgZ(6,"p",5),u.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),u._uU(7," Don't you have a user? Register here "),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",function(){return i.onLogInWithGoogle()}),u.O4$(),u.TgZ(9,"svg",7),u._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),u.qZA(),u.kcU(),u.TgZ(14,"span"),u._uU(15,"Log in with Google"),u.qZA()()()),2&r&&(u.xp6(4),u.Q6J("ngIf",i.isLogInFormShown),u.xp6(1),u.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[Ur,mM,Ap,RI,cM,ay,oy],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),mQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"p"),u._uU(1,"message-page works!"),u.qZA())}})}return n})();function _Q(n,e){if(1&n&&(u.TgZ(0,"li",1)(1,"div",2),u._UZ(2,"img",3),u.TgZ(3,"p")(4,"span",4),u._uU(5),u.qZA(),u._uU(6),u.qZA(),u.TgZ(7,"span",5),u._uU(8),u.ALo(9,"timeAgo"),u.qZA()(),u._UZ(10,"img",6),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.s9C("src",t.sender.imgUrl,u.LSH),u.xp6(3),u.Oqu(t.sender.fullName),u.xp6(1),u.hij(" ",t.notification.message," "),u.xp6(2),u.hij(" ",u.lcZ(9,5,t.notification.createdAt),""),u.xp6(2),u.s9C("src",t.notification.madeAt.imgUrl,u.LSH)}}let yQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(on(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&u.YNc(0,_Q,11,7,"li",0),2&r&&u.Q6J("ngIf",i.sender)},dependencies:[Ur,RL],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function vQ(n,e){1&n&&u._UZ(0,"notification-preview",2),2&n&&u.Q6J("notification",e.$implicit)}let CQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:1,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,vQ,1,1,"notification-preview",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.notifications))},dependencies:[fo,yQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function wQ(n,e){1&n&&(u.TgZ(0,"p"),u._uU(1,"You dont have notifications yet!"),u.qZA())}function IQ(n,e){if(1&n&&(u.TgZ(0,"section",1),u._UZ(1,"notification-list",2),u.YNc(2,wQ,2,0,"p",3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("notifications",t.notifications),u.xp6(1),u.Q6J("ngIf",!t.notifications.length)}}let EQ=(()=>{class n{constructor(t,r){this.notificationService=t,this.authService=r}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.notificationService.getNotificationsForUser(t.authService.getLoggedInUser().user.uid).pipe(on(1)).subscribe({next:r=>{t.notifications=r}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(y7),u.Y36(is))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&u.YNc(0,IQ,3,2,"section",0),2&r&&u.Q6J("ngIf",i.notifications)},dependencies:[Ur,CQ],styles:["[_nghost-%COMP%]{padding-block:2em}"]})}return n})();function bQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4)(1,"button",5),u.NdJ("click",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onMediaSelected(i))}),u.TgZ(2,"span"),u._uU(3," Upload photos and videos here "),u.qZA(),u.TgZ(4,"div"),u.O4$(),u.TgZ(5,"svg",6),u._UZ(6,"path",7)(7,"path",8)(8,"path",9),u.qZA()()()()}}const TQ=function(n){return{active:n}};function DQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"article",21),u.NdJ("click",function(){const a=u.CHM(t).$implicit,l=u.oxw(2);return u.KtG(l.onSelectFilterPreview(a.value))}),u.TgZ(1,"span"),u._uU(2),u.qZA(),u._UZ(3,"img",22),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass",u.VKq(6,TQ,t.value===r.post.filterSelected)),u.xp6(2),u.Oqu(t.name),u.xp6(1),u.Tol(t.value),u.MGl("alt","",t," - filter preview"),u.Q6J("src",r.post.imgUrl,u.LSH)}}function SQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isSelectMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",16),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isFormMediaShown=!0)}),u._uU(7," Next "),u.qZA()(),u.TgZ(8,"article",17),u._UZ(9,"img",18),u.qZA(),u.TgZ(10,"div",19),u.YNc(11,DQ,4,8,"article",20),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.Tol(t.post.filterSelected),u.s9C("src",t.post.imgUrl,u.LSH),u.xp6(2),u.Q6J("ngForOf",t.filterPreviews)}}function AQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFormMediaShown=!1,u.KtG(i.isFilterMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onCreatePost())}),u._uU(7," Share "),u.qZA()(),u.TgZ(8,"form")(9,"div",25),u._UZ(10,"img",26),u.TgZ(11,"textarea",27),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.post.content=i)}),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(10),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(1),u.Q6J("ngModel",t.post.content)}}let MQ=(()=>{class n{constructor(t,r){this.postService=t,this.router=r,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],comments:[],filterSelected:"normal"}}onMediaSelected(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,V.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(iy),u.Y36(ir))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0),u.YNc(1,bQ,9,0,"div",1),u.YNc(2,SQ,12,4,"div",2),u.YNc(3,AQ,12,4,"div",3),u.qZA()),2&r&&(u.xp6(1),u.Q6J("ngIf",i.isSelectMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFilterMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFormMediaShown))},dependencies:[wa,fo,Ur,mM,Ap,RI,cM,ay,oy],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;height:100%;font-size:17px;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;gap:2em;position:relative;padding-block-end:1em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;height:70px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const BI=()=>!!(0,u.f3M)(is).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,u.f3M)(ir).navigateByUrl("/login"),!1),xQ=[{path:"",component:hQ,canActivate:[BI]},{path:"login",component:gQ,canActivate:[()=>!(0,u.f3M)(is).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,u.f3M)(ir).navigateByUrl("/"),!1)]},{path:"message",component:mQ,canActivate:[BI]},{path:"notification",component:EQ,canActivate:[BI]},{path:"create-post",component:MQ,canActivate:[BI]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"p"),u._uU(1,"profile works!"),u.qZA())}})}return n})(),canActivate:[BI]}];let PQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[qg.forRoot(xQ,{useHash:!0}),qg]})}return n})();function OQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",31),u.qZA())}function NQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",32),u.qZA())}function RQ(n,e){if(1&n&&u._UZ(0,"img",33),2&n){const t=u.oxw(2);u.Q6J("src",t.user.user.photoURL,u.LSH)}}function kQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",34),u._UZ(1,"path",35)(2,"circle",36),u.qZA())}function FQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",37)(1,"ul")(2,"li",38),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3,"Log out"),u.qZA()()()}}const LQ=function(){return{exact:!0}};function UQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"div",3),u.O4$(),u.TgZ(3,"svg",4),u._UZ(4,"path",5),u.qZA()(),u.kcU(),u.TgZ(5,"nav")(6,"ul")(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8),u.qZA()(),u.kcU(),u.TgZ(10,"li",9),u.O4$(),u.TgZ(11,"svg",10),u._UZ(12,"path",11)(13,"path",12),u.qZA()(),u.kcU(),u.TgZ(14,"li",13,14),u.YNc(16,OQ,2,0,"svg",15),u.YNc(17,NQ,2,0,"svg",15),u.qZA(),u.TgZ(18,"li",16),u.O4$(),u.TgZ(19,"svg",17),u._UZ(20,"path",18)(21,"line",19)(22,"line",20),u.qZA()(),u.kcU(),u.TgZ(23,"li",21),u.YNc(24,RQ,1,1,"img",22),u.YNc(25,kQ,3,0,"ng-template",null,23,u.W1O),u.qZA()()()(),u.TgZ(27,"div",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(28,"svg",25),u._UZ(29,"line",26)(30,"line",27)(31,"line",28),u.qZA(),u.YNc(32,FQ,4,0,"div",29),u.qZA()()}if(2&n){const t=u.MAs(15),r=u.MAs(26),i=u.oxw();u.xp6(7),u.Q6J("routerLinkActiveOptions",u.DdM(6,LQ)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(7),u.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let VQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is),u.Y36(ir))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,UQ,33,7,"section",0),2&r&&u.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Ur,Wg,ef],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function BQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",28),u.qZA())}function jQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",29),u.qZA())}function $Q(n,e){if(1&n&&u._UZ(0,"img",30),2&n){const t=u.oxw(2);u.Q6J("src",t.user.user.photoURL,u.LSH)}}function HQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",31),u._UZ(1,"path",32)(2,"circle",33),u.qZA())}function zQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",34)(1,"ul")(2,"li",35),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3,"Log out"),u.qZA()()()}}const GQ=function(){return{exact:!0}};function WQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA()(),u.kcU(),u.TgZ(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8)(10,"path",9),u.qZA()(),u.kcU(),u.TgZ(11,"li",10,11),u.YNc(13,BQ,2,0,"svg",12),u.YNc(14,jQ,2,0,"svg",12),u.qZA(),u.TgZ(15,"li",13),u.O4$(),u.TgZ(16,"svg",14),u._UZ(17,"path",15)(18,"line",16)(19,"line",17),u.qZA()(),u.kcU(),u.TgZ(20,"li",18),u.YNc(21,$Q,1,1,"img",19),u.YNc(22,HQ,3,0,"ng-template",null,20,u.W1O),u.qZA(),u.TgZ(24,"li",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(25,"svg",22),u._UZ(26,"line",23)(27,"line",24)(28,"line",25),u.qZA(),u.YNc(29,zQ,4,0,"div",26),u.qZA()()()()()}if(2&n){const t=u.MAs(12),r=u.MAs(23),i=u.oxw();u.xp6(4),u.Q6J("routerLinkActiveOptions",u.DdM(6,GQ)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(7),u.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let qQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(is),u.Y36(ir))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,WQ,30,7,"section",0),2&r&&u.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Ur,Wg,ef],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();function ZQ(n,e){if(1&n&&(u.TgZ(0,"li"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.fullName," ")}}let KQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},decls:3,vars:1,consts:[[1,"search-modal"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"ul"),u.YNc(2,ZQ,2,1,"li",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.users))},dependencies:[fo],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}"]})}return n})();function YQ(n,e){if(1&n&&(u._UZ(0,"search-modal",10),u.ALo(1,"async")),2&n){const t=u.oxw();u.Q6J("users",u.lcZ(1,1,t.users$))}}let QQ=(()=>{class n{constructor(t,r){this.router=t,this.userService=r,this.filterBy={account:""},this.isSearchModalShown=!1}ngOnInit(){this.onSearch()}onClickLogo(){this.router.navigateByUrl("/")}onSearch(){var t=this;return(0,V.Z)(function*(){t.users$=yield t.userService.getUsers(t.filterBy)})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ir),u.Y36(_7))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users",4,"ngIf"],[3,"users"]],template:function(r,i){1&r&&(u.TgZ(0,"header",0)(1,"div",1),u.NdJ("click",function(){return i.onClickLogo()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4),u.O4$(),u.TgZ(5,"svg",5)(6,"title"),u._uU(7,"Search"),u.qZA(),u._UZ(8,"path",6)(9,"line",7),u.qZA(),u.kcU(),u.TgZ(10,"input",8),u.NdJ("ngModelChange",function(l){return i.filterBy.account=l})("input",function(){return i.onSearch()})("click",function(){return i.isSearchModalShown=!i.isSearchModalShown}),u.qZA(),u.YNc(11,YQ,2,3,"search-modal",9),u.qZA()()),2&r&&(u.xp6(10),u.Q6J("ngModel",i.filterBy.account),u.xp6(1),u.Q6J("ngIf",i.isSearchModalShown))},dependencies:[Ur,Ap,RI,ay,KQ,Ac],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function JQ(n,e){1&n&&u._UZ(0,"router-outlet")}function XQ(n,e){1&n&&u._UZ(0,"app-header-mobile")}function eJ(n,e){1&n&&u._UZ(0,"aside-menu")}function tJ(n,e){1&n&&(u.TgZ(0,"main",2),u._UZ(1,"router-outlet"),u.qZA())}function nJ(n,e){1&n&&u._UZ(0,"menu-mobile")}let rJ=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Ks&&(t.routerUrl=t.router.url)})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ir),u.Y36(iy))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(u.TgZ(0,"section"),u.YNc(1,JQ,1,0,"router-outlet",0),u.YNc(2,XQ,1,0,"app-header-mobile",0),u.YNc(3,eJ,1,0,"aside-menu",0),u.YNc(4,tJ,2,0,"main",1),u.YNc(5,nJ,1,0,"menu-mobile",0),u.qZA()),2&r&&(u.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),u.xp6(1),u.Q6J("ngIf","/login"===i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl))},dependencies:[Ur,Bh,VQ,qQ,QQ]})}return n})();class _M{}class yM{}class mc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof mc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new mc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof mc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class iJ{encodeKey(e){return I9(e)}encodeValue(e){return I9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const oJ=/%(\d[a-f0-9])/gi,aJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function I9(n){return encodeURIComponent(n).replace(oJ,(e,t)=>aJ[t]??e)}function vM(n){return`${n}`}class Ld{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(l)||[];g.push(f),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(vM):[vM(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ld({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(vM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(vM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function E9(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function b9(n){return typeof Blob<"u"&&n instanceof Blob}function T9(n){return typeof FormData<"u"&&n instanceof FormData}class jI{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function lJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new mc),this.context||(this.context=new cJ),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new Ld,this.urlWithParams=t}serializeBody(){return null===this.body?null:E9(this.body)||b9(this.body)||T9(this.body)||function uJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ld?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||T9(this.body)?null:b9(this.body)?this.body.type||null:E9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ld?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),g)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),y)),new jI(t,r,a,{params:y,headers:g,context:E,reportProgress:f,responseType:i,withCredentials:l})}}var cy=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(cy||{});class e4{constructor(e,t=200,r="OK"){this.headers=e.headers||new mc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class t4 extends e4{constructor(e={}){super(e),this.type=cy.ResponseHeader}clone(e={}){return new t4({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ly extends e4{constructor(e={}){super(e),this.type=cy.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ly({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class D9 extends e4{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function n4(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dJ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof jI)a=t;else{let g,y;g=i.headers instanceof mc?i.headers:new mc(i.headers),i.params&&(y=i.params instanceof Ld?i.params:new Ld({fromObject:i.params})),a=new jI(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,lt.of)(a).pipe(Eo(g=>this.handler.handle(g)));if(t instanceof jI||"events"===i.observe)return l;const f=l.pipe(Cr(g=>g instanceof ly));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,wt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ld).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,n4(i,r))}post(t,r,i={}){return this.request("POST",t,n4(i,r))}put(t,r,i={}){return this.request("PUT",t,n4(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(_M))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function M9(n,e){return e(n)}function fJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const gJ=new u.OlP(""),$I=new u.OlP(""),x9=new u.OlP("");function mJ(){let n=null;return(e,t)=>{null===n&&(n=((0,u.f3M)(gJ,{optional:!0})??[]).reduceRight(fJ,M9));const r=(0,u.f3M)(u.HDt),i=r.add();return n(e,t).pipe(Fa(()=>r.remove(i)))}}let P9=(()=>{class n extends _M{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,u.f3M)(u.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get($I),...this.injector.get(x9,[])]));this.chain=i.reduceRight((a,l)=>function pJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),M9)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Fa(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(yM),u.LFG(u.lqb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const CJ=/^\)\]\}',?\n/;let N9=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new u.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,fn.D)(r.\u0275loadImpl()):(0,lt.of)(null)).pipe((0,Bn.w)(()=>new ni.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Q,J)=>l.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&l.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();l.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const y=()=>{if(null!==g)return g;const Q=l.statusText||"OK",J=new mc(l.getAllResponseHeaders()),Te=function wJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return g=new t4({headers:J,status:l.status,statusText:Q,url:Te}),g},E=()=>{let{headers:Q,status:J,statusText:Te,url:He}=y(),Re=null;204!==J&&(Re=typeof l.response>"u"?l.responseText:l.response),0===J&&(J=Re?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Re){const gt=Re;Re=Re.replace(CJ,"");try{Re=""!==Re?JSON.parse(Re):null}catch(At){Re=gt,Ye&&(Ye=!1,Re={error:At,text:Re})}}Ye?(a.next(new ly({body:Re,headers:Q,status:J,statusText:Te,url:He||void 0})),a.complete()):a.error(new D9({error:Re,headers:Q,status:J,statusText:Te,url:He||void 0}))},T=Q=>{const{url:J}=y(),Te=new D9({error:Q,status:l.status||0,statusText:l.statusText||"Unknown Error",url:J||void 0});a.error(Te)};let A=!1;const R=Q=>{A||(a.next(y()),A=!0);let J={type:cy.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&l.responseText&&(J.partialText=l.responseText),a.next(J)},G=Q=>{let J={type:cy.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),a.next(J)};return l.addEventListener("load",E),l.addEventListener("error",T),l.addEventListener("timeout",T),l.addEventListener("abort",T),t.reportProgress&&(l.addEventListener("progress",R),null!==f&&l.upload&&l.upload.addEventListener("progress",G)),l.send(f),a.next({type:cy.Sent}),()=>{l.removeEventListener("error",T),l.removeEventListener("abort",T),l.removeEventListener("load",E),l.removeEventListener("timeout",T),t.reportProgress&&(l.removeEventListener("progress",R),null!==f&&l.upload&&l.upload.removeEventListener("progress",G)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(ds))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const r4=new u.OlP("XSRF_ENABLED"),R9=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),k9=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class F9{}let bJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ca(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(we),u.LFG(u.Lbi),u.LFG(R9))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function TJ(n,e){const t=n.url.toLowerCase();if(!(0,u.f3M)(r4)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,u.f3M)(F9).getToken(),i=(0,u.f3M)(k9);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ud=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ud||{});function DJ(...n){const e=[dJ,N9,P9,{provide:_M,useExisting:P9},{provide:yM,useExisting:N9},{provide:$I,useValue:TJ,multi:!0},{provide:r4,useValue:!0},{provide:F9,useClass:bJ}];for(const t of n)e.push(...t.\u0275providers);return(0,u.MR2)(e)}const L9=new u.OlP("LEGACY_INTERCEPTOR_FN");function SJ(){return function Pp(n,e){return{\u0275kind:n,\u0275providers:e}}(Ud.LegacyInterceptors,[{provide:L9,useFactory:mJ},{provide:$I,useExisting:L9,multi:!0}])}let AJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[DJ(SJ())]})}return n})();class i4{constructor(e){return e}}class wM{constructor(){return ud("auth")}}const s4=new u.OlP("angularfire2.auth-instances");function kJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new i4(r)}}const FJ={provide:wM,deps:[[new u.FiY,s4]]},LJ={provide:i4,useFactory:function RJ(n,e){const t=ld("auth",n,e);return t&&new i4(t)},deps:[[new u.FiY,s4],Ul]};let UJ=(()=>{class n{constructor(){(0,Cn.registerVersion)("angularfire",ic.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[LJ,FJ]}),n})();function VJ(n,...e){return{ngModule:UJ,providers:[{provide:s4,useFactory:kJ(n),multi:!0,deps:[u.R0b,u.zs3,Vo,ny,[new u.FiY,Dp],...e]}]}}const BJ=Dl(m7.o,!0);class o4{constructor(e){return e}}const V9="firestore",a4=new u.OlP("angularfire2.firestore-instances");function HJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new o4(r)}}const zJ={provide:class jJ{constructor(){return ud(V9)}},deps:[[new u.FiY,a4]]},GJ={provide:o4,useFactory:function $J(n,e){const t=ld(V9,n,e);return t&&new o4(t)},deps:[[new u.FiY,a4],Ul]};let WJ=(()=>{class n{constructor(){(0,Cn.registerVersion)("angularfire",ic.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[GJ,zJ]}),n})();function qJ(n,...e){return{ngModule:WJ,providers:[{provide:a4,useFactory:HJ(n),multi:!0,deps:[u.R0b,u.zs3,Vo,ny,[new u.FiY,wM],[new u.FiY,Dp],...e]}]}}const ZJ=Dl(yq,!0),B9="@firebase/database";let c4="";class YJ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class QJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const $9=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YJ(e)}}catch{}return new QJ},Op=$9("localStorage"),l4=$9("sessionStorage"),uy=new Ir.Yd("@firebase/database"),H9=function(){let n=1;return function(){return n++}}(),z9=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},HI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=HI.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let Np=null,G9=!0;const hi=function(...n){if(!0===G9&&(G9=!1,null===Np&&!0===l4.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(uy.logLevel=Ir.in.VERBOSE,Np=uy.log.bind(uy),e&&l4.set("logging_enabled",!0)):"function"==typeof n?Np=n:(Np=null,l4.remove("logging_enabled"))}(!0)),Np){const e=HI.apply(null,n);Np(e)}},zI=function(n){return function(...e){hi(n,...e)}},u4=function(...n){const e="FIREBASE INTERNAL ERROR: "+HI(...n);uy.error(e)},_c=function(...n){const e=`FIREBASE FATAL ERROR: ${HI(...n)}`;throw uy.error(e),new Error(e)},qi=function(...n){const e="FIREBASE WARNING: "+HI(...n);uy.warn(e)},IM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Vd="[MIN_NAME]",Vl="[MAX_NAME]",Rp=function(n,e){if(n===e)return 0;if(n===Vd||e===Vl)return-1;if(e===Vd||n===Vl)return 1;{const t=K9(n),r=K9(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},eX=function(n,e){return n===e?0:n<e?-1:1},GI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},d4=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=d4(n[e[r]]);return t+="}",t},q9=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Z9=function(n){(0,z.hu)(!IM(n),"Invalid JSON number");const r=1023;let i,a,l,f,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const E=y.join("");let T="";for(g=0;g<64;g+=8){let A=parseInt(E.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},iX=new RegExp("^-?(0*)\\d{1,10}$"),K9=function(n){if(iX.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dy=function(n){try{n()}catch(e){setTimeout(()=>{throw qi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},WI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class cX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lX{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qi(e)}}let qI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const e$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,r$="websocket",i$="long_polling";class f4{constructor(e,t,r,i,a=!1,l="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Op.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Op.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function s$(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===r$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==i$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function uX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return fi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class dX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const p4={},g4={};function m4(n){const e=n.toString();return p4[e]||(p4[e]=new dX),p4[e]}class fX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bd{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zI(e),this.stats_=m4(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),s$(t,i$,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _4((...a)=>{const[l,f,g,y,E]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&e$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bd.forceAllow_=!0}static forceDisallow(){Bd.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Bd.forceAllow_&&(Bd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=q9(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=H9(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_4.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){hi("frame writing exception"),f.stack&&hi(f.stack),hi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||hi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let bM=null;typeof MozWebSocket<"u"?bM=MozWebSocket:typeof WebSocket<"u"&&(bM=WebSocket);let hy=(()=>{class n{constructor(t,r,i,a,l,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zI(this.connId),this.stats_=m4(r),this.connURL=n.connectionURL_(r,f,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&e$.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),s$(t,r$,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Op.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${c4}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new bM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==bM&&!n.forceDisallow_}static previouslyFailed(){return Op.isInMemoryStorage||!0===Op.get("previous_websocket_failure")}markConnectionHealthy(){Op.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=q9(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),h$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bd,hy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hy&&hy.isAvailable();let i=r&&!hy.previouslyFailed();if(t.webSocketOnly&&(r||qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class v${constructor(e,t,r,i,a,l,f,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zI("c:"+this.id+":"),this.transportManager_=new h$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=WI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=GI("t",e),r=GI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=GI("t",e),r=GI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=GI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?u4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),WI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):WI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Op.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class C${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class w${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class TM extends w${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new TM}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new pn("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jd(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function v4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ZI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function b$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function Jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new pn(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function os(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return os(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function C4(n,e){if(jd(n)!==jd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ho(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jd(n)>jd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class FX{constructor(e,t){this.errorPrefix_=t,this.parts_=ZI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);T$(this)}}function T$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kp(n))}function kp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class w4 extends w${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new w4}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KI=1e3;let SM,Fp=(()=>{class n extends C${constructor(t,r,i,a,l,f,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");w4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&TM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,z.Wl)(l)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new z.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,a),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):u4("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,V.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,a())};t.realtime_={close:E,sendRequest:function(R){(0,z.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,G]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?hi("getToken() completed but was canceled"):(hi("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=G&&G.token,y=new v$(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{qi(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&qi(R),E())}}})()}interrupt(t){hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>d4(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new pn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){hi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){hi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+c4.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=TM.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class DM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(Vd,e),i=new zt(Vd,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class A$ extends DM{static get __EMPTY_NODE(){return SM}static set __EMPTY_NODE(e){SM=e}compare(e,t){return Rp(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Vl,SM)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,SM)}toString(){return".key"}}const yc=new A$;class AM{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let E4,pa=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ds.EMPTY_NODE,this.right=l??Ds.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ds.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ds{constructor(e,t=Ds.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ds(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pa.BLACK,null,null))}remove(e){return new Ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new AM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new AM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new AM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new AM(this.root_,null,this.comparator_,!0,e)}}function zX(n,e){return Rp(n.name,e.name)}function I4(n,e){return Rp(n,e)}Ds.EMPTY_NODE=new class HX{copy(e,t,r,i,a){return this}insert(e,t,r){return new pa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const M$=function(n){return"number"==typeof n?"number:"+Z9(n):"string:"+n},x$=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===E4||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===E4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let P$,O$,N$,fy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),x$(this.priorityNode_)}static set __childrenNodeConstructor(t){P$=t}static get __childrenNodeConstructor(){return P$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===jd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+M$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Z9(this.value_):this.value_,this.lazyHash_=z9(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(a>=0,"Unknown leaf type: "+r),(0,z.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class ZX extends DM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Rp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Vl,new fy("[PRIORITY-POST]",N$))}makePost(e,t){const r=O$(e);return new zt(t,new fy("[PRIORITY-POST]",r))}toString(){return".priority"}},KX=Math.log(2);class YX{constructor(e){this.count=parseInt(Math.log(e+1)/KX,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const MM=function(n,e,t,r){n.sort(e);const i=function(g,y){const E=y-g;let T,A;if(0===E)return null;if(1===E)return T=n[g],A=t?t(T):T,new pa(A,T.node,pa.BLACK,null,null);{const R=parseInt(E/2,10)+g,G=i(g,R),Q=i(R+1,y);return T=n[R],A=t?t(T):T,new pa(A,T.node,pa.BLACK,G,Q)}},f=function(g){let y=null,E=null,T=n.length;const A=function(G,Q){const J=T-G,Te=T;T-=G;const He=i(J+1,Te),Re=n[J],Ye=t?t(Re):Re;R(new pa(Ye,Re.node,Q,null,He))},R=function(G){y?(y.left=G,y=G):(E=G,y=G)};for(let G=0;G<g.count;++G){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(G+1));Q?A(J,pa.BLACK):(A(J,pa.BLACK),A(J,pa.RED))}return E}(new YX(n.length));return new Ds(r||e,f)};let b4;const py={};class Bl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(py&&Rn,"ChildrenNode.ts has not been loaded"),b4=b4||new Bl({".priority":py},{".priority":Rn}),b4}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ds?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?MM(r,e.getCompare()):py;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=f,new Bl(E,y)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,a)=>{const l=(0,z.DV)(this.indexSet_,a);if((0,z.hu)(l,"Missing index implementation for "+a),i===py){if(l.isDefinedOn(e.node)){const f=[],g=t.getIterator(zt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&f.push(y),y=g.getNext();return f.push(e),MM(f,l.getCompare())}return py}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new zt(e.name,f))),g.insert(e,e.node)}});return new Bl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===py)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new Bl(r,this.indexSet_)}}let YI,xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&x$(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YI||(YI=new n(new Ds(I4),null,Bl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?YI:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?YI:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,z.hu)(".priority"!==jt(t)||1===jd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Dn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Rn,(f,g)=>{r[f]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+M$(this.getPriority().val())+":"),this.forEachChild(Rn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":z9(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===QI?-1:0}withIndex(t){if(t===yc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===yc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rn),a=r.getIterator(Rn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===yc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const QI=new class QX extends xt{constructor(){super(new Ds(I4),xt.EMPTY_NODE,Bl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zt,{MIN:{value:new zt(Vd,xt.EMPTY_NODE)},MAX:{value:new zt(Vl,QI)}}),A$.__EMPTY_NODE=xt.EMPTY_NODE,fy.__childrenNodeConstructor=xt,function GX(n){E4=n}(QI),function qX(n){N$=n}(QI);const JX=!0;function sr(n,e=null){if(null===n)return xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fy(n,sr(e));if(n instanceof Array||!JX){let t=xt.EMPTY_NODE;return fi(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const a=sr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(sr(e))}{const t=[];let r=!1;if(fi(n,(l,f)=>{if("."!==l.substring(0,1)){const g=sr(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new zt(l,g)))}}),0===t.length)return xt.EMPTY_NODE;const a=MM(t,zX,l=>l.name,I4);if(r){const l=MM(t,Rn.getCompare());return new xt(a,sr(e),new Bl({".priority":l},{".priority":Rn}))}return new xt(a,sr(e),Bl.Default)}}!function WX(n){O$=n}(sr);class T4 extends DM{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!$t(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Rp(e.name,t.name):a}makePost(e,t){const r=sr(e),i=xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=xt.EMPTY_NODE.updateChild(this.indexPath_,QI);return new zt(Vl,e)}toString(){return ZI(this.indexPath_,0).join("/")}}const D4=new class XX extends DM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Rp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=sr(e);return new zt(t,r)}toString(){return".value"}};function XI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class A4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const e=new A4;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function k$(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rn?t="$priority":n.index_===D4?t="$value":n.index_===yc?t="$key":((0,z.hu)(n.index_ instanceof T4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function F$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Rn&&(e.i=n.index_.toString()),e}class PM extends C${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=PM.getListenId_(e,r),f={};this.listens_[l]=f;const g=k$(e._queryParams);this.restRequest_(a+".json",g,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,z.DV)(this.listens_,l)===f){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(e,t){const r=PM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=k$(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{qi("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&qi("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class aee{constructor(){this.rootNode_=xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function OM(){return{value:null,children:new Map}}function my(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,OM()),my(n.children.get(r),e=Dn(e),t)}}function O4(n,e,t){null!==n.value?t(e,n.value):function cee(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{O4(i,new pn(e.toString()+"/"+r),t)})}class lee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class hee{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new lee(e);const r=1e4+2e4*Math.random();WI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;fi(e,(i,a)=>{a>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),WI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(vc||{});function k4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class NM{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=vc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new NM(ln(),t,this.revert)}}return(0,z.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new NM(Dn(this.path),this.affectedTree,this.revert)}}class Lp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=vc.OVERWRITE}operationForChild(e){return $t(this.path)?new Lp(this.source,ln(),this.snap.getImmediateChild(e)):new Lp(this.source,Dn(this.path),this.snap)}}class _y{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=vc.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new Lp(this.source,ln(),t.value):new _y(this.source,ln(),t)}return(0,z.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _y(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $d{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function nE(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,g)=>function mee(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),l.forEach(f=>{const g=function gee(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(y=>{y.respondsTo(f.type)&&e.push(y.createEvent(g,n.query_))})})}function RM(n,e){return{eventCache:n,serverCache:e}}function rE(n,e,t,r){return RM(new $d(e,t,r),n.serverCache)}function U$(n,e,t,r){return RM(n.eventCache,new $d(e,t,r))}function kM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Up(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let F4;class kn{constructor(e,t=(()=>(F4||(F4=new Ds(eX)),F4))()){this.value=e,this.children=t}static fromObject(e){let t=new kn(null);return fi(e,(r,i)=>{t=t.set(new pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if($t(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Dn(e),t);return null!=a?{path:Jn(new pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new kn(null)}}set(e,t){if($t(e))return new kn(t,this.children);{const r=jt(e),a=(this.children.get(r)||new kn(null)).set(Dn(e),t),l=this.children.insert(r,a);return new kn(this.value,l)}}remove(e){if($t(e))return this.children.isEmpty()?new kn(null):new kn(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(Dn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new kn(null):new kn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if($t(e))return t;{const r=jt(e),a=(this.children.get(r)||new kn(null)).setTree(Dn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new kn(this.value,l)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=jt(e),l=this.children.get(a);return l?l.findOnPath_(Dn(e),Jn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Dn(e),Jn(t,i),r):new kn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ga{constructor(e){this.writeTree_=e}static empty(){return new ga(new kn(null))}}function iE(n,e,t){if($t(e))return new ga(new kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=os(i,e);return a=a.updateChild(l,t),new ga(n.writeTree_.set(i,a))}{const i=new kn(t),a=n.writeTree_.setTree(e,i);return new ga(a)}}}function L4(n,e,t){let r=n;return fi(t,(i,a)=>{r=iE(r,Jn(e,i),a)}),r}function V$(n,e){if($t(e))return ga.empty();{const t=n.writeTree_.setTree(e,new kn(null));return new ga(t)}}function U4(n,e){return null!=Vp(n,e)}function Vp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(os(t.path,e)):null}function B$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function Hd(n,e){if($t(e))return n;{const t=Vp(n,e);return new ga(null!=t?new kn(t):n.writeTree_.subtree(e))}}function V4(n){return n.writeTree_.isEmpty()}function yy(n,e){return j$(ln(),n.writeTree_,e)}function j$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=j$(Jn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Jn(n,".priority"),r)),t}}function FM(n,e){return W$(e,n)}function Iee(n,e){if(n.snap)return Ho(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ho(Jn(n.path,t),e))return!0;return!1}function bee(n){return n.visible}function $$(n,e,t){let r=ga.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Ho(t,l)?(f=os(t,l),r=iE(r,f,a.snap)):Ho(l,t)&&(f=os(l,t),r=iE(r,ln(),a.snap.getChild(f)));else{if(!a.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(Ho(t,l))f=os(t,l),r=L4(r,f,a.children);else if(Ho(l,t))if(f=os(l,t),$t(f))r=L4(r,ln(),a.children);else{const g=(0,z.DV)(a.children,jt(f));if(g){const y=g.getChild(Dn(f));r=iE(r,ln(),y)}}}}}return r}function H$(n,e,t,r,i){if(r||i){const a=Hd(n.visibleWrites,e);return!i&&V4(a)?t:i||null!=t||U4(a,ln())?yy($$(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ho(y.path,e)||Ho(e,y.path))},e),t||xt.EMPTY_NODE):null}{const a=Vp(n.visibleWrites,e);if(null!=a)return a;{const l=Hd(n.visibleWrites,e);return V4(l)?t:null!=t||U4(l,ln())?yy(l,t||xt.EMPTY_NODE):null}}}function LM(n,e,t,r){return H$(n.writeTree,n.treePath,e,t,r)}function B4(n,e){return function Tee(n,e,t){let r=xt.EMPTY_NODE;const i=Vp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Hd(n.visibleWrites,e);return t.forEachChild(Rn,(l,f)=>{const g=yy(Hd(a,new pn(l)),f);r=r.updateImmediateChild(l,g)}),B$(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return B$(Hd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function z$(n,e,t,r){return function Dee(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Jn(e,t);if(U4(n.visibleWrites,a))return null;{const l=Hd(n.visibleWrites,a);return V4(l)?i.getChild(t):yy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function UM(n,e){return function Aee(n,e){return Vp(n.visibleWrites,e)}(n.writeTree,Jn(n.treePath,e))}function j4(n,e,t){return function See(n,e,t,r){const i=Jn(e,t),a=Vp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?yy(Hd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function G$(n,e){return W$(Jn(n.treePath,e),n.writeTree)}function W$(n,e){return{treePath:n,writeTree:e}}class Oee{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,XI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function JI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function gy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,XI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const q$=new class Nee{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $4{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new $d(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return j4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Up(this.viewCache_),a=function Pee(n,e,t,r,i,a){return function Mee(n,e,t,r,i,a,l){let f;const g=Hd(n.visibleWrites,e),y=Vp(g,ln());if(null!=y)f=y;else{if(null==t)return[];f=yy(g,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const E=[],T=l.getCompare(),A=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let R=A.getNext();for(;R&&E.length<i;)0!==T(R,r)&&E.push(R),R=A.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Z$(n,e,t,r,i,a){const l=e.eventCache;if(null!=UM(r,t))return e;{let f,g;if($t(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Up(e),T=B4(r,y instanceof xt?y:xt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=LM(r,Up(e));f=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=jt(t);if(".priority"===y){(0,z.hu)(1===jd(t),"Can't have a priority with additional path components");const E=l.getNode();g=e.serverCache.getNode();const T=z$(r,t,E,g);f=null!=T?n.filter.updatePriority(E,T):l.getNode()}else{const E=Dn(t);let T;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const A=z$(r,t,l.getNode(),g);T=null!=A?l.getNode().getImmediateChild(y).updateChild(E,A):l.getNode().getImmediateChild(y)}else T=j4(r,y,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),y,T,E,i,a):l.getNode()}}return rE(e,f,l.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function VM(n,e,t,r,i,a,l,f){const g=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if($t(t))y=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);y=E.updateFullNode(g.getNode(),R,null)}else{const R=jt(t);if(!g.isCompleteForPath(t)&&jd(t)>1)return e;const G=Dn(t),J=g.getNode().getImmediateChild(R).updateChild(G,r);y=".priority"===R?E.updatePriority(g.getNode(),J):E.updateChild(g.getNode(),R,J,G,q$,null)}const T=U$(e,y,g.isFullyInitialized()||$t(t),E.filtersNodes());return Z$(n,T,t,i,new $4(i,T,a),f)}function H4(n,e,t,r,i,a,l){const f=e.eventCache;let g,y;const E=new $4(i,e,a);if($t(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=rE(e,y,!0,n.filter.filtersNodes());else{const T=jt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=rE(e,y,f.isFullyInitialized(),f.isFiltered());else{const A=Dn(t),R=f.getNode().getImmediateChild(T);let G;if($t(A))G=r;else{const Q=E.getCompleteChild(T);G=null!=Q?".priority"===v4(A)&&Q.getChild(b$(A)).isEmpty()?Q:Q.updateChild(A,r):xt.EMPTY_NODE}g=R.equals(G)?e:rE(e,n.filter.updateChild(f.getNode(),T,G,A,E,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function K$(n,e){return n.eventCache.isCompleteForChild(e)}function Y$(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function z4(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=$t(t)?r:new kn(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,A)=>{if(E.hasChild(T)){const G=Y$(0,e.serverCache.getNode().getImmediateChild(T),A);g=VM(n,g,new pn(T),G,i,a,l,f)}}),y.children.inorderTraversal((T,A)=>{const R=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!E.hasChild(T)&&!R){const Q=Y$(0,e.serverCache.getNode().getImmediateChild(T),A);g=VM(n,g,new pn(T),Q,i,a,l,f)}}),g}function Gee(n,e){const t=Up(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function X$(n,e,t,r){e.type===vc.MERGE&&null!==e.source.queryId&&((0,z.hu)(Up(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(kM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Fee(n,e,t,r,i){const a=new Oee;let l,f;if(t.type===vc.OVERWRITE){const y=t;y.source.fromUser?l=H4(n,e,y.path,y.snap,r,i,a):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered()&&!$t(y.path),l=VM(n,e,y.path,y.snap,r,i,f,a))}else if(t.type===vc.MERGE){const y=t;y.source.fromUser?l=function Uee(n,e,t,r,i,a,l){let f=e;return r.foreach((g,y)=>{const E=Jn(t,g);K$(e,jt(E))&&(f=H4(n,f,E,y,i,a,l))}),r.foreach((g,y)=>{const E=Jn(t,g);K$(e,jt(E))||(f=H4(n,f,E,y,i,a,l))}),f}(n,e,y.path,y.children,r,i,a):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered(),l=z4(n,e,y.path,y.children,r,i,f,a))}else if(t.type===vc.ACK_USER_WRITE){const y=t;l=y.revert?function jee(n,e,t,r,i,a){let l;if(null!=UM(r,t))return e;{const f=new $4(r,e,i),g=e.eventCache.getNode();let y;if($t(t)||".priority"===jt(t)){let E;if(e.serverCache.isFullyInitialized())E=LM(r,Up(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof xt,"serverChildren would be complete if leaf node"),E=B4(r,T)}y=n.filter.updateFullNode(g,E,a)}else{const E=jt(t);let T=j4(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),y=null!=T?n.filter.updateChild(g,E,T,Dn(t),f,a):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,xt.EMPTY_NODE,Dn(t),f,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=LM(r,Up(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=UM(r,ln()),rE(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function Vee(n,e,t,r,i,a,l){if(null!=UM(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if($t(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return VM(n,e,t,g.getNode().getChild(t),i,a,f,l);if($t(t)){let y=new kn(null);return g.getNode().forEachChild(yc,(E,T)=>{y=y.set(new pn(E),T)}),z4(n,e,t,y,i,a,f,l)}return e}{let y=new kn(null);return r.foreach((E,T)=>{const A=Jn(t,E);g.isCompleteForPath(A)&&(y=y.set(E,g.getNode().getChild(A)))}),z4(n,e,t,y,i,a,f,l)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==vc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);l=function Bee(n,e,t,r,i){const a=e.serverCache;return Z$(n,U$(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,q$,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function Lee(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=kM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function R$(n){return{type:"value",snapshotNode:n}}(kM(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function kee(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function e8(n,e,t,r){return function pee(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function eee(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),nE(n,i,"child_removed",e,r,t),nE(n,i,"child_added",e,r,t),nE(n,i,"child_moved",a,r,t),nE(n,i,"child_changed",e,r,t),nE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let BM,$M;function G4(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),X$(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(X$(l,e,t,r));return a}}function zd(n,e){let t=null;for(const r of n.views.values())t=t||Gee(r,e);return t}class o8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kn(null),this.pendingWriteTree_=function xee(){return{visibleWrites:ga.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function W4(n,e,t,r,i){return function yee(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=iE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vy(n,new Lp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wd(n,e,t=!1){const r=function Cee(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function wee(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&Iee(f,r.path)?i=!1:Ho(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function Eee(n){n.visibleWrites=$$(n.allWrites,bee,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=V$(n.visibleWrites,r.path):fi(r.children,g=>{n.visibleWrites=V$(n.visibleWrites,Jn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new kn(null);return null!=r.snap?a=a.set(ln(),!0):fi(r.children,l=>{a=a.set(new pn(l),!0)}),vy(n,new NM(r.path,a,t))}return[]}function sE(n,e,t){return vy(n,new Lp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function zM(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const y=zd(f,os(l,e));if(y)return y});return H$(i,e,a,t,!0)}function vy(n,e){return c8(e,n.syncPointTree_,null,FM(n.pendingWriteTree_,ln()))}function c8(n,e,t,r){if($t(n.path))return l8(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=zd(i,ln()));let a=[];const l=jt(n.path),f=n.operationForChild(l),g=e.children.get(l);if(g&&f){const y=t?t.getImmediateChild(l):null,E=G$(r,l);a=a.concat(c8(f,g,y,E))}return i&&(a=a.concat(G4(i,n,r,t))),a}}function l8(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=zd(i,ln()));let a=[];return e.children.inorderTraversal((l,f)=>{const g=t?t.getImmediateChild(l):null,y=G$(r,l),E=n.operationForChild(l);E&&(a=a.concat(l8(E,f,g,y)))}),i&&(a=a.concat(G4(i,n,r,t))),a}function Z4(n,e){return n.tagToQueryMap.get(e)}function K4(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function Y4(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),G4(r,t,FM(n.pendingWriteTree_,e),null)}class Q4{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Q4(t)}node(){return this.node_}}class J4{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Jn(this.path_,e);return new J4(this.syncTree_,t)}node(){return zM(this.syncTree_,this.path_)}}const hte=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},d8=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fte(n[".sv"],e,t):"object"==typeof n[".sv"]?pte(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fte=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},pte=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},h8=function(n,e,t,r){return e3(e,new J4(t,n),r)},X4=function(n,e,t){return e3(n,new Q4(e),t)};function e3(n,e,t){const r=n.getPriority().val(),i=d8(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=d8(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new fy(f,sr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new fy(i))),l.forEachChild(Rn,(f,g)=>{const y=e3(g,e.getImmediateChild(f),t);y!==g&&(a=a.updateImmediateChild(f,y))}),a}}class t3{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function WM(n,e){let t=e instanceof pn?e:new pn(e),r=n,i=jt(t);for(;null!==i;){const a=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new t3(i,r,a),t=Dn(t),i=jt(t)}return r}function Bp(n){return n.node.value}function n3(n,e){n.node.value=e,r3(n)}function f8(n){return n.node.childCount>0}function qM(n,e){fi(n.node.children,(t,r)=>{e(new t3(t,n,r))})}function p8(n,e,t,r){t&&!r&&e(n),qM(n,i=>{p8(i,e,!0,r)}),t&&r&&e(n)}function cE(n){return new pn(null===n.parent?n.name:cE(n.parent)+"/"+n.name)}function r3(n){null!==n.parent&&function _te(n,e,t){const r=function gte(n){return void 0===Bp(n)&&!f8(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,r3(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,r3(n))}(n.parent,n.name,n)}const yte=/[\[\].#$\/\u0000-\u001F\u007F]/,vte=/[\[\].#$\u0000-\u001F\u007F]/,i3=10485760,ZM=function(n){return"string"==typeof n&&0!==n.length&&!yte.test(n)},uE=function(n,e,t){const r=t instanceof pn?new FX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kp(r));if("function"==typeof e)throw new Error(n+"contains a function "+kp(r)+" with contents = "+e.toString());if(IM(e))throw new Error(n+"contains "+e.toString()+" "+kp(r));if("string"==typeof e&&e.length>i3/3&&(0,z.ug)(e)>i3)throw new Error(n+"contains a string greater than "+i3+" utf8 bytes "+kp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(fi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!ZM(l)))throw new Error(n+" contains an invalid key ("+l+") "+kp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function LX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),T$(n)})(r,l),uE(n,f,r),function UX(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+kp(r)+" in addition to actual children.")}},_8=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ZM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!vte.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ete{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function co(n,e,t){(function KM(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!C4(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function v8(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(bte(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Ho(r,e)||Ho(e,r))}function bte(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Np&&hi("event: "+t.toString()),dy(r)}}}const Tte=25;class Dte{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ete,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=OM(),this.transactionQueueTree_=new t3,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function w8(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hE(n){return hte({timestamp:w8(n)})}function I8(n,e,t,r,i){n.dataUpdateCount++;const a=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,z.UI)(t,y=>sr(y));l=function ote(n,e,t,r){const i=Z4(n,r);if(i){const a=K4(i),l=a.path,f=a.queryId,g=os(l,e),y=kn.fromObject(t);return Y4(n,l,new _y(k4(f),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=sr(t);l=function a8(n,e,t,r){const i=Z4(n,r);if(null!=i){const a=K4(i),l=a.path,f=a.queryId,g=os(l,e);return Y4(n,l,new Lp(k4(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,z.UI)(t,y=>sr(y));l=function rte(n,e,t){const r=kn.fromObject(t);return vy(n,new _y({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=sr(t);l=sE(n.serverSyncTree_,a,g)}let f=a;l.length>0&&(f=wy(n,a)),co(n.eventQueue_,f,l)}function E8(n,e){a3(n,"connected",e),!1===e&&function Pte(n){Cy(n,"onDisconnectEvents");const e=hE(n),t=OM();O4(n.onDisconnect_,ln(),(i,a)=>{const l=h8(i,a,n.serverSyncTree_,e);my(t,i,l)});let r=[];O4(t,ln(),(i,a)=>{r=r.concat(sE(n.serverSyncTree_,i,a));const l=function d3(n,e){const t=cE(D8(n,e)),r=WM(n.transactionQueueTree_,e);return function mte(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{h3(n,i)}),h3(n,r),p8(r,i=>{h3(n,i)}),t}(n,i);wy(n,l)}),n.onDisconnect_=OM(),co(n.eventQueue_,ln(),r)}(n)}function a3(n,e,t){const r=new pn("/.info/"+e),i=sr(t);n.infoData_.updateSnapshot(r,i);const a=sE(n.infoSyncTree_,r,i);co(n.eventQueue_,r,a)}function YM(n){return n.nextWriteId_++}function Cy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),hi(t,...e)}function u3(n,e,t){return zM(n.serverSyncTree_,e,t)||xt.EMPTY_NODE}function QM(n,e=n.transactionQueueTree_){if(e||JM(n,e),Bp(e)){const t=S8(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Ute(n,e,t){const r=t.map(y=>y.currentWriteId),i=u3(n,e,r);let a=i;const l=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,z.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=os(e,E.path);a=a.updateChild(T,E.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,y=>{Cy(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,E=E.concat(Wd(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();JM(n,WM(n.transactionQueueTree_,e)),QM(n,n.transactionQueueTree_),co(n.eventQueue_,e,E);for(let A=0;A<T.length;A++)dy(T[A])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{qi("transaction at "+g.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}wy(n,e)}},l)}(n,cE(e),t)}else f8(e)&&qM(e,t=>{QM(n,t)})}function wy(n,e){const t=D8(n,e),r=cE(t);return function Vte(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],y=os(t,g.path);let T,E=!1;if((0,z.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=Tte)E=!0,T="maxretry",i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0));else{const A=u3(n,g.path,l);g.currentInputSnapshot=A;const R=e[f].update(A.val());if(void 0!==R){uE("transaction failed: Data returned ",R,g.path);let G=sr(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(G=G.updatePriority(A.getPriority()));const J=g.currentWriteId,Te=hE(n),He=X4(G,A,Te);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=He,g.currentWriteId=YM(n),l.splice(l.indexOf(J),1),i=i.concat(W4(n.serverSyncTree_,g.path,He,g.currentWriteId,g.applyLocally)),i=i.concat(Wd(n.serverSyncTree_,J,!0))}else E=!0,T="nodata",i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0))}co(n.eventQueue_,t,i),i=[],E&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}JM(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)dy(r[f]);QM(n,n.transactionQueueTree_)}(n,S8(n,t),r),r}function D8(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===Bp(r);)r=WM(r,t),t=jt(e=Dn(e));return r}function S8(n,e){const t=[];return A8(n,e,t),t.sort((r,i)=>r.order-i.order),t}function A8(n,e,t){const r=Bp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);qM(e,i=>{A8(n,i,t)})}function JM(n,e){const t=Bp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,n3(e,t.length>0?t:void 0)}qM(e,r=>{JM(n,r)})}function h3(n,e){const t=Bp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,z.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,z.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?n3(e,void 0):t.length=a+1,co(n.eventQueue_,cE(e),i);for(let l=0;l<r.length;l++)dy(r[l])}}const f3=function(n,e){const t=$te(n),r=t.namespace;return"firebase.com"===t.domain&&_c(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_c("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new f4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new pn(t.pathString)}},$te=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(f=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function Bte(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const A=function jte(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(l="https"===f||"wss"===f,g=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class lo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:v4(this._path)}get ref(){return new ma(this._repo,this._path)}get _queryIdentifier(){const e=F$(this._queryParams),t=d4(e);return"{}"===t?"default":t}get _queryObject(){return F$(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof lo))return!1;const t=this._repo===e._repo,r=C4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function RX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ma extends lo{constructor(e,t){super(e,t,new A4,!1)}get parent(){const e=b$(this._path);return null===e?null:new ma(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Zee(n){(0,z.hu)(!BM,"__referenceConstructor has already been defined"),BM=n})(ma),function Xee(n){(0,z.hu)(!$M,"__referenceConstructor has already been defined"),$M=n}(ma);const g3={};class cne{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ste(n,e,t){if(n.stats_=m4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new PM(n.repoInfo_,(r,i,a,l)=>{I8(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>E8(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fp(n.repoInfo_,e,(r,i,a,l)=>{I8(n,r,i,a,l)},r=>{E8(n,r)},r=>{!function Ate(n,e){fi(e,(t,r)=>{a3(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function hX(n,e){const t=n.toString();return g4[t]||(g4[t]=e()),g4[t]}(n.repoInfo_,()=>new hee(n.stats_,n.server_)),n.infoData_=new aee,n.infoSyncTree_=new o8({startListening:(r,i,a,l)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=sE(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),a3(n,"connected",!1),n.serverSyncTree_=new o8({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,g)=>{const y=l(f,g);co(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ma(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function sne(n,e){const t=g3[e];(!t||t[n.key]!==n)&&_c(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function T8(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_c("Cannot call "+e+" on a deleted database.")}}function lne(n=(0,Cn.getApp)(),e){const t=(0,Cn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function une(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_c("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_c('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new qI(qI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);a=new qI(l)}!function rne(n,e,t,r){n.repoInfo_=new f4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Fp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function dne(n){(function KJ(n){c4=n})(Cn.SDK_VERSION),(0,Cn._registerComponent)(new wr.wA("database",(e,{instanceIdentifier:t})=>function ine(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||_c("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=f3(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${f.namespace}`,l=f3(a,i),f=l.repoInfo):g=!l.repoInfo.secure;const E=i&&g?new qI(qI.OWNER):new lX(n.name,n.options,e);_8("Invalid Firebase Database URL",l),$t(l.path)||_c("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function one(n,e,t,r){let i=g3[e.name];i||(i={},g3[e.name]=i);let a=i[n.toURLString()];return a&&_c("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Dte(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,E,new cX(n.name,t));return new cne(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Cn.registerVersion)(B9,"0.14.4",n),(0,Cn.registerVersion)(B9,"0.14.4","esm2017")}();class m3{constructor(e){return e}}const L8="database",_3=new u.OlP("angularfire2.database-instances");function mne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new m3(r)}}const _ne={provide:class pne{constructor(){return ud(L8)}},deps:[[new u.FiY,_3]]},yne={provide:m3,useFactory:function gne(n,e){const t=ld(L8,n,e);return t&&new m3(t)},deps:[[new u.FiY,_3],Ul]};let vne=(()=>{class n{constructor(){(0,Cn.registerVersion)("angularfire",ic.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[yne,_ne]}),n})();function Cne(n,...e){return{ngModule:vne,providers:[{provide:_3,useFactory:mne(n),multi:!0,deps:[u.R0b,u.zs3,Vo,ny,[new u.FiY,wM],[new u.FiY,Dp],...e]}]}}const wne=Dl(lne,!0);class y3{constructor(e){return e}}const U8="messaging",v3=new u.OlP("angularfire2.messaging-instances");function bne(n){return(e,t)=>{if(!pw.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new y3(r)}}const Tne={provide:class Ine{constructor(){return ud(U8)}},deps:[[new u.FiY,v3]]},Dne={provide:y3,useFactory:function Ene(n,e){if(!pw.sync())return null;const t=ld(U8,n,e);return t&&new y3(t)},deps:[[new u.FiY,v3],Ul]};let Sne=(()=>{class n{constructor(){(0,Cn.registerVersion)("angularfire",ic.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Dne,Tne,{provide:u.ip1,useValue:pw.async,multi:!0}]}),n})();function Ane(n,...e){return{ngModule:Sne,providers:[{provide:v3,useFactory:bne(n),multi:!0,deps:[u.R0b,u.zs3,Vo,ny,...e]}]}}const Mne=Dl(VU,!0),V8="firebasestorage.googleapis.com";class or extends z.ZR{constructor(e,t,r=0){super(C3(e),`Firebase Storage: ${t} (${C3(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,or.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return C3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Xn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Xn||{});function C3(n){return"storage/"+n}function I3(n){return new or(Xn.INVALID_ARGUMENT,n)}function z8(){return new or(Xn.APP_DELETED,"The Firebase app was deleted.")}class as{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=as.makeFromUrl(e,t)}catch{return new as(e,"")}if(""===r.path)return r;throw function Vne(n){return new or(Xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Re=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===V8?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<Re.length;Ye++){const gt=Re[Ye],At=gt.regex.exec(e);if(At){let As=At[gt.indices.path];As||(As=""),r=new as(At[gt.indices.bucket],As),gt.postModify(r);break}}if(null==r)throw function Une(n){return new or(Xn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Gne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function b3(n,e,t,r){if(r<e)throw I3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw I3(`Invalid value for '${n}'. Expected ${t} or less.`)}var Ey=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ey||{});class Qne{constructor(e,t,r,i,a,l,f,g,y,E,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,G)=>{this.resolve_=R,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function Zne(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==f){const g=function w3(){return new or(Xn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,g):g)}else l(i.canceled?this.appDelete_?z8():function $8(){return new or(Xn.CANCELED,"User canceled the upload/download.")}():function j8(){return new or(Xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new rx(!1,null,!0)):this.backoffId_=function Wne(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function g(){return 2===f}let y=!1;function E(...J){y||(y=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(R,g())},J)}function A(){a&&clearTimeout(a)}function R(J,...Te){if(y)return void A();if(J)return A(),void E.call(null,J,...Te);if(g()||l)return A(),void E.call(null,J,...Te);let Re;r<64&&(r*=2),1===f?(f=2,Re=0):Re=1e3*(r+Math.random()),T(Re)}let G=!1;function Q(J){G||(G=!0,A(),!y&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),a=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new rx(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Ey.NO_ERROR,g=a.getStatus();if(!f||function q8(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(g,this.additionalRetryCodes_)&&this.retry){const E=a.getErrorCode()===Ey.ABORT;return void r(!1,new rx(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new rx(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qne(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rx{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class $p{constructor(e,t){this._service=e,this._location=t instanceof as?t:as.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $p(e,t)}get root(){const e=new as(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function J8(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function dre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new as(this._location.bucket,e);return new $p(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function zne(n){return new or(Xn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function fH(n,e){const t=e?.storageBucket;return null==t?null:as.makeFromBucketSpec(t,n)}class P3{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=V8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?as.makeFromBucketSpec(i,this._host):fH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?as.makeFromBucketSpec(this._url,e):fH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,V.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,V.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $p(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Gne(z8());{const l=function nre(n,e,t,r,i,a,l=!0){const f=function W8(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,y=Object.assign({},n.headers);return function ere(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function Jne(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function Xne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,a),function tre(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new Qne(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,V.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const pH="@firebase/storage",mH="storage";function Yre(n=S1(),e){const r=nd(n=(0,z.m9)(n),mH).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function Qre(n,e,t,r={}){!function Kre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function Jre(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new P3(t,r,i,e,"10.5.0")}!function Xre(){Vi(new wr.wA(mH,Jre,"PUBLIC").setMultipleInstances(!0)),wi(pH,"0.11.2",""),wi(pH,"0.11.2","esm2017")}();class O3{constructor(e){return e}}const _H="storage",N3=new u.OlP("angularfire2.storage-instances");function nie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new O3(r)}}const rie={provide:class eie{constructor(){return ud(_H)}},deps:[[new u.FiY,N3]]},iie={provide:O3,useFactory:function tie(n,e){const t=ld(_H,n,e);return t&&new O3(t)},deps:[[new u.FiY,N3],Ul]};let sie=(()=>{class n{constructor(){(0,Cn.registerVersion)("angularfire",ic.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[iie,rie]}),n})();function oie(n,...e){return{ngModule:sie,providers:[{provide:N3,useFactory:nie(n),multi:!0,deps:[u.R0b,u.zs3,Vo,ny,[new u.FiY,wM],[new u.FiY,Dp],...e]}]}}const aie=Dl(Yre,!0),R3={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};wi("firebase","10.5.0","app"),D1(R3.firebase);let uie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[rJ]});static#n=this.\u0275inj=u.cJS({providers:[{provide:ro.Dh,useValue:R3.firebase}],imports:[Lc,PQ,AJ,zY,GY,kZ(()=>FZ(R3.firebase)),VJ(()=>BJ()),qJ(()=>ZJ()),oie(()=>aie()),Cne(()=>wne()),Ane(()=>Mne())]})}return n})();lg().bootstrapModule(uie).catch(n=>console.error(n))},5619:(st,be,F)=>{F.d(be,{X:()=>B});var u=F(8645);class B extends u.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const pe=super._subscribe(te);return!pe.closed&&te.next(this._value),pe}getValue(){const{hasError:te,thrownError:pe,_value:we}=this;if(te)throw pe;return this._throwIfClosed(),we}next(te){super.next(this._value=te)}}},5592:(st,be,F)=>{F.d(be,{y:()=>Fe});var u=F(305),B=F(7394),L=F(4850),te=F(8407),pe=F(2653),we=F(4674),Pe=F(1441);let Fe=(()=>{class X{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Je=new X;return Je.source=this,Je.operator=Me,Je}subscribe(Me,Je,ve){const Ae=function W(X){return X&&X instanceof u.Lv||function U(X){return X&&(0,we.m)(X.next)&&(0,we.m)(X.error)&&(0,we.m)(X.complete)}(X)&&(0,B.Nn)(X)}(Me)?Me:new u.Hp(Me,Je,ve);return(0,Pe.x)(()=>{const{operator:De,source:tt}=this;Ae.add(De?De.call(Ae,tt):tt?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Je){Me.error(Je)}}forEach(Me,Je){return new(Je=Se(Je))((ve,Ae)=>{const De=new u.Hp({next:tt=>{try{Me(tt)}catch(ot){Ae(ot),De.unsubscribe()}},error:Ae,complete:ve});this.subscribe(De)})}_subscribe(Me){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Me)}[L.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=Se(Me))((Je,ve)=>{let Ae;this.subscribe(De=>Ae=De,De=>ve(De),()=>Je(Ae))})}}return X.create=Oe=>new X(Oe),X})();function Se(X){var Oe;return null!==(Oe=X??pe.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(st,be,F)=>{F.d(be,{x:()=>Pe});var u=F(5592),B=F(7394);const te=(0,F(2306).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=F(9039),we=F(1441);let Pe=(()=>{class Se extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new Fe(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new te}next(W){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:Oe,observers:Me}=this;return X||Oe?B.Lc:(this.currentObservers=null,Me.push(W),new B.w0(()=>{this.currentObservers=null,(0,pe.P)(Me,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:Oe,isStopped:Me}=this;X?W.error(Oe):Me&&W.complete()}asObservable(){const W=new u.y;return W.source=this,W}}return Se.create=(U,W)=>new Fe(U,W),Se})();class Fe extends Pe{constructor(U,W){super(),this.destination=U,this.source=W}next(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,U)}error(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,U)}complete(){var U,W;null===(W=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===W||W.call(U)}_subscribe(U){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(U))&&void 0!==X?X:B.Lc}}},305:(st,be,F)=>{F.d(be,{Hp:()=>ve,Lv:()=>X});var u=F(4674),B=F(7394),L=F(2653),te=F(3894),pe=F(2420);const we=Se("C",void 0,void 0);function Se(ee,de,re){return{kind:ee,value:de,error:re}}var U=F(7599),W=F(1441);class X extends B.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,B.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new ve(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return Se("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Pe(ee){return Se("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Me(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){Ae(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){Ae(he)}else Ae(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){Ae(re)}}}class ve extends X{constructor(de,re,he){let ke;if(super(),(0,u.m)(de)||!de)ke={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&L.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),ke={next:de.next&&Me(de.next,j),error:de.error&&Me(de.error,j),complete:de.complete&&Me(de.complete,j)}):ke=de}this.destination=new Je(ke)}}function Ae(ee){L.config.useDeprecatedSynchronousErrorHandling?(0,W.O)(ee):(0,te.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=L.config;re&&U.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:pe.Z,error:function De(ee){throw ee},complete:pe.Z}},7394:(st,be,F)=>{F.d(be,{Lc:()=>we,w0:()=>pe,Nn:()=>Pe});var u=F(4674);const L=(0,F(2306).d)(Se=>function(W){Se(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,Oe)=>`${Oe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var te=F(9039);class pe{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Me of W)Me.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,u.m)(X))try{X()}catch(Me){U=Me instanceof L?Me.errors:[Me]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Me of Oe)try{Fe(Me)}catch(Je){U=U??[],Je instanceof L?U=[...U,...Je.errors]:U.push(Je)}}if(U)throw new L(U)}}add(U){var W;if(U&&U!==this)if(this.closed)Fe(U);else{if(U instanceof pe){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(U)}}_hasParent(U){const{_parentage:W}=this;return W===U||Array.isArray(W)&&W.includes(U)}_addParent(U){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(U),W):W?[W,U]:U}_removeParent(U){const{_parentage:W}=this;W===U?this._parentage=null:Array.isArray(W)&&(0,te.P)(W,U)}remove(U){const{_finalizers:W}=this;W&&(0,te.P)(W,U),U instanceof pe&&U._removeParent(this)}}pe.EMPTY=(()=>{const Se=new pe;return Se.closed=!0,Se})();const we=pe.EMPTY;function Pe(Se){return Se instanceof pe||Se&&"closed"in Se&&(0,u.m)(Se.remove)&&(0,u.m)(Se.add)&&(0,u.m)(Se.unsubscribe)}function Fe(Se){(0,u.m)(Se)?Se():Se.unsubscribe()}},2653:(st,be,F)=>{F.d(be,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,be,F)=>{F.d(be,{E:()=>B});const B=new(F(5592).y)(pe=>pe.complete())},2459:(st,be,F)=>{F.d(be,{D:()=>de});var u=F(4829),B=F(3093),L=F(5137),we=F(5592),Fe=F(4971),Se=F(4674),U=F(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new we.y(ke=>{(0,U.f)(ke,he,()=>{const j=re[Symbol.asyncIterator]();(0,U.f)(ke,he,()=>{j.next().then(Ce=>{Ce.done?ke.complete():ke.next(Ce.value)})},0,!0)})})}var Oe=F(8382),Me=F(4026),Je=F(4266),ve=F(3664),Ae=F(5726),De=F(9853),tt=F(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function te(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,B.Q)(he))}(re,he);if((0,Je.z)(re))return function Pe(re,he){return new we.y(ke=>{let j=0;return he.schedule(function(){j===re.length?ke.complete():(ke.next(re[j++]),ke.closed||this.schedule())})})}(re,he);if((0,Me.t)(re))return function pe(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,B.Q)(he))}(re,he);if((0,Ae.D)(re))return X(re,he);if((0,ve.T)(re))return function W(re,he){return new we.y(ke=>{let j;return(0,U.f)(ke,he,()=>{j=re[Fe.h](),(0,U.f)(ke,he,()=>{let Ce,Ue;try{({value:Ce,done:Ue}=j.next())}catch(at){return void ke.error(at)}Ue?ke.complete():ke.next(Ce)},0,!0)}),()=>(0,Se.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,De.z)(re)}(re,he):(0,u.Xf)(re)}},4829:(st,be,F)=>{F.d(be,{Xf:()=>Oe});var u=F(7582),B=F(4266),L=F(4026),te=F(5592),pe=F(8382),we=F(5726),Pe=F(9853),Fe=F(3664),Se=F(541),U=F(4674),W=F(3894),X=F(4850);function Oe(ee){if(ee instanceof te.y)return ee;if(null!=ee){if((0,pe.c)(ee))return function Me(ee){return new te.y(de=>{const re=ee[X.L]();if((0,U.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,B.z)(ee))return function Je(ee){return new te.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,L.t)(ee))return function ve(ee){return new te.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,W.h)})}(ee);if((0,we.D)(ee))return De(ee);if((0,Fe.T)(ee))return function Ae(ee){return new te.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,Se.L)(ee))return function tt(ee){return De((0,Se.Q)(ee))}(ee)}throw(0,Pe.z)(ee)}function De(ee){return new te.y(de=>{(function ot(ee,de){var re,he,ke,j;return(0,u.mG)(this,void 0,void 0,function*(){try{for(re=(0,u.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(Ce){ke={error:Ce}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(ke)throw ke.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(st,be,F)=>{F.d(be,{T:()=>we});var u=F(7537),B=F(4829),L=F(6232),te=F(4564),pe=F(2459);function we(...Pe){const Fe=(0,te.yG)(Pe),Se=(0,te._6)(Pe,1/0),U=Pe;return U.length?1===U.length?(0,B.Xf)(U[0]):(0,u.J)(Se)((0,pe.D)(U,Fe)):L.E}},2096:(st,be,F)=>{F.d(be,{of:()=>L});var u=F(4564),B=F(2459);function L(...te){const pe=(0,u.yG)(te);return(0,B.D)(te,pe)}},8251:(st,be,F)=>{F.d(be,{x:()=>B});var u=F(305);function B(te,pe,we,Pe,Fe){return new L(te,pe,we,Pe,Fe)}class L extends u.Lv{constructor(pe,we,Pe,Fe,Se,U){super(pe),this.onFinalize=Se,this.shouldUnsubscribe=U,this._next=we?function(W){try{we(W)}catch(X){pe.error(X)}}:super._next,this._error=Fe?function(W){try{Fe(W)}catch(X){pe.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(W){pe.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},3997:(st,be,F)=>{F.d(be,{x:()=>te});var u=F(2737),B=F(9360),L=F(8251);function te(we,Pe=u.y){return we=we??pe,(0,B.e)((Fe,Se)=>{let U,W=!0;Fe.subscribe((0,L.x)(Se,X=>{const Oe=Pe(X);(W||!we(U,Oe))&&(W=!1,U=Oe,Se.next(X))}))})}function pe(we,Pe){return we===Pe}},7398:(st,be,F)=>{F.d(be,{U:()=>L});var u=F(9360),B=F(8251);function L(te,pe){return(0,u.e)((we,Pe)=>{let Fe=0;we.subscribe((0,B.x)(Pe,Se=>{Pe.next(te.call(pe,Se,Fe++))}))})}},7537:(st,be,F)=>{F.d(be,{J:()=>L});var u=F(1631),B=F(2737);function L(te=1/0){return(0,u.z)(B.y,te)}},1631:(st,be,F)=>{F.d(be,{z:()=>Fe});var u=F(7398),B=F(4829),L=F(9360),te=F(7103),pe=F(8251),Pe=F(4674);function Fe(Se,U,W=1/0){return(0,Pe.m)(U)?Fe((X,Oe)=>(0,u.U)((Me,Je)=>U(X,Me,Oe,Je))((0,B.Xf)(Se(X,Oe))),W):("number"==typeof U&&(W=U),(0,L.e)((X,Oe)=>function we(Se,U,W,X,Oe,Me,Je,ve){const Ae=[];let De=0,tt=0,ot=!1;const ee=()=>{ot&&!Ae.length&&!De&&U.complete()},de=he=>De<X?re(he):Ae.push(he),re=he=>{Me&&U.next(he),De++;let ke=!1;(0,B.Xf)(W(he,tt++)).subscribe((0,pe.x)(U,j=>{Oe?.(j),Me?de(j):U.next(j)},()=>{ke=!0},void 0,()=>{if(ke)try{for(De--;Ae.length&&De<X;){const j=Ae.shift();Je?(0,te.f)(U,Je,()=>re(j)):re(j)}ee()}catch(j){U.error(j)}}))};return Se.subscribe((0,pe.x)(U,de,()=>{ot=!0,ee()})),()=>{ve?.()}}(X,Oe,Se,W)))}},3093:(st,be,F)=>{F.d(be,{Q:()=>te});var u=F(7103),B=F(9360),L=F(8251);function te(pe,we=0){return(0,B.e)((Pe,Fe)=>{Pe.subscribe((0,L.x)(Fe,Se=>(0,u.f)(Fe,pe,()=>Fe.next(Se),we),()=>(0,u.f)(Fe,pe,()=>Fe.complete(),we),Se=>(0,u.f)(Fe,pe,()=>Fe.error(Se),we)))})}},3020:(st,be,F)=>{F.d(be,{B:()=>pe});var u=F(4829),B=F(8645),L=F(305),te=F(9360);function pe(Pe={}){const{connector:Fe=(()=>new B.x),resetOnError:Se=!0,resetOnComplete:U=!0,resetOnRefCountZero:W=!0}=Pe;return X=>{let Oe,Me,Je,ve=0,Ae=!1,De=!1;const tt=()=>{Me?.unsubscribe(),Me=void 0},ot=()=>{tt(),Oe=Je=void 0,Ae=De=!1},ee=()=>{const de=Oe;ot(),de?.unsubscribe()};return(0,te.e)((de,re)=>{ve++,!De&&!Ae&&tt();const he=Je=Je??Fe();re.add(()=>{ve--,0===ve&&!De&&!Ae&&(Me=we(ee,W))}),he.subscribe(re),!Oe&&ve>0&&(Oe=new L.Hp({next:ke=>he.next(ke),error:ke=>{De=!0,tt(),Me=we(ot,Se,ke),he.error(ke)},complete:()=>{Ae=!0,tt(),Me=we(ot,U),he.complete()}}),(0,u.Xf)(de).subscribe(Oe))})(X)}}function we(Pe,Fe,...Se){if(!0===Fe)return void Pe();if(!1===Fe)return;const U=new L.Hp({next:()=>{U.unsubscribe(),Pe()}});return(0,u.Xf)(Fe(...Se)).subscribe(U)}},5137:(st,be,F)=>{F.d(be,{R:()=>B});var u=F(9360);function B(L,te=0){return(0,u.e)((pe,we)=>{we.add(L.schedule(()=>pe.subscribe(we),te))})}},4664:(st,be,F)=>{F.d(be,{w:()=>te});var u=F(4829),B=F(9360),L=F(8251);function te(pe,we){return(0,B.e)((Pe,Fe)=>{let Se=null,U=0,W=!1;const X=()=>W&&!Se&&Fe.complete();Pe.subscribe((0,L.x)(Fe,Oe=>{Se?.unsubscribe();let Me=0;const Je=U++;(0,u.Xf)(pe(Oe,Je)).subscribe(Se=(0,L.x)(Fe,ve=>Fe.next(we?we(Oe,ve,Je,Me++):ve),()=>{Se=null,X()}))},()=>{W=!0,X()}))})}},7599:(st,be,F)=>{F.d(be,{z:()=>u});const u={setTimeout(B,L,...te){const{delegate:pe}=u;return pe?.setTimeout?pe.setTimeout(B,L,...te):setTimeout(B,L,...te)},clearTimeout(B){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4971:(st,be,F)=>{F.d(be,{h:()=>B});const B=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,be,F)=>{F.d(be,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(st,be,F)=>{F.d(be,{_6:()=>we,jO:()=>te,yG:()=>pe});var u=F(4674);function L(Pe){return Pe[Pe.length-1]}function te(Pe){return(0,u.m)(L(Pe))?Pe.pop():void 0}function pe(Pe){return function B(Pe){return Pe&&(0,u.m)(Pe.schedule)}(L(Pe))?Pe.pop():void 0}function we(Pe,Fe){return"number"==typeof L(Pe)?Pe.pop():Fe}},9039:(st,be,F)=>{function u(B,L){if(B){const te=B.indexOf(L);0<=te&&B.splice(te,1)}}F.d(be,{P:()=>u})},2306:(st,be,F)=>{function u(B){const te=B(pe=>{Error.call(pe),pe.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}F.d(be,{d:()=>u})},1441:(st,be,F)=>{F.d(be,{O:()=>te,x:()=>L});var u=F(2653);let B=null;function L(pe){if(u.config.useDeprecatedSynchronousErrorHandling){const we=!B;if(we&&(B={errorThrown:!1,error:null}),pe(),we){const{errorThrown:Pe,error:Fe}=B;if(B=null,Pe)throw Fe}}else pe()}function te(pe){u.config.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=pe)}},7103:(st,be,F)=>{function u(B,L,te,pe=0,we=!1){const Pe=L.schedule(function(){te(),we?B.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(B.add(Pe),!we)return Pe}F.d(be,{f:()=>u})},2737:(st,be,F)=>{function u(B){return B}F.d(be,{y:()=>u})},4266:(st,be,F)=>{F.d(be,{z:()=>u});const u=B=>B&&"number"==typeof B.length&&"function"!=typeof B},5726:(st,be,F)=>{F.d(be,{D:()=>B});var u=F(4674);function B(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},4674:(st,be,F)=>{function u(B){return"function"==typeof B}F.d(be,{m:()=>u})},8382:(st,be,F)=>{F.d(be,{c:()=>L});var u=F(4850),B=F(4674);function L(te){return(0,B.m)(te[u.L])}},3664:(st,be,F)=>{F.d(be,{T:()=>L});var u=F(4971),B=F(4674);function L(te){return(0,B.m)(te?.[u.h])}},4026:(st,be,F)=>{F.d(be,{t:()=>B});var u=F(4674);function B(L){return(0,u.m)(L?.then)}},541:(st,be,F)=>{F.d(be,{L:()=>te,Q:()=>L});var u=F(7582),B=F(4674);function L(pe){return(0,u.FC)(this,arguments,function*(){const Pe=pe.getReader();try{for(;;){const{value:Fe,done:Se}=yield(0,u.qq)(Pe.read());if(Se)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Fe)}}finally{Pe.releaseLock()}})}function te(pe){return(0,B.m)(pe?.getReader)}},9360:(st,be,F)=>{F.d(be,{A:()=>B,e:()=>L});var u=F(4674);function B(te){return(0,u.m)(te?.lift)}function L(te){return pe=>{if(B(pe))return pe.lift(function(we){try{return te(we,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,be,F)=>{function u(){}F.d(be,{Z:()=>u})},8407:(st,be,F)=>{F.d(be,{U:()=>L,z:()=>B});var u=F(2737);function B(...te){return L(te)}function L(te){return 0===te.length?u.y:1===te.length?te[0]:function(we){return te.reduce((Pe,Fe)=>Fe(Pe),we)}}},3894:(st,be,F)=>{F.d(be,{h:()=>L});var u=F(2653),B=F(7599);function L(te){B.z.setTimeout(()=>{const{onUnhandledError:pe}=u.config;if(!pe)throw te;pe(te)})}},9853:(st,be,F)=>{function u(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>u})},5879:(st,be,F)=>{F.d(be,{$8M:()=>vu,$WT:()=>Ia,$Z:()=>l0,AFp:()=>Eb,ALo:()=>gD,AaK:()=>X,AsE:()=>I1,CHM:()=>Yi,CRH:()=>Zm,DdM:()=>cR,Dn7:()=>Hm,EJc:()=>$R,EpF:()=>F0,F4k:()=>KT,FYo:()=>Pb,FiY:()=>oe,GfV:()=>Ob,Gpc:()=>Je,HDt:()=>r_,JOm:()=>Vh,KtG:()=>Dh,LFG:()=>Be,LSH:()=>nf,Lbi:()=>Ha,Lck:()=>sR,MAs:()=>GT,MGl:()=>vm,MMx:()=>TC,MR2:()=>Fv,NdJ:()=>U0,O4$:()=>wo,Ojb:()=>aP,OlP:()=>an,Oqu:()=>td,P3R:()=>Qx,PXZ:()=>nS,Q6J:()=>O0,QGY:()=>L0,Qsj:()=>vP,R0b:()=>Pr,RDi:()=>nb,Rgc:()=>Il,SBq:()=>Qs,Sil:()=>XC,Suo:()=>qm,TTD:()=>yh,TgZ:()=>_m,Tol:()=>p1,VKq:()=>dD,VuI:()=>Ck,W1O:()=>AD,X6Q:()=>hk,XFs:()=>dt,Xpm:()=>Wl,Xq5:()=>MT,Xts:()=>Fu,Y36:()=>cl,YKP:()=>iD,YNc:()=>jT,Yjl:()=>Yl,Yz7:()=>ft,Z0I:()=>nn,ZZ4:()=>dd,_Bn:()=>Vm,_UZ:()=>R0,_c5:()=>h_,_uU:()=>w1,aQg:()=>Xf,c2e:()=>ci,cJS:()=>Sn,cg1:()=>Tm,dDg:()=>XD,dqk:()=>Rt,eFA:()=>rS,eJc:()=>jf,ekj:()=>W0,eoX:()=>ow,f3M:()=>Ke,g9A:()=>bb,h0i:()=>ec,hGG:()=>Nr,hij:()=>bm,iGM:()=>BC,ifc:()=>xs,ip1:()=>Er,jDz:()=>Ii,kL8:()=>Dm,kcU:()=>wt,lG2:()=>Kl,lcZ:()=>$m,lqb:()=>Po,lri:()=>a_,n5z:()=>bg,oAB:()=>Ac,oxw:()=>V0,q4F:()=>Nb,qFp:()=>C_,qLn:()=>Ga,qOj:()=>b0,qZA:()=>If,rWj:()=>c_,rg0:()=>_h,s9C:()=>B0,sBO:()=>dw,s_b:()=>Gm,soG:()=>Gf,tb:()=>Cs,tp0:()=>$e,uIk:()=>vf,vHH:()=>ee,vpe:()=>Oo,wAp:()=>Ja,xp6:()=>tT,z2F:()=>Qf,zSh:()=>V,zs3:()=>Js});var u=F(8645),B=F(7394),L=F(5592),te=F(3019),pe=F(5619),we=F(2096),Pe=F(3020),Fe=F(4664),Se=F(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function W(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Oe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=U({__forward_ref__:U});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function ve(s){return Ae(s)?s():s}function Ae(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===Je}function De(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(o,c){super(function de(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,o){throw new ee(-201,!1)}function Qe(s,o){null==s&&function Ve(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Sn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Ln(s,ar)||Ln(s,Fr)}function nn(s){return null!==In(s)}function Ln(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ar(s){return s&&(s.hasOwnProperty(Un)||s.hasOwnProperty(ls))?s[Un]:null}const ar=U({\u0275prov:U}),Un=U({\u0275inj:U}),Fr=U({ngInjectableDef:U}),ls=U({ngInjectorDef:U});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function rn(s){const o=mt;return mt=s,o}function Jr(s,o,c){const d=In(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&dt.Optional?null:void 0!==o?o:void Ue(X(s))}const Rt=globalThis,it={},kt="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let N;function K(s){const o=N;return N=s,o}function ge(s,o=dt.Default){if(void 0===N)throw new ee(-203,!1);return null===N?Jr(s,void 0,o):N.get(s,o&dt.Optional?null:void 0,o)}function Be(s,o=dt.Default){return(function Tt(){return mt}()||ge)(ve(s),o)}function Ke(s,o=dt.Default){return Be(s,Zt(o))}function Zt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function vt(s){const o=[];for(let c=0;c<s.length;c++){const d=ve(s[c]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,p=dt.Default;for(let v=0;v<d.length;v++){const C=d[v],b=Mt(C);"number"==typeof b?-1===b?h=C.token:p|=b:h=C}o.push(Be(h,p))}else o.push(Be(d))}return o}function dn(s,o){return s[kt]=o,s.prototype[kt]=o,s}function Mt(s){return s[kt]}function Ms(s){return{toString:s}.toString()}var ho=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(ho||{}),xs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(xs||{});const Pi={},Wt=[],zo=U({\u0275cmp:U}),va=U({\u0275dir:U}),Hl=U({\u0275pipe:U}),zl=U({\u0275mod:U}),Ps=U({\u0275fac:U}),Ca=U({__NG_ELEMENT_ID__:U}),Gl=U({__NG_ENV_ID__:U});function Kd(s,o,c){let d=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}c=h+1}}function wa(s,o,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const p=c[d++],v=c[d++],C=c[d++];s.setAttribute(o,v,C,p)}else{const p=h,v=c[++d];Tc(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),d++}}return d}function Os(s){return 3===s||4===s||6===s}function Tc(s){return 64===s.charCodeAt(0)}function Dc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?c=h:0===c||fo(s,c,h,null,-1===c||2===c?o[++d]:null)}}return s}function fo(s,o,c,d,h){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,c),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const xn="ng-template";function Sy(s,o,c){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const v=s[d++];if(c&&"class"===p&&-1!==Kd(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Ur(s){return 4===s.type&&s.value!==xn}function Ay(s,o,c){return o===(4!==s.type||c?s.value:xn)}function Yd(s,o,c){let d=4;const h=s.attrs||[],p=function Sc(s){for(let o=0;o<s.length;o++)if(Os(s[o]))return o;return s.length}(h);let v=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!v)if(4&d){if(d=2|1&d,""!==b&&!Ay(s,b,c)||""===b&&1===o.length){if(Xr(d))return!1;v=!0}}else{const D=8&d?b:o[++C];if(8&d&&null!==s.attrs){if(!Sy(s.attrs,D,c)){if(Xr(d))return!1;v=!0}continue}const k=Qd(8&d?"class":b,h,Ur(s),c);if(-1===k){if(Xr(d))return!1;v=!0;continue}if(""!==D){let q;q=k>p?"":h[k+1].toLowerCase();const Y=8&d?q:null;if(Y&&-1!==Kd(Y,D,0)||2&d&&D!==q){if(Xr(d))return!1;v=!0}}}}else{if(!v&&!Xr(d)&&!Xr(b))return!1;if(v&&Xr(b))continue;v=!1,d=b|1&d}}return Xr(d)||v}function Xr(s){return 0==(1&s)}function Qd(s,o,c,d){if(null===o)return-1;let h=0;if(d||!c){let p=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function Xd(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function Jd(s,o,c=!1){for(let d=0;d<o.length;d++)if(Yd(s,o[d],c))return!0;return!1}function zp(s,o){return s?":not("+o.trim()+")":o}function Gp(s){let o=s[0],c=1,d=2,h="",p=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&d){const C=s[++c];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!Xr(v)&&(o+=zp(p,h),h=""),d=v,p=p||!Xr(d);c++}return""!==h&&(o+=zp(p,h)),o}function Wl(s){return Ms(()=>{const o=Wp(s),c={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ho.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||xs.Emulated,styles:s.styles||Wt,_:null,schemas:s.schemas||null,tView:null,id:""};Ql(c);const d=s.dependencies;return c.directiveDefs=po(d,!1),c.pipeDefs=po(d,!0),c.id=function rh(s){let o=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(c),c})}function ql(s){return Ft(s)||pr(s)}function th(s){return null!==s}function Ac(s){return Ms(()=>({type:s.type,bootstrap:s.bootstrap||Wt,declarations:s.declarations||Wt,imports:s.imports||Wt,exports:s.exports||Wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Zl(s,o){if(null==s)return Pi;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=d,o&&(o[h]=p)}return c}function Kl(s){return Ms(()=>{const o=Wp(s);return Ql(o),o})}function Yl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[zo]||null}function pr(s){return s[va]||null}function gr(s){return s[Hl]||null}function Ia(s){const o=Ft(s)||pr(s)||gr(s);return null!==o&&o.standalone}function Vr(s,o){const c=s[zl]||null;if(!c&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return c}function Wp(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||Pi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Wt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zl(s.inputs,o),outputs:Zl(s.outputs)}}function Ql(s){s.features?.forEach(o=>o(s))}function po(s,o){if(!s)return null;const c=o?gr:ql;return()=>("function"==typeof s?s():s).map(d=>c(d)).filter(th)}const En=0,je=1,bt=2,hn=3,mi=4,Rs=5,mr=6,Go=7,Vn=8,ks=9,go=10,pt=11,Mc=12,xy=13,_i=14,er=15,Ea=16,yi=17,Br=18,Fs=19,qp=20,Wo=21,ds=22,Jl=23,Oi=24,Lt=25,sh=1,xc=2,jr=7,ba=9,tr=11;function ei(s){return Array.isArray(s)&&"object"==typeof s[sh]}function Mr(s){return Array.isArray(s)&&!0===s[sh]}function oh(s){return 0!=(4&s.flags)}function Ls(s){return s.componentOffset>-1}function Oc(s){return 1==(1&s.flags)}function Ni(s){return!!s.template}function Ta(s){return 0!=(512&s[bt])}function Us(s,o){return s.hasOwnProperty(Ps)?s[Ps]:null}let lr=null,dh=!1;function Hr(s){const o=lr;return lr=s,o}const hh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function By(s){if(!nu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!$y(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function jy(s){s.dirty=!0,function Qp(s){if(void 0===s.liveConsumerNode)return;const o=dh;dh=!0;try{for(const c of s.liveConsumerNode)c.dirty||jy(c)}finally{dh=o}}(s),s.consumerMarkedDirty?.(s)}function Jp(s){return s&&(s.nextProducerIndex=0),Hr(s)}function tu(s,o){if(Hr(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(nu(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)Rc(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function $y(s){_o(s);for(let o=0;o<s.producerNode.length;o++){const c=s.producerNode[o],d=s.producerLastReadVersion[o];if(d!==c.version||(By(c),d!==c.version))return!0}return!1}function ph(s){if(_o(s),nu(s))for(let o=0;o<s.producerNode.length;o++)Rc(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Rc(s,o){if(function zy(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),_o(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)Rc(s.producerNode[d],s.producerIndexOfThis[d]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[o],h=s.liveConsumerNode[o];_o(h),h.producerIndexOfThis[d]=o}}function nu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function _o(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Wy=null;function _h(s){const o=Hr(null);try{return s()}finally{Hr(o)}}const ig=()=>{},TE=(()=>({...hh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:ig}))();class Yy{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function yh(){return vh}function vh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vs),su}function su(){const s=Ch(this),o=s?.current;if(o){const c=s.previous;if(c===Pi)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Vs(s,o,c,d){const h=this.declaredInputs[c],p=Ch(s)||function Qy(s,o){return s[Aa]=o}(s,{previous:Pi,current:null}),v=p.current||(p.current={}),C=p.previous,b=C[h];v[h]=new Yy(b&&b.currentValue,o,C===Pi),s[d]=o}yh.ngInherit=!0;const Aa="__ngSimpleChanges__";function Ch(s){return s[Aa]||null}const hs=function(s,o,c){},sg="svg";function sn(s){for(;Array.isArray(s);)s=s[En];return s}function Bs(s,o){return sn(o[s])}function zr(s,o){return sn(o[s.index])}function Ih(s,o){return s.data[o]}function Ma(s,o){return s[o]}function ti(s,o){const c=o[s];return ei(c)?c:c[En]}function yo(s,o){return null==o?null:s[o]}function og(s){s[yi]=0}function Fc(s){1024&s[bt]||(s[bt]|=1024,Kn(s,1))}function Jy(s){1024&s[bt]&&(s[bt]&=-1025,Kn(s,-1))}function Kn(s,o){let c=s[hn];if(null===c)return;c[Rs]+=o;let d=c;for(c=c[hn];null!==c&&(1===o&&1===d[Rs]||-1===o&&0===d[Rs]);)c[Rs]+=o,d=c,c=c[hn]}const _t={lFrame:yg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xa(){return _t.bindingsEnabled}function ye(){return _t.lFrame.lView}function Bt(){return _t.lFrame.tView}function Yi(s){return _t.lFrame.contextLView=s,s[Vn]}function Dh(s){return _t.lFrame.contextLView=null,s}function _r(){let s=uu();for(;null!==s&&64===s.type;)s=s.parent;return s}function uu(){return _t.lFrame.currentTNode}function fs(s,o){const c=_t.lFrame;c.currentTNode=s,c.isParent=o}function hg(){return _t.lFrame.isParent}function yr(){const s=_t.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Vc(){return _t.lFrame.bindingIndex++}function ps(s){const o=_t.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function gg(s,o){const c=_t.lFrame;c.bindingIndex=c.bindingRootIndex=s,mg(o)}function mg(s){_t.lFrame.currentDirectiveIndex=s}function iv(){return _t.lFrame.currentQueryIndex}function _g(s){_t.lFrame.currentQueryIndex=s}function OE(s){const o=s[je];return 2===o.type?o.declTNode:1===o.type?s[mr]:null}function Ah(s,o,c){if(c&dt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&dt.Host||(h=OE(p),null===h||(p=p[_i],10&h.type))););if(null===h)return!1;o=h,s=p}const d=_t.lFrame=js();return d.currentTNode=o,d.lView=s,!0}function ni(s){const o=js(),c=s[je];_t.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function js(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?yg(s):o}function yg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function fn(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const lt=fn;function vr(){const s=fn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return _t.lFrame.selectedIndex}function $s(s){_t.lFrame.selectedIndex=s}function yn(){const s=_t.lFrame;return Ih(s.tView,s.selectedIndex)}function wo(){_t.lFrame.currentNamespace=sg}function wt(){!function sv(){_t.lFrame.currentNamespace=null}()}let Bc=!0;function Hs(){return Bc}function zs(s){Bc=s}function Pa(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:M}=p;v&&(s.contentHooks??=[]).push(-c,v),C&&((s.contentHooks??=[]).push(c,C),(s.contentCheckHooks??=[]).push(c,C)),b&&(s.viewHooks??=[]).push(-c,b),D&&((s.viewHooks??=[]).push(c,D),(s.viewCheckHooks??=[]).push(c,D)),null!=M&&(s.destroyHooks??=[]).push(c,M)}}function Oa(s,o,c){fu(s,o,3,c)}function Na(s,o,c,d){(3&s[bt])===c&&fu(s,o,c,d)}function hu(s,o){let c=s[bt];(3&c)===o&&(c&=8191,c+=1,s[bt]=c)}function fu(s,o,c,d){const p=d??-1,v=o.length-1;let C=0;for(let b=void 0!==d?65535&s[yi]:0;b<v;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=d&&C>=d)break}else o[b]<0&&(s[yi]+=65536),(C<p||-1==p)&&(jc(s,c,o,b),s[yi]=(4294901760&s[yi])+b+2),b++}function Gs(s,o){hs(4,s,o);const c=Hr(null);try{o.call(s)}finally{Hr(c),hs(5,s,o)}}function jc(s,o,c,d){const h=c[d]<0,p=c[d+1],C=s[h?-c[d]:c[d]];h?s[bt]>>13<s[yi]>>16&&(3&s[bt])===o&&(s[bt]+=8192,Gs(C,p)):Gs(C,p)}const gs=-1;class Zo{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function gu(s){return s!==gs}function vi(s){return 32767&s}function on(s,o){let c=function Bn(s){return s>>16}(s),d=o;for(;c>0;)d=d[_i],c--;return d}let Ra=!0;function Cr(s){const o=Ra;return Ra=s,o}const zc=255,Gc=5;let ov=0;const nr={};function bn(s,o){const c=mu(s,o);if(-1!==c)return c;const d=o[je];d.firstCreatePass&&(s.injectorIndex=o.length,ms(d.data,s),ms(o,null),ms(d.blueprint,null));const h=Yo(s,o),p=s.injectorIndex;if(gu(h)){const v=vi(h),C=on(h,o),b=C[je].data;for(let D=0;D<8;D++)o[p+D]=C[v+D]|b[v+D]}return o[p+8]=h,p}function ms(s,o){s.push(0,0,0,0,0,0,0,0,o)}function mu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Yo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=o;for(;null!==h;){if(d=Dg(h),null===d)return gs;if(c++,h=h[_i],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return gs}function ka(s,o,c){!function Eo(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ca)&&(d=c[Ca]),null==d&&(d=c[Ca]=ov++);const h=d&zc;o.data[s+(h>>Gc)]|=1<<h}(s,o,c)}function Oh(s,o,c){if(c&dt.Optional||void 0!==s)return s;Ue()}function Fa(s,o,c,d){if(c&dt.Optional&&void 0===d&&(d=null),!(c&(dt.Self|dt.Host))){const h=s[ks],p=rn(void 0);try{return h?h.get(o,d,c&dt.Optional):Jr(o,d,c&dt.Optional)}finally{rn(p)}}return Oh(d,0,c)}function Nh(s,o,c,d=dt.Default,h){if(null!==s){if(2048&o[bt]&&!(d&dt.Self)){const v=function Tg(s,o,c,d,h){let p=s,v=o;for(;null!==p&&null!==v&&2048&v[bt]&&!(512&v[bt]);){const C=_u(p,v,c,d|dt.Self,nr);if(C!==nr)return C;let b=p.parent;if(!b){const D=v[qp];if(D){const M=D.get(c,nr,d);if(M!==nr)return M}b=Dg(v),v=v[_i]}p=b}return h}(s,o,c,d,nr);if(v!==nr)return v}const p=_u(s,o,c,d,nr);if(p!==nr)return p}return Fa(o,c,d,h)}function _u(s,o,c,d,h){const p=function To(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ca)?s[Ca]:void 0;return"number"==typeof o?o>=0?o&zc:Do:o}(c);if("function"==typeof p){if(!Ah(o,s,d))return d&dt.Host?Oh(h,0,d):Fa(o,c,d,h);try{let v;if(v=p(d),null!=v||d&dt.Optional)return v;Ue()}finally{lt()}}else if("number"==typeof p){let v=null,C=mu(s,o),b=gs,D=d&dt.Host?o[er][mr]:null;for((-1===C||d&dt.SkipSelf)&&(b=-1===C?Yo(s,o):o[C+8],b!==gs&&Ig(d,!1)?(v=o[je],C=vi(b),o=on(b,o)):C=-1);-1!==C;){const M=o[je];if(wg(p,C,M.data)){const k=Dt(C,o,c,v,d,D);if(k!==nr)return k}b=o[C+8],b!==gs&&Ig(d,o[je].data[C+8]===D)&&wg(p,C,o)?(v=M,C=vi(b),o=on(b,o)):C=-1}}return h}function Dt(s,o,c,d,h,p){const v=o[je],C=v.data[s+8],M=bo(C,v,c,null==d?Ls(C)&&Ra:d!=v&&0!=(3&C.type),h&dt.Host&&p===C);return null!==M?Qo(o,v,M,C):nr}function bo(s,o,c,d,h){const p=s.providerIndexes,v=o.data,C=1048575&p,b=s.directiveStart,M=p>>20,q=h?C+M:s.directiveEnd;for(let Y=d?C:C+M;Y<q;Y++){const ae=v[Y];if(Y<b&&c===ae||Y>=b&&ae.type===c)return Y}if(h){const Y=v[b];if(Y&&Ni(Y)&&Y.type===c)return b}return null}function Qo(s,o,c,d){let h=s[c];const p=o.data;if(function pu(s){return s instanceof Zo}(h)){const v=h;v.resolving&&function ke(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${c}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[c]));const C=Cr(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?rn(v.injectImpl):null;Ah(s,d,dt.Default);try{h=s[c]=v.factory(void 0,p,s,d),o.firstCreatePass&&c>=d.directiveStart&&function ri(s,o,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const v=vh(o);(c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v)}h&&(c.preOrderHooks??=[]).push(0-s,h),p&&((c.preOrderHooks??=[]).push(s,p),(c.preOrderCheckHooks??=[]).push(s,p))}(c,p[c],o)}finally{null!==D&&rn(D),Cr(C),v.resolving=!1,lt()}}return h}function wg(s,o,c){return!!(c[o+(s>>Gc)]&1<<s)}function Ig(s,o){return!(s&dt.Self||s&dt.Host&&o)}class rr{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return Nh(this._tNode,this._lView,o,Zt(d),c)}}function Do(){return new rr(_r(),ye())}function bg(s){return Ms(()=>{const o=s.prototype.constructor,c=o[Ps]||yu(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Ps]||yu(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function yu(s){return Ae(s)?()=>{const o=yu(ve(s));return o&&o()}:Us(s)}function Dg(s){const o=s[je],c=o.type;return 2===c?o.declTNode:1===c?s[mr]:null}function vu(s){return function Cg(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const p=c[h];if(Os(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(_r(),s)}const Jo="__parameters__";function Ht(s,o,c){return Ms(()=>{const d=function So(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const v=new h(...p);return C.annotation=v,C;function C(b,D,M){const k=b.hasOwnProperty(Jo)?b[Jo]:Object.defineProperty(b,Jo,{value:[]})[Jo];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(v),b}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function Ua(s,o){s.forEach(c=>Array.isArray(c)?Ua(c,o):o(c))}function cv(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Va(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ci(s,o,c){let d=Ba(s,o);return d>=0?s[1|d]=c:(d=~d,function Mg(s,o,c,d){let h=s.length;if(h==o)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function Fh(s,o){const c=Ba(s,o);if(c>=0)return s[1|c]}function Ba(s,o){return function Tu(s,o,c){let d=0,h=s.length>>c;for(;h!==d;){const p=d+(h-d>>1),v=s[p<<c];if(o===v)return p<<c;v>o?h=p:d=p+1}return~(h<<c)}(s,o,1)}const oe=dn(Ht("Optional"),8),$e=dn(Ht("SkipSelf"),4);function Og(s){return 128==(128&s.flags)}var Vh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Vh||{});const Bh=new Map;let _x=0;const kg="__ngContext__";function oi(s,o){ei(o)?(s[kg]=o[Fs],function jE(s){Bh.set(s[Fs],s)}(o)):s[kg]=o}let Hh;function Qi(s,o){return Hh(s,o)}function ra(s){const o=s[hn];return Mr(o)?o[hn]:o}function zE(s){return zh(s[Mc])}function wv(s){return zh(s[mi])}function zh(s){for(;null!==s&&!Mr(s);)s=s[mi];return s}function Pu(s,o,c,d,h){if(null!=d){let p,v=!1;Mr(d)?p=d:ei(d)&&(v=!0,d=d[En]);const C=sn(d);0===s&&null!==c?null==h?ZE(o,c,C):nl(o,c,C,h||null,!0):1===s&&null!==c?nl(o,c,C,h||null,!0):2===s?function Bg(s,o,c){const d=Vg(s,o);d&&function Ox(s,o,c,d){s.removeChild(o,c,d)}(s,d,o,c)}(o,C,v):3===s&&o.destroyNode(C),null!=p&&function Rx(s,o,c,d,h){const p=c[jr];p!==sn(c)&&Pu(o,s,d,p,h);for(let C=tr;C<c.length;C++){const b=c[C];Yh(b[je],b,s,o,d,p)}}(o,s,p,c,h)}}function Lg(s,o,c){return s.createElement(o,c)}function GE(s,o){const c=s[ba],d=c.indexOf(o);Jy(o),c.splice(d,1)}function Ug(s,o){if(s.length<=tr)return;const c=tr+o,d=s[c];if(d){const h=d[Ea];null!==h&&h!==s&&GE(h,d),o>0&&(s[c-1][mi]=d[mi]);const p=Va(s,tr+o);!function Sx(s,o){Yh(s,o,o[pt],2,null,null),o[En]=null,o[mr]=null}(d[je],d);const v=p[Br];null!==v&&v.detachView(p[je]),d[hn]=null,d[mi]=null,d[bt]&=-129}return d}function Iv(s,o){if(!(256&o[bt])){const c=o[pt];o[Jl]&&ph(o[Jl]),o[Oi]&&ph(o[Oi]),c.destroyNode&&Yh(s,o,c,3,null,null),function Ax(s){let o=s[Mc];if(!o)return WE(s[je],s);for(;o;){let c=null;if(ei(o))c=o[Mc];else{const d=o[tr];d&&(c=d)}if(!c){for(;o&&!o[mi]&&o!==s;)ei(o)&&WE(o[je],o),o=o[hn];null===o&&(o=s),ei(o)&&WE(o[je],o),c=o&&o[mi]}o=c}}(o)}}function WE(s,o){if(!(256&o[bt])){o[bt]&=-129,o[bt]|=256,function qE(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=o[c[d]];if(!(h instanceof Zo)){const p=c[d+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=h[p[v]],b=p[v+1];hs(4,C,b);try{b.call(C)}finally{hs(5,C,b)}}else{hs(4,h,p);try{p.call(h)}finally{hs(5,h,p)}}}}}(s,o),function Px(s,o){const c=s.cleanup,d=o[Go];if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const v=c[p+3];v>=0?d[v]():d[-v].unsubscribe(),p+=2}else c[p].call(d[c[p+1]]);null!==d&&(o[Go]=null);const h=o[Wo];if(null!==h){o[Wo]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[je].type&&o[pt].destroy();const c=o[Ea];if(null!==c&&Mr(o[hn])){c!==o[hn]&&GE(c,o);const d=o[Br];null!==d&&d.detachView(s)}!function jh(s){Bh.delete(s[Fs])}(o)}}function Ou(s,o,c){return function tl(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[En];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===xs.None||p===xs.Emulated)return null}return zr(d,c)}}(s,o.parent,c)}function nl(s,o,c,d,h){s.insertBefore(o,c,d,h)}function ZE(s,o,c){s.appendChild(o,c)}function KE(s,o,c,d,h){null!==d?nl(s,o,c,d,h):ZE(s,o,c)}function Vg(s,o){return s.parentNode(o)}let bv,tb,$g,Ev=function QE(s,o,c){return 40&s.type?zr(s,c):null};function Zh(s,o,c,d){const h=Ou(s,d,o),p=o[pt],C=function YE(s,o,c){return Ev(s,o,c)}(d.parent||o[mr],d,o);if(null!=h)if(Array.isArray(c))for(let b=0;b<c.length;b++)KE(p,h,c[b],C,!1);else KE(p,h,c,C,!1);void 0!==bv&&bv(p,d,o,c,h)}function xo(s,o){if(null!==o){const c=o.type;if(3&c)return zr(o,s);if(4&c)return Dv(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return xo(s,d);{const h=s[o.index];return Mr(h)?Dv(-1,h):sn(h)}}if(32&c)return Qi(o,s)()||sn(s[o.index]);{const d=Tv(s,o);return null!==d?Array.isArray(d)?d[0]:xo(ra(s[er]),d):xo(s,o.next)}}return null}function Tv(s,o){return null!==o?s[er][mr].projection[o.projection]:null}function Dv(s,o){const c=tr+s+1;if(c<o.length){const d=o[c],h=d[je].firstChild;if(null!==h)return xo(d,h)}return o[jr]}function Kh(s,o,c,d,h,p,v){for(;null!=c;){const C=d[c.index],b=c.type;if(v&&0===o&&(C&&oi(sn(C),d),c.flags|=2),32!=(32&c.flags))if(8&b)Kh(s,o,c.child,d,h,p,!1),Pu(o,s,h,C,p);else if(32&b){const D=Qi(c,d);let M;for(;M=D();)Pu(o,s,h,M,p);Pu(o,s,h,C,p)}else 16&b?Av(s,o,d,c,h,p):Pu(o,s,h,C,p);c=v?c.projectionNext:c.next}}function Yh(s,o,c,d,h,p){Kh(c,d,s.firstChild,o,h,p,!1)}function Av(s,o,c,d,h,p){const v=c[er],b=v[mr].projection[d.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)Pu(o,s,h,b[D],p);else{let D=b;const M=v[hn];Og(d)&&(D.flags|=128),Kh(s,o,D,M,h,p,!0)}}function XE(s,o,c){""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c)}function Qh(s,o,c){const{mergedAttrs:d,classes:h,styles:p}=c;null!==d&&wa(s,o,d),null!==h&&XE(s,o,h),null!==p&&function Fx(s,o,c){s.setAttribute(o,"style",c)}(s,o,p)}function nb(s){tb=s}function sb(s){return function xv(){if(void 0===$g&&($g=null,Rt.trustedTypes))try{$g=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return $g}()?.createScriptURL(s)||s}class ob{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function $a(s){return s instanceof ob?s.changingThisBreaksApplicationSecurity:s}function ku(s,o){const c=function Hg(s){return s instanceof ob&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${ot})`)}return c===o}const Jh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var tf=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(tf||{});function nf(s){const o=rf();return o?o.sanitize(tf.URL,s)||"":ku(s,"URL")?$a(s):function Gg(s){return(s=String(s)).match(Jh)?s:"unsafe:"+s}(re(s))}function gb(s){const o=rf();if(o)return sb(o.sanitize(tf.RESOURCE_URL,s)||"");if(ku(s,"ResourceURL"))return sb($a(s));throw new ee(904,!1)}function Qx(s,o,c){return function Yx(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?gb:nf}(o,c)(s)}function rf(){const s=ye();return s&&s[go].sanitizer}class an{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ft({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fu=new an("ENVIRONMENT_INITIALIZER"),_b=new an("INJECTOR",-1),yb=new an("INJECTOR_DEF_TYPES");class qg{get(o,c=it){if(c===it){const d=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw d.name="NullInjectorError",d}return c}}function Fv(s){return{\u0275providers:s}}function Jx(...s){return{\u0275providers:vb(0,s),\u0275fromNgModule:!0}}function vb(s,...o){const c=[],d=new Set;let h;const p=v=>{c.push(v)};return Ua(o,v=>{const C=v;Zg(C,p,[],d)&&(h||=[],h.push(C))}),void 0!==h&&Cb(h,p),c}function Cb(s,o){for(let c=0;c<s.length;c++){const{ngModule:d,providers:h}=s[c];Lv(h,p=>{o(p,d)})}}function Zg(s,o,c,d){if(!(s=ve(s)))return!1;let h=null,p=Ar(s);const v=!p&&Ft(s);if(p||v){if(v&&!v.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Ar(b),!p)return!1;h=b}const C=d.has(h);if(v){if(C)return!1;if(d.add(h),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const D of b)Zg(D,o,c,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let D;d.add(h);try{Ua(p.imports,M=>{Zg(M,o,c,d)&&(D||=[],D.push(M))})}finally{}void 0!==D&&Cb(D,o)}if(!C){const D=Us(h)||(()=>new h);o({provide:h,useFactory:D,deps:Wt},h),o({provide:yb,useValue:h,multi:!0},h),o({provide:Fu,useValue:()=>Be(h),multi:!0},h)}const b=p.providers;if(null!=b&&!C){const D=s;Lv(b,M=>{o(M,D)})}}}return h!==s&&void 0!==s.providers}function Lv(s,o){for(let c of s)De(c)&&(c=c.\u0275providers),Array.isArray(c)?Lv(c,o):o(c)}const Q3=U({provide:String,useValue:U});function wb(s){return null!==s&&"object"==typeof s&&Q3 in s}function Lu(s){return"function"==typeof s}const V=new an("Set Injector scope."),Kg={},il={};let Uv;function Yg(){return void 0===Uv&&(Uv=new qg),Uv}class Po{}class sf extends Po{get destroyed(){return this._destroyed}constructor(o,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bv(o,v=>this.processProvider(v)),this.records.set(_b,Uu(void 0,this)),h.has("environment")&&this.records.set(Po,Uu(void 0,this));const p=this.records.get(V);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(yb.multi,Wt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=K(this),d=rn(void 0);try{return o()}finally{K(c),rn(d)}}get(o,c=it,d=dt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Gl))return o[Gl](this);d=Zt(d);const p=K(this),v=rn(void 0);try{if(!(d&dt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function sP(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(o)&&In(o);b=D&&this.injectableDefInScope(D)?Uu(Vv(o),Kg):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&dt.Self?Yg():this.parent).get(o,c=d&dt.Optional&&c===it?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[Vt]=C[Vt]||[]).unshift(X(o)),p)throw C;return function xi(s,o,c,d){const h=s[Vt];throw o[O]&&h.unshift(o[O]),s.message=function bc(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[Vt]=null,s}(C,o,"R3InjectorError",this.source)}throw C}finally{rn(v),K(p)}}resolveInjectorInitializers(){const o=K(this),c=rn(void 0);try{const h=this.get(Fu.multi,Wt,dt.Self);for(const p of h)p()}finally{K(o),rn(c)}}toString(){const o=[],c=this.records;for(const d of c.keys())o.push(X(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let c=Lu(o=ve(o))?o:ve(o&&o.provide);const d=function nP(s){return wb(s)?Uu(void 0,s.useValue):Uu(Ib(s),Kg)}(o);if(Lu(o)||!0!==o.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Uu(void 0,Kg,!0),h.factory=()=>vt(h.multi),this.records.set(c,h)),c=o,h.multi.push(o)}this.records.set(c,d)}hydrate(o,c){return c.value===Kg&&(c.value=il,c.value=c.factory()),"object"==typeof c.value&&c.value&&function iP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ve(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Vv(s){const o=In(s),c=null!==o?o.factory:Us(s);if(null!==c)return c;if(s instanceof an)throw new ee(204,!1);if(s instanceof Function)return function Qg(s){const o=s.length;if(o>0)throw function Ao(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}(o,"?"),new ee(204,!1);const c=function pi(s){return s&&(s[ar]||s[Fr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ee(204,!1)}function Ib(s,o,c){let d;if(Lu(s)){const h=ve(s);return Us(h)||Vv(h)}if(wb(s))d=()=>ve(s.useValue);else if(function tP(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...vt(s.deps||[]));else if(function eP(s){return!(!s||!s.useExisting)}(s))d=()=>Be(ve(s.useExisting));else{const h=ve(s&&(s.useClass||s.provide));if(!function rP(s){return!!s.deps}(s))return Us(h)||Vv(h);d=()=>new h(...vt(s.deps))}return d}function Uu(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function Bv(s,o){for(const c of s)Array.isArray(c)?Bv(c,o):c&&De(c)?Bv(c.\u0275providers,o):o(c)}const Eb=new an("AppId",{providedIn:"root",factory:()=>oP}),oP="ng",bb=new an("Platform Initializer"),Ha=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aP=new an("CSP nonce",{providedIn:"root",factory:()=>function rl(){if(void 0!==tb)return tb;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Tb=(s,o,c)=>null;function Zv(s,o,c=!1){return Tb(s,o,c)}class Mb{}class xb{}class mP{resolveComponentFactory(o){throw function Qv(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let sm=(()=>{class s{static#e=this.NULL=new mP}return s})();function _P(){return Vu(_r(),ye())}function Vu(s,o){return new Qs(zr(s,o))}let Qs=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=_P}return s})();function yP(s){return s instanceof Qs?s.nativeElement:s}class Pb{}let vP=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function CP(){const s=ye(),c=ti(_r().index,s);return(ei(c)?c:s)[pt]}()}return s})(),wP=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class Ob{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Nb=new Ob("16.2.9"),Xv={};function Lb(s,o=null,c=null,d){const h=Ub(s,o,c,d);return h.resolveInjectorInitializers(),h}function Ub(s,o=null,c=null,d,h=new Set){const p=[c||Wt,Jx(s)];return d=d||("object"==typeof s?void 0:X(s)),new sf(p,o||Yg(),d||null,h)}let Js=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new qg;static create(c,d){if(Array.isArray(c))return Lb({name:""},d,c,"");{const h=c.name??"";return Lb({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Be(_b)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function t0(s){return s.ngOriginalError}class Ga{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&t0(o);for(;c&&t0(c);)c=t0(c);return c||null}}function r0(s){return o=>{setTimeout(s,void 0,o)}}const Oo=class TP extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){let h=o,p=c||(()=>null),v=d;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=r0(p),h&&(h=r0(h)),v&&(v=r0(v)));const C=super.subscribe({next:h,error:p,complete:v});return o instanceof B.w0&&o.add(C),C}};function Bb(...s){}class Pr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oo(!1),this.onMicrotaskEmpty=new Oo(!1),this.onStable=new Oo(!1),this.onError=new Oo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Bu(){const s="function"==typeof Rt.requestAnimationFrame;let o=Rt[s?"requestAnimationFrame":"setTimeout"],c=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&c){const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function MP(s){const o=()=>{!function AP(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ju(s),s.isCheckStableRunning=!0,s0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ju(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,p,v,C)=>{if(function PP(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return c.invokeTask(h,p,v,C);try{return jb(s),c.invokeTask(h,p,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),$b(s)}},onInvoke:(c,d,h,p,v,C,b)=>{try{return jb(s),c.invoke(h,p,v,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),$b(s)}},onHasTask:(c,d,h,p)=>{c.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,ju(s),s0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Pr.isInAngularZone())throw new ee(909,!1)}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,SP,Bb,Bb);try{return p.runTask(v,c,d)}finally{p.cancelTask(v)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const SP={};function s0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ju(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function jb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $b(s){s._nesting--,s0(s)}class xP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oo,this.onMicrotaskEmpty=new Oo,this.onStable=new Oo,this.onError=new Oo}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,h){return o.apply(c,d)}}const Hb=new an("",{providedIn:"root",factory:zb});function zb(){const s=Ke(Pr);let o=!0;const c=new L.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),d=new L.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Pr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const v=s.onUnstable.subscribe(()=>{Pr.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),v.unsubscribe()}});return(0,te.T)(c,d.pipe((0,Pe.B)()))}function sa(s){return s instanceof Function?s():s}let o0=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function uf(s){for(;s;){s[bt]|=64;const o=ra(s);if(Ta(s)&&!o)return s;s=o}return null}const a0=new an("",{providedIn:"root",factory:()=>!1});let hf=null;function Qb(s,o){return s[o]??eT()}function Jb(s,o){const c=eT();c.producerNode?.length&&(s[o]=hf,c.lView=s,hf=Xb())}const BP={...hh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{uf(s.lView)},lView:null};function Xb(){return Object.create(BP)}function eT(){return hf??=Xb(),hf}const It={};function tT(s){nT(Bt(),ye(),Gr()+s,!1)}function nT(s,o,c,d){if(!d)if(3==(3&o[bt])){const p=s.preOrderCheckHooks;null!==p&&Oa(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Na(o,p,0,c)}$s(c)}function cl(s,o=dt.Default){const c=ye();return null===c?Be(s,o):Nh(_r(),c,ve(s),o)}function l0(){throw new Error("invalid")}function ff(s,o,c,d,h,p,v,C,b,D,M){const k=o.blueprint.slice();return k[En]=h,k[bt]=140|d,(null!==D||s&&2048&s[bt])&&(k[bt]|=2048),og(k),k[hn]=k[_i]=s,k[Vn]=c,k[go]=v||s&&s[go],k[pt]=C||s&&s[pt],k[ks]=b||s&&s[ks]||null,k[mr]=p,k[Fs]=function Rg(){return _x++}(),k[ds]=M,k[qp]=D,k[er]=2==o.type?s[er]:k,k}function Wu(s,o,c,d,h){let p=s.data[o];if(null===p)p=function u0(s,o,c,d,h){const p=uu(),v=hg(),b=s.data[o]=function qP(s,o,c,d,h,p){let v=o?o.injectorIndex:-1,C=0;return function vo(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:c,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,c,o,d,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,c,d,h),function xE(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=c,p.value=d,p.attrs=h;const v=function Uc(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return fs(p,!0),p}function qu(s,o,c,d){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function rT(s,o,c,d,h){const p=Qb(o,Jl),v=Gr(),C=2&d;try{$s(-1),C&&o.length>Lt&&nT(s,o,Lt,!1),hs(C?2:0,h);const D=C?p:null,M=Jp(D);try{null!==D&&(D.dirty=!1),c(d,h)}finally{tu(D,M)}}finally{C&&null===o[Jl]&&Jb(o,Jl),$s(v),hs(C?3:1,h)}}function d0(s,o,c){if(oh(o)){const d=Hr(null);try{const p=o.directiveEnd;for(let v=o.directiveStart;v<p;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,c[v],v)}}finally{Hr(d)}}}function h0(s,o,c){xa()&&(function eO(s,o,c,d){const h=c.directiveStart,p=c.directiveEnd;Ls(c)&&function _0(s,o,c){const d=zr(o,s),h=iT(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const C=am(s,ff(s,h,null,v,d,o,null,s[go].rendererFactory.createRenderer(d,c),null,null,null));s[o.index]=C}(o,c,s.data[h+c.componentOffset]),s.firstCreatePass||bn(c,o),oi(d,o);const v=c.initialInputs;for(let C=h;C<p;C++){const b=s.data[C],D=Qo(o,s,C,c);oi(D,o),null!==v&&oO(0,C-h,D,b,0,v),Ni(b)&&(ti(c.index,o)[Vn]=Qo(o,s,C,c))}}(s,o,c,zr(c,o)),64==(64&c.flags)&&uT(s,o,c))}function f0(s,o,c=zr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const v=d[p+1],C=-1===v?c(o,s):s[v];s[h++]=C}}}function iT(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=p0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function p0(s,o,c,d,h,p,v,C,b,D,M){const k=Lt+d,q=k+h,Y=function sT(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:It);return c}(k,q),ae="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:o,data:Y.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:ae,incompleteFirstPass:!1,ssrId:M}}let oT=s=>null;function aT(s,o,c,d){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const p=s[h];null===d?cT(c,o,h,p):d.hasOwnProperty(h)&&cT(c,o,d[h],p)}return c}function cT(s,o,c,d){s.hasOwnProperty(c)?s[c].push(o,d):s[c]=[o,d]}function Ji(s,o,c,d,h,p,v,C){const b=zr(o,c);let M,D=o.inputs;!C&&null!=D&&(M=D[d])?(w0(s,c,M,d,h),Ls(o)&&function YP(s,o){const c=ti(o,s);16&c[bt]||(c[bt]|=64)}(c,o.index)):3&o.type&&(d=function KP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,p.setProperty(b,d,h))}function g0(s,o,c,d){if(xa()){const h=null===d?null:{"":-1},p=function nO(s,o){const c=s.directiveRegistry;let d=null,h=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];if(Jd(o,v.selectors,!1))if(d||(d=[]),Ni(v))if(null!==v.findHostDirectiveDefs){const C=[];h=h||new Map,v.findHostDirectiveDefs(v,C,h),d.unshift(...C,v),m0(s,o,C.length)}else d.unshift(v),m0(s,o,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,d,h),d.push(v)}return null===d?null:[d,h]}(s,c);let v,C;null===p?v=C=null:[v,C]=p,null!==v&&lT(s,o,c,v,h,C),h&&function Tn(s,o,c){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new ee(-301,!1);d.push(o[h],p)}}}(c,d,h)}c.mergedAttrs=Dc(c.mergedAttrs,c.attrs)}function lT(s,o,c,d,h,p){for(let D=0;D<d.length;D++)ka(bn(c,o),s,d[D].type);!function iO(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}(c,s.data.length,d.length);for(let D=0;D<d.length;D++){const M=d[D];M.providersResolver&&M.providersResolver(M)}let v=!1,C=!1,b=qu(s,o,d.length,null);for(let D=0;D<d.length;D++){const M=d[D];c.mergedAttrs=Dc(c.mergedAttrs,M.hostAttrs),sO(s,c,o,b,M),rO(b,M,h),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const k=M.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),v=!0),!C&&(k.ngOnChanges||k.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),C=!0),b++}!function ZP(s,o,c){const h=o.directiveEnd,p=s.data,v=o.attrs,C=[];let b=null,D=null;for(let M=o.directiveStart;M<h;M++){const k=p[M],q=c?c.get(k):null,ae=q?q.outputs:null;b=aT(k.inputs,M,b,q?q.inputs:null),D=aT(k.outputs,M,D,ae);const _e=null===b||null===v||Ur(o)?null:aO(b,M,v);C.push(_e)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=D}(s,c,p)}function uT(s,o,c){const d=c.directiveStart,h=c.directiveEnd,p=c.index,v=function PE(){return _t.lFrame.currentDirectiveIndex}();try{$s(p);for(let C=d;C<h;C++){const b=s.data[C],D=o[C];mg(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&tO(b,D)}}finally{$s(-1),mg(v)}}function tO(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function m0(s,o,c){o.componentOffset=c,(s.components??=[]).push(o.index)}function rO(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;Ni(o)&&(c[""]=s)}}function sO(s,o,c,d,h){s.data[d]=h;const p=h.factory||(h.factory=Us(h.type)),v=new Zo(p,Ni(h),cl);s.blueprint[d]=v,c[d]=v,function JP(s,o,c,d,h){const p=h.hostBindings;if(p){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function XP(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(c,d,p)}}(s,o,d,qu(s,c,h.hostVars,It),h)}function Xs(s,o,c,d,h,p){const v=zr(s,o);!function ll(s,o,c,d,h,p,v){if(null==p)s.removeAttribute(o,h,c);else{const C=null==v?re(p):v(p,d||"",h);s.setAttribute(o,h,C,c)}}(o[pt],v,p,s.value,c,d,h)}function oO(s,o,c,d,h,p){const v=p[o];if(null!==v)for(let C=0;C<v.length;)om(d,c,v[C++],v[C++],v[C++])}function om(s,o,c,d,h){const p=Hr(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(h=v[d].call(o,h)),null!==s.setInput?s.setInput(o,h,c,d):o[d]=h}finally{Hr(p)}}function aO(s,o,c){let d=null,h=0;for(;h<c.length;){const p=c[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const v=s[p];for(let C=0;C<v.length;C+=2)if(v[C]===o){d.push(p,v[C+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function ul(s,o,c,d){return[s,!0,!1,o,null,0,d,c,null,null,null]}function y0(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const p=c[d+1];if(-1!==p){const v=s.data[p];_g(c[d]),v.contentQueries(2,o[p],p)}}}function am(s,o){return s[Mc]?s[xy][mi]=o:s[Mc]=o,s[xy]=o,o}function v0(s,o,c){_g(0);const d=Hr(null);try{o(s,c)}finally{Hr(d)}}function dT(s){return s[Go]||(s[Go]=[])}function hT(s){return s.cleanup||(s.cleanup=[])}function fT(s,o){const c=s[ks],d=c?c.get(Ga,null):null;d&&d.handleError(o)}function w0(s,o,c,d,h){for(let p=0;p<c.length;){const v=c[p++],C=c[p++];om(s.data[v],o[v],d,C,h)}}function eo(s,o,c){const d=Bs(o,s);!function Xc(s,o,c){s.setValue(o,c)}(s[pt],d,c)}function cO(s,o){const c=ti(o,s),d=c[je];!function pT(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])}(d,c);const h=c[En];null!==h&&null===c[ds]&&(c[ds]=Zv(h,c[ks])),I0(d,c,c[Vn])}function I0(s,o,c){ni(o);try{const d=s.viewQuery;null!==d&&v0(1,d,c);const h=s.template;null!==h&&rT(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&y0(s,o),s.staticViewQueries&&v0(2,s.viewQuery,c);const p=s.components;null!==p&&function lO(s,o){for(let c=0;c<o.length;c++)cO(s,o[c])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[bt]&=-5,vr()}}let gT=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,d,h){const p=typeof Zone>"u"?null:Zone.current,v=function Zy(s,o,c){const d=Object.create(TE);c&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=o;const h=v=>{d.cleanupFn=v};return d.ref={notify:()=>jy(d),run:()=>{if(d.dirty=!1,d.hasRun&&!$y(d))return;d.hasRun=!0;const v=Jp(d);try{d.cleanupFn(),d.cleanupFn=ig,d.fn(h)}finally{tu(d,v)}},cleanup:()=>d.cleanupFn()},d.ref}(c,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let C;this.all.add(v),v.notify();const b=()=>{v.cleanup(),C?.(),this.all.delete(v),this.queue.delete(v)};return C=d?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function cm(s,o,c){let d=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?p=C:1==p?h=Oe(h,C):2==p&&(d=Oe(d,C+": "+o[++v]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}function pf(s,o,c,d,h=!1){for(;null!==c;){const p=o[c.index];null!==p&&d.push(sn(p)),Mr(p)&&mT(p,d);const v=c.type;if(8&v)pf(s,o,c.child,d);else if(32&v){const C=Qi(c,o);let b;for(;b=C();)d.push(b)}else if(16&v){const C=Tv(o,c);if(Array.isArray(C))d.push(...C);else{const b=ra(o[er]);pf(b[je],b,C,d,!0)}}c=h?c.projectionNext:c.next}return d}function mT(s,o){for(let c=tr;c<s.length;c++){const d=s[c],h=d[je].firstChild;null!==h&&pf(d[je],d,h,o)}s[jr]!==s[En]&&o.push(s[jr])}function gf(s,o,c,d=!0){const h=o[go],p=h.rendererFactory,v=h.afterRenderEventManager;p.begin?.(),v?.begin();try{_T(s,o,s.template,c)}catch(b){throw d&&fT(o,b),b}finally{p.end?.(),h.effectManager?.flush(),v?.end()}}function _T(s,o,c,d){const h=o[bt];if(256!=(256&h)){o[go].effectManager?.flush(),ni(o);try{og(o),function rv(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&rT(s,o,c,2,d);const v=3==(3&h);if(v){const D=s.preOrderCheckHooks;null!==D&&Oa(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Na(o,D,0,null),hu(o,0)}if(function dO(s){for(let o=zE(s);null!==o;o=wv(o)){if(!o[xc])continue;const c=o[ba];for(let d=0;d<c.length;d++){Fc(c[d])}}}(o),yT(o,2),null!==s.contentQueries&&y0(s,o),v){const D=s.contentCheckHooks;null!==D&&Oa(o,D)}else{const D=s.contentHooks;null!==D&&Na(o,D,1),hu(o,1)}!function jP(s,o){const c=s.hostBindingOpCodes;if(null===c)return;const d=Qb(o,Oi);try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)$s(~p);else{const v=p,C=c[++h],b=c[++h];gg(C,v),d.dirty=!1;const D=Jp(d);try{b(2,o[v])}finally{tu(d,D)}}}}finally{null===o[Oi]&&Jb(o,Oi),$s(-1)}}(s,o);const C=s.components;null!==C&&CT(o,C,0);const b=s.viewQuery;if(null!==b&&v0(2,b,d),v){const D=s.viewCheckHooks;null!==D&&Oa(o,D)}else{const D=s.viewHooks;null!==D&&Na(o,D,2),hu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[bt]&=-73,Jy(o)}finally{vr()}}}function yT(s,o){for(let c=zE(s);null!==c;c=wv(c))for(let d=tr;d<c.length;d++)vT(c[d],o)}function hO(s,o,c){vT(ti(o,s),c)}function vT(s,o){if(!function AE(s){return 128==(128&s[bt])}(s))return;const c=s[je],d=s[bt];if(80&d&&0===o||1024&d||2===o)_T(c,s,c.template,s[Vn]);else if(s[Rs]>0){yT(s,1);const h=c.components;null!==h&&CT(s,h,1)}}function CT(s,o,c){for(let d=0;d<o.length;d++)hO(s,o[d],c)}class mf{get rootNodes(){const o=this._lView,c=o[je];return pf(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(o){this._lView[Vn]=o}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[hn];if(Mr(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(Ug(o,d),Va(c,d))}this._attachedToViewContainer=!1}Iv(this._lView[je],this._lView)}onDestroy(o){!function bh(s,o){if(256==(256&s[bt]))throw new ee(911,!1);null===s[Wo]&&(s[Wo]=[]),s[Wo].push(o)}(this._lView,o)}markForCheck(){uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){gf(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wh(s,o){Yh(s,o,o[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class fO extends mf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;gf(o[je],o,o[Vn],!1)}checkNoChanges(){}get context(){return null}}class wT extends sm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Ft(o);return new Zu(c,this.ngModule)}}function lm(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class gO{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,d){d=Zt(d);const h=this.injector.get(o,Xv,d);return h!==Xv||c===Xv?h:this.parentInjector.get(o,c,d)}}class Zu extends xb{get inputs(){const o=this.componentDef,c=o.inputTransforms,d=lm(o.inputs);if(null!==c)for(const h of d)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return d}get outputs(){return lm(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function vE(s){return s.map(Gp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,d,h){let p=(h=h||this.ngModule)instanceof Po?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new gO(o,p):o,C=v.get(Pb,null);if(null===C)throw new ee(407,!1);const k={rendererFactory:C,sanitizer:v.get(wP,null),effectManager:v.get(gT,null),afterRenderEventManager:v.get(o0,null)},q=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ae=d?function $P(s,o,c,d){const p=d.get(a0,!1)||c===xs.ShadowDom,v=s.selectRootElement(o,p);return function HP(s){oT(s)}(v),v}(q,d,this.componentDef.encapsulation,v):Lg(q,Y,function pO(s){const o=s.toLowerCase();return"svg"===o?sg:"math"===o?"math":null}(Y)),rt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ie=null;null!==ae&&(Ie=Zv(ae,v,!0));const Ct=p0(0,null,null,1,0,null,null,null,null,null,null),Ot=ff(null,Ct,null,rt,null,null,k,q,v,null,Ie);let cn,$i;ni(Ot);try{const da=this.componentDef;let hd,Sl=null;da.findHostDirectiveDefs?(hd=[],Sl=new Map,da.findHostDirectiveDefs(da,hd,Sl),hd.push(da)):hd=[da];const ep=function mO(s,o){const c=s[je],d=Lt;return s[d]=o,Wu(c,d,2,"#host",null)}(Ot,ae),bw=function ET(s,o,c,d,h,p,v){const C=h[je];!function bT(s,o,c,d){for(const h of s)o.mergedAttrs=Dc(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(cm(o,o.mergedAttrs,!0),null!==c&&Qh(d,c,o))}(d,s,o,v);let b=null;null!==o&&(b=Zv(o,h[ks]));const D=p.rendererFactory.createRenderer(o,c);let M=16;c.signals?M=4096:c.onPush&&(M=64);const k=ff(h,iT(c),null,M,h[s.index],s,p,D,null,null,b);return C.firstCreatePass&&m0(C,s,d.length-1),am(h,k),h[s.index]=k}(ep,ae,da,hd,Ot,k,q);$i=Ih(Ct,Lt),ae&&function yO(s,o,c,d){if(d)wa(s,c,["ng-version",Nb.full]);else{const{attrs:h,classes:p}=function gi(s){const o=[],c=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&c.push(p);else{if(!Xr(h))break;h=p}d++}return{attrs:o,classes:c}}(o.selectors[0]);h&&wa(s,c,h),p&&p.length>0&&XE(s,c,p.join(" "))}}(q,da,ae,d),void 0!==c&&function vO(s,o,c){const d=s.projection=[];for(let h=0;h<o.length;h++){const p=c[h];d.push(null!=p?Array.from(p):null)}}($i,this.ngContentSelectors,c),cn=function _O(s,o,c,d,h,p){const v=_r(),C=h[je],b=zr(v,h);lT(C,h,v,c,null,d);for(let M=0;M<c.length;M++)oi(Qo(h,C,v.directiveStart+M,v),h);uT(C,h,v),b&&oi(b,h);const D=Qo(h,C,v.directiveStart+v.componentOffset,v);if(s[Vn]=h[Vn]=D,null!==p)for(const M of p)M(D,o);return d0(C,v,s),D}(bw,da,hd,Sl,Ot,[CO]),I0(Ct,Ot,null)}finally{vr()}return new IT(this.componentType,cn,Vu($i,Ot),Ot,$i)}}class IT extends Mb{constructor(o,c,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new fO(h),this.componentType=o}setInput(o,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const p=this._rootLView;w0(p[je],p,h,o,c),this.previousInputValues.set(o,c),uf(ti(this._tNode.index,p))}}get injector(){return new rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function CO(){const s=_r();Pa(ye()[je],s)}function b0(s){let o=function TT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let h;if(Ni(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(c){d.push(h);const v=s;v.inputs=_f(s.inputs),v.inputTransforms=_f(s.inputTransforms),v.declaredInputs=_f(s.declaredInputs),v.outputs=_f(s.outputs);const C=h.hostBindings;C&&DT(s,C);const b=h.viewQuery,D=h.contentQueries;if(b&&IO(s,b),D&&EO(s,D),W(s.inputs,h.inputs),W(s.declaredInputs,h.declaredInputs),W(s.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),W(v.inputTransforms,h.inputTransforms)),Ni(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(s),C===b0&&(c=!1)}}o=Object.getPrototypeOf(o)}!function wO(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Dc(h.hostAttrs,c=Dc(c,h.hostAttrs))}}(d)}function _f(s){return s===Pi?{}:s===Wt?[]:s}function IO(s,o){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{o(d,h),c(d,h)}:o}function EO(s,o){const c=s.contentQueries;s.contentQueries=c?(d,h,p)=>{o(d,h,p),c(d,h,p)}:o}function DT(s,o){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{o(d,h),c(d,h)}:o}function MT(s){const o=s.inputConfig,c={};for(const d in o)if(o.hasOwnProperty(d)){const h=o[d];Array.isArray(h)&&h[2]&&(c[d]=h[2])}s.inputTransforms=c}function um(s){return!!dm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function dm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function No(s,o,c){return s[o]=c}function ai(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function dl(s,o,c,d){const h=ai(s,o,c);return ai(s,o+1,d)||h}function vf(s,o,c,d){const h=ye();return ai(h,Vc(),o)&&(Bt(),Xs(yn(),h,s,o,c,d)),vf}function Wa(s,o,c,d){return ai(s,Vc(),c)?o+re(c)+d:It}function Qu(s,o,c,d,h,p){const C=dl(s,function Co(){return _t.lFrame.bindingIndex}(),c,h);return ps(2),C?o+re(c)+d+re(h)+p:It}function jT(s,o,c,d,h,p,v,C){const b=ye(),D=Bt(),M=s+Lt,k=D.firstCreatePass?function ZO(s,o,c,d,h,p,v,C,b){const D=o.consts,M=Wu(o,s,4,v||null,yo(D,C));g0(o,c,M,yo(D,b)),Pa(o,M);const k=M.tView=p0(2,M,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,D,b,o,c,d,h,p,v):D.data[M];fs(k,!1);const q=$T(D,b,k,s);Hs()&&Zh(D,b,q,k),oi(q,b),am(b,b[M]=ul(q,b,q,k)),Oc(k)&&h0(D,b,k),null!=v&&f0(b,k,C)}let $T=function HT(s,o,c,d){return zs(!0),o[pt].createComment("")};function GT(s){return Ma(function tv(){return _t.lFrame.contextLView}(),Lt+s)}function O0(s,o,c){const d=ye();return ai(d,Vc(),o)&&Ji(Bt(),yn(),d,s,o,d[pt],c,!1),O0}function N0(s,o,c,d,h){const v=h?"class":"style";w0(s,c,o.inputs[v],v,d)}function _m(s,o,c,d){const h=ye(),p=Bt(),v=Lt+s,C=h[pt],b=p.firstCreatePass?function QO(s,o,c,d,h,p){const v=o.consts,b=Wu(o,s,2,d,yo(v,h));return g0(o,c,b,yo(v,p)),null!==b.attrs&&cm(b,b.attrs,!1),null!==b.mergedAttrs&&cm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,h,o,c,d):p.data[v],D=WT(p,h,b,C,o,s);h[v]=D;const M=Oc(b);return fs(b,!0),Qh(C,D,b),32!=(32&b.flags)&&Hs()&&Zh(p,h,D,b),0===function cg(){return _t.lFrame.elementDepthCount}()&&oi(D,h),function lg(){_t.lFrame.elementDepthCount++}(),M&&(h0(p,h,b),d0(p,b,h)),null!==d&&f0(h,b),_m}function If(){let s=_r();hg()?function fg(){_t.lFrame.isParent=!1}():(s=s.parent,fs(s,!1));const o=s;(function Lc(s){return _t.skipHydrationRootTNode===s})(o)&&function dg(){_t.skipHydrationRootTNode=null}(),function Xy(){_t.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(Pa(c,s),oh(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Io(s){return 0!=(8&s.flags)}(o)&&N0(c,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hc(s){return 0!=(16&s.flags)}(o)&&N0(c,o,ye(),o.stylesWithoutHost,!1),If}function R0(s,o,c,d){return _m(s,o,c,d),If(),R0}let WT=(s,o,c,d,h,p)=>(zs(!0),Lg(d,h,function vg(){return _t.lFrame.currentNamespace}()));function F0(){return ye()}function L0(s){return!!s&&"function"==typeof s.then}function KT(s){return!!s&&"function"==typeof s.subscribe}function U0(s,o,c,d){const h=ye(),p=Bt(),v=_r();return function JT(s,o,c,d,h,p,v){const C=Oc(d),D=s.firstCreatePass&&hT(s),M=o[Vn],k=dT(o);let q=!0;if(3&d.type||v){const _e=zr(d,o),ze=v?v(_e):_e,rt=k.length,Ie=v?Ot=>v(sn(Ot[d.index])):d.index;let Ct=null;if(!v&&C&&(Ct=function QT(s,o,c,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===c&&h[p+1]===d){const C=o[Go],b=h[p+2];return C.length>b?C[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=p,Ct.__ngLastListenerFn__=p,q=!1;else{p=e1(d,o,M,p,!1);const Ot=c.listen(ze,h,p);k.push(p,Ot),D&&D.push(h,Ie,rt,rt+1)}}else p=e1(d,o,M,p,!1);const Y=d.outputs;let ae;if(q&&null!==Y&&(ae=Y[h])){const _e=ae.length;if(_e)for(let ze=0;ze<_e;ze+=2){const cn=o[ae[ze]][ae[ze+1]].subscribe(p),$i=k.length;k.push(p,cn),D&&D.push(h,d.index,$i,-($i+1))}}}(p,h,h[pt],v,s,o,d),U0}function XT(s,o,c,d){try{return hs(6,o,c),!1!==c(d)}catch(h){return fT(s,h),!1}finally{hs(7,o,c)}}function e1(s,o,c,d,h){return function p(v){if(v===Function)return d;uf(s.componentOffset>-1?ti(s.index,o):o);let b=XT(o,c,d,v),D=p.__ngNextListenerFn__;for(;D;)b=XT(o,c,D,v)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&v.preventDefault(),b}}function V0(s=1){return function du(s){return(_t.lFrame.contextLView=function Mh(s,o){for(;s>0;)o=o[_i],s--;return o}(s,_t.lFrame.contextLView))[Vn]}(s)}function B0(s,o,c){return vm(s,"",o,"",c),B0}function vm(s,o,c,d,h){const p=ye(),v=Wa(p,o,c,d);return v!==It&&Ji(Bt(),yn(),p,s,v,p[pt],h,!1),vm}function Cm(s,o){return s<<17|o<<2}function Ka(s){return s>>17&32767}function ed(s){return 2|s}function ml(s){return(131068&s)>>2}function j0(s,o){return-131069&s|o<<2}function $0(s){return 1|s}function H0(s,o,c,d,h){const p=s[c+1],v=null===o;let C=d?Ka(p):ml(p),b=!1;for(;0!==C&&(!1===b||v);){const M=s[C+1];z0(s[C],o)&&(b=!0,s[C+1]=d?$0(M):ed(M)),C=d?Ka(M):ml(M)}b&&(s[c+1]=d?ed(p):$0(p))}function z0(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ba(s,o)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function G0(s){return s.substring($n.key,$n.keyEnd)}function Cn(s,o){const c=$n.textEnd;return c===o?-1:(o=$n.keyEnd=function z(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,$n.key=o,c),Ir(s,o,c))}function Ir(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function W0(s,o){return function to(s,o,c,d){const h=ye(),p=Bt(),v=ps(2);p.firstUpdatePass&&m1(p,s,v,d),o!==It&&ai(h,v,o)&&y1(p,p.data[Gr()],h,h[pt],s,h[v+1]=function wN(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X($a(s)))),s}(o,c),d,v)}(s,o,null,!0),W0}function p1(s){!function no(s,o,c,d){const h=Bt(),p=ps(2);h.firstUpdatePass&&m1(h,null,p,d);const v=ye();if(c!==It&&ai(v,p,c)){const C=h.data[Gr()];if(C1(C,d)&&!g1(h,p)){let b=d?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(c=Oe(b,c||"")),N0(h,C,v,c,d)}else!function CN(s,o,c,d,h,p,v,C){h===It&&(h=Wt);let b=0,D=0,M=0<h.length?h[0]:null,k=0<p.length?p[0]:null;for(;null!==M||null!==k;){const q=b<h.length?h[b+1]:void 0,Y=D<p.length?p[D+1]:void 0;let _e,ae=null;M===k?(b+=2,D+=2,q!==Y&&(ae=k,_e=Y)):null===k||null!==M&&M<k?(b+=2,ae=M):(D+=2,ae=k,_e=Y),null!==ae&&y1(s,o,c,d,ae,_e,v,C),M=b<h.length?h[b]:null,k=D<p.length?p[D]:null}}(h,C,v,v[pt],v[p+1],v[p+1]=function yN(s,o,c){if(null==c||""===c)return Wt;const d=[],h=$a(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&o(d,h);return d}(s,o,c),d,p)}}(vN,ko,s,!0)}function ko(s,o){for(let c=function yU(s){return function wr(s){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=s.length}(s),Cn(s,Ir(s,0,$n.textEnd))}(o);c>=0;c=Cn(o,c))Ci(s,G0(o),!0)}function g1(s,o){return o>=s.expandoStartIndex}function m1(s,o,c,d){const h=s.data;if(null===h[c+1]){const p=h[Gr()],v=g1(s,c);C1(p,d)&&null===o&&!v&&(o=!1),o=function pN(s,o,c,d){const h=function Sh(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(c=Ef(c=q0(null,s,o,c,d),o.attrs,d),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(c=q0(h,s,o,c,d),null===p){let b=function gN(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==ml(d))return s[Ka(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=q0(null,s,o,b[1],d),b=Ef(b,o.attrs,d),function mN(s,o,c,d){s[Ka(c?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else p=function _N(s,o,c){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=Ef(d,s[p].hostAttrs,c);return Ef(d,o.attrs,c)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,d),function wm(s,o,c,d,h,p){let v=p?o.classBindings:o.styleBindings,C=Ka(v),b=ml(v);s[d]=c;let M,D=!1;if(Array.isArray(c)?(M=c[1],(null===M||Ba(c,M)>0)&&(D=!0)):M=c,h)if(0!==b){const q=Ka(s[C+1]);s[d+1]=Cm(q,C),0!==q&&(s[q+1]=j0(s[q+1],d)),s[C+1]=function vn(s,o){return 131071&s|o<<17}(s[C+1],d)}else s[d+1]=Cm(C,0),0!==C&&(s[C+1]=j0(s[C+1],d)),C=d;else s[d+1]=Cm(b,0),0===C?C=d:s[b+1]=j0(s[b+1],d),b=d;D&&(s[d+1]=ed(s[d+1])),H0(s,M,d,!0),H0(s,M,d,!1),function cN(s,o,c,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ba(p,o)>=0&&(c[d+1]=$0(c[d+1]))}(o,M,s,d,p),v=Cm(C,b),p?o.classBindings=v:o.styleBindings=v}(h,p,o,c,v,d)}}function q0(s,o,c,d,h){let p=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(p=o[C],d=Ef(d,p.hostAttrs,h),p!==s);)C++;return null!==s&&(c.directiveStylingLast=C),d}function Ef(s,o,c){const d=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ci(s,v,!!c||o[++p]))}return void 0===s?null:s}function vN(s,o,c){const d=String(o);""!==d&&!d.includes(" ")&&Ci(s,d,c)}function y1(s,o,c,d,h,p,v,C){if(!(3&o.type))return;const b=s.data,D=b[C+1],M=function aN(s){return 1==(1&s)}(D)?v1(b,o,c,h,ml(D),v):void 0;Em(M)||(Em(p)||function oN(s){return 2==(2&s)}(D)&&(p=v1(b,null,c,h,C,v)),function kx(s,o,c,d,h){if(o)h?s.addClass(c,d):s.removeClass(c,d);else{let p=-1===d.indexOf("-")?void 0:Vh.DashCase;null==h?s.removeStyle(c,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Vh.Important),s.setStyle(c,d,h,p))}}(d,v,Bs(Gr(),c),h,p))}function v1(s,o,c,d,h,p){const v=null===o;let C;for(;h>0;){const b=s[h],D=Array.isArray(b),M=D?b[1]:b,k=null===M;let q=c[h+1];q===It&&(q=k?Wt:void 0);let Y=k?Fh(q,d):M===d?q:void 0;if(D&&!Em(Y)&&(Y=Fh(b,d)),Em(Y)&&(C=Y,v))return C;const ae=s[h+1];h=v?Ka(ae):ml(ae)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(C=Fh(b,d))}return C}function Em(s){return void 0!==s}function C1(s,o){return 0!=(s.flags&(o?8:16))}function w1(s,o=""){const c=ye(),d=Bt(),h=s+Lt,p=d.firstCreatePass?Wu(d,h,1,o,null):d.data[h],v=bf(d,c,p,o,s);c[h]=v,Hs()&&Zh(d,c,v,p),fs(p,!1)}let bf=(s,o,c,d,h)=>(zs(!0),function Fg(s,o){return s.createText(o)}(o[pt],d));function td(s){return bm("",s,""),td}function bm(s,o,c){const d=ye(),h=Wa(d,s,o,c);return h!==It&&eo(d,Gr(),h),bm}function I1(s,o,c,d,h){const p=ye(),v=Qu(p,s,o,c,d,h);return v!==It&&eo(p,Gr(),v),I1}const Qa=void 0;var MN=["en",[["a","p"],["AM","PM"],Qa],[["AM","PM"],Qa,Qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qa,"{1} 'at' {0}",Qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AN(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let yl={};function Tm(s){const o=function xN(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=V1(o);if(c)return c;const d=o.split("-")[0];if(c=V1(d),c)return c;if("en"===d)return MN;throw new ee(701,!1)}function Dm(s){return Tm(s)[Ja.PluralCase]}function V1(s){return s in yl||(yl[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),yl[s]}var Ja=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Ja||{});const Xi="en-US";let Am=Xi;function IC(s,o,c,d,h){if(s=ve(s),Array.isArray(s))for(let p=0;p<s.length;p++)IC(s[p],o,c,d,h);else{const p=Bt(),v=ye(),C=_r();let b=Lu(s)?s:ve(s.provide);const D=Ib(s),M=1048575&C.providerIndexes,k=C.directiveStart,q=C.providerIndexes>>20;if(Lu(s)||!s.multi){const Y=new Zo(D,h,cl),ae=nD(b,o,h?M:M+q,k);-1===ae?(ka(bn(C,v),p,b),Nf(p,s,o.length),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(Y),v.push(Y)):(c[ae]=Y,v[ae]=Y)}else{const Y=nD(b,o,M+q,k),ae=nD(b,o,M,M+q),ze=ae>=0&&c[ae];if(h&&!ze||!h&&!(Y>=0&&c[Y])){ka(bn(C,v),p,b);const rt=function iR(s,o,c,d,h){const p=new Zo(s,c,cl);return p.multi=[],p.index=o,p.componentProviders=0,tD(p,h,d&&!c),p}(h?DU:EC,c.length,h,d,D);!h&&ze&&(c[ae].providerFactory=rt),Nf(p,s,o.length,0),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(rt),v.push(rt)}else Nf(p,s,Y>-1?Y:ae,tD(c[h?ae:Y],D,!h&&d));!h&&d&&ze&&c[ae].componentProviders++}}}function Nf(s,o,c,d){const h=Lu(o),p=function J3(s){return!!s.useClass}(o);if(h||p){const b=(p?ve(o.useClass):o).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=D.indexOf(c);-1===M?D.push(c,[d,b]):D[M+1].push(d,b)}else D.push(c,b)}}}function tD(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function nD(s,o,c,d){for(let h=c;h<d;h++)if(o[h]===s)return h;return-1}function EC(s,o,c,d){return rD(this.multi,[])}function DU(s,o,c,d){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Qo(c,c[je],this.providerFactory.index,d);p=C.slice(0,v),rD(h,p);for(let b=v;b<C.length;b++)p.push(C[b])}else p=[],rD(h,p);return p}function rD(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function Vm(s,o=[]){return c=>{c.providersResolver=(d,h)=>function wC(s,o,c){const d=Bt();if(d.firstCreatePass){const h=Ni(s);IC(c,d.data,d.blueprint,h,!0),IC(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class ec{}class iD{}function sR(s,o){return new bC(s,o??null,[])}class bC extends ec{constructor(o,c,d){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wT(this);const h=Vr(o);this._bootstrapComponents=sa(h.bootstrap),this._r3Injector=Ub(o,c,[{provide:ec,useValue:this},{provide:sm,useValue:this.componentFactoryResolver},...d],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Rf extends iD{constructor(o){super(),this.moduleType=o}create(o){return new bC(this.moduleType,o,[])}}class oD extends ec{constructor(o){super(),this.componentFactoryResolver=new wT(this),this.instance=null;const c=new sf([...o.providers,{provide:ec,useValue:this},{provide:sm,useValue:this.componentFactoryResolver}],o.parent||Yg(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function TC(s,o,c=null){return new oD({providers:s,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}let oR=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=vb(0,c.type),h=d.length>0?TC([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Be(Po))})}return s})();function Ii(s){s.getStandaloneInjector=o=>o.get(oR).getOrCreateStandaloneInjector(s)}function cR(s,o,c){const d=yr()+s,h=ye();return h[d]===It?No(h,d,c?o.call(c):o()):function yf(s,o){return s[o]}(h,d)}function dD(s,o,c,d){return Ff(ye(),yr(),s,o,c,d)}function kf(s,o){const c=s[o];return c===It?void 0:c}function Ff(s,o,c,d,h,p){const v=o+c;return ai(s,v,h)?No(s,v+1,p?d.call(p,h):d(h)):kf(s,v+1)}function hD(s,o,c,d,h,p,v,C){const b=o+c;return function Ku(s,o,c,d,h){const p=dl(s,o,c,d);return ai(s,o+2,h)||p}(s,b,h,p,v)?No(s,b+3,C?d.call(C,h,p,v):d(h,p,v)):kf(s,b+3)}function gD(s,o){const c=Bt();let d;const h=s+Lt;c.firstCreatePass?(d=function _R(s,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(s===d.name)return d}}(o,c.pipeRegistry),c.data[h]=d,d.onDestroy&&(c.destroyHooks??=[]).push(h,d.onDestroy)):d=c.data[h];const p=d.factory||(d.factory=Us(d.type)),C=rn(cl);try{const b=Cr(!1),D=p();return Cr(b),function YO(s,o,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=d}(c,ye(),h,D),D}finally{rn(C)}}function $m(s,o,c){const d=s+Lt,h=ye(),p=Ma(h,d);return od(h,d)?Ff(h,yr(),o,p.transform,c,p):p.transform(c)}function Hm(s,o,c,d,h){const p=s+Lt,v=ye(),C=Ma(v,p);return od(v,p)?hD(v,yr(),o,C.transform,c,d,h,C):C.transform(c,d,h)}function od(s,o){return s[je].data[o].pure}function CR(){return this._results[Symbol.iterator]()}class xC{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Oo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=xC.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=CR)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const h=function qr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ag(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function vD(s,o,c,d=!0){const h=o[je];if(function Mx(s,o,c,d){const h=tr+d,p=c.length;d>0&&(c[h-1][mi]=o),d<p-tr?(o[mi]=c[h],cv(c,tr+d,o)):(c.push(o),o[mi]=null),o[hn]=c;const v=o[Ea];null!==v&&c!==v&&function xx(s,o){const c=s[ba];o[er]!==o[hn][hn][er]&&(s[xc]=!0),null===c?s[ba]=[o]:c.push(o)}(v,o);const C=o[Br];null!==C&&C.insertView(s),o[bt]|=128}(h,o,s,c),d){const p=Dv(c,s),v=o[pt],C=Vg(v,s[jr]);null!==C&&function Gh(s,o,c,d,h,p){d[En]=h,d[mr]=o,Yh(s,d,c,1,h,p)}(h,s[mr],v,o,C,p)}}let Il=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=PC}return s})();const wR=Il,IR=class extends wR{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,d){const h=function _D(s,o,c,d){const h=o.tView,C=ff(s,h,c,4096&s[bt]?4096:16,null,o,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[Ea]=s[o.index];const D=s[Br];return null!==D&&(C[Br]=D.createEmbeddedView(h)),I0(h,C,c),C}(this._declarationLView,this._declarationTContainer,o,{injector:c,hydrationInfo:d});return new mf(h)}};function PC(){return zm(_r(),ye())}function zm(s,o){return 4&s.type?new IR(o,s,Vu(s,o)):null}let Gm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=TR}return s})();function TR(){return DD(_r(),ye())}const bD=Gm,TD=class extends bD{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new rr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Yo(this._hostTNode,this._hostLView);if(gu(o)){const c=on(o,this._hostLView),d=vi(o);return new rr(c[je].data[d+8],c)}return new rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=kC(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(o,c,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const C=o.createEmbeddedViewImpl(c||{},p,null);return this.insertImpl(C,h,false),C}createComponent(o,c,d,h,p){const v=o&&!function qs(s){return"function"==typeof s}(o);let C;if(v)C=c;else{const _e=c||{};C=_e.index,d=_e.injector,h=_e.projectableNodes,p=_e.environmentInjector||_e.ngModuleRef}const b=v?o:new Zu(Ft(o)),D=d||this.parentInjector;if(!p&&null==b.ngModule){const ze=(v?D:this.parentInjector).get(Po,null);ze&&(p=ze)}Ft(b.componentType??{});const Y=b.create(D,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(o,c){return this.insertImpl(o,c,!1)}insertImpl(o,c,d){const h=o._lView;if(function cu(s){return Mr(s[hn])}(h)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const D=h[hn],M=new TD(D,D[mr],D[hn]);M.detach(M.indexOf(o))}}const v=this._adjustIndex(c),C=this._lContainer;return vD(C,h,v,!d),o.attachToViewContainerRef(),cv(FC(C),v,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=kC(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=Ug(this._lContainer,c);d&&(Va(FC(this._lContainer),c),Iv(d[je],d))}detach(o){const c=this._adjustIndex(o,-1),d=Ug(this._lContainer,c);return d&&null!=Va(FC(this._lContainer),c)?new mf(d):null}_adjustIndex(o,c=0){return o??this.length+c}};function kC(s){return s[8]}function FC(s){return s[8]||(s[8]=[])}function DD(s,o){let c;const d=o[s.index];return Mr(d)?c=d:(c=ul(d,o,null,s),o[s.index]=c,am(o,c)),SD(c,o,s,d),new TD(c,s,o)}let SD=function Lf(s,o,c,d){if(s[jr])return;let h;h=8&c.type?sn(d):function DR(s,o){const c=s[pt],d=c.createComment(""),h=zr(o,s);return nl(c,Vg(c,h),d,function Nx(s,o){return s.nextSibling(o)}(c,h),!1),d}(o,c),s[jr]=h};class Uf{constructor(o){this.queryList=o,this.matches=null}clone(){return new Uf(this.queryList)}setDirty(){this.queryList.setDirty()}}class LC{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<d;p++){const v=c.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new LC(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Or(o,c).matches&&this.queries[c].setDirty()}}class UC{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class VC{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new VC(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Vf{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new Vf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,c,AR(c,p)),this.matchTNodeWithReadOption(o,c,bo(c,o,p,!1,!1))}else d===Il?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,bo(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Qs||h===Gm||h===Il&&4&c.type)this.addMatch(c.index,-2);else{const p=bo(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function AR(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function xR(s,o,c,d){return-1===c?function MR(s,o){return 11&s.type?Vu(s,o):4&s.type?zm(s,o):null}(o,s):-2===c?function El(s,o,c){return c===Qs?Vu(o,s):c===Il?zm(o,s):c===Gm?DD(o,s):void 0}(s,o,d):Qo(s,s[je],c,o)}function Wm(s,o,c,d){const h=o[Br].queries[d];if(null===h.matches){const p=s.data,v=c.matches,C=[];for(let b=0;b<v.length;b+=2){const D=v[b];C.push(D<0?null:xR(o,p[D],v[b+1],c.metadata.read))}h.matches=C}return h.matches}function Bf(s,o,c,d){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const v=Wm(s,o,h,c);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)d.push(v[C/2]);else{const D=p[C+1],M=o[-b];for(let k=tr;k<M.length;k++){const q=M[k];q[Ea]===q[hn]&&Bf(q[je],q,D,d)}if(null!==M[ba]){const k=M[ba];for(let q=0;q<k.length;q++){const Y=k[q];Bf(Y[je],Y,D,d)}}}}}return d}function BC(s){const o=ye(),c=Bt(),d=iv();_g(d+1);const h=Or(c,d);if(s.dirty&&function Eh(s){return 4==(4&s[bt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Bf(c,o,d,[]):Wm(c,o,h,d);s.reset(p,yP),s.notifyOnChanges()}return!0}return!1}function qm(s,o,c,d){const h=Bt();if(h.firstCreatePass){const p=_r();(function Ym(s,o,c){null===s.queries&&(s.queries=new VC),s.queries.track(new Vf(o,c))})(h,new UC(o,c,d),p.index),function OR(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function Km(s,o,c){const d=new xC(4==(4&c));(function WP(s,o,c,d){const h=dT(o);h.push(c),s.firstCreatePass&&hT(s).push(d,h.length-1)})(s,o,d,d.destroy),null===o[Br]&&(o[Br]=new LC),o[Br].queries.push(new Uf(d))}(h,ye(),c)}function Zm(){return function PR(s,o){return s[Br].queries[o].queryList}(ye(),iv())}function Or(s,o){return s.queries.getByIndex(o)}function AD(s,o){return zm(s,o)}function jf(s){return!!Vr(s)}const Er=new an("Application Initializer");let JC=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=Ke(Er,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const p=h();if(L0(p))c.push(p);else if(KT(p)){const v=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});c.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),ci=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const Gf=new an("LocaleId",{providedIn:"root",factory:()=>Ke(Gf,dt.Optional|dt.SkipSelf)||function jR(){return typeof $localize<"u"&&$localize.locale||Xi}()}),$R=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let r_=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class zR{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let XC=(()=>{class s{compileModuleSync(c){return new Rf(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),p=sa(Vr(c).declarations).reduce((v,C)=>{const b=Ft(C);return b&&v.push(new Zu(b)),v},[]);return new zR(d,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const a_=new an(""),c_=new an("");let Zf,XD=(()=>{class s{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zf||(function rk(s){Zf=s}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(Be(Pr),Be(ow),Be(c_))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),ow=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Zf?.findTestabilityInTree(this,c,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),rc=null;const l_=new an("AllowMultipleToken"),aw=new an("PlatformDestroyListeners"),Cs=new an("appBootstrapListener");class nS{constructor(o,c){this.name=o,this.token=c}}function rS(s,o,c=[]){const d=`Platform: ${o}`,h=new an(d);return(p=[])=>{let v=Yf();if(!v||v.injector.get(l_,!1)){const C=[...c,...p,{provide:h,useValue:!0}];s?s(C):function Uo(s){if(rc&&!rc.get(l_,!1))throw new ee(400,!1);(function Kf(){!function tg(s){Wy=s}(()=>{throw new ee(600,!1)})})(),rc=s;const o=s.get(ok);(function sk(s){s.get(bb,null)?.forEach(c=>c())})(s)}(function iS(s=[],o){return Js.create({name:o,providers:[{provide:V,useValue:"platform"},{provide:aw,useValue:new Set([()=>rc=null])},...s]})}(C,d))}return function ZU(s){const o=Yf();if(!o)throw new ee(401,!1);return o}()}}function Yf(){return rc?.get(ok)??null}let ok=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function lw(s="zone.js",o){return"noop"===s?new xP:"zone.js"===s?new Pr(o):s}(d?.ngZone,function ak(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function sD(s,o,c){return new bC(s,o,c)}(c.moduleType,this.injector,function cS(s){return[{provide:Pr,useFactory:s},{provide:Fu,multi:!0,useFactory:()=>{const o=Ke(aS,{optional:!0});return()=>o.initialize()}},{provide:uk,useFactory:oS},{provide:Hb,useFactory:zb}]}(()=>h)),v=p.injector.get(Ga,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:b=>{v.handleError(b)}});p.onDestroy(()=>{uw(this._modules,p),C.unsubscribe()})}),function ck(s,o,c){try{const d=c();return L0(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(v,h,()=>{const C=p.injector.get(JC);return C.runInitializers(),C.donePromise.then(()=>(function iC(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(Am=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Gf,Xi)||Xi),this._moduleDoBootstrap(p),p))})})}bootstrapModule(c,d=[]){const h=lk({},d);return function eS(s,o,c){const d=new Rf(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const d=c.injector.get(Qf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ee(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(aw,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(Be(Js))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function lk(s,o){return Array.isArray(o)?o.reduce(lk,s):{...s,...o}}let Qf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(uk),this.zoneIsStable=Ke(Hb),this.componentTypes=[],this.components=[],this.isStable=Ke(r_).hasPendingTasks.pipe((0,Fe.w)(c=>c?(0,we.of)(!1):this.zoneIsStable),(0,Se.x)(),(0,Pe.B)()),this._injector=Ke(Po)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof xb;if(!this._injector.get(JC).done)throw!h&&Ia(c),new ee(405,!1);let v;v=h?c:this._injector.get(sm).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function tS(s){return s.isBoundToModule}(v)?void 0:this._injector.get(ec),D=v.create(Js.NULL,[],d||v.selector,C),M=D.location.nativeElement,k=D.injector.get(a_,null);return k?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),uw(this.components,D),k?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;uw(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(Cs,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>uw(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function uw(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}const uk=new an("",{providedIn:"root",factory:()=>Ke(Ga).handleError.bind(void 0)});function oS(){const s=Ke(Pr),o=Ke(Ga);return c=>s.runOutsideAngular(()=>o.handleError(c))}let aS=(()=>{class s{constructor(){this.zone=Ke(Pr),this.applicationRef=Ke(Qf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function hk(){return!1}let dw=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=hw}return s})();function hw(s){return function fw(s,o,c){if(Ls(s)&&!c){const d=ti(s.index,o);return new mf(d,d)}return 47&s.type?new mf(o[er],o):null}(_r(),ye(),16==(16&s))}class Dl{constructor(){}supports(o){return um(o)}create(o){return new pk(o)}}const _w=(s,o)=>o;class pk{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||_w}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,h=0,p=null;for(;c||d;){const v=!d||c&&c.currentIndex<mS(d,h,p)?c:d,C=mS(v,h,p),b=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{p||(p=[]);const D=C-h,M=b-h;if(D!=M){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,ae=Y+q;M<=ae&&ae<D&&(p[q]=Y+1)}p[v.previousIndex]=M-D}}C!==b&&o(v,C,b)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!um(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],v=this._trackByFn(C,p),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,p,v,C)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,v,C),d=!0),c=c._next}else h=0,function PO(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Symbol.iterator]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,C=>{v=this._trackByFn(h,C),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,C,v,h)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new ro(c,d),p,h),o}_verifyReinsertion(o,c,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new gS),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gS),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ro{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e5{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class gS{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new e5,this.map.set(c,d)),d.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mS(s,o,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+o+h}class Is{constructor(){}supports(o){return o instanceof Map||dm(o)}create(){return new qe}}class qe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||dm(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const d=new yw(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class yw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Et(){return new dd([new Dl])}let dd=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Et});constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Et()),deps:[[s,new $e,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new ee(901,!1)}}return s})();function _S(){return new Xf([new Is])}let Xf=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:_S});constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||_S()),deps:[[s,new $e,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new ee(901,!1)}}return s})();const h_=rS(null,"core",[]);let Nr=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(d){return new(d||s)(Be(Qf))};static#t=this.\u0275mod=Ac({type:s});static#n=this.\u0275inj=Sn({})}return s})();function Ck(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function C_(s){const o=Ft(s);if(!o)return null;const c=new Zu(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(st,be,F)=>{F.d(be,{Z:()=>Je});var u=F(9058),B=F(4537),L=F(7592),te=F(7879);class pe{constructor(Ae,De){this._delegate=Ae,this.firebase=De,(0,L._addComponent)(Ae,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ae,De=L._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Ae);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:De})}_removeServiceInstance(Ae,De=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(De)}_addComponent(Ae){(0,L._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,L._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function Se(){const ve=function Fe(ve){const Ae={},De={__esModule:!0,initializeApp:function ee(ke,j={}){const Ce=L.initializeApp(ke,j);if((0,u.r3)(Ae,Ce.name))return Ae[Ce.name];const Ue=new ve(Ce,De);return Ae[Ce.name]=Ue,Ue},app:ot,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function re(ke){const j=ke.name,Ce=j.replace("-compat","");if(L._registerComponent(ke)&&"PUBLIC"===ke.type){const Ue=(at=ot())=>{if("function"!=typeof at[Ce])throw Pe.create("invalid-app-argument",{appName:j});return at[Ce]()};void 0!==ke.serviceProps&&(0,u.ZB)(Ue,ke.serviceProps),De[Ce]=Ue,ve.prototype[Ce]=function(...at){return this._getService.bind(this,j).apply(this,ke.multipleInstances?at:[])}}return"PUBLIC"===ke.type?De[Ce]:null},removeApp:function tt(ke){delete Ae[ke]},useAsService:function he(ke,j){return"serverAuth"===j?null:j},modularAPIs:L}};function ot(ke){if(!(0,u.r3)(Ae,ke=ke||L._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:ke});return Ae[ke]}return De.default=De,Object.defineProperty(De,"apps",{get:function de(){return Object.keys(Ae).map(ke=>Ae[ke])}}),ot.App=ve,De}(pe);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Ae(De){(0,u.ZB)(ve,De)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),ve}(),W=new te.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=U;!function Me(ve){(0,L.registerVersion)("@firebase/app-compat","0.2.13",ve)}()},7592:(st,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Sn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>fe,_addOrOverwriteComponent:()=>Ne,_apps:()=>ue,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Ve,_registerComponent:()=>Qe,_removeServiceInstance:()=>en,deleteApp:()=>pi,getApp:()=>nn,getApps:()=>Ln,initializeApp:()=>In,onLog:()=>Un,registerVersion:()=>ar,setLogLevel:()=>Fr});var u=F(5861),B=F(4537),L=F(7879),te=F(9058),pe=F(1878);class we{constructor(me){this.container=me}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Pe(Ge){const me=Ge.getComponent();return"VERSION"===me?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",U=new L.Yd("@firebase/app"),ie="[DEFAULT]",le={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,se=new Map;function fe(Ge,me){try{Ge.container.addComponent(me)}catch(Xe){U.debug(`Component ${me.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function Ne(Ge,me){Ge.container.addOrOverwriteComponent(me)}function Qe(Ge){const me=Ge.name;if(se.has(me))return U.debug(`There were multiple attempts to register component ${me}.`),!1;se.set(me,Ge);for(const Xe of ue.values())fe(Xe,Ge);return!0}function Ve(Ge,me){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(me)}function en(Ge,me,Xe=ie){Ve(Ge,me).clearInstance(Xe)}function ht(){se.clear()}const ft=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tn{constructor(me,Xe,it){this._isDeleted=!1,this._options=Object.assign({},me),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this.checkDestroyed(),this._automaticDataCollectionEnabled=me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(me){this._isDeleted=me}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Sn="9.23.0";function In(Ge,me={}){let Xe=Ge;"object"!=typeof me&&(me={name:me});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},me),kt=it.name;if("string"!=typeof kt||!kt)throw ft.create("bad-app-name",{appName:String(kt)});if(Xe||(Xe=(0,te.aH)()),!Xe)throw ft.create("no-options");const Vt=ue.get(kt);if(Vt){if((0,te.vZ)(Xe,Vt.options)&&(0,te.vZ)(it,Vt.config))return Vt;throw ft.create("duplicate-app",{appName:kt})}const Zn=new B.H0(kt);for(const $ of se.values())Zn.addComponent($);const H=new tn(Xe,it,Zn);return ue.set(kt,H),H}function nn(Ge=ie){const me=ue.get(Ge);if(!me&&Ge===ie&&(0,te.aH)())return In();if(!me)throw ft.create("no-app",{appName:Ge});return me}function Ln(){return Array.from(ue.values())}function pi(Ge){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(Ge){const me=Ge.name;ue.has(me)&&(ue.delete(me),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function ar(Ge,me,Xe){var it;let kt=null!==(it=le[Ge])&&void 0!==it?it:Ge;Xe&&(kt+=`-${Xe}`);const Vt=kt.match(/\s|\//),Zn=me.match(/\s|\//);if(Vt||Zn){const H=[`Unable to register library "${kt}" with version "${me}":`];return Vt&&H.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&Zn&&H.push("and"),Zn&&H.push(`version name "${me}" contains illegal characters (whitespace or "/")`),void U.warn(H.join(" "))}Qe(new B.wA(`${kt}-version`,()=>({library:kt,version:me}),"VERSION"))}function Un(Ge,me){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,L.Am)(Ge,me)}function Fr(Ge){(0,L.Ub)(Ge)}const ls="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Tt=null;function rn(){return Tt||(Tt=(0,pe.X3)(ls,dt,{upgrade:(Ge,me)=>{0===me&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Tt}function Lr(){return(Lr=(0,u.Z)(function*(Ge){try{return yield(yield rn()).transaction(mt).objectStore(mt).get(us(Ge))}catch(me){if(me instanceof te.ZR)U.warn(me.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:me?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function Rt(Ge,me){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(Ge,me){try{const it=(yield rn()).transaction(mt,"readwrite");yield it.objectStore(mt).put(me,us(Ge)),yield it.done}catch(Xe){if(Xe instanceof te.ZR)U.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});U.warn(it.message)}}})).apply(this,arguments)}function us(Ge){return`${Ge.name}!${Ge.options.appId}`}class Ut{constructor(me){this.container=me,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Zi(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var me=this;return(0,u.Z)(function*(){const it=me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Mn();if(null===me._heartbeatsCache&&(me._heartbeatsCache=yield me._heartbeatsCachePromise),me._heartbeatsCache.lastSentHeartbeatDate!==kt&&!me._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return me._heartbeatsCache.heartbeats.push({date:kt,agent:it}),me._heartbeatsCache.heartbeats=me._heartbeatsCache.heartbeats.filter(Vt=>{const Zn=new Date(Vt.date).valueOf();return Date.now()-Zn<=2592e6}),me._storage.overwrite(me._heartbeatsCache)})()}getHeartbeatsHeader(){var me=this;return(0,u.Z)(function*(){if(null===me._heartbeatsCache&&(yield me._heartbeatsCachePromise),null===me._heartbeatsCache||0===me._heartbeatsCache.heartbeats.length)return"";const Xe=Mn(),{heartbeatsToSend:it,unsentEntries:kt}=function Mi(Ge,me=1024){const Xe=[];let it=Ge.slice();for(const kt of Ge){const Vt=Xe.find(Zn=>Zn.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),Ki(Xe)>me){Vt.dates.pop();break}}else if(Xe.push({agent:kt.agent,dates:[kt.date]}),Ki(Xe)>me){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(me._heartbeatsCache.heartbeats),Vt=(0,te.L)(JSON.stringify({version:2,heartbeats:it}));return me._heartbeatsCache.lastSentHeartbeatDate=Xe,kt.length>0?(me._heartbeatsCache.heartbeats=kt,yield me._storage.overwrite(me._heartbeatsCache)):(me._heartbeatsCache.heartbeats=[],me._storage.overwrite(me._heartbeatsCache)),Vt})()}}function Mn(){return(new Date).toISOString().substring(0,10)}class Zi{constructor(me){this.app=me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var me=this;return(0,u.Z)(function*(){return(yield me._canUseIndexedDBPromise)&&(yield function Jr(Ge){return Lr.apply(this,arguments)}(me.app))||{heartbeats:[]}})()}overwrite(me){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=me.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:me.heartbeats})}})()}add(me){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=me.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...me.heartbeats]})}})()}}function Ki(Ge){return(0,te.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function cr(Ge){Qe(new B.wA("platform-logger",me=>new we(me),"PRIVATE")),Qe(new B.wA("heartbeat",me=>new Ut(me),"PRIVATE")),ar(Fe,"0.9.13",Ge),ar(Fe,"0.9.13","esm2017"),ar("fire-js","")}("")},120:(st,be,F)=>{F.d(be,{Z:()=>u.Z});var u=F(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,be,F)=>{F.r(be);var u=F(5861),B=F(3399),L=F(6710),te=F(9058),Pe=(F(7592),F(7879),F(4537));function Fe(){return window}function W(){return W=(0,u.Z)(function*(O,N,x){var K;const{BuildInfo:ge}=Fe();(0,L.as)(N.sessionId,"AuthEvent did not contain a session ID");const Be=yield function De(O){return tt.apply(this,arguments)}(N.sessionId),yt={};return(0,L.at)()?yt.ibi=ge.packageName:(0,L.au)()?yt.apn=ge.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),ge.displayName&&(yt.appDisplayName=ge.displayName),yt.sessionId=Be,(0,L.aw)(O,x,N.type,void 0,null!==(K=N.eventId)&&void 0!==K?K:void 0,yt)}),W.apply(this,arguments)}function Oe(){return(Oe=(0,u.Z)(function*(O){const{BuildInfo:N}=Fe(),x={};(0,L.at)()?x.iosBundleId=N.packageName:(0,L.au)()?x.androidPackageName=N.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),yield(0,L.ax)(O,x)})).apply(this,arguments)}function ve(){return(ve=(0,u.Z)(function*(O,N,x){const{cordova:K}=Fe();let ge=()=>{};try{yield new Promise((Be,yt)=>{let Ke=null;function Zt(){var Mt;Be();const xi=null===(Mt=K.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof xi&&xi(),"function"==typeof x?.close&&x.close()}function vt(){Ke||(Ke=window.setTimeout(()=>{yt((0,L.az)(O,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&vt()}N.addPassiveListener(Zt),document.addEventListener("resume",vt,!1),(0,L.au)()&&document.addEventListener("visibilitychange",dn,!1),ge=()=>{N.removePassiveListener(Zt),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",dn,!1),Ke&&window.clearTimeout(Ke)}})}finally{ge()}})).apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(O){const N=function ot(O){if((0,L.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const N=new ArrayBuffer(O.length),x=new Uint8Array(N);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(x)).map(ge=>ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends L.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(N)),super.onEvent(N)}initialized(){var N=this;return(0,u.Z)(function*(){yield N.initPromise})()}}function ke(O){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(O){const N=yield at()._get(Xt(O));return N&&(yield at()._remove(Xt(O))),N})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function at(){return(0,L.aC)(L.b)}function Xt(O){return(0,L.aD)("authEvent",O.config.apiKey,O.name)}function wn(O){if(!O?.includes("?"))return{};const[N,...x]=O.split("?");return(0,te.zd)(x.join("?"))}const ie=class kr{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(N){var x=this;return(0,u.Z)(function*(){const K=N._key();let ge=x.eventManagers.get(K);return ge||(ge=new de(N),x.eventManagers.set(K,ge),x.attachCallbackListeners(N,ge)),ge})()}_openPopup(N){(0,L.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,x,K,ge){var Be=this;return(0,u.Z)(function*(){!function Ae(O){var N,x,K,ge,Be,yt,Ke,Zt,vt,dn;const Mt=Fe();(0,L.aA)("function"==typeof(null===(N=Mt?.universalLinks)||void 0===N?void 0:N.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aA)(typeof(null===(x=Mt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aA)("function"==typeof(null===(Be=null===(ge=null===(K=Mt?.cordova)||void 0===K?void 0:K.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Be?void 0:Be.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Zt=null===(Ke=null===(yt=Mt?.cordova)||void 0===yt?void 0:yt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Zt?void 0:Zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(dn=null===(vt=Mt?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===dn?void 0:dn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const yt=yield Be._initialize(N);yield yt.initialized(),yt.resetRedirect(),(0,L.aG)(),yield Be._originValidation(N);const Ke=function re(O,N,x=null){return{type:N,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,L.az)(O,"no-auth-event")}}(N,K,ge);yield function he(O,N){return at()._set(Xt(O),N)}(N,Ke);const Zt=yield function U(O,N,x){return W.apply(this,arguments)}(N,Ke,x),vt=yield function Me(O){const{cordova:N}=Fe();return new Promise(x=>{N.plugins.browsertab.isAvailable(K=>{let ge=null;K?N.plugins.browsertab.openUrl(O):ge=N.InAppBrowser.open(O,(0,L.ay)()?"_blank":"_system","location=yes"),x(ge)})})}(Zt);return function Je(O,N,x){return ve.apply(this,arguments)}(N,yt,vt)})()}_isIframeWebStorageSupported(N,x){throw new Error("Method not implemented.")}_originValidation(N){const x=N._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Oe.apply(this,arguments)}(N)),this.originValidationPromises[x]}attachCallbackListeners(N,x){const{universalLinks:K,handleOpenURL:ge,BuildInfo:Be}=Fe(),yt=setTimeout((0,u.Z)(function*(){yield ke(N),x.onEvent(le())}),500),Ke=function(){var dn=(0,u.Z)(function*(Mt){clearTimeout(yt);const xi=yield ke(N);let bc=null;xi&&Mt?.url&&(bc=function Ce(O,N){var x,K;const ge=function _n(O){const N=wn(O),x=N.link?decodeURIComponent(N.link):void 0,K=wn(x).link,ge=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return wn(ge).link||ge||K||x||O}(N);if(ge.includes("/__/auth/callback")){const Be=wn(ge),yt=Be.firebaseError?function Fn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Be.firebaseError)):null,Ke=null===(K=null===(x=yt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Zt=Ke?(0,L.az)(Ke):null;return Zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:ge,postBody:null}}return null}(xi,Mt.url)),x.onEvent(bc||le())});return function(xi){return dn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Zt=ge,vt=`${Be.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var dn=(0,u.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(vt)&&Ke({url:Mt}),"function"==typeof Zt)try{Zt(Mt)}catch(xi){console.error(xi)}});return function(Mt){return dn.apply(this,arguments)}}()}};function le(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function en(O=(0,te.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sn(){try{const O=self.localStorage,N=L.aL();if(O)return O.setItem(N,"1"),O.removeItem(N),!function tn(O=(0,te.z$)()){return function qt(){return(0,te.w1)()&&11===document?.documentMode}()||function ft(O=(0,te.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,te.hl)()}catch{return In()&&(0,te.hl)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nn(){return(function Ve(){return"http:"===Qe()||"https:"===Qe()}()||(0,te.ru)()||en())&&!function ht(){return(0,te.b$)()||(0,te.UG)()}()&&Sn()&&!In()}function Ln(){return en()&&typeof document<"u"}function Ar(){return(Ar=(0,u.Z)(function*(){return!!Ln()&&new Promise(O=>{const N=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),O(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},Fr=L.aA,ls="persistence";function mt(O){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(O){yield O._initializationPromise;const N=Jr(),x=L.aD(ls,O.config.apiKey,O.name);N&&N.setItem(x,O._getPersistence())})).apply(this,arguments)}function Jr(){var O;try{return(null===(O=function ar(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Lr=L.aA;class Rt{constructor(){this.browserResolver=L.aC(L.k),this.cordovaResolver=L.aC(ie),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(N){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,x,K,ge){var Be=this;return(0,u.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(N,x,K,ge)})()}_openRedirect(N,x,K,ge){var Be=this;return(0,u.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(N,x,K,ge)})()}_isIframeWebStorageSupported(N,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,x)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Ln()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,u.Z)(function*(){if(N.underlyingResolver)return;const x=yield function pi(){return Ar.apply(this,arguments)}();N.underlyingResolver=x?N.cordovaResolver:N.browserResolver})()}}function An(O){return O.unwrap()}function Gt(O){return Ut(O)}function Ut(O){const{_tokenResponse:N}=O instanceof te.ZR?O.customData:O;if(!N)return null;if(!(O instanceof te.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return L.P.credentialFromResult(O);const x=N.providerId;if(!x||x===L.p.PASSWORD)return null;let K;switch(x){case L.p.GOOGLE:K=L.V;break;case L.p.FACEBOOK:K=L.U;break;case L.p.GITHUB:K=L.W;break;case L.p.TWITTER:K=L.Z;break;default:const{oauthIdToken:ge,oauthAccessToken:Be,oauthTokenSecret:yt,pendingToken:Ke,nonce:Zt}=N;return Be||yt||ge||Ke?Ke?x.startsWith("saml.")?L.aO._create(x,Ke):L.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ke,idToken:ge,accessToken:Be}):new L.X(x).credential({idToken:ge,accessToken:Be,rawNonce:Zt}):null}return O instanceof te.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Mn(O,N){return N.catch(x=>{throw x instanceof te.ZR&&function uo(O,N){var x;const K=null===(x=N.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new Ki(O,L.aq(O,N));else if(K){const ge=Ut(N),Be=N;ge&&(Be.credential=ge,Be.tenantId=K.tenantId||void 0,Be.email=K.email||void 0,Be.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const ge=x.user;return{operationType:x.operationType,credential:Gt(x),additionalUserInfo:L.ao(x),user:cr.getOrCreate(ge)}})}function Mi(O,N){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(O,N){const x=yield N;return{verificationId:x.verificationId,confirm:K=>Mn(O,x.confirm(K))}})).apply(this,arguments)}class Ki{constructor(N,x){this.resolver=x,this.auth=function us(O){return O.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Mn(An(this.auth),this.resolver.resolveSignIn(N))}}class cr{constructor(N){this._delegate=N,this.multiFactor=L.ar(N)}static getOrCreate(N){return cr.USER_MAP.has(N)||cr.USER_MAP.set(N,new cr(N)),cr.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var x=this;return(0,u.Z)(function*(){return Mn(x.auth,L.a0(x._delegate,N))})()}linkWithPhoneNumber(N,x){var K=this;return(0,u.Z)(function*(){return Mi(K.auth,L.l(K._delegate,N,x))})()}linkWithPopup(N){var x=this;return(0,u.Z)(function*(){return Mn(x.auth,L.d(x._delegate,N,Rt))})()}linkWithRedirect(N){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.g(x._delegate,N,Rt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var x=this;return(0,u.Z)(function*(){return Mn(x.auth,L.a1(x._delegate,N))})()}reauthenticateWithPhoneNumber(N,x){return Mi(this.auth,L.r(this._delegate,N,x))}reauthenticateWithPopup(N){return Mn(this.auth,L.e(this._delegate,N,Rt))}reauthenticateWithRedirect(N){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.h(x._delegate,N,Rt)})()}sendEmailVerification(N){return L.ae(this._delegate,N)}unlink(N){var x=this;return(0,u.Z)(function*(){return yield L.an(x._delegate,N),x})()}updateEmail(N){return L.aj(this._delegate,N)}updatePassword(N){return L.ak(this._delegate,N)}updatePhoneNumber(N){return L.u(this._delegate,N)}updateProfile(N){return L.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,x){return L.af(this._delegate,N,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cr.USER_MAP=new WeakMap;const Ge=L.aA;let me=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ge}=x.options;Ge(ge,"invalid-api-key",{appName:x.name}),Ge(ge,"invalid-api-key",{appName:x.name});const Be=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:it(ge,x.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(L.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){L.I(this._delegate,x,K)}applyActionCode(x){return L.a5(this._delegate,x)}checkActionCode(x){return L.a6(this._delegate,x)}confirmPasswordReset(x,K){return L.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var ge=this;return(0,u.Z)(function*(){return Mn(ge._delegate,L.a8(ge._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return L.ad(this._delegate,x)}isSignInWithEmailLink(x){return L.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,u.Z)(function*(){Ge(nn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield L.j(x._delegate,Rt);return K?Mn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function ue(O,N){(0,L.aH)(O)._logFramework(N)}(this._delegate,x)}onAuthStateChanged(x,K,ge){const{next:Be,error:yt,complete:Ke}=Xe(x,K,ge);return this._delegate.onAuthStateChanged(Be,yt,Ke)}onIdTokenChanged(x,K,ge){const{next:Be,error:yt,complete:Ke}=Xe(x,K,ge);return this._delegate.onIdTokenChanged(Be,yt,Ke)}sendSignInLinkToEmail(x,K){return L.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return L.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,u.Z)(function*(){let ge;switch(function dt(O,N){Fr(Object.values(Un).includes(N),O,"invalid-persistence-type"),(0,te.b$)()?Fr(N!==Un.SESSION,O,"unsupported-persistence-type"):(0,te.UG)()?Fr(N===Un.NONE,O,"unsupported-persistence-type"):In()?Fr(N===Un.NONE||N===Un.LOCAL&&(0,te.hl)(),O,"unsupported-persistence-type"):Fr(N===Un.NONE||Sn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Un.SESSION:ge=L.a;break;case Un.LOCAL:ge=(yield L.aC(L.i)._isAvailable())?L.i:L.b;break;case Un.NONE:ge=L.N;break;default:return L.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(ge)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Mn(this._delegate,L._(this._delegate))}signInWithCredential(x){return Mn(this._delegate,L.$(this._delegate,x))}signInWithCustomToken(x){return Mn(this._delegate,L.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return Mn(this._delegate,L.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return Mn(this._delegate,L.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Mi(this._delegate,L.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,u.Z)(function*(){return Ge(nn(),K._delegate,"operation-not-supported-in-this-environment"),Mn(K._delegate,L.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,u.Z)(function*(){return Ge(nn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),L.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return L.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Un,O})();function Xe(O,N,x){let K=O;"function"!=typeof O&&({next:K,error:N,complete:x}=O);const ge=K;return{next:yt=>ge(yt&&cr.getOrCreate(yt)),error:N,complete:x}}function it(O,N){const x=function rn(O,N){const x=Jr();if(!x)return[];const K=L.aD(ls,O,N);switch(x.getItem(K)){case Un.NONE:return[L.N];case Un.LOCAL:return[L.i,L.a];case Un.SESSION:return[L.a];default:return[]}}(O,N);if(typeof self<"u"&&!x.includes(L.i)&&x.push(L.i),typeof window<"u")for(const K of[L.b,L.a])x.includes(K)||x.push(K);return x.includes(L.N)||x.push(L.N),x}class kt{constructor(){this.providerId="phone",this._delegate=new L.P(An(B.Z.auth()))}static credential(N,x){return L.P.credential(N,x)}verifyPhoneNumber(N,x){return this._delegate.verifyPhoneNumber(N,x)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=L.P.PROVIDER_ID;const Vt=L.aA;class Zn{constructor(N,x,K=B.Z.app()){var ge;Vt(null===(ge=K.options)||void 0===ge?void 0:ge.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new L.R(N,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Pe.wA("auth-compat",N=>{const x=N.getProvider("app-compat").getImmediate(),K=N.getProvider("auth");return new me(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.Q,FacebookAuthProvider:L.U,GithubAuthProvider:L.W,GoogleAuthProvider:L.V,OAuthProvider:L.X,SAMLAuthProvider:L.Y,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Zn,TwitterAuthProvider:L.Z,Auth:me,AuthCredential:L.J,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},4537:(st,be,F)=>{F.d(be,{H0:()=>Fe,wA:()=>L});var u=F(5861),B=F(9058);class L{constructor(U,W,X){this.name=U,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const te="[DEFAULT]";class pe{constructor(U,W){this.name=U,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const W=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(W)){const X=new B.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:W});Oe&&X.resolve(Oe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(U){var W;const X=this.normalizeInstanceIdentifier(U?.identifier),Oe=null!==(W=U?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(Oe)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Pe(Se){return"EAGER"===Se.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(W);try{const Me=this.getOrInitializeService({instanceIdentifier:Oe});X.resolve(Me)}catch{}}}}clearInstance(U=te){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,u.Z)(function*(){const W=Array.from(U.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=te){return this.instances.has(U)}getOptions(U=te){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:W={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Me,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Je.resolve(Oe);return Oe}onInit(U,W){var X;const Oe=this.normalizeInstanceIdentifier(W),Me=null!==(X=this.onInitCallbacks.get(Oe))&&void 0!==X?X:new Set;Me.add(U),this.onInitCallbacks.set(Oe,Me);const Je=this.instances.get(Oe);return Je&&U(Je,Oe),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,W){const X=this.onInitCallbacks.get(W);if(X)for(const Oe of X)try{Oe(U,W)}catch{}}getOrInitializeService({instanceIdentifier:U,options:W={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=U,Se===te?void 0:Se),options:W}),this.instances.set(U,X),this.instancesOptions.set(U,W),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var Se;return X||null}normalizeInstanceIdentifier(U=te){return this.component?this.component.multipleInstances?U:te:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const W=this.getProvider(U.name);if(W.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);W.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const W=new pe(U,this);return this.providers.set(U,W),W}getProviders(){return Array.from(this.providers.values())}}},7879:(st,be,F)=>{F.d(be,{Am:()=>Se,Ub:()=>Fe,Yd:()=>Pe,in:()=>B});const u=[];var B=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(B||{});const L={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},te=B.INFO,pe={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},we=(U,W,...X)=>{if(W<U.logLevel)return;const Oe=(new Date).toISOString(),Me=pe[W];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Me](`[${Oe}]  ${U.name}:`,...X)};class Pe{constructor(W){this.name=W,this._logLevel=te,this._logHandler=we,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in B))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?L[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...W),this._logHandler(this,B.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...W),this._logHandler(this,B.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,B.INFO,...W),this._logHandler(this,B.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,B.WARN,...W),this._logHandler(this,B.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...W),this._logHandler(this,B.ERROR,...W)}}function Fe(U){u.forEach(W=>{W.setLogLevel(U)})}function Se(U,W){for(const X of u){let Oe=null;W&&W.level&&(Oe=L[W.level]),X.userLogHandler=null===U?null:(Me,Je,...ve)=>{const Ae=ve.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");Je>=(Oe??Me.logLevel)&&U({level:B[Je].toLowerCase(),message:Ae,args:ve,type:Me.name})}}}},1878:(st,be,F)=>{F.d(be,{X3:()=>ot});var u=F(5861);const B=(j,Ce)=>Ce.some(Ue=>j instanceof Ue);let L,te;const Pe=new WeakMap,Fe=new WeakMap,Se=new WeakMap,U=new WeakMap,W=new WeakMap;let Me={get(j,Ce,Ue){if(j instanceof IDBTransaction){if("done"===Ce)return Fe.get(j);if("objectStoreNames"===Ce)return j.objectStoreNames||Se.get(j);if("store"===Ce)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return De(j[Ce])},set:(j,Ce,Ue)=>(j[Ce]=Ue,!0),has:(j,Ce)=>j instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in j};function Ae(j){return"function"==typeof j?function ve(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...Ce){return j.apply(tt(this),Ce),De(Pe.get(this))}:function(...Ce){return De(j.apply(tt(this),Ce))}:function(Ce,...Ue){const at=j.call(tt(this),Ce,...Ue);return Se.set(at,Ce.sort?Ce.sort():[Ce]),De(at)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const Ce=new Promise((Ue,at)=>{const Xt=()=>{j.removeEventListener("complete",Fn),j.removeEventListener("error",_n),j.removeEventListener("abort",_n)},Fn=()=>{Ue(),Xt()},_n=()=>{at(j.error||new DOMException("AbortError","AbortError")),Xt()};j.addEventListener("complete",Fn),j.addEventListener("error",_n),j.addEventListener("abort",_n)});Fe.set(j,Ce)}(j),B(j,function pe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Me):j)}function De(j){if(j instanceof IDBRequest)return function X(j){const Ce=new Promise((Ue,at)=>{const Xt=()=>{j.removeEventListener("success",Fn),j.removeEventListener("error",_n)},Fn=()=>{Ue(De(j.result)),Xt()},_n=()=>{at(j.error),Xt()};j.addEventListener("success",Fn),j.addEventListener("error",_n)});return Ce.then(Ue=>{Ue instanceof IDBCursor&&Pe.set(Ue,j)}).catch(()=>{}),W.set(Ce,j),Ce}(j);if(U.has(j))return U.get(j);const Ce=Ae(j);return Ce!==j&&(U.set(j,Ce),W.set(Ce,j)),Ce}const tt=j=>W.get(j);function ot(j,Ce,{blocked:Ue,upgrade:at,blocking:Xt,terminated:Fn}={}){const _n=indexedDB.open(j,Ce),wn=De(_n);return at&&_n.addEventListener("upgradeneeded",un=>{at(De(_n.result),un.oldVersion,un.newVersion,De(_n.transaction),un)}),Ue&&_n.addEventListener("blocked",un=>Ue(un.oldVersion,un.newVersion,un)),wn.then(un=>{Fn&&un.addEventListener("close",()=>Fn()),Xt&&un.addEventListener("versionchange",kr=>Xt(kr.oldVersion,kr.newVersion,kr))}).catch(()=>{}),wn}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function ke(j,Ce){if(!(j instanceof IDBDatabase)||Ce in j||"string"!=typeof Ce)return;if(he.get(Ce))return he.get(Ce);const Ue=Ce.replace(/FromIndex$/,""),at=Ce!==Ue,Xt=re.includes(Ue);if(!(Ue in(at?IDBIndex:IDBObjectStore).prototype)||!Xt&&!de.includes(Ue))return;const Fn=function(){var _n=(0,u.Z)(function*(wn,...un){const kr=this.transaction(wn,Xt?"readwrite":"readonly");let ie=kr.store;return at&&(ie=ie.index(un.shift())),(yield Promise.all([ie[Ue](...un),Xt&&kr.done]))[0]});return function(un){return _n.apply(this,arguments)}}();return he.set(Ce,Fn),Fn}!function Je(j){Me=j(Me)}(j=>({...j,get:(Ce,Ue,at)=>ke(Ce,Ue)||j.get(Ce,Ue,at),has:(Ce,Ue)=>!!ke(Ce,Ue)||j.has(Ce,Ue)}))},5861:(st,be,F)=>{function u(L,te,pe,we,Pe,Fe,Se){try{var U=L[Fe](Se),W=U.value}catch(X){return void pe(X)}U.done?te(W):Promise.resolve(W).then(we,Pe)}function B(L){return function(){var te=this,pe=arguments;return new Promise(function(we,Pe){var Fe=L.apply(te,pe);function Se(W){u(Fe,we,Pe,Se,U,"next",W)}function U(W){u(Fe,we,Pe,Se,U,"throw",W)}Se(void 0)})}}F.d(be,{Z:()=>B})},7582:(st,be,F)=>{function te(ie,le){var ue={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&le.indexOf(se)<0&&(ue[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(se=Object.getOwnPropertySymbols(ie);fe<se.length;fe++)le.indexOf(se[fe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[fe])&&(ue[se[fe]]=ie[se[fe]])}return ue}function X(ie,le,ue,se){return new(ue||(ue=Promise))(function(Ne,Qe){function Ve(qt){try{ht(se.next(qt))}catch(ft){Qe(ft)}}function en(qt){try{ht(se.throw(qt))}catch(ft){Qe(ft)}}function ht(qt){qt.done?Ne(qt.value):function fe(Ne){return Ne instanceof ue?Ne:new ue(function(Qe){Qe(Ne)})}(qt.value).then(Ve,en)}ht((se=se.apply(ie,le||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,le,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,se=ue.apply(ie,le||[]),Ne=[];return fe={},Qe("next"),Qe("throw"),Qe("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Qe(tn){se[tn]&&(fe[tn]=function(Sn){return new Promise(function(In,nn){Ne.push([tn,Sn,In,nn])>1||Ve(tn,Sn)})})}function Ve(tn,Sn){try{!function en(tn){tn.value instanceof ee?Promise.resolve(tn.value.v).then(ht,qt):ft(Ne[0][2],tn)}(se[tn](Sn))}catch(In){ft(Ne[0][3],In)}}function ht(tn){Ve("next",tn)}function qt(tn){Ve("throw",tn)}function ft(tn,Sn){tn(Sn),Ne.shift(),Ne.length&&Ve(Ne[0][0],Ne[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,le=ie[Symbol.asyncIterator];return le?le.call(ie):(ie=function ve(ie){var le="function"==typeof Symbol&&Symbol.iterator,ue=le&&ie[le],se=0;if(ue)return ue.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),ue={},se("next"),se("throw"),se("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function se(Ne){ue[Ne]=ie[Ne]&&function(Qe){return new Promise(function(Ve,en){!function fe(Ne,Qe,Ve,en){Promise.resolve(en).then(function(ht){Ne({value:ht,done:Ve})},Qe)}(Ve,en,(Qe=ie[Ne](Qe)).done,Qe.value)})}}}F.d(be,{FC:()=>de,KL:()=>he,_T:()=>te,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=7083)}]);