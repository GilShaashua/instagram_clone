"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(it,Ce,k)=>{k.d(Ce,{Dh:()=>Re,GT:()=>pe,cc:()=>Pe,on:()=>De,pX:()=>te,xv:()=>Fe});var d=k(5879),V=k(120);it=k.hmd(it);const F=["ngOnDestroy"],te=(Ae,Te,tt,ot={})=>new Proxy(Ae,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(Ae[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,Ae[de]),Ae[de];if(F.indexOf(de)>-1)return()=>{};const he=Te.toPromise().then(Ne=>{const B=Ne&&Ne[de];return"function"==typeof B?B.bind(Ne):B&&B.then?B.then(we=>tt.run(()=>we)):tt.run(()=>B)});return new Proxy(()=>{},{get:(Ne,B)=>he[B],apply:(Ne,B,we)=>he.then(Ue=>{var at;const Xt=Ue&&Ue(...we);return!(null===(at=ot?.spy)||void 0===at)&&at.apply&&ot.spy.apply(de,we,Xt),Xt})})})}),pe=(Ae,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(Ae.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class Ee{constructor(Te){return Te}}const Re=new d.OlP("angularfire2.app.options"),Fe=new d.OlP("angularfire2.app.name");function De(Ae,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(Ae,ee));try{JSON.stringify(Ae)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(re)}const U=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};function Pe(Ae,Te,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Ae)||[];if(de)return function Me(Ae,Te){try{return Ae.toString()===Te.toString()}catch{return Ae===Te}}(ee,re)||(ve("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Ae,he,ee]),he}}const Je=!!it.hot,ve=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(it,Ce,k)=>{k.d(Ce,{$:()=>ah,A:()=>W,D:()=>Me,I:()=>Zd,J:()=>bc,L:()=>je,N:()=>Vt,P:()=>Cn,Q:()=>Ia,R:()=>dg,U:()=>jp,V:()=>zo,W:()=>fs,X:()=>Fs,Y:()=>nh,Z:()=>rh,_:()=>Sc,a:()=>nl,a0:()=>_I,a1:()=>Pn,a2:()=>cx,a3:()=>ux,a4:()=>Ay,a5:()=>uo,a6:()=>Mc,a7:()=>uh,a8:()=>lh,a9:()=>My,aA:()=>B,aB:()=>Na,aC:()=>st,aD:()=>Wn,aE:()=>yo,aF:()=>Bc,aG:()=>_o,aH:()=>xn,aL:()=>Oc,aO:()=>xi,aa:()=>Gp,ab:()=>xy,ac:()=>Wp,ad:()=>Oy,ae:()=>Yu,af:()=>Ry,ai:()=>vI,aj:()=>lx,ak:()=>ky,an:()=>ih,ao:()=>Pc,aq:()=>yh,ar:()=>tl,as:()=>Ue,at:()=>Ze,au:()=>ge,av:()=>ee,aw:()=>Oi,ax:()=>Ph,ay:()=>Zt,az:()=>de,b:()=>Ch,c:()=>Mr,d:()=>ol,e:()=>Go,f:()=>cl,g:()=>ri,h:()=>gn,i:()=>gs,j:()=>Ky,k:()=>qs,l:()=>hg,m:()=>La,o:()=>Jo,p:()=>Fe,r:()=>lt,s:()=>Hr,u:()=>zr});var d=k(5861),V=k(9058),F=k(7592),te=k(7582),pe=k(7879),Ee=k(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new pe.Yd("@firebase/auth");function ot(C,...m){Te.logLevel<=pe.in.ERROR&&Te.error(`Auth (${F.SDK_VERSION}): ${C}`,...m)}function ee(C,...m){throw Ne(C,...m)}function de(C,...m){return Ne(C,...m)}function re(C,m,_){const E=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",E).create(m,{appName:C.name})}function he(C,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(C,"argument-error"),re(C,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(C,...m){if("string"!=typeof C){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=C.name),C._errorFactory.create(_,...E)}return ve.create(C,...m)}function B(C,m,..._){if(!C)throw Ne(m,..._)}function we(C){const m="INTERNAL ASSERTION FAILED: "+C;throw ot(m),new Error(m)}function Ue(C,m){C||we(m)}function at(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Xt(){return"http:"===kn()||"https:"===kn()}function kn(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nr(C,m){Ue(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new un(3e4,6e4);function se(C,m){return C.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:C.tenantId}):m}function fe(C,m,_,E){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(C,m,_,E,S={}){return Qe(C,S,(0,d.Z)(function*(){let P={},Z={};E&&("GET"===m?Z=E:P={body:JSON.stringify(E)});const oe=(0,V.xO)(Object.assign({key:C.config.apiKey},Z)).slice(1),Le=yield C._getAdditionalHeaders();return Le["Content-Type"]="application/json",C.languageCode&&(Le["X-Firebase-Locale"]=C.languageCode),ie.fetch()(qt(C,C.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(C,m,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(C,m,_){C._canInitEmulator=!1;const E=Object.assign(Object.assign({},ce),m);try{const S=new ft(C),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw tn(C,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,$e]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw tn(C,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw tn(C,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw tn(C,"user-disabled",Z);const nt=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw re(C,nt,$e);ee(C,nt)}}catch(S){if(S instanceof V.ZR)throw S;ee(C,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function en(C,m,_,E){return ht.apply(this,arguments)}function ht(){return(ht=(0,d.Z)(function*(C,m,_,E,S={}){const P=yield fe(C,m,_,E,S);return"mfaPendingCredential"in P&&ee(C,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function qt(C,m,_,E){const S=`${m}${_}?${E}`;return C.config.emulator?Nr(C.config,S):`${C.config.apiScheme}://${S}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(de(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(C,m,_){const E={appName:C.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const S=de(C,m,E);return S.customData._tokenResponse=_,S}function In(){return(In=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function cr(C){if(C)try{const m=new Date(Number(C));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ds(){return(ds=(0,d.Z)(function*(C,m=!1){const _=(0,V.m9)(C),E=yield _.getIdToken(m),S=mt(E);B(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:E,authTime:cr(dt(S.auth_time)),issuedAtTime:cr(dt(S.iat)),expirationTime:cr(dt(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(C){return 1e3*Number(C)}function mt(C){const[m,_,E]=C.split(".");if(void 0===m||void 0===_||void 0===E)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(ot("Failed to decode base64 JWT payload"),null)}catch(S){return ot("Caught error parsing JWT payload as JSON",S?.toString()),null}}function rn(C,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(C,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof V.ZR&&function Fr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(E)&&C.auth.currentUser===C&&(yield C.auth.signOut()),E}})).apply(this,arguments)}class Nt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,d.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class An{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hs(C){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,d.Z)(function*(C){var m;const _=C.auth,E=yield C.getIdToken(),S=yield rn(C,function hi(C,m){return Sr.apply(this,arguments)}(_,{idToken:E}));B(S?.users.length,_,"internal-error");const P=S.users[0];C._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Si(C){return C.map(m=>{var{providerId:_}=m,E=(0,te._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],oe=function Mn(C,m){return[...C.filter(E=>!m.some(S=>S.providerId===E.providerId)),...m]}(C.providerData,Z),nt=!!C.isAnonymous&&!(C.email&&P.passwordHash||oe?.length),Ot={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new An(P.createdAt,P.lastLoginAt),isAnonymous:nt};Object.assign(C,Ot)}),Gt.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(C){const m=(0,V.m9)(C);yield hs(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(C,m){const _=yield Qe(C,{},(0,d.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=C.config,Z=qt(C,S,"/v1/token",`key=${P}`),oe=yield C._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){B(m.idToken,"internal-error"),B(typeof m.idToken<"u","internal-error"),B(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function It(C){const m=mt(C);return B(m,"internal-error"),B(typeof m.exp<"u","internal-error"),B(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,d.Z)(function*(){return B(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function Ki(C,m){return Yi.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:S,expirationTime:P}=_,Z=new ur;return E&&(B("string"==typeof E,"internal-error",{appName:m}),Z.refreshToken=E),S&&(B("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(B("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ur,this.toJSON())}_performRefresh(){return we("not implemented")}}function He(C,m){B("string"==typeof C||typeof C>"u","internal-error",{appName:m})}class me{constructor(m){var{uid:_,auth:E,stsTokenManager:S}=m,P=(0,te._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new An(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const E=yield rn(_,_.stsTokenManager.getToken(_.auth,m));return B(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function kr(C){return ds.apply(this,arguments)}(this,m)}reload(){return function so(C){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(B(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new me(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,d.Z)(function*(){let S=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield hs(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield rn(m,function Sn(C,m){return In.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,S,P,Z,oe,Le,$e,nt;const Ot=null!==(E=_.displayName)&&void 0!==E?E:void 0,xr=null!==(S=_.email)&&void 0!==S?S:void 0,Ri=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Zs=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,bg=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,zc=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,Xo=null!==($e=_.createdAt)&&void 0!==$e?$e:void 0,ea=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:vl,emailVerified:Gc,isAnonymous:Ni,providerData:Ba,stsTokenManager:Ks}=_;B(vl&&Ks,m,"internal-error");const Wc=ur.fromJSON(this.name,Ks);B("string"==typeof vl,m,"internal-error"),He(Ot,m.name),He(xr,m.name),B("boolean"==typeof Gc,m,"internal-error"),B("boolean"==typeof Ni,m,"internal-error"),He(Ri,m.name),He(Zs,m.name),He(bg,m.name),He(zc,m.name),He(Xo,m.name),He(ea,m.name);const bo=new me({uid:vl,auth:m,email:xr,emailVerified:Gc,displayName:Ot,isAnonymous:Ni,photoURL:Zs,phoneNumber:Ri,tenantId:bg,stsTokenManager:Wc,createdAt:Xo,lastLoginAt:ea});return Ba&&Array.isArray(Ba)&&(bo.providerData=Ba.map(wl=>Object.assign({},wl))),zc&&(bo._redirectEventId=zc),bo}static _fromIdTokenResponse(m,_,E=!1){return(0,d.Z)(function*(){const S=new ur;S.updateFromServerResponse(_);const P=new me({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:E});return yield hs(P),P})()}}const Xe=new Map;function st(C){Ue(C instanceof Function,"Expected a class definition");let m=Xe.get(C);return m?(Ue(m instanceof C,"Instance stored in cache mismatched with class"),m):(m=new C,Xe.set(C,m),m)}const Vt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var S=this;return(0,d.Z)(function*(){S.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const S=E.storage[_];return void 0===S?null:S})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return C.type="NONE",C})();function Wn(C,m,_){return`firebase:${C}:${m}:${_}`}class z{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:S,name:P}=this.auth;this.fullUserKey=Wn(this.userKey,S.apiKey,P),this.fullPersistenceKey=Wn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?me._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new z(st(Vt),m,E);const S=(yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let P=S[0]||st(Vt);const Z=Wn(E,m.config.apiKey,m.name);let oe=null;for(const $e of _)try{const nt=yield $e._get(Z);if(nt){const Ot=me._fromJSON(m,nt);$e!==P&&(oe=Ot),P=$e;break}}catch{}const Le=S.filter($e=>$e._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(nt){if(nt!==P)try{yield nt._remove(Z)}catch{}});return function(nt){return $e.apply(this,arguments)}}())),new z(P,m,E)):new z(P,m,E)})()}}function j(C){const m=C.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Be(m))return"Blackberry";if(vt(m))return"Webos";if(R(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(ge(m))return"Android";{const E=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(C=(0,V.z$)()){return/firefox\//i.test(C)}function R(C=(0,V.z$)()){const m=C.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(C=(0,V.z$)()){return/crios\//i.test(C)}function K(C=(0,V.z$)()){return/iemobile/i.test(C)}function ge(C=(0,V.z$)()){return/android/i.test(C)}function Be(C=(0,V.z$)()){return/blackberry/i.test(C)}function vt(C=(0,V.z$)()){return/webos/i.test(C)}function Ze(C=(0,V.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Zt(C=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Mt(C=(0,V.z$)()){return Ze(C)||ge(C)||vt(C)||Be(C)||/windows phone/i.test(C)||K(C)}function wc(C,m=[]){let _;switch(C){case"Browser":_=j((0,V.z$)());break;case"Worker":_=`${j((0,V.z$)())}-${C}`;break;default:_=C}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${F.SDK_VERSION}/${E}`}function oo(){return(oo=(0,d.Z)(function*(C){return(yield fe(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xs(C,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(C,m){return fe(C,"GET","/v2/recaptchaConfig",se(C,m))})).apply(this,arguments)}function Wt(C){return void 0!==C&&void 0!==C.getResponse}function $o(C){return void 0!==C&&void 0!==C.enterprise}class va{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Lu(C){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",C),E.onload=m,E.onerror=S=>{const P=de("internal-error");P.customData=S,_(P)},E.type="text/javascript",E.charset="UTF-8",function Fu(){var C,m;return null!==(m=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==m?m:document}().appendChild(E)})}function Ps(C){return`__${C}${Math.floor(1e6*Math.random())}`}class Ca{constructor(m){this.type="recaptcha-enterprise",this.auth=xn(m)}verify(m="verify",_=!1){var E=this;return(0,d.Z)(function*(){function P(){return P=(0,d.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,d.Z)(function*($e,nt){xs(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ot=>{if(void 0!==Ot.recaptchaKey){const xr=new va(Ot);return null==oe.tenantId?oe._agentRecaptchaConfig=xr:oe._tenantRecaptchaConfigs[oe.tenantId]=xr,$e(xr.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ot=>{nt(Ot)})});return function($e,nt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,$e){const nt=window.grecaptcha;$o(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(Ot=>{Le(Ot)}).catch(()=>{Le("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(E.auth).then($e=>{if(!_&&$o(window.grecaptcha))Z($e,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));Lu("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{Z($e,oe,Le)}).catch(nt=>{Le(nt)})}}).catch($e=>{Le($e)})})})()}}function Os(C,m,_){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(C,m,_,E=!1){const S=new Ca(C);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,E?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Ec{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const E=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});E.onAbort=_,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===m)return;const E=[];try{for(const S of _.queue)yield S(m),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const P of E)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Ic{constructor(m,_,E,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new Ec(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=st(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,P;if(!E._deleted&&(E.persistenceManager=yield z.create(E,m),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var E;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=P?._redirectEventId,$e=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&$e?.user&&(P=$e.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return B(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){try{yield hs(m)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function En(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const E=m?(0,V.m9)(m):null;return E&&B(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return m&&B(E.tenantId===m.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(m)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(m),E.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(st(m))}))}initializeRecaptchaConfig(){var m=this;return(0,d.Z)(function*(){const _=yield xs(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new va(_);null==m.tenantId?m._agentRecaptchaConfig=E:m._tenantRecaptchaConfigs[m.tenantId]=E,E.emailPasswordEnabled&&new Ca(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,d.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&st(m)||_._popupRedirectResolver;B(E,_,"argument-error"),_.redirectPersistenceManager=yield z.create(_,[st(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var E,S;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,E,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=wc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(E["X-Firebase-AppCheck"]=P),E})()}_getAppCheckToken(){var m=this;return(0,d.Z)(function*(){var _;const E=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return E?.error&&function tt(C,...m){Te.logLevel<=pe.in.WARN&&Te.warn(`Auth (${F.SDK_VERSION}): ${C}`,...m)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function xn(C){return(0,V.m9)(C)}class my{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zd(C,m,_){const E=xn(C);B(E._canInitEmulator,E,"emulator-config-failed"),B(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=ei(m),{host:Z,port:oe}=function Kd(C){const m=ei(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const P=S[1];return{host:P,port:Yd(E.substr(P.length+1))}}{const[P,Z]=E.split(":");return{host:P,port:Yd(Z)}}}(m);E.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function yy(){function C(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ei(C){const m=C.indexOf(":");return m<0?"":C.substr(0,m+1)}function Yd(C){if(!C)return null;const m=Number(C);return isNaN(m)?null:m}class bc{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function Qd(C,m){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:resetPassword",se(C,m))})).apply(this,arguments)}function Up(C,m){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:update",se(C,m))})).apply(this,arguments)}function Vu(C,m){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPassword",se(C,m))})).apply(this,arguments)}function Bu(C,m){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:sendOobCode",se(C,m))})).apply(this,arguments)}function eh(){return(eh=(0,d.Z)(function*(C,m){return Bu(C,m)})).apply(this,arguments)}function $u(C,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(C,m){return Bu(C,m)})).apply(this,arguments)}function zu(C,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(C,m){return Bu(C,m)})).apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(C,m){return Bu(C,m)})).apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithEmailLink",se(C,m))})).apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithEmailLink",se(C,m))})).apply(this,arguments)}class ao extends bc{constructor(m,_,E,S=null){super("password",E),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new ao(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new ao(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){var E;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=m._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const P=yield Os(m,S,"signInWithPassword");return Vu(m,P)}return Vu(m,S).catch(function(){var P=(0,d.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield Os(m,S,"signInWithPassword");return Vu(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function Ea(C,m){return Lr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Up(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Bp(C,m){return Gu.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Rs(C,m){return th.apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithIdp",se(C,m))})).apply(this,arguments)}class je extends bc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:S}=_,P=(0,te._T)(_,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new je(E,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Rs(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Rs(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Rs(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function hn(){return(hn=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:sendVerificationCode",se(C,m))})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,m))})).apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(C,m){const _=yield en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,m));if(_.temporaryProof)throw tn(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Un={USER_NOT_FOUND:"user-not-found"};function co(){return(co=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Un)})).apply(this,arguments)}class pt extends bc{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function pi(C,m){return Ns.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function mr(C,m){return Ho.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ks(C,m){return co.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:S,temporaryProof:P}=m;return E||_||S||P?new pt({verificationId:_,verificationCode:E,phoneNumber:S,temporaryProof:P}):null}}class gi{constructor(m){var _,E,S,P,Z,oe;const Le=(0,V.zd)((0,V.pd)(m)),$e=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(E=Le.oobCode)&&void 0!==E?E:null,Ot=function Tc(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);B($e&&nt&&Ot,"argument-error"),this.apiKey=$e,this.operation=Ot,this.code=nt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function vy(C){const m=(0,V.zd)((0,V.pd)(C)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(C)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||_||m||C}(m);try{return new gi(_)}catch{return null}}}let Ia=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,E){return ao._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const S=gi.parseLink(E);return B(S,"argument-error"),ao._fromEmailAndCode(_,S.code,S.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class mi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ur extends mi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Fs extends Ur{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return B("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return B(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Fs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Fs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!E&&!S&&!_&&!P||!oe)return null;try{return new Fs(oe)._credential({idToken:_,accessToken:E,nonce:Z,pendingToken:P})}catch{return null}}}let jp=(()=>{class C extends Ur{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),zo=(()=>{class C extends Ur{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:S}=_;if(!E&&!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),fs=(()=>{class C extends Ur{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class xi extends bc{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Rs(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Rs(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Rs(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:S,pendingToken:P}=_;return E&&S&&P&&E===S?new xi(E,P):null}static _create(m,_){return new xi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class nh extends mi{constructor(m){B(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return nh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return nh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=xi.fromJSON(m);return B(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return xi._create(E,_)}catch{return null}}}let rh=(()=>{class C extends Ur{constructor(){super("twitter.com")}static credential(_,E){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=_;if(!E||!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Dc(C,m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signUp",se(C,m))})).apply(this,arguments)}class Br{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,S=!1){return(0,d.Z)(function*(){const P=yield me._fromIdTokenResponse(m,E,S),Z=ba(E);return new Br({user:P,providerId:Z,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const S=ba(E);return new Br({user:m,providerId:S,_tokenResponse:E,operationType:_})})()}}function ba(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Sc(C){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(C){var m;const _=xn(C);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Br({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Dc(_,{returnSecureToken:!0}),S=yield Br._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class $p extends V.ZR{constructor(m,_,E,S){var P;super(_.code,_.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,$p.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,S){return new $p(m,_,E,S)}}function ti(C,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?$p._fromErrorAndOperation(C,P,m,E):P})}function Ar(C){return new Set(C.map(({providerId:m})=>m).filter(m=>!!m))}function ih(C,m){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C);yield Ta(!0,_,m);const{providerUserInfo:E}=yield function nn(C,m){return Fn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=Ar(E||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ls.apply(this,arguments)}function Ac(C,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(C,m,_=!1){const E=yield rn(C,m._linkToIdToken(C.auth,yield C.getIdToken()),_);return Br._forOperation(C,"link",E)})).apply(this,arguments)}function Ta(C,m,_){return sh.apply(this,arguments)}function sh(){return(sh=(0,d.Z)(function*(C,m,_){yield hs(m);const S=!1===C?"provider-already-linked":"no-such-provider";B(Ar(m.providerData).has(_)===C,m.auth,S)})).apply(this,arguments)}function Hp(C,m){return wy.apply(this,arguments)}function wy(){return(wy=(0,d.Z)(function*(C,m,_=!1){const{auth:E}=C,S="reauthenticate";try{const P=yield rn(C,ti(E,S,m,C),_);B(P.idToken,E,"internal-error");const Z=mt(P.idToken);B(Z,E,"internal-error");const{sub:oe}=Z;return B(C.uid===oe,E,"user-mismatch"),Br._forOperation(C,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(E,"user-mismatch"),P}})).apply(this,arguments)}function Cy(C,m){return oh.apply(this,arguments)}function oh(){return(oh=(0,d.Z)(function*(C,m,_=!1){const E="signIn",S=yield ti(C,E,m),P=yield Br._fromIdTokenResponse(C,E,S);return _||(yield C._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ah(C,m){return zp.apply(this,arguments)}function zp(){return(zp=(0,d.Z)(function*(C,m){return Cy(xn(C),m)})).apply(this,arguments)}function _I(C,m){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C);return yield Ta(!1,_,m.providerId),Ac(_,m)})).apply(this,arguments)}function Pn(C,m){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,d.Z)(function*(C,m){return Hp((0,V.m9)(C),m)})).apply(this,arguments)}function by(){return(by=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithCustomToken",se(C,m))})).apply(this,arguments)}function cx(C,m){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,d.Z)(function*(C,m){const _=xn(C),E=yield function ax(C,m){return by.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield Br._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(S.user),S}),Ty.apply(this,arguments)}class ch{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Dy._fromServerResponse(m,_):"totpInfo"in _?qu._fromServerResponse(m,_):ee(m,"internal-error")}}class Dy extends ch{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Dy(_)}}class qu extends ch{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new qu(_)}}function Da(C,m,_){var E;B((null===(E=_.url)||void 0===E?void 0:E.length)>0,C,"invalid-continue-uri"),B(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(B(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(B(_.android.packageName.length>0,C,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function ux(C,m,_){return Sy.apply(this,arguments)}function Sy(){return Sy=(0,d.Z)(function*(C,m,_){var E;const S=xn(C),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Z=yield Os(S,P,"getOobCode",!0);_&&Da(S,Z,_),yield $u(S,Z)}else _&&Da(S,P,_),yield $u(S,P).catch(function(){var Z=(0,d.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield Os(S,P,"getOobCode",!0);_&&Da(S,Le,_),yield $u(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),Sy.apply(this,arguments)}function Ay(C,m,_){return Us.apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(C,m,_){yield Qd((0,V.m9)(C),{oobCode:m,newPassword:_})})).apply(this,arguments)}function uo(C,m){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,d.Z)(function*(C,m){yield function mI(C,m){return fi.apply(this,arguments)}((0,V.m9)(C),{oobCode:m})}),Zu.apply(this,arguments)}function Mc(C,m){return lr.apply(this,arguments)}function lr(){return(lr=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C),E=yield Qd(_,{oobCode:m}),S=E.requestType;switch(B(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(E.mfaInfo,_,"internal-error");default:B(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=ch._fromServerResponse(xn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function uh(C,m){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(C,m){const{data:_}=yield Mc((0,V.m9)(C),m);return _.email})).apply(this,arguments)}function lh(C,m,_){return dh.apply(this,arguments)}function dh(){return dh=(0,d.Z)(function*(C,m,_){var E;const S=xn(C),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $e=yield Os(S,P,"signUpPassword");Z=Dc(S,$e)}else Z=Dc(S,P).catch(function(){var $e=(0,d.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ot=yield Os(S,P,"signUpPassword");return Dc(S,Ot)}return Promise.reject(nt)});return function(nt){return $e.apply(this,arguments)}}());const oe=yield Z.catch($e=>Promise.reject($e)),Le=yield Br._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),dh.apply(this,arguments)}function My(C,m,_){return ah((0,V.m9)(C),Ia.credential(m,_))}function Gp(C,m,_){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,d.Z)(function*(C,m,_){var E;const S=xn(C),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){B(Le.handleCodeInApp,S,"argument-error"),Le&&Da(S,oe,Le)}if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const oe=yield Os(S,P,"getOobCode",!0);Z(oe,_),yield zu(S,oe)}else Z(P,_),yield zu(S,P).catch(function(){var oe=(0,d.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Os(S,P,"getOobCode",!0);Z($e,_),yield zu(S,$e)}});return function(Le){return oe.apply(this,arguments)}}())}),Sa.apply(this,arguments)}function xy(C,m){const _=gi.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function Wp(C,m,_){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),S=Ia.credentialWithLink(m,_||at());return B(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ah(E,S)})).apply(this,arguments)}function hh(){return(hh=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:createAuthUri",se(C,m))})).apply(this,arguments)}function Oy(C,m){return xc.apply(this,arguments)}function xc(){return xc=(0,d.Z)(function*(C,m){const E={identifier:m,continueUri:Xt()?at():"http://localhost"},{signinMethods:S}=yield function Py(C,m){return hh.apply(this,arguments)}((0,V.m9)(C),E);return S||[]}),xc.apply(this,arguments)}function Yu(C,m){return lo.apply(this,arguments)}function lo(){return lo=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C),S={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};m&&Da(_.auth,S,m);const{email:P}=yield function ju(C,m){return eh.apply(this,arguments)}(_.auth,S);P!==C.email&&(yield C.reload())}),lo.apply(this,arguments)}function Ry(C,m,_){return qp.apply(this,arguments)}function qp(){return qp=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:m};_&&Da(E.auth,P,_);const{email:Z}=yield function pr(C,m){return gr.apply(this,arguments)}(E.auth,P);Z!==C.email&&(yield C.reload())}),qp.apply(this,arguments)}function Ny(){return(Ny=(0,d.Z)(function*(C,m){return fe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function vI(C,m){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,d.Z)(function*(C,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,V.m9)(C),P={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield rn(E,function yI(C,m){return Ny.apply(this,arguments)}(E.auth,P));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const oe=E.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)}),Zp.apply(this,arguments)}function lx(C,m){return fh((0,V.m9)(C),m,null)}function ky(C,m){return fh((0,V.m9)(C),null,m)}function fh(C,m,_){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,d.Z)(function*(C,m,_){const{auth:E}=C,P={idToken:yield C.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield rn(C,Up(E,P));yield C._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Qu{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class wI extends Qu{constructor(m,_,E,S){super(m,_,E),this.username=S}}class Ju extends Qu{constructor(m,_){super(m,"facebook.com",_)}}class Fy extends wI{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Qp extends Qu{constructor(m,_){super(m,"google.com",_)}}class ph extends wI{constructor(m,_,E){super(m,"twitter.com",_,E)}}function Pc(C){const{user:m,_tokenResponse:_}=C;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Yp(C){var m,_;if(!C)return null;const{providerId:E}=C,S=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},P=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!E&&C?.idToken){const Z=null===(_=null===(m=mt(C.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Qu(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new Ju(P,S);case"github.com":return new Fy(P,S);case"google.com":return new Qp(P,S);case"twitter.com":return new ph(P,S,C.screenName||null);case"custom":case"anonymous":return new Qu(P,null);default:return new Qu(P,E,S)}}(_)}class Vs{constructor(m,_,E){this.type=m,this.credential=_,this.auth=E}static _fromIdtoken(m,_){return new Vs("enroll",m,_)}static _fromMfaPendingCredential(m){return new Vs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Vs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(E=m.multiFactorSession)&&void 0!==E&&E.idToken)return Vs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Aa{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=xn(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>ch._fromServerResponse(E,oe));B(S.mfaPendingCredential,E,"internal-error");const Z=Vs._fromMfaPendingCredential(S.mfaPendingCredential);return new Aa(Z,P,function(){var oe=(0,d.Z)(function*(Le){const $e=yield Le._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const nt=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(_.operationType){case"signIn":const Ot=yield Br._fromIdTokenResponse(E,_.operationType,nt);return yield E._updateCurrentUser(Ot.user),Ot;case"reauthenticate":return B(_.user,E,"internal-error"),Br._forOperation(_.user,_.operationType,nt);default:ee(E,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function yh(C,m){var _;const E=(0,V.m9)(C),S=m;return B(m.customData.operationType,E,"argument-error"),B(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Aa._fromError(E,S)}class el{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>ch._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new el(m)}getSession(){var m=this;return(0,d.Z)(function*(){return Vs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var E=this;return(0,d.Z)(function*(){const S=m,P=yield E.getSession(),Z=yield rn(E.user,S._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){const E="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield rn(_.user,function Xp(C,m){return fe(C,"POST","/v2/accounts/mfaEnrollment:withdraw",se(C,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==E),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const sn=new WeakMap;function tl(C){const m=(0,V.m9)(C);return sn.has(m)||sn.set(m,el._fromUser(m)),sn.get(m)}const Bs="__sak";class $r{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ch=(()=>{class C extends $r{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bI(){const C=(0,V.z$)();return R(C)||Ze(C)}()&&function Ai(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),P=this.localCache[E];S!==P&&_(E,P,S)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,$e)=>{this.notifyListeners(oe,$e)});const S=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!E)return}const P=()=>{const oe=this.storage.getItem(S);!E&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function dn(){return(0,V.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var S=()=>super._set,P=this;return(0,d.Z)(function*(){yield S().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,S=this;return(0,d.Z)(function*(){const P=yield E().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,S=this;return(0,d.Z)(function*(){yield E().call(S,_),delete S.localCache[_]})()}}return C.type="LOCAL",C})(),nl=(()=>{class C extends $r{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return C.type="SESSION",C})();let eg=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const S=new C(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=E.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const $e=Array.from(Le).map(function(){var Ot=(0,d.Z)(function*(xr){return xr(S.origin,oe)});return function(xr){return Ot.apply(this,arguments)}}()),nt=yield function ho(C){return Promise.all(C.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:nt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Oc(C="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return C+_}class jy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var S=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,$e)=>{const nt=Oc("",20);P.port1.start();const Ot=setTimeout(()=>{$e(new Error("unsupported_event"))},E);oe={messageChannel:P,onMessage(xr){const Ri=xr;if(Ri.data.eventId===nt)switch(Ri.data.status){case"ack":clearTimeout(Ot),Z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ri.data.response);break;default:clearTimeout(Ot),clearTimeout(Z),$e(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:nt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function qn(){return window}function tg(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function rl(){return(rl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rg="firebaseLocalStorageDb",xa="firebaseLocalStorage",fo="fbase_key";class Rc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ih(C,m){return C.transaction([xa],m?"readwrite":"readonly").objectStore(xa)}function ig(){const C=indexedDB.open(rg,1);return new Promise((m,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const E=C.result;try{E.createObjectStore(xa,{keyPath:fo})}catch(S){_(S)}}),C.addEventListener("success",(0,d.Z)(function*(){const E=C.result;E.objectStoreNames.contains(xa)?m(E):(E.close(),yield function Hy(){const C=indexedDB.deleteDatabase(rg);return new Rc(C).toPromise()}(),m(yield ig()))}))})}function sg(C,m,_){return _e.apply(this,arguments)}function _e(){return(_e=(0,d.Z)(function*(C,m,_){const E=Ih(C,!0).put({[fo]:m,value:_});return new Rc(E).toPromise()})).apply(this,arguments)}function Ji(){return(Ji=(0,d.Z)(function*(C,m){const _=Ih(C,!1).get(m),E=yield new Rc(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function bh(C,m){const _=Ih(C,!0).delete(m);return new Rc(_).toPromise()}const gs=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield ig()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(S++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return tg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=eg._getInstance(function ng(){return tg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,S;if(_.activeServiceWorker=yield function _t(){return rl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new jy(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function DI(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ig();return yield sg(_,Bs,"1"),yield bh(_,Bs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(P=>sg(P,_,E)),S.localCache[_]=E,S.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const S=yield E._withRetries(P=>function Bt(C,m){return Ji.apply(this,arguments)}(P,_));return E.localCache[_]=S,S})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(S=>bh(S,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(Z=>{const oe=Ih(Z,!1).getAll();return new Rc(oe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of E)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,E){this.localCache[_]=E;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),yr=1e12;class po{constructor(m){this.auth=m,this.counter=yr,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new Wy(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||yr;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||yr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(m||yr))||void 0===E||E.execute(),""})()}}class Wy{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;B(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kc(C){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<C;E++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ms=Ps("rcb"),SI=new un(3e4,6e4);class ug{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=qn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return B(function AI(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Wt(qn().grecaptcha)?Promise.resolve(qn().grecaptcha):new Promise((E,S)=>{const P=qn().setTimeout(()=>{S(de(m,"network-request-failed"))},SI.get());qn()[ms]=()=>{qn().clearTimeout(P),delete qn()[ms];const oe=qn().grecaptcha;if(!oe||!Wt(oe))return void S(de(m,"internal-error"));const Le=oe.render;oe.render=($e,nt)=>{const Ot=Le($e,nt);return this.counter++,Ot},this.hostLanguage=_,E(oe)},Lu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ms,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=qn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class lg{load(m){return(0,d.Z)(function*(){return new po(m)})()}clearedOneInstance(){}}const Th="recaptcha",qy={theme:"light",type:"image"};class dg{constructor(m,_=Object.assign({},qy),E){this.parameters=_,this.type=Th,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xn(E),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;B(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lg:new ug,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=qn()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){B(Xt()&&!tg(),m.auth,"internal-error"),yield function MI(){let C=null;return new Promise(m=>{"complete"!==document.readyState?(C=()=>m(),window.addEventListener("load",C)):m()}).catch(m=>{throw C&&window.removeEventListener("load",C),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ms(C){return oo.apply(this,arguments)}(m.auth);B(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Hr(C,m,_){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(C,m,_){const E=xn(C),S=yield sl(E,m,(0,V.m9)(_));return new Dh(S,P=>ah(E,P))})).apply(this,arguments)}function hg(C,m,_){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);yield Ta(!1,E,"phone");const S=yield sl(E.auth,m,(0,V.m9)(_));return new Dh(S,P=>_I(E,P))})).apply(this,arguments)}function lt(C,m,_){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),S=yield sl(E.auth,m,(0,V.m9)(_));return new Dh(S,P=>Pn(E,P))})).apply(this,arguments)}function sl(C,m,_){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,d.Z)(function*(C,m,_){var E;const S=yield _.verify();try{let P;if(B("string"==typeof S,C,"argument-error"),B(_.type===Th,C,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return B("enroll"===Z.type,C,"internal-error"),(yield function By(C,m){return fe(C,"POST","/v2/accounts/mfaEnrollment:start",se(C,m))}(C,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,C,"internal-error");const oe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return B(oe,C,"missing-multi-factor-info"),(yield function og(C,m){return fe(C,"POST","/v2/accounts/mfaSignIn:start",se(C,m))}(C,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function Et(C,m){return hn.apply(this,arguments)}(C,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Sh.apply(this,arguments)}function zr(C,m){return $s.apply(this,arguments)}function $s(){return($s=(0,d.Z)(function*(C,m){yield Ac((0,V.m9)(C),m)})).apply(this,arguments)}let Cn=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=xn(_)}verifyPhoneNumber(_,E){return sl(this.auth,_,(0,V.m9)(E))}static credential(_,E){return pt._fromVerification(_,E)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:S}=_;return E&&S?pt._fromTokenResponse(E,S):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function go(C,m){return m?st(m):(B(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class mo extends bc{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Rs(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Rs(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Rs(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Ct(C){return Cy(C.auth,new mo(C),C.bypassAuthState)}function Zy(C){const{auth:m,user:_}=C;return B(_,m,"internal-error"),Hp(_,new mo(C),C.bypassAuthState)}function fg(C){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(C){const{auth:m,user:_}=C;return B(_,m,"internal-error"),Ac(_,new mo(C),C.bypassAuthState)})).apply(this,arguments)}class Hs{constructor(m,_,E,S,P=!1){this.auth=m,this.resolver=E,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(E,S){m.pendingPromise={resolve:E,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(E,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const $e={auth:_.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)($e))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ct;case"linkViaPopup":case"linkViaRedirect":return fg;case"reauthViaPopup":case"reauthViaRedirect":return Zy;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zs=new un(2e3,1e4);function Mr(C,m,_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(C,m,_){const E=xn(C);he(C,m,mi);const S=go(E,_);return new Gs(E,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function Go(C,m,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);he(E.auth,m,mi);const S=go(E.auth,_);return new Gs(E.auth,"reauthViaPopup",m,S,E).executeNotNull()})).apply(this,arguments)}function ol(C,m,_){return al.apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);he(E.auth,m,mi);const S=go(E.auth,_);return new Gs(E.auth,"linkViaPopup",m,S,E).executeNotNull()})).apply(this,arguments)}let Gs=(()=>{class C extends Hs{constructor(_,E,S,P,Z){super(_,E,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return B(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const E=Oc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,zs.get())};_()}}return C.currentPopupAction=null,C})();const Lc="pendingRedirect",_s=new Map;class Wo extends Hs{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=_s.get(_.auth._key());if(!E){try{const P=(yield function Uc(C,m){return Ah.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(P)}catch(S){E=()=>Promise.reject(S)}_s.set(_.auth._key(),E)}return _.bypassAuthState||_s.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const S=yield E.auth._redirectUserForId(m.eventId);if(S)return E.user=S,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ah(){return(Ah=(0,d.Z)(function*(C,m){const _=Mh(m),E=Gr(C);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(_));return yield E._remove(_),S})).apply(this,arguments)}function Vc(C,m){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.Z)(function*(C,m){return Gr(C)._set(Mh(m),"true")})).apply(this,arguments)}function _o(){_s.clear()}function Bc(C,m){_s.set(C._key(),m)}function Gr(C){return st(C._redirectPersistence)}function Mh(C){return Wn(Lc,C.config.apiKey,C.name)}function cl(C,m,_){return function _i(C,m,_){return Vn.apply(this,arguments)}(C,m,_)}function Vn(){return(Vn=(0,d.Z)(function*(C,m,_){const E=xn(C);he(C,m,mi),yield E._initializationPromise;const S=go(E,_);return yield Vc(S,E),S._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function gn(C,m,_){return function Ra(C,m,_){return wr.apply(this,arguments)}(C,m,_)}function wr(){return(wr=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);he(E.auth,m,mi),yield E.auth._initializationPromise;const S=go(E.auth,_);yield Vc(S,E.auth);const P=yield Xi(E);return S._openRedirect(E.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function ri(C,m,_){return function jc(C,m,_){return $c.apply(this,arguments)}(C,m,_)}function $c(){return($c=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);he(E.auth,m,mi),yield E.auth._initializationPromise;const S=go(E.auth,_);yield Ta(!1,E,m.providerId),yield Vc(S,E.auth);const P=yield Xi(E);return S._openRedirect(E.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function Ky(C,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(C,m){return yield xn(C)._initializationPromise,yo(C,m,!1)})).apply(this,arguments)}function yo(C,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(C,m,_=!1){const E=xn(C),S=go(E,m),Z=yield new Wo(E,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Xi(C){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(C){const m=Oc(`${C.uid}:::`);return C._redirectEventId=m,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),m})).apply(this,arguments)}class Na{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function ka(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xh(C);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!xh(m)){const S=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(de(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pg(m))}saveEventToCache(m){this.cachedEventUids.add(pg(m)),this.lastProcessedEventTime=Date.now()}}function pg(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(m=>m).join("-")}function xh({type:C,error:m}){return"unknown"===C&&"auth/no-auth-event"===m?.code}function Ph(C){return ll.apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(C,m={}){return fe(C,"GET","/v1/projects",m)})).apply(this,arguments)}const bt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vo=/^https?/;function wo(){return(wo=(0,d.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:m}=yield Ph(C);for(const _ of m)try{if(gg(_))return}catch{}ee(C,"unauthorized-domain")})).apply(this,arguments)}function gg(C){const m=at(),{protocol:_,hostname:E}=new URL(m);if(C.startsWith("chrome-extension://")){const Z=new URL(C);return""===Z.hostname&&""===E?"chrome-extension:"===_&&C.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===E}if(!vo.test(_))return!1;if(bt.test(C))return E===C;const S=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const mg=new un(3e4,6e4);function Wr(){const C=qn().___jsl;if(C?.H)for(const m of Object.keys(C.H))if(C.H[m].r=C.H[m].r||[],C.H[m].L=C.H[m].L||[],C.H[m].r=[...C.H[m].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let nr=null;const yg=new un(5e3,15e3),dl="__/auth/iframe",vg="emulator/auth/iframe",wg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fa(C){const m=C.config;B(m.authDomain,C,"auth-domain-config-required");const _=m.emulator?Nr(m,vg):`https://${C.config.authDomain}/${dl}`,E={apiKey:m.apiKey,appName:C.name,v:F.SDK_VERSION},S=hl.get(C.config.apiHost);S&&(E.eid=S);const P=C._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,V.xO)(E).slice(1)}`}function Ws(){return Ws=(0,d.Z)(function*(C){const m=yield function Co(C){return nr=nr||function _g(C){return new Promise((m,_)=>{var E,S,P;function Z(){Wr(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Wr(),_(de(C,"network-request-failed"))},timeout:mg.get()})}if(null!==(S=null===(E=qn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=qn().gapi)||void 0===P||!P.load){const oe=Ps("iframefcb");return qn()[oe]=()=>{gapi.load?Z():_(de(C,"network-request-failed"))},Lu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw nr=null,m})}(C),nr}(C),_=qn().gapi;return B(_,C,"internal-error"),m.open({where:document.body,url:Fa(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wg,dontclear:!0},E=>new Promise(function(){var S=(0,d.Z)(function*(P,Z){yield E.restyle({setHideOnLeave:!1});const oe=de(C,"network-request-failed"),Le=qn().setTimeout(()=>{Z(oe)},yg.get());function $e(){qn().clearTimeout(Le),P(E)}E.ping($e).then($e,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),Ws.apply(this,arguments)}const Hc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qo{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Cg="__/auth/handler",PI="emulator/auth/handler",Oh=encodeURIComponent("fac");function Oi(C,m,_,E,S,P){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(C,m,_,E,S,P){B(C.config.authDomain,C,"auth-domain-config-required"),B(C.config.apiKey,C,"invalid-api-key");const Z={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:E,v:F.SDK_VERSION,eventId:S};if(m instanceof mi){m.setDefaultLanguage(C.languageCode),Z.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,Ot]of Object.entries(P||{}))Z[nt]=Ot}if(m instanceof Ur){const nt=m.getScopes().filter(Ot=>""!==Ot);nt.length>0&&(Z.scopes=nt.join(","))}C.tenantId&&(Z.tid=C.tenantId);const oe=Z;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield C._getAppCheckToken(),$e=Le?`#${Oh}=${encodeURIComponent(Le)}`:"";return`${function ml({config:C}){return C.emulator?Nr(C,PI):`https://${C.authDomain}/${Cg}`}(C)}?${(0,V.xO)(oe).slice(1)}${$e}`})).apply(this,arguments)}const Bn="webStorageSupport",qs=class Rh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nl,this._completeRedirectFn=yo,this._overrideRedirectResult=Bc}_openPopup(m,_,E,S){var P=this;return(0,d.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Oi(m,_,E,at(),S);return function xI(C,m,_,E=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},Hc),{width:E.toString(),height:S.toString(),top:P,left:Z}),$e=(0,V.z$)().toLowerCase();_&&(oe=x($e)?"_blank":_),O($e)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((xr,[Ri,Zs])=>`${xr}${Ri}=${Zs},`,"");if(function wt(C=(0,V.z$)()){var m;return Ze(C)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}($e)&&"_self"!==oe)return function pl(C,m){const _=document.createElement("a");_.href=C,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",oe),new Qo(null);const Ot=window.open(m||"",oe,nt);B(Ot,C,"popup-blocked");try{Ot.focus()}catch{}return new Qo(Ot)}(m,oe,Oc())})()}_openRedirect(m,_,E,S){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(m),function Eh(C){qn().location.href=C}(yield Oi(m,_,E,at(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const E=yield function Yo(C){return Ws.apply(this,arguments)}(m),S=new Na(m);return E.register("authEvent",P=>(B(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=E,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Bn,{type:Bn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[Bn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ko(C){return wo.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Mt()||R()||Ze()}};class Eg{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class qr extends Eg{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new qr(m)}_finalizeEnroll(m,_,E){return function vh(C,m){return fe(C,"POST","/v2/accounts/mfaEnrollment:finalize",se(C,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ag(C,m){return fe(C,"POST","/v2/accounts/mfaSignIn:finalize",se(C,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let La=(()=>{class C{constructor(){}static assertion(_){return qr._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var Jy="@firebase/auth";class OI{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{m(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Xy=(0,V.Pz)("authIdTokenMaxAge")||300;let yl=null;const ev=C=>function(){var m=(0,d.Z)(function*(_){const E=_&&(yield _.getIdTokenResult()),S=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(S&&S>Xy)return;const P=E?.token;yl!==P&&(yl=P,yield fetch(C,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function Jo(C=(0,F.getApp)()){const m=(0,F._getProvider)(C,"auth");if(m.isInitialized())return m.getImmediate();const _=function Qi(C,m){const _=(0,F._getProvider)(C,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,V.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(C,{popupRedirectResolver:qs,persistence:[gs,Ch,nl]}),E=(0,V.Pz)("authTokenSyncURL");if(E){const P=ev(E);(function Jp(C,m,_){(0,V.m9)(C).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Ly(C,m,_,E){(0,V.m9)(C).onIdTokenChanged(m,_,E)}(_,Z=>P(Z))}const S=(0,V.q4)("auth");return S&&Zd(_,`http://${S}`),_}!function Nh(C){(0,F._registerComponent)(new Ee.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=E.options;B(Z&&!Z.includes(":"),"invalid-api-key",{appName:E.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wc(C)},$e=new Ic(E,S,P,Le);return function _y(C,m){const _=m?.persistence||[],E=(Array.isArray(_)?_:[_]).map(st);m?.errorMap&&C._updateErrorMap(m.errorMap),C._initializeWithPersistence(E,m?.popupRedirectResolver)}($e,_),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Ee.wA("auth-internal",m=>{const _=xn(m.getProvider("auth").getImmediate());return new OI(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Jy,"0.23.2",function yi(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,F.registerVersion)(Jy,"0.23.2","esm2017")}("Browser")},9058:(it,Ce,k)=>{k.d(Ce,{$s:()=>st,BH:()=>re,DV:()=>Fn,G6:()=>Nr,GJ:()=>In,L:()=>De,LL:()=>Oe,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Sr,US:()=>Ee,Wl:()=>ht,Yr:()=>un,ZB:()=>X,ZR:()=>fe,aH:()=>ee,b$:()=>Xt,cI:()=>en,dS:()=>Si,eu:()=>ce,g5:()=>F,gK:()=>Gt,gQ:()=>It,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>Wn,ne:()=>rn,p$:()=>W,pd:()=>mt,q4:()=>tt,r3:()=>nn,ru:()=>at,tV:()=>U,uI:()=>B,ug:()=>Ki,vZ:()=>cr,w1:()=>wn,w9:()=>Sn,xO:()=>ds,xb:()=>hi,z$:()=>Ne,zI:()=>ue,zd:()=>dt});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(z,j){if(!z)throw F(j)},F=function(z){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+z)},te=function(z){const j=[];let O=0;for(let R=0;R<z.length;R++){let x=z.charCodeAt(R);x<128?j[O++]=x:x<2048?(j[O++]=x>>6|192,j[O++]=63&x|128):55296==(64512&x)&&R+1<z.length&&56320==(64512&z.charCodeAt(R+1))?(x=65536+((1023&x)<<10)+(1023&z.charCodeAt(++R)),j[O++]=x>>18|240,j[O++]=x>>12&63|128,j[O++]=x>>6&63|128,j[O++]=63&x|128):(j[O++]=x>>12|224,j[O++]=x>>6&63|128,j[O++]=63&x|128)}return j},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,j){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,R=[];for(let x=0;x<z.length;x+=3){const K=z[x],ge=x+1<z.length,Be=ge?z[x+1]:0,vt=x+2<z.length,Ze=vt?z[x+2]:0;let dn=(15&Be)<<2|Ze>>6,Mt=63&Ze;vt||(Mt=64,ge||(dn=64)),R.push(O[K>>2],O[(3&K)<<4|Be>>4],O[dn],O[Mt])}return R.join("")},encodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(z):this.encodeByteArray(te(z),j)},decodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(z):function(z){const j=[];let O=0,R=0;for(;O<z.length;){const x=z[O++];if(x<128)j[R++]=String.fromCharCode(x);else if(x>191&&x<224){const K=z[O++];j[R++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const vt=((7&x)<<18|(63&z[O++])<<12|(63&z[O++])<<6|63&z[O++])-65536;j[R++]=String.fromCharCode(55296+(vt>>10)),j[R++]=String.fromCharCode(56320+(1023&vt))}else{const K=z[O++],ge=z[O++];j[R++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&ge)}}return j.join("")}(this.decodeStringToByteArray(z,j))},decodeStringToByteArray(z,j){this.init_();const O=j?this.charToByteMapWebSafe_:this.charToByteMap_,R=[];for(let x=0;x<z.length;){const K=O[z.charAt(x++)],Be=x<z.length?O[z.charAt(x)]:0;++x;const Ze=x<z.length?O[z.charAt(x)]:64;++x;const wt=x<z.length?O[z.charAt(x)]:64;if(++x,null==K||null==Be||null==Ze||null==wt)throw new Re;R.push(K<<2|Be>>4),64!==Ze&&(R.push(Be<<4&240|Ze>>2),64!==wt&&R.push(Ze<<6&192|wt))}return R},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(z){const j=te(z);return Ee.encodeByteArray(j,!0)},De=function(z){return Fe(z).replace(/\./g,"")},U=function(z){try{return Ee.decodeString(z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function W(z){return X(void 0,z)}function X(z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return j}for(const O in j)!j.hasOwnProperty(O)||!Pe(O)||(z[O]=X(z[O],j[O]));return z}function Pe(z){return"__proto__"!==z}const Te=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=z&&U(z[1]);return j&&JSON.parse(j)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},tt=z=>{var j,O;return null===(O=null===(j=Te())||void 0===j?void 0:j.emulatorHosts)||void 0===O?void 0:O[z]},ot=z=>{const j=tt(z);if(!j)return;const O=j.lastIndexOf(":");if(O<=0||O+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const R=parseInt(j.substring(O+1),10);return"["===j[0]?[j.substring(1,O-1),R]:[j.substring(0,O),R]},ee=()=>{var z;return null===(z=Te())||void 0===z?void 0:z.config},de=z=>{var j;return null===(j=Te())||void 0===j?void 0:j[`_${z}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,O)=>{this.resolve=j,this.reject=O})}wrapCallback(j){return(O,R)=>{O?this.reject(O):this.resolve(R),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(O):j(O,R))}}}function he(z,j){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const R=j||"demo-project",x=z.iat||0,K=z.sub||z.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ge=Object.assign({iss:`https://securetoken.google.com/${R}`,aud:R,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},z);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(ge)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function B(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function we(){var z;const j=null===(z=Te())||void 0===z?void 0:z.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function at(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const z=Ne();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function un(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Nr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((z,j)=>{try{let O=!0;const R="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(R);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(R),z(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;j((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){j(O)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fe extends Error{constructor(j,O,R){super(O),this.code=j,this.customData=R,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(j,O,R){this.service=j,this.serviceName=O,this.errors=R}create(j,...O){const R=O[0]||{},x=`${this.service}/${j}`,K=this.errors[j],ge=K?function Qe(z,j){return z.replace(Ve,(O,R)=>{const x=j[R];return null!=x?String(x):`<${R}?>`})}(K,R):"Error";return new fe(x,`${this.serviceName}: ${ge} (${x}).`,R)}}const Ve=/\{\$([^}]+)}/g;function en(z){return JSON.parse(z)}function ht(z){return JSON.stringify(z)}const qt=function(z){let j={},O={},R={},x="";try{const K=z.split(".");j=en(U(K[0])||""),O=en(U(K[1])||""),x=K[2],R=O.d||{},delete O.d}catch{}return{header:j,claims:O,data:R,signature:x}},Sn=function(z){const O=qt(z).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},In=function(z){const j=qt(z).claims;return"object"==typeof j&&!0===j.admin};function nn(z,j){return Object.prototype.hasOwnProperty.call(z,j)}function Fn(z,j){if(Object.prototype.hasOwnProperty.call(z,j))return z[j]}function hi(z){for(const j in z)if(Object.prototype.hasOwnProperty.call(z,j))return!1;return!0}function Sr(z,j,O){const R={};for(const x in z)Object.prototype.hasOwnProperty.call(z,x)&&(R[x]=j.call(O,z[x],x,z));return R}function cr(z,j){if(z===j)return!0;const O=Object.keys(z),R=Object.keys(j);for(const x of O){if(!R.includes(x))return!1;const K=z[x],ge=j[x];if(Ln(K)&&Ln(ge)){if(!cr(K,ge))return!1}else if(K!==ge)return!1}for(const x of R)if(!O.includes(x))return!1;return!0}function Ln(z){return null!==z&&"object"==typeof z}function ds(z){const j=[];for(const[O,R]of Object.entries(z))Array.isArray(R)?R.forEach(x=>{j.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):j.push(encodeURIComponent(O)+"="+encodeURIComponent(R));return j.length?"&"+j.join("&"):""}function dt(z){const j={};return z.replace(/^\?/,"").split("&").forEach(R=>{if(R){const[x,K]=R.split("=");j[decodeURIComponent(x)]=decodeURIComponent(K)}}),j}function mt(z){const j=z.indexOf("?");if(!j)return"";const O=z.indexOf("#",j);return z.substring(j,O>0?O:void 0)}class It{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,O){O||(O=0);const R=this.W_;if("string"==typeof j)for(let wt=0;wt<16;wt++)R[wt]=j.charCodeAt(O)<<24|j.charCodeAt(O+1)<<16|j.charCodeAt(O+2)<<8|j.charCodeAt(O+3),O+=4;else for(let wt=0;wt<16;wt++)R[wt]=j[O]<<24|j[O+1]<<16|j[O+2]<<8|j[O+3],O+=4;for(let wt=16;wt<80;wt++){const dn=R[wt-3]^R[wt-8]^R[wt-14]^R[wt-16];R[wt]=4294967295&(dn<<1|dn>>>31)}let Ze,Zt,x=this.chain_[0],K=this.chain_[1],ge=this.chain_[2],Be=this.chain_[3],vt=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(Ze=Be^K&(ge^Be),Zt=1518500249):(Ze=K^ge^Be,Zt=1859775393):wt<60?(Ze=K&ge|Be&(K|ge),Zt=2400959708):(Ze=K^ge^Be,Zt=3395469782);const dn=(x<<5|x>>>27)+Ze+vt+Zt+R[wt]&4294967295;vt=Be,Be=ge,ge=4294967295&(K<<30|K>>>2),K=x,x=dn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+ge&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update(j,O){if(null==j)return;void 0===O&&(O=j.length);const R=O-this.blockSize;let x=0;const K=this.buf_;let ge=this.inbuf_;for(;x<O;){if(0===ge)for(;x<=R;)this.compress_(j,x),x+=this.blockSize;if("string"==typeof j){for(;x<O;)if(K[ge]=j.charCodeAt(x),++ge,++x,ge===this.blockSize){this.compress_(K),ge=0;break}}else for(;x<O;)if(K[ge]=j[x],++ge,++x,ge===this.blockSize){this.compress_(K),ge=0;break}}this.inbuf_=ge,this.total_+=O}digest(){const j=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let R=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)j[R]=this.chain_[x]>>K&255,++R;return j}}function rn(z,j){const O=new Xr(z,j);return O.subscribe.bind(O)}class Xr{constructor(j,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{j(this)}).catch(R=>{this.error(R)})}next(j){this.forEachObserver(O=>{O.next(j)})}error(j){this.forEachObserver(O=>{O.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,O,R){let x;if(void 0===j&&void 0===O&&void 0===R)throw new Error("Missing Observer.");x=function Nt(z,j){if("object"!=typeof z||null===z)return!1;for(const O of j)if(O in z&&"function"==typeof z[O])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:O,complete:R},void 0===x.next&&(x.next=An),void 0===x.error&&(x.error=An),void 0===x.complete&&(x.complete=An);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,j)}sendOne(j,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{O(this.observers[j])}catch(R){typeof console<"u"&&console.error&&console.error(R)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function Gt(z,j){return`${z} failed: ${j} argument `}const Si=function(z){const j=[];let O=0;for(let R=0;R<z.length;R++){let x=z.charCodeAt(R);if(x>=55296&&x<=56319){const K=x-55296;R++,V(R<z.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(z.charCodeAt(R)-56320)}x<128?j[O++]=x:x<2048?(j[O++]=x>>6|192,j[O++]=63&x|128):x<65536?(j[O++]=x>>12|224,j[O++]=x>>6&63|128,j[O++]=63&x|128):(j[O++]=x>>18|240,j[O++]=x>>12&63|128,j[O++]=x>>6&63|128,j[O++]=63&x|128)}return j},Ki=function(z){let j=0;for(let O=0;O<z.length;O++){const R=z.charCodeAt(O);R<128?j++:R<2048?j+=2:R>=55296&&R<=56319?(j+=4,O++):j+=3}return j},ur=1e3,He=2,me=144e5,Xe=.5;function st(z,j=ur,O=He){const R=j*Math.pow(O,z),x=Math.round(Xe*R*(Math.random()-.5)*2);return Math.min(me,R+x)}function Wn(z){return z&&z._delegate?z._delegate:z}},8983:(it,Ce,k)=>{var d=k(5879);let V=null;function F(){return V}class pe{}const Ee=new d.OlP("DocumentToken");let Re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(De)},providedIn:"platform"})}return n})();const Fe=new d.OlP("Location Initialized");let De=(()=>{class n extends Re{constructor(){super(),this._doc=(0,d.f3M)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function W(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Je)},providedIn:"root"})}return n})();const Me=new d.OlP("appBaseHref");let Je=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Re),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ve=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+X(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+X(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Re),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ae=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(W(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=W;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Pe))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Ae((0,d.LFG)(Pe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function fe(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[d.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[d.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function $o(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function wa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const Uu=/\s+/,qd=[];let Ca=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=qd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Uu):qd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Uu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Uu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ec{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ic=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ec(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,u),xn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function xn(n,e){n.context.$implicit=e.item}let Qi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _y,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class _y{constructor(){this.$implicit=null,this.ngIf=null}}function Zd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function fi(n,e){return new d.vHH(2100,!1)}class Vu{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class Jd{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Bu=new Jd,Xd=new Vu;let ju=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Bu;if((0,d.F4k)(t))return Xd;throw fi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function pi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Ms(n,e,t){return function Mt(n,e,t,r,i,a,u=!1){let f="",g=!1;if(isFinite(n)){let v=function Mi(n){let r,i,a,u,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],u=0;a<=f;a++,u++)r[u]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(v=function xs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let I=e.minInt,T=e.minFrac,A=e.maxFrac;if(a){const ze=a.match(x);if(null===ze)throw new Error(`${a} is not a valid digit info`);const ke=ze[1],Ye=ze[3],gt=ze[5];null!=ke&&(I=$o(ke)),null!=Ye&&(T=$o(Ye)),null!=gt?A=$o(gt):null!=Ye&&T>A&&(A=T)}!function Wt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let u=a+n.integerLen,f=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let T=u;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=a+1),r[0]=0;for(let T=1;T<u;T++)r[T]=0}if(f>=5)if(u-1<0){for(let T=0;T>u;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const v=e+n.integerLen,I=r.reduceRight(function(T,A,N,G){return G[N]=(A+=T)<10?A:A-10,g&&(0===G[N]&&N>=v?G.pop():g=!1),A>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(v,T,A);let N=v.digits,G=v.integerLen;const Q=v.exponent;let J=[];for(g=N.every(ze=>!ze);G<I;G++)N.unshift(0);for(;G<0;G++)N.unshift(0);G>0?J=N.splice(G,N.length):(J=N,N=[0]);const be=[];for(N.length>=e.lgSize&&be.unshift(N.splice(-e.lgSize,N.length).join(""));N.length>e.gSize;)be.unshift(N.splice(-e.gSize,N.length).join(""));N.length&&be.unshift(N.join("")),f=be.join(fe(t,r)),J.length&&(f+=fe(t,i)+J.join("")),Q&&(f+=fe(t,Ue.Exponential)+"+"+Q)}else f=fe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function oo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=u[0],g=u[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let I=0;I<g.length;I++){const T=g.charAt(I);"0"===T?t.minFrac=t.maxFrac=I+1:"#"===T?t.maxFrac=I+1:t.posSuf+=T}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){const I=i.length-t.posPre.length-t.posSuf.length,T=a.indexOf("#");t.negPre=a.substring(0,T).replace(/'/g,""),t.negSuf=a.slice(T+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Oe(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,re.Decimal),fe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Ns(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw fi()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let mr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw fi();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Un=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function gi(n){return"server"===n}let Ur=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Fs((0,d.LFG)(Ee),window)})}return n})();class Fs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function jp(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fs{}class Qp extends pe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ph extends Qp{static makeCurrent(){!function te(n){V||(V=n)}(new ph)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function CI(){return Pc=Pc||document.querySelector("base"),Pc?Pc.getAttribute("href"):null}();return null==t?null:function Ly(n){gh=gh||document.createElement("a"),gh.setAttribute("href",n);const e=gh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wa(document.cookie,e)}}let gh,Pc=null,EI=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Uy=new d.OlP("EventManagerPlugins");let Vy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Uy),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class mh{constructor(e){this._doc=e}}const _h="ng-app-id";let Xu=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gi(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${_h}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(_h),a;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute(_h,this.appId),u}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,u=a.get(r)?.elements;u?u.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Vs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aa=/%COMP%/g,ps=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sn(n,e){return e.map(t=>t.replace(Aa,n))}let tl=(()=>{class n{constructor(t,r,i,a,u,f,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=gi(f),this.defaultRenderer=new Bs(t,u,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Ch?i.applyToHost(t):i instanceof ni&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const u=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:a=new Ch(g,v,r,this.appId,I,u,f,T);break;case d.ifc.ShadowDom:return new Ma(g,v,t,r,u,f,this.nonce,T);default:a=new ni(g,v,r,I,u,f,T)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Vy),d.LFG(Xu),d.LFG(d.AFp),d.LFG(ps),d.LFG(Ee),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class Bs{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Vs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Vs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Vs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ma extends Bs{constructor(e,t,r,i,a,u,f,g){super(e,a,u,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=sn(i.id,i.styles);for(const I of v){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=I,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ni extends Bs{constructor(e,t,r,i,a,u,f,g){super(e,a,u,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?sn(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ch extends ni{constructor(e,t,r,i,a,u,f,g){const v=i+"-"+r.id;super(e,t,r,a,u,f,g,v),this.contentAttr=function Xp(n){return"_ngcontent-%COMP%".replace(Aa,n)}(v),this.hostAttr=function el(n){return"_nghost-%COMP%".replace(Aa,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let TI=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const nl=["alt","control","meta","shift"],ho={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Oc=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),nl.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),u+=v+".")}),u+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=ho[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nl.forEach(u=>{u!==i&&(0,eg[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const rg=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function _t(){ph.makeCurrent()},multi:!0},{provide:Ee,useFactory:function DI(){return(0,d.RDi)(document),document},deps:[]}]),$y=new d.OlP(""),xa=[{provide:d.rWj,useClass:class Jp{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new d.vHH(5103,!1);return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const f=function(g){u=u||g,a--,0==a&&r(u)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],fo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function rl(){return new d.qLn},deps:[]},{provide:Uy,useClass:TI,multi:!0,deps:[Ee,d.R0b,d.Lbi]},{provide:Uy,useClass:Oc,multi:!0,deps:[Ee]},tl,Xu,Vy,{provide:d.FYo,useExisting:tl},{provide:fs,useClass:EI,deps:[]},[]];let Rc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG($y,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...fo,...xa],imports:[Un,d.hGG]})}return n})(),_e=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function sg(){return new _e((0,d.LFG)(Ee))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var Hr=k(5592),js=k(4674),fn=k(2459),lt=k(2096),vr=k(5619);const{isArray:sl}=Array,{getPrototypeOf:Sh,prototype:zr,keys:$s}=Object;function Cn(n){if(1===n.length){const e=n[0];if(sl(e))return{args:e,keys:null};if(function go(n){return n&&"object"==typeof n&&Sh(n)===zr}(e)){const t=$s(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var mo=k(2737),Ct=k(7398);const{isArray:Zy}=Array;function Fc(n){return(0,Ct.U)(e=>function fg(n,e){return Zy(e)?n(...e):n(e)}(n,e))}var Hs=k(9940);function zs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Mr=k(8251),Pa=k(7103);function Go(...n){const e=(0,Hs.yG)(n),t=(0,Hs.jO)(n),{args:r,keys:i}=Cn(n);if(0===r.length)return(0,fn.D)([],e);const a=new Hr.y(function Oa(n,e,t=mo.y){return r=>{ol(e,()=>{const{length:i}=n,a=new Array(i);let u=i,f=i;for(let g=0;g<i;g++)ol(e,()=>{const v=(0,fn.D)(n[g],e);let I=!1;v.subscribe((0,Mr.x)(r,T=>{a[g]=T,I||(I=!0,f--),f||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>zs(i,u):mo.y));return t?a.pipe(Fc(t)):a}function ol(n,e,t){n?(0,Pa.f)(t,n,e):e()}const Gs=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Lc=k(7537);function Wo(...n){return function _s(){return(0,Lc.J)(1)}()((0,fn.D)(n,(0,Hs.yG)(n)))}var Uc=k(4829);function Ah(n){return new Hr.y(e=>{(0,Uc.Xf)(n()).subscribe(e)})}var Vc=k(8407);function qo(n,e){const t=(0,js.m)(n)?n:()=>n,r=i=>i.error(t());return new Hr.y(e?i=>e.schedule(r,0,i):r)}var _o=k(6232),Bc=k(7394),Gr=k(9360);function Mh(){return(0,Gr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Mr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cl extends Hr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Mr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bc.w0.EMPTY)}return e}refCount(){return Mh()(this)}}var _i=k(8645),Vn=k(4664);function gn(n){return n<=0?()=>_o.E:(0,Gr.e)((e,t)=>{let r=0;e.subscribe((0,Mr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ra(...n){const e=(0,Hs.yG)(n);return(0,Gr.e)((t,r)=>{(e?Wo(n,t,e):Wo(n,t)).subscribe(r)})}function wr(n,e){return(0,Gr.e)((t,r)=>{let i=0;t.subscribe((0,Mr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ri=k(1631);function jc(n){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe((0,Mr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $c(n=Ky){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe((0,Mr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ky(){return new Gs}function tr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((i,a)=>n(i,a,r)):mo.y,gn(1),t?jc(e):$c(()=>new Gs))}function yo(n,e){return(0,js.m)(e)?(0,ri.z)(n,e,1):(0,ri.z)(n,1)}function Tn(n,e,t){const r=(0,js.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Gr.e)((i,a)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let f=!0;i.subscribe((0,Mr.x)(a,g=>{var v;null===(v=r.next)||void 0===v||v.call(r,g),a.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),a.complete()},g=>{var v;f=!1,null===(v=r.error)||void 0===v||v.call(r,g),a.error(g)},()=>{var g,v;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):mo.y}function Xi(n){return(0,Gr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Mr.x)(t,void 0,void 0,u=>{a=(0,Uc.Xf)(n(u,Xi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Zo(n,e){return(0,Gr.e)(function ul(n,e,t,r,i){return(a,u)=>{let f=t,g=e,v=0;a.subscribe((0,Mr.x)(u,I=>{const T=v++;g=f?n(g,I,T):(f=!0,I),r&&u.next(g)},i&&(()=>{f&&u.next(g),u.complete()})))}}(n,e,arguments.length>=2,!0))}function Na(n){return n<=0?()=>_o.E:(0,Gr.e)((e,t)=>{let r=[];e.subscribe((0,Mr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ka(n){return(0,Gr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Ph=k(2420);const bt="primary",vo=Symbol("RouteTitle");class Ko{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wo(n){return new Ko(n)}function gg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],f=n[a];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!_g(n[i],e[i]))return!1;return!0}function _g(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function nr(n){return n.length>0?n[n.length-1]:null}function Co(n){return function hg(n){return!!n&&(n instanceof Hr.y||(0,js.m)(n.lift)&&(0,js.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,fn.D)(Promise.resolve(n)):(0,lt.of)(n)}const yg={exact:function hl(n,e,t){if(!Qo(n.segments,e.segments)||!Hc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hl(n.children[r],e.children[r],t))return!1;return!0},subset:Yo},dl={exact:function wg(n,e){return Wr(n,e)},subset:function Fa(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_g(n[t],e[t]))},ignored:()=>!0};function vg(n,e,t){return yg[t.paths](n.root,e.root,t.matrixParams)&&dl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Yo(n,e,t){return Ws(n,e,e.segments,t)}function Ws(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Qo(i,t)||e.hasChildren()||!Hc(i,t,r))}if(n.segments.length===t.length){if(!Qo(n.segments,t)||!Hc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Yo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Qo(n.segments,i)&&Hc(n.segments,i,r)&&n.children[bt])&&Ws(n.children[bt],e,a,r)}}function Hc(n,e,t){return e.every((r,i)=>dl[t](n[i].parameters,r.parameters))}class Eo{constructor(e=new Ht([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wo(this.queryParams)),this._queryParamMap}toString(){return PI.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}}class fl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wo(this.parameters)),this._parameterMap}toString(){return qr(this)}}function Qo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pl=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new Cg},providedIn:"root"})}return n})();class Cg{parse(e){const t=new Va(e);return new Eo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oi(e.root,!0)}`,r=function Qy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ml(t)}=${ml(i)}`).join("&"):`${ml(t)}=${ml(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Bn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const PI=new Cg;function Oh(n){return n.segments.map(e=>qr(e)).join("/")}function Oi(n,e){if(!n.hasChildren())return Oh(n);if(e){const t=n.children[bt]?Oi(n.children[bt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==bt&&r.push(`${i}:${Oi(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===bt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==bt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===bt?[Oi(n.children[bt],!1)]:[`${i}:${Oi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function gl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ml(n){return gl(n).replace(/%3B/gi,";")}function Rh(n){return gl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qs(n){return decodeURIComponent(n)}function Eg(n){return qs(n.replace(/\+/g,"%20"))}function qr(n){return`${Rh(n.path)}${function La(n){return Object.keys(n).map(e=>`;${Rh(e)}=${Rh(n[e])}`).join("")}(n.parameters)}`}const Ua=/^[^\/()?;#]+/;function Io(n){const e=n.match(Ua);return e?e[0]:""}const _l=/^[^\/()?;=#]+/,Ig=/^[^=?&#]+/,yi=/^[^&#]+/;class Va{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Ht(e,t)),r}parseSegment(){const e=Io(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new fl(qs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Jy(n){const e=n.match(_l);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Io(this.remaining);i&&(r=i,this.capture(r))}e[qs(t)]=qs(r)}parseQueryParam(e){const t=function OI(n){const e=n.match(Ig);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Nh(n){const e=n.match(yi);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Eg(t),a=Eg(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Io(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=bt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[bt]:new Ht([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Xy(n){return n.segments.length>0?new Ht([],{[bt]:n}):n}function yl(n){const e={};for(const r of Object.keys(n.children)){const a=yl(n.children[r]);if(r===bt&&0===a.segments.length&&a.hasChildren())for(const[u,f]of Object.entries(a.children))e[u]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function ev(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function Jo(n){return n instanceof Eo}function m(n){let e;const i=Xy(function t(a){const u={};for(const g of a.children){const v=t(g);u[g.outlet]=v}const f=new Ht(a.url,u);return a===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const a=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oe(t,e,r)}(e);if(a.toRoot())return P(i,i,new Ht([],{}),t,r);const u=function nt(n,e,t){if(n.isAbsolute)return new $e(e,!0,0);if(!t)return new $e(e,!1,NaN);if(null===t.parent)return new $e(t,!0,0);const r=E(n.commands[0])?0:1;return function Ot(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new $e(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=u.processChildren?Zs(u.segmentGroup,u.index,a.commands):Ri(u.segmentGroup,u.index,a.commands);return P(i,u.segmentGroup,f,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let u,a={};r&&Object.entries(r).forEach(([g,v])=>{a[g]=Array.isArray(v)?v.map(I=>`${I}`):`${v}`}),u=n===e?t:Z(n,e,t);const f=Xy(yl(u));return new Eo(f,a,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Z(a,e,t)}),new Ht(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new d.vHH(4003,!1);const i=r.find(S);if(i&&i!==nr(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $e{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ri(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Zs(n,e,t);const r=function bg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!vl(g,v,u))return a;r+=2}else{if(!vl(g,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ht(n.segments.slice(0,r.pathIndex),{});return a.children[bt]=new Ht(n.segments.slice(r.pathIndex),n.children),Zs(a,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?zc(n,e,t):r.match?Zs(n,0,i):zc(n,e,t)}function Zs(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function xr(n){return S(n[0])?n[0].outlets:{[bt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==bt)&&n.children[bt]&&1===n.numberOfChildren&&0===n.children[bt].segments.length){const a=Zs(n.children[bt],e,t);return new Ht(n.segments,a.children)}return Object.entries(r).forEach(([a,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[a]=Ri(n.children[a],e,u))}),Object.entries(n.children).forEach(([a,u])=>{void 0===r[a]&&(i[a]=u)}),new Ht(n.segments,i)}}function zc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(S(a)){const g=Xo(a.outlets);return new Ht(r,g)}if(0===i&&E(t[0])){r.push(new fl(n.segments[e].path,ea(t[0]))),i++;continue}const u=S(a)?a.outlets[bt]:`${a}`,f=i<t.length-1?t[i+1]:null;u&&f&&E(f)?(r.push(new fl(u,ea(f))),i+=2):(r.push(new fl(u,{})),i++)}return new Ht(r,{})}function Xo(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=zc(new Ht([],{}),0,r))}),e}function ea(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vl(n,e,t){return n==t.path&&Wr(e,t.parameters)}const Gc="imperative";class Ni{constructor(e,t){this.id=e,this.url=t}}class Ba extends Ni{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ks extends Ni{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wc extends Ni{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bo extends Ni{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class wl extends Ni{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kh extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RI extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hx extends Ni{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NI extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RU extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NU{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class px{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kU{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Fh{}class FI{constructor(e){this.url=e}}class FU{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tg,this.attachRef=null}}let Tg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new FU,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cl(e,this._root).map(t=>t.value)}}function nv(n,e){if(n===e.value)return e;for(const t of e.children){const r=nv(n,t);if(r)return r}return null}function Cl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Cl(n,t);if(r.length)return r.unshift(e),r}return[]}class ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rv extends mx{constructor(e,t){super(e),this.snapshot=t,ov(this,e)}toString(){return this.snapshot.toString()}}function iv(n,e){const t=function El(n,e){const u=new Kc([],{},{},"",{},bt,e,null,{});return new Lh("",new ys(u,[]))}(0,e),r=new vr.X([new fl("",{})]),i=new vr.X({}),a=new vr.X({}),u=new vr.X({}),f=new vr.X(""),g=new Zc(r,i,u,f,a,bt,e,t.root);return g.snapshot=t.root,new rv(new ys(g,[]),t)}class Zc{constructor(e,t,r,i,a,u,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=u,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,Ct.U)(v=>v[vo]))??(0,lt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>wo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>wo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Dg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kc{get title(){return this.data?.[vo]}constructor(e,t,r,i,a,u,f,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lh extends mx{constructor(e,t){super(t),this.url=e,ov(this,t)}toString(){return LI(this._root)}}function ov(n,e){e.value._routerState=n,e.children.forEach(t=>ov(n,t))}function LI(n){const e=n.children.length>0?` { ${n.children.map(LI).join(", ")} } `:"";return`${n.value}${e}`}function av(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wr(e.params,t.params)||n.paramsSubject.next(t.params),function mg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Wr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Sg(n,e){const t=Wr(n.params,e.params)&&function Yy(n,e){return Qo(n,e)&&n.every((t,r)=>Wr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sg(n.parent,e.parent))}let Uh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Tg),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Ag,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new _x(t,f,i.injector);this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class _x{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zc?this.route:e===Tg?this.childContexts:this.parent.get(e,t)}}const Ag=new d.OlP("");let UI=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Go([r.queryParams,r.params,r.data]).pipe((0,Vn.w)(([a,u,f],g)=>(f={...a,...u,...f},0===g?(0,lt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,d.qFp)(r.component);if(u)for(const{templateName:f}of u.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function Vh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function yx(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vh(n,r,i);return Vh(n,r)})}(n,e,t);return new ys(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>Vh(n,f)),u}}const r=function ki(n){return new Zc(new vr.X(n.url),new vr.X(n.params),new vr.X(n.queryParams),new vr.X(n.fragment),new vr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Vh(n,a));return new ys(r,i)}}const Bh="ngNavigationCancelingError";function cv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Mg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Bh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Il(n){return n&&n[Bh]}let uv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,i){1&r&&d._UZ(0,"router-outlet")},dependencies:[Uh],encapsulation:2})}return n})();function jh(n){const e=n.children&&n.children.map(jh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=uv),t}function es(n){return n.outlet||bt}function ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jI{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),av(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=qc(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=qc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=qc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=qc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new kU(a.value.snapshot))}),e.children.length&&this.forwardEvent(new px(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(av(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),av(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=ta(i.snapshot);u.attachRef=null,u.route=i,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class lv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $h{constructor(e,t){this.component=e,this.route=t}}function bl(n,e,t){const r=n._root;return Qc(r,e?e._root:null,t,[r.value])}function Yc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Qc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=qc(e);return n.children.forEach(u=>{(function Pg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const g=function Sx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qo(n.url,e.url)||!Wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sg(n,e)||!Wr(n.queryParams,e.queryParams);default:return!Sg(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new lv(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Qc(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new $h(f.outlet.component,u))}else u&&Hh(e,f,i),i.canActivateChecks.push(new lv(r)),Qc(n,null,a.component?f?f.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Object.entries(a).forEach(([u,f])=>Hh(f,t.getContext(u),i)),i}function Hh(n,e,t){const r=qc(n),i=n.value;Object.entries(r).forEach(([a,u])=>{Hh(u,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new $h(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zh(n){return"function"==typeof n}function zI(n){return n instanceof Gs||"EmptyError"===n?.name}const Tl=Symbol("INITIAL_VALUE");function Jc(){return(0,Vn.w)(n=>Go(n.map(e=>e.pipe(gn(1),Ra(Tl)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===Tl)return Tl;if(!1===t||t instanceof Eo)return t}return!0}),wr(e=>e!==Tl),gn(1)))}function hv(n){return(0,Vc.z)(Tn(e=>{if(Jo(e))throw cv(0,e)}),(0,Ct.U)(e=>!0===e))}class Gh{constructor(e){this.segmentGroup=e||null}}class Wh{constructor(e){this.urlTree=e}}function To(n){return qo(new Gh(n))}function pv(n){return qo(new Wh(n))}class KI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,lt.of)(r);if(i.numberOfChildren>1||!i.children[bt])return qo(new d.vHH(4e3,!1));i=i.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Eo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([f,g])=>{u[f]=this.createSegmentGroup(e,g,r,i)}),new Ht(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const qh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zh(n,e,t,r,i){const a=mv(n,e,t);return a.matched?(r=function BI(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function fv(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,lt.of)(!0);const a=i.map(u=>{const f=Yc(u,n);return Co(function dv(n){return n&&zh(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,lt.of)(a).pipe(Jc(),hv())}(r,e,t).pipe((0,Ct.U)(u=>!0===u?a:{...qh}))):(0,lt.of)(a)}function mv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gg)(t,n,e);if(!i)return{...qh};const a={};Object.entries(i.posParams??{}).forEach(([f,g])=>{a[f]=g.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function _v(n,e,t,r){return t.length>0&&function Fx(n,e,t){return t.some(r=>Kh(n,e,r)&&es(r)!==bt)}(n,t,r)?{segmentGroup:new Ht(e,kx(r,new Ht(t,n.children))),slicedSegments:[]}:0===t.length&&function YI(n,e,t){return t.some(r=>Kh(n,e,r))}(n,t,r)?{segmentGroup:new Ht(n.segments,Nx(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function Nx(n,e,t,r,i){const a={};for(const u of r)if(Kh(n,t,u)&&!i[es(u)]){const f=new Ht([],{});a[es(u)]=f}return{...i,...a}}function kx(n,e){const t={};t[bt]=e;for(const r of n)if(""===r.path&&es(r)!==bt){const i=new Ht([],{});t[es(r)]=i}return t}function Kh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Lx{constructor(e,t,r,i,a,u,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new KI(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=_v(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bt).pipe(Xi(t=>{if(t instanceof Wh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Gh?this.noMatchError(t):t}),(0,Ct.U)(t=>{const r=new Kc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,{}),i=new ys(r,t),a=new Lh("",i),u=function C(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(a._root),{state:a,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,bt).pipe(Xi(r=>{throw r instanceof Gh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=sv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,fn.D)(i).pipe(yo(a=>{const u=r.children[a],f=function Tx(n,e){const t=n.filter(r=>es(r)===e);return t.push(...n.filter(r=>es(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,u,a)}),Zo((a,u)=>(a.push(...u),a)),jc(null),function pg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((i,a)=>n(i,a,r)):mo.y,Na(1),t?jc(e):$c(()=>new Gs))}(),(0,ri.z)(a=>{if(null===a)return To(r);const u=QI(a);return function Ux(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,lt.of)(u)}))}processSegment(e,t,r,i,a,u){return(0,fn.D)(t).pipe(yo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,u).pipe(Xi(g=>{if(g instanceof Gh)return(0,lt.of)(null);throw g}))),tr(f=>!!f),Xi(f=>{if(zI(f))return function yv(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,lt.of)([]):To(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,u,f){return function kg(n,e,t,r){return!!(es(n)===r||r!==bt&&Kh(e,t,n))&&("**"===n.path||mv(e,n,t).matched)}(r,i,a,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,u):To(i):To(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?pv(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,ri.z)(u=>{const f=new Ht(u,{});return this.processSegment(e,t,f,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:f,consumedSegments:g,remainingSegments:v,positionalParamSegments:I}=mv(t,i,a);if(!f)return To(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,I);return i.redirectTo.startsWith("/")?pv(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,ri.z)(A=>this.processSegment(e,r,t,A.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,u){let f;if("**"===r.path){const g=i.length>0?nr(i).parameters:{},v=new Kc(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XI(r),es(r),r.component??r._loadedComponent??null,r,eu(r));f=(0,lt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Zh(t,r,i,e).pipe((0,Ct.U)(({matched:g,consumedSegments:v,remainingSegments:I,parameters:T})=>g?{snapshot:new Kc(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XI(r),es(r),r.component??r._loadedComponent??null,r,eu(r)),consumedSegments:v,remainingSegments:I}:null));return f.pipe((0,Vn.w)(g=>null===g?To(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Vn.w)(({routes:v})=>{const I=r._loadedInjector??e,{snapshot:T,consumedSegments:A,remainingSegments:N}=g,{segmentGroup:G,slicedSegments:Q}=_v(t,A,N,v);if(0===Q.length&&G.hasChildren())return this.processChildren(I,v,G).pipe((0,Ct.U)(be=>null===be?null:[new ys(T,be)]));if(0===v.length&&0===Q.length)return(0,lt.of)([new ys(T,[])]);const J=es(r)===a;return this.processSegment(I,v,G,Q,J?bt:a,!0).pipe((0,Ct.U)(be=>[new ys(T,be)]))}))))}getChildConfig(e,t,r){return t.children?(0,lt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,lt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZI(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,lt.of)(!0);const a=i.map(u=>{const f=Yc(u,n);return Co(function Mx(n){return n&&zh(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,lt.of)(a).pipe(Jc(),hv())}(e,t,r).pipe((0,ri.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Tn(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Ng(n){return qo(Mg(!1,3))}())):(0,lt.of)({routes:[],injector:e})}}function jU(n){const e=n.value.routeConfig;return e&&""===e.path}function QI(n){const e=[],t=new Set;for(const r of n){if(!jU(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=QI(r.children);e.push(new ys(r.value,i))}return e.filter(r=>!t.has(r))}function XI(n){return n.data||{}}function eu(n){return n.resolve||{}}function ib(n){return"string"==typeof n.title||null===n.title}function wv(n){return(0,Vn.w)(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,Ct.U)(()=>e)):(0,lt.of)(e)})}const Sl=new d.OlP("ROUTES");let Cv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,lt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Co(t.loadComponent()).pipe((0,Ct.U)(Al),Tn(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ka(()=>{this.componentLoaders.delete(t)})),i=new cl(r,()=>new _i.x).pipe(Mh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,lt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function Vx(n,e,t,r){return Co(n.loadChildren()).pipe((0,Ct.U)(Al),(0,ri.z)(i=>i instanceof d.YKP||Array.isArray(i)?(0,lt.of)(i):(0,fn.D)(e.compileModuleAsync(i))),(0,Ct.U)(i=>{r&&r(n);let a,u,f=!1;return Array.isArray(i)?(u=i,!0):(a=i.create(t).injector,u=a.get(Sl,[],{optional:!0,self:!0}).flat()),{routes:u.map(jh),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ka(()=>{this.childrenLoaders.delete(r)})),u=new cl(a,()=>new _i.x).pipe(Mh());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Al(n){return function ja(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Lg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _i.x,this.transitionAbortSubject=new _i.x,this.configLoader=(0,d.f3M)(Cv),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(pl),this.rootContexts=(0,d.f3M)(Tg),this.inputBindingEnabled=null!==(0,d.f3M)(Ag,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,lt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new NU(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kI(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new vr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wr(a=>0!==a.id),(0,Ct.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Vn.w)(a=>{this.currentTransition=a;let u=!1,f=!1;return(0,lt.of)(a).pipe(Tn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Vn.w)(g=>{const v=g.currentBrowserUrl.toString(),I=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!I&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new bo(g.id,this.urlSerializer.serialize(g.rawUrl),A,0)),g.resolve(null),_o.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,lt.of)(g).pipe((0,Vn.w)(A=>{const N=this.transitions?.getValue();return this.events.next(new Ba(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?_o.E:Promise.resolve(A)}),function Fg(n,e,t,r,i,a){return(0,ri.z)(u=>function Dl(n,e,t,r,i,a,u="emptyOnly"){return new Lx(n,e,t,r,i,u,a).recognize()}(n,e,t,r,u.extractedUrl,i,a).pipe((0,Ct.U)(({state:f,tree:g})=>({...u,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Tn(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const N=new kh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:A,extractedUrl:N,source:G,restoredState:Q,extras:J}=g,be=new Ba(A,this.urlSerializer.serialize(N),G,Q);this.events.next(be);const ze=iv(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:ze,urlAfterRedirects:N,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,lt.of)(a)}{const A="";return this.events.next(new bo(g.id,this.urlSerializer.serialize(g.extractedUrl),A,1)),g.resolve(null),_o.E}}),Tn(g=>{const v=new RI(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,Ct.U)(g=>(this.currentTransition=a={...g,guards:bl(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function Xc(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?(0,lt.of)({...t,guardsResult:!0}):function GI(n,e,t,r){return(0,fn.D)(n).pipe((0,ri.z)(i=>function qI(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,lt.of)(!0);const u=a.map(f=>{const g=ta(e)??i,v=Yc(f,g);return Co(function Og(n){return n&&zh(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(tr())});return(0,lt.of)(u).pipe(Jc())}(i.component,i.route,t,e,r)),tr(i=>!0!==i,!0))}(u,r,i,n).pipe((0,ri.z)(f=>f&&function Ax(n){return"boolean"==typeof n}(f)?function WI(n,e,t,r){return(0,fn.D)(e).pipe(yo(i=>Wo(function BU(n,e){return null!==n&&e&&e(new fx(n)),(0,lt.of)(!0)}(i.route.parent,r),function Ox(n,e){return null!==n&&e&&e(new tv(n)),(0,lt.of)(!0)}(i.route,r),function Rx(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function xg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Ah(()=>{const f=u.guards.map(g=>{const v=ta(u.node)??t,I=Yc(g,v);return Co(function $I(n){return n&&zh(n.canActivateChild)}(I)?I.canActivateChild(r,n):v.runInContext(()=>I(r,n))).pipe(tr())});return(0,lt.of)(f).pipe(Jc())}));return(0,lt.of)(a).pipe(Jc())}(n,i.path,t),function Rg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,lt.of)(!0);const i=r.map(a=>Ah(()=>{const u=ta(e)??t,f=Yc(a,u);return Co(function xx(n){return n&&zh(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(tr())}));return(0,lt.of)(i).pipe(Jc())}(n,i.route,t))),tr(i=>!0!==i,!0))}(r,a,n,e):(0,lt.of)(f)),(0,Ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),Tn(g=>{if(a.guardsResult=g.guardsResult,Jo(g.guardsResult))throw cv(0,g.guardsResult);const v=new hx(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),wr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),wv(g=>{if(g.guards.canActivateChecks.length)return(0,lt.of)(g).pipe(Tn(v=>{const I=new NI(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(I)}),(0,Vn.w)(v=>{let I=!1;return(0,lt.of)(v).pipe(function vv(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,lt.of)(t);let a=0;return(0,fn.D)(i).pipe(yo(u=>function eb(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ib(i)&&(a[vo]=i.title),function tb(n,e,t,r){const i=function nb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,lt.of)({});const a={};return(0,fn.D)(i).pipe((0,ri.z)(u=>function rb(n,e,t,r){const i=ta(e)??r,a=Yc(n,i);return Co(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(tr(),Tn(f=>{a[u]=f}))),Na(1),function xh(n){return(0,Ct.U)(()=>n)}(a),Xi(u=>zI(u)?_o.E:qo(u)))}(a,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=sv(n,t).resolve,i&&ib(i)&&(n.data[vo]=i.title),null)))}(u.route,r,n,e)),Tn(()=>a++),Na(1),(0,ri.z)(u=>a===i.length?(0,lt.of)(t):_o.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Tn({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(v,"",2)}}))}),Tn(v=>{const I=new RU(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(I)}))}),wv(g=>{const v=I=>{const T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe(Tn(A=>{I.component=A}),(0,Ct.U)(()=>{})));for(const A of I.children)T.push(...v(A));return T};return Go(v(g.targetSnapshot.root)).pipe(jc(),gn(1))}),wv(()=>this.afterPreactivation()),(0,Ct.U)(g=>{const v=function VI(n,e,t){const r=Vh(n,e._root,t?t._root:void 0);return new rv(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:v},a}),Tn(()=>{this.events.next(new Fh)}),((n,e,t,r)=>(0,Ct.U)(i=>(new jI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),gn(1),Tn({next:g=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ks(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{u=!0}}),function ll(n){return(0,Gr.e)((e,t)=>{(0,Uc.Xf)(n).subscribe((0,Mr.x)(t,()=>t.complete(),Ph.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Tn(g=>{throw g}))),ka(()=>{u||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Xi(g=>{if(f=!0,Il(g))this.events.next(new Wc(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function ii(n){return Il(n)&&Jo(n.url)}(g)?this.events.next(new FI(g.url)):a.resolve(!1);else{this.events.next(new wl(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(v){a.reject(v)}}return _o.E}))}))}cancelNavigationTransition(t,r,i){const a=new Wc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bx(n){return n!==Gc}let jx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===bt);return r}getResolvedTitleForRoute(t){return t.data[vo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)($U)},providedIn:"root"})}return n})(),$U=(()=>{class n extends jx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(_e))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(sb)},providedIn:"root"})}return n})();class zU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let sb=(()=>{class n extends zU{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ug=new d.OlP("",{providedIn:"root",factory:()=>({})});let $x=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Hx)},providedIn:"root"})}return n})(),Hx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Yh||{});function Vg(n,e){n.events.pipe(wr(t=>t instanceof Ks||t instanceof Wc||t instanceof wl||t instanceof bo),(0,Ct.U)(t=>t instanceof Ks||t instanceof bo?Yh.COMPLETE:t instanceof Wc&&(0===t.code||1===t.code)?Yh.REDIRECTING:Yh.FAILED),wr(t=>t!==Yh.REDIRECTING),gn(1)).subscribe(()=>{e()})}function na(n){throw n}function Qh(n,e,t){return e.parse("/")}const ob={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ab={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new _i.x,this.options=(0,d.f3M)(Ug,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||na,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Qh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)($x),this.routeReuseStrategy=(0,d.f3M)(HU),this.titleStrategy=(0,d.f3M)(jx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(Sl,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Lg),this.urlSerializer=(0,d.f3M)(pl),this.location=(0,d.f3M)(Ae),this.componentInputBindingEnabled=!!(0,d.f3M)(Ag,{optional:!0}),this.eventsSubscription=new Bc.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Eo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=iv(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(zx(r)&&this._events.next(r));if(r instanceof Ba)Bx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof bo)this.rawUrlTree=i.rawUrl;else if(r instanceof kh){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Fh)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Wc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof FI){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bx(i.source)};this.scheduleNavigation(a,Gc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof wl&&this.restoreHistory(i,!0),r instanceof Ks&&(this.navigated=!0),zx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:u;let T,I=null;switch(f){case"merge":I={...this.currentUrlTree.queryParams,...a};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=a||null}null!==I&&(I=this.removeEmptyProps(I));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,I,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Jo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Gc,null,r)}navigate(t,r={skipLocationChange:!1}){return function GU(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ob}:!1===r?{...ab}:r,Jo(t))return vg(this.currentUrlTree,t,i);const a=this.parseUrl(t);return vg(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let f,g,v;u?(f=u.resolve,g=u.reject,v=u.promise):v=new Promise((T,A)=>{f=T,g=A});const I=this.pendingTasks.add();return Vg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zx(n){return!(n instanceof Fh||n instanceof FI)}let Bg=(()=>{class n{constructor(t,r,i,a,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new _i.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Ks&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(Zc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Pe))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&d.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&d.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),Jh=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,u){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Ks&&this.update()})}ngAfterContentInit(){(0,lt.of)(this.links.changes,(0,lt.of)(null)).pipe((0,Lc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,fn.D)(t).pipe((0,Lc.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Ev(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Bg,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&d.Suo(a,Bg,5),2&r){let u;d.iGM(u=d.CRH())&&(i.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class Gx{}let qx=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(wr(t=>t instanceof Ks),yo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,f=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,fn.D)(i).pipe((0,Lc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,lt.of)(null);const a=i.pipe((0,ri.z)(u=>null===u?(0,lt.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,fn.D)([a,u]).pipe((0,Lc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(rr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Gx),d.LFG(Cv))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Iv=new d.OlP("");let cb=(()=>{class n{constructor(t,r,i,a,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ba?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ks?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function vs(n,e){return{\u0275kind:n,\u0275providers:e}}function lb(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(rr),i=n.get(db);1===n.get(ef)&&r.initialNavigation(),n.get(fb,null,d.XFs.Optional)?.setUpPreloading(),n.get(Iv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const db=new d.OlP("",{factory:()=>new _i.x}),ef=new d.OlP("",{providedIn:"root",factory:()=>1}),fb=new d.OlP("");function Yx(n){return vs(0,[{provide:fb,useExisting:qx},{provide:Gx,useExisting:n}])}const Ml=new d.OlP("ROUTER_FORROOT_GUARD"),pb=[Ae,{provide:pl,useClass:Cg},rr,Tg,{provide:Zc,useFactory:function bv(n){return n.routerState.root},deps:[rr]},Cv,[]];function gb(){return new d.PXZ("Router",rr)}let jg=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pb,[],{provide:Sl,multi:!0,useValue:t},{provide:Ml,useFactory:_b,deps:[[rr,new d.FiY,new d.tp0]]},{provide:Ug,useValue:r||{}},r?.useHash?{provide:Pe,useClass:ve}:{provide:Pe,useClass:Je},{provide:Iv,useFactory:()=>{const n=(0,d.f3M)(Ur),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Ug),r=(0,d.f3M)(Lg),i=(0,d.f3M)(pl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cb(i,r,n,e,t)}},r?.preloadingStrategy?Yx(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:gb},r?.initialNavigation?$g(r):[],r?.bindToComponentInputs?vs(8,[UI,{provide:Ag,useExisting:UI}]).\u0275providers:[],[{provide:Xx,useFactory:lb},{provide:d.tb,multi:!0,useExisting:Xx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ml,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function _b(n){return"guarded"}function $g(n){return["disabled"===n.initialNavigation?vs(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(rr);return()=>{e.setUpLocationChangeListener()}}},{provide:ef,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vs(2,[{provide:ef,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(rr),a=e.get(db);Vg(i,()=>{r(!0)}),e.get(Lg).afterPreactivation=()=>(r(!0),a.closed?(0,lt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Xx=new d.OlP("");var H=k(5861);class Hg extends Bc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const zg={setInterval(n,e,...t){const{delegate:r}=zg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=zg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Sv=k(9039);class nf extends Hg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return zg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&zg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Sv.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ws={now:()=>(ws.delegate||Date).now(),delegate:void 0};class $a{constructor(e,t=$a.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}$a.now=ws.now;class Gg extends $a{constructor(e,t=$a.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Av=new Gg(nf),nP=Av;var vb=k(671);var sP=k(305);function rf(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new sP.Hp({next:u=>{r(u),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Gs)}});n.subscribe(a)})}const Wg=function Cb(n,e){return n===e||n!=n&&e!=e},Mv=function QU(n,e){for(var t=n.length;t--;)if(Wg(n[t][0],e))return t;return-1};var cP=Array.prototype.splice;function Ha(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ha.prototype.clear=function wb(){this.__data__=[],this.size=0},Ha.prototype.delete=function JU(n){var e=this.__data__,t=Mv(e,n);return!(t<0||(t==e.length-1?e.pop():cP.call(e,t,1),--this.size,0))},Ha.prototype.get=function qg(n){var e=this.__data__,t=Mv(e,n);return t<0?void 0:e[t][1]},Ha.prototype.has=function xv(n){return Mv(this.__data__,n)>-1},Ha.prototype.set=function Ol(n,e){var t=this.__data__,r=Mv(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const za=Ha,Fv="object"==typeof global&&global&&global.Object===Object&&global;var dP="object"==typeof self&&self&&self.Object===Object&&self;const Cs=Fv||dP||Function("return this")(),Nl=Cs.Symbol;var Ib=Object.prototype,t3=Ib.hasOwnProperty,fP=Ib.toString,Ga=Nl?Nl.toStringTag:void 0;var Uv=Object.prototype.toString;var Vv=Nl?Nl.toStringTag:void 0;const af=function n3(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Vv&&Vv in Object(n)?function Lv(n){var e=t3.call(n,Ga),t=n[Ga];try{n[Ga]=void 0;var r=!0}catch{}var i=fP.call(n);return r&&(e?n[Ga]=t:delete n[Ga]),i}(n):function Yg(n){return Uv.call(n)}(n)},cf=function Qg(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Sb=function yP(n){if(!cf(n))return!1;var e=af(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,vP=Cs["__core-js_shared__"],Bv=(n=/[^.]+$/.exec(vP&&vP.keys&&vP.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var Ab=Function.prototype.toString;const tu=function wP(n){if(null!=n){try{return Ab.call(n)}catch{}try{return n+""}catch{}}return""};var CP=/^\[object .+?Constructor\]$/,Pb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ys=function Ob(n){return!(!cf(n)||function jv(n){return!!Bv&&Bv in n}(n))&&(Sb(n)?Pb:CP).test(tu(n))},Fi=function Hv(n,e){var t=function Rb(n,e){return n?.[e]}(n,e);return Ys(t)?t:void 0},lf=Fi(Cs,"Map"),df=Fi(Object,"create");var TP=Object.prototype.hasOwnProperty;var qv=Object.prototype.hasOwnProperty;function Fl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Fl.prototype.clear=function Gv(){this.__data__=df?df(null):{},this.size=0},Fl.prototype.delete=function Nb(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Fl.prototype.get=function Wv(n){var e=this.__data__;if(df){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return TP.call(e,n)?e[n]:void 0},Fl.prototype.has=function kb(n){var e=this.__data__;return df?void 0!==e[n]:qv.call(e,n)},Fl.prototype.set=function Lb(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=df&&void 0===e?"__lodash_hash_undefined__":e,this};const Vb=Fl,Xg=function Ul(n,e){var t=n.__data__;return function Ll(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Vl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Vl.prototype.clear=function MP(){this.size=0,this.__data__={hash:new Vb,map:new(lf||za),string:new Vb}},Vl.prototype.delete=function xP(n){var e=Xg(this,n).delete(n);return this.size-=e?1:0,e},Vl.prototype.get=function $b(n){return Xg(this,n).get(n)},Vl.prototype.has=function hf(n){return Xg(this,n).has(n)},Vl.prototype.set=function Hb(n,e){var t=Xg(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const PP=Vl;function ff(n){var e=this.__data__=new za(n);this.size=e.size}ff.prototype.clear=function Zg(){this.__data__=new za,this.size=0},ff.prototype.delete=function Rv(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},ff.prototype.get=function Kg(n){return this.__data__.get(n)},ff.prototype.has=function kv(n){return this.__data__.has(n)},ff.prototype.set=function RP(n,e){var t=this.__data__;if(t instanceof za){var r=t.__data__;if(!lf||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new PP(r)}return t.set(n,e),this.size=t.size,this};const NP=ff;var Wb=function(){try{var n=Fi(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Kv=Wb,pf=function l3(n,e,t){"__proto__"==e&&Kv?Kv(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var qb=Object.prototype.hasOwnProperty;const Kb=function Zb(n,e,t){var r=n[e];(!qb.call(n,e)||!Wg(r,t)||void 0===t&&!(e in n))&&pf(n,e,t)},gf=function Yb(n,e,t,r){var i=!t;t||(t={});for(var a=-1,u=e.length;++a<u;){var f=e[a],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?pf(t,f,g):Kb(t,f,g)}return t},So=function Jb(n){return null!=n&&"object"==typeof n},mf=function kP(n){return So(n)&&"[object Arguments]"==af(n)};var nu=Object.prototype,Yv=nu.hasOwnProperty,_f=nu.propertyIsEnumerable,eT=mf(function(){return arguments}())?mf:function(n){return So(n)&&Yv.call(n,"callee")&&!_f.call(n,"callee")};const Qv=eT,yf=Array.isArray;var nT="object"==typeof exports&&exports&&!exports.nodeType&&exports,rT=nT&&"object"==typeof module&&module&&!module.nodeType&&module,e0=rT&&rT.exports===nT?Cs.Buffer:void 0;const iT=(e0?e0.isBuffer:void 0)||function tT(){return!1};var sT=/^(?:0|[1-9]\d*)$/;const BP=function oT(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&sT.test(n))&&n>-1&&n%1==0&&n<e},aT=function ts(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var mn={};mn["[object Float32Array]"]=mn["[object Float64Array]"]=mn["[object Int8Array]"]=mn["[object Int16Array]"]=mn["[object Int32Array]"]=mn["[object Uint8Array]"]=mn["[object Uint8ClampedArray]"]=mn["[object Uint16Array]"]=mn["[object Uint32Array]"]=!0,mn["[object Arguments]"]=mn["[object Array]"]=mn["[object ArrayBuffer]"]=mn["[object Boolean]"]=mn["[object DataView]"]=mn["[object Date]"]=mn["[object Error]"]=mn["[object Function]"]=mn["[object Map]"]=mn["[object Number]"]=mn["[object Object]"]=mn["[object RegExp]"]=mn["[object Set]"]=mn["[object String]"]=mn["[object WeakMap]"]=!1;const nm=function pT(n){return function(e){return n(e)}};var s0="object"==typeof exports&&exports&&!exports.nodeType&&exports,ru=s0&&"object"==typeof module&&module&&!module.nodeType&&module,o0=ru&&ru.exports===s0&&Fv.process;const Wa=function(){try{return ru&&ru.require&&ru.require("util").types||o0&&o0.binding&&o0.binding("util")}catch{}}();var gT=Wa&&Wa.isTypedArray;const nO=gT?nm(gT):function f3(n){return So(n)&&aT(n.length)&&!!mn[af(n)]};var vf=Object.prototype.hasOwnProperty;const wf=function _T(n,e){var t=yf(n),r=!t&&Qv(n),i=!t&&!r&&iT(n),a=!t&&!r&&!i&&nO(n),u=t||r||i||a,f=u?function Tt(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var v in n)(e||vf.call(n,v))&&(!u||!("length"==v||i&&("offset"==v||"parent"==v)||a&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||BP(v,g)))&&f.push(v);return f};var p3=Object.prototype;const im=function rO(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||p3)},vT=function yT(n,e){return function(t){return n(e(t))}},wT=vT(Object.keys,Object);var Cf=Object.prototype.hasOwnProperty;const bT=function IT(n){return null!=n&&aT(n.length)&&!Sb(n)},iu=function oO(n){return bT(n)?wf(n):function sO(n){if(!im(n))return wT(n);var e=[];for(var t in Object(n))Cf.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var hO=Object.prototype.hasOwnProperty;const pO=function fO(n){if(!cf(n))return function uO(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=im(n),t=[];for(var r in n)"constructor"==r&&(e||!hO.call(n,r))||t.push(r);return t},Ef=function TT(n){return bT(n)?wf(n,!0):pO(n)};var DT="object"==typeof exports&&exports&&!exports.nodeType&&exports,ST=DT&&"object"==typeof module&&module&&!module.nodeType&&module,AT=ST&&ST.exports===DT?Cs.Buffer:void 0,MT=AT?AT.allocUnsafe:void 0;const a0=function OT(){return[]};var om=Object.prototype.propertyIsEnumerable,RT=Object.getOwnPropertySymbols,wO=RT?function(n){return null==n?[]:(n=Object(n),function vO(n,e){for(var t=-1,r=null==n?0:n.length,i=0,a=[];++t<r;){var u=n[t];e(u,t,n)&&(a[i++]=u)}return a}(RT(n),function(e){return om.call(n,e)}))}:a0;const If=wO,Zr=function bf(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},Tf=vT(Object.getPrototypeOf,Object);var c0=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)Zr(e,If(n)),n=Tf(n);return e}:a0;const ou=c0,au=function $l(n,e,t){var r=e(n);return yf(n)?r:Zr(r,t(n))},zl=function Hl(n){return au(n,iu,If)},Wl=function Gl(n){return au(n,Ef,ou)},am=Fi(Cs,"DataView"),cm=Fi(Cs,"Promise"),um=Fi(Cs,"Set"),lm=Fi(Cs,"WeakMap");var u0="[object Map]",UT="[object Promise]",EO="[object Set]",IO="[object WeakMap]",VT="[object DataView]",bO=tu(am),_3=tu(lf),TO=tu(cm),y3=tu(um),DO=tu(lm),cu=af;(am&&cu(new am(new ArrayBuffer(1)))!=VT||lf&&cu(new lf)!=u0||cm&&cu(cm.resolve())!=UT||um&&cu(new um)!=EO||lm&&cu(new lm)!=IO)&&(cu=function(n){var e=af(n),t="[object Object]"==e?n.constructor:void 0,r=t?tu(t):"";if(r)switch(r){case bO:return VT;case _3:return u0;case TO:return UT;case y3:return EO;case DO:return IO}return e});const d0=cu;var Df=Object.prototype.hasOwnProperty;const ql=Cs.Uint8Array,p0=function jT(n){var e=new n.constructor(n.byteLength);return new ql(e).set(new ql(n)),e};var AO=/\w*$/;var hm=Nl?Nl.prototype:void 0,Af=hm?hm.valueOf:void 0;const jO=function BO(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return p0(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function Sf(n,e){var t=e?p0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function PO(n,e){var t=e?p0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function MO(n){var e=new n.constructor(n.source,AO.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function fm(n){return Af?Object(Af.call(n)):{}}(n)}};var ZT=Object.create,mm=function(){function n(){}return function(e){if(!cf(e))return{};if(ZT)return ZT(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const _m=mm;var ym=Wa&&Wa.isMap;const v0=ym?nm(ym):function HO(n){return So(n)&&"[object Map]"==d0(n)};var w0=Wa&&Wa.isSet;const nD=w0?nm(w0):function zO(n){return So(n)&&"[object Set]"==d0(n)};var vm="[object Arguments]",C0="[object Function]",E0="[object Object]",_n={};_n[vm]=_n["[object Array]"]=_n["[object ArrayBuffer]"]=_n["[object DataView]"]=_n["[object Boolean]"]=_n["[object Date]"]=_n["[object Float32Array]"]=_n["[object Float64Array]"]=_n["[object Int8Array]"]=_n["[object Int16Array]"]=_n["[object Int32Array]"]=_n["[object Map]"]=_n["[object Number]"]=_n[E0]=_n["[object RegExp]"]=_n["[object Set]"]=_n["[object String]"]=_n["[object Symbol]"]=_n["[object Uint8Array]"]=_n["[object Uint8ClampedArray]"]=_n["[object Uint16Array]"]=_n["[object Uint32Array]"]=!0,_n["[object Error]"]=_n[C0]=_n["[object WeakMap]"]=!1;const eR=function Em(n,e,t,r,i,a){var u,f=1&e,g=2&e,v=4&e;if(t&&(u=i?t(n,r,i,a):t(n)),void 0!==u)return u;if(!cf(n))return n;var I=yf(n);if(I){if(u=function f0(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&Df.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function xT(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,u)}else{var T=d0(n),A=T==C0||"[object GeneratorFunction]"==T;if(iT(n))return function _O(n,e){if(e)return n.slice();var t=n.length,r=MT?MT(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==E0||T==vm||A&&!i){if(u=g||A?{}:function KT(n){return"function"!=typeof n.constructor||im(n)?{}:_m(Tf(n))}(n),!f)return g?function Bl(n,e){return gf(n,ou(n),e)}(n,function gO(n,e){return n&&gf(e,Ef(e),n)}(u,n)):function CO(n,e){return gf(n,If(n),e)}(n,function aO(n,e){return n&&gf(e,iu(e),n)}(u,n))}else{if(!_n[T])return i?n:{};u=jO(n,T,f)}}a||(a=new NP);var N=a.get(n);if(N)return N;a.set(n,u),nD(n)?n.forEach(function(J){u.add(Em(J,e,t,J,n,a))}):v0(n)&&n.forEach(function(J,be){u.set(be,Em(J,e,t,be,n,a))});var Q=I?void 0:(v?g?Wl:zl:g?Ef:iu)(n);return function c3(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,be){Q&&(J=n[be=J]),Kb(u,be,Em(J,e,t,be,n,a))}),u},Mf=function dD(n){return eR(n,5)};var an=k(7592);(0,an.registerVersion)("firebase","9.23.0","app");var Er=k(4537),Li=k(7879),$=k(9058),E3=k(1878);class hD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function D0(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Is="@firebase/app",Za=new Li.Yd("@firebase/app"),lu="[DEFAULT]",M0={[Is]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ka=new Map,Pf=new Map;function ED(n,e){try{n.container.addComponent(e)}catch(t){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ui(n){const e=n.name;if(Pf.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,n);for(const t of Ka.values())ED(t,n);return!0}function Zl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const sa=new $.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _R{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}function bD(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:lu,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw sa.create("bad-app-name",{appName:String(i)});if(t||(t=(0,$.aH)()),!t)throw sa.create("no-options");const a=Ka.get(i);if(a){if((0,$.vZ)(t,a.options)&&(0,$.vZ)(r,a.config))return a;throw sa.create("duplicate-app",{appName:i})}const u=new Er.H0(i);for(const g of Pf.values())u.addComponent(g);const f=new _R(t,r,u);return Ka.set(i,f),f}function TD(n=lu){const e=Ka.get(n);if(!e&&n===lu&&(0,$.aH)())return bD();if(!e)throw sa.create("no-app",{appName:n});return e}function vi(n,e,t){var r;let i=null!==(r=M0[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const f=[`Unable to register library "${i}" with version "${e}":`];return a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Za.warn(f.join(" "))}Ui(new Er.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const yR="firebase-heartbeat-database",vR=1,Of="firebase-heartbeat-store";let P0=null;function DD(){return P0||(P0=(0,E3.X3)(yR,vR,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Of)}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),P0}function bm(){return bm=(0,H.Z)(function*(n){try{return yield(yield DD()).transaction(Of).objectStore(Of).get(R0(n))}catch(e){if(e instanceof $.ZR)Za.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});Za.warn(t.message)}}}),bm.apply(this,arguments)}function O0(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,H.Z)(function*(n,e){try{const r=(yield DD()).transaction(Of,"readwrite");yield r.objectStore(Of).put(e,R0(n)),yield r.done}catch(t){if(t instanceof $.ZR)Za.warn(t.message);else{const r=sa.create("idb-set",{originalErrorMessage:t?.message});Za.warn(r.message)}}}),Tm.apply(this,arguments)}function R0(n){return`${n.name}!${n.options.appId}`}class xD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,H.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N0();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,H.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=N0(),{heartbeatsToSend:r,unsentEntries:i}=function PD(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),Ya(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ya(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=(0,$.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function N0(){return(new Date).toISOString().substring(0,10)}class OD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,H.Z)(function*(){return!!(0,$.hl)()&&(0,$.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,H.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function SD(n){return bm.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,H.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return O0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,H.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return O0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function Ya(n){return(0,$.L)(JSON.stringify({version:2,heartbeats:n})).length}!function wR(n){Ui(new Er.wA("platform-logger",e=>new hD(e),"PRIVATE")),Ui(new Er.wA("heartbeat",e=>new xD(e),"PRIVATE")),vi(Is,"0.9.20",n),vi(Is,"0.9.20","esm2017"),vi("fire-js","")}("");const CR=(n,e)=>e.some(t=>n instanceof t);let du,ER;const F0=new WeakMap,Dm=new WeakMap,IR=new WeakMap,Qa=new WeakMap,L0=new WeakMap;let Ja={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Dm.get(n);if("objectStoreNames"===e)return n.objectStoreNames||IR.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ir(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Am(n){return"function"==typeof n?function Sm(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function A3(){return ER||(ER=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(RD(this),e),ir(F0.get(this))}:function(...e){return ir(n.apply(RD(this),e))}:function(e,...t){const r=n.call(RD(this),e,...t);return IR.set(r,e.sort?e.sort():[e]),ir(r)}}(n):(n instanceof IDBTransaction&&function TR(n){if(Dm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Dm.set(n,e)}(n),CR(n,function k0(){return du||(du=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ja):n)}function ir(n){if(n instanceof IDBRequest)return function bR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ir(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&F0.set(t,n)}).catch(()=>{}),L0.set(e,n),e}(n);if(Qa.has(n))return Qa.get(n);const e=Am(n);return e!==n&&(Qa.set(n,e),L0.set(e,n)),e}const RD=n=>L0.get(n),AR=["get","getKey","getAll","getAllKeys","count"],kD=["put","add","delete","clear"],Mm=new Map;function U0(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=kD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!AR.includes(t))return;const a=function(){var u=(0,H.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let I=v.store;return r&&(I=I.index(g.shift())),(yield Promise.all([I[t](...g),i&&v.done]))[0]});return function(g){return u.apply(this,arguments)}}();return Mm.set(e,a),a}!function DR(n){Ja=n(Ja)}(n=>({...n,get:(e,t,r)=>U0(e,t)||n.get(e,t,r),has:(e,t)=>!!U0(e,t)||n.has(e,t)}));const V0="@firebase/installations",B0="0.6.4",FD=1e4,LD=`w:${B0}`,Kl="FIS_v2",MR="https://firebaseinstallations.googleapis.com/v1",xR=36e5,Po=new $.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function j0(n){return n instanceof $.ZR&&n.code.includes("request-failed")}function $0({projectId:n}){return`${MR}/projects/${n}/installations`}function Yl(n){return{token:n.token,requestStatus:2,expiresIn:jD(n.expiresIn),creationTime:Date.now()}}function hu(n,e){return H0.apply(this,arguments)}function H0(){return H0=(0,H.Z)(function*(n,e){const r=(yield e.json()).error;return Po.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),H0.apply(this,arguments)}function VD({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Pm(n){return Om.apply(this,arguments)}function Om(){return Om=(0,H.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),Om.apply(this,arguments)}function jD(n){return Number(n.replace("s","000"))}function z0(){return z0=(0,H.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=$0(n),i=VD(n),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Kl,appId:n.appId,sdkVersion:LD})},g=yield Pm(()=>fetch(r,f));if(g.ok){const v=yield g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:Yl(v.authToken)}}throw yield hu("Create Installation",g)}),z0.apply(this,arguments)}function HD(n){return new Promise(e=>{setTimeout(e,n)})}const x3=/^[cdef][\w-]{21}$/,zD="";function P3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function GD(n){return function M3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return x3.test(t)?t:zD}catch{return zD}}function oa(n){return`${n.appName}!${n.appId}`}const Ql=new Map;function WD(n,e){const t=oa(n);ZD(t,e),function RR(n,e){const t=function KD(){return!fu&&"BroadcastChannel"in self&&(fu=new BroadcastChannel("[Firebase] FID Change"),fu.onmessage=n=>{ZD(n.data.key,n.data.fid)}),fu}();t&&t.postMessage({key:n,fid:e}),function NR(){0===Ql.size&&fu&&(fu.close(),fu=null)}()}(t,e)}function ZD(n,e){const t=Ql.get(n);if(t)for(const r of t)r(e)}let fu=null;const kR="firebase-installations-database",YD=1,pu="firebase-installations-store";let G0=null;function gu(){return G0||(G0=function ND(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),f=ir(u);return r&&u.addEventListener("upgradeneeded",g=>{r(ir(u.result),g.oldVersion,g.newVersion,ir(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(kR,YD,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pu)}})),G0}function Rm(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,H.Z)(function*(n,e){const t=oa(n),i=(yield gu()).transaction(pu,"readwrite"),a=i.objectStore(pu),u=yield a.get(t);return yield a.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&WD(n,e.fid),e}),Nm.apply(this,arguments)}function W0(n){return km.apply(this,arguments)}function km(){return km=(0,H.Z)(function*(n){const e=oa(n),r=(yield gu()).transaction(pu,"readwrite");yield r.objectStore(pu).delete(e),yield r.done}),km.apply(this,arguments)}function Nf(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,H.Z)(function*(n,e){const t=oa(n),i=(yield gu()).transaction(pu,"readwrite"),a=i.objectStore(pu),u=yield a.get(t),f=e(u);return void 0===f?yield a.delete(t):yield a.put(f,t),yield i.done,f&&(!u||u.fid!==f.fid)&&WD(n,f.fid),f}),Fm.apply(this,arguments)}function q0(n){return kf.apply(this,arguments)}function kf(){return kf=(0,H.Z)(function*(n){let e;const t=yield Nf(n.appConfig,r=>{const i=function FR(n){return XD(n||{fid:P3(),registrationStatus:0})}(r),a=function QD(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Po.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function JD(n,e){return Z0.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:LR(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===zD?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),kf.apply(this,arguments)}function Z0(){return Z0=(0,H.Z)(function*(n,e){try{const t=yield function $D(n,e){return z0.apply(this,arguments)}(n,e);return Rm(n.appConfig,t)}catch(t){throw j0(t)&&409===t.customData.serverCode?yield W0(n.appConfig):yield Rm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Z0.apply(this,arguments)}function LR(n){return K0.apply(this,arguments)}function K0(){return K0=(0,H.Z)(function*(n){let e=yield Lm(n.appConfig);for(;1===e.registrationStatus;)yield HD(100),e=yield Lm(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield q0(n);return r||t}return e}),K0.apply(this,arguments)}function Lm(n){return Nf(n,e=>{if(!e)throw Po.create("installation-not-found");return XD(e)})}function XD(n){return function e1(n){return 1===n.registrationStatus&&n.registrationTime+FD<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Y0(){return Y0=(0,H.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function VR(n,{fid:e}){return`${$0(n)}/${e}/authTokens:generate`}(n,t),i=function BD(n,{refreshToken:e}){const t=VD(n);return t.append("Authorization",function OR(n){return`${Kl} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:LD,appId:n.appId}})},g=yield Pm(()=>fetch(r,f));if(g.ok)return Yl(yield g.json());throw yield hu("Generate Auth Token",g)}),Y0.apply(this,arguments)}function Q0(n){return J0.apply(this,arguments)}function J0(){return J0=(0,H.Z)(function*(n,e=!1){let t;const r=yield Nf(n.appConfig,a=>{if(!r1(a))throw Po.create("not-registered");const u=a.authToken;if(!e&&function jR(n){return 2===n.requestStatus&&!function i1(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+xR}(n)}(u))return a;if(1===u.requestStatus)return t=function BR(n,e){return X0.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw Po.create("app-offline");const f=function $R(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function n1(n,e){return Um.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),J0.apply(this,arguments)}function X0(){return X0=(0,H.Z)(function*(n,e){let t=yield t1(n.appConfig);for(;1===t.authToken.requestStatus;)yield HD(100),t=yield t1(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Q0(n,e):r}),X0.apply(this,arguments)}function t1(n){return Nf(n,e=>{if(!r1(e))throw Po.create("not-registered");return function HR(n){return 1===n.requestStatus&&n.requestTime+FD<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Um(){return Um=(0,H.Z)(function*(n,e){try{const t=yield function UR(n,e){return Y0.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Rm(n.appConfig,r),t}catch(t){if(!j0(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Rm(n.appConfig,r)}else yield W0(n.appConfig);throw t}}),Um.apply(this,arguments)}function r1(n){return void 0!==n&&2===n.registrationStatus}function ew(){return ew=(0,H.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield q0(e);return r?r.catch(console.error):Q0(e).catch(console.error),t.fid}),ew.apply(this,arguments)}function Ff(){return Ff=(0,H.Z)(function*(n,e=!1){const t=n;return yield function s1(n){return Lf.apply(this,arguments)}(t),(yield Q0(t,e)).token}),Ff.apply(this,arguments)}function Lf(){return Lf=(0,H.Z)(function*(n){const{registrationPromise:e}=yield q0(n);e&&(yield e)}),Lf.apply(this,arguments)}function o1(n){return Po.create("missing-app-config-values",{valueName:n})}const Bm="installations",ZR=n=>{const e=n.getProvider("app").getImmediate(),t=function qR(n){if(!n||!n.options)throw o1("App Configuration");if(!n.name)throw o1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw o1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Zl(e,"heartbeat"),_delete:()=>Promise.resolve()}},a1=n=>{const t=Zl(n.getProvider("app").getImmediate(),Bm).getImmediate();return{getId:()=>function zR(n){return ew.apply(this,arguments)}(t),getToken:i=>function tw(n){return Ff.apply(this,arguments)}(t,i)}};(function c1(){Ui(new Er.wA(Bm,ZR,"PUBLIC")),Ui(new Er.wA("installations-internal",a1,"PRIVATE"))})(),vi(V0,B0),vi(V0,B0,"esm2017");const sw="@firebase/remote-config",wi=new $.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nN{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,H.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&u.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(u),a})()}}function rN(n=navigator){return n.languages&&n.languages[0]||n.language}class iN{constructor(e,t,r,i,a,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=u}fetch(e){var t=this;return(0,H.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:rN()},v={method:"POST",headers:f,body:JSON.stringify(g)},I=fetch(u,v),T=new Promise((be,ze)=>{e.signal.addEventListener(()=>{const ke=new Error("The operation was aborted.");ke.name="AbortError",ze(ke)})});let A;try{yield Promise.race([I,T]),A=yield I}catch(be){let ze="fetch-client-network";throw"AbortError"===be?.name&&(ze="fetch-timeout"),wi.create(ze,{originalErrorMessage:be?.message})}let N=A.status;const G=A.headers.get("ETag")||void 0;let Q,J;if(200===A.status){let be;try{be=yield A.json()}catch(ze){throw wi.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=be.entries,J=be.state}if("INSTANCE_STATE_UNSPECIFIED"===J?N=500:"NO_CHANGE"===J?N=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==N&&200!==N)throw wi.create("fetch-status",{httpStatus:N});return{status:N,eTag:G,config:Q}})()}}class f1{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,H.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,H.Z)(function*(){yield function sN(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(wi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function Uf(n){if(!(n instanceof $.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const u={throttleEndTimeMillis:Date.now()+(0,$.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class m1{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vf(n,e){const t=n.target.error||void 0;return wi.create(e,{originalErrorMessage:t&&t?.message})}const Xa="app_namespace_store";class _1{constructor(e,t,r,i=function U3(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Vf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xa,{keyPath:"compositeKey"})}}catch(t){e(wi.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,H.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Xa],"readonly").objectStore(Xa),g=t.createCompositeKey(e);try{const v=f.get(g);v.onerror=I=>{a(Vf(I,"storage-get"))},v.onsuccess=I=>{const T=I.target.result;i(T?T.value:void 0)}}catch(v){a(wi.create("storage-get",{originalErrorMessage:v?.message}))}})})()}set(e,t){var r=this;return(0,H.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,u)=>{const g=i.transaction([Xa],"readwrite").objectStore(Xa),v=r.createCompositeKey(e);try{const I=g.put({compositeKey:v,value:t});I.onerror=T=>{u(Vf(T,"storage-set"))},I.onsuccess=()=>{a()}}catch(I){u(wi.create("storage-set",{originalErrorMessage:I?.message}))}})})()}delete(e){var t=this;return(0,H.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Xa],"readwrite").objectStore(Xa),g=t.createCompositeKey(e);try{const v=f.delete(g);v.onerror=I=>{a(Vf(I,"storage-delete"))},v.onsuccess=()=>{i()}}catch(v){a(wi.create("storage-delete",{originalErrorMessage:v?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class aN{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,H.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Bf(){return hw.apply(this,arguments)}function hw(){return(hw=(0,H.Z)(function*(){if(!(0,$.hl)())return!1;try{return yield(0,$.eu)()}catch{return!1}})).apply(this,arguments)}!function y1(){Ui(new Er.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wi.create("registration-window");if(!(0,$.hl)())throw wi.create("indexed-db-unavailable");const{projectId:a,apiKey:u,appId:f}=r.options;if(!a)throw wi.create("registration-project-id");if(!u)throw wi.create("registration-api-key");if(!f)throw wi.create("registration-app-id");const g=new _1(f,r.name,t=t||"firebase"),v=new aN(g),I=new Li.Yd(sw);I.logLevel=Li.in.ERROR;const T=new iN(i,"10.5.0",t,a,u,f),A=new f1(T,g),N=new nN(A,g,v,I),G=new m1(r,N,v,g,I);return function JR(n){const e=(0,$.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(G),G},"PUBLIC").setMultipleInstances(!0)),vi(sw,"0.4.4"),vi(sw,"0.4.4","esm2017")}();const fw=(n,e)=>e.some(t=>n instanceof t);let v1,cN;const Xl=new WeakMap,pw=new WeakMap,w1=new WeakMap,gw=new WeakMap,ed=new WeakMap;let Hm={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pw.get(n);if("objectStoreNames"===e)return n.objectStoreNames||w1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oo(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function hN(n){return"function"==typeof n?function dN(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function B3(){return cN||(cN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(mw(this),e),Oo(Xl.get(this))}:function(...e){return Oo(n.apply(mw(this),e))}:function(e,...t){const r=n.call(mw(this),e,...t);return w1.set(r,e.sort?e.sort():[e]),Oo(r)}}(n):(n instanceof IDBTransaction&&function lN(n){if(pw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});pw.set(n,e)}(n),fw(n,function uN(){return v1||(v1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Hm):n)}function Oo(n){if(n instanceof IDBRequest)return function C1(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Oo(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Xl.set(t,n)}).catch(()=>{}),ed.set(e,n),e}(n);if(gw.has(n))return gw.get(n);const e=hN(n);return e!==n&&(gw.set(n,e),ed.set(e,n)),e}const mw=n=>ed.get(n);function E1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),f=Oo(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Oo(u.result),g.oldVersion,g.newVersion,Oo(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function Gm(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Oo(t).then(()=>{})}const Wm=["get","getKey","getAll","getAllKeys","count"],fN=["put","add","delete","clear"],_w=new Map;function yw(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(_w.get(e))return _w.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=fN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Wm.includes(t))return;const a=function(){var u=(0,H.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let I=v.store;return r&&(I=I.index(g.shift())),(yield Promise.all([I[t](...g),i&&v.done]))[0]});return function(g){return u.apply(this,arguments)}}();return _w.set(e,a),a}!function zm(n){Hm=n(Hm)}(n=>({...n,get:(e,t,r)=>yw(e,t)||n.get(e,t,r),has:(e,t)=>!!yw(e,t)||n.has(e,t)}));const I1="/firebase-messaging-sw.js",vw="/firebase-cloud-messaging-push-scope",ww="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pN="https://fcmregistrations.googleapis.com/v1",Cw="google.c.a.c_id",b1="google.c.a.c_l",gN="google.c.a.ts";var td=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(td||{});function Ro(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Iw(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const jf="fcm_token_details_db",_N=5,T1="fcm_token_object_Store";function bw(){return bw=(0,H.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(jf))return null;let e=null;return(yield E1(jf,_N,{upgrade:(r=(0,H.Z)(function*(i,a,u,f){var g;if(a<2||!i.objectStoreNames.contains(T1))return;const v=f.objectStore(T1),I=yield v.index("fcmSenderId").get(n);if(yield v.clear(),I)if(2===a){const T=I;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Ro(T.vapidKey)}}}else if(3===a){const T=I;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ro(T.auth),p256dh:Ro(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ro(T.vapidKey)}}}else if(4===a){const T=I;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ro(T.auth),p256dh:Ro(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ro(T.vapidKey)}}}}),function(a,u,f,g){return r.apply(this,arguments)})})).close(),yield Gm(jf),yield Gm("fcm_vapid_details_db"),yield Gm("undefined"),function D1(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),bw.apply(this,arguments)}const Tw="firebase-messaging-database",S1=1,mu="firebase-messaging-store";let qm=null;function Zm(){return qm||(qm=E1(Tw,S1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(mu)}})),qm}function A1(n){return Km.apply(this,arguments)}function Km(){return Km=(0,H.Z)(function*(n){const e=Kr(n),r=yield(yield Zm()).transaction(mu).objectStore(mu).get(e);if(r)return r;{const i=yield function yN(n){return bw.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Ym(n,i),i}}),Km.apply(this,arguments)}function Ym(n,e){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,H.Z)(function*(n,e){const t=Kr(n),i=(yield Zm()).transaction(mu,"readwrite");return yield i.objectStore(mu).put(e,t),yield i.done,e}),Dw.apply(this,arguments)}function Qm(){return Qm=(0,H.Z)(function*(n){const e=Kr(n),r=(yield Zm()).transaction(mu,"readwrite");yield r.objectStore(mu).delete(e),yield r.done}),Qm.apply(this,arguments)}function Kr({appConfig:n}){return n.appId}const Yr=new $.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vN(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,H.Z)(function*(n,e){const t=yield R1(n),r=N1(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(O1(n.appConfig),i)).json()}catch(u){throw Yr.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(a.error)throw Yr.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw Yr.create("token-subscribe-no-token");return a.token}),x1.apply(this,arguments)}function Jm(){return Jm=(0,H.Z)(function*(n,e){const t=yield R1(n),r=N1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${O1(n.appConfig)}/${e.token}`,i)).json()}catch(u){throw Yr.create("token-update-failed",{errorInfo:u?.toString()})}if(a.error)throw Yr.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw Yr.create("token-update-no-token");return a.token}),Jm.apply(this,arguments)}function Xm(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,H.Z)(function*(n,e){const r={method:"DELETE",headers:yield R1(n)};try{const a=yield(yield fetch(`${O1(n.appConfig)}/${e}`,r)).json();if(a.error)throw Yr.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw Yr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),P1.apply(this,arguments)}function O1({projectId:n}){return`${pN}/projects/${n}/registrations`}function R1(n){return _u.apply(this,arguments)}function _u(){return _u=(0,H.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),_u.apply(this,arguments)}function N1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==ww&&(i.web.applicationPubKey=r),i}const Sw=6048e5;function e_(){return e_=(0,H.Z)(function*(n){const e=yield function t_(n,e){return Hf.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ro(e.getKey("auth")),p256dh:Ro(e.getKey("p256dh"))},r=yield A1(n.firebaseDependencies);if(r){if(function $3(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+Sw?function CN(n,e){return $f.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Xm(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Mw(n.firebaseDependencies,t)}return Mw(n.firebaseDependencies,t)}),e_.apply(this,arguments)}function Aw(){return Aw=(0,H.Z)(function*(n){const e=yield A1(n.firebaseDependencies);e&&(yield Xm(n.firebaseDependencies,e.token),yield function M1(n){return Qm.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Aw.apply(this,arguments)}function $f(){return $f=(0,H.Z)(function*(n,e){try{const t=yield function j3(n,e){return Jm.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Ym(n.firebaseDependencies,r),t}catch(t){throw yield function k1(n){return Aw.apply(this,arguments)}(n),t}}),$f.apply(this,arguments)}function Mw(n,e){return xw.apply(this,arguments)}function xw(){return xw=(0,H.Z)(function*(n,e){const r={token:yield vN(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Ym(n,r),r.token}),xw.apply(this,arguments)}function Hf(){return Hf=(0,H.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Iw(e)})}),Hf.apply(this,arguments)}function Pw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function EN(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function F1(n,e){e.data&&(n.data=e.data)}(e,n),function rd(n,e){var t,r,i,a,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;f&&(n.fcmOptions.link=f);const g=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function Ow(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function L1(n){return Yr.create("missing-app-config-values",{valueName:n})}Ow("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ow("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bN{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Rw(n){if(!n||!n.options)throw L1("App Configuration Object");if(!n.name)throw L1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw L1(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Nw(){return Nw=(0,H.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(I1,{scope:vw}),n.swRegistration.update().catch(()=>{})}catch(e){throw Yr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),Nw.apply(this,arguments)}function kw(){return kw=(0,H.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function TN(n){return Nw.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Yr.create("invalid-sw-registration");n.swRegistration=e}}),kw.apply(this,arguments)}function n_(){return n_=(0,H.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=ww)}),n_.apply(this,arguments)}function r_(){return r_=(0,H.Z)(function*(n,e){if(!navigator)throw Yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yr.create("permission-blocked");return yield function U1(n,e){return n_.apply(this,arguments)}(n,e?.vapidKey),yield function DN(n,e){return kw.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function wN(n){return e_.apply(this,arguments)}(n)}),r_.apply(this,arguments)}function Fw(){return Fw=(0,H.Z)(function*(n,e,t){const r=function SN(n){switch(n){case td.NOTIFICATION_CLICKED:return"notification_open";case td.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[Cw],message_name:t[b1],message_time:t[gN],message_device_time:Math.floor(Date.now()/1e3)})}),Fw.apply(this,arguments)}function Lw(){return Lw=(0,H.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===td.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(Pw(t)):n.onMessageHandler.next(Pw(t)));const r=t.data;(function IN(n){return"object"==typeof n&&!!n&&Cw in n})(r)&&"1"===r["google.c.a.e"]&&(yield function B1(n,e,t){return Fw.apply(this,arguments)}(n,t.messageType,r))}),Lw.apply(this,arguments)}const Uw="@firebase/messaging",$1=n=>{const e=new bN(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function j1(n,e){return Lw.apply(this,arguments)}(e,t)),e},H1=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function V1(n,e){return r_.apply(this,arguments)}(e,r)}};function z1(){return G1.apply(this,arguments)}function G1(){return(G1=(0,H.Z)(function*(){try{yield(0,$.eu)()}catch{return!1}return typeof window<"u"&&(0,$.hl)()&&(0,$.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function z3(n=TD()){return z1().then(e=>{if(!e)throw Yr.create("unsupported-browser")},e=>{throw Yr.create("indexed-db-unsupported")}),Zl((0,$.m9)(n),"messaging").getImmediate()}!function AN(){Ui(new Er.wA("messaging",$1,"PUBLIC")),Ui(new Er.wA("messaging-internal",H1,"PRIVATE")),vi(Uw,"0.12.4"),vi(Uw,"0.12.4","esm2017")}();const Bw="analytics",G3="firebase_id",K1="origin",jw=6e4,Y1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$w="https://www.googletagmanager.com/gtag/js",sr=new Li.Yd("@firebase/analytics"),Vi=new $.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function W3(n){if(!n.startsWith($w)){const e=Vi.create("invalid-gtag-resource",{gtagURL:n});return sr.warn(e.message),""}return n}function Q1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function X1(){return X1=(0,H.Z)(function*(n,e,t,r,i,a){const u=r[i];try{if(u)yield e[u];else{const g=(yield Q1(t)).find(v=>v.measurementId===i);g&&(yield e[g.appId])}}catch(f){sr.error(f)}n("config",i,a)}),X1.apply(this,arguments)}function yu(){return yu=(0,H.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const f=yield Q1(t);for(const g of u){const v=f.find(T=>T.measurementId===g),I=v&&e[v.appId];if(!I){a=[];break}a.push(I)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){sr.error(a)}}),yu.apply(this,arguments)}const FN=30,eS=new class UN{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Hw(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function zw(){return zw=(0,H.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Hw(r)},a=Y1.replace("{app-id}",t),u=yield fetch(a,i);if(200!==u.status&&304!==u.status){let f="";try{const g=yield u.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw Vi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()}),zw.apply(this,arguments)}function Gw(){return Gw=(0,H.Z)(function*(n,e=eS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Vi.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Vi.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new HN;return setTimeout((0,H.Z)(function*(){f.abort()}),void 0!==t?t:jw),tS({appId:r,apiKey:i,measurementId:a},u,f,e)}),Gw.apply(this,arguments)}function tS(n,e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=(0,H.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=eS){var a;const{appId:u,measurementId:f}=n;try{yield function jN(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Vi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:f};throw g}try{const g=yield function VN(n){return zw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(u),g}catch(g){const v=g;if(!function $N(n){if(!(n instanceof $.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(v)){if(i.deleteThrottleMetadata(u),f)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:u,measurementId:f};throw g}const I=503===Number(null===(a=v?.customData)||void 0===a?void 0:a.httpStatus)?(0,$.$s)(t,i.intervalMillis,FN):(0,$.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+I,backoffCount:t+1};return i.setThrottleMetadata(u,T),sr.debug(`Calling attemptFetch again in ${I} millis`),tS(n,T,r,i)}}),Ww.apply(this,arguments)}class HN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let s_,zf;function Zw(){return Zw=(0,H.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}}),Zw.apply(this,arguments)}function Gf(){return Gf=(0,H.Z)(function*(){if(!(0,$.hl)())return sr.warn(Vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,$.eu)()}catch(n){return sr.warn(Vi.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Gf.apply(this,arguments)}function oS(){return oS=(0,H.Z)(function*(n,e,t,r,i,a,u){var f;const g=function BN(n){return Gw.apply(this,arguments)}(n);g.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>sr.error(N)),e.push(g);const v=function Jw(){return Gf.apply(this,arguments)}().then(N=>{if(N)return r.getId()}),[I,T]=yield Promise.all([g,v]);(function kN(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($w)&&t.src.includes(n))return t;return null})(a)||function xN(n,e){const t=function J1(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:W3}),r=document.createElement("script"),i=`${$w}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,I.measurementId),zf&&(i("consent","default",zf),function aa(n){zf=n}(void 0)),i("js",new Date);const A=null!==(f=u?.config)&&void 0!==f?f:{};return A[K1]="firebase",A.update=!0,null!=T&&(A[G3]=T),i("config",I.measurementId,A),s_&&(i("set",s_),function Qw(n){s_=n}(void 0)),I.measurementId}),oS.apply(this,arguments)}class aS{constructor(e){this.app=e}_delete(){return delete No[this.app.options.appId],Promise.resolve()}}let No={},cS=[];const uS={};let WN,Xs,c_="dataLayer",eC=!1;function tC(n,e,t){!function q3(){const n=[];if((0,$.ru)()&&n.push("This is a browser extension environment."),(0,$.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Vi.create("invalid-analytics-context",{errorInfo:e});sr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Vi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Vi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=No[r])throw Vi.create("already-exists",{id:r});if(!eC){!function PN(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(c_);const{wrappedGtag:a,gtagCore:u}=function NN(n,e,t,r,i){let a=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function i_(n,e,t,r){function a(){return a=(0,H.Z)(function*(u,...f){try{if("event"===u){const[g,v]=f;yield function RN(n,e,t,r,i){return yu.apply(this,arguments)}(n,e,t,g,v)}else if("config"===u){const[g,v]=f;yield function ON(n,e,t,r,i,a){return X1.apply(this,arguments)}(n,e,t,r,g,v)}else if("consent"===u){const[g]=f;n("consent","update",g)}else if("get"===u){const[g,v,I]=f;n("get",g,v,I)}else if("set"===u){const[g]=f;n("set",g)}else n(u,...f)}catch(g){sr.error(g)}}),a.apply(this,arguments)}return function i(u){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(No,cS,uS,c_,"gtag");Xs=a,WN=u,eC=!0}return No[r]=function GN(n,e,t,r,i,a,u){return oS.apply(this,arguments)}(n,cS,uS,e,WN,c_,t),new aS(n)}function KN(){return u_.apply(this,arguments)}function u_(){return(u_=(0,H.Z)(function*(){if((0,$.ru)()||!(0,$.zI)()||!(0,$.hl)())return!1;try{return yield(0,$.eu)()}catch{return!1}})).apply(this,arguments)}const dS="@firebase/analytics";!function Q3(){Ui(new Er.wA(Bw,(e,{options:t})=>tC(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ui(new Er.wA("analytics-internal",function n(e){try{const t=e.getProvider(Bw).getImmediate();return{logEvent:(r,i,a)=>function Y3(n,e,t,r){n=(0,$.m9)(n),function qw(n,e,t,r,i){return Zw.apply(this,arguments)}(Xs,No[n.app.options.appId],e,t,r).catch(i=>sr.error(i))}(t,r,i,a)}}catch(t){throw Vi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),vi(dS,"0.10.0"),vi(dS,"0.10.0","esm2017")}();const fS=new class X3 extends Gg{}(class J3 extends nf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var qf=k(5137),sd=k(3093);const od=new d.GfV("7.6.1"),pS="__angularfire_symbol__analyticsIsSupportedValue",gS="__angularfire_symbol__analyticsIsSupported",mS="__angularfire_symbol__remoteConfigIsSupportedValue",_S="__angularfire_symbol__remoteConfigIsSupported",nC="__angularfire_symbol__messagingIsSupportedValue",ad="__angularfire_symbol__messagingIsSupported";globalThis[gS]||(globalThis[gS]=KN().then(n=>globalThis[pS]=n).catch(()=>globalThis[pS]=!1)),globalThis[ad]||(globalThis[ad]=z1().then(n=>globalThis[nC]=n).catch(()=>globalThis[nC]=!1)),globalThis[_S]||(globalThis[_S]=Bf().then(n=>globalThis[mS]=n).catch(()=>globalThis[mS]=!1));const l_={async:()=>globalThis[ad],sync:()=>{const n=globalThis[nC];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function vu(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(u=>u.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ec=(n,e)=>{const t=e?[e]:(0,an.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function tc(){}class yS{constructor(e,t=fS){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class iC{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tc,{},tc,tc)),t.pipe(Tn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ko=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new yS(Zone.current)),this.insideAngular=t.run(()=>new yS(Zone.current,Av)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fo(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ud(n){return Fo().ngZone.run(()=>n())}function ns(n){return Fo(),function nk(n){return function(t){return(t=t.lift(new iC(n.ngZone))).pipe((0,qf.R)(n.outsideAngular),(0,sd.Q)(n.insideAngular))}}(Fo())(n)}const rk=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ud(()=>n.apply(void 0,r))},ca=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=ud(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tc,{},tc,tc)))),r[a]=rk(r[a],t));const i=function tV(n){return Fo().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Hr.y){const a=Fo();return i.pipe((0,qf.R)(a.outsideAngular),(0,sd.Q)(a.insideAngular))}return ud(()=>i)}return i instanceof Hr.y?i.pipe(ns):i instanceof Promise?ud(()=>new Promise((a,u)=>i.then(f=>ud(()=>a(f)),f=>ud(()=>u(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ud(()=>i)};class Lo{constructor(e){return e}}class wu{constructor(){return(0,an.getApps)()}}const sC=new d.OlP("angularfire2._apps"),vS={provide:Lo,useFactory:function sk(n){return n&&1===n.length?n[0]:new Lo((0,an.getApp)())},deps:[[new d.FiY,sC]]},oC={provide:wu,deps:[[new d.FiY,sC]]};function nV(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Lo(r)}}let wS=(()=>{class n{constructor(t){(0,an.registerVersion)("angularfire",od.full,"core"),(0,an.registerVersion)("angularfire",od.full,"app"),(0,an.registerVersion)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vS,oC]}),n})();function aC(n,...e){return{ngModule:wS,providers:[{provide:sC,useFactory:nV(n),multi:!0,deps:[d.R0b,d.zs3,ko,...e]}]}}const sV=ca(an.initializeApp,!0),cC=new Map,uC={activated:!1,tokenObservers:[]},CS={initialized:!1,enabled:!1};function Zn(n){return cC.get(n)||Object.assign({},uC)}function Zf(){return CS}const IS="https://content-firebaseappcheck.googleapis.com/v1",bS="exchangeDebugToken",dC={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class d_{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,H.Z)(function*(){t.stop();try{t.pending=new $.BH,yield function ck(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Or=new $.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TS(n){if(!Zn(n).activated)throw Or.create("use-before-activation",{appName:n.name})}function h_(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,H.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,a)}catch(T){throw Or.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==u.status)throw Or.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(T){throw Or.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Or.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(g[1]),I=Date.now();return{token:f.token,expireTimeMillis:I+v,issuedAtTimeMillis:I}}),DS.apply(this,arguments)}function SS(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${IS}/projects/${t}/apps/${r}:${bS}?key=${i}`,body:{debug_token:e}}}const lV="firebase-app-check-database",dV=1,f_="firebase-app-check-store";let pC=null;function gC(){return gC=(0,H.Z)(function*(n,e){const r=(yield function AS(){return pC||(pC=new Promise((n,e)=>{try{const t=indexedDB.open(lV,dV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Or.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(f_,{keyPath:"compositeKey"})}}catch(t){e(Or.create("storage-open",{originalErrorMessage:t?.message}))}}),pC)}()).transaction(f_,"readwrite"),a=r.objectStore(f_).put({compositeKey:n,value:e});return new Promise((u,f)=>{a.onsuccess=g=>{u()},r.onerror=g=>{var v;f(Or.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),gC.apply(this,arguments)}const c=new Li.Yd("@firebase/app-check");function p(n,e){return(0,$.hl)()?function fV(n,e){return function hk(n,e){return gC.apply(this,arguments)}(function o(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{c.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function b(){return Zf().enabled}function D(){return M.apply(this,arguments)}function M(){return M=(0,H.Z)(function*(){const n=Zf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),M.apply(this,arguments)}const q={error:"UNKNOWN_ERROR"};function Y(n){return $.US.encodeString(JSON.stringify(n),!1)}function le(n){return Se.apply(this,arguments)}function Se(){return Se=(0,H.Z)(function*(n,e=!1){const t=n.app;TS(t);const r=Zn(t);let a,i=r.token;if(i&&!ji(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(ji(g)?i=g:yield p(t,void 0))}if(!e&&i&&ji(i))return{token:i.token};let f,u=!1;if(b()){r.exchangeTokenPromise||(r.exchangeTokenPromise=h_(SS(t,yield D()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const g=yield r.exchangeTokenPromise;return yield p(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Zn(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?c.warn(g.message):c.error(g),a=g}return i?a?f=ji(i)?{token:i.token,internalError:a}:Cu(a):(f={token:i.token},r.token=i,yield p(t,i)):f=Cu(a),u&&function Ci(n,e){const t=Zn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),Se.apply(this,arguments)}function rt(){return rt=(0,H.Z)(function*(n){const e=n.app;TS(e);const{provider:t}=Zn(e);if(b()){const r=yield D(),{token:i}=yield h_(SS(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),rt.apply(this,arguments)}function yt(n,e){const t=Zn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xt(n){const{app:e}=n,t=Zn(e);let r=t.tokenRefresher;r||(r=function ln(n){const{app:e}=n;return new d_((0,H.Z)(function*(){let r;if(r=Zn(e).token?yield le(n,!0):yield le(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},dC.RETRIAL_MIN_WAIT,dC.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ji(n){return n.expireTimeMillis-Date.now()>0}function Cu(n){return{token:Y(q),error:n}}class mC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zn(this.app);for(const t of e)yt(this.app,t.next);return Promise.resolve()}}const IV="app-check-internal";!function YH(){Ui(new Er.wA("app-check",n=>function pk(n,e){return new mC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(IV).initialize()})),Ui(new Er.wA(IV,n=>function gk(n){return{getToken:e=>le(n,e),getLimitedUseToken:()=>function Ge(n){return rt.apply(this,arguments)}(n),addTokenListener:e=>function ye(n,e,t,r){const{app:i}=n,a=Zn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&ji(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),xt(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xt(n))}(n,"INTERNAL",e),removeTokenListener:e=>yt(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),vi("@firebase/app-check","0.8.0")}();class Yf{constructor(){return ec("app-check")}}typeof window<"u"&&window;var TV=k(6710);class wk{constructor(e){return e}}class xS{constructor(){return ec("auth")}}const Ck=new d.OlP("angularfire2.auth-instances");function nz(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new wk(r)}}const rz={provide:xS,deps:[[new d.FiY,Ck]]},iz={provide:wk,useFactory:function tz(n,e){const t=vu("auth",n,e);return t&&new wk(t)},deps:[[new d.FiY,Ck],Lo]};let sz=(()=>{class n{constructor(){(0,an.registerVersion)("angularfire",od.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[iz,rz]}),n})();function oz(n,...e){return{ngModule:sz,providers:[{provide:Ck,useFactory:nz(n),multi:!0,deps:[d.R0b,d.zs3,ko,wu,[new d.FiY,Yf],...e]}]}}const az=ca(TV.o,!0),SV="firebasestorage.googleapis.com",AV="storageBucket";class or extends $.ZR{constructor(e,t,r=0){super(Ek(e),`Firebase Storage: ${t} (${Ek(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,or.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ek(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Kn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Kn||{});function Ek(n){return"storage/"+n}function Ik(){return new or(Kn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function MV(){return new or(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xV(){return new or(Kn.CANCELED,"User canceled the upload/download.")}function PV(){return new or(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bk(n){return new or(Kn.INVALID_ARGUMENT,n)}function OV(){return new or(Kn.APP_DELETED,"The Firebase app was deleted.")}function _C(n,e){return new or(Kn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function yC(n){throw new or(Kn.INTERNAL_ERROR,"Internal error: "+n)}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch{return new rs(e,"")}if(""===r.path)return r;throw function _z(n){return new or(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),ke=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===SV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<ke.length;Ye++){const gt=ke[Ye],St=gt.regex.exec(e);if(St){let As=St[gt.indices.path];As||(As=""),r=new rs(St[gt.indices.bucket],As),gt.postModify(r);break}}if(null==r)throw function mz(n){return new or(Kn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Iz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PS(n){return"string"==typeof n||n instanceof String}function RV(n){return Tk()&&n instanceof Blob}function Tk(){return typeof Blob<"u"&&!(0,$.UG)()}function Dk(n,e,t,r){if(r<e)throw bk(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bk(`Invalid value for '${n}'. Expected ${t} or less.`)}function Eu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function NV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var p_=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(p_||{});function kV(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Mz{constructor(e,t,r,i,a,u,f,g,v,I,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=I,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,G)=>{this.resolve_=N,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function Dz(n){return void 0!==n}(g)?a():a(g)}catch(g){u(g)}else if(null!==f){const g=Ik();g.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,g):g)}else u(i.canceled?this.appDelete_?OV():xV():MV())};this.canceled_?t(0,new OS(!1,null,!0)):this.backoffId_=function bz(n,e,t){let r=1,i=null,a=null,u=!1,f=0;function g(){return 2===f}let v=!1;function I(...J){v||(v=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(N,g())},J)}function A(){a&&clearTimeout(a)}function N(J,...be){if(v)return void A();if(J)return A(),void I.call(null,J,...be);if(g()||u)return A(),void I.call(null,J,...be);let ke;r<64&&(r*=2),1===f?(f=2,ke=0):ke=1e3*(r+Math.random()),T(ke)}let G=!1;function Q(J){G||(G=!0,A(),!v&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),a=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new OS(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===p_.NO_ERROR,g=a.getStatus();if(!f||kV(g,this.additionalRetryCodes_)&&this.retry){const I=a.getErrorCode()===p_.ABORT;return void r(!1,new OS(!1,null,I))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new OS(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Tz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class OS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Fz(...n){const e=function kz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Tk())return new Blob(n);throw new or(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ua={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sk{constructor(e,t){this.data=e,this.contentType=t||null}}function LV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function UV(n,e){switch(n){case ua.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw _C(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ua.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw _C(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Uz(n){if(typeof atob>"u")throw function Cz(n){return new or(Kn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:_C(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class VV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw _C(ua.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function $z(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Iu{constructor(e,t){let r=0,i="";RV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(RV(this.data_)){const i=function Lz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Iu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Iu(r,!0)}}static getBlob(...e){if(Tk()){const t=e.map(r=>r instanceof Iu?r.data_:r);return new Iu(Fz.apply(null,t))}{const t=e.map(u=>PS(u)?function FV(n,e){switch(n){case ua.RAW:return new Sk(LV(e));case ua.BASE64:case ua.BASE64URL:return new Sk(UV(n,e));case ua.DATA_URL:return new Sk(function Bz(n){const e=new VV(n);return e.base64?UV(ua.BASE64,e.rest):function Vz(n){let e;try{e=decodeURIComponent(n)}catch{throw _C(ua.DATA_URL,"Malformed data URL.")}return LV(e)}(e.rest)}(e),function jz(n){return new VV(n).contentType}(e))}throw Ik()}(ua.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[a++]=u[f]}),new Iu(i,!0)}}uploadData(){return this.data_}}function Ak(n){let e;try{e=JSON.parse(n)}catch{return null}return function Az(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function BV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Gz(n,e){return e}class is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Gz}}let RS=null;function vC(){if(RS)return RS;const n=[];n.push(new is("bucket")),n.push(new is("generation")),n.push(new is("metageneration")),n.push(new is("name","fullPath",!0));const t=new is("name");t.xform=function e(a,u){return function Wz(n){return!PS(n)||n.length<2?n:BV(n)}(u)},n.push(t);const i=new is("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new is("timeCreated")),n.push(new is("updated")),n.push(new is("md5Hash",null,!0)),n.push(new is("cacheControl",null,!0)),n.push(new is("contentDisposition",null,!0)),n.push(new is("contentEncoding",null,!0)),n.push(new is("contentLanguage",null,!0)),n.push(new is("contentType",null,!0)),n.push(new is("metadata","customMetadata",!0)),RS=n,RS}function jV(n,e,t){const r=Ak(e);return null===r?null:function Zz(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function qz(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new rs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Mk(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class nc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rc(n){if(!n)throw Ik()}function NS(n,e){return function t(r,i){const a=jV(n,i,e);return rc(null!==a),a}}function g_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function pz(){return new or(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function fz(){return new or(Kn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function hz(n){return new or(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function gz(n){return new or(Kn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function wC(n){const e=g_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function dz(n){return new or(Kn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function WV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function xk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{rc(!1)}return rc(!!t&&-1!==(e||["active"]).indexOf(t)),t}function Pk(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class cG{constructor(e,t,r){if(function Sz(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function m_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let KV=null;class uG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=p_.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=p_.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=p_.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw yC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class lG extends uG{initXhr(){this.xhr_.responseType="text"}}function la(){return KV?KV():new lG}class gG{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=vC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Kn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(kV(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=MV()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Kn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sG(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=WV(e,r,i),f={name:u.fullPath},g=Eu(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=Mk(u,t),G=new nc(g,"POST",function N(Q){let J;xk(Q);try{J=Q.getResponseHeader("X-Goog-Upload-URL")}catch{rc(!1)}return rc(PS(J)),J},n.maxUploadRetryTime);return G.urlParams=f,G.headers=I,G.body=T,G.errorHandler=g_(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function oG(n,e,t,r){const g=new nc(t,"POST",function a(v){const I=xk(v,["active","final"]);let T=null;try{T=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{rc(!1)}T||rc(!1);const A=Number(T);return rc(!isNaN(A)),new kS(A,r.size(),"final"===I)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=g_(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,la,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function aG(n,e,t,r,i,a,u,f){const g=new kS(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function vz(){return new or(Kn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let I=v;i>0&&(I=Math.min(I,i));const T=g.current;let N="";N=0===I?"finalize":v===I?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${g.current}`},Q=r.slice(T,T+I);if(null===Q)throw PV();const ke=new nc(t,"POST",function J(Ye,gt){const St=xk(Ye,["active","final"]),Dr=g.current+I,As=r.size();let gy;return gy="final"===St?NS(e,a)(Ye,gt):null,new kS(Dr,As,"final"===St,gy)},e.maxUploadRetryTime);return ke.headers=G,ke.body=Q.uploadData(),ke.progressCallback=f||null,ke.errorHandler=g_(n),ke}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const f=this._ref.storage._makeRequest(u,la,i,a,!1);this._request=f,f.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=function zV(n,e,t){const i=Eu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new nc(i,"GET",NS(n,t),u);return f.errorHandler=wC(e),f}(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function qV(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function f(){let ke="";for(let Ye=0;Ye<2;Ye++)ke+=Math.random().toString().slice(2);return ke}();u["Content-Type"]="multipart/related; boundary="+g;const v=WV(e,r,i),I=Mk(v,t),N=Iu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===N)throw PV();const G={name:v.fullPath},Q=Eu(a,n.host,n._protocol),be=n.maxUploadRetryTime,ze=new nc(Q,"POST",NS(n,t),be);return ze.urlParams=G,ze.headers=u,ze.body=N.uploadData(),ze.errorHandler=g_(e),ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=xV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Pk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new cG(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Pk(this._state)){case"success":m_(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":m_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pk(this._state)){case"running":case"paused":e.next&&m_(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&m_(e.complete.bind(e))();break;default:e.error&&m_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Qf{constructor(e,t){this._service=e,this._location=t instanceof rs?t:rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qf(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BV(this._location.path)}get storage(){return this._service}get parent(){const e=function Hz(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rs(this._location.bucket,e);return new Qf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Ez(n){return new or(Kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function IG(n){n._throwIfRoot("getDownloadURL");const e=function tG(n,e,t){const i=Eu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new nc(i,"GET",function Xz(n,e){return function t(r,i){const a=jV(n,i,e);return rc(null!==a),function Kz(n,e,t,r){const i=Ak(e);if(null===i||!PS(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(v=>{const T=n.fullPath;return Eu("/b/"+u(n.bucket)+"/o/"+u(T),t,r)+NV({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=wC(e),f}(n.storage,n._location,vC());return n.storage.makeRequestWithTokens(e,la).then(t=>{if(null===t)throw function wz(){return new or(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function e5(n,e){if(n instanceof Rk){const t=n;if(null==t._bucket)throw function yz(){return new or(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AV+"' property when initializing the app?")}();const r=new Qf(t,t._bucket);return null!=e?e5(r,e):r}return void 0!==e?function XV(n,e){const t=function zz(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new rs(n._location.bucket,t);return new Qf(n.storage,r)}(n,e):n}function t5(n,e){const t=e?.[AV];return null==t?null:rs.makeFromBucketSpec(t,n)}class Rk{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=SV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rs.makeFromBucketSpec(i,this._host):t5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rs.makeFromBucketSpec(this._url,e):t5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,H.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,H.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qf(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Iz(OV());{const u=function Nz(n,e,t,r,i,a,u=!0){const f=NV(n.urlParams),g=n.url+f,v=Object.assign({},n.headers);return function Oz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function xz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Pz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function Rz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Mz(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,H.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const n5="@firebase/storage",i5="storage";function MG(n,e,t){return function yG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new gG(n,new Iu(e),t)}(n=(0,$.m9)(n),e,t)}function xG(n){return IG(n=(0,$.m9)(n))}function PG(n,e){return function SG(n,e){if(e&&function TG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Rk)return function DG(n,e){return new Qf(n,e)}(n,e);throw bk("To use ref(service, url), the first argument must be a Storage instance.")}return e5(n,e)}(n=(0,$.m9)(n),e)}function OG(n=TD(),e){const r=Zl(n=(0,$.m9)(n),i5).getImmediate({identifier:e}),i=(0,$.P0)("storage");return i&&function RG(n,e,t,r={}){!function AG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,$.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function NG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Rk(t,r,i,e,"10.5.0")}!function kG(){Ui(new Er.wA(i5,NG,"PUBLIC").setMultipleInstances(!0)),vi(n5,"0.11.2",""),vi(n5,"0.11.2","esm2017")}();class FS{constructor(e){return e}}const s5="storage",Nk=new d.OlP("angularfire2.storage-instances");function UG(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new FS(r)}}const VG={provide:class FG{constructor(){return ec(s5)}},deps:[[new d.FiY,Nk]]},BG={provide:FS,useFactory:function LG(n,e){const t=vu(s5,n,e);return t&&new FS(t)},deps:[[new d.FiY,Nk],Lo]};let jG=(()=>{class n{constructor(){(0,an.registerVersion)("angularfire",od.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[BG,VG]}),n})();function $G(n,...e){return{ngModule:jG,providers:[{provide:Nk,useFactory:UG(n),multi:!0,deps:[d.R0b,d.zs3,ko,wu,[new d.FiY,xS],[new d.FiY,Yf],...e]}]}}const HG=ca(xG,!0),zG=ca(OG,!0),GG=ca(PG,!0),WG=ca(MG,!0);function kk(){return(0,Gr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Mr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ke,qG=k(3997),da=k(6304),ZG=(k(8661),k(3399)),KG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ha={},Fk=Fk||{},At=KG||self;function LS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function CC(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lk="closure_uid_"+(1e9*Math.random()>>>0),QG=0;function JG(n,e,t){return n.call.apply(n.bind,arguments)}function XG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function $i(n,e,t){return($i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JG:XG).apply(null,arguments)}function US(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function ld(){this.s=this.s,this.o=this.o}ld.prototype.s=!1,ld.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function YG(n){Object.prototype.hasOwnProperty.call(n,Lk)&&n[Lk]||(n[Lk]=++QG)}(this)},ld.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const o5=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Uk(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function a5(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(LS(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hi.prototype.h=function(){this.defaultPrevented=!0};var tW=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",()=>{},e),At.removeEventListener("test",()=>{},e)}catch{}return n}();function EC(n){return/^[\s\xa0]*$/.test(n)}function VS(){var n=At.navigator;return n&&(n=n.userAgent)?n:""}function ic(n){return-1!=VS().indexOf(n)}function Vk(n){return Vk[" "](n),n}Vk[" "]=function(){};var jk,rW=ic("Opera"),__=ic("Trident")||ic("MSIE"),c5=ic("Edge"),Bk=c5||__,u5=ic("Gecko")&&!(-1!=VS().toLowerCase().indexOf("webkit")&&!ic("Edge"))&&!(ic("Trident")||ic("MSIE"))&&!ic("Edge"),iW=-1!=VS().toLowerCase().indexOf("webkit")&&!ic("Edge");function l5(){var n=At.document;return n?n.documentMode:void 0}e:{var $k="",Hk=function(){var n=VS();return u5?/rv:([^\);]+)(\)|;)/.exec(n):c5?/Edge\/([\d\.]+)/.exec(n):__?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iW?/WebKit\/(\S+)/.exec(n):rW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Hk&&($k=Hk?Hk[1]:""),__){var zk=l5();if(null!=zk&&zk>parseFloat($k)){jk=String(zk);break e}}jk=$k}var sW=At.document&&__&&(l5()||parseInt(jk,10))||void 0;function IC(n,e){if(Hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(u5){e:{try{Vk(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&IC.$.h.call(this)}}si(IC,Hi);var oW={2:"touch",3:"pen",4:"mouse"};IC.prototype.h=function(){IC.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bC="closure_listenable_"+(1e6*Math.random()|0),aW=0;function cW(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++aW,this.fa=this.ia=!1}function BS(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Wk(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function h5(n){const e={};for(const t in n)e[t]=n[t];return e}const f5="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function p5(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<f5.length;a++)t=f5[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jS(n){this.src=n,this.g={},this.h=0}function qk(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=o5(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(BS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Zk(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}jS.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=Zk(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new cW(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Kk="closure_lm_"+(1e6*Math.random()|0),Yk={};function g5(n,e,t,r,i){if(r&&r.once)return _5(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)g5(n,e[a],t,r,i);return null}return t=e2(t),n&&n[bC]?n.O(e,t,CC(r)?!!r.capture:!!r,i):m5(n,e,t,!1,r,i)}function m5(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=CC(i)?!!i.capture:!!i,f=Jk(n);if(f||(n[Kk]=f=new jS(n)),(t=f.add(e,t,r,u,a)).proxy)return t;if(r=function lW(){const e=dW;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tW||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(v5(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _5(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)_5(n,e[a],t,r,i);return null}return t=e2(t),n&&n[bC]?n.P(e,t,CC(r)?!!r.capture:!!r,i):m5(n,e,t,!0,r,i)}function y5(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)y5(n,e[a],t,r,i);else r=CC(r)?!!r.capture:!!r,t=e2(t),n&&n[bC]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Zk(a=n.g[e],t,r,i))&&(BS(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Jk(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Zk(e,t,r,i)),(t=-1<n?e[n]:null)&&Qk(t))}function Qk(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[bC])qk(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(v5(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Jk(e))?(qk(t,n),0==t.h&&(t.src=null,e[Kk]=null)):BS(n)}}}function v5(n){return n in Yk?Yk[n]:Yk[n]="on"+n}function dW(n,e){if(n.fa)n=!0;else{e=new IC(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Qk(n),n=t.call(r,e)}return n}function Jk(n){return(n=n[Kk])instanceof jS?n:null}var Xk="__closure_events_fn_"+(1e9*Math.random()>>>0);function e2(n){return"function"==typeof n?n:(n[Xk]||(n[Xk]=function(e){return n.handleEvent(e)}),n[Xk])}function oi(){ld.call(this),this.i=new jS(this),this.S=this,this.J=null}function Ei(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Hi(e,n);else if(e instanceof Hi)e.target=e.target||n;else{var i=e;p5(e=new Hi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=$S(u,r,!0,e)&&i}if(i=$S(u=e.g=n,r,!0,e)&&i,i=$S(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=$S(u=e.g=t[a],r,!1,e)&&i}function $S(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.fa&&u.capture==t){var f=u.listener,g=u.la||u.src;u.ia&&qk(n.i,u),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}si(oi,ld),oi.prototype[bC]=!0,oi.prototype.removeEventListener=function(n,e,t,r){y5(this,n,e,t,r)},oi.prototype.N=function(){if(oi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)BS(t[r]);delete n.g[e],n.h--}}this.J=null},oi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},oi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var t2=At.JSON.stringify;function fW(){var n=n2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var w5=new class hW{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gW,n=>n.reset());class gW{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mW(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function _W(n){At.setTimeout(()=>{throw n},0)}let TC,DC=!1,n2=new class pW{constructor(){this.h=this.g=null}add(e,t){const r=w5.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},C5=()=>{const n=At.Promise.resolve(void 0);TC=()=>{n.then(yW)}};var yW=()=>{for(var n;n=fW();){try{n.h.call(n.g)}catch(t){_W(t)}var e=w5;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}DC=!1};function HS(n,e){oi.call(this),this.h=n||1,this.g=e||At,this.j=$i(this.qb,this),this.l=Date.now()}function r2(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function i2(n,e,t){if("function"==typeof n)t&&(n=$i(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$i(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function E5(n){n.g=i2(()=>{n.g=null,n.i&&(n.i=!1,E5(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}si(HS,oi),(Ke=HS.prototype).ga=!1,Ke.T=null,Ke.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ei(this,"tick"),this.ga&&(r2(this),this.start()))}},Ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.N=function(){HS.$.N.call(this),r2(this),delete this.g};class vW extends ld{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:E5(this)}N(){super.N(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function SC(n){ld.call(this),this.h=n,this.g={}}si(SC,ld);var I5=[];function b5(n,e,t,r){Array.isArray(t)||(t&&(I5[0]=t.toString()),t=I5);for(var i=0;i<t.length;i++){var a=g5(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function T5(n){Wk(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qk(e)},n),n.g={}}function zS(){this.g=!0}function y_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function IW(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return t2(t)}catch{return e}}(n,t)+(r?" "+r:"")})}SC.prototype.N=function(){SC.$.N.call(this),T5(this)},SC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zS.prototype.Ea=function(){this.g=!1},zS.prototype.info=function(){};var Jf={},D5=null;function GS(){return D5=D5||new oi}function S5(n){Hi.call(this,Jf.Ta,n)}function AC(n){const e=GS();Ei(e,new S5(e))}function A5(n,e){Hi.call(this,Jf.STAT_EVENT,n),this.stat=e}function ss(n){const e=GS();Ei(e,new A5(e,n))}function M5(n,e){Hi.call(this,Jf.Ua,n),this.size=e}function MC(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Jf.Ta="serverreachability",si(S5,Hi),Jf.STAT_EVENT="statevent",si(A5,Hi),Jf.Ua="timingevent",si(M5,Hi);var WS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},x5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function s2(){}function O5(){}s2.prototype.h=null;var c2,xC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function o2(){Hi.call(this,"d")}function a2(){Hi.call(this,"c")}function qS(){}function PC(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new SC(this),this.P=bW,this.V=new HS(n=Bk?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new R5}function R5(){this.i=null,this.g="",this.h=!1}si(o2,Hi),si(a2,Hi),si(qS,s2),qS.prototype.g=function(){return new XMLHttpRequest},qS.prototype.i=function(){return{}},c2=new qS;var bW=45e3,u2={},ZS={};function l2(n,e,t){n.L=1,n.v=JS(bu(e)),n.s=t,n.S=!0,N5(n,null)}function N5(n,e){n.G=Date.now(),OC(n),n.A=bu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),z5(t.i,"t",r),n.C=0,t=n.l.J,n.h=new R5,n.g=p6(n.l,t?e:null,!n.s),0<n.O&&(n.M=new vW($i(n.Pa,n,n.g),n.O)),b5(n.U,n.g,"readystatechange",n.nb),e=n.I?h5(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),AC(),function wW(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",f=a.split("&"),g=0;g<f.length;g++){var v=f[g].split("=");if(1<v.length){var I=v[0];v=v[1];var T=I.split("_");u=2<=T.length&&"type"==T[1]?u+(I+"=")+v+"&":u+(I+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function k5(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function F5(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=TW(n,t),i==ZS){4==e&&(n.o=4,ss(14),r=!1),y_(n.j,n.m,null,"[Incomplete Response]");break}if(i==u2){n.o=4,ss(15),y_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}y_(n.j,n.m,i,null),d2(n,i)}k5(n)&&i!=ZS&&i!=u2&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ss(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),y2(e),e.M=!0,ss(11))):(y_(n.j,n.m,t,"[Invalid Chunked Response]"),Xf(n),RC(n))}function TW(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ZS:(t=Number(e.substring(t,r)),isNaN(t)?u2:(r+=1)+t>e.length?ZS:(e=e.slice(r,r+t),n.C=r+t,e))}function OC(n){n.Y=Date.now()+n.P,L5(n,n.P)}function L5(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=MC($i(n.lb,n),e)}function KS(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function RC(n){0==n.l.H||n.J||l6(n.l,n)}function Xf(n){KS(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,r2(n.V),T5(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function d2(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||h2(t.i,n)))if(!n.K&&h2(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;iA(t),nA(t)}_2(t),ss(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=MC($i(t.ib,t),6e3));if(1>=q5(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else tp(t,11)}else if((n.K||t.g==n)&&iA(t),!EC(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const I=v[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const T=v[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const A=v[5];null!=A&&"number"==typeof A&&0<A&&(t.L=r=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const G=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.i;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(f2(a,a.h),a.h=null))}if(r.F){const Q=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,jn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=f6(r,r.J?r.pa:null,r.Y),u.K){Z5(r.i,u);var f=u,g=r.L;g&&f.setTimeout(g),f.B&&(KS(f),OC(f)),r.g=u}else c6(r);0<t.j.length&&rA(t)}else"stop"!=v[0]&&"close"!=v[0]||tp(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?tp(t,7):m2(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}AC()}catch{}}function U5(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(LS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function SW(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(LS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DW(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(LS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ke=PC.prototype).setTimeout=function(n){this.P=n},Ke.nb=function(n){n=n.target;const e=this.M;e&&3==sc(n)?e.l():this.Pa(n)},Ke.Pa=function(n){try{if(n==this.g)e:{const I=sc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||Bk||this.g&&(this.h.h||this.g.ja()||n6(this.g)))){this.J||4!=I||7==e||AC(),KS(this);var t=this.g.da();this.ca=t;t:if(k5(this)){var r=n6(this.g);n="";var i=r.length,a=4==sc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xf(this),RC(this);var u="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function CW(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!EC(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ss(12),Xf(this),RC(this);break e}y_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,d2(this,t)}this.S?(F5(this,I,u),Bk&&this.i&&3==I&&(b5(this.U,this.V,"tick",this.mb),this.V.start())):(y_(this.j,this.m,u,null),d2(this,u)),4==I&&Xf(this),this.i&&!this.J&&(4==I?l6(this.l,this):(this.i=!1,OC(this)))}else(function GW(n){const e={};n=(n.g&&2<=sc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(EC(n[r]))continue;var t=mW(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function uW(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ss(12)):(this.o=0,ss(13)),Xf(this),RC(this)}}}catch{}},Ke.mb=function(){if(this.g){var n=sc(this.g),e=this.g.ja();this.C<e.length&&(KS(this),F5(this,n,e),this.i&&4!=n&&OC(this))}},Ke.cancel=function(){this.J=!0,Xf(this)},Ke.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function EW(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(AC(),ss(17)),Xf(this),this.o=2,RC(this)):L5(this,this.Y-n)};var V5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ep(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ep){this.h=n.h,YS(this,n.j),this.s=n.s,this.g=n.g,QS(this,n.m),this.l=n.l;var e=n.i,t=new FC;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),B5(this,t),this.o=n.o}else n&&(e=String(n).match(V5))?(this.h=!1,YS(this,e[1]||"",!0),this.s=NC(e[2]||""),this.g=NC(e[3]||"",!0),QS(this,e[4]),this.l=NC(e[5]||"",!0),B5(this,e[6]||"",!0),this.o=NC(e[7]||"")):(this.h=!1,this.i=new FC(null,this.h))}function bu(n){return new ep(n)}function YS(n,e,t){n.j=t?NC(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function QS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function B5(n,e,t){e instanceof FC?(n.i=e,function NW(n,e){e&&!n.j&&(dd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($5(this,r),z5(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=kC(e,OW)),n.i=new FC(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function JS(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function NC(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function kC(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,MW),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function MW(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ep.prototype.toString=function(){var n=[],e=this.j;e&&n.push(kC(e,j5,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(kC(e,j5,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(kC(t,"/"==t.charAt(0)?PW:xW,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",kC(t,RW)),n.join("")};var j5=/[#\/\?@]/g,xW=/[#\?:]/g,PW=/[#\?]/g,OW=/[#\?@]/g,RW=/#/g;function FC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function dd(n){n.g||(n.g=new Map,n.h=0,n.i&&function AW(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $5(n,e){dd(n),e=v_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function H5(n,e){return dd(n),e=v_(n,e),n.g.has(e)}function z5(n,e,t){$5(n,e),0<t.length&&(n.i=null,n.g.set(v_(n,e),Uk(t)),n.h+=t.length)}function v_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function G5(n){this.l=n||FW,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ka&&At.g.Ka()&&At.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=FC.prototype).add=function(n,e){dd(this),this.i=null,n=v_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){dd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ke.ta=function(){dd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ke.Z=function(n){dd(this);let e=[];if("string"==typeof n)H5(this,n)&&(e=e.concat(this.g.get(v_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ke.set=function(n,e){return dd(this),this.i=null,H5(this,n=v_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var FW=10;function W5(n){return!!n.h||!!n.g&&n.g.size>=n.j}function q5(n){return n.h?1:n.g?n.g.size:0}function h2(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function f2(n,e){n.g?n.g.add(e):n.h=e}function Z5(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function K5(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Uk(n.i)}G5.prototype.cancel=function(){if(this.i=K5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var LW=class{stringify(n){return At.JSON.stringify(n,void 0)}parse(n){return At.JSON.parse(n,void 0)}};function UW(){this.g=new LW}function VW(n,e,t){const r=t||"";try{U5(n,function(i,a){let u=i;CC(i)&&(u=t2(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function XS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function LC(n){this.l=n.fc||null,this.j=n.ob||!1}function eA(n,e){oi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=p2,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}si(LC,s2),LC.prototype.g=function(){return new eA(this.l,this.j)},LC.prototype.i=function(n){return function(){return n}}({}),si(eA,oi);var p2=0;function Y5(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function UC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,VC(n)}function VC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=eA.prototype).open=function(n,e){if(this.readyState!=p2)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,VC(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||At).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,UC(this)),this.readyState=p2},Ke.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,VC(this)),this.g&&(this.readyState=3,VC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Y5(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ke.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?UC(this):VC(this),3==this.readyState&&Y5(this)}},Ke.Za=function(n){this.g&&(this.response=this.responseText=n,UC(this))},Ke.Ya=function(n){this.g&&(this.response=n,UC(this))},Ke.ka=function(){this.g&&UC(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(eA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jW=At.JSON.parse;function dr(n){oi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Q5,this.L=this.M=!1}si(dr,oi);var Q5="",$W=/^https?$/i,HW=["POST","PUT"];function J5(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,X5(n),tA(n)}function X5(n){n.F||(n.F=!0,Ei(n,"complete"),Ei(n,"error"))}function e6(n){if(n.h&&typeof Fk<"u"&&(!n.C[1]||4!=sc(n)||2!=n.da()))if(n.v&&4==sc(n))i2(n.La,0,n);else if(Ei(n,"readystatechange"),4==sc(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(V5)[1]||null;!i&&At.self&&At.self.location&&(i=At.self.location.protocol.slice(0,-1)),r=!$W.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var a=2<sc(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",X5(n)}}finally{tA(n)}}}function tA(n,e){if(n.g){t6(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function t6(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function sc(n){return n.g?n.g.readyState:0}function n6(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Q5:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function r6(n){let e="";return Wk(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function g2(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=r6(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function BC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function i6(n){this.Ga=0,this.j=[],this.l=new zS,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=BC("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=BC("baseRetryDelayMs",5e3,n),this.hb=BC("retryDelaySeedMs",1e4,n),this.eb=BC("forwardChannelMaxRetries",2,n),this.xa=BC("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new G5(n&&n.concurrentRequestLimit),this.Ja=new UW,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function m2(n){if(s6(n),3==n.H){var e=n.W++,t=bu(n.I);if(jn(t,"SID",n.K),jn(t,"RID",e),jn(t,"TYPE","terminate"),jC(n,t),(e=new PC(n,n.l,e)).L=2,e.v=JS(bu(t)),t=!1,At.navigator&&At.navigator.sendBeacon)try{t=At.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=p6(e.l,null),e.g.ha(e.v)),e.G=Date.now(),OC(e)}h6(n)}function nA(n){n.g&&(y2(n),n.g.cancel(),n.g=null)}function s6(n){nA(n),n.u&&(At.clearTimeout(n.u),n.u=null),iA(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function rA(n){if(!W5(n.i)&&!n.m){n.m=!0;var e=n.Na;TC||C5(),DC||(TC(),DC=!0),n2.add(e,n),n.C=0}}function o6(n,e){var t;t=e?e.m:n.W++;const r=bu(n.I);jn(r,"SID",n.K),jn(r,"RID",t),jn(r,"AID",n.V),jC(n,r),n.o&&n.s&&g2(r,n.o,n.s),t=new PC(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=a6(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),f2(n.i,t),l2(t,r,e)}function jC(n,e){n.na&&Wk(n.na,function(t,r){jn(e,r,t)}),n.h&&U5({},function(t,r){jn(e,r,t)})}function a6(n,e,t){t=Math.min(n.j.length,t);var r=n.h?$i(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].g,u.push("ofs="+a)):a=0:u.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let v=i[g].g;const I=i[g].map;if(v-=a,0>v)a=Math.max(0,i[g].g-100),f=!1;else try{VW(I,u,"req"+v+"_")}catch{r&&r(I)}}if(f){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function c6(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;TC||C5(),DC||(TC(),DC=!0),n2.add(e,n),n.A=0}}function _2(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=MC($i(n.Ma,n),d6(n,n.A)),n.A++,0))}function y2(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function u6(n){n.g=new PC(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=bu(n.wa);jn(e,"RID","rpc"),jn(e,"SID",n.K),jn(e,"AID",n.V),jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&jn(e,"TO",n.qa),jn(e,"TYPE","xmlhttp"),jC(n,e),n.o&&n.s&&g2(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=JS(bu(e)),t.s=null,t.S=!0,N5(t,n)}function iA(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function l6(n,e){var t=null;if(n.g==e){iA(n),y2(n),n.g=null;var r=2}else{if(!h2(n.i,e))return;t=e.F,Z5(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ei(r=GS(),new M5(r,t)),rA(n)}else c6(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function WW(n,e){return!(q5(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=MC($i(n.Na,n,e),d6(n,n.C)),n.C++,0)))}(n,e)||2==r&&_2(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:tp(n,5);break;case 4:tp(n,10);break;case 3:tp(n,6);break;default:tp(n,2)}}function d6(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function tp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=$i(n.pb,n);t||(t=new ep("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||YS(t,"https"),JS(t)),function BW(n,e){const t=new zS;if(At.Image){const r=new Image;r.onload=US(XS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=US(XS,t,r,"TestLoadImage: error",!1,e),r.onabort=US(XS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=US(XS,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ss(2);n.H=0,n.h&&n.h.za(e),h6(n),s6(n)}function h6(n){if(n.H=0,n.ma=[],n.h){const e=K5(n.i);(0!=e.length||0!=n.j.length)&&(a5(n.ma,e),a5(n.ma,n.j),n.i.i.length=0,Uk(n.j),n.j.length=0),n.h.ya()}}function f6(n,e,t){var r=t instanceof ep?bu(t):new ep(t);if(""!=r.g)e&&(r.g=e+"."+r.g),QS(r,r.m);else{var i=At.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ep(null);r&&YS(a,r),e&&(a.g=e),i&&QS(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&jn(r,t,e),jn(r,"VER",n.ra),jC(n,r),r}function p6(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Ha&&!n.va?new LC({ob:!0}):n.va)).Oa(n.J),e}function g6(){}function sA(){if(__&&!(10<=Number(sW)))throw Error("Environmental error: no available transport.")}function eo(n,e){oi.call(this),this.g=new i6(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!EC(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!EC(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new w_(this)}function m6(n){o2.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _6(){a2.call(this),this.status=1}function w_(n){this.g=n}function fa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function v2(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],u=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;u=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(u<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((a=(e=t+((u=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=a+((u=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ke=dr.prototype).Oa=function(n){this.M=n},Ke.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():c2.g(),this.C=function P5(n){return n.h||(n.h=n.i())}(this.u?this.u:c2),this.g.onreadystatechange=$i(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void J5(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=At.FormData&&n instanceof At.FormData,!(0<=o5(HW,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{t6(this),0<this.B&&((this.L=function zW(n){return __&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$i(this.ua,this)):this.A=i2(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){J5(this,a)}},Ke.ua=function(){typeof Fk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),tA(this))},Ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tA(this,!0)),dr.$.N.call(this)},Ke.La=function(){this.s||(this.G||this.v||this.l?e6(this):this.kb())},Ke.kb=function(){e6(this)},Ke.isActive=function(){return!!this.g},Ke.da=function(){try{return 2<sc(this)?this.g.status:-1}catch{return-1}},Ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jW(e)}},Ke.Ia=function(){return this.m},Ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=i6.prototype).ra=8,Ke.H=1,Ke.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new PC(this,this.l,n);let a=this.s;if(this.U&&(a?(a=h5(a),p5(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=a6(this,i,e),jn(t=bu(this.I),"RID",n),jn(t,"CVER",22),this.F&&jn(t,"X-HTTP-Session-Id",this.F),jC(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(r6(a)))+"&"+e:this.o&&g2(t,this.o,a)),f2(this.i,i),this.bb&&jn(t,"TYPE","init"),this.P?(jn(t,"$req",e),jn(t,"SID","null"),i.aa=!0,l2(i,t,null)):l2(i,t,e),this.H=2}}else 3==this.H&&(n?o6(this,n):0==this.j.length||W5(this.i)||o6(this))},Ke.Ma=function(){if(this.u=null,u6(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=MC($i(this.jb,this),n)}},Ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ss(10),nA(this),u6(this))},Ke.ib=function(){null!=this.v&&(this.v=null,nA(this),_2(this),ss(19))},Ke.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ss(2)):(this.l.info("Failed to ping google.com"),ss(1))},Ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ke=g6.prototype).Ba=function(){},Ke.Aa=function(){},Ke.za=function(){},Ke.ya=function(){},Ke.isActive=function(){return!0},Ke.Va=function(){},sA.prototype.g=function(n,e){return new eo(n,e)},si(eo,oi),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ss(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=f6(n,null,n.Y),rA(n)},eo.prototype.close=function(){m2(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=t2(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&rA(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,m2(this.g),delete this.g,eo.$.N.call(this)},si(m6,o2),si(_6,a2),si(w_,g6),w_.prototype.Ba=function(){Ei(this.g,"a")},w_.prototype.Aa=function(n){Ei(this.g,new m6(n))},w_.prototype.za=function(n){Ei(this.g,new _6)},w_.prototype.ya=function(){Ei(this.g,"b")},si(fa,function qW(){this.blockSize=-1}),fa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)v2(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){v2(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){v2(this,r),i=0;break}}this.h=i,this.i+=e},fa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var ZW={};function w2(n){return-128<=n&&128>n?function nW(n,e){var t=ZW;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function oc(n){if(isNaN(n)||!isFinite(n))return C_;if(0>n)return Ii(oc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=C2;return new yn(e,0)}var C2=4294967296,C_=w2(0),E2=w2(1),v6=w2(16777216);function Tu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Uo(n){return-1==n.h}function Ii(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add(E2)}function oA(n,e){return n.add(Ii(e))}function aA(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function $C(n,e){this.g=n,this.h=e}function cA(n,e){if(Tu(e))throw Error("division by zero");if(Tu(n))return new $C(C_,C_);if(Uo(n))return e=cA(Ii(n),e),new $C(Ii(e.g),Ii(e.h));if(Uo(e))return e=cA(n,Ii(e)),new $C(Ii(e.g),e.h);if(30<n.g.length){if(Uo(n)||Uo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=E2,r=e;0>=r.X(n);)t=w6(t),r=w6(r);var i=E_(t,1),a=E_(r,1);for(r=E_(r,2),t=E_(t,2);!Tu(r);){var u=a.add(r);0>=u.X(n)&&(i=i.add(t),a=u),r=E_(r,1),t=E_(t,1)}return e=oA(n,i.R(e)),new $C(i,e)}for(i=C_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(a=oc(t)).R(e);Uo(u)||0<u.X(n);)u=(a=oc(t-=r)).R(e);Tu(a)&&(a=E2),i=i.add(a),n=oA(n,u)}return new $C(i,n)}function w6(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function E_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new yn(i,n.h)}(Ke=yn.prototype).ea=function(){if(Uo(this))return-Ii(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:C2+r)*e,e*=C2}return n},Ke.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Tu(this))return"0";if(Uo(this))return"-"+Ii(this).toString(n);for(var e=oc(Math.pow(n,6)),t=this,r="";;){var i=cA(t,e).g,a=((0<(t=oA(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Tu(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ke.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ke.X=function(n){return Uo(n=oA(this,n))?-1:Tu(n)?0:1},Ke.abs=function(){return Uo(this)?Ii(this):this},Ke.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),u=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(a&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},Ke.R=function(n){if(Tu(this)||Tu(n))return C_;if(Uo(this))return Uo(n)?Ii(this).R(Ii(n)):Ii(Ii(this).R(n));if(Uo(n))return Ii(this.R(Ii(n)));if(0>this.X(v6)&&0>n.X(v6))return oc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,u=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=u*g,aA(t,2*r+2*i),t[2*r+2*i+1]+=a*g,aA(t,2*r+2*i+1),t[2*r+2*i+1]+=u*f,aA(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,aA(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},Ke.gb=function(n){return cA(this,n).h},Ke.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},Ke.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},Ke.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},sA.prototype.createWebChannel=sA.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,WS.NO_ERROR=0,WS.TIMEOUT=8,WS.HTTP_ERROR=6,x5.COMPLETE="complete",O5.EventType=xC,xC.OPEN="a",xC.CLOSE="b",xC.ERROR="c",xC.MESSAGE="d",oi.prototype.listen=oi.prototype.O,dr.prototype.listenOnce=dr.prototype.P,dr.prototype.getLastError=dr.prototype.Sa,dr.prototype.getLastErrorCode=dr.prototype.Ia,dr.prototype.getStatus=dr.prototype.da,dr.prototype.getResponseJson=dr.prototype.Wa,dr.prototype.getResponseText=dr.prototype.ja,dr.prototype.send=dr.prototype.ha,dr.prototype.setWithCredentials=dr.prototype.Oa,fa.prototype.digest=fa.prototype.l,fa.prototype.reset=fa.prototype.reset,fa.prototype.update=fa.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=oc,yn.fromString=function y6(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ii(y6(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=oc(Math.pow(e,8)),r=C_,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+a),e);8>a?(a=oc(Math.pow(e,a)),r=r.R(a).add(oc(u))):r=(r=r.R(t)).add(oc(u))}return r};var KW=ha.createWebChannelTransport=function(){return new sA},YW=ha.getStatEventTarget=function(){return GS()},I2=ha.ErrorCode=WS,QW=ha.EventType=x5,JW=ha.Event=Jf,C6=ha.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XW=ha.FetchXmlHttpFactory=LC,uA=ha.WebChannel=O5,eq=ha.XhrIo=dr,tq=ha.Md5=fa,I_=ha.Integer=yn;const E6="@firebase/firestore";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let b_="9.23.0";const hd=new Li.Yd("@firebase/firestore");function b2(){return hd.logLevel}function xe(n,...e){if(hd.logLevel<=Li.in.DEBUG){const t=e.map(T2);hd.debug(`Firestore (${b_}): ${n}`,...t)}}function Ir(n,...e){if(hd.logLevel<=Li.in.ERROR){const t=e.map(T2);hd.error(`Firestore (${b_}): ${n}`,...t)}}function Vo(n,...e){if(hd.logLevel<=Li.in.WARN){const t=e.map(T2);hd.warn(`Firestore (${b_}): ${n}`,...t)}}function T2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${b_}) INTERNAL ASSERTION FAILED: `+n;throw Ir(e),new Error(e)}function ct(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends $.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class I6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ai.UNAUTHENTICATED))}shutdown(){}}class sq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oq{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,H.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new I6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new ai(e)}}class aq{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cq{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new aq(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uq{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.T;return this.T=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new b6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class T6{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=lq(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Dt(n,e){return n<e?-1:n>e?1:0}function T_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function D6(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Yn(0,0))}static max(){return new ut(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class HC{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===HC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof HC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends HC{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const dq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends HC{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return dq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ie(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ie(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ie(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(a(),i++)}if(a(),u)throw new Ie(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Qt.fromString(e))}static fromName(e){return new We(Qt.fromString(e).popFirst(5))}static empty(){return new We(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Qt(e.slice()))}}class lA{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function D2(n){return n.fields.find(e=>2===e.kind)}function np(n){return n.fields.filter(e=>2!==e.kind)}lA.UNKNOWN_ID=-1;class dA{constructor(e,t){this.fieldPath=e,this.kind=t}}class zC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zC(0,to.min())}}function S6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new to(i,We.empty(),e)}function A6(n){return new to(n.readTime,n.key,-1)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(ut.min(),We.empty(),-1)}static max(){return new to(ut.max(),We.empty(),-1)}}function S2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Dt(n.largestBatchId,e.largestBatchId))}const M6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fd(n){return A2.apply(this,arguments)}function A2(){return A2=(0,H.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==M6)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),A2.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,a=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++a,u&&a===i&&t()},g=>r(g))}),u=!0,a===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const a=e.length,u=new Array(a);let f=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(I=>{u[v]=I,++f,f===a&&r(u)},I=>i(I))}})}static doWhile(e,t){return new ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class hA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Qr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new GC(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=M2(r.target.error);this.v.reject(new GC(e,i))}}static open(e,t,r,i){try{return new hA(t,e.transaction(i,r))}catch(a){throw new GC(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gq(t)}}class pa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===pa.S((0,$.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),rp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,$.hl)())return!1;if(pa.C())return!0;const e=(0,$.z$)(),t=pa.S(e),r=0<t&&t<10,i=pa.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,H.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new GC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Ie(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ie(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new GC(e,f))},a.onupgradeneeded=u=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,H.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const g=hA.open(a.db,e,u?"readonly":"readwrite",r),v=i(g).next(I=>(g.P(),I)).catch(I=>(g.abort(I),ne.reject(I))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,I="FirebaseError"!==v.name&&f<3;if(xe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),a.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pq{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return rp(this.L.delete())}}class GC extends Ie{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pd(n){return"IndexedDbTransactionError"===n.name}class gq{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rp(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),rp(this.store.add(e))}get(e){return rp(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),rp(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),rp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(u,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ne((a,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,u,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=a=>{const u=M2(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const g=new pq(f),v=t(f.primaryKey,f.value,g);if(v instanceof ne){const I=v.catch(T=>(g.done(),ne.reject(T)));r.push(I)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rp(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=M2(r.target.error);t(i)}})}let P6=!1;function M2(n){const e=pa.S((0,$.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return P6||(P6=!0,setTimeout(()=>{throw r},0)),r}}return n}class mq{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,H.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){pd(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fd(r)}yield t.et(6e4)}))}}class _q{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,H.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return xe("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,a)).next(f=>(xe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=A6(a);S2(u,r)>0&&(r=u)}),new to(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let no=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function WC(n){return null==n}function qC(n){return 0===n&&1/n==-1/0}function O6(n){return"number"==typeof n&&Number.isInteger(n)&&!qC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function zi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R6(e)),e=yq(n.get(t),e);return R6(e)}function yq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function R6(n){return n+"\x01\x01"}function ac(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&et(),n.charAt(u+1)){case"\x01":const f=n.substring(a,u);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:et()}a=u+2}return new Qt(r)}const N6=["userId","batchId"];function fA(n,e){return[n,zi(e)]}function k6(n,e,t){return[n,zi(e),t]}const vq={},wq=["prefixPath","collectionGroup","readTime","documentId"],Cq=["prefixPath","collectionGroup","documentId"],Eq=["collectionGroup","readTime","prefixPath","documentId"],Iq=["canonicalId","targetId"],bq=["targetId","path"],Tq=["path","targetId"],Dq=["collectionId","parent"],Sq=["indexId","uid"],Aq=["uid","sequenceNumber"],Mq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xq=["indexId","uid","orderedDocumentKey"],Pq=["userId","collectionPath","documentId"],Oq=["userId","collectionPath","largestBatchId"],Rq=["userId","collectionGroup","largestBatchId"],F6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nq=[...F6,"documentOverlays"],L6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],U6=L6,kq=[...U6,"indexConfiguration","indexState","indexEntries"];class x2 extends x6{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ci(n,e){const t=qe(n);return pa.M(t.ht,e)}function V6(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class On{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pA(this.root,e,this.comparator,!1)}getReverseIterator(){return new pA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pA(this.root,e,this.comparator,!0)}}class pA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??bi.RED,this.left=i??bi.EMPTY,this.right=a??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new bi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new j6(this.data.getIterator())}getIteratorFrom(e){return new j6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class j6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function D_(n){return n.hasNext()?n.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new $n(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return T_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $6("Invalid base64 string: "+i):i}}(e);return new Jr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const Lq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function md(n){if(ct(!!n),"string"==typeof n){let e=0;const t=Lq.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Du(n){return"string"==typeof n?Jr.fromBase64String(n):Jr.fromUint8Array(n)}function gA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mA(n){const e=n.mapValue.fields.__previous_value__;return gA(e)?mA(e):e}function ZC(n){const e=md(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class Uq{constructor(e,t,r,i,a,u,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class _d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _d("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}const yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_A={nullValue:"NULL_VALUE"};function vd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gA(n)?4:W6(n)?9007199254740991:10:et()}function cc(n,e){if(n===e)return!0;const t=vd(n);if(t!==vd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ZC(n).isEqual(ZC(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=md(r.timestampValue),u=md(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Du(n.bytesValue).isEqual(Du(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),u=fr(i.doubleValue);return a===u?qC(a)===qC(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return T_(n.arrayValue.values||[],e.arrayValue.values||[],cc);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(V6(a)!==V6(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===u[f]||!cc(a[f],u[f])))return!1;return!0}(n,e);default:return et()}var i}function KC(n,e){return void 0!==(n.values||[]).find(t=>cc(t,e))}function wd(n,e){if(n===e)return 0;const t=vd(n),r=vd(e);if(t!==r)return Dt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=fr(i.integerValue||i.doubleValue),f=fr(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return H6(n.timestampValue,e.timestampValue);case 4:return H6(ZC(n),ZC(e));case 5:return Dt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Du(i),f=Du(a);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),f=a.split("/");for(let g=0;g<u.length&&g<f.length;g++){const v=Dt(u[g],f[g]);if(0!==v)return v}return Dt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Dt(fr(i.latitude),fr(a.latitude));return 0!==u?u:Dt(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],f=a.values||[];for(let g=0;g<u.length&&g<f.length;++g){const v=wd(u[g],f[g]);if(v)return v}return Dt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===yd.mapValue&&a===yd.mapValue)return 0;if(i===yd.mapValue)return 1;if(a===yd.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),g=a.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let I=0;I<f.length&&I<v.length;++I){const T=Dt(f[I],v[I]);if(0!==T)return T;const A=wd(u[f[I]],g[v[I]]);if(0!==A)return A}return Dt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et()}}function H6(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Dt(n,e);const t=md(n),r=md(e),i=Dt(t.seconds,r.seconds);return 0!==i?i:Dt(t.nanos,r.nanos)}function S_(n){return P2(n)}function P2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=md(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Du(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=P2(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const f of i)u?u=!1:a+=",",a+=`${f}:${P2(r.fields[f])}`;return a+"}"}(n.mapValue):et();var e}function ip(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O2(n){return!!n&&"integerValue"in n}function YC(n){return!!n&&"arrayValue"in n}function z6(n){return!!n&&"nullValue"in n}function G6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vA(n){return!!n&&"mapValue"in n}function QC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=QC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=QC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function W6(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vq(n){return"nullValue"in n?_A:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ip(_d.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function Bq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ip(_d.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yd:et()}function q6(n,e){const t=wd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Z6(n,e){const t=wd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=QC(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=QC(u):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());vA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gd(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ti(QC(this.value))}}function K6(n){const e=[];return gd(n.fields,(t,r)=>{const i=new hr([t]);if(vA(r)){const a=K6(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ts(e)}class Hn{constructor(e,t,r,i,a,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Hn(e,0,ut.min(),ut.min(),ut.min(),Ti.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,ut.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,ut.min(),ut.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,ut.min(),ut.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cd{constructor(e,t){this.position=e,this.inclusive=t}}function Y6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(u.referenceValue),t.key):wd(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Q6(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cc(n.position[t],e.position[t]))return!1;return!0}class A_{constructor(e,t="asc"){this.field=e,this.dir=t}}function jq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class J6{}class Kt extends J6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new $q(e,t,r):"array-contains"===t?new Gq(e,r):"in"===t?new iB(e,r):"not-in"===t?new Wq(e,r):"array-contains-any"===t?new qq(e,r):new Kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Hq(e,r):new zq(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wd(t,this.value)):null!==t&&vd(this.value)===vd(t)&&this.matchesComparison(wd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends J6{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vn(e,t)}matches(e){return M_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function M_(n){return"and"===n.op}function R2(n){return"or"===n.op}function N2(n){return X6(n)&&M_(n)}function X6(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function k2(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+S_(n.value);if(N2(n))return n.filters.map(e=>k2(e)).join(",");{const e=n.filters.map(t=>k2(t)).join(",");return`${n.op}(${e})`}}function eB(n,e){return n instanceof Kt?(t=n,(r=e)instanceof Kt&&t.op===r.op&&t.field.isEqual(r.field)&&cc(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,u)=>i&&eB(a,r.filters[u]),!0)}(n,e):void et();var t,r}function tB(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function nB(n){return n instanceof Kt?`${(e=n).field.canonicalString()} ${e.op} ${S_(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(nB).join(" ,")+"}"}(n):"Filter";var e}class $q extends Kt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hq extends Kt{constructor(e,t){super(e,"in",t),this.keys=rB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zq extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=rB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class Gq extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return YC(t)&&KC(t.arrayValue,this.value)}}class iB extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&KC(this.value.arrayValue,t)}}class Wq extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(KC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!KC(this.value.arrayValue,t)}}class qq extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!YC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>KC(this.value.arrayValue,r))}}class Zq{constructor(e,t=null,r=[],i=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=f,this.dt=null}}function F2(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Zq(n,e,t,r,i,a,u)}function sp(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>k2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),WC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>S_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>S_(r)).join(",")),e.dt=t}return e.dt}function JC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Q6(n.startAt,e.startAt)&&Q6(n.endAt,e.endAt)}function wA(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function CA(n,e){return n.filters.filter(t=>t instanceof Kt&&t.field.isEqual(e))}function sB(n,e,t){let r=_A,i=!0;for(const a of CA(n,e)){let u=_A,f=!0;switch(a.op){case"<":case"<=":u=Vq(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,f=!1;break;case"!=":case"not-in":u=_A}q6({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];q6({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function oB(n,e,t){let r=yd,i=!0;for(const a of CA(n,e)){let u=yd,f=!0;switch(a.op){case">=":case">":u=Bq(a.value),f=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,f=!1;break;case"!=":case"not-in":u=yd}Z6({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Z6({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Su{constructor(e,t=null,r=[],i=[],a=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function aB(n,e,t,r,i,a,u,f){return new Su(n,e,t,r,i,a,u,f)}function x_(n){return new Su(n)}function cB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function L2(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function EA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function U2(n){return null!==n.collectionGroup}function op(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=EA(e),r=L2(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new A_(t)),e.wt.push(new A_(hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new A_(hr.keyField(),a))}}}return e.wt}function os(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=F2(e.path,e.collectionGroup,op(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of op(e))t.push(new A_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Cd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Cd(e.startAt.position,e.startAt.inclusive):null;e._t=F2(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function V2(n,e){e.getFirstInequalityField(),EA(n);const t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IA(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function XC(n,e){return JC(os(n),os(e))&&n.limitType===e.limitType}function uB(n){return`${sp(os(n))}|lt:${n.limitType}`}function B2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>nB(r)).join(", ")}]`),WC(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>S_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>S_(r)).join(",")),`Target(${t})`}(os(n))}; limitType=${n.limitType})`}function eE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of op(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const f=Y6(i,a,u);return i.inclusive?f<=0:f<0}(t.startAt,op(t),r)||t.endAt&&!function(i,a,u){const f=Y6(i,a,u);return i.inclusive?f>=0:f>0}(t.endAt,op(t),r)));var t,r}function lB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dB(n){return(e,t)=>{let r=!1;for(const i of op(n)){const a=Kq(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Kq(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,u){const f=a.data.field(i),g=u.data.field(i);return null!==f&&null!==g?wd(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Au{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gd(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return B6(this.inner)}size(){return this.innerSize}}const Yq=new On(We.comparator);function Ds(){return Yq}const hB=new On(We.comparator);function tE(...n){let e=hB;for(const t of n)e=e.insert(t.key,t);return e}function fB(n){let e=hB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function uc(){return nE()}function pB(){return nE()}function nE(){return new Au(n=>n.toString(),(n,e)=>n.isEqual(e))}const Qq=new On(We.comparator),Jq=new $n(We.comparator);function Rt(...n){let e=Jq;for(const t of n)e=e.add(t);return e}const Xq=new $n(Dt);function j2(){return Xq}function gB(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qC(e)?"-0":e}}function mB(n){return{integerValue:""+n}}function _B(n,e){return O6(e)?mB(e):gB(n,e)}class bA{constructor(){this._=void 0}}function eZ(n,e,t){return n instanceof P_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&gA(i)&&(i=mA(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ap?vB(n,e):n instanceof cp?wB(n,e):function(r,i){const a=yB(r,i),u=CB(a)+CB(r.gt);return O2(a)&&O2(r.gt)?mB(u):gB(r.serializer,u)}(n,e)}function tZ(n,e,t){return n instanceof ap?vB(n,e):n instanceof cp?wB(n,e):t}function yB(n,e){return n instanceof O_?O2(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class P_ extends bA{}class ap extends bA{constructor(e){super(),this.elements=e}}function vB(n,e){const t=EB(e);for(const r of n.elements)t.some(i=>cc(i,r))||t.push(r);return{arrayValue:{values:t}}}class cp extends bA{constructor(e){super(),this.elements=e}}function wB(n,e){let t=EB(e);for(const r of n.elements)t=t.filter(i=>!cc(i,r));return{arrayValue:{values:t}}}class O_ extends bA{constructor(e,t){super(),this.serializer=e,this.gt=t}}function CB(n){return fr(n.integerValue||n.doubleValue)}function EB(n){return YC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rE{constructor(e,t){this.field=e,this.transform=t}}class rZ{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function TA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class DA{}function IB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new N_(n.key,Qn.none()):new R_(n.key,n.data,Qn.none());{const t=n.data,r=Ti.empty();let i=new $n(hr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new Mu(n.key,r,new Ts(i.toArray()),Qn.none())}}function iZ(n,e,t){n instanceof R_?function(r,i,a){const u=r.value.clone(),f=DB(r.fieldTransforms,i,a.transformResults);u.setAll(f),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Mu?function(r,i,a){if(!TA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=DB(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(TB(r)),f.setAll(u),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function iE(n,e,t,r){return n instanceof R_?function(i,a,u,f){if(!TA(i.precondition,a))return u;const g=i.value.clone(),v=SB(i.fieldTransforms,f,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mu?function(i,a,u,f){if(!TA(i.precondition,a))return u;const g=SB(i.fieldTransforms,f,a),v=a.data;return v.setAll(TB(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,TA(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function sZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=yB(r.transform,i||null);null!=a&&(null===t&&(t=Ti.empty()),t.set(r.field,a))}return t||null}function bB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&T_(t,r,(i,a)=>function nZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ap&&r instanceof ap||t instanceof cp&&r instanceof cp?T_(t.elements,r.elements,cc):t instanceof O_&&r instanceof O_?cc(t.gt,r.gt):t instanceof P_&&r instanceof P_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class R_ extends DA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mu extends DA{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function TB(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DB(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,f=e.data.field(a.field);r.set(a.field,tZ(u,f,t[i]))}return r}function SB(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,eZ(a,u,e))}return r}class N_ extends DA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends DA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class H2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&iZ(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=iE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=iE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pB();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(i.key)?null:f;const g=IB(u,f);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rt())}isEqual(e){return this.batchId===e.batchId&&T_(this.mutations,e.mutations,(t,r)=>bB(t,r))&&T_(this.baseMutations,e.baseMutations,(t,r)=>bB(t,r))}}class z2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=Qq;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new z2(e,t,r,i)}}class G2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rr,Jt;function AB(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function MB(n){if(void 0===n)return Ir("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Rr.OK:return ae.OK;case Rr.CANCELLED:return ae.CANCELLED;case Rr.UNKNOWN:return ae.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return ae.INTERNAL;case Rr.UNAVAILABLE:return ae.UNAVAILABLE;case Rr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Rr.NOT_FOUND:return ae.NOT_FOUND;case Rr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Rr.ABORTED:return ae.ABORTED;case Rr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Rr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Jt=Rr||(Rr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class W2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return SA}static getOrCreateInstance(){return null===SA&&(SA=new W2),SA}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let SA=null;function xB(){return new TextEncoder}const cZ=new I_([4294967295,4294967295],0);function PB(n){const e=xB().encode(n),t=new tq;return t.update(e),new Uint8Array(t.digest())}function OB(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new I_([t,r],0),new I_([i,a],0)]}class q2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sE(`Invalid padding: ${t}`);if(r<0)throw new sE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new sE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new sE(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=I_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(I_.fromNumber(r)));return 1===i.compare(cZ)&&(i=new I_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=PB(e),[r,i]=OB(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new q2(a,i,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(0===this.It)return;const t=PB(e),[r,i]=OB(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class sE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,aE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new oE(ut.min(),i,new On(Dt),Ds(),Rt())}}class aE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new aE(r,t,Rt(),Rt(),Rt())}}class AA{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class RB{constructor(e,t){this.targetId=e,this.Vt=t}}class NB{constructor(e,t,r=Jr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kB{constructor(){this.St=0,this.Dt=LB(),this.Ct=Jr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Rt(),t=Rt(),r=Rt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new aE(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=LB()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class uZ{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ds(),this.zt=FB(),this.Wt=new On(Dt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const u=a.target;if(wA(u))if(0===i){const f=new We(u.path);this.Yt(r,f,Hn.newNoDocument(f,ut.min()))}else ct(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=W2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,I,T){var A,N,G,Q,J,be;const ze={localCacheCount:I,existenceFilterCount:T.count},ke=T.unchangedNames;return ke&&(ze.bloomFilter={applied:0===v,hashCount:null!==(A=ke?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Q=null===(G=null===(N=ke?.bits)||void 0===N?void 0:N.bitmap)||void 0===G?void 0:G.length)&&void 0!==Q?Q:0,padding:null!==(be=null===(J=ke?.bits)||void 0===J?void 0:J.padding)&&void 0!==be?be:0}),ze}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:u=0},hashCount:f=0}=r;let g,v;try{g=Du(a).toUint8Array()}catch(I){if(I instanceof $6)return Vo("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw I}try{v=new q2(g,u,f)}catch(I){return Vo(I instanceof sE?"BloomFilter error: ":"Applying bloom filter failed: ",I),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const u=this.Gt.ue(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,u)=>{const f=this.se(u);if(f){if(a.current&&wA(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(u,g)||this.Yt(u,g,Hn.newNoDocument(g,e))}a.Mt&&(t.set(u,a.Ot()),a.Ft())}});let r=Rt();this.zt.forEach((a,u)=>{let f=!0;u.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,u)=>u.setReadTime(e));const i=new oE(e,t,this.Wt,this.jt,r);return this.jt=Ds(),this.zt=FB(),this.Wt=new On(Dt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new kB,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new $n(Dt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new kB),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function FB(){return new On(We.comparator)}function LB(){return new On(We.comparator)}const lZ={asc:"ASCENDING",desc:"DESCENDING"},dZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hZ={and:"AND",or:"OR"};class fZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Z2(n,e){return n.useProto3Json||WC(e)?e:{value:e}}function k_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pZ(n,e){return k_(n,e.toTimestamp())}function br(n){return ct(!!n),ut.fromTimestamp(function(e){const t=md(e);return new Yn(t.seconds,t.nanos)}(n))}function K2(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function VB(n){const e=Qt.fromString(n);return ct(ZB(e)),e}function cE(n,e){return K2(n.databaseId,e.path)}function lc(n,e){const t=VB(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(jB(t))}function Y2(n,e){return K2(n.databaseId,e)}function BB(n){const e=VB(n);return 4===e.length?Qt.emptyPath():jB(e)}function uE(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jB(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $B(n,e,t){return{name:cE(n,e),fields:t.value.mapValue.fields}}function HB(n,e,t){const r=lc(n,e.name),i=br(e.updateTime),a=e.createTime?br(e.createTime):ut.min(),u=new Ti({mapValue:{fields:e.fields}}),f=Hn.newFoundDocument(r,i,a,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function lE(n,e){let t;if(e instanceof R_)t={update:$B(n,e.key,e.value)};else if(e instanceof N_)t={delete:cE(n,e.key)};else if(e instanceof Mu)t={update:$B(n,e.key,e.data),updateMask:EZ(e.fieldMask)};else{if(!(e instanceof $2))return et();t={verify:cE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof P_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ap)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof cp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof O_)return{fieldPath:a.field.canonicalString(),increment:u.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:pZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function Q2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Qn.updateTime(br(i.updateTime)):void 0!==i.exists?Qn.exists(i.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let f=null;"setToServerValue"in u?(ct("REQUEST_TIME"===u.setToServerValue),f=new P_):"appendMissingElements"in u?f=new ap(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new cp(u.removeAllFromArray.values||[]):"increment"in u?f=new O_(a,u.increment):et();const g=hr.fromServerFormat(u.fieldPath);return new rE(g,f)}(n,i)):[];var i;if(e.update){const i=lc(n,e.update.name),a=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ts((e.updateMask.fieldPaths||[]).map(v=>hr.fromServerFormat(v)));return new Mu(i,a,u,t,r)}return new R_(i,a,t,r)}if(e.delete){const i=lc(n,e.delete);return new N_(i,t)}if(e.verify){const i=lc(n,e.verify);return new $2(i,t)}return et()}function zB(n,e){return{documents:[Y2(n,e.path)]}}function J2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Y2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Y2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return qB(vn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:Ed((I=v).field),direction:vZ(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=Z2(n,e.limit);var f,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function GB(n){let e=BB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=function(I){const T=WB(I);return T instanceof vn&&N2(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new A_(F_((T=I).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(I){let T;return T="object"==typeof I?I.value:I,WC(T)?null:T}(t.limit));let g=null;var I;t.startAt&&(g=new Cd((I=t.startAt).values||[],!!I.before));let v=null;return t.endAt&&(v=function(I){return new Cd(I.values||[],!I.before)}(t.endAt)),aB(e,i,u,a,f,"F",g,v)}function WB(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=F_(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=F_(e.unaryFilter.field);return Kt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=F_(e.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=F_(e.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Kt.create(F_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>WB(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function vZ(n){return lZ[n]}function wZ(n){return dZ[n]}function CZ(n){return hZ[n]}function Ed(n){return{fieldPath:n.canonicalString()}}function F_(n){return hr.fromServerFormat(n.fieldPath)}function qB(n){return n instanceof Kt?function(e){if("=="===e.op){if(G6(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NAN"}};if(z6(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(G6(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NAN"}};if(z6(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(e.field),op:wZ(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>qB(r));return 1===t.length?t[0]:{compositeFilter:{op:CZ(e.op),filters:t}}}(n):et()}function EZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class xu{constructor(e,t,r,i,a=ut.min(),u=ut.min(),f=Jr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class KB{constructor(e){this.fe=e}}function YB(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:MA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cE(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:k_(i,a.version.toTimestamp()),createTime:k_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:up(e.version)}}var i,a;return r}function MA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lp(n){const e=new Yn(n.seconds,n.nanoseconds);return ut.fromTimestamp(e)}function dp(n,e){const t=(e.baseMutations||[]).map(a=>Q2(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Q2(n.fe,a)),i=Yn.fromMillis(e.localWriteTimeMs);return new H2(e.batchId,i,t,r)}function dE(n){const e=lp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lp(n.lastLimboFreeSnapshotVersion):ut.min();let r;var i;return void 0!==n.query.documents?(ct(1===(i=n.query).documents.length),r=os(x_(BB(i.documents[0])))):r=os(GB(n.query)),new xu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Jr.fromBase64String(n.resumeToken))}function QB(n,e){const t=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let i;i=wA(e.target)?zB(n.fe,e.target):J2(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function X2(n){const e=GB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?IA(e,e.limit,"L"):e}function eF(n,e){return new G2(e.largestBatchId,Q2(n.fe,e.overlayMutation))}function JB(n,e){const t=e.path.lastSegment();return[n,zi(e.path.popLast()),t]}function XB(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:up(r.readTime),documentKey:zi(r.documentKey.path),largestBatchId:r.largestBatchId}}class bZ{getBundleMetadata(e,t){return ej(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:lp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return ej(e).put({bundleId:(r=t).id,createTime:up(br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:X2(i.bundledQuery),readTime:lp(i.readTime)};var i})}saveNamedQuery(e,t){return tj(e).put({name:(r=t).name,readTime:up(br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ej(n){return ci(n,"bundles")}function tj(n){return ci(n,"namedQueries")}class xA{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new xA(e,t.uid||"")}getOverlay(e,t){return hE(e).get(JB(this.userId,t)).next(r=>r?eF(this.serializer,r):null)}getOverlays(e,t){const r=uc();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const f=new G2(t,u);i.push(this.we(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(zi(u.getCollectionPath())));const a=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(hE(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=uc(),a=zi(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return hE(e).j("collectionPathOverlayIndex",u).next(f=>{for(const g of f){const v=eF(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=uc();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hE(e).X({index:"collectionGroupOverlayIndex",range:f},(g,v,I)=>{const T=eF(this.serializer,v);a.size()<i||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):I.done()}).next(()=>a)}we(e,t){return hE(e).put(function(r,i,a){const[u,f,g]=JB(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:lE(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function hE(n){return ci(n,"documentOverlays")}class hp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),qC(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Du(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?W6(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function TZ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nj(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=TZ(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}hp.Ve=new hp;class DZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=nj(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=nj(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class SZ{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class AZ{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class fE{constructor(){this.je=new DZ,this.ze=new SZ(this.je),this.We=new AZ(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fp(this.indexId,this.documentKey,this.arrayValue,r)}}function Id(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=rj(n.arrayValue,e.arrayValue),0!==t?t:(t=rj(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function rj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class MZ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=D2(e);if(void 0!==t&&!this.en(t))return!1;const r=np(e);let i=new Set,a=0,u=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[u++],f))return!1}++a}for(;a<r.length;++a)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ij(n){var e,t;if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt){if(n instanceof iB){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Kt.create(n.field,"==",a)))||[];return vn.create(i,"or")}return n}const r=n.filters.map(i=>ij(i));return vn.create(r,n.op)}function xZ(n){if(0===n.getFilters().length)return[];const e=rF(ij(n));return ct(sj(e)),tF(e)||nF(e)?[e]:e.getFilters()}function tF(n){return n instanceof Kt}function nF(n){return n instanceof vn&&N2(n)}function sj(n){return tF(n)||nF(n)||function(e){if(e instanceof vn&&R2(e)){for(const t of e.getFilters())if(!tF(t)&&!nF(t))return!1;return!0}return!1}(n)}function rF(n){if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;if(1===n.filters.length)return rF(n.filters[0]);const e=n.filters.map(r=>rF(r));let t=vn.create(e,n.op);return t=PA(t),sj(t)?t:(ct(t instanceof vn),ct(M_(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>iF(r,i)))}function iF(n,e){let t;return ct(n instanceof Kt||n instanceof vn),ct(e instanceof Kt||e instanceof vn),t=n instanceof Kt?e instanceof Kt?vn.create([n,e],"and"):oj(n,e):e instanceof Kt?oj(e,n):function(r,i){if(ct(r.filters.length>0&&i.filters.length>0),M_(r)&&M_(i))return tB(r,i.getFilters());const a=R2(r)?r:i,u=R2(r)?i:r,f=a.filters.map(g=>iF(g,u));return vn.create(f,"or")}(n,e),PA(t)}function oj(n,e){if(M_(e))return tB(e,n.getFilters());{const t=e.filters.map(r=>iF(n,r));return vn.create(t,"or")}}function PA(n){if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;const e=n.getFilters();if(1===e.length)return PA(e[0]);if(X6(n))return n;const t=e.map(i=>PA(i)),r=[];return t.forEach(i=>{i instanceof Kt?r.push(i):i instanceof vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:vn.create(r,n.op)}class PZ{constructor(){this.rn=new sF}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(to.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class sF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Qt.comparator)).toArray()}}const OA=new Uint8Array(0);class OZ{constructor(e,t){this.user=e,this.databaseId=t,this.on=new sF,this.un=new Au(r=>sp(r),(r,i)=>JC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:zi(i)};return aj(e).put(a)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[D6(t),""],!1,!0);return aj(e).j(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(ac(u.parent))}return r})}addFieldIndex(e,t){const r=RA(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=gE(e);return a.next(f=>{u.put(XB(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=RA(e),i=gE(e),a=pE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=pE(e);let i=!0;const a=new Map;return ne.forEach(this.cn(t),u=>this.an(e,u).next(f=>{i&&(i=!!f),a.set(u,f)})).next(()=>{if(i){let u=Rt();const f=[];return ne.forEach(a,(g,v)=>{var I;xe("IndexedDbIndexManager",`Using index ${I=g,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(ke=>`${ke.fieldPath}:${ke.kind}`).join(",")}`} to execute ${sp(t)}`);const T=function(ke,Ye){const gt=D2(Ye);if(void 0===gt)return null;for(const St of CA(ke,gt.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(v,g),A=function(ke,Ye){const gt=new Map;for(const St of np(Ye))for(const Dr of CA(ke,St.fieldPath))switch(Dr.op){case"==":case"in":gt.set(St.fieldPath.canonicalString(),Dr.value);break;case"not-in":case"!=":return gt.set(St.fieldPath.canonicalString(),Dr.value),Array.from(gt.values())}return null}(v,g),N=function(ke,Ye){const gt=[];let St=!0;for(const Dr of np(Ye)){const As=0===Dr.kind?sB(ke,Dr.fieldPath,ke.startAt):oB(ke,Dr.fieldPath,ke.startAt);gt.push(As.value),St&&(St=As.inclusive)}return new Cd(gt,St)}(v,g),G=function(ke,Ye){const gt=[];let St=!0;for(const Dr of np(Ye)){const As=0===Dr.kind?oB(ke,Dr.fieldPath,ke.endAt):sB(ke,Dr.fieldPath,ke.endAt);gt.push(As.value),St&&(St=As.inclusive)}return new Cd(gt,St)}(v,g),Q=this.hn(g,v,N),J=this.hn(g,v,G),be=this.ln(g,v,A),ze=this.fn(g.indexId,T,Q,N.inclusive,J,G.inclusive,be);return ne.forEach(ze,ke=>r.H(ke,t.limit).next(Ye=>{Ye.forEach(gt=>{const St=We.fromSegments(gt.documentKey);u.has(St)||(u=u.add(St),f.push(St))})}))}).next(()=>f)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:xZ(vn.create(e.filters,"and")).map(r=>F2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,u,f){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),I=[];for(let T=0;T<g;++T){const A=t?this.dn(t[T/v]):OA,N=this.wn(e,A,r[T%v],i),G=this._n(e,A,a[T%v],u),Q=f.map(J=>this.wn(e,A,J,!0));I.push(...this.createRange(N,G,Q))}return I}wn(e,t,r,i){const a=new fp(e,We.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new fp(e,We.empty(),t,r);return i?a.Je():a}an(e,t){const r=new MZ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const f of a)r.tn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,a=>this.an(e,a).next(u=>{u?0!==r&&u.fields.length<function(f){let g=new $n(hr.comparator),v=!1;for(const I of f.filters)for(const T of I.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:g=g.add(T.field));for(const I of f.orderBy)I.field.isKeyField()||(g=g.add(I.field));return g.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new fE;for(const i of np(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.He(i.kind);hp.Ve._e(a,u)}return r.Qe()}dn(e){const t=new fE;return hp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new fE;return hp.Ve._e(ip(this.databaseId,t),r.He(function(i){const a=np(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new fE);let a=0;for(const u of np(e)){const f=r[a++];for(const g of i)if(this.yn(t,u.fieldPath)&&YC(f))i=this.pn(i,u,f);else{const v=g.He(u.kind);hp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const f of i){const g=new fE;g.seed(f.Qe()),hp.Ve._e(u,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=RA(e),i=gE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const u=[];return ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(g=>{u.push(function(v,I){const T=I?new zC(I.sequenceNumber,new to(lp(I.readTime),new We(ac(I.documentKey)),I.largestBatchId)):zC.empty(),A=v.fields.map(([N,G])=>new dA(hr.fromServerFormat(N),G));return new lA(v.indexId,v.collectionGroup,A,T)}(f,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Dt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=RA(e),a=gE(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,g=>a.put(XB(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?ne.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,g=>this.En(e,i,g).next(v=>{const I=this.An(a,g);return v.isEqual(I)?ne.resolve():this.vn(e,a,g,v,I)}))))})}Rn(e,t,r,i){return pE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return pE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=pE(e);let a=new $n(Id);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,f)=>{a=a.add(new fp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new $n(Id);const i=this.mn(t,e);if(null==i)return r;const a=D2(t);if(null!=a){const u=e.data.field(a.fieldPath);if(YC(u))for(const f of u.arrayValue.values||[])r=r.add(new fp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new fp(t.indexId,e.key,OA,i));return r}vn(e,t,r,i,a){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,g,v,I,T){const A=f.getIterator(),N=g.getIterator();let G=D_(A),Q=D_(N);for(;G||Q;){let J=!1,be=!1;if(G&&Q){const ze=v(G,Q);ze<0?be=!0:ze>0&&(J=!0)}else null!=G?be=!0:J=!0;J?(I(Q),Q=D_(N)):be?(T(G),G=D_(A)):(G=D_(A),Q=D_(N))}}(i,a,Id,f=>{u.push(this.Rn(e,t,r,f))},f=>{u.push(this.Pn(e,t,r,f))}),ne.waitFor(u)}Tn(e){let t=1;return gE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Id(u,f)).filter((u,f,g)=>!f||0!==Id(u,g[f-1]));const i=[];i.push(e);for(const u of r){const f=Id(u,e),g=Id(u,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(u),i.push(u.Je());else if(g>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,OA,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,OA,[]]))}return a}bn(e,t){return Id(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cj)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(cj)}}function aj(n){return ci(n,"collectionParents")}function pE(n){return ci(n,"indexEntries")}function RA(n){return ci(n,"indexConfiguration")}function gE(n){return ci(n,"indexState")}function cj(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;S2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new to(e.readTime,e.documentKey,t)}const uj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lj(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:u},(I,T,A)=>(f++,A.delete()));a.push(g.next(()=>{ct(1===f)}));const v=[];for(const I of t.mutations){const T=k6(e,I.key.path,t.batchId);a.push(i.delete(T)),v.push(I.key)}return ne.waitFor(a).next(()=>v)}function NA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class kA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new kA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bd(e).X({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=L_(e),u=bd(e);return u.add({}).next(f=>{ct("number"==typeof f);const g=new H2(f,t,r,i),v=function(A,N,G){const Q=G.baseMutations.map(be=>lE(A.fe,be)),J=G.mutations.map(be=>lE(A.fe,be));return{userId:N,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),I=[];let T=new $n((A,N)=>Dt(A.canonicalString(),N.canonicalString()));for(const A of i){const N=k6(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),I.push(u.put(v)),I.push(a.put(N,vq))}return T.forEach(A=>{I.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),ne.waitFor(I).next(()=>g)})}lookupMutationBatch(e,t){return bd(e).get(t).next(r=>r?(ct(r.userId===this.userId),dp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return bd(e).X({index:"userMutationsIndex",range:i},(u,f,g)=>{f.userId===this.userId&&(ct(f.batchId>=r),a=dp(this.serializer,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bd(e).j("userMutationsIndex",t).next(r=>r.map(i=>dp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fA(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return L_(e).X({range:i},(u,f,g)=>{const[v,I,T]=u,A=ac(I);if(v===this.userId&&t.path.isEqual(A))return bd(e).get(T).next(N=>{if(!N)throw et();ct(N.userId===this.userId),a.push(dp(this.serializer,N))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Dt);const i=[];return t.forEach(a=>{const u=fA(this.userId,a.path),f=IDBKeyRange.lowerBound(u),g=L_(e).X({range:f},(v,I,T)=>{const[A,N,G]=v,Q=ac(N);A===this.userId&&a.path.isEqual(Q)?r=r.add(G):T.done()});i.push(g)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=fA(this.userId,r),u=IDBKeyRange.lowerBound(a);let f=new $n(Dt);return L_(e).X({range:u},(g,v,I)=>{const[T,A,N]=g,G=ac(A);T===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(N)):I.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(bd(e).get(a).next(u=>{if(null===u)throw et();ct(u.userId===this.userId),r.push(dp(this.serializer,u))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lj(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return L_(e).X({range:r},(a,u,f)=>{if(a[0]===this.userId){const g=ac(a[1]);i.push(g)}else f.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return dj(e,this.userId,t)}xn(e){return hj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dj(n,e,t){const r=fA(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return L_(n).X({range:a,Y:!0},(f,g,v)=>{const[I,T,A]=f;I===e&&T===i&&(u=!0),v.done()}).next(()=>u)}function bd(n){return ci(n,"mutations")}function L_(n){return ci(n,"documentMutations")}function hj(n){return ci(n,"mutationQueues")}class pp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new pp(0)}static Mn(){return new pp(-1)}}class RZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new pp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ut.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>U_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return U_(e).X((u,f)=>{const g=dE(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return U_(e).X((r,i)=>{const a=dE(i);t(a)})}$n(e){return fj(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return fj(e).put("targetGlobalKey",t)}Fn(e,t){return U_(e).put(QB(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return U_(e).X({range:i,index:"queryTargetsIndex"},(u,f,g)=>{const v=dE(f);JC(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Td(e);return t.forEach(u=>{const f=zi(u.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Td(e);return ne.forEach(t,a=>{const u=zi(a.path);return ne.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Td(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Td(e);let a=Rt();return i.X({range:r,Y:!0},(u,f,g)=>{const v=ac(u[1]),I=new We(v);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=zi(t.path),i=IDBKeyRange.bound([r],[D6(r)],!1,!0);let a=0;return Td(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,f],g,v)=>{0!==u&&(a++,v.done())}).next(()=>a>0)}le(e,t){return U_(e).get(t).next(r=>r?dE(r):null)}}function U_(n){return ci(n,"targets")}function fj(n){return ci(n,"targetGlobal")}function Td(n){return ci(n,"targetDocuments")}function pj([n,e],[t,r]){const i=Dt(n,t);return 0===i?Dt(e,r):i}class NZ{constructor(e){this.Ln=e,this.buffer=new $n(pj),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,H.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){pd(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fd(r)}yield t.Qn(3e5)}))}}class kZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(no.ct);const r=new NZ(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(uj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uj):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,u,f,g,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),b2()<=Li.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(v-g)+`ms\nTotal Duration: ${v-I}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class FZ{constructor(e,t){this.db=e,this.garbageCollector=function mj(n,e){return new kZ(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return FA(e,r)}removeReference(e,t,r){return FA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return FA(e,t)}Xn(e,t){return function(r,i){let a=!1;return hj(r).Z(u=>dj(r,u,i).next(f=>(f&&(a=!0),ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(u,f)=>{if(f<=t){const g=this.Xn(e,u).next(v=>{if(!v)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,ut.min()),Td(e).delete([0,zi(u.path)])))});i.push(g)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return FA(e,t)}Yn(e,t){const r=Td(e);let i,a=no.ct;return r.X({index:"documentTargetsIndex"},([u,f],{path:g,sequenceNumber:v})=>{0===u?(a!==no.ct&&t(new We(ac(i)),a),a=v,i=g):a=no.ct}).next(()=>{a!==no.ct&&t(new We(ac(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function FA(n,e){return Td(n).put((r=n.currentSequenceNumber,{targetId:0,path:zi(e.path),sequenceNumber:r}));var r}class _j{constructor(){this.changes=new Au(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gp(e).put(r)}removeEntry(e,t,r){return gp(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],MA(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return gp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(mE(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return gp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(mE(t))},(i,a)=>{r={document:this.ts(t,a),size:NA(a)}}).next(()=>r)}getEntries(e,t){let r=Ds();return this.ns(e,t,(i,a)=>{const u=this.ts(i,a);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=Ds(),i=new On(We.comparator);return this.ns(e,t,(a,u)=>{const f=this.ts(a,u);r=r.insert(a,f),i=i.insert(a,NA(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new $n(Cj);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(mE(i.first()),mE(i.last())),u=i.getIterator();let f=u.getNext();return gp(e).X({index:"documentKeyIndex",range:a},(g,v,I)=>{const T=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&Cj(f,T)<0;)r(f,null),f=u.getNext();f&&f.isEqual(T)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?I.G(mE(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),MA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gp(e).j(IDBKeyRange.bound(u,f,!0)).next(g=>{let v=Ds();for(const I of g){const T=this.ts(We.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);T.isFoundDocument()&&(eE(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=Ds();const u=wj(t,r),f=wj(t,to.max());return gp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(g,v,I)=>{const T=this.ts(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(T.key,T),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new UZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vj(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return vj(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function IZ(n,e){let t;if(e.document)t=HB(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=lp(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=lp(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Yn(r[0],r[1]);return ut.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ut.min()))return r}return Hn.newInvalidDocument(e)}}function yj(n){return new LZ(n)}class UZ extends _j{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Au(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((a,u)=>Dt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),u.isValidDocument()){const g=YB(this.os.serializer,u);i=i.add(a.path.popLast());const v=NA(g);r+=v-f.size,t.push(this.os.addEntry(e,a,g))}else if(r-=f.size,this.trackRemovals){const g=YB(this.os.serializer,u.convertToNoDocument(ut.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,u)=>{this.us.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function vj(n){return ci(n,"remoteDocumentGlobal")}function gp(n){return ci(n,"remoteDocumentsV14")}function mE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wj(n,e){const t=e.documentKey.path.toArray();return[n,MA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Dt(t[a],r[a]),i)return i;return i=Dt(t.length,r.length),i||(i=Dt(t[t.length-2],r[r.length-2]),i||Dt(t[t.length-1],r[r.length-1]))}class VZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ej{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&iE(r.mutation,i,Ts.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Rt()){const i=uc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=tE();return a.forEach((f,g)=>{u=u.insert(f,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=uc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Rt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let a=Ds();const u=nE(),f=nE();return t.forEach((g,v)=>{const I=r.get(v.key);i.has(v.key)&&(void 0===I||I.mutation instanceof Mu)?a=a.insert(v.key,v):void 0!==I?(u.set(v.key,I.mutation.getFieldMask()),iE(I.mutation,v,I.mutation.getFieldMask(),Yn.now())):u.set(v.key,Ts.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,I)=>u.set(v,I)),t.forEach((v,I)=>{var T;return f.set(v,new VZ(I,null!==(T=u.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=nE();let i=new On((u,f)=>u-f),a=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let I=r.get(g)||Ts.empty();I=f.applyToLocalView(v,I),r.set(g,I);const T=(i.get(f.batchId)||Rt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,I=g.value,T=pB();I.forEach(A=>{if(!a.has(A)){const N=IB(t.get(A),r.get(A));null!==N&&T.set(A,N),a=a.add(A)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ne.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):U2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ne.resolve(uc());let f=-1,g=a;return u.next(v=>ne.forEach(v,(I,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(I)?ne.resolve():this.remoteDocumentCache.getEntry(e,I).next(A=>{g=g.insert(I,A)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,Rt())).next(I=>({batchId:f,changes:fB(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=tE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=tE();return this.indexManager.getCollectionParents(e,i).next(u=>ne.forEach(u,f=>{const g=(v=t,I=f.child(i),new Su(I,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,I;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((I,T)=>{a=a.insert(I,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,g)=>{const v=g.getKey();null===a.get(v)&&(a=a.insert(v,Hn.newInvalidDocument(v)))});let u=tE();return a.forEach((f,g)=>{const v=i.get(f);void 0!==v&&iE(v.mutation,g,Ts.empty(),Yn.now()),eE(t,g)&&(u=u.insert(f,g))}),u})}}class BZ{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:br(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:X2(r.bundledQuery),readTime:br(r.readTime)}),ne.resolve();var r}}class jZ{constructor(){this.overlays=new On(We.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=uc();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=uc(),a=t.length+1,u=new We(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new On((v,I)=>v-I);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let I=a.get(v.largestBatchId);null===I&&(I=uc(),a=a.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const f=uc(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,I)=>f.set(v,I)),!(f.size()>=i)););return ne.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new G2(t,r));let a=this.ls.get(t);void 0===a&&(a=Rt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class oF{constructor(){this.fs=new $n(ui.ds),this.ws=new $n(ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Qt([])),r=new ui(t,e),i=new ui(t,e+1),a=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),a.push(u.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Qt([])),r=new ui(t,e),i=new ui(t,e+1);let a=Rt();return this.ws.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||Dt(e.As,t.As)}static _s(e,t){return Dt(e.As,t.As)||We.comparator(e.key,t.key)}}class $Z{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new $n(ui.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const u=new H2(a,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Rs=this.Rs.add(new ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],u=>{const f=this.Ps(u.As);a.push(f)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Dt);return t.forEach(i=>{const a=new ui(i,0),u=new ui(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,u],f=>{r=r.add(f.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const u=new ui(new We(a),0);let f=new $n(Dt);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(g.As)),!0)},u),ne.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const a=new ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ui(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HZ{constructor(e){this.Ds=e,this.docs=new On(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Ds();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ds();const u=t.path,f=new We(u.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:I}}=g.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||S2(A6(I),r)<=0||(i.has(I.key)||eE(t,I))&&(a=a.insert(I.key,I.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zZ(this)}getSize(e){return ne.resolve(this.size)}}class zZ extends _j{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class GZ{constructor(e){this.persistence=e,this.xs=new Au(t=>sp(t),JC),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Ns=0,this.ks=new oF,this.targetCount=0,this.Ms=pp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new pp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class aF{constructor(e,t){this.$s={},this.overlays={},this.Os=new no(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new GZ(this),this.indexManager=new PZ,this.remoteDocumentCache=new HZ(r=>this.referenceDelegate.Ls(r)),this.serializer=new KB(t),this.qs=new BZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jZ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new $Z(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const i=new WZ(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class WZ extends x6{constructor(e){super(),this.currentSequenceNumber=e}}class LA{constructor(e){this.persistence=e,this.Qs=new oF,this.js=null}static zs(e){return new LA(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,ut.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class qZ{constructor(e){this.serializer=e}O(e,t,r,i){const a=new hA("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N6,{unique:!0}),f.createObjectStore("documentMutations"),Ij(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Ij(e)),u=u.next(()=>function(f){const g=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,g){return g.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N6,{unique:!0});const I=g.store("mutations"),T=v.map(A=>I.put(A));return ne.waitFor(T)})}(e,a))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(a))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(a))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(a))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:Pq});g.createIndex("collectionPathOverlayIndex",Oq,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",Rq,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:wq});g.createIndex("documentKeyIndex",Cq),g.createIndex("collectionGroupIndex",Eq)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,a))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Sq}).createIndex("sequenceNumberIndex",Aq,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Mq}).createIndex("documentKeyIndex",xq,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=NA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>ne.forEach(f,g=>{ct(g.userId===a.userId);const v=dp(this.serializer,g);return lj(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((u,f)=>{const g=new Qt(u),v=[0,zi(g)];a.push(t.get(v).next(I=>I?ne.resolve():t.put({targetId:0,path:zi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Dq});const r=t.store("collectionParents"),i=new sF,a=u=>{if(i.add(u)){const f=u.lastSegment(),g=u.popLast();return r.put({collectionId:f,parent:zi(g)})}};return t.store("remoteDocuments").X({Y:!0},(u,f)=>{const g=new Qt(u);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,f,g],v)=>{const I=ac(f);return a(I.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=dE(i),u=QB(this.serializer,a);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,u)=>{const f=t.store("remoteDocumentsV14"),g=(v=u,v.document?new We(Qt.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):et()).path.toArray();var v;const I={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(I))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=yj(this.serializer),a=new aF(LA.zs,this.serializer.fe);return r.j().next(u=>{const f=new Map;return u.forEach(g=>{var v;let I=null!==(v=f.get(g.userId))&&void 0!==v?v:Rt();dp(this.serializer,g).keys().forEach(T=>I=I.add(T)),f.set(g.userId,I)}),ne.forEach(f,(g,v)=>{const I=new ai(v),T=xA.de(this.serializer,I),A=a.getIndexManager(I),N=kA.de(I,this.serializer,A,a.referenceDelegate);return new Ej(i,N,T,A).recalculateAndSaveOverlaysForDocumentKeys(new x2(t,no.ct),g).next()})})}}function Ij(n){n.createObjectStore("targetDocuments",{keyPath:bq}).createIndex("documentTargetsIndex",Tq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Iq,{unique:!0}),n.createObjectStore("targetGlobal")}const cF="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uF{constructor(e,t,r,i,a,u,f,g,v,I,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=u,this.document=f,this.ri=v,this.oi=I,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!uF.D())throw new Ie(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FZ(this,i),this.di=t+"main",this.serializer=new KB(g),this.wi=new pa(this.di,this.ui,new qZ(this.serializer)),this.Bs=new RZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yj(this.serializer),this.qs=new bZ,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===I&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(ae.FAILED_PRECONDITION,cF);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new no(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,H.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,H.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,H.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>VA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(pd(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return _E(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return VA(e).delete(this.clientId)}bi(){var e=this;return(0,H.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ci(r,"clientMetadata");return i.j().next(a=>{const u=e.Si(a,18e5),f=a.filter(g=>-1===u.indexOf(g));return ne.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):_E(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ie(ae.FAILED_PRECONDITION,cF);return!1}}return!(!this.networkEnabled||!this.inForeground)||VA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,H.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new x2(t,no.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>VA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return kA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OZ(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return xA.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.ui)?kq:14===u?U6:13===u?L6:12===u?Nq:11===u?F6:void et();var u;let f;return this.wi.runTransaction(e,i,a,g=>(f=new x2(g,this.Os?this.Os.next():no.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ie(ae.FAILED_PRECONDITION,M6);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return _E(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(ae.FAILED_PRECONDITION,cF)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _E(e).put("owner",t)}static D(){return pa.D()}Ai(e){const t=_E(e);return t.get("owner").next(r=>this.Ri(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ir(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,$.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ir("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _E(n){return ci(n,"owner")}function VA(n){return ci(n,"clientMetadata")}function lF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dF{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Rt(),i=Rt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new dF(e,t.fromCache,r,i)}}class bj{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(cB(t))return ne.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=IA(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Rt(...a);return this.Ui.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,f);return this.zi(t,v,u,g.readTime)?this.Ki(e,IA(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return cB(t)||i.isEqual(ut.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const u=this.ji(t,a);return this.zi(t,u,r,i)?this.Qi(e,t):(b2()<=Li.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),B2(t)),this.Wi(e,u,t,S6(i,-1)))})}ji(e,t){let r=new $n(dB(e));return t.forEach((i,a)=>{eE(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return b2()<=Li.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",B2(t)),this.Ui.getDocumentsMatchingQuery(e,t,to.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class ZZ{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new On(Dt),this.Yi=new Au(a=>sp(a),JC),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ej(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Tj(n,e,t,r){return new ZZ(n,e,t,r)}function Dj(n,e){return hF.apply(this,arguments)}function hF(){return hF=(0,H.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],f=[];let g=Rt();for(const v of i){u.push(v.batchId);for(const I of v.mutations)g=g.add(I.key)}for(const v of a){f.push(v.batchId);for(const I of v.mutations)g=g.add(I.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:u,addedBatchIds:f}))})})}),hF.apply(this,arguments)}function Sj(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Aj(n,e,t){let r=Rt(),i=Rt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=Ds();return t.forEach((f,g)=>{const v=a.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(ut.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):xe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{nr:u,sr:i}})}function QZ(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V_(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new xu(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function B_(n,e,t){return fF.apply(this,arguments)}function fF(){return fF=(0,H.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!pd(u))throw u;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),fF.apply(this,arguments)}function BA(n,e,t){const r=qe(n);let i=ut.min(),a=Rt();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,g,v){const I=qe(f),T=I.Yi.get(v);return void 0!==T?ne.resolve(I.Ji.get(T)):I.Bs.getTargetData(g,v)}(r,u,os(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,f.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:ut.min(),t?a:Rt())).next(f=>(Pj(r,lB(e),f),{documents:f,ir:a})))}function Mj(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(u=>u?u.target:null))}function xj(n,e){const t=qe(n),r=t.Xi.get(e)||ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,S6(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Pj(t,e,i),i))}function Pj(n,e,t){let r=n.Xi.get(e)||ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function pF(){return pF=(0,H.Z)(function*(n,e,t,r){const i=qe(n);let a=Rt(),u=Ds();for(const v of t){const I=e.rr(v.metadata.name);v.document&&(a=a.add(I));const T=e.ur(v);T.setReadTime(e.cr(v.metadata.readTime)),u=u.insert(I,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield V_(i,(v=r,os(x_(Qt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>Aj(v,f,u).next(I=>(f.apply(v),I)).next(I=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,I.nr,I.sr)).next(()=>I.nr)))}),pF.apply(this,arguments)}function XZ(n,e){return gF.apply(this,arguments)}function gF(){return gF=(0,H.Z)(function*(n,e,t=Rt()){const r=yield V_(n,os(X2(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=br(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Jr.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),gF.apply(this,arguments)}function Oj(n,e){return`firestore_clients_${n}_${e}`}function Rj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mF(n,e){return`firestore_targets_${n}_${e}`}class jA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ie(i.error.code,i.error.message))),u?new jA(e,t,i.state,a):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ie(r.error.code,r.error.message))),a?new yE(e,r.state,i):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $A{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=j2();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=O6(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new $A(e,a):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _F{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _F(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yF{constructor(){this.activeTargetIds=j2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vF{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new On(Dt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Oj(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new yF),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,H.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(Oj(e.persistenceKey,i));if(a){const u=$A.ar(i,a);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mF(this.persistenceKey,e));if(r){const i=yE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mF(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,H.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let u=no.ct;if(null!=a)try{const f=JSON.parse(a);ct("number"==typeof f),u=f}catch(f){Ir("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==no.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new jA(this.currentUser,e,t,r),a=Rj(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=Rj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=mF(this.persistenceKey,e),a=new yE(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return $A.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return jA.ar(new ai(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return yE.ar(i,t)}br(e){return _F.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,H.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),u=[],f=[];return a.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.Wr(u,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=j2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Nj{constructor(){this.Hr=new yF,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new yF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eK{Yr(e){}shutdown(){}}class kj{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let HA=null;function wF(){return null===HA?HA=268435456+Math.round(2147483648*Math.random()):HA++,"0x"+HA.toString(16)}const tK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nK{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Wi="WebChannelConnection";class rK extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const u=wF(),f=this.To(e,t);xe("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const g={};return this.Eo(g,i,a),this.Ao(e,f,g,r).then(v=>(xe("RestConnection",`Received RPC '${e}' ${u}: `,v),v),v=>{throw Vo("RestConnection",`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,a,u){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+b_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${tK[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=wF();return new Promise((u,f)=>{const g=new eq;g.setWithCredentials(!0),g.listenOnce(QW.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case I2.NO_ERROR:const I=g.getResponseJson();xe(Wi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(I)),u(I);break;case I2.TIMEOUT:xe(Wi,`RPC '${e}' ${a} timed out`),f(new Ie(ae.DEADLINE_EXCEEDED,"Request time out"));break;case I2.HTTP_ERROR:const T=g.getStatus();if(xe(Wi,`RPC '${e}' ${a} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A?.error;if(N&&N.status&&N.message){const G=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(N.status);f(new Ie(G,N.message))}else f(new Ie(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new Ie(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{xe(Wi,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);xe(Wi,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=wF(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=KW(),f=YW(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new XW({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const I=a.join("");xe(Wi,`Creating RPC '${e}' stream ${i}: ${I}`,g);const T=u.createWebChannel(I,g);let A=!1,N=!1;const G=new nK({ro:J=>{N?xe(Wi,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(xe(Wi,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),xe(Wi,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,be,ze)=>{J.listen(be,ke=>{try{ze(ke)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,uA.EventType.OPEN,()=>{N||xe(Wi,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,uA.EventType.CLOSE,()=>{N||(N=!0,xe(Wi,`RPC '${e}' stream ${i} transport closed`),G.wo())}),Q(T,uA.EventType.ERROR,J=>{N||(N=!0,Vo(Wi,`RPC '${e}' stream ${i} transport errored:`,J),G.wo(new Ie(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,uA.EventType.MESSAGE,J=>{var be;if(!N){const ze=J.data[0];ct(!!ze);const Ye=ze.error||(null===(be=ze[0])||void 0===be?void 0:be.error);if(Ye){xe(Wi,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let St=function(As){const gy=Rr[As];if(void 0!==gy)return MB(gy)}(gt),Dr=Ye.message;void 0===St&&(St=ae.INTERNAL,Dr="Unknown error status: "+gt+" with message "+Ye.message),N=!0,G.wo(new Ie(St,Dr)),T.close()}else xe(Wi,`RPC '${e}' stream ${i} received:`,ze),G._o(ze)}}),Q(f,JW.STAT_EVENT,J=>{J.stat===C6.PROXY?xe(Wi,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===C6.NOPROXY&&xe(Wi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{G.fo()},0),G}}function Fj(){return typeof window<"u"?window:null}function zA(){return typeof document<"u"?document:null}function vE(n){return new fZ(n,!0)}class CF{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Lj{constructor(e,t,r,i,a,u,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new CF(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,H.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,H.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,H.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ie(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,H.Z)(function*(){e.state=0,e.start()}))}tu(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iK extends Lj{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function mZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(ct(void 0===v||"string"==typeof v),Jr.fromBase64String(v||"")):(ct(void 0===v||v instanceof Uint8Array),Jr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(g){const v=void 0===g.code?ae.UNKNOWN:MB(g.code);return new Ie(v,g.message||"")}(u);t=new NB(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=lc(n,r.document.name),a=br(r.document.updateTime),u=r.document.createTime?br(r.document.createTime):ut.min(),f=new Ti({mapValue:{fields:r.document.fields}}),g=Hn.newFoundDocument(i,a,u,f);t=new AA(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=lc(n,r.document),a=r.readTime?br(r.readTime):ut.min(),u=Hn.newNoDocument(i,a);t=new AA([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=lc(n,r.document);t=new AA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:a}=r,u=new aZ(i,a);t=new RB(r.targetId,u)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?br(a.readTime):ut.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=uE(this.serializer),t.addTarget=function(i,a){let u;const f=a.target;if(u=wA(f)?{documents:zB(i,f)}:{query:J2(i,f)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=UB(i,a.resumeToken);const g=Z2(i,a.expectedCount);null!==g&&(u.expectedCount=g)}else if(a.snapshotVersion.compareTo(ut.min())>0){u.readTime=k_(i,a.snapshotVersion.toTimestamp());const g=Z2(i,a.expectedCount);null!==g&&(u.expectedCount=g)}return u}(this.serializer,e);const r=function yZ(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=uE(this.serializer),t.removeTarget=e,this.Wo(t)}}class sK extends Lj{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function _Z(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,i){let a=br(r.updateTime?r.updateTime:i);return a.isEqual(ut.min())&&(a=br(i)),new rZ(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lE(this.serializer,r))};this.Wo(t)}}class oK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ie(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.vo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ae.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class cK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ir(t),this.mu=!1):xe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class uK{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,H.Z)(function*(){var g;Dd(u)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,H.Z)(function*(v){const I=qe(v);I.vu.add(4),yield j_(I),I.bu.set("Unknown"),I.vu.delete(4),yield wE(I)}),function(v){return g.apply(this,arguments)})(u))}))}),this.bu=new cK(r,i)}}function wE(n){return IF.apply(this,arguments)}function IF(){return IF=(0,H.Z)(function*(n){if(Dd(n))for(const e of n.Ru)yield e(!0)}),IF.apply(this,arguments)}function j_(n){return bF.apply(this,arguments)}function bF(){return bF=(0,H.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),bF.apply(this,arguments)}function GA(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),SF(t)?DF(t):H_(t).Ko()&&TF(t,e))}function CE(n,e){const t=qe(n),r=H_(t);t.Au.delete(e),r.Ko()&&Uj(t,e),0===t.Au.size&&(r.Ko()?r.jo():Dd(t)&&t.bu.set("Unknown"))}function TF(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}H_(n).su(e)}function Uj(n,e){n.Vu.qt(e),H_(n).iu(e)}function DF(n){n.Vu=new uZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),H_(n).start(),n.bu.gu()}function SF(n){return Dd(n)&&!H_(n).Uo()&&n.Au.size>0}function Dd(n){return 0===qe(n).vu.size}function Vj(n){n.Vu=void 0}function lK(n){return AF.apply(this,arguments)}function AF(){return AF=(0,H.Z)(function*(n){n.Au.forEach((e,t)=>{TF(n,e)})}),AF.apply(this,arguments)}function dK(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,H.Z)(function*(n,e){Vj(n),SF(n)?(n.bu.Iu(e),DF(n)):n.bu.set("Unknown")}),MF.apply(this,arguments)}function hK(n,e,t){return xF.apply(this,arguments)}function xF(){return xF=(0,H.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof NB&&2===e.state&&e.cause)try{yield(r=(0,H.Z)(function*(i,a){const u=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WA(n,r)}else if(e instanceof AA?n.Vu.Ht(e):e instanceof RB?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ut.min()))try{const r=yield Sj(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Vu.ce(a);return u.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(f.resumeToken,a))}}),u.targetMismatches.forEach((f,g)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(Jr.EMPTY_BYTE_STRING,v.snapshotVersion)),Uj(i,f);const I=new xu(v.target,f,g,v.sequenceNumber);TF(i,I)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield WA(n,r)}var r}),xF.apply(this,arguments)}function WA(n,e,t){return PF.apply(this,arguments)}function PF(){return PF=(0,H.Z)(function*(n,e,t){if(!pd(e))throw e;n.vu.add(1),yield j_(n),n.bu.set("Offline"),t||(t=()=>Sj(n.localStore)),n.asyncQueue.enqueueRetryable((0,H.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield wE(n)}))}),PF.apply(this,arguments)}function Bj(n,e){return e().catch(t=>WA(n,t,e))}function $_(n){return OF.apply(this,arguments)}function OF(){return OF=(0,H.Z)(function*(n){const e=qe(n),t=Sd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;fK(e);)try{const i=yield QZ(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,pK(e,i)}catch(i){yield WA(e,i)}jj(e)&&$j(e)}),OF.apply(this,arguments)}function fK(n){return Dd(n)&&n.Eu.length<10}function pK(n,e){n.Eu.push(e);const t=Sd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function jj(n){return Dd(n)&&!Sd(n).Uo()&&n.Eu.length>0}function $j(n){Sd(n).start()}function gK(n){return RF.apply(this,arguments)}function RF(){return RF=(0,H.Z)(function*(n){Sd(n).hu()}),RF.apply(this,arguments)}function mK(n){return NF.apply(this,arguments)}function NF(){return NF=(0,H.Z)(function*(n){const e=Sd(n);for(const t of n.Eu)e.uu(t.mutations)}),NF.apply(this,arguments)}function _K(n,e,t){return kF.apply(this,arguments)}function kF(){return kF=(0,H.Z)(function*(n,e,t){const r=n.Eu.shift(),i=z2.from(r,e,t);yield Bj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $_(n)}),kF.apply(this,arguments)}function yK(n,e){return FF.apply(this,arguments)}function FF(){return FF=(0,H.Z)(function*(n,e){var t;e&&Sd(n).ou&&(yield(t=(0,H.Z)(function*(r,i){if(AB(a=i.code)&&a!==ae.ABORTED){const u=r.Eu.shift();Sd(r).Qo(),yield Bj(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield $_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),jj(n)&&$j(n)}),FF.apply(this,arguments)}function Hj(n,e){return LF.apply(this,arguments)}function LF(){return LF=(0,H.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Dd(t);t.vu.add(3),yield j_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield wE(t)}),LF.apply(this,arguments)}function UF(n,e){return VF.apply(this,arguments)}function VF(){return VF=(0,H.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield wE(t)):e||(t.vu.add(2),yield j_(t),t.bu.set("Unknown"))}),VF.apply(this,arguments)}function H_(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new iK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:lK.bind(null,n),ao:dK.bind(null,n),nu:hK.bind(null,n)}),n.Ru.push(function(){var e=(0,H.Z)(function*(t){t?(n.Su.Qo(),SF(n)?DF(n):n.bu.set("Unknown")):(yield n.Su.stop(),Vj(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Sd(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new sK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:gK.bind(null,n),ao:yK.bind(null,n),au:mK.bind(null,n),cu:_K.bind(null,n)}),n.Ru.push(function(){var e=(0,H.Z)(function*(t){t?(n.Du.Qo(),yield $_(n)):(yield n.Du.stop(),n.Eu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class BF{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,f=new BF(e,t,u,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(n,e){if(Ir("AsyncQueue",`${e}: ${n}`),pd(n))return new Ie(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class G_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=tE(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new G_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof G_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new G_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zj{constructor(){this.Cu=new On(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class W_{constructor(e,t,r,i,a,u,f,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new W_(e,t,G_.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&XC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class vK{constructor(){this.Nu=void 0,this.listeners=[]}}class wK{constructor(){this.queries=new Au(e=>uB(e),XC),this.onlineState="Unknown",this.ku=new Set}}function jF(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,H.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new vK),i)try{a.Nu=yield t.onListen(r)}catch(u){const f=z_(u,`Initialization of query '${B2(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&GF(t)}),$F.apply(this,arguments)}function HF(n,e){return zF.apply(this,arguments)}function zF(){return zF=(0,H.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),zF.apply(this,arguments)}function CK(n,e){const t=qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.$u(i)&&(r=!0);u.Nu=i}}r&&GF(t)}function EK(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function GF(n){n.ku.forEach(e=>{e.next()})}class WF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new W_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=W_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class IK{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Gj{constructor(e){this.serializer=e}rr(e){return lc(this.serializer,e)}ur(e){return e.metadata.exists?HB(this.serializer,e.document,!1):Hn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return br(e)}}class bK{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wj(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Gj(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Rt()).add(a);t.set(u,f)}}return t}complete(){var e=this;return(0,H.Z)(function*(){const t=yield function JZ(n,e,t,r){return pF.apply(this,arguments)}(e.localStore,new Gj(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield XZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Wj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qj{constructor(e){this.key=e}}class Zj{constructor(e){this.key=e}}class Kj{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Rt(),this.mutatedKeys=Rt(),this.tc=dB(e),this.ec=new G_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new zj,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,T)=>{const A=i.get(I),N=eE(this.query,T)?T:null,G=!!A&&this.mutatedKeys.has(A.key),Q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let J=!1;A&&N?A.data.isEqual(N.data)?G!==Q&&(r.track({type:3,doc:N}),J=!0):this.rc(A,N)||(r.track({type:2,doc:N}),J=!0,(g&&this.tc(N,g)>0||v&&this.tc(N,v)<0)&&(f=!0)):!A&&N?(r.track({type:0,doc:N}),J=!0):A&&!N&&(r.track({type:1,doc:A}),J=!0,(g||v)&&(f=!0)),J&&(N?(u=u.add(N),a=Q?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{ec:u,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,I)=>function(T,A){const N=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return N(T)-N(A)}(v.type,I.type)||this.tc(v.doc,I.doc)),this.oc(r);const u=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==a.length||g?{snapshot:new W_(this.query,e.ec,i,a,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new zj,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Rt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Zj(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new qj(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Rt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return W_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class TK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DK{constructor(e){this.key=e,this.fc=!1}}class SK{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new Au(f=>uB(f),XC),this._c=new Map,this.mc=new Set,this.gc=new On(We.comparator),this.yc=new Map,this.Ic=new oF,this.Tc={},this.Ec=new Map,this.Ac=pp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function AK(n,e){return qF.apply(this,arguments)}function qF(){return qF=(0,H.Z)(function*(n,e){const t=mL(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const u=yield V_(t.localStore,os(e)),f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield ZF(t,e,r,"current"===f,u.resumeToken),t.isPrimaryClient&&GA(t.remoteStore,u)}return i}),qF.apply(this,arguments)}function ZF(n,e,t,r,i){return KF.apply(this,arguments)}function KF(){return KF=(0,H.Z)(function*(n,e,t,r,i){n.Rc=(T,A,N)=>{return(G=(0,H.Z)(function*(Q,J,be,ze){let ke=J.view.sc(be);ke.zi&&(ke=yield BA(Q.localStore,J.query,!1).then(({documents:St})=>J.view.sc(St,ke)));const Ye=ze&&ze.targetChanges.get(J.targetId),gt=J.view.applyChanges(ke,Q.isPrimaryClient,Ye);return sL(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,be,ze){return G.apply(this,arguments)})(n,T,A,N);var G};const a=yield BA(n.localStore,e,!0),u=new Kj(e,a.ir),f=u.sc(a.documents),g=aE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(f,n.isPrimaryClient,g);sL(n,t,v.cc);const I=new TK(e,t,u);return n.wc.set(e,I),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),KF.apply(this,arguments)}function MK(n,e){return YF.apply(this,arguments)}function YF(){return YF=(0,H.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!XC(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield B_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),CE(t.remoteStore,r.targetId),q_(t,r.targetId)}).catch(fd))):(q_(t,r.targetId),yield B_(t.localStore,r.targetId,!0))}),YF.apply(this,arguments)}function QF(){return QF=(0,H.Z)(function*(n,e,t){const r=_L(n);try{const i=yield function(a,u){const f=qe(a),g=Yn.now(),v=u.reduce((A,N)=>A.add(N.key),Rt());let I,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let N=Ds(),G=Rt();return f.Zi.getEntries(A,v).next(Q=>{N=Q,N.forEach((J,be)=>{be.isValidDocument()||(G=G.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,N)).next(Q=>{I=Q;const J=[];for(const be of u){const ze=sZ(be,I.get(be.key).overlayedDocument);null!=ze&&J.push(new Mu(be.key,ze,K6(ze.value.mapValue),Qn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,g,J,u)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(I,G);return f.documentOverlayCache.saveOverlays(A,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:fB(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,f){let g=a.Tc[a.currentUser.toKey()];g||(g=new On(Dt)),g=g.insert(u,f),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Pu(r,i.changes),yield $_(r.remoteStore)}catch(i){const a=z_(i,"Failed to persist write");t.reject(a)}}),QF.apply(this,arguments)}function Yj(n,e){return JF.apply(this,arguments)}function JF(){return JF=(0,H.Z)(function*(n,e){const t=qe(n);try{const r=yield function YZ(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((I,T)=>{const A=i.get(T);if(!A)return;f.push(t.Bs.removeMatchingKeys(a,I.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(a,I.addedDocuments,T)));let N=A.withSequenceNumber(a.currentSequenceNumber);var G,Q,J;null!==e.targetMismatches.get(T)?N=N.withResumeToken(Jr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):I.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(I.resumeToken,r)),i=i.insert(T,N),Q=N,J=I,(0===(G=A).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,N))});let g=Ds(),v=Rt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),f.push(Aj(a,u,e.documentUpdates).next(I=>{g=I.nr,v=I.sr})),!r.isEqual(ut.min())){const I=t.Bs.getLastRemoteSnapshotVersion(a).next(T=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(I)}return ne.waitFor(f).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.yc.get(a);u&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?ct(u.fc):i.removedDocuments.size>0&&(ct(u.fc),u.fc=!1))}),yield Pu(t,r,e)}catch(r){yield fd(r)}}),JF.apply(this,arguments)}function Qj(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,u)=>{const f=u.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,u){const f=qe(a);f.onlineState=u;let g=!1;f.queries.forEach((v,I)=>{for(const T of I.listeners)T.Mu(u)&&(g=!0)}),g&&GF(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PK(n,e,t){return XF.apply(this,arguments)}function XF(){return XF=(0,H.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let u=new On(We.comparator);u=u.insert(a,Hn.newNoDocument(a,ut.min()));const f=Rt().add(a),g=new oE(ut.min(),new Map,new On(Dt),u,f);yield Yj(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),oL(r)}else yield B_(r.localStore,e,!1).then(()=>q_(r,e,t)).catch(fd)}),XF.apply(this,arguments)}function OK(n,e){return eL.apply(this,arguments)}function eL(){return eL=(0,H.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function KZ(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,f,g,v){const I=g.batch,T=I.keys();let A=ne.resolve();return T.forEach(N=>{A=A.next(()=>v.getEntry(f,N)).next(G=>{const Q=g.docVersions.get(N);ct(null!==Q),G.version.compareTo(Q)<0&&(I.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(f,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=Rt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);iL(t,r,null),rL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pu(t,i)}catch(i){yield fd(i)}}),eL.apply(this,arguments)}function RK(n,e,t){return tL.apply(this,arguments)}function tL(){return tL=(0,H.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,u){const f=qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,u).next(I=>(ct(null!==I),v=I.keys(),f.mutationQueue.removeMutationBatch(g,I))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);iL(r,e,t),rL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pu(r,i)}catch(i){yield fd(i)}}),tL.apply(this,arguments)}function nL(){return nL=(0,H.Z)(function*(n,e){const t=qe(n);Dd(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=qe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=z_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),nL.apply(this,arguments)}function rL(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function iL(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function q_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Jj(n,r)})}function Jj(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(CE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),oL(n))}function sL(n,e,t){for(const r of t)r instanceof qj?(n.Ic.addReference(r.key,e),kK(n,r)):r instanceof Zj?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Jj(n,r.key)):et()}function kK(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.mc.add(r),oL(n))}function oL(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new DK(t)),n.gc=n.gc.insert(t,r),GA(n.remoteStore,new xu(os(x_(t.path)),r,"TargetPurposeLimboResolution",no.ct))}}function Pu(n,e,t){return aL.apply(this,arguments)}function aL(){return aL=(0,H.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],u=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{u.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const I=dF.Li(g.targetId,v);a.push(I)}}))}),yield Promise.all(u),r.dc.nu(i),yield(f=(0,H.Z)(function*(g,v){const I=qe(g);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ne.forEach(v,A=>ne.forEach(A.Fi,N=>I.persistence.referenceDelegate.addReference(T,A.targetId,N)).next(()=>ne.forEach(A.Bi,N=>I.persistence.referenceDelegate.removeReference(T,A.targetId,N)))))}catch(T){if(!pd(T))throw T;xe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const A=T.targetId;if(!T.fromCache){const N=I.Ji.get(A),Q=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);I.Ji=I.Ji.insert(A,Q)}}}),function(g,v){return f.apply(this,arguments)})(r.localStore,a))}),aL.apply(this,arguments)}function FK(n,e){return cL.apply(this,arguments)}function cL(){return cL=(0,H.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield Dj(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(f=>{f.reject(new Ie(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pu(t,r.er)}var i}),cL.apply(this,arguments)}function LK(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return Rt().add(r.key);{let i=Rt();const a=t._c.get(e);if(!a)return i;for(const u of a){const f=t.wc.get(u);i=i.unionWith(f.view.nc)}return i}}function UK(n,e){return uL.apply(this,arguments)}function uL(){return uL=(0,H.Z)(function*(n,e){const t=qe(n),r=yield BA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&sL(t,e.targetId,i.cc),i}),uL.apply(this,arguments)}function VK(n,e){return lL.apply(this,arguments)}function lL(){return lL=(0,H.Z)(function*(n,e){const t=qe(n);return xj(t.localStore,e).then(r=>Pu(t,r))}),lL.apply(this,arguments)}function BK(n,e,t,r){return dL.apply(this,arguments)}function dL(){return dL=(0,H.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(u,f){const g=qe(u),v=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",I=>v.Sn(I,f).next(T=>T?g.localDocuments.getDocuments(I,T):ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield $_(i.remoteStore):"acknowledged"===t||"rejected"===t?(iL(i,e,r||null),rL(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield Pu(i,a)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),dL.apply(this,arguments)}function hL(){return hL=(0,H.Z)(function*(n,e){const t=qe(n);if(mL(t),_L(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Xj(t,r.toArray());t.vc=!0,yield UF(t.remoteStore,!0);for(const a of i)GA(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(q_(t,u),B_(t.localStore,u,!0))),CE(t.remoteStore,u)}),yield i,yield Xj(t,r),function(a){const u=qe(a);u.yc.forEach((f,g)=>{CE(u.remoteStore,g)}),u.Ic.Ts(),u.yc=new Map,u.gc=new On(We.comparator)}(t),t.vc=!1,yield UF(t.remoteStore,!1)}}),hL.apply(this,arguments)}function Xj(n,e,t){return fL.apply(this,arguments)}function fL(){return fL=(0,H.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const u of e){let f;const g=r._c.get(u);if(g&&0!==g.length){f=yield V_(r.localStore,os(g[0]));for(const v of g){const I=r.wc.get(v),T=yield UK(r,I);T.snapshot&&a.push(T.snapshot)}}else{const v=yield Mj(r.localStore,u);f=yield V_(r.localStore,v),yield ZF(r,e$(v),u,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),fL.apply(this,arguments)}function e$(n){return aB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $K(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function HK(n,e,t,r){return pL.apply(this,arguments)}function pL(){return pL=(0,H.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield xj(i.localStore,lB(a[0])),f=oE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jr.EMPTY_BYTE_STRING);yield Pu(i,u,f);break}case"rejected":yield B_(i.localStore,e,!0),q_(i,e,r);break;default:et()}}),pL.apply(this,arguments)}function zK(n,e,t){return gL.apply(this,arguments)}function gL(){return gL=(0,H.Z)(function*(n,e,t){const r=mL(n);if(r.vc){for(const i of e){if(r._c.has(i)){xe("SyncEngine","Adding an already active target "+i);continue}const a=yield Mj(r.localStore,i),u=yield V_(r.localStore,a);yield ZF(r,e$(a),u.targetId,!1,u.resumeToken),GA(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield B_(r.localStore,i,!1).then(()=>{CE(r.remoteStore,i),q_(r,i)}).catch(fd))}}),gL.apply(this,arguments)}function mL(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PK.bind(null,e),e.dc.nu=CK.bind(null,e.eventManager),e.dc.Pc=EK.bind(null,e.eventManager),e}function _L(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RK.bind(null,e),e}class EE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,H.Z)(function*(){t.serializer=vE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Tj(this.persistence,new bj,e.initialUser,this.serializer)}createPersistence(e){return new aF(LA.zs,this.serializer)}createSharedClientState(e){return new Nj}terminate(){var e=this;return(0,H.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yL extends EE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield _L(r.Vc.syncEngine),yield $_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Tj(this.persistence,new bj,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new gj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new _q(t,this.persistence);return new mq(e.asyncQueue,r)}createPersistence(e){const t=lF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new uF(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Fj(),zA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Nj}}class t$ extends yL{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof vF&&(r.sharedClientState.syncEngine={jr:BK.bind(null,i),zr:HK.bind(null,i),Wr:zK.bind(null,i),$i:$K.bind(null,i),Qr:VK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,H.Z)(function*(u){yield function jK(n,e){return hL.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Fj();if(!vF.D(t))throw new Ie(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vF(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Z_{initialize(e,t){var r=this;return(0,H.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Qj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=FK.bind(null,r.syncEngine),yield UF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wK}createDatastore(e){const t=vE(e.databaseInfo.databaseId),r=new rK(e.databaseInfo);return new oK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>Qj(this.syncEngine,f,0),u=kj.D()?new kj:new eK,new uK(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,f,g,v){const I=new SK(r,i,a,u,f,g);return v&&(I.vc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,H.Z)(function*(t){const r=qe(t);xe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield j_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function n$(n,e=10240){let t=0;return{read:()=>(0,H.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,H.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class qA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qK{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,H.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,H.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,H.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new IK(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,H.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,H.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,H.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,H.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,H.Z)(function*(a,u){const f=qe(a),g=uE(f.serializer)+"/documents",v={documents:u.map(N=>cE(f.serializer,N))},I=yield f.vo("BatchGetDocuments",g,v,u.length),T=new Map;I.forEach(N=>{const G=function gZ(n,e){return"found"in e?function(t,r){ct(!!r.found);const i=lc(t,r.found.name),a=br(r.found.updateTime),u=r.found.createTime?br(r.found.createTime):ut.min(),f=new Ti({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,u,f)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const i=lc(t,r.missing),a=br(r.readTime);return Hn.newNoDocument(i,a)}(n,e):et()}(f.serializer,N);T.set(G.key.toString(),G)});const A=[];return u.forEach(N=>{const G=T.get(N.toString());ct(!!G),A.push(G)}),A}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new N_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,H.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new $2(a,e.precondition(a)))}),yield(r=(0,H.Z)(function*(i,a){const u=qe(i),f=uE(u.serializer)+"/documents",g={writes:a.map(v=>lE(u.serializer,v))};yield u.Io("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new Ie(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KK{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new CF(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,H.Z)(function*(){const t=new ZK(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!WC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!AB(t)}return!1}}class YK{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ai.UNAUTHENTICATED,this.clientId=T6.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,H.Z)(function*(f){xe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(xe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,H.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=z_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ZA(n,e){return vL.apply(this,arguments)}function vL(){return vL=(0,H.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,H.Z)(function*(a){r.isEqual(a)||(yield Dj(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),vL.apply(this,arguments)}function wL(n,e){return CL.apply(this,arguments)}function CL(){return CL=(0,H.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EL(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Hj(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Hj(e.remoteStore,a)),n._onlineComponents=e}),CL.apply(this,arguments)}function r$(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function EL(n){return IL.apply(this,arguments)}function IL(){return IL=(0,H.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ZA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!r$(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),yield ZA(n,new EE)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),yield ZA(n,new EE);return n._offlineComponents}),IL.apply(this,arguments)}function KA(n){return bL.apply(this,arguments)}function bL(){return bL=(0,H.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),yield wL(n,n._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),yield wL(n,new Z_))),n._onlineComponents}),bL.apply(this,arguments)}function i$(n){return EL(n).then(e=>e.persistence)}function YA(n){return EL(n).then(e=>e.localStore)}function s$(n){return KA(n).then(e=>e.remoteStore)}function TL(n){return KA(n).then(e=>e.syncEngine)}function K_(n){return DL.apply(this,arguments)}function DL(){return DL=(0,H.Z)(function*(n){const e=yield KA(n),t=e.eventManager;return t.onListen=AK.bind(null,e.syncEngine),t.onUnlisten=MK.bind(null,e.syncEngine),t}),DL.apply(this,arguments)}function a$(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,a,u,f,g){const v=new qA({next:T=>{a.enqueueAndForget(()=>HF(i,I));const A=T.docs.has(u);!A&&T.fromCache?g.reject(new Ie(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&f&&"server"===f.source?g.reject(new Ie(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),I=new WF(x_(u.path),v,{includeMetadataChanges:!0,Ku:!0});return jF(i,I)}(yield K_(n),n.asyncQueue,e,t,r)})),r.promise}function c$(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,a,u,f,g){const v=new qA({next:T=>{a.enqueueAndForget(()=>HF(i,I)),T.fromCache&&"server"===f.source?g.reject(new Ie(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),I=new WF(u,v,{includeMetadataChanges:!0,Ku:!0});return jF(i,I)}(yield K_(n),n.asyncQueue,e,t,r)})),r.promise}function u$(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const l$=new Map;function SL(n,e,t){if(!t)throw new Ie(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function d$(n,e,t,r){if(!0===e&&!0===r)throw new Ie(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h$(n){if(!We.isDocumentKey(n))throw new Ie(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f$(n){if(We.isDocumentKey(n))throw new Ie(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QA(n);throw new Ie(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function p$(n,e){if(e<=0)throw new Ie(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class g${constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=u$(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new iq;switch(t.type){case"firstParty":return new cq(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=l$.get(e);t&&(xe("ComponentProvider","Removing Datastore"),l$.delete(e),t.terminate())}(this),Promise.resolve()}}function m$(n,e,t,r={}){var i;const a=(n=Yt(n,IE))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==u&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=ai.MOCK_USER;else{f=(0,$.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ie(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ai(v)}n._authCredentials=new sq(new I6(f,g))}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class dc extends Di{constructor(e,t,r){super(e,t,x_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new We(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function _$(n,e,...t){if(n=(0,$.m9)(n),SL("collection","path",e),n instanceof IE){const r=Qt.fromString(e,...t);return f$(r),new dc(n,null,r)}{if(!(n instanceof zn||n instanceof dc))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return f$(r),new dc(n.firestore,null,r)}}function JA(n,e,...t){if(n=(0,$.m9)(n),1===arguments.length&&(e=T6.A()),SL("doc","path",e),n instanceof IE){const r=Qt.fromString(e,...t);return h$(r),new zn(n,null,new We(r))}{if(!(n instanceof zn||n instanceof dc))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return h$(r),new zn(n.firestore,n instanceof dc?n.converter:null,new We(r))}}function y$(n,e){return n=(0,$.m9)(n),e=(0,$.m9)(e),(n instanceof zn||n instanceof dc)&&(e instanceof zn||e instanceof dc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AL(n,e){return n=(0,$.m9)(n),e=(0,$.m9)(e),n instanceof Di&&e instanceof Di&&n.firestore===e.firestore&&XC(n._query,e._query)&&n.converter===e.converter}class oY{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new CF(this,"async_queue_retry"),this.Xc=()=>{const t=zA();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=zA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=zA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Qr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,H.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!pd(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=BF.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,H.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ML(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class aY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends IE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new oY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||v$(this),this._firestoreClient.terminate()}}function uY(n,e){const t="object"==typeof n?n:(0,an.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,an._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,$.P0)("firestore");a&&m$(i,...a)}return i}function Tr(n){return n._firestoreClient||v$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function v$(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Uq(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,u$(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new YK(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function w$(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,H.Z)(function*(){try{yield ZA(n,t),yield wL(n,e),r.resolve()}catch(i){const a=i;if(!r$(a))throw a;Vo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function C$(n){if(n._initialized||n._terminated)throw new Ie(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hc(Jr.fromBase64String(e))}catch(t){throw new Ie(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hc(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ou{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mp{constructor(e){this._methodName=e}}class XA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}const vY=/^__.*__$/;class wY{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Mu(e,this.data,this.fieldMask,t,this.fieldTransforms):new R_(e,this.data,t,this.fieldTransforms)}}class E${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class eM{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new eM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return rM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(I$(this.ca)&&vY.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class CY{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vE(e)}ya(e,t,r,i=!1){return new eM({ca:e,methodName:t,ga:r,path:hr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=vE(n._databaseId);return new CY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tM(n,e,t,r,i,a={}){const u=n.ya(a.merge||a.mergeFields?2:0,e,t,i);RL("Data must be an object, but it was:",u,r);const f=D$(r,u);let g,v;if(a.merge)g=new Ts(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const T of a.mergeFields){const A=DE(e,T,t);if(!u.contains(A))throw new Ie(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);A$(I,A)||I.push(A)}g=new Ts(I),v=u.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=u.fieldTransforms;return new wY(new Ti(f),g,v)}class TE extends mp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof TE}}function b$(n,e,t){return new eM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xL extends mp{_toFieldTransform(e){return new rE(e.path,new P_)}isEqual(e){return e instanceof xL}}class EY extends mp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=b$(this,e,!0),r=this.pa.map(a=>yp(a,t)),i=new ap(r);return new rE(e.path,i)}isEqual(e){return this===e}}class IY extends mp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=b$(this,e,!0),r=this.pa.map(a=>yp(a,t)),i=new cp(r);return new rE(e.path,i)}isEqual(e){return this===e}}class bY extends mp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new O_(e.serializer,_B(e.serializer,this.Ia));return new rE(e.path,t)}isEqual(e){return this===e}}function PL(n,e,t,r){const i=n.ya(1,e,t);RL("Data must be an object, but it was:",i,r);const a=[],u=Ti.empty();gd(r,(g,v)=>{const I=nM(e,g,t);v=(0,$.m9)(v);const T=i.da(I);if(v instanceof TE)a.push(I);else{const A=yp(v,T);null!=A&&(a.push(I),u.set(I,A))}});const f=new Ts(a);return new E$(u,f,i.fieldTransforms)}function OL(n,e,t,r,i,a){const u=n.ya(1,e,t),f=[DE(e,r,t)],g=[i];if(a.length%2!=0)throw new Ie(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)f.push(DE(e,a[A])),g.push(a[A+1]);const v=[],I=Ti.empty();for(let A=f.length-1;A>=0;--A)if(!A$(v,f[A])){const N=f[A];let G=g[A];G=(0,$.m9)(G);const Q=u.da(N);if(G instanceof TE)v.push(N);else{const J=yp(G,Q);null!=J&&(v.push(N),I.set(N,J))}}const T=new Ts(v);return new E$(I,T,u.fieldTransforms)}function T$(n,e,t,r=!1){return yp(t,n.ya(r?4:3,e))}function yp(n,e){if(S$(n=(0,$.m9)(n)))return RL("Unsupported field value:",e,n),D$(n,e);if(n instanceof mp)return function(t,r){if(!I$(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let f=yp(u,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,$.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _B(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Yn.fromDate(t);return{timestampValue:k_(r.serializer,i)}}if(t instanceof Yn){const i=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:k_(r.serializer,i)}}if(t instanceof XA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hc)return{bytesValue:UB(r.serializer,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:K2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${QA(t)}`)}(n,e)}function D$(n,e){const t={};return B6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gd(n,(r,i)=>{const a=yp(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function S$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof XA||n instanceof hc||n instanceof zn||n instanceof mp)}function RL(n,e,t){if(!S$(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function DE(n,e,t){if((e=(0,$.m9)(e))instanceof Ou)return e._internalPath;if("string"==typeof e)return nM(n,e);throw rM("Field path arguments must be of type string or ",n,!1,void 0,t)}const TY=new RegExp("[~\\*/\\[\\]]");function nM(n,e,t){if(e.search(TY)>=0)throw rM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ou(...e.split("."))._internalPath}catch{throw rM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rM(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Ie(ae.INVALID_ARGUMENT,f+n+g)}function A$(n,e){return n.some(t=>t.isEqual(e))}class SE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DY extends SE{data(){return super.data()}}function iM(n,e){return"string"==typeof e?nM(n,e):e instanceof Ou?e._internalPath:e._delegate._internalPath}function M$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NL{}class AE extends NL{}function Ad(n,e,...t){let r=[];e instanceof NL&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Y_).length,u=i.filter(f=>f instanceof ME).length;if(a>1||a>0&&u>0)throw new Ie(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ME extends AE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ME(e,t,r)}_apply(e){const t=this._parse(e);return R$(e._query,t),new Di(e.firestore,e.converter,V2(e._query,t))}_parse(e){const t=_p(e.firestore);return function(i,a,u,f,g,v,I){let T;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ie(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){O$(I,v);const A=[];for(const N of I)A.push(P$(f,i,N));T={arrayValue:{values:A}}}else T=P$(f,i,I)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||O$(I,v),T=T$(u,"where",I,"in"===v||"not-in"===v);return Kt.create(g,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Y_ extends NL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Y_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const f of u)R$(a,f),a=V2(a,f)}(e._query,t),new Di(e.firestore,e.converter,V2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kL extends AE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kL(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new A_(i,a);return function(f,g){if(null===L2(f)){const v=EA(f);null!==v&&N$(0,v,g.field)}}(r,u),u}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Su(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sM extends AE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sM(e,t,r)}_apply(e){return new Di(e.firestore,e.converter,IA(e._query,this._limit,this._limitType))}}class oM extends AE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oM(e,t,r)}_apply(e){const t=x$(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class aM extends AE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aM(e,t,r)}_apply(e){const t=x$(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function x$(n,e,t,r){if(t[0]=(0,$.m9)(t[0]),t[0]instanceof SE)return function(i,a,u,f,g){if(!f)throw new Ie(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const I of op(i))if(I.field.isKeyField())v.push(ip(a,f.key));else{const T=f.data.field(I.field);if(gA(T))throw new Ie(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=I.field.canonicalString();throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}v.push(T)}return new Cd(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_p(n.firestore);return function(a,u,f,g,v,I){const T=a.explicitOrderBy;if(v.length>T.length)throw new Ie(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let N=0;N<v.length;N++){const G=v[N];if(T[N].field.isKeyField()){if("string"!=typeof G)throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!U2(a)&&-1!==G.indexOf("/"))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const Q=a.path.child(Qt.fromString(G));if(!We.isDocumentKey(Q))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);A.push(ip(u,J))}else{const Q=T$(f,g,G);A.push(Q)}}return new Cd(A,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function P$(n,e,t){if("string"==typeof(t=(0,$.m9)(t))){if(""===t)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U2(e)&&-1!==t.indexOf("/"))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!We.isDocumentKey(r))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ip(n,new We(r))}if(t instanceof zn)return ip(n,t._key);throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QA(t)}.`)}function O$(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R$(n,e){if(e.isInequality()){const r=EA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=L2(n);null!==a&&N$(0,i,a)}const t=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function N$(n,e,t){if(!t.isEqual(e))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class FL{convertValue(e,t="none"){switch(vd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gd(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new XA(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ZC(e));default:return null}}convertTimestamp(e){const t=md(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);ct(ZB(r));const i=new _d(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Ir(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class kY extends FL{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ru extends SE{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iM("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xE extends Ru{data(e={}){return super.data(e)}}class Md{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xE(this._firestore,this._userDataWriter,r.key,r,new vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new xE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new xE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==u.type&&(g=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),v=a.indexOf(u.doc.key)),{type:LY(u.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function LY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function F$(n,e){return n instanceof Ru&&e instanceof Ru?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Md&&e instanceof Md&&n._firestore===e._firestore&&AL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xd extends FL{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function L$(n,e,t){n=Yt(n,zn);const r=Yt(n.firestore,Gn),i=cM(n.converter,e,t);return Q_(r,[tM(_p(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function U$(n,e,t,...r){n=Yt(n,zn);const i=Yt(n.firestore,Gn),a=_p(i);let u;return u="string"==typeof(e=(0,$.m9)(e))||e instanceof Ou?OL(a,"updateDoc",n._key,e,t,r):PL(a,"updateDoc",n._key,e),Q_(i,[u.toMutation(n._key,Qn.exists(!0))])}function V$(n,...e){var t,r,i;n=(0,$.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||ML(e[u])||(a=e[u],u++);const f={includeMetadataChanges:a.includeMetadataChanges};if(ML(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,v,I;if(n instanceof zn)v=Yt(n.firestore,Gn),I=x_(n._key.path),g={next:T=>{e[u]&&e[u](LL(v,n,T))},error:e[u+1],complete:e[u+2]};else{const T=Yt(n,Di);v=Yt(T.firestore,Gn),I=T._query;const A=new xd(v);g={next:N=>{e[u]&&e[u](new Md(v,A,T,N))},error:e[u+1],complete:e[u+2]},M$(n._query)}return function(T,A,N,G){const Q=new qA(G),J=new WF(A,Q,N);return T.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return jF(yield K_(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return HF(yield K_(T),J)}))}}(Tr(v),I,f,g)}function Q_(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function xK(n,e,t){return QF.apply(this,arguments)}(yield TL(t),r,i)})),i.promise}(Tr(n),e)}function LL(n,e,t){const r=t.docs.get(e._key),i=new xd(n);return new Ru(n,i,e._key,r,new vp(t.hasPendingWrites,t.fromCache),e.converter)}const tQ={maxAttempts:5};class B${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const i=Pd(e,this._firestore),a=cM(i.converter,t,r),u=tM(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Pd(e,this._firestore);let u;return u="string"==typeof(t=(0,$.m9)(t))||t instanceof Ou?OL(this._dataReader,"WriteBatch.update",a._key,t,r,i):PL(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pd(e,this._firestore);return this._mutations=this._mutations.concat(new N_(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pd(n,e){if((n=(0,$.m9)(n)).firestore!==e)throw new Ie(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class nQ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=Pd(e,this._firestore),r=new kY(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const a=i[0];if(a.isFoundDocument())return new SE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new SE(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Pd(e,this._firestore),a=cM(i.converter,t,r),u=tM(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Pd(e,this._firestore);let u;return u="string"==typeof(t=(0,$.m9)(t))||t instanceof Ou?OL(this._dataReader,"Transaction.update",a._key,t,r,i):PL(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Pd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pd(e,this._firestore),r=new xd(this._firestore);return super.get(e).then(i=>new Ru(this._firestore,r,t._key,i._document,new vp(!1,!1),t.converter))}}function UL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $$(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function H$(){if(!function Fq(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){b_=an.SDK_VERSION,(0,an._registerComponent)(new Er.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new Gn(new oq(t.getProvider("auth-internal")),new uq(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(f.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,an.registerVersion)(E6,"3.13.0",n),(0,an.registerVersion)(E6,"3.13.0","esm2017")}();class PE{constructor(e){this._delegate=e}static fromBase64String(e){return H$(),new PE(hc.fromBase64String(e))}static fromUint8Array(e){return $$(),new PE(hc.fromUint8Array(e))}toBase64(){return H$(),this._delegate.toBase64()}toUint8Array(){return $$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VL(n){return function dQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hQ{enableIndexedDbPersistence(e,t){return function lY(n,e){C$(n=Yt(n,Gn));const t=Tr(n);if(t._uninitializedComponentsProvider)throw new Ie(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Vo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Z_;return w$(t,i,new yL(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dY(n){C$(n=Yt(n,Gn));const e=Tr(n);if(e._uninitializedComponentsProvider)throw new Ie(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Vo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Z_;return w$(e,r,new t$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hY(n){if(n._initialized&&!n._terminated)throw new Ie(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{yield(t=(0,H.Z)(function*(r){if(!pa.D())return Promise.resolve();const i=r+"main";yield pa.delete(i)}),function(r){return t.apply(this,arguments)})(lF(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class z${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){m$(this._delegate,e,t,r)}enableNetwork(){return function pY(n){return function QK(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){const e=yield i$(n),t=yield s$(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),wE(i)}(t)}))}(Tr(n=Yt(n,Gn)))}(this._delegate)}disableNetwork(){return function gY(n){return function JK(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){const e=yield i$(n),t=yield s$(n);return e.setNetworkEnabled(!1),(r=(0,H.Z)(function*(i){const a=qe(i);a.vu.add(0),yield j_(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Tr(n=Yt(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,d$("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fY(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function NK(n,e){return nL.apply(this,arguments)}(yield TL(e),t)})),t.promise}(Tr(n=Yt(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function WY(n,e){return function tY(n,e){const t=new qA(e);return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return r=yield K_(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return r=yield K_(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Tr(n=Yt(n,Gn)),ML(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new J_(this,_$(this._delegate,e))}catch(t){throw as(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bo(this,JA(this._delegate,e))}catch(t){throw as(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function sY(n,e){if(n=Yt(n,IE),SL("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Di(n,null,(t=e,new Su(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw as(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rQ(n,e,t){n=Yt(n,Gn);const r=Object.assign(Object.assign({},tQ),t);return function(i){if(i.maxAttempts<1)throw new Ie(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const f=new Qr;return i.asyncQueue.enqueueAndForget((0,H.Z)(function*(){const g=yield function o$(n){return KA(n).then(e=>e.datastore)}(i);new KK(i.asyncQueue,g,u,a,f).run()})),f.promise}(Tr(n),i=>e(new nQ(n,i)),r)}(this._delegate,t=>e(new G$(this,t)))}batch(){return Tr(this._delegate),new W$(new B$(this._delegate,e=>Q_(this._delegate,e)))}loadBundle(e){return function mY(n,e){const t=Tr(n=Yt(n,Gn)),r=new aY;return function nY(n,e,t,r){const i=function(a,u){let f;return f="string"==typeof a?xB().encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return n$(g,v);if(g instanceof ArrayBuffer)return n$(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new qK(g,u);var g}(t,vE(e));n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){!function GK(n,e,t){const r=qe(n);var i;(i=(0,H.Z)(function*(a,u,f){try{const g=yield u.getMetadata();if(yield function(A,N){const G=qe(A),Q=br(N.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",J=>G.qs.getBundleMetadata(J,N.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(a.localStore,g))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);f._updateProgress(Wj(g));const v=new bK(g,a.localStore,u.serializer);let I=yield u.bc();for(;I;){const A=yield v.zu(I);A&&f._updateProgress(A),I=yield u.bc()}const T=yield v.complete();return yield Pu(a,T.Ju,void 0),yield function(A,N){const G=qe(A);return G.persistence.runTransaction("Save bundle","readwrite",Q=>G.qs.saveBundleMetadata(Q,N))}(a.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return Vo("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var A}),function(a,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield TL(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _Y(n,e){return function rY(n,e){return n.asyncQueue.enqueue((0,H.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield YA(n),e)}))}(Tr(n=Yt(n,Gn)),e).then(t=>t?new Di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class uM extends FL{constructor(e){super(),this.firestore=e}convertBytes(e){return new PE(new hc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bo.forKey(t,this.firestore,null)}}class G${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uM(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new OE(this._firestore,new Ru(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cp(e);return r?(UL("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Cp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class W${constructor(e){this._delegate=e}set(e,t,r){const i=Cp(e);return r?(UL("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Cp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new RE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new wp(e,new uM(e),t),i.set(t,a)),a}}wp.INSTANCES=new WeakMap;class Bo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uM(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bo(t,new zn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Bo(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new J_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new J_(this.firestore,_$(this._delegate,e))}catch(t){throw as(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$.m9)(e))instanceof zn&&y$(this._delegate,e)}set(e,t){t=UL("DocumentReference.set",t);try{return t?L$(this._delegate,e,t):L$(this._delegate,e)}catch(r){throw as(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?U$(this._delegate,e):U$(this._delegate,e,t,...r)}catch(i){throw as(i,"updateDoc()","DocumentReference.update()")}}delete(){return function zY(n){return Q_(Yt(n.firestore,Gn),[new N_(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=q$(e),r=Z$(e,i=>new OE(this.firestore,new Ru(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return V$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function VY(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn),t=Tr(e),r=new xd(e);return function XK(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return(r=(0,H.Z)(function*(i,a,u){try{const f=yield function(g,v){const I=qe(g);return I.persistence.runTransaction("read document","readonly",T=>I.localDocuments.getDocument(T,v))}(i,a);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ie(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=z_(f,`Failed to get document '${a} from cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield YA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ru(e,r,n._key,i,new vp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function BY(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn);return a$(Tr(e),n._key,{source:"server"}).then(t=>LL(e,n,t))}(this._delegate):function UY(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn);return a$(Tr(e),n._key).then(t=>LL(e,n,t))}(this._delegate),t.then(r=>new OE(this.firestore,new Ru(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bo(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function as(n,e,t){return n.message=n.message.replace(e,t),n}function q$(n){for(const e of n)if("object"==typeof e&&!VL(e))return e;return{}}function Z$(n,e){var t,r;let i;return i=VL(n[0])?n[0]:VL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class OE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return F$(this._delegate,e._delegate)}}class RE extends OE{data(e){const t=this._delegate.data(e);return function rq(n,e){n||et()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uM(e)}where(e,t,r){try{return new cs(this.firestore,Ad(this._delegate,function SY(n,e,t){const r=e,i=iM("where",n);return ME._create(i,r,t)}(e,t,r)))}catch(i){throw as(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,Ad(this._delegate,function AY(n,e="asc"){const t=e,r=iM("orderBy",n);return kL._create(r,t)}(e,t)))}catch(r){throw as(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,Ad(this._delegate,function MY(n){return p$("limit",n),sM._create("limit",n,"F")}(e)))}catch(t){throw as(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,Ad(this._delegate,function xY(n){return p$("limitToLast",n),sM._create("limitToLast",n,"L")}(e)))}catch(t){throw as(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,Ad(this._delegate,function PY(...n){return oM._create("startAt",n,!0)}(...e)))}catch(t){throw as(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,Ad(this._delegate,function OY(...n){return oM._create("startAfter",n,!1)}(...e)))}catch(t){throw as(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,Ad(this._delegate,function RY(...n){return aM._create("endBefore",n,!1)}(...e)))}catch(t){throw as(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,Ad(this._delegate,function NY(...n){return aM._create("endAt",n,!0)}(...e)))}catch(t){throw as(t,"endAt()","Query.endAt()")}}isEqual(e){return AL(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $Y(n){n=Yt(n,Di);const e=Yt(n.firestore,Gn),t=Tr(e),r=new xd(e);return function eY(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return(r=(0,H.Z)(function*(i,a,u){try{const f=yield BA(i,a,!0),g=new Kj(a,f.ir),v=g.sc(f.documents),I=g.applyChanges(v,!1);u.resolve(I.snapshot)}catch(f){const g=z_(f,`Failed to execute query '${a} against cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield YA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Md(e,r,n,i))}(this._delegate):"server"===e?.source?function HY(n){n=Yt(n,Di);const e=Yt(n.firestore,Gn),t=Tr(e),r=new xd(e);return c$(t,n._query,{source:"server"}).then(i=>new Md(e,r,n,i))}(this._delegate):function jY(n){n=Yt(n,Di);const e=Yt(n.firestore,Gn),t=Tr(e),r=new xd(e);return M$(n._query),c$(t,n._query).then(i=>new Md(e,r,n,i))}(this._delegate),t.then(r=>new BL(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=q$(e),r=Z$(e,i=>new BL(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return V$(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}class pQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new RE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new RE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new RE(this._firestore,r))})}isEqual(e){return F$(this._delegate,e._delegate)}}class J_ extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bo(this.firestore,e):null}doc(e){try{return new Bo(this.firestore,void 0===e?JA(this._delegate):JA(this._delegate,e))}catch(t){throw as(t,"doc()","CollectionReference.doc()")}}add(e){return function GY(n,e){const t=Yt(n.firestore,Gn),r=JA(n),i=cM(n.converter,e);return Q_(t,[tM(_p(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Bo(this.firestore,t))}isEqual(e){return y$(this._delegate,e._delegate)}withConverter(e){return new J_(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function Cp(n){return Yt(n,zn)}class jL{constructor(...e){this._delegate=new Ou(...e)}static documentId(){return new jL(hr.keyField().canonicalString())}isEqual(e){return(e=(0,$.m9)(e))instanceof Ou&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sQ(){return new xL("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ep(e)}static delete(){const e=function iQ(){return new TE("deleteField")}();return e._methodName="FieldValue.delete",new Ep(e)}static arrayUnion(...e){const t=function oQ(...n){return new EY("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ep(t)}static arrayRemove(...e){const t=function aQ(...n){return new IY("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ep(t)}static increment(e){const t=function cQ(n){return new bY("increment",n)}(e);return t._methodName="FieldValue.increment",new Ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gQ={Firestore:z$,GeoPoint:XA,Timestamp:Yn,Blob:PE,Transaction:G$,WriteBatch:W$,DocumentReference:Bo,DocumentSnapshot:OE,Query:cs,QueryDocumentSnapshot:RE,QuerySnapshot:BL,CollectionReference:J_,FieldPath:jL,FieldValue:Ep,setLogLevel:function fQ(n){!function nq(n){hd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function _Q(n){(function mQ(n,e){n.INTERNAL.registerComponent(new Er.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gQ)))})(n,(e,t)=>new z$(e,t,new hQ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(ZG.Z);var yQ=k(3019);class vQ extends _i.x{constructor(e=1/0,t=1/0,r=ws){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)f=g;f&&r.splice(0,f+1)}}}var wQ=k(3020);function K$(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,wQ.B)({connector:()=>new vQ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Y$(n,e){return(0,js.m)(e)?(0,Vn.w)(()=>n,e):(0,Vn.w)(()=>n)}k(120);const Q$=new d.OlP("angularfire2.auth.use-emulator"),J$=new d.OlP("angularfire2.auth.settings"),X$=new d.OlP("angularfire2.auth.tenant-id"),e7=new d.OlP("angularfire2.auth.langugage-code"),t7=new d.OlP("angularfire2.auth.use-device-language"),n7=new d.OlP("angularfire.auth.persistence"),r7=(n,e,t,r,i,a,u,f)=>(0,da.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),u)for(const[v,I]of Object.entries(u))g.settings[v]=I;return f&&g.setPersistence(f),g},[t,r,i,a,u,f]);let $L=(()=>{class n{constructor(t,r,i,a,u,f,g,v,I,T,A,N){const G=new _i.x,Q=(0,lt.of)(void 0).pipe((0,sd.Q)(u.outsideAngular),(0,Vn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,8661)))),(0,Ct.U)(()=>(0,da.on)(t,a,r)),(0,Ct.U)(J=>r7(J,a,f,v,I,T,g,A)),K$({bufferSize:1,refCount:!1}));if(gi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{Q.pipe(tr()).subscribe();const be=Q.pipe((0,Vn.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),ns,K$({bufferSize:1,refCount:!1})),ze=Q.pipe((0,Vn.w)(Ye=>new Hr.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(St=>gt.next(St),St=>gt.error(St),()=>gt.complete()))})))),ke=Q.pipe((0,Vn.w)(Ye=>new Hr.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(St=>gt.next(St),St=>gt.error(St),()=>gt.complete()))}))));this.authState=be.pipe(Y$(ze),(0,qf.R)(u.outsideAngular),(0,sd.Q)(u.insideAngular)),this.user=be.pipe(Y$(ke),(0,qf.R)(u.outsideAngular),(0,sd.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Vn.w)(Ye=>Ye?(0,fn.D)(Ye.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe((0,Vn.w)(Ye=>Ye?(0,fn.D)(Ye.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,yQ.T)(be,G,this.authState.pipe(wr(Ye=>!Ye))).pipe((0,Ct.U)(Ye=>Ye?.user?Ye:null),(0,qf.R)(u.outsideAngular),(0,sd.Q)(u.insideAngular))}return(0,da.pX)(this,Q,a,{spy:{apply:(J,be,ze)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&ze.then(ke=>G.next(ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(da.Dh),d.LFG(da.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ko),d.LFG(Q$,8),d.LFG(J$,8),d.LFG(X$,8),d.LFG(e7,8),d.LFG(t7,8),d.LFG(n7,8),d.LFG(Yf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function i7(n,e){return function EQ(n,e=Av){return new Hr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function HL(n,e){return i7(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function lM(n,e){return HL(n,e).pipe(Ra(void 0),kk(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const g=i.find(I=>I.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(I=>I.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),a}))}function s7(n,e,t){return lM(n,t).pipe(Zo((r,i)=>function bQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,qG.x)(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function o7(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class a7{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ra(void 0),kk(),wr(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),ns)}auditTrail(e){return this.stateChanges(e).pipe(Zo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=o7(e);return s7(this.query,t,this.afs.schedulers.outsideAngular).pipe(ns)}valueChanges(e={}){return HL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ns)}get(e){return(0,fn.D)(this.query.get(e)).pipe(ns)}add(e){return this.ref.add(e)}doc(e){return new c7(this.ref.doc(e),this.afs)}}class c7{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=u7(r,t);return new a7(i,a,this.afs)}snapshotChanges(){return function IQ(n,e){return i7(n,e).pipe(Ra(void 0),kk(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ns)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(ns)}}class DQ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),wr(t=>t.length>0),ns):lM(this.query,this.afs.schedulers.outsideAngular).pipe(ns)}auditTrail(e){return this.stateChanges(e).pipe(Zo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=o7(e);return s7(this.query,t,this.afs.schedulers.outsideAngular).pipe(ns)}valueChanges(e={}){return HL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ns)}get(e){return(0,fn.D)(this.query.get(e)).pipe(ns)}}const SQ=new d.OlP("angularfire2.enableFirestorePersistence"),AQ=new d.OlP("angularfire2.firestore.persistenceSettings"),MQ=new d.OlP("angularfire2.firestore.settings"),xQ=new d.OlP("angularfire2.firestore.use-emulator");function u7(n,e=(t=>t)){return{query:e(n),ref:n}}let GL=(()=>{class n{constructor(t,r,i,a,u,f,g,v,I,T,A,N,G,Q,J,be,ze){this.schedulers=g;const ke=(0,da.on)(t,f,r),Ye=I;T&&r7(ke,f,A,G,Q,J,N,be),[this.firestore,this.persistenceEnabled$]=(0,da.cc)(`${ke.name}.firestore`,"AngularFirestore",ke.name,()=>{const gt=f.runOutsideAngular(()=>ke.firestore());if(a&&gt.settings(a),Ye&&gt.useEmulator(...Ye),i&&!gi(u)){const St=()=>{try{return(0,fn.D)(gt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Dr){return typeof console<"u"&&console.warn(Dr),(0,lt.of)(!1)}};return[gt,f.runOutsideAngular(St)]}return[gt,(0,lt.of)(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=u7(i,r),f=this.schedulers.ngZone.run(()=>a);return new a7(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new DQ(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new c7(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(da.Dh),d.LFG(da.xv,8),d.LFG(SQ,8),d.LFG(MQ,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ko),d.LFG(AQ,8),d.LFG(xQ,8),d.LFG($L,8),d.LFG(Q$,8),d.LFG(J$,8),d.LFG(X$,8),d.LFG(e7,8),d.LFG(t7,8),d.LFG(n7,8),d.LFG(Yf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ga=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new vr.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,H.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new TV.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,H.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,H.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,H.Z)(function*(){try{yield t.afAuth.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var i=this;return(0,H.Z)(function*(){var a;i.db.collection("users").doc(t.user.uid).get().pipe(gn(1)).subscribe({next:(a=(0,H.Z)(function*(u){if(u.exists){const f=u.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return a.apply(this,arguments)}),error:a=>{console.error(a)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG($L),d.LFG(GL))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dM=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.storage=i,this._posts$=new vr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return this.db.collection("posts",i=>i.orderBy("createdAt","desc")).valueChanges().pipe(gn(1),(0,Vn.w)(i=>{let a=i.reduce((f,g)=>f.concat(g.likedByUsers||[]),[]);const u=Array.from(new Set(a));return u.length?Go(u.map(f=>this.authService.getUserById(f))).pipe((0,Ct.U)(f=>i.map(g=>(g.likedByUsers=g.likedByUsers?g.likedByUsers.map(v=>f.find(I=>I._id===v)):[],g))),function iP(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?mo.y:(0,Gr.e)((a,u)=>{let g,f=0;const v=()=>{let I=!1;g=a.subscribe((0,Mr.x)(u,T=>{i&&(f=0),u.next(T)},void 0,T=>{if(f++<t){const A=()=>{g?(g.unsubscribe(),g=null,v()):I=!0};if(null!=r){const N="number"==typeof r?function rP(n=0,e,t=nP){let r=-1;return null!=e&&((0,vb.K)(e)?t=e:r=e),new Hr.y(i=>{let a=function Pl(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(r):(0,Uc.Xf)(r(T,f)),G=(0,Mr.x)(u,()=>{G.unsubscribe(),A()},()=>{u.complete()});N.subscribe(G)}else A()}else u.error(T)})),I&&(g.unsubscribe(),g=null,v())};v()})}(1),Xi(this._handleError)):[i]}),Tn(function(){var i=(0,H.Z)(function*(a){const u=t.authService.getLoggedInUser();if(!u)return;const f=t.db.collection("users").doc(u?.user?.uid).valueChanges(),g=yield rf(f),v=a.filter(I=>{const T=g.followingUsers.find(N=>N===I.creatorId);return I.creatorId===u.user.uid||T||!1});t._posts$.next([...v])});return function(a){return i.apply(this,arguments)}}()))}toggleLike(t,r){var i=this;return(0,H.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,H.Z)(function*(){return new Promise(function(){var i=(0,H.Z)(function*(a,u){try{const f=Mf(t),v=r.authService.getLoggedInUser().user.uid;r.db.collection("users").doc(v).valueChanges().pipe(gn(1)).subscribe({next:(I=(0,H.Z)(function*(T){const A=T,N=f.likedByUsers.slice();N.push(A),f.likedByUsers=f.likedByUsers.map(be=>be._id),f.likedByUsers.push(v),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...f.likedByUsers]});const G=r._posts$.value,Q=G.findIndex(be=>be._id===t._id),J={...f,likedByUsers:[...N]};G.splice(Q,1,J),r._posts$.next([...G]),a("Add like done")}),function(A){return I.apply(this,arguments)})})}catch(f){throw u("Add like failed:"),f}var I});return function(a,u){return i.apply(this,arguments)}}())})()}removeLike(t){var r=this;return(0,H.Z)(function*(){return new Promise(function(){var i=(0,H.Z)(function*(a,u){try{const f=Mf(t),v=r.authService.getLoggedInUser().user.uid,I=f.likedByUsers.findIndex(G=>G._id===v);f.likedByUsers.splice(I,1),f.likedByUsers=f.likedByUsers.map(G=>G._id),yield r.db.collection("posts").doc(f._id).update({likedByUsers:[...f.likedByUsers]});const T=r._posts$.value,A=T.findIndex(G=>G._id===t._id);t.likedByUsers.splice(I,1);const N={...t,likedByUsers:[...t.likedByUsers]};T.splice(A,1,N),r._posts$.next([...T]),a("Remove like done")}catch(f){throw a("Remove like failed!"),f}});return function(a,u){return i.apply(this,arguments)}}())})()}uploadMedia(t){var r=this;return(0,H.Z)(function*(){return new Promise(function(){var i=(0,H.Z)(function*(a,u){try{const f=r._makeId(),g=GG(r.storage,`postsMedia/${t.name}${f}`),v=WG(g,t);v.on("state_changed",I=>{console.log(`Upload media is ${I.bytesTransferred/I.totalBytes*100}% done`)},I=>{console.error(I),u(I)},(0,H.Z)(function*(){const I=yield HG(v.snapshot.ref);a(I)}))}catch(f){throw u(f),f}});return function(a,u){return i.apply(this,arguments)}}())})()}createPost(t){var r=this;return(0,H.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.user.uid,t.creatorFullName=i.user.displayName,t.createdAt=Date.now();const a=yield r.db.collection("posts").add(t);console.log("docData",a),yield r.db.collection("posts").doc(a.id).update({_id:a.id})})()}_makeId(t=5){let r="";for(let a=0;a<t;a++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),qo(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(GL),d.LFG(ga),d.LFG(FS))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hM(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let u,a=!1;n.subscribe({next:f=>{u=f,a=!0},error:i,complete:()=>{a?r(u):t?r(e.defaultValue):i(new Gs)}})})}let PQ=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,i){var a=this;return(0,H.Z)(function*(){t?yield a.addFollow(r,i):yield a.removeFollow(r,i)})()}addFollow(t,r){var i=this;return(0,H.Z)(function*(){var v;i.authService.loggedInUser$.pipe(gn(1)).subscribe({next:(v=(0,H.Z)(function*(I){yield i.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,I?.user?.uid]})}),function(T){return v.apply(this,arguments)})});const a=i.authService.loggedInUser$.pipe(gn(1)),u=yield hM(a),f=i.db.collection("users").doc(u?.user?.uid).valueChanges().pipe(gn(1)),g=yield hM(f);yield i.db.collection("users").doc(g._id).update({followingUsers:[...g.followingUsers,t._id]})})()}removeFollow(t,r){var i=this;return(0,H.Z)(function*(){const a=i.authService.loggedInUser$.pipe(gn(1)),u=yield hM(a),f=i.db.collection("users").doc(u?.user?.uid).valueChanges().pipe(gn(1)),g=yield hM(f),v=Mf(t.followedByUsers),I=v.findIndex(A=>A===u?.user?.uid);if(-1===I)return;v.splice(I,1),yield i.db.collection("users").doc(t._id).update({followedByUsers:v});const T=g.followingUsers.findIndex(A=>A===t._id);g.followingUsers.splice(T,1),yield i.db.collection("users").doc(g._id).update({followingUsers:g.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ga),d.LFG(GL))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OQ=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function RQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(3);return d.KtG(i.toggleFollow())}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function NQ(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",10)(1,"ul"),d.YNc(2,RQ,2,1,"li",11),d.qZA()()),2&n){const t=d.oxw(2);d.xp6(2),d.Q6J("ngIf",t.creator._id!==t.loggedInUser.user.uid)}}function kQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA(),d.YNc(13,NQ,3,1,"div",9),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,4,t.post.createdAt),""),d.xp6(7),d.Q6J("ngIf",t.isMoreOptionsModalShown)}}let FQ=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isMoreOptionsModalShown=!1,this.isFollowClicked=!1}ngOnInit(){var t=this;return(0,H.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield rf(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(u=>u===a.user.uid)})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&d.YNc(0,kQ,14,6,"div",0),2&r&&d.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[Qi,OQ],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();const LQ=function(n){return{"btn-toggle-follow":!0,following:n}};function UQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",3),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleFollow())}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw(2);d.Q6J("ngClass",d.VKq(2,LQ,t.isFollowClicked)),d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function VQ(n,e){if(1&n&&(d.TgZ(0,"li"),d._UZ(1,"img",1),d.TgZ(2,"h4"),d._uU(3),d.qZA(),d.YNc(4,UQ,2,4,"button",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(t.user.fullName),d.xp6(1),d.Q6J("ngIf",t.user._id!==t.loggedInUser.user.uid)}}let BQ=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,H.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield rf(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(u=>u===a?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(r,i){1&r&&d.YNc(0,VQ,5,3,"li",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Ca,Qi],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function jQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let $Q=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,i){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return i.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,jQ,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",i.post.likedByUsers))},dependencies:[Ic,BQ],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})();function HQ(n,e){if(1&n){const t=d.EpF();d.ynx(0),d.TgZ(1,"img",2),d.NdJ("load",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onImageLoad())}),d.qZA(),d.BQk()}if(2&n){const t=d.oxw();d.xp6(1),d.Tol(t.post.filterSelected),d.Q6J("src",t.post.imgUrl,d.LSH)}}function zQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",22),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",23)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",24),d.qZA()()}}function GQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",22),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",25)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",26),d.qZA()()}}function WQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",31),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(3);return d.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function qQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",32),d.NdJ("onToggleLikedByUsersModal",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=d.oxw(3);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function ZQ(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",27),d._UZ(1,"img",28),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",29),d._uU(5),d.qZA(),d.YNc(6,WQ,5,4,"span",0),d.qZA(),d.YNc(7,qQ,1,2,"liked-by-users-list",30),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function KQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",36),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(4);return d.KtG(i.isMoreClicked=!i.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function YQ(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",34),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,KQ,2,0,"button",35),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function QQ(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",34),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}function JQ(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",33),d.YNc(1,YQ,6,8,"p",0),d.YNc(2,QQ,4,2,"p",0),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!t.isMoreClicked),d.xp6(1),d.Q6J("ngIf",t.isMoreClicked)}}function XQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",3)(1,"post-header",4),d.NdJ("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA(),d._UZ(2,"img",5),d.TgZ(3,"div",6)(4,"div",7)(5,"div",8),d.YNc(6,zQ,5,0,"button",9),d.YNc(7,GQ,5,0,"button",9),d.TgZ(8,"button",10),d.O4$(),d.TgZ(9,"svg",11)(10,"title"),d._uU(11,"Comment"),d.qZA(),d._UZ(12,"path",12),d.qZA()(),d.kcU(),d.TgZ(13,"button",13),d.O4$(),d.TgZ(14,"svg",14)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",15)(18,"polygon",16),d.qZA()()(),d.kcU(),d.TgZ(19,"button",17),d.O4$(),d.TgZ(20,"svg",18)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",19),d.qZA()()(),d.YNc(24,ZQ,8,4,"div",20),d.YNc(25,JQ,3,2,"div",21),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),d.xp6(1),d.Tol(t.post.filterSelected),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!t.isLikeClicked),d.xp6(1),d.Q6J("ngIf",t.isLikeClicked),d.xp6(17),d.Q6J("ngIf",t.post.likedByUsers.length),d.xp6(1),d.Q6J("ngIf",t.creator)}}let eJ=(()=>{class n{constructor(t){this.authService=t,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isImgLoaded=!1}ngOnInit(){this.authService.getUserById(this.post.creatorId).pipe(gn(1)).subscribe({next:t=>{this.creator=t,this.post.likedByUsers.find(i=>i._id===this.loggedInUser?.user?.uid)&&(this.isLikeClicked=!0),this.isComponentInitialized=!0}})}onImageLoad(){this.isImgLoaded=!0}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:Mf(this.post),isLikeClicked:this.isLikeClicked})}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:2,vars:2,consts:[[4,"ngIf"],["class","post-card",4,"ngIf"],["alt","post",3,"src","load"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment"],["aria-label","Comment","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"]],template:function(r,i){1&r&&(d.YNc(0,HQ,2,3,"ng-container",0),d.YNc(1,XQ,26,10,"li",1)),2&r&&(d.Q6J("ngIf",!i.isImgLoaded),d.xp6(1),d.Q6J("ngIf",i.isComponentInitialized&&i.isImgLoaded))},dependencies:[Qi,FQ,$Q,mr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}"]})}return n})();function tJ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleLike.emit(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let nJ=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,tJ,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",i.posts))},dependencies:[Ic,eJ],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function rJ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-list",3),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onToggleLike(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onToggleFollow(i))}),d.qZA()}if(2&n){const t=d.oxw().ngIf;d.Q6J("posts",t)}}function iJ(n,e){if(1&n&&(d.TgZ(0,"section",1),d.YNc(1,rJ,1,1,"post-list",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.isComponentInitialized)}}let sJ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.userService=i,this.isComponentInitialized=!1,this.isToggleLikeProcessing=!1}ngOnInit(){this.postService.getPosts().pipe(gn(1)).subscribe({error:t=>{console.error(t)},complete:()=>{this.posts$=this.postService.posts$,this.isComponentInitialized=!0}})}onToggleLike(t){var r=this;return(0,H.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(gn(1)).subscribe(function(){var i=(0,H.Z)(function*(a){t.user=a,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(a){return i.apply(this,arguments)}}())}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(dM),d.Y36(ga),d.Y36(PQ))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow",4,"ngIf"],[3,"posts","onToggleLike","onToggleFollow"]],template:function(r,i){1&r&&(d.YNc(0,iJ,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,i.posts$))},dependencies:[Qi,nJ,ju],styles:["[_nghost-%COMP%]{display:block;padding-block:2em}"]})}return n})(),l7=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),Ip=(()=>{class n extends l7{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const fc=new d.OlP("NgValueAccessor"),cJ={provide:fc,useExisting:(0,d.Gpc)(()=>NE),multi:!0},lJ=new d.OlP("CompositionEventMode");let NE=(()=>{class n extends l7{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uJ(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(lJ,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&d.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[d._Bn([cJ]),d.qOj]})}return n})();const qi=new d.OlP("NgValidators"),Rd=new d.OlP("NgAsyncValidators");function C7(n){return null!=n}function E7(n){return(0,d.QGY)(n)?(0,fn.D)(n):n}function I7(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function b7(n,e){return e.map(t=>t(n))}function T7(n){return n.map(e=>function hJ(n){return!n.validate}(e)?e:t=>e.validate(t))}function WL(n){return null!=n?function D7(n){if(!n)return null;const e=n.filter(C7);return 0==e.length?null:function(t){return I7(b7(t,e))}}(T7(n)):null}function qL(n){return null!=n?function S7(n){if(!n)return null;const e=n.filter(C7);return 0==e.length?null:function(t){return function oJ(...n){const e=(0,Hs.jO)(n),{args:t,keys:r}=Cn(n),i=new Hr.y(a=>{const{length:u}=t;if(!u)return void a.complete();const f=new Array(u);let g=u,v=u;for(let I=0;I<u;I++){let T=!1;(0,Uc.Xf)(t[I]).subscribe((0,Mr.x)(a,A=>{T||(T=!0,v--),f[I]=A},()=>g--,void 0,()=>{(!g||!T)&&(v||a.next(r?zs(r,f):f),a.complete())}))}});return e?i.pipe(Fc(e)):i}(b7(t,e).map(E7)).pipe((0,Ct.U)(I7))}}(T7(n)):null}function A7(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ZL(n){return n?Array.isArray(n)?n:[n]:[]}function pM(n,e){return Array.isArray(n)?n.includes(e):n===e}function P7(n,e){const t=ZL(e);return ZL(n).forEach(i=>{pM(t,i)||t.push(i)}),t}function O7(n,e){return ZL(e).filter(t=>!pM(n,t))}class R7{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class us extends R7{get formDirective(){return null}get path(){return null}}class Nd extends R7{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class N7{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let KL=(()=>{class n extends N7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Nd,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[d.qOj]})}return n})(),YL=(()=>{class n extends N7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(us,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[d.qOj]})}return n})();const kE="VALID",mM="INVALID",X_="PENDING",FE="DISABLED";function XL(n){return(_M(n)?n.validators:n)||null}function e4(n,e){return(_M(e)?e.asyncValidators:n)||null}function _M(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class U7{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kE}get invalid(){return this.status===mM}get pending(){return this.status==X_}get disabled(){return this.status===FE}get enabled(){return this.status!==FE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(P7(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(P7(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O7(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O7(e,this._rawAsyncValidators))}hasValidator(e){return pM(this._rawValidators,e)}hasAsyncValidator(e){return pM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=X_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kE||this.status===X_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?FE:kE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=X_,this._hasOwnPendingAsyncValidator=!0;const t=E7(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?FE:this.errors?mM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(X_)?X_:this._anyControlsHaveStatus(mM)?mM:kE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_M(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function mJ(n){return Array.isArray(n)?WL(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function _J(n){return Array.isArray(n)?qL(n):n||null}(this._rawAsyncValidators)}}class t4 extends U7{constructor(e,t,r){super(XL(t),e4(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function L7(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function F7(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const bp=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>LE}),LE="always";function UE(n,e,t=LE){n4(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function wJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&V7(n,e)})}(n,e),function EJ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function CJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&V7(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vJ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function n4(n,e){const t=function M7(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(A7(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function x7(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(A7(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wM(e._rawValidators,i),wM(e._rawAsyncValidators,i)}function V7(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const SJ={provide:us,useExisting:(0,d.Gpc)(()=>BE)},VE=(()=>Promise.resolve())();let BE=(()=>{class n extends us{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new t4({},WL(t),qL(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){VE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),UE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){VE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){VE.then(()=>{const r=this._findContainer(t.path),i=new t4({});(function B7(n,e){n4(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){VE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){VE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function j7(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(qi,10),d.Y36(Rd,10),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&d.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([SJ]),d.qOj]})}return n})();function $7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function H7(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const z7=class extends U7{constructor(e=null,t,r){super(XL(t),e4(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_M(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=H7(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){H7(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},xJ={provide:Nd,useExisting:(0,d.Gpc)(()=>EM)},q7=(()=>Promise.resolve())();let EM=(()=>{class n extends Nd{constructor(t,r,i,a,u,f){super(),this._changeDetectorRef=u,this.callSetDisabledState=f,this.control=new z7,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function s4(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===NE?t=a:function TJ(n){return Object.getPrototypeOf(n.constructor)===Ip}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function i4(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){UE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){q7.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.VuI)(r);q7.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function yM(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(us,9),d.Y36(qi,10),d.Y36(Rd,10),d.Y36(fc,10),d.Y36(d.sBO,8),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([xJ]),d.qOj,d.TTD]})}return n})(),o4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),K7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const a4=new d.OlP("NgModelWithFormControlWarning");let h9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[K7]})}return n})(),tX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bp,useValue:t.callSetDisabledState??LE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[h9]})}return n})(),nX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:a4,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bp,useValue:t.callSetDisabledState??LE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[h9]})}return n})();function rX(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function iX(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.fullName=i)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let sX=(()=>{class n{constructor(t,r,i){this.authService=t,this.postService=r,this.router=i,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,H.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(gn(1)).subscribe({next:i=>{i&&t.router.navigateByUrl("/")},error:i=>{console.error(i)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,H.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(gn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,H.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(gn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.postService.getPosts().pipe(gn(1)).subscribe({error:t=>{console.error(t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga),d.Y36(dM),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,rX,5,2,"form",4),d.YNc(5,iX,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return i.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",i.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[Qi,o4,NE,KL,YL,EM,BE],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),oX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})(),aX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"notification-page works!"),d.qZA())}})}return n})();function cX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"label",5),d._uU(2," Upload photos and videos here "),d.TgZ(3,"div",6),d.O4$(),d.TgZ(4,"svg",7),d._UZ(5,"path",8)(6,"path",9)(7,"path",10),d.qZA()()(),d.kcU(),d.TgZ(8,"input",11),d.NdJ("change",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onMediaSelected(i))}),d.qZA()()}}const uX=function(n){return{active:n}};function lX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"article",23),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw(2);return d.KtG(u.onSelectFilterPreview(a.value))}),d.TgZ(1,"span"),d._uU(2),d.qZA(),d._UZ(3,"img",24),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw(2);d.Q6J("ngClass",d.VKq(6,uX,t.value===r.post.filterSelected)),d.xp6(2),d.Oqu(t.name),d.xp6(1),d.Tol(t.value),d.MGl("alt","",t," - filter preview"),d.Q6J("src",r.post.imgUrl,d.LSH)}}function dX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",12)(1,"div",13)(2,"button",14),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFilterMediaShown=!1,d.KtG(i.isSelectMediaShown=!0)}),d.O4$(),d.TgZ(3,"svg",15),d._UZ(4,"line",16)(5,"polyline",17),d.qZA()(),d.kcU(),d.TgZ(6,"button",18),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFilterMediaShown=!1,d.KtG(i.isFormMediaShown=!0)}),d._uU(7," Next "),d.qZA()(),d.TgZ(8,"article",19),d._UZ(9,"img",20),d.qZA(),d.TgZ(10,"div",21),d.YNc(11,lX,4,8,"article",22),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(9),d.Tol(t.post.filterSelected),d.s9C("src",t.post.imgUrl,d.LSH),d.xp6(2),d.Q6J("ngForOf",t.filterPreviewNames)}}function hX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",25)(1,"div",13)(2,"button",14),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFormMediaShown=!1,d.KtG(i.isFilterMediaShown=!0)}),d.O4$(),d.TgZ(3,"svg",15),d._UZ(4,"line",16)(5,"polyline",17),d.qZA()(),d.kcU(),d.TgZ(6,"button",26),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onCreatePost())}),d._uU(7," Share "),d.qZA()(),d.TgZ(8,"form")(9,"div",27),d._UZ(10,"img",28),d.TgZ(11,"textarea",29),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.post.content=i)}),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(10),d.Tol(t.post.filterSelected),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(1),d.Q6J("ngModel",t.post.content)}}let fX=(()=>{class n{constructor(t,r){this.postService=t,this.router=r,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviewNames=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],comments:[],filterSelected:"normal"}}onMediaSelected(t){var r=this;return(0,H.Z)(function*(){try{const i=yield r.postService.uploadMedia(t.target.files[0]);console.log("Media URL:",i),r.post.imgUrl=i,r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,H.Z)(function*(){console.log("create-post"),console.log("post",t.post),yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(dM),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],["for","media-input",1,"custom-media-input"],["id","upload-media-element"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],["type","file","accept","image/*","id","media-input",3,"change"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0),d.YNc(1,cX,9,0,"div",1),d.YNc(2,dX,12,4,"div",2),d.YNc(3,hX,12,4,"div",3),d.qZA()),2&r&&(d.xp6(1),d.Q6J("ngIf",i.isSelectMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFilterMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Ca,Ic,Qi,o4,NE,KL,YL,EM,BE],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   #media-input[_ngcontent-%COMP%]{display:none;height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   .custom-media-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2em;height:100%;width:100%;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;gap:2em;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;height:70px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const jE=()=>!!(0,d.f3M)(ga).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,d.f3M)(rr).navigateByUrl("/login"),!1),pX=[{path:"",component:sJ,canActivate:[jE]},{path:"login",component:sX,canActivate:[()=>!(0,d.f3M)(ga).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,d.f3M)(rr).navigateByUrl("/"),!1)]},{path:"message",component:oX,canActivate:[jE]},{path:"notification",component:aX,canActivate:[jE]},{path:"create-post",component:fX,canActivate:[jE]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[jE]}];let gX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[jg.forRoot(pX,{useHash:!0}),jg]})}return n})();function mX(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function _X(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function yX(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function vX(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function wX(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const CX=function(){return{exact:!0}};function EX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,mX,2,0,"svg",15),d.YNc(17,_X,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,yX,1,1,"img",22),d.YNc(25,vX,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,wX,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),i=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,CX)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let IX=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,H.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,EX,33,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Qi,Bg,Jh],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function bX(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function TX(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function DX(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function SX(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function AX(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const MX=function(){return{exact:!0}};function xX(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,bX,2,0,"svg",12),d.YNc(14,TX,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,DX,1,1,"img",19),d.YNc(22,SX,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,AX,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),i=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,MX)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let PX=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,H.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ga),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,xX,30,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Qi,Bg,Jh],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),OX=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,i){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return i.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function RX(n,e){1&n&&d._UZ(0,"router-outlet")}function NX(n,e){1&n&&d._UZ(0,"app-header-mobile")}function kX(n,e){1&n&&d._UZ(0,"aside-menu")}function FX(n,e){1&n&&(d.TgZ(0,"main",2),d._UZ(1,"router-outlet"),d.qZA())}function LX(n,e){1&n&&d._UZ(0,"menu-mobile")}let UX=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,H.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Ks&&(t.routerUrl=t.router.url)})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(dM))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(d.TgZ(0,"section"),d.YNc(1,RX,1,0,"router-outlet",0),d.YNc(2,NX,1,0,"app-header-mobile",0),d.YNc(3,kX,1,0,"aside-menu",0),d.YNc(4,FX,2,0,"main",1),d.YNc(5,LX,1,0,"menu-mobile",0),d.qZA()),2&r&&(d.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl))},dependencies:[Qi,Uh,IX,PX,OX]})}return n})();class IM{}class bM{}class pc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===a.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class VX{encodeKey(e){return f9(e)}encodeValue(e){return f9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const jX=/%(\d[a-f0-9])/gi,$X={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function f9(n){return encodeURIComponent(n).replace(jX,(e,t)=>$X[t]??e)}function TM(n){return`${n}`}class kd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new VX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function BX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(u)||[];g.push(f),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(TM):[TM(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new kd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(TM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(TM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class HX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function p9(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function g9(n){return typeof Blob<"u"&&n instanceof Blob}function m9(n){return typeof FormData<"u"&&n instanceof FormData}class $E{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function zX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new pc),this.context||(this.context=new HX),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new kd,this.urlWithParams=t}serializeBody(){return null===this.body?null:p9(this.body)||g9(this.body)||m9(this.body)||function GX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof kd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m9(this.body)?null:g9(this.body)?this.body.type||null:p9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),v)),new $E(t,r,a,{params:v,headers:g,context:I,reportProgress:f,responseType:i,withCredentials:u})}}var ey=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ey||{});class p4{constructor(e,t=200,r="OK"){this.headers=e.headers||new pc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class g4 extends p4{constructor(e={}){super(e),this.type=ey.ResponseHeader}clone(e={}){return new g4({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ty extends p4{constructor(e={}){super(e),this.type=ey.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ty({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _9 extends p4{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function m4(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let WX=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof $E)a=t;else{let g,v;g=i.headers instanceof pc?i.headers:new pc(i.headers),i.params&&(v=i.params instanceof kd?i.params:new kd({fromObject:i.params})),a=new $E(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,lt.of)(a).pipe(yo(g=>this.handler.handle(g)));if(t instanceof $E||"events"===i.observe)return u;const f=u.pipe(wr(g=>g instanceof ty));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,Ct.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new kd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,m4(i,r))}post(t,r,i={}){return this.request("POST",t,m4(i,r))}put(t,r,i={}){return this.request("PUT",t,m4(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(IM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function w9(n,e){return e(n)}function ZX(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const YX=new d.OlP(""),HE=new d.OlP(""),C9=new d.OlP("");function QX(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(YX,{optional:!0})??[]).reduceRight(ZX,w9));const r=(0,d.f3M)(d.HDt),i=r.add();return n(e,t).pipe(ka(()=>r.remove(i)))}}let E9=(()=>{class n extends IM{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(HE),...this.injector.get(C9,[])]));this.chain=i.reduceRight((a,u)=>function KX(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,u,this.injector),w9)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ka(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(bM),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const tee=/^\)\]\}',?\n/;let b9=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,fn.D)(r.\u0275loadImpl()):(0,lt.of)(null)).pipe((0,Vn.w)(()=>new Hr.y(a=>{const u=r.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((Q,J)=>u.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&u.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();u.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const Q=u.statusText||"OK",J=new pc(u.getAllResponseHeaders()),be=function nee(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||t.url;return g=new g4({headers:J,status:u.status,statusText:Q,url:be}),g},I=()=>{let{headers:Q,status:J,statusText:be,url:ze}=v(),ke=null;204!==J&&(ke=typeof u.response>"u"?u.responseText:u.response),0===J&&(J=ke?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof ke){const gt=ke;ke=ke.replace(tee,"");try{ke=""!==ke?JSON.parse(ke):null}catch(St){ke=gt,Ye&&(Ye=!1,ke={error:St,text:ke})}}Ye?(a.next(new ty({body:ke,headers:Q,status:J,statusText:be,url:ze||void 0})),a.complete()):a.error(new _9({error:ke,headers:Q,status:J,statusText:be,url:ze||void 0}))},T=Q=>{const{url:J}=v(),be=new _9({error:Q,status:u.status||0,statusText:u.statusText||"Unknown Error",url:J||void 0});a.error(be)};let A=!1;const N=Q=>{A||(a.next(v()),A=!0);let J={type:ey.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&u.responseText&&(J.partialText=u.responseText),a.next(J)},G=Q=>{let J={type:ey.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),a.next(J)};return u.addEventListener("load",I),u.addEventListener("error",T),u.addEventListener("timeout",T),u.addEventListener("abort",T),t.reportProgress&&(u.addEventListener("progress",N),null!==f&&u.upload&&u.upload.addEventListener("progress",G)),u.send(f),a.next({type:ey.Sent}),()=>{u.removeEventListener("error",T),u.removeEventListener("abort",T),u.removeEventListener("load",I),u.removeEventListener("timeout",T),t.reportProgress&&(u.removeEventListener("progress",N),null!==f&&u.upload&&u.upload.removeEventListener("progress",G)),u.readyState!==u.DONE&&u.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(fs))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const _4=new d.OlP("XSRF_ENABLED"),T9=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),D9=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class S9{}let see=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wa(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.Lbi),d.LFG(T9))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function oee(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(_4)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(S9).getToken(),i=(0,d.f3M)(D9);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Fd=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Fd||{});function aee(...n){const e=[WX,b9,E9,{provide:IM,useExisting:E9},{provide:bM,useExisting:b9},{provide:HE,useValue:oee,multi:!0},{provide:_4,useValue:!0},{provide:S9,useClass:see}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const A9=new d.OlP("LEGACY_INTERCEPTOR_FN");function cee(){return function Dp(n,e){return{\u0275kind:n,\u0275providers:e}}(Fd.LegacyInterceptors,[{provide:A9,useFactory:QX},{provide:HE,useExisting:A9,multi:!0}])}let uee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[aee(cee())]})}return n})();class y4{constructor(e){return e}}const M9="firestore",v4=new d.OlP("angularfire2.firestore-instances");function _ee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new y4(r)}}const yee={provide:class gee{constructor(){return ec(M9)}},deps:[[new d.FiY,v4]]},vee={provide:y4,useFactory:function mee(n,e){const t=vu(M9,n,e);return t&&new y4(t)},deps:[[new d.FiY,v4],Lo]};let wee=(()=>{class n{constructor(){(0,an.registerVersion)("angularfire",od.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vee,yee]}),n})();function Cee(n,...e){return{ngModule:wee,providers:[{provide:v4,useFactory:_ee(n),multi:!0,deps:[d.R0b,d.zs3,ko,wu,[new d.FiY,xS],[new d.FiY,Yf],...e]}]}}const Eee=ca(uY,!0),x9="@firebase/database";let w4="";class bee{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,$.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,$.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Tee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,$.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const O9=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bee(e)}}catch{}return new Tee},Sp=O9("localStorage"),C4=O9("sessionStorage"),ny=new Li.Yd("@firebase/database"),R9=function(){let n=1;return function(){return n++}}(),N9=function(n){const e=(0,$.dS)(n),t=new $.gQ;t.update(e);const r=t.digest();return $.US.encodeByteArray(r)},zE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=zE.apply(null,r):e+="object"==typeof r?(0,$.Wl)(r):r,e+=" "}return e};let Ap=null,k9=!0;const li=function(...n){if(!0===k9&&(k9=!1,null===Ap&&!0===C4.get("logging_enabled")&&function(n,e){(0,$.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ny.logLevel=Li.in.VERBOSE,Ap=ny.log.bind(ny),e&&C4.set("logging_enabled",!0)):"function"==typeof n?Ap=n:(Ap=null,C4.remove("logging_enabled"))}(!0)),Ap){const e=zE.apply(null,n);Ap(e)}},GE=function(n){return function(...e){li(n,...e)}},E4=function(...n){const e="FIREBASE INTERNAL ERROR: "+zE(...n);ny.error(e)},gc=function(...n){const e=`FIREBASE FATAL ERROR: ${zE(...n)}`;throw ny.error(e),new Error(e)},Zi=function(...n){const e="FIREBASE WARNING: "+zE(...n);ny.warn(e)},SM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ld="[MIN_NAME]",Nu="[MAX_NAME]",Mp=function(n,e){if(n===e)return 0;if(n===Ld||e===Nu)return-1;if(e===Ld||n===Nu)return 1;{const t=V9(n),r=V9(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Aee=function(n,e){return n===e?0:n<e?-1:1},WE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,$.Wl)(e))},I4=function(n){if("object"!=typeof n||null===n)return(0,$.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,$.Wl)(e[r]),t+=":",t+=I4(n[e[r]]);return t+="}",t},L9=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const U9=function(n){(0,$.hu)(!SM(n),"Invalid JSON number");const r=1023;let i,a,u,f,g;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const I=v.join("");let T="";for(g=0;g<64;g+=8){let A=parseInt(I.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},Oee=new RegExp("^-?(0*)\\d{1,10}$"),V9=function(n){if(Oee.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ry=function(n){try{n()}catch(e){setTimeout(()=>{throw Zi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},qE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Fee{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Lee{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(e)}}let ZE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const z9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q9="websocket",Z9="long_polling";class T4{constructor(e,t,r,i,a=!1,u="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function K9(n,e,t){let r;if((0,$.hu)("string"==typeof e,"typeof type must == string"),(0,$.hu)("object"==typeof t,"typeof params must == object"),e===q9)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Z9)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Uee(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return di(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class Vee{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,$.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,$.p$)(this.counters_)}}const D4={},S4={};function A4(n){const e=n.toString();return D4[e]||(D4[e]=new Vee),D4[e]}class jee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ry(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ud{constructor(e,t,r,i,a,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GE(e),this.stats_=A4(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),K9(t,Z9,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,$.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new M4((...a)=>{const[u,f,g,v,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&z9.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ud.forceAllow_=!0}static forceDisallow(){Ud.forceDisallow_=!0}static isAvailable(){return!((0,$.Yr)()||!Ud.forceAllow_&&(Ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,$.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,$.h$)(t),i=L9(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,$.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,$.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class M4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,$.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=R9(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=M4.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){li("frame writing exception"),f.stack&&li(f.stack),li(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||li("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,$.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{li("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let MM=null;typeof MozWebSocket<"u"?MM=MozWebSocket:typeof WebSocket<"u"&&(MM=WebSocket);let iy=(()=>{class n{constructor(t,r,i,a,u,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GE(this.connId),this.stats_=A4(r),this.connURL=n.connectionURL_(r,f,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const f={v:"5"};return!(0,$.Yr)()&&typeof location<"u"&&location.hostname&&z9.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),u&&(f.p=u),K9(t,q9,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sp.set("previous_websocket_failure",!0);try{let i;if((0,$.Yr)()){i={headers:{"User-Agent":`Firebase/5/${w4}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new MM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==MM&&!n.forceDisallow_}static previouslyFailed(){return Sp.isInMemoryStorage||!0===Sp.get("previous_websocket_failure")}markConnectionHealthy(){Sp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,$.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,$.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,$.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=L9(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),n8=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ud,iy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=iy&&iy.isAvailable();let i=r&&!iy.previouslyFailed();if(t.webSocketOnly&&(r||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[iy];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class u8{constructor(e,t,r,i,a,u,f,g,v,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GE("c:"+this.id+":"),this.transportManager_=new n8(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=WE("t",e),r=WE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=WE("t",e),r=WE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=WE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?E4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class l8{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class d8{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,$.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,$.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class xM extends d8{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,$.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xM}getInitialEvent(e){return(0,$.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function cn(){return new pn("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vd(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function P4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function KE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function p8(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function Jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new pn(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function ls(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return ls(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function O4(n,e){if(Vd(n)!==Vd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function jo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vd(n)>Vd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class lte{constructor(e,t){this.errorPrefix_=t,this.parts_=KE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,$.ug)(this.parts_[r]);g8(this)}}function g8(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xp(n))}function xp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class R4 extends d8{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new R4}getInitialEvent(e){return(0,$.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const YE=1e3;let OM,Pp=(()=>{class n extends l8{constructor(t,r,i,a,u,f,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=GE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=YE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,$.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");R4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,$.Wl)(u)),(0,$.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new $.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,$.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,$.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const v=g.d,I=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,$.r3)(t,"w")){const i=(0,$.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,$.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,$.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,f=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,$.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,$.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):E4("Unrecognized action received from server: "+(0,$.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,$.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=YE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=YE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=YE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,H.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,v=null;const I=function(){v?v.close():(g=!0,a())};t.realtime_={close:I,sendRequest:function(N){(0,$.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(N)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,G]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?li("getToken() completed but was canceled"):(li("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=G&&G.token,v=new u8(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{Zi(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(N){t.log_("Failed to get token: "+N),g||(t.repoInfo_.nodeAdmin&&Zi(N),I())}}})()}interrupt(t){li("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){li("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,$.xb)(this.interruptReasons_)&&(this.reconnectDelay_=YE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>I4(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new pn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){li("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){li("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,$.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+w4.replace(/\./g,"-")]=1,(0,$.uI)()?t["framework.cordova"]=1:(0,$.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xM.getInstance().currentlyOnline();return(0,$.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class PM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(Ld,e),i=new zt(Ld,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class y8 extends PM{static get __EMPTY_NODE(){return OM}static set __EMPTY_NODE(e){OM=e}compare(e,t){return Mp(e.name,t.name)}isDefinedOn(e){throw(0,$.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Nu,OM)}makePost(e,t){return(0,$.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,OM)}toString(){return".key"}}const mc=new y8;class RM{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let k4,ma=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ss.EMPTY_NODE,this.right=u??Ss.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ss.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ss.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ss{constructor(e,t=Ss.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ss(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ma.BLACK,null,null))}remove(e){return new Ss(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ma.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new RM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new RM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new RM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new RM(this.root_,null,this.comparator_,!0,e)}}function yte(n,e){return Mp(n.name,e.name)}function N4(n,e){return Mp(n,e)}Ss.EMPTY_NODE=new class _te{copy(e,t,r,i,a){return this}insert(e,t,r){return new ma(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const v8=function(n){return"number"==typeof n?"number:"+U9(n):"string:"+n},w8=function(n){if(n.isLeafNode()){const e=n.val();(0,$.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,$.r3)(e,".sv"),"Priority must be a string or number.")}else(0,$.hu)(n===k4||n.isEmpty(),"priority of unexpected type.");(0,$.hu)(n===k4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let C8,E8,I8,sy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,$.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),w8(this.priorityNode_)}static set __childrenNodeConstructor(t){C8=t}static get __childrenNodeConstructor(){return C8}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,$.hu)(".priority"!==i||1===Vd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+v8(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?U9(this.value_):this.value_,this.lazyHash_=N9(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,$.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,$.hu)(a>=0,"Unknown leaf type: "+r),(0,$.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class Ete extends PM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Nu,new sy("[PRIORITY-POST]",I8))}makePost(e,t){const r=E8(e);return new zt(t,new sy("[PRIORITY-POST]",r))}toString(){return".priority"}},Ite=Math.log(2);class bte{constructor(e){this.count=parseInt(Math.log(e+1)/Ite,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const NM=function(n,e,t,r){n.sort(e);const i=function(g,v){const I=v-g;let T,A;if(0===I)return null;if(1===I)return T=n[g],A=t?t(T):T,new ma(A,T.node,ma.BLACK,null,null);{const N=parseInt(I/2,10)+g,G=i(g,N),Q=i(N+1,v);return T=n[N],A=t?t(T):T,new ma(A,T.node,ma.BLACK,G,Q)}},f=function(g){let v=null,I=null,T=n.length;const A=function(G,Q){const J=T-G,be=T;T-=G;const ze=i(J+1,be),ke=n[J],Ye=t?t(ke):ke;N(new ma(Ye,ke.node,Q,null,ze))},N=function(G){v?(v.left=G,v=G):(I=G,v=G)};for(let G=0;G<g.count;++G){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(G+1));Q?A(J,ma.BLACK):(A(J,ma.BLACK),A(J,ma.RED))}return I}(new bte(n.length));return new Ss(r||e,f)};let F4;const oy={};class ku{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,$.hu)(oy&&Rn,"ChildrenNode.ts has not been loaded"),F4=F4||new ku({".priority":oy},{".priority":Rn}),F4}get(e){const t=(0,$.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ss?t:null}hasIndex(e){return(0,$.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,$.hu)(e!==mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let f,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();f=i?NM(r,e.getCompare()):oy;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const I=Object.assign({},this.indexes_);return I[g]=f,new ku(I,v)}addToIndexes(e,t){const r=(0,$.UI)(this.indexes_,(i,a)=>{const u=(0,$.DV)(this.indexSet_,a);if((0,$.hu)(u,"Missing index implementation for "+a),i===oy){if(u.isDefinedOn(e.node)){const f=[],g=t.getIterator(zt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&f.push(v),v=g.getNext();return f.push(e),NM(f,u.getCompare())}return oy}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new zt(e.name,f))),g.insert(e,e.node)}});return new ku(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,$.UI)(this.indexes_,i=>{if(i===oy)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new ku(r,this.indexSet_)}}let QE,Pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&w8(this.priorityNode_),this.children_.isEmpty()&&(0,$.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return QE||(QE=new n(new Ss(N4),null,ku.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||QE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?QE:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,$.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?QE:this.priorityNode_;return new n(a,f,u)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,$.hu)(".priority"!==jt(t)||1===Vd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Dn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Rn,(f,g)=>{r[f]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):u=!1}),!t&&u&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+v8(this.getPriority().val())+":"),this.forEachChild(Rn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":N9(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new zt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===JE?-1:0}withIndex(t){if(t===mc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===mc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rn),a=r.getIterator(Rn);let u=i.getNext(),f=a.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=a.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===mc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const JE=new class Tte extends Pt{constructor(){super(new Ss(N4),Pt.EMPTY_NODE,ku.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zt,{MIN:{value:new zt(Ld,Pt.EMPTY_NODE)},MAX:{value:new zt(Nu,JE)}}),y8.__EMPTY_NODE=Pt.EMPTY_NODE,sy.__childrenNodeConstructor=Pt,function vte(n){k4=n}(JE),function Cte(n){I8=n}(JE);const Dte=!0;function ar(n,e=null){if(null===n)return Pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,$.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new sy(n,ar(e));if(n instanceof Array||!Dte){let t=Pt.EMPTY_NODE;return di(n,(r,i)=>{if((0,$.r3)(n,r)&&"."!==r.substring(0,1)){const a=ar(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(ar(e))}{const t=[];let r=!1;if(di(n,(u,f)=>{if("."!==u.substring(0,1)){const g=ar(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new zt(u,g)))}}),0===t.length)return Pt.EMPTY_NODE;const a=NM(t,yte,u=>u.name,N4);if(r){const u=NM(t,Rn.getCompare());return new Pt(a,ar(e),new ku({".priority":u},{".priority":Rn}))}return new Pt(a,ar(e),ku.Default)}}!function wte(n){E8=n}(ar);class L4 extends PM{constructor(e){super(),this.indexPath_=e,(0,$.hu)(!$t(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}makePost(e,t){const r=ar(e),i=Pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Pt.EMPTY_NODE.updateChild(this.indexPath_,JE);return new zt(Nu,e)}toString(){return KE(this.indexPath_,0).join("/")}}const U4=new class Ste extends PM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=ar(e);return new zt(t,r)}toString(){return".value"}};function eI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class B4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ld}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,$.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const e=new B4;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function T8(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rn?t="$priority":n.index_===U4?t="$value":n.index_===mc?t="$key":((0,$.hu)(n.index_ instanceof L4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,$.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,$.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,$.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,$.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,$.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function D8(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Rn&&(e.i=n.index_.toString()),e}class FM extends l8{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=GE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,$.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=FM.getListenId_(e,r),f={};this.listens_[u]=f;const g=T8(e._queryParams);this.restRequest_(a+".json",g,(v,I)=>{let T=I;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(a,T,!1,r),(0,$.DV)(this.listens_,u)===f){let A;A=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(A,null)}})}unlisten(e,t){const r=FM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=T8(e._queryParams),r=e._path.toString(),i=new $.BH;return this.restRequest_(r+".json",t,(a,u)=>{let f=u;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,$.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,$.cI)(f.responseText)}catch{Zi("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&Zi("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class kte{constructor(){this.rootNode_=Pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function LM(){return{value:null,children:new Map}}function cy(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,LM()),cy(n.children.get(r),e=Dn(e),t)}}function z4(n,e,t){null!==n.value?t(e,n.value):function Fte(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{z4(i,new pn(e.toString()+"/"+r),t)})}class Lte{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&di(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Bte{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Lte(e);const r=1e4+2e4*Math.random();qE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;di(e,(i,a)=>{a>0&&(0,$.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),qE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _c=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(_c||{});function q4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class UM{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=_c.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,$.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new UM(cn(),t,this.revert)}}return(0,$.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new UM(Dn(this.path),this.affectedTree,this.revert)}}class Op{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=_c.OVERWRITE}operationForChild(e){return $t(this.path)?new Op(this.source,cn(),this.snap.getImmediateChild(e)):new Op(this.source,Dn(this.path),this.snap)}}class uy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=_c.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new Op(this.source,cn(),t.value):new uy(this.source,cn(),t)}return(0,$.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new uy(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function rI(n,e,t,r,i,a){const u=r.filter(f=>f.type===t);u.sort((f,g)=>function zte(n,e,t){if(null==e.childName||null==t.childName)throw(0,$.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),u.forEach(f=>{const g=function Hte(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(g,n.query_))})})}function VM(n,e){return{eventCache:n,serverCache:e}}function iI(n,e,t,r){return VM(new Bd(e,t,r),n.serverCache)}function A8(n,e,t,r){return VM(n.eventCache,new Bd(e,t,r))}function BM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Z4;class Nn{constructor(e,t=(()=>(Z4||(Z4=new Ss(Aee)),Z4))()){this.value=e,this.children=t}static fromObject(e){let t=new Nn(null);return di(e,(r,i)=>{t=t.set(new pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:cn(),value:this.value};if($t(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Dn(e),t);return null!=a?{path:Jn(new pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new Nn(null)}}set(e,t){if($t(e))return new Nn(t,this.children);{const r=jt(e),a=(this.children.get(r)||new Nn(null)).set(Dn(e),t),u=this.children.insert(r,a);return new Nn(this.value,u)}}remove(e){if($t(e))return this.children.isEmpty()?new Nn(null):new Nn(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(Dn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Nn(null):new Nn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if($t(e))return t;{const r=jt(e),a=(this.children.get(r)||new Nn(null)).setTree(Dn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Nn(this.value,u)}}fold(e){return this.fold_(cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=jt(e),u=this.children.get(a);return u?u.findOnPath_(Dn(e),Jn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,cn(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Dn(e),Jn(t,i),r):new Nn(null)}}foreach(e){this.foreach_(cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _a{constructor(e){this.writeTree_=e}static empty(){return new _a(new Nn(null))}}function sI(n,e,t){if($t(e))return new _a(new Nn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=ls(i,e);return a=a.updateChild(u,t),new _a(n.writeTree_.set(i,a))}{const i=new Nn(t),a=n.writeTree_.setTree(e,i);return new _a(a)}}}function K4(n,e,t){let r=n;return di(t,(i,a)=>{r=sI(r,Jn(e,i),a)}),r}function M8(n,e){if($t(e))return _a.empty();{const t=n.writeTree_.setTree(e,new Nn(null));return new _a(t)}}function Y4(n,e){return null!=Np(n,e)}function Np(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ls(t.path,e)):null}function x8(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function jd(n,e){if($t(e))return n;{const t=Np(n,e);return new _a(null!=t?new Nn(t):n.writeTree_.subtree(e))}}function Q4(n){return n.writeTree_.isEmpty()}function ly(n,e){return P8(cn(),n.writeTree_,e)}function P8(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,$.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=P8(Jn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Jn(n,".priority"),r)),t}}function jM(n,e){return F8(e,n)}function Yte(n,e){if(n.snap)return jo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&jo(Jn(n.path,t),e))return!0;return!1}function Jte(n){return n.visible}function O8(n,e,t){let r=_a.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let f;if(a.snap)jo(t,u)?(f=ls(t,u),r=sI(r,f,a.snap)):jo(u,t)&&(f=ls(u,t),r=sI(r,cn(),a.snap.getChild(f)));else{if(!a.children)throw(0,$.g5)("WriteRecord should have .snap or .children");if(jo(t,u))f=ls(t,u),r=K4(r,f,a.children);else if(jo(u,t))if(f=ls(u,t),$t(f))r=K4(r,cn(),a.children);else{const g=(0,$.DV)(a.children,jt(f));if(g){const v=g.getChild(Dn(f));r=sI(r,cn(),v)}}}}}return r}function R8(n,e,t,r,i){if(r||i){const a=jd(n.visibleWrites,e);return!i&&Q4(a)?t:i||null!=t||Y4(a,cn())?ly(O8(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(jo(v.path,e)||jo(e,v.path))},e),t||Pt.EMPTY_NODE):null}{const a=Np(n.visibleWrites,e);if(null!=a)return a;{const u=jd(n.visibleWrites,e);return Q4(u)?t:null!=t||Y4(u,cn())?ly(u,t||Pt.EMPTY_NODE):null}}}function $M(n,e,t,r){return R8(n.writeTree,n.treePath,e,t,r)}function J4(n,e){return function Xte(n,e,t){let r=Pt.EMPTY_NODE;const i=Np(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=jd(n.visibleWrites,e);return t.forEachChild(Rn,(u,f)=>{const g=ly(jd(a,new pn(u)),f);r=r.updateImmediateChild(u,g)}),x8(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return x8(jd(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function N8(n,e,t,r){return function ene(n,e,t,r,i){(0,$.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Jn(e,t);if(Y4(n.visibleWrites,a))return null;{const u=jd(n.visibleWrites,a);return Q4(u)?i.getChild(t):ly(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function HM(n,e){return function nne(n,e){return Np(n.visibleWrites,e)}(n.writeTree,Jn(n.treePath,e))}function X4(n,e,t){return function tne(n,e,t,r){const i=Jn(e,t),a=Np(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?ly(jd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function k8(n,e){return F8(Jn(n.treePath,e),n.writeTree)}function F8(n,e){return{treePath:n,writeTree:e}}class one{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,$.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,$.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,eI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function XE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function ay(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,$.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,eI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const L8=new class ane{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class eU{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rp(this.viewCache_),a=function sne(n,e,t,r,i,a){return function rne(n,e,t,r,i,a,u){let f;const g=jd(n.visibleWrites,e),v=Np(g,cn());if(null!=v)f=v;else{if(null==t)return[];f=ly(g,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const I=[],T=u.getCompare(),A=a?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let N=A.getNext();for(;N&&I.length<i;)0!==T(N,r)&&I.push(N),N=A.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function U8(n,e,t,r,i,a){const u=e.eventCache;if(null!=HM(r,t))return e;{let f,g;if($t(t))if((0,$.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Rp(e),T=J4(r,v instanceof Pt?v:Pt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const v=$M(r,Rp(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=jt(t);if(".priority"===v){(0,$.hu)(1===Vd(t),"Can't have a priority with additional path components");const I=u.getNode();g=e.serverCache.getNode();const T=N8(r,t,I,g);f=null!=T?n.filter.updatePriority(I,T):u.getNode()}else{const I=Dn(t);let T;if(u.isCompleteForChild(v)){g=e.serverCache.getNode();const A=N8(r,t,u.getNode(),g);T=null!=A?u.getNode().getImmediateChild(v).updateChild(I,A):u.getNode().getImmediateChild(v)}else T=X4(r,v,e.serverCache);f=null!=T?n.filter.updateChild(u.getNode(),v,T,I,i,a):u.getNode()}}return iI(e,f,u.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function zM(n,e,t,r,i,a,u,f){const g=e.serverCache;let v;const I=u?n.filter:n.filter.getIndexedFilter();if($t(t))v=I.updateFullNode(g.getNode(),r,null);else if(I.filtersNodes()&&!g.isFiltered()){const N=g.getNode().updateChild(t,r);v=I.updateFullNode(g.getNode(),N,null)}else{const N=jt(t);if(!g.isCompleteForPath(t)&&Vd(t)>1)return e;const G=Dn(t),J=g.getNode().getImmediateChild(N).updateChild(G,r);v=".priority"===N?I.updatePriority(g.getNode(),J):I.updateChild(g.getNode(),N,J,G,L8,null)}const T=A8(e,v,g.isFullyInitialized()||$t(t),I.filtersNodes());return U8(n,T,t,i,new eU(i,T,a),f)}function tU(n,e,t,r,i,a,u){const f=e.eventCache;let g,v;const I=new eU(i,e,a);if($t(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=iI(e,v,!0,n.filter.filtersNodes());else{const T=jt(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=iI(e,v,f.isFullyInitialized(),f.isFiltered());else{const A=Dn(t),N=f.getNode().getImmediateChild(T);let G;if($t(A))G=r;else{const Q=I.getCompleteChild(T);G=null!=Q?".priority"===P4(A)&&Q.getChild(p8(A)).isEmpty()?Q:Q.updateChild(A,r):Pt.EMPTY_NODE}g=N.equals(G)?e:iI(e,n.filter.updateChild(f.getNode(),T,G,A,I,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function V8(n,e){return n.eventCache.isCompleteForChild(e)}function B8(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nU(n,e,t,r,i,a,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=$t(t)?r:new Nn(null).setTree(t,r);const I=e.serverCache.getNode();return v.children.inorderTraversal((T,A)=>{if(I.hasChild(T)){const G=B8(0,e.serverCache.getNode().getImmediateChild(T),A);g=zM(n,g,new pn(T),G,i,a,u,f)}}),v.children.inorderTraversal((T,A)=>{const N=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!I.hasChild(T)&&!N){const Q=B8(0,e.serverCache.getNode().getImmediateChild(T),A);g=zM(n,g,new pn(T),Q,i,a,u,f)}}),g}function vne(n,e){const t=Rp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function H8(n,e,t,r){e.type===_c.MERGE&&null!==e.source.queryId&&((0,$.hu)(Rp(n.viewCache_),"We should always have a full cache before handling merges"),(0,$.hu)(BM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function lne(n,e,t,r,i){const a=new one;let u,f;if(t.type===_c.OVERWRITE){const v=t;v.source.fromUser?u=tU(n,e,v.path,v.snap,r,i,a):((0,$.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!$t(v.path),u=zM(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===_c.MERGE){const v=t;v.source.fromUser?u=function hne(n,e,t,r,i,a,u){let f=e;return r.foreach((g,v)=>{const I=Jn(t,g);V8(e,jt(I))&&(f=tU(n,f,I,v,i,a,u))}),r.foreach((g,v)=>{const I=Jn(t,g);V8(e,jt(I))||(f=tU(n,f,I,v,i,a,u))}),f}(n,e,v.path,v.children,r,i,a):((0,$.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),u=nU(n,e,v.path,v.children,r,i,f,a))}else if(t.type===_c.ACK_USER_WRITE){const v=t;u=v.revert?function gne(n,e,t,r,i,a){let u;if(null!=HM(r,t))return e;{const f=new eU(r,e,i),g=e.eventCache.getNode();let v;if($t(t)||".priority"===jt(t)){let I;if(e.serverCache.isFullyInitialized())I=$M(r,Rp(e));else{const T=e.serverCache.getNode();(0,$.hu)(T instanceof Pt,"serverChildren would be complete if leaf node"),I=J4(r,T)}v=n.filter.updateFullNode(g,I,a)}else{const I=jt(t);let T=X4(r,I,e.serverCache);null==T&&e.serverCache.isCompleteForChild(I)&&(T=g.getImmediateChild(I)),v=null!=T?n.filter.updateChild(g,I,T,Dn(t),f,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(g,I,Pt.EMPTY_NODE,Dn(t),f,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=$M(r,Rp(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=HM(r,cn()),iI(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function fne(n,e,t,r,i,a,u){if(null!=HM(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if($t(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return zM(n,e,t,g.getNode().getChild(t),i,a,f,u);if($t(t)){let v=new Nn(null);return g.getNode().forEachChild(mc,(I,T)=>{v=v.set(new pn(I),T)}),nU(n,e,t,v,i,a,f,u)}return e}{let v=new Nn(null);return r.foreach((I,T)=>{const A=Jn(t,I);g.isCompleteForPath(A)&&(v=v.set(I,g.getNode().getChild(A)))}),nU(n,e,t,v,i,a,f,u)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==_c.LISTEN_COMPLETE)throw(0,$.g5)("Unknown operation type: "+t.type);u=function pne(n,e,t,r,i){const a=e.serverCache;return U8(n,A8(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,L8,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function dne(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=BM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function b8(n){return{type:"value",snapshotNode:n}}(BM(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function une(n,e){(0,$.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,$.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,$.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function z8(n,e,t,r){return function $te(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Ate(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),rI(n,i,"child_removed",e,r,t),rI(n,i,"child_added",e,r,t),rI(n,i,"child_moved",a,r,t),rI(n,i,"child_changed",e,r,t),rI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let GM,qM;function rU(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,$.hu)(null!=a,"SyncTree gave us an op for an invalid query."),H8(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(H8(u,e,t,r));return a}}function $d(n,e){let t=null;for(const r of n.views.values())t=t||vne(r,e);return t}class Y8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nn(null),this.pendingWriteTree_=function ine(){return{visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iU(n,e,t,r,i){return function Wte(n,e,t,r,i){(0,$.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?dy(n,new Op({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zd(n,e,t=!1){const r=function Zte(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Kte(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,$.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&Yte(f,r.path)?i=!1:jo(r.path,f.path)&&(a=!0)),u--}return!!i&&(a?(function Qte(n){n.visibleWrites=O8(n.allWrites,Jte,cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=M8(n.visibleWrites,r.path):di(r.children,g=>{n.visibleWrites=M8(n.visibleWrites,Jn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Nn(null);return null!=r.snap?a=a.set(cn(),!0):di(r.children,u=>{a=a.set(new pn(u),!0)}),dy(n,new UM(r.path,a,t))}return[]}function oI(n,e,t){return dy(n,new Op({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function KM(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,f)=>{const v=$d(f,ls(u,e));if(v)return v});return R8(i,e,a,t,!0)}function dy(n,e){return J8(e,n.syncPointTree_,null,jM(n.pendingWriteTree_,cn()))}function J8(n,e,t,r){if($t(n.path))return X8(n,e,t,r);{const i=e.get(cn());null==t&&null!=i&&(t=$d(i,cn()));let a=[];const u=jt(n.path),f=n.operationForChild(u),g=e.children.get(u);if(g&&f){const v=t?t.getImmediateChild(u):null,I=k8(r,u);a=a.concat(J8(f,g,v,I))}return i&&(a=a.concat(rU(i,n,r,t))),a}}function X8(n,e,t,r){const i=e.get(cn());null==t&&null!=i&&(t=$d(i,cn()));let a=[];return e.children.inorderTraversal((u,f)=>{const g=t?t.getImmediateChild(u):null,v=k8(r,u),I=n.operationForChild(u);I&&(a=a.concat(X8(I,f,g,v)))}),i&&(a=a.concat(rU(i,n,r,t))),a}function oU(n,e){return n.tagToQueryMap.get(e)}function aU(n){const e=n.indexOf("$");return(0,$.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function cU(n,e,t){const r=n.syncPointTree_.get(e);return(0,$.hu)(r,"Missing sync point for query tag that we're tracking"),rU(r,t,jM(n.pendingWriteTree_,e),null)}class uU{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new uU(t)}node(){return this.node_}}class lU{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Jn(this.path_,e);return new lU(this.syncTree_,t)}node(){return KM(this.syncTree_,this.path_)}}const Bne=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},tH=function(n,e,t){return n&&"object"==typeof n?((0,$.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?jne(n[".sv"],e,t):"object"==typeof n[".sv"]?$ne(n[".sv"],e):void(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},jne=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,$.hu)(!1,"Unexpected server value: "+n)},$ne=function(n,e,t){n.hasOwnProperty("increment")||(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,$.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,$.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},nH=function(n,e,t,r){return hU(e,new lU(t,n),r)},dU=function(n,e,t){return hU(n,new uU(e),t)};function hU(n,e,t){const r=n.getPriority().val(),i=tH(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,f=tH(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new sy(f,ar(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new sy(i))),u.forEachChild(Rn,(f,g)=>{const v=hU(g,e.getImmediateChild(f),t);v!==g&&(a=a.updateImmediateChild(f,v))}),a}}class fU{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function QM(n,e){let t=e instanceof pn?e:new pn(e),r=n,i=jt(t);for(;null!==i;){const a=(0,$.DV)(r.node.children,i)||{children:{},childCount:0};r=new fU(i,r,a),t=Dn(t),i=jt(t)}return r}function kp(n){return n.node.value}function pU(n,e){n.node.value=e,gU(n)}function rH(n){return n.node.childCount>0}function JM(n,e){di(n.node.children,(t,r)=>{e(new fU(t,n,r))})}function iH(n,e,t,r){t&&!r&&e(n),JM(n,i=>{iH(i,e,!0,r)}),t&&r&&e(n)}function uI(n){return new pn(null===n.parent?n.name:uI(n.parent)+"/"+n.name)}function gU(n){null!==n.parent&&function Gne(n,e,t){const r=function Hne(n){return void 0===kp(n)&&!rH(n)}(t),i=(0,$.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,gU(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,gU(n))}(n.parent,n.name,n)}const Wne=/[\[\].#$\/\u0000-\u001F\u007F]/,qne=/[\[\].#$\u0000-\u001F\u007F]/,mU=10485760,XM=function(n){return"string"==typeof n&&0!==n.length&&!Wne.test(n)},dI=function(n,e,t){const r=t instanceof pn?new lte(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+xp(r));if("function"==typeof e)throw new Error(n+"contains a function "+xp(r)+" with contents = "+e.toString());if(SM(e))throw new Error(n+"contains "+e.toString()+" "+xp(r));if("string"==typeof e&&e.length>mU/3&&(0,$.ug)(e)>mU)throw new Error(n+"contains a string greater than "+mU+" utf8 bytes "+xp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(di(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!XM(u)))throw new Error(n+" contains an invalid key ("+u+") "+xp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dte(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,$.ug)(e),g8(n)})(r,u),dI(n,f,r),function hte(n){const e=n.parts_.pop();n.byteLength_-=(0,$.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+xp(r)+" in addition to actual children.")}},aH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!XM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!qne.test(n)}(n)}(t))throw new Error((0,$.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Qne{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ro(n,e,t){(function ex(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!O4(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function uH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Jne(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>jo(r,e)||jo(e,r))}function Jne(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ap&&li("event: "+t.toString()),ry(r)}}}const Xne=25;class ere{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qne,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=LM(),this.transactionQueueTree_=new fU,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dH(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fI(n){return Bne({timestamp:dH(n)})}function hH(n,e,t,r,i){n.dataUpdateCount++;const a=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,$.UI)(t,v=>ar(v));u=function Nne(n,e,t,r){const i=oU(n,r);if(i){const a=aU(i),u=a.path,f=a.queryId,g=ls(u,e),v=Nn.fromObject(t);return cU(n,u,new uy(q4(f),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=ar(t);u=function Q8(n,e,t,r){const i=oU(n,r);if(null!=i){const a=aU(i),u=a.path,f=a.queryId,g=ls(u,e);return cU(n,u,new Op(q4(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,$.UI)(t,v=>ar(v));u=function Pne(n,e,t){const r=Nn.fromObject(t);return dy(n,new uy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=ar(t);u=oI(n.serverSyncTree_,a,g)}let f=a;u.length>0&&(f=fy(n,a)),ro(n.eventQueue_,f,u)}function fH(n,e){vU(n,"connected",e),!1===e&&function sre(n){hy(n,"onDisconnectEvents");const e=fI(n),t=LM();z4(n.onDisconnect_,cn(),(i,a)=>{const u=nH(i,a,n.serverSyncTree_,e);cy(t,i,u)});let r=[];z4(t,cn(),(i,a)=>{r=r.concat(oI(n.serverSyncTree_,i,a));const u=function IU(n,e){const t=uI(mH(n,e)),r=QM(n.transactionQueueTree_,e);return function zne(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bU(n,i)}),bU(n,r),iH(r,i=>{bU(n,i)}),t}(n,i);fy(n,u)}),n.onDisconnect_=LM(),ro(n.eventQueue_,cn(),r)}(n)}function vU(n,e,t){const r=new pn("/.info/"+e),i=ar(t);n.infoData_.updateSnapshot(r,i);const a=oI(n.infoSyncTree_,r,i);ro(n.eventQueue_,r,a)}function tx(n){return n.nextWriteId_++}function hy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),li(t,...e)}function EU(n,e,t){return KM(n.serverSyncTree_,e,t)||Pt.EMPTY_NODE}function nx(n,e=n.transactionQueueTree_){if(e||rx(n,e),kp(e)){const t=_H(n,e);(0,$.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function hre(n,e,t){const r=t.map(v=>v.currentWriteId),i=EU(n,e,r);let a=i;const u=i.hash();for(let v=0;v<t.length;v++){const I=t[v];(0,$.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=ls(e,I.path);a=a.updateChild(T,I.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,v=>{hy(n,"transaction put response",{path:g.toString(),status:v});let I=[];if("ok"===v){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,I=I.concat(zd(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();rx(n,QM(n.transactionQueueTree_,e)),nx(n,n.transactionQueueTree_),ro(n.eventQueue_,e,I);for(let A=0;A<T.length;A++)ry(T[A])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Zi("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}fy(n,e)}},u)}(n,uI(e),t)}else rH(e)&&JM(e,t=>{nx(n,t)})}function fy(n,e){const t=mH(n,e),r=uI(t);return function fre(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],v=ls(t,g.path);let T,I=!1;if((0,$.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)I=!0,T=g.abortReason,i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=Xne)I=!0,T="maxretry",i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0));else{const A=EU(n,g.path,u);g.currentInputSnapshot=A;const N=e[f].update(A.val());if(void 0!==N){dI("transaction failed: Data returned ",N,g.path);let G=ar(N);"object"==typeof N&&null!=N&&(0,$.r3)(N,".priority")||(G=G.updatePriority(A.getPriority()));const J=g.currentWriteId,be=fI(n),ze=dU(G,A,be);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=ze,g.currentWriteId=tx(n),u.splice(u.indexOf(J),1),i=i.concat(iU(n.serverSyncTree_,g.path,ze,g.currentWriteId,g.applyLocally)),i=i.concat(zd(n.serverSyncTree_,J,!0))}else I=!0,T="nodata",i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0))}ro(n.eventQueue_,t,i),i=[],I&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}rx(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ry(r[f]);nx(n,n.transactionQueueTree_)}(n,_H(n,t),r),r}function mH(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===kp(r);)r=QM(r,t),t=jt(e=Dn(e));return r}function _H(n,e){const t=[];return yH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yH(n,e,t){const r=kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);JM(e,i=>{yH(n,i,t)})}function rx(n,e){const t=kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,pU(e,t.length>0?t:void 0)}JM(e,r=>{rx(n,r)})}function bU(n,e){const t=kp(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,$.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,$.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(zd(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?pU(e,void 0):t.length=a+1,ro(n.eventQueue_,uI(e),i);for(let u=0;u<r.length;u++)ry(r[u])}}const TU=function(n,e){const t=mre(n),r=t.namespace;return"firebase.com"===t.domain&&gc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&gc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new T4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new pn(t.pathString)}},mre=function(n){let e="",t="",r="",i="",a="",u=!0,f="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let I=n.indexOf("/");-1===I&&(I=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(I,T)),I<T&&(i=function pre(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,T)));const A=function gre(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(u="https"===f||"wss"===f,g=parseInt(e.substring(v+1),10)):v=e.length;const N=e.slice(0,v);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:a}};class io{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:P4(this._path)}get ref(){return new ya(this._repo,this._path)}get _queryIdentifier(){const e=D8(this._queryParams),t=I4(e);return"{}"===t?"default":t}get _queryObject(){return D8(this._queryParams)}isEqual(e){if(!((e=(0,$.m9)(e))instanceof io))return!1;const t=this._repo===e._repo,r=O4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function cte(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ya extends io{constructor(e,t){super(e,t,new B4,!1)}get parent(){const e=p8(this._path);return null===e?null:new ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Ene(n){(0,$.hu)(!GM,"__referenceConstructor has already been defined"),GM=n})(ya),function Sne(n){(0,$.hu)(!qM,"__referenceConstructor has already been defined"),qM=n}(ya);const SU={};class Fre{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function tre(n,e,t){if(n.stats_=A4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new FM(n.repoInfo_,(r,i,a,u)=>{hH(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,$.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pp(n.repoInfo_,e,(r,i,a,u)=>{hH(n,r,i,a,u)},r=>{fH(n,r)},r=>{!function nre(n,e){di(e,(t,r)=>{vU(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Bee(n,e){const t=n.toString();return S4[t]||(S4[t]=e()),S4[t]}(n.repoInfo_,()=>new Bte(n.stats_,n.server_)),n.infoData_=new kte,n.infoSyncTree_=new Y8({startListening:(r,i,a,u)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=oI(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),vU(n,"connected",!1),n.serverSyncTree_=new Y8({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(f,g)=>{const v=u(f,g);ro(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ya(this._repo,cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Rre(n,e){const t=SU[e];(!t||t[n.key]!==n)&&gc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function gH(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&gc("Cannot call "+e+" on a deleted database.")}}function Lre(n=(0,an.getApp)(),e){const t=(0,an._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,$.P0)("database");r&&function Ure(n,e,t,r={}){(n=(0,$.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&gc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new ZE(ZE.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,$.Sg)(r.mockUserToken,n.app.options.projectId);a=new ZE(u)}!function Pre(n,e,t,r){n.repoInfo_=new T4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Pp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Vre(n){(function Iee(n){w4=n})(an.SDK_VERSION),(0,an._registerComponent)(new Er.wA("database",(e,{instanceIdentifier:t})=>function Ore(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||gc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),li("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,u=TU(a,i),f=u.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${f.namespace}`,u=TU(a,i),f=u.repoInfo):g=!u.repoInfo.secure;const I=i&&g?new ZE(ZE.OWNER):new Lee(n.name,n.options,e);aH("Invalid Firebase Database URL",u),$t(u.path)||gc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Nre(n,e,t,r){let i=SU[e.name];i||(i={},SU[e.name]=i);let a=i[n.toURLString()];return a&&gc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new ere(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,I,new Fee(n.name,t));return new Fre(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,an.registerVersion)(x9,"0.14.4",n),(0,an.registerVersion)(x9,"0.14.4","esm2017")}();class AU{constructor(e){return e}}const SH="database",MU=new d.OlP("angularfire2.database-instances");function zre(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new AU(r)}}const Gre={provide:class $re{constructor(){return ec(SH)}},deps:[[new d.FiY,MU]]},Wre={provide:AU,useFactory:function Hre(n,e){const t=vu(SH,n,e);return t&&new AU(t)},deps:[[new d.FiY,MU],Lo]};let qre=(()=>{class n{constructor(){(0,an.registerVersion)("angularfire",od.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Wre,Gre]}),n})();function Zre(n,...e){return{ngModule:qre,providers:[{provide:MU,useFactory:zre(n),multi:!0,deps:[d.R0b,d.zs3,ko,wu,[new d.FiY,xS],[new d.FiY,Yf],...e]}]}}const Kre=ca(Lre,!0);class xU{constructor(e){return e}}const AH="messaging",PU=new d.OlP("angularfire2.messaging-instances");function Jre(n){return(e,t)=>{if(!l_.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new xU(r)}}const Xre={provide:class Yre{constructor(){return ec(AH)}},deps:[[new d.FiY,PU]]},eie={provide:xU,useFactory:function Qre(n,e){if(!l_.sync())return null;const t=vu(AH,n,e);return t&&new xU(t)},deps:[[new d.FiY,PU],Lo]};let tie=(()=>{class n{constructor(){(0,an.registerVersion)("angularfire",od.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eie,Xre,{provide:d.ip1,useValue:l_.async,multi:!0}]}),n})();function nie(n,...e){return{ngModule:tie,providers:[{provide:PU,useFactory:Jre(n),multi:!0,deps:[d.R0b,d.zs3,ko,wu,...e]}]}}const rie=ca(z3,!0),OU={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};vi("firebase","10.5.0","app"),bD(OU.firebase);let oie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[UX]});static#n=this.\u0275inj=d.cJS({providers:[{provide:da.Dh,useValue:OU.firebase}],imports:[Rc,gX,uee,tX,nX,aC(()=>sV(OU.firebase)),oz(()=>az()),Cee(()=>Eee()),$G(()=>zG()),Zre(()=>Kre()),nie(()=>rie())]})}return n})();rg().bootstrapModule(oie).catch(n=>console.error(n))},5619:(it,Ce,k)=>{k.d(Ce,{X:()=>V});var d=k(8645);class V extends d.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const pe=super._subscribe(te);return!pe.closed&&te.next(this._value),pe}getValue(){const{hasError:te,thrownError:pe,_value:Ee}=this;if(te)throw pe;return this._throwIfClosed(),Ee}next(te){super.next(this._value=te)}}},5592:(it,Ce,k)=>{k.d(Ce,{y:()=>Fe});var d=k(305),V=k(7394),F=k(4850),te=k(8407),pe=k(2653),Ee=k(4674),Re=k(1441);let Fe=(()=>{class X{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Je=new X;return Je.source=this,Je.operator=Me,Je}subscribe(Me,Je,ve){const Ae=function W(X){return X&&X instanceof d.Lv||function U(X){return X&&(0,Ee.m)(X.next)&&(0,Ee.m)(X.error)&&(0,Ee.m)(X.complete)}(X)&&(0,V.Nn)(X)}(Me)?Me:new d.Hp(Me,Je,ve);return(0,Re.x)(()=>{const{operator:Te,source:tt}=this;Ae.add(Te?Te.call(Ae,tt):tt?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Je){Me.error(Je)}}forEach(Me,Je){return new(Je=De(Je))((ve,Ae)=>{const Te=new d.Hp({next:tt=>{try{Me(tt)}catch(ot){Ae(ot),Te.unsubscribe()}},error:Ae,complete:ve});this.subscribe(Te)})}_subscribe(Me){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Me)}[F.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=De(Me))((Je,ve)=>{let Ae;this.subscribe(Te=>Ae=Te,Te=>ve(Te),()=>Je(Ae))})}}return X.create=Pe=>new X(Pe),X})();function De(X){var Pe;return null!==(Pe=X??pe.config.Promise)&&void 0!==Pe?Pe:Promise}},8645:(it,Ce,k)=>{k.d(Ce,{x:()=>Re});var d=k(5592),V=k(7394);const te=(0,k(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=k(9039),Ee=k(1441);let Re=(()=>{class De extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new Fe(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new te}next(W){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:Pe,observers:Me}=this;return X||Pe?V.Lc:(this.currentObservers=null,Me.push(W),new V.w0(()=>{this.currentObservers=null,(0,pe.P)(Me,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:Pe,isStopped:Me}=this;X?W.error(Pe):Me&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return De.create=(U,W)=>new Fe(U,W),De})();class Fe extends Re{constructor(U,W){super(),this.destination=U,this.source=W}next(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,U)}error(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,U)}complete(){var U,W;null===(W=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===W||W.call(U)}_subscribe(U){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(U))&&void 0!==X?X:V.Lc}}},305:(it,Ce,k)=>{k.d(Ce,{Hp:()=>ve,Lv:()=>X});var d=k(4674),V=k(7394),F=k(2653),te=k(3894),pe=k(2420);const Ee=De("C",void 0,void 0);function De(ee,de,re){return{kind:ee,value:de,error:re}}var U=k(7599),W=k(1441);class X extends V.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new ve(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return De("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Re(ee){return De("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function Me(ee,de){return Pe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){Ae(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){Ae(he)}else Ae(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){Ae(re)}}}class ve extends X{constructor(de,re,he){let Ne;if(super(),(0,d.m)(de)||!de)Ne={next:de??void 0,error:re??void 0,complete:he??void 0};else{let B;this&&F.config.useDeprecatedNextContext?(B=Object.create(de),B.unsubscribe=()=>this.unsubscribe(),Ne={next:de.next&&Me(de.next,B),error:de.error&&Me(de.error,B),complete:de.complete&&Me(de.complete,B)}):Ne=de}this.destination=new Je(Ne)}}function Ae(ee){F.config.useDeprecatedSynchronousErrorHandling?(0,W.O)(ee):(0,te.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=F.config;re&&U.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:pe.Z,error:function Te(ee){throw ee},complete:pe.Z}},7394:(it,Ce,k)=>{k.d(Ce,{Lc:()=>Ee,w0:()=>pe,Nn:()=>Re});var d=k(4674);const F=(0,k(2306).d)(De=>function(W){De(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,Pe)=>`${Pe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var te=k(9039);class pe{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Me of W)Me.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Me){U=Me instanceof F?Me.errors:[Me]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const Me of Pe)try{Fe(Me)}catch(Je){U=U??[],Je instanceof F?U=[...U,...Je.errors]:U.push(Je)}}if(U)throw new F(U)}}add(U){var W;if(U&&U!==this)if(this.closed)Fe(U);else{if(U instanceof pe){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(U)}}_hasParent(U){const{_parentage:W}=this;return W===U||Array.isArray(W)&&W.includes(U)}_addParent(U){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(U),W):W?[W,U]:U}_removeParent(U){const{_parentage:W}=this;W===U?this._parentage=null:Array.isArray(W)&&(0,te.P)(W,U)}remove(U){const{_finalizers:W}=this;W&&(0,te.P)(W,U),U instanceof pe&&U._removeParent(this)}}pe.EMPTY=(()=>{const De=new pe;return De.closed=!0,De})();const Ee=pe.EMPTY;function Re(De){return De instanceof pe||De&&"closed"in De&&(0,d.m)(De.remove)&&(0,d.m)(De.add)&&(0,d.m)(De.unsubscribe)}function Fe(De){(0,d.m)(De)?De():De.unsubscribe()}},2653:(it,Ce,k)=>{k.d(Ce,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(it,Ce,k)=>{k.d(Ce,{E:()=>V});const V=new(k(5592).y)(pe=>pe.complete())},2459:(it,Ce,k)=>{k.d(Ce,{D:()=>de});var d=k(4829),V=k(3093),F=k(5137),Ee=k(5592),Fe=k(4971),De=k(4674),U=k(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new Ee.y(Ne=>{(0,U.f)(Ne,he,()=>{const B=re[Symbol.asyncIterator]();(0,U.f)(Ne,he,()=>{B.next().then(we=>{we.done?Ne.complete():Ne.next(we.value)})},0,!0)})})}var Pe=k(8382),Me=k(4026),Je=k(4266),ve=k(3664),Ae=k(5726),Te=k(9853),tt=k(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Pe.c)(re))return function te(re,he){return(0,d.Xf)(re).pipe((0,F.R)(he),(0,V.Q)(he))}(re,he);if((0,Je.z)(re))return function Re(re,he){return new Ee.y(Ne=>{let B=0;return he.schedule(function(){B===re.length?Ne.complete():(Ne.next(re[B++]),Ne.closed||this.schedule())})})}(re,he);if((0,Me.t)(re))return function pe(re,he){return(0,d.Xf)(re).pipe((0,F.R)(he),(0,V.Q)(he))}(re,he);if((0,Ae.D)(re))return X(re,he);if((0,ve.T)(re))return function W(re,he){return new Ee.y(Ne=>{let B;return(0,U.f)(Ne,he,()=>{B=re[Fe.h](),(0,U.f)(Ne,he,()=>{let we,Ue;try{({value:we,done:Ue}=B.next())}catch(at){return void Ne.error(at)}Ue?Ne.complete():Ne.next(we)},0,!0)}),()=>(0,De.m)(B?.return)&&B.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,Te.z)(re)}(re,he):(0,d.Xf)(re)}},4829:(it,Ce,k)=>{k.d(Ce,{Xf:()=>Pe});var d=k(7582),V=k(4266),F=k(4026),te=k(5592),pe=k(8382),Ee=k(5726),Re=k(9853),Fe=k(3664),De=k(541),U=k(4674),W=k(3894),X=k(4850);function Pe(ee){if(ee instanceof te.y)return ee;if(null!=ee){if((0,pe.c)(ee))return function Me(ee){return new te.y(de=>{const re=ee[X.L]();if((0,U.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new te.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,F.t)(ee))return function ve(ee){return new te.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,W.h)})}(ee);if((0,Ee.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function Ae(ee){return new te.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,De.L)(ee))return function tt(ee){return Te((0,De.Q)(ee))}(ee)}throw(0,Re.z)(ee)}function Te(ee){return new te.y(de=>{(function ot(ee,de){var re,he,Ne,B;return(0,d.mG)(this,void 0,void 0,function*(){try{for(re=(0,d.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){Ne={error:we}}finally{try{he&&!he.done&&(B=re.return)&&(yield B.call(re))}finally{if(Ne)throw Ne.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(it,Ce,k)=>{k.d(Ce,{T:()=>Ee});var d=k(7537),V=k(4829),F=k(6232),te=k(9940),pe=k(2459);function Ee(...Re){const Fe=(0,te.yG)(Re),De=(0,te._6)(Re,1/0),U=Re;return U.length?1===U.length?(0,V.Xf)(U[0]):(0,d.J)(De)((0,pe.D)(U,Fe)):F.E}},2096:(it,Ce,k)=>{k.d(Ce,{of:()=>F});var d=k(9940),V=k(2459);function F(...te){const pe=(0,d.yG)(te);return(0,V.D)(te,pe)}},8251:(it,Ce,k)=>{k.d(Ce,{x:()=>V});var d=k(305);function V(te,pe,Ee,Re,Fe){return new F(te,pe,Ee,Re,Fe)}class F extends d.Lv{constructor(pe,Ee,Re,Fe,De,U){super(pe),this.onFinalize=De,this.shouldUnsubscribe=U,this._next=Ee?function(W){try{Ee(W)}catch(X){pe.error(X)}}:super._next,this._error=Fe?function(W){try{Fe(W)}catch(X){pe.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(W){pe.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},3997:(it,Ce,k)=>{k.d(Ce,{x:()=>te});var d=k(2737),V=k(9360),F=k(8251);function te(Ee,Re=d.y){return Ee=Ee??pe,(0,V.e)((Fe,De)=>{let U,W=!0;Fe.subscribe((0,F.x)(De,X=>{const Pe=Re(X);(W||!Ee(U,Pe))&&(W=!1,U=Pe,De.next(X))}))})}function pe(Ee,Re){return Ee===Re}},7398:(it,Ce,k)=>{k.d(Ce,{U:()=>F});var d=k(9360),V=k(8251);function F(te,pe){return(0,d.e)((Ee,Re)=>{let Fe=0;Ee.subscribe((0,V.x)(Re,De=>{Re.next(te.call(pe,De,Fe++))}))})}},7537:(it,Ce,k)=>{k.d(Ce,{J:()=>F});var d=k(1631),V=k(2737);function F(te=1/0){return(0,d.z)(V.y,te)}},1631:(it,Ce,k)=>{k.d(Ce,{z:()=>Fe});var d=k(7398),V=k(4829),F=k(9360),te=k(7103),pe=k(8251),Re=k(4674);function Fe(De,U,W=1/0){return(0,Re.m)(U)?Fe((X,Pe)=>(0,d.U)((Me,Je)=>U(X,Me,Pe,Je))((0,V.Xf)(De(X,Pe))),W):("number"==typeof U&&(W=U),(0,F.e)((X,Pe)=>function Ee(De,U,W,X,Pe,Me,Je,ve){const Ae=[];let Te=0,tt=0,ot=!1;const ee=()=>{ot&&!Ae.length&&!Te&&U.complete()},de=he=>Te<X?re(he):Ae.push(he),re=he=>{Me&&U.next(he),Te++;let Ne=!1;(0,V.Xf)(W(he,tt++)).subscribe((0,pe.x)(U,B=>{Pe?.(B),Me?de(B):U.next(B)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Te--;Ae.length&&Te<X;){const B=Ae.shift();Je?(0,te.f)(U,Je,()=>re(B)):re(B)}ee()}catch(B){U.error(B)}}))};return De.subscribe((0,pe.x)(U,de,()=>{ot=!0,ee()})),()=>{ve?.()}}(X,Pe,De,W)))}},3093:(it,Ce,k)=>{k.d(Ce,{Q:()=>te});var d=k(7103),V=k(9360),F=k(8251);function te(pe,Ee=0){return(0,V.e)((Re,Fe)=>{Re.subscribe((0,F.x)(Fe,De=>(0,d.f)(Fe,pe,()=>Fe.next(De),Ee),()=>(0,d.f)(Fe,pe,()=>Fe.complete(),Ee),De=>(0,d.f)(Fe,pe,()=>Fe.error(De),Ee)))})}},3020:(it,Ce,k)=>{k.d(Ce,{B:()=>pe});var d=k(4829),V=k(8645),F=k(305),te=k(9360);function pe(Re={}){const{connector:Fe=(()=>new V.x),resetOnError:De=!0,resetOnComplete:U=!0,resetOnRefCountZero:W=!0}=Re;return X=>{let Pe,Me,Je,ve=0,Ae=!1,Te=!1;const tt=()=>{Me?.unsubscribe(),Me=void 0},ot=()=>{tt(),Pe=Je=void 0,Ae=Te=!1},ee=()=>{const de=Pe;ot(),de?.unsubscribe()};return(0,te.e)((de,re)=>{ve++,!Te&&!Ae&&tt();const he=Je=Je??Fe();re.add(()=>{ve--,0===ve&&!Te&&!Ae&&(Me=Ee(ee,W))}),he.subscribe(re),!Pe&&ve>0&&(Pe=new F.Hp({next:Ne=>he.next(Ne),error:Ne=>{Te=!0,tt(),Me=Ee(ot,De,Ne),he.error(Ne)},complete:()=>{Ae=!0,tt(),Me=Ee(ot,U),he.complete()}}),(0,d.Xf)(de).subscribe(Pe))})(X)}}function Ee(Re,Fe,...De){if(!0===Fe)return void Re();if(!1===Fe)return;const U=new F.Hp({next:()=>{U.unsubscribe(),Re()}});return(0,d.Xf)(Fe(...De)).subscribe(U)}},5137:(it,Ce,k)=>{k.d(Ce,{R:()=>V});var d=k(9360);function V(F,te=0){return(0,d.e)((pe,Ee)=>{Ee.add(F.schedule(()=>pe.subscribe(Ee),te))})}},4664:(it,Ce,k)=>{k.d(Ce,{w:()=>te});var d=k(4829),V=k(9360),F=k(8251);function te(pe,Ee){return(0,V.e)((Re,Fe)=>{let De=null,U=0,W=!1;const X=()=>W&&!De&&Fe.complete();Re.subscribe((0,F.x)(Fe,Pe=>{De?.unsubscribe();let Me=0;const Je=U++;(0,d.Xf)(pe(Pe,Je)).subscribe(De=(0,F.x)(Fe,ve=>Fe.next(Ee?Ee(Pe,ve,Je,Me++):ve),()=>{De=null,X()}))},()=>{W=!0,X()}))})}},7599:(it,Ce,k)=>{k.d(Ce,{z:()=>d});const d={setTimeout(V,F,...te){const{delegate:pe}=d;return pe?.setTimeout?pe.setTimeout(V,F,...te):setTimeout(V,F,...te)},clearTimeout(V){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(it,Ce,k)=>{k.d(Ce,{h:()=>V});const V=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(it,Ce,k)=>{k.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(it,Ce,k)=>{k.d(Ce,{_6:()=>Ee,jO:()=>te,yG:()=>pe});var d=k(4674),V=k(671);function F(Re){return Re[Re.length-1]}function te(Re){return(0,d.m)(F(Re))?Re.pop():void 0}function pe(Re){return(0,V.K)(F(Re))?Re.pop():void 0}function Ee(Re,Fe){return"number"==typeof F(Re)?Re.pop():Fe}},9039:(it,Ce,k)=>{function d(V,F){if(V){const te=V.indexOf(F);0<=te&&V.splice(te,1)}}k.d(Ce,{P:()=>d})},2306:(it,Ce,k)=>{function d(V){const te=V(pe=>{Error.call(pe),pe.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}k.d(Ce,{d:()=>d})},1441:(it,Ce,k)=>{k.d(Ce,{O:()=>te,x:()=>F});var d=k(2653);let V=null;function F(pe){if(d.config.useDeprecatedSynchronousErrorHandling){const Ee=!V;if(Ee&&(V={errorThrown:!1,error:null}),pe(),Ee){const{errorThrown:Re,error:Fe}=V;if(V=null,Re)throw Fe}}else pe()}function te(pe){d.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=pe)}},7103:(it,Ce,k)=>{function d(V,F,te,pe=0,Ee=!1){const Re=F.schedule(function(){te(),Ee?V.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(V.add(Re),!Ee)return Re}k.d(Ce,{f:()=>d})},2737:(it,Ce,k)=>{function d(V){return V}k.d(Ce,{y:()=>d})},4266:(it,Ce,k)=>{k.d(Ce,{z:()=>d});const d=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(it,Ce,k)=>{k.d(Ce,{D:()=>V});var d=k(4674);function V(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},4674:(it,Ce,k)=>{function d(V){return"function"==typeof V}k.d(Ce,{m:()=>d})},8382:(it,Ce,k)=>{k.d(Ce,{c:()=>F});var d=k(4850),V=k(4674);function F(te){return(0,V.m)(te[d.L])}},3664:(it,Ce,k)=>{k.d(Ce,{T:()=>F});var d=k(4971),V=k(4674);function F(te){return(0,V.m)(te?.[d.h])}},4026:(it,Ce,k)=>{k.d(Ce,{t:()=>V});var d=k(4674);function V(F){return(0,d.m)(F?.then)}},541:(it,Ce,k)=>{k.d(Ce,{L:()=>te,Q:()=>F});var d=k(7582),V=k(4674);function F(pe){return(0,d.FC)(this,arguments,function*(){const Re=pe.getReader();try{for(;;){const{value:Fe,done:De}=yield(0,d.qq)(Re.read());if(De)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Fe)}}finally{Re.releaseLock()}})}function te(pe){return(0,V.m)(pe?.getReader)}},671:(it,Ce,k)=>{k.d(Ce,{K:()=>V});var d=k(4674);function V(F){return F&&(0,d.m)(F.schedule)}},9360:(it,Ce,k)=>{k.d(Ce,{A:()=>V,e:()=>F});var d=k(4674);function V(te){return(0,d.m)(te?.lift)}function F(te){return pe=>{if(V(pe))return pe.lift(function(Ee){try{return te(Ee,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(it,Ce,k)=>{function d(){}k.d(Ce,{Z:()=>d})},8407:(it,Ce,k)=>{k.d(Ce,{U:()=>F,z:()=>V});var d=k(2737);function V(...te){return F(te)}function F(te){return 0===te.length?d.y:1===te.length?te[0]:function(Ee){return te.reduce((Re,Fe)=>Fe(Re),Ee)}}},3894:(it,Ce,k)=>{k.d(Ce,{h:()=>F});var d=k(2653),V=k(7599);function F(te){V.z.setTimeout(()=>{const{onUnhandledError:pe}=d.config;if(!pe)throw te;pe(te)})}},9853:(it,Ce,k)=>{function d(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>d})},5879:(it,Ce,k)=>{k.d(Ce,{$8M:()=>hl,$WT:()=>Ea,$Z:()=>Xb,AFp:()=>wb,ALo:()=>Xa,AaK:()=>X,AsE:()=>M0,BQk:()=>_m,CHM:()=>Ji,CRH:()=>Zm,DdM:()=>XR,Dn7:()=>y1,EJc:()=>MN,EpF:()=>QT,F4k:()=>JT,FYo:()=>Db,FiY:()=>oe,GfV:()=>Jg,Gpc:()=>Je,HDt:()=>J1,JOm:()=>Lh,KtG:()=>bh,LFG:()=>Be,LSH:()=>ef,Lbi:()=>Wg,Lck:()=>qR,MAs:()=>WT,MGl:()=>wm,MMx:()=>c1,MR2:()=>Tv,NdJ:()=>v0,O4$:()=>go,Ojb:()=>aP,OlP:()=>on,Oqu:()=>A0,P3R:()=>Qx,PXZ:()=>cS,Q6J:()=>m0,QGY:()=>ym,Qsj:()=>yP,R0b:()=>Pr,RDi:()=>XI,Rgc:()=>Xl,SBq:()=>uf,Sil:()=>PN,Suo:()=>qm,TTD:()=>mh,TgZ:()=>pm,Tol:()=>Za,VKq:()=>eN,VuI:()=>SS,W1O:()=>Qm,X6Q:()=>hS,XFs:()=>dt,Xpm:()=>Vu,Xq5:()=>a0,Xts:()=>Ml,Y36:()=>So,YKP:()=>WR,YNc:()=>HT,Yjl:()=>zu,Yz7:()=>ft,Z0I:()=>nn,ZZ4:()=>oC,_Bn:()=>Vm,_UZ:()=>y0,_c5:()=>oV,_uU:()=>wD,aQg:()=>aC,c2e:()=>Y1,cJS:()=>Sn,cg1:()=>k0,dDg:()=>Kw,dqk:()=>Nt,eFA:()=>Xs,eJc:()=>Xm,ekj:()=>D0,eoX:()=>sS,f3M:()=>Ze,g9A:()=>Cb,h0i:()=>Jl,hGG:()=>aV,hij:()=>lu,iGM:()=>S1,ifc:()=>xs,ip1:()=>K1,jDz:()=>ow,kL8:()=>F0,kcU:()=>Ct,lG2:()=>Hu,lcZ:()=>_1,lqb:()=>ws,lri:()=>a_,n5z:()=>yg,oAB:()=>ju,oxw:()=>nD,q4F:()=>Bv,qFp:()=>gC,qLn:()=>Fi,qOj:()=>Ef,qZA:()=>gm,rWj:()=>iS,rg0:()=>gh,s9C:()=>vm,sBO:()=>eV,s_b:()=>Wm,soG:()=>sr,tb:()=>Gf,tp0:()=>$e,uIk:()=>c0,vHH:()=>ee,vpe:()=>Do,wAp:()=>Qa,xp6:()=>Qb,ynx:()=>mm,z2F:()=>Wf,zSh:()=>H,zs3:()=>Ys});var d=k(8645),V=k(7394),F=k(5592),te=k(3019),pe=k(5619),Ee=k(2096),Re=k(3020),Fe=k(4664),De=k(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function W(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=U({__forward_ref__:U});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function ve(s){return Ae(s)?s():s}function Ae(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(o,c){super(function de(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,o){throw new ee(-201,!1)}function Qe(s,o){null==s&&function Ve(s,o,c,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${c} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Sn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Fn(s,cr)||Fn(s,kr)}function nn(s){return null!==In(s)}function Fn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Sr(s){return s&&(s.hasOwnProperty(Ln)||s.hasOwnProperty(ds))?s[Ln]:null}const cr=U({\u0275prov:U}),Ln=U({\u0275inj:U}),kr=U({ngInjectableDef:U}),ds=U({ngInjectorDef:U});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function rn(s){const o=mt;return mt=s,o}function Xr(s,o,c){const l=In(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&dt.Optional?null:void 0!==o?o:void Ue(X(s))}const Nt=globalThis,st={},kt="__NG_DI_FLAG__",Vt="ngTempTokenPath",z=/\n/gm,O="__source";let R;function K(s){const o=R;return R=s,o}function ge(s,o=dt.Default){if(void 0===R)throw new ee(-203,!1);return null===R?Xr(s,void 0,o):R.get(s,o&dt.Optional?null:void 0,o)}function Be(s,o=dt.Default){return(function It(){return mt}()||ge)(ve(s),o)}function Ze(s,o=dt.Default){return Be(s,Zt(o))}function Zt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function wt(s){const o=[];for(let c=0;c<s.length;c++){const l=ve(s[c]);if(Array.isArray(l)){if(0===l.length)throw new ee(900,!1);let h,p=dt.Default;for(let y=0;y<l.length;y++){const w=l[y],b=Mt(w);"number"==typeof b?-1===b?h=w.token:p|=b:h=w}o.push(Be(h,p))}else o.push(Be(l))}return o}function dn(s,o){return s[kt]=o,s.prototype[kt]=o,s}function Mt(s){return s[kt]}function Ms(s){return{toString:s}.toString()}var oo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(oo||{}),xs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(xs||{});const Mi={},Wt=[],$o=U({\u0275cmp:U}),va=U({\u0275dir:U}),Fu=U({\u0275pipe:U}),Lu=U({\u0275mod:U}),Ps=U({\u0275fac:U}),wa=U({__NG_ELEMENT_ID__:U}),Uu=U({__NG_ENV_ID__:U});function qd(s,o,c){let l=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||s.charCodeAt(h+p)<=32)return h}c=h+1}}function Ca(s,o,c){let l=0;for(;l<c.length;){const h=c[l];if("number"==typeof h){if(0!==h)break;l++;const p=c[l++],y=c[l++],w=c[l++];s.setAttribute(o,y,w,p)}else{const p=h,y=c[++l];Cc(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),l++}}return l}function Os(s){return 3===s||4===s||6===s}function Cc(s){return 64===s.charCodeAt(0)}function Ec(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?c=h:0===c||Ic(s,c,h,null,-1===c||2===c?o[++l]:null)}}return s}function Ic(s,o,c,l,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===c){if(null===l)return void(null!==h&&(s[p+1]=h));if(l===s[p+1])return void(s[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,c),null!==l&&s.splice(p++,0,l),null!==h&&s.splice(p++,0,h)}const xn="ng-template";function my(s,o,c){let l=0,h=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&h){const y=s[l++];if(c&&"class"===p&&-1!==qd(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Qi(s){return 4===s.type&&s.value!==xn}function _y(s,o,c){return o===(4!==s.type||c?s.value:xn)}function Zd(s,o,c){let l=4;const h=s.attrs||[],p=function bc(s){for(let o=0;o<s.length;o++)if(Os(s[o]))return o;return s.length}(h);let y=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!_y(s,b,c)||""===b&&1===o.length){if(ei(l))return!1;y=!0}}else{const D=8&l?b:o[++w];if(8&l&&null!==s.attrs){if(!my(s.attrs,D,c)){if(ei(l))return!1;y=!0}continue}const L=Kd(8&l?"class":b,h,Qi(s),c);if(-1===L){if(ei(l))return!1;y=!0;continue}if(""!==D){let q;q=L>p?"":h[L+1].toLowerCase();const Y=8&l?q:null;if(Y&&-1!==qd(Y,D,0)||2&l&&D!==q){if(ei(l))return!1;y=!0}}}}else{if(!y&&!ei(l)&&!ei(b))return!1;if(y&&ei(b))continue;y=!1,l=b|1&l}}return ei(l)||y}function ei(s){return 0==(1&s)}function Kd(s,o,c,l){if(null===o)return-1;let h=0;if(l||!c){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Qd(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const l=s[c];if("number"==typeof l)return-1;if(l===o)return c;c++}return-1}(o,s)}function Yd(s,o,c=!1){for(let l=0;l<o.length;l++)if(Zd(s,o[l],c))return!0;return!1}function Up(s,o){return s?":not("+o.trim()+")":o}function Vp(s){let o=s[0],c=1,l=2,h="",p=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&l){const w=s[++c];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!ei(y)&&(o+=Up(p,h),h=""),l=y,p=p||!ei(l);c++}return""!==h&&(o+=Up(p,h)),o}function Vu(s){return Ms(()=>{const o=Bp(s),c={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===oo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||xs.Emulated,styles:s.styles||Wt,_:null,schemas:s.schemas||null,tView:null,id:""};Gu(c);const l=s.dependencies;return c.directiveDefs=ao(l,!1),c.pipeDefs=ao(l,!0),c.id=function th(s){let o=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(c),c})}function Bu(s){return Ft(s)||pr(s)}function Xd(s){return null!==s}function ju(s){return Ms(()=>({type:s.type,bootstrap:s.bootstrap||Wt,declarations:s.declarations||Wt,imports:s.imports||Wt,exports:s.exports||Wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $u(s,o){if(null==s)return Mi;const c={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=l,o&&(o[h]=p)}return c}function Hu(s){return Ms(()=>{const o=Bp(s);return Gu(o),o})}function zu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[$o]||null}function pr(s){return s[va]||null}function gr(s){return s[Fu]||null}function Ea(s){const o=Ft(s)||pr(s)||gr(s);return null!==o&&o.standalone}function Lr(s,o){const c=s[Lu]||null;if(!c&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return c}function Bp(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||Mi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Wt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$u(s.inputs,o),outputs:$u(s.outputs)}}function Gu(s){s.features?.forEach(o=>o(s))}function ao(s,o){if(!s)return null;const c=o?gr:Bu;return()=>("function"==typeof s?s():s).map(l=>c(l)).filter(Xd)}const bn=0,je=1,Et=2,hn=3,pi=4,Ns=5,mr=6,Ho=7,Un=8,ks=9,co=10,pt=11,Tc=12,vy=13,gi=14,Xn=15,Ia=16,mi=17,Ur=18,Fs=19,jp=20,zo=21,fs=22,Wu=23,xi=24,Lt=25,rh=1,Dc=2,Vr=7,ba=9,er=11;function ti(s){return Array.isArray(s)&&"object"==typeof s[rh]}function Ar(s){return Array.isArray(s)&&!0===s[rh]}function ih(s){return 0!=(4&s.flags)}function Ls(s){return s.componentOffset>-1}function Ac(s){return 1==(1&s.flags)}function Pi(s){return!!s.template}function Ta(s){return 0!=(512&s[Et])}function Us(s,o){return s.hasOwnProperty(Ps)?s[Ps]:null}let lr=null,uh=!1;function jr(s){const o=lr;return lr=s,o}const lh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function My(s){if(!Yu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Py(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function xy(s){s.dirty=!0,function Gp(s){if(void 0===s.liveConsumerNode)return;const o=uh;uh=!0;try{for(const c of s.liveConsumerNode)c.dirty||xy(c)}finally{uh=o}}(s),s.consumerMarkedDirty?.(s)}function Wp(s){return s&&(s.nextProducerIndex=0),jr(s)}function Ku(s,o){if(jr(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Yu(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)xc(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Py(s){lo(s);for(let o=0;o<s.producerNode.length;o++){const c=s.producerNode[o],l=s.producerLastReadVersion[o];if(l!==c.version||(My(c),l!==c.version))return!0}return!1}function hh(s){if(lo(s),Yu(s))for(let o=0;o<s.producerNode.length;o++)xc(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function xc(s,o){if(function Ry(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),lo(s),1===s.liveConsumerNode.length)for(let l=0;l<s.producerNode.length;l++)xc(s.producerNode[l],s.producerIndexOfThis[l]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const l=s.liveConsumerIndexOfThis[o],h=s.liveConsumerNode[o];lo(h),h.producerIndexOfThis[l]=o}}function Yu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function lo(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let ky=null;function gh(s){const o=jr(null);try{return s()}finally{jr(o)}}const Jp=()=>{},EI=(()=>({...lh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Jp}))();class Vy{constructor(o,c,l){this.previousValue=o,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function mh(){return _h}function _h(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vs),Xu}function Xu(){const s=yh(this),o=s?.current;if(o){const c=s.previous;if(c===Mi)s.previous=o;else for(let l in o)c[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Vs(s,o,c,l){const h=this.declaredInputs[c],p=yh(s)||function By(s,o){return s[Aa]=o}(s,{previous:Mi,current:null}),y=p.current||(p.current={}),w=p.previous,b=w[h];y[h]=new Vy(b&&b.currentValue,o,w===Mi),s[l]=o}mh.ngInherit=!0;const Aa="__ngSimpleChanges__";function yh(s){return s[Aa]||null}const ps=function(s,o,c){},Xp="svg";function sn(s){for(;Array.isArray(s);)s=s[bn];return s}function Bs(s,o){return sn(o[s])}function $r(s,o){return sn(o[s.index])}function wh(s,o){return s.data[o]}function Ma(s,o){return s[o]}function ni(s,o){const c=o[s];return ti(c)?c:c[bn]}function ho(s,o){return null==o?null:s[o]}function eg(s){s[mi]=0}function Oc(s){1024&s[Et]||(s[Et]|=1024,qn(s,1))}function jy(s){1024&s[Et]&&(s[Et]&=-1025,qn(s,-1))}function qn(s,o){let c=s[hn];if(null===c)return;c[Ns]+=o;let l=c;for(c=c[hn];null!==c&&(1===o&&1===l[Ns]||-1===o&&0===l[Ns]);)c[Ns]+=o,l=c,c=c[hn]}const _t={lFrame:hg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xa(){return _t.bindingsEnabled}function _e(){return _t.lFrame.lView}function Bt(){return _t.lFrame.tView}function Ji(s){return _t.lFrame.contextLView=s,s[Un]}function bh(s){return _t.lFrame.contextLView=null,s}function _r(){let s=il();for(;null!==s&&64===s.type;)s=s.parent;return s}function il(){return _t.lFrame.currentTNode}function gs(s,o){const c=_t.lFrame;c.currentTNode=s,c.isParent=o}function og(){return _t.lFrame.isParent}function ag(){_t.lFrame.isParent=!1}function yr(){const s=_t.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function kc(){return _t.lFrame.bindingIndex++}function ms(s){const o=_t.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function ug(s,o){const c=_t.lFrame;c.bindingIndex=c.bindingRootIndex=s,lg(o)}function lg(s){_t.lFrame.currentDirectiveIndex=s}function qy(){return _t.lFrame.currentQueryIndex}function dg(s){_t.lFrame.currentQueryIndex=s}function MI(s){const o=s[je];return 2===o.type?o.declTNode:1===o.type?s[mr]:null}function Dh(s,o,c){if(c&dt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&dt.Host||(h=MI(p),null===h||(p=p[gi],10&h.type))););if(null===h)return!1;o=h,s=p}const l=_t.lFrame=js();return l.currentTNode=o,l.lView=s,!0}function Hr(s){const o=js(),c=s[je];_t.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function js(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?hg(s):o}function hg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function fn(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const lt=fn;function vr(){const s=fn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zr(){return _t.lFrame.selectedIndex}function $s(s){_t.lFrame.selectedIndex=s}function Cn(){const s=_t.lFrame;return wh(s.tView,s.selectedIndex)}function go(){_t.lFrame.currentNamespace=Xp}function Ct(){!function Zy(){_t.lFrame.currentNamespace=null}()}let Fc=!0;function Hs(){return Fc}function zs(s){Fc=s}function Pa(s,o){for(let c=o.directiveStart,l=o.directiveEnd;c<l;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:M}=p;y&&(s.contentHooks??=[]).push(-c,y),w&&((s.contentHooks??=[]).push(c,w),(s.contentCheckHooks??=[]).push(c,w)),b&&(s.viewHooks??=[]).push(-c,b),D&&((s.viewHooks??=[]).push(c,D),(s.viewCheckHooks??=[]).push(c,D)),null!=M&&(s.destroyHooks??=[]).push(c,M)}}function Go(s,o,c){al(s,o,3,c)}function Oa(s,o,c,l){(3&s[Et])===c&&al(s,o,c,l)}function ol(s,o){let c=s[Et];(3&c)===o&&(c&=8191,c+=1,s[Et]=c)}function al(s,o,c,l){const p=l??-1,y=o.length-1;let w=0;for(let b=void 0!==l?65535&s[mi]:0;b<y;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=l&&w>=l)break}else o[b]<0&&(s[mi]+=65536),(w<p||-1==p)&&(Lc(s,c,o,b),s[mi]=(4294901760&s[mi])+b+2),b++}function Gs(s,o){ps(4,s,o);const c=jr(null);try{o.call(s)}finally{jr(c),ps(5,s,o)}}function Lc(s,o,c,l){const h=c[l]<0,p=c[l+1],w=s[h?-c[l]:c[l]];h?s[Et]>>13<s[mi]>>16&&(3&s[Et])===o&&(s[Et]+=8192,Gs(w,p)):Gs(w,p)}const _s=-1;class Wo{constructor(o,c,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function cl(s){return s!==_s}function _i(s){return 32767&s}function gn(s,o){let c=function Vn(s){return s>>16}(s),l=o;for(;c>0;)l=l[gi],c--;return l}let Ra=!0;function wr(s){const o=Ra;return Ra=s,o}const jc=255,$c=5;let Ky=0;const tr={};function Tn(s,o){const c=ul(s,o);if(-1!==c)return c;const l=o[je];l.firstCreatePass&&(s.injectorIndex=o.length,Xi(l.data,s),Xi(o,null),Xi(l.blueprint,null));const h=Zo(s,o),p=s.injectorIndex;if(cl(h)){const y=_i(h),w=gn(h,o),b=w[je].data;for(let D=0;D<8;D++)o[p+D]=w[y+D]|b[y+D]}return o[p+8]=h,p}function Xi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ul(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Zo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,l=null,h=o;for(;null!==h;){if(l=wg(h),null===l)return _s;if(c++,h=h[gi],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return _s}function Na(s,o,c){!function yo(s,o,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(wa)&&(l=c[wa]),null==l&&(l=c[wa]=Ky++);const h=l&jc;o.data[s+(h>>$c)]|=1<<h}(s,o,c)}function xh(s,o,c){if(c&dt.Optional||void 0!==s)return s;Ue()}function ka(s,o,c,l){if(c&dt.Optional&&void 0===l&&(l=null),!(c&(dt.Self|dt.Host))){const h=s[ks],p=rn(void 0);try{return h?h.get(o,l,c&dt.Optional):Xr(o,l,c&dt.Optional)}finally{rn(p)}}return xh(l,0,c)}function Ph(s,o,c,l=dt.Default,h){if(null!==s){if(2048&o[Et]&&!(l&dt.Self)){const y=function vg(s,o,c,l,h){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[Et]&&!(512&y[Et]);){const w=ll(p,y,c,l|dt.Self,tr);if(w!==tr)return w;let b=p.parent;if(!b){const D=y[jp];if(D){const M=D.get(c,tr,l);if(M!==tr)return M}b=wg(y),y=y[gi]}p=b}return h}(s,o,c,l,tr);if(y!==tr)return y}const p=ll(s,o,c,l,tr);if(p!==tr)return p}return ka(o,c,l,h)}function ll(s,o,c,l,h){const p=function wo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(wa)?s[wa]:void 0;return"number"==typeof o?o>=0?o&jc:Co:o}(c);if("function"==typeof p){if(!Dh(o,s,l))return l&dt.Host?xh(h,0,l):ka(o,c,l,h);try{let y;if(y=p(l),null!=y||l&dt.Optional)return y;Ue()}finally{lt()}}else if("number"==typeof p){let y=null,w=ul(s,o),b=_s,D=l&dt.Host?o[Xn][mr]:null;for((-1===w||l&dt.SkipSelf)&&(b=-1===w?Zo(s,o):o[w+8],b!==_s&&mg(l,!1)?(y=o[je],w=_i(b),o=gn(b,o)):w=-1);-1!==w;){const M=o[je];if(gg(p,w,M.data)){const L=bt(w,o,c,y,l,D);if(L!==tr)return L}b=o[w+8],b!==_s&&mg(l,o[je].data[w+8]===D)&&gg(p,w,o)?(y=M,w=_i(b),o=gn(b,o)):w=-1}}return h}function bt(s,o,c,l,h,p){const y=o[je],w=y.data[s+8],M=vo(w,y,c,null==l?Ls(w)&&Ra:l!=y&&0!=(3&w.type),h&dt.Host&&p===w);return null!==M?Ko(o,y,M,w):tr}function vo(s,o,c,l,h){const p=s.providerIndexes,y=o.data,w=1048575&p,b=s.directiveStart,M=p>>20,q=h?w+M:s.directiveEnd;for(let Y=l?w:w+M;Y<q;Y++){const le=y[Y];if(Y<b&&c===le||Y>=b&&le.type===c)return Y}if(h){const Y=y[b];if(Y&&Pi(Y)&&Y.type===c)return b}return null}function Ko(s,o,c,l){let h=s[c];const p=o.data;if(function Uc(s){return s instanceof Wo}(h)){const y=h;y.resolving&&function Ne(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${c}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[c]));const w=wr(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?rn(y.injectImpl):null;Dh(s,l,dt.Default);try{h=s[c]=y.factory(void 0,p,s,l),o.firstCreatePass&&c>=l.directiveStart&&function Mr(s,o,c){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const y=_h(o);(c.preOrderHooks??=[]).push(s,y),(c.preOrderCheckHooks??=[]).push(s,y)}h&&(c.preOrderHooks??=[]).push(0-s,h),p&&((c.preOrderHooks??=[]).push(s,p),(c.preOrderCheckHooks??=[]).push(s,p))}(c,p[c],o)}finally{null!==D&&rn(D),wr(w),y.resolving=!1,lt()}}return h}function gg(s,o,c){return!!(c[o+(s>>$c)]&1<<s)}function mg(s,o){return!(s&dt.Self||s&dt.Host&&o)}class nr{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,l){return Ph(this._tNode,this._lView,o,Zt(l),c)}}function Co(){return new nr(_r(),_e())}function yg(s){return Ms(()=>{const o=s.prototype.constructor,c=o[Ps]||dl(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const p=h[Ps]||dl(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function dl(s){return Ae(s)?()=>{const o=dl(ve(s));return o&&o()}:Us(s)}function wg(s){const o=s[je],c=o.type;return 2===c?o.declTNode:1===c?s[mr]:null}function hl(s){return function pg(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const l=c.length;let h=0;for(;h<l;){const p=c[h];if(Os(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(_r(),s)}const Yo="__parameters__";function Ht(s,o,c){return Ms(()=>{const l=function Eo(s){return function(...c){if(s){const l=s(...c);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const y=new h(...p);return w.annotation=y,w;function w(b,D,M){const L=b.hasOwnProperty(Yo)?b[Yo]:Object.defineProperty(b,Yo,{value:[]})[Yo];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),b}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function La(s,o){s.forEach(c=>Array.isArray(c)?La(c,o):o(c))}function Qy(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Ua(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function yi(s,o,c){let l=Va(s,o);return l>=0?s[1|l]=c:(l=~l,function Ig(s,o,c,l){let h=s.length;if(h==o)s.push(c,l);else if(1===h)s.push(l,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=l}}(s,l,o,c)),l}function Nh(s,o){const c=Va(s,o);if(c>=0)return s[1|c]}function Va(s,o){return function yl(s,o,c){let l=0,h=s.length>>c;for(;h!==l;){const p=l+(h-l>>1),y=s[p<<c];if(o===y)return p<<c;y>o?h=p:l=p+1}return~(h<<c)}(s,o,1)}const oe=dn(Ht("Optional"),8),$e=dn(Ht("SkipSelf"),4);function Dg(s){return 128==(128&s.flags)}var Lh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Lh||{});const ov=/^>|^->|<!--|-->|--!>|<!-$/g,LI=/(<|>)/g,av="\u200b$1\u200b";const Uh=new Map;let _x=0;const Mg="__ngContext__";function ii(s,o){ti(o)?(s[Mg]=o[Fs],function UI(s){Uh.set(s[Fs],s)}(o)):s[Mg]=o}let jh;function es(s,o){return jh(s,o)}function ta(s){const o=s[hn];return Ar(o)?o[hn]:o}function jI(s){return $h(s[Tc])}function lv(s){return $h(s[pi])}function $h(s){for(;null!==s&&!Ar(s);)s=s[pi];return s}function bl(s,o,c,l,h){if(null!=l){let p,y=!1;Ar(l)?p=l:ti(l)&&(y=!0,l=l[bn]);const w=sn(l);0===s&&null!==c?null==h?GI(o,c,w):Xc(o,c,w,h||null,!0):1===s&&null!==c?Xc(o,c,w,h||null,!0):2===s?function Ng(s,o,c){const l=Rg(s,o);l&&function Ox(s,o,c,l){s.removeChild(o,c,l)}(s,l,o,c)}(o,w,y):3===s&&o.destroyNode(w),null!=p&&function Nx(s,o,c,l,h){const p=c[Vr];p!==sn(c)&&bl(o,s,l,p,h);for(let w=er;w<c.length;w++){const b=c[w];Zh(b[je],b,s,o,l,p)}}(o,s,p,c,h)}}function Qc(s,o){return s.createComment(function Sg(s){return s.replace(ov,o=>o.replace(LI,av))}(o))}function Pg(s,o,c){return s.createElement(o,c)}function $I(s,o){const c=s[ba],l=c.indexOf(o);jy(o),c.splice(l,1)}function Og(s,o){if(s.length<=er)return;const c=er+o,l=s[c];if(l){const h=l[Ia];null!==h&&h!==s&&$I(h,l),o>0&&(s[c-1][pi]=l[pi]);const p=Ua(s,er+o);!function Sx(s,o){Zh(s,o,o[pt],2,null,null),o[bn]=null,o[mr]=null}(l[je],l);const y=p[Ur];null!==y&&y.detachView(p[je]),l[hn]=null,l[pi]=null,l[Et]&=-129}return l}function dv(s,o){if(!(256&o[Et])){const c=o[pt];o[Wu]&&hh(o[Wu]),o[xi]&&hh(o[xi]),c.destroyNode&&Zh(s,o,c,3,null,null),function Ax(s){let o=s[Tc];if(!o)return HI(s[je],s);for(;o;){let c=null;if(ti(o))c=o[Tc];else{const l=o[er];l&&(c=l)}if(!c){for(;o&&!o[pi]&&o!==s;)ti(o)&&HI(o[je],o),o=o[hn];null===o&&(o=s),ti(o)&&HI(o[je],o),c=o&&o[pi]}o=c}}(o)}}function HI(s,o){if(!(256&o[Et])){o[Et]&=-129,o[Et]|=256,function zI(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let l=0;l<c.length;l+=2){const h=o[c[l]];if(!(h instanceof Wo)){const p=c[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=h[p[y]],b=p[y+1];ps(4,w,b);try{b.call(w)}finally{ps(5,w,b)}}else{ps(4,h,p);try{p.call(h)}finally{ps(5,h,p)}}}}}(s,o),function Px(s,o){const c=s.cleanup,l=o[Ho];if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+3];y>=0?l[y]():l[-y].unsubscribe(),p+=2}else c[p].call(l[c[p+1]]);null!==l&&(o[Ho]=null);const h=o[zo];if(null!==h){o[zo]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[je].type&&o[pt].destroy();const c=o[Ia];if(null!==c&&Ar(o[hn])){c!==o[hn]&&$I(c,o);const l=o[Ur];null!==l&&l.detachView(s)}!function Vh(s){Uh.delete(s[Fs])}(o)}}function Tl(s,o,c){return function Jc(s,o,c){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return c[bn];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:p}=s.data[l.directiveStart+h];if(p===xs.None||p===xs.Emulated)return null}return $r(l,c)}}(s,o.parent,c)}function Xc(s,o,c,l,h){s.insertBefore(o,c,l,h)}function GI(s,o,c){s.appendChild(o,c)}function WI(s,o,c,l,h){null!==l?Xc(s,o,c,l,h):GI(s,o,c)}function Rg(s,o){return s.parentNode(o)}let fv,JI,Fg,hv=function ZI(s,o,c){return 40&s.type?$r(s,c):null};function Wh(s,o,c,l){const h=Tl(s,l,o),p=o[pt],w=function qI(s,o,c){return hv(s,o,c)}(l.parent||o[mr],l,o);if(null!=h)if(Array.isArray(c))for(let b=0;b<c.length;b++)WI(p,h,c[b],w,!1);else WI(p,h,c,w,!1);void 0!==fv&&fv(p,l,o,c,h)}function To(s,o){if(null!==o){const c=o.type;if(3&c)return $r(o,s);if(4&c)return gv(-1,s[o.index]);if(8&c){const l=o.child;if(null!==l)return To(s,l);{const h=s[o.index];return Ar(h)?gv(-1,h):sn(h)}}if(32&c)return es(o,s)()||sn(s[o.index]);{const l=pv(s,o);return null!==l?Array.isArray(l)?l[0]:To(ta(s[Xn]),l):To(s,o.next)}}return null}function pv(s,o){return null!==o?s[Xn][mr].projection[o.projection]:null}function gv(s,o){const c=er+s+1;if(c<o.length){const l=o[c],h=l[je].firstChild;if(null!==h)return To(l,h)}return o[Vr]}function qh(s,o,c,l,h,p,y){for(;null!=c;){const w=l[c.index],b=c.type;if(y&&0===o&&(w&&ii(sn(w),l),c.flags|=2),32!=(32&c.flags))if(8&b)qh(s,o,c.child,l,h,p,!1),bl(o,s,h,w,p);else if(32&b){const D=es(c,l);let M;for(;M=D();)bl(o,s,h,M,p);bl(o,s,h,w,p)}else 16&b?_v(s,o,l,c,h,p):bl(o,s,h,w,p);c=y?c.projectionNext:c.next}}function Zh(s,o,c,l,h,p){qh(c,l,s.firstChild,o,h,p,!1)}function _v(s,o,c,l,h,p){const y=c[Xn],b=y[mr].projection[l.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)bl(o,s,h,b[D],p);else{let D=b;const M=y[hn];Dg(l)&&(D.flags|=128),qh(s,o,D,M,h,p,!0)}}function YI(s,o,c){""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c)}function Kh(s,o,c){const{mergedAttrs:l,classes:h,styles:p}=c;null!==l&&Ca(s,o,l),null!==h&&YI(s,o,h),null!==p&&function Fx(s,o,c){s.setAttribute(o,"style",c)}(s,o,p)}function XI(s){JI=s}function nb(s){return function vv(){if(void 0===Fg&&(Fg=null,Nt.trustedTypes))try{Fg=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Fg}()?.createScriptURL(s)||s}class rb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function ja(s){return s instanceof rb?s.changingThisBreaksApplicationSecurity:s}function Al(s,o){const c=function Lg(s){return s instanceof rb&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${ot})`)}return c===o}const Yh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Xh=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Xh||{});function ef(s){const o=tf();return o?o.sanitize(Xh.URL,s)||"":Al(s,"URL")?ja(s):function Vg(s){return(s=String(s)).match(Yh)?s:"unsafe:"+s}(re(s))}function hb(s){const o=tf();if(o)return nb(o.sanitize(Xh.RESOURCE_URL,s)||"");if(Al(s,"ResourceURL"))return nb(ja(s));throw new ee(904,!1)}function Qx(s,o,c){return function Yx(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?hb:ef}(o,c)(s)}function tf(){const s=_e();return s&&s[co].sanitizer}class on{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ft({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ml=new on("ENVIRONMENT_INITIALIZER"),pb=new on("INJECTOR",-1),gb=new on("INJECTOR_DEF_TYPES");class jg{get(o,c=st){if(c===st){const l=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw l.name="NullInjectorError",l}return c}}function Tv(s){return{\u0275providers:s}}function Jx(...s){return{\u0275providers:mb(0,s),\u0275fromNgModule:!0}}function mb(s,...o){const c=[],l=new Set;let h;const p=y=>{c.push(y)};return La(o,y=>{const w=y;$g(w,p,[],l)&&(h||=[],h.push(w))}),void 0!==h&&_b(h,p),c}function _b(s,o){for(let c=0;c<s.length;c++){const{ngModule:l,providers:h}=s[c];Dv(h,p=>{o(p,l)})}}function $g(s,o,c,l){if(!(s=ve(s)))return!1;let h=null,p=Sr(s);const y=!p&&Ft(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Sr(b),!p)return!1;h=b}const w=l.has(h);if(y){if(w)return!1;if(l.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of b)$g(D,o,c,l)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let D;l.add(h);try{La(p.imports,M=>{$g(M,o,c,l)&&(D||=[],D.push(M))})}finally{}void 0!==D&&_b(D,o)}if(!w){const D=Us(h)||(()=>new h);o({provide:h,useFactory:D,deps:Wt},h),o({provide:gb,useValue:h,multi:!0},h),o({provide:Ml,useValue:()=>Be(h),multi:!0},h)}const b=p.providers;if(null!=b&&!w){const D=s;Dv(b,M=>{o(M,D)})}}}return h!==s&&void 0!==s.providers}function Dv(s,o){for(let c of s)Te(c)&&(c=c.\u0275providers),Array.isArray(c)?Dv(c,o):o(c)}const KU=U({provide:String,useValue:U});function yb(s){return null!==s&&"object"==typeof s&&KU in s}function xl(s){return"function"==typeof s}const H=new on("Set Injector scope."),Hg={},zg={};let Sv;function nf(){return void 0===Sv&&(Sv=new jg),Sv}class ws{}class $a extends ws{get destroyed(){return this._destroyed}constructor(o,c,l,h){super(),this.parent=c,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rf(o,y=>this.processProvider(y)),this.records.set(pb,Pl(void 0,this)),h.has("environment")&&this.records.set(ws,Pl(void 0,this));const p=this.records.get(H);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(gb.multi,Wt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=K(this),l=rn(void 0);try{return o()}finally{K(c),rn(l)}}get(o,c=st,l=dt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Uu))return o[Uu](this);l=Zt(l);const p=K(this),y=rn(void 0);try{if(!(l&dt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function sP(s){return"function"==typeof s||"object"==typeof s&&s instanceof on}(o)&&In(o);b=D&&this.injectableDefInScope(D)?Pl(Gg(o),Hg):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(l&dt.Self?nf():this.parent).get(o,c=l&dt.Optional&&c===st?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Vt]=w[Vt]||[]).unshift(X(o)),p)throw w;return function Ai(s,o,c,l){const h=s[Vt];throw o[O]&&h.unshift(o[O]),s.message=function wc(s,o,c,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):X(w)))}h=`{${p.join(", ")}}`}return`${c}${l?"("+l+")":""}[${h}]: ${s.replace(z,"\n  ")}`}("\n"+s.message,h,c,l),s.ngTokenPath=h,s[Vt]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{rn(y),K(p)}}resolveInjectorInitializers(){const o=K(this),c=rn(void 0);try{const h=this.get(Ml.multi,Wt,dt.Self);for(const p of h)p()}finally{K(o),rn(c)}}toString(){const o=[],c=this.records;for(const l of c.keys())o.push(X(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let c=xl(o=ve(o))?o:ve(o&&o.provide);const l=function nP(s){return yb(s)?Pl(void 0,s.useValue):Pl(vb(s),Hg)}(o);if(xl(o)||!0!==o.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Pl(void 0,Hg,!0),h.factory=()=>wt(h.multi),this.records.set(c,h)),c=o,h.multi.push(o)}this.records.set(c,l)}hydrate(o,c){return c.value===Hg&&(c.value=zg,c.value=c.factory()),"object"==typeof c.value&&c.value&&function iP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ve(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Gg(s){const o=In(s),c=null!==o?o.factory:Us(s);if(null!==c)return c;if(s instanceof on)throw new ee(204,!1);if(s instanceof Function)return function Av(s){const o=s.length;if(o>0)throw function Io(s,o){const c=[];for(let l=0;l<s;l++)c.push(o);return c}(o,"?"),new ee(204,!1);const c=function hi(s){return s&&(s[cr]||s[kr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ee(204,!1)}function vb(s,o,c){let l;if(xl(s)){const h=ve(s);return Us(h)||Gg(h)}if(yb(s))l=()=>ve(s.useValue);else if(function tP(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...wt(s.deps||[]));else if(function eP(s){return!(!s||!s.useExisting)}(s))l=()=>Be(ve(s.useExisting));else{const h=ve(s&&(s.useClass||s.provide));if(!function rP(s){return!!s.deps}(s))return Us(h)||Gg(h);l=()=>new h(...wt(s.deps))}return l}function Pl(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function rf(s,o){for(const c of s)Array.isArray(c)?rf(c,o):c&&Te(c)?rf(c.\u0275providers,o):o(c)}const wb=new on("AppId",{providedIn:"root",factory:()=>oP}),oP="ng",Cb=new on("Platform Initializer"),Wg=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aP=new on("CSP nonce",{providedIn:"root",factory:()=>function eu(){if(void 0!==JI)return JI;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Fv=(s,o,c)=>null;function Cs(s,o,c=!1){return Fv(s,o,c)}class gP{}class Tb{}class af{resolveComponentFactory(o){throw function mP(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let Qg=(()=>{class s{static#e=this.NULL=new af}return s})();function cf(){return kl(_r(),_e())}function kl(s,o){return new uf($r(s,o))}let uf=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=cf}return s})();function _P(s){return s instanceof uf?s.nativeElement:s}class Db{}let yP=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Sb(){const s=_e(),c=ni(_r().index,s);return(ti(c)?c:s)[pt]}()}return s})(),vP=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class Jg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Bv=new Jg("16.2.9"),jv={};function Pb(s,o=null,c=null,l){const h=Ob(s,o,c,l);return h.resolveInjectorInitializers(),h}function Ob(s,o=null,c=null,l,h=new Set){const p=[c||Wt,Jx(s)];return l=l||("object"==typeof s?void 0:X(s)),new $a(p,o||nf(),l||null,h)}let Ys=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=st;static#t=this.NULL=new jg;static create(c,l){if(Array.isArray(c))return Pb({name:""},l,c,"");{const h=c.name??"";return Pb({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Be(pb)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function Hv(s){return s.ngOriginalError}class Fi{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Hv(o);for(;c&&Hv(c);)c=Hv(c);return c||null}}function Gv(s){return o=>{setTimeout(s,void 0,o)}}const Do=class df extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,l){let h=o,p=c||(()=>null),y=l;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=Gv(p),h&&(h=Gv(h)),y&&(y=Gv(y)));const w=super.subscribe({next:h,error:p,complete:y});return o instanceof V.w0&&o.add(w),w}};function Nb(...s){}class Pr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Do(!1),this.onMicrotaskEmpty=new Do(!1),this.onStable=new Do(!1),this.onError=new Do(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&c,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function bP(){const s="function"==typeof Nt.requestAnimationFrame;let o=Nt[s?"requestAnimationFrame":"setTimeout"],c=Nt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&c){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function SP(s){const o=()=>{!function DP(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Nt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,qv(s),s.isCheckStableRunning=!0,Wv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),qv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,h,p,y,w)=>{if(function Fl(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(w))return c.invokeTask(h,p,y,w);try{return kb(s),c.invokeTask(h,p,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Fb(s)}},onInvoke:(c,l,h,p,y,w,b)=>{try{return kb(s),c.invoke(h,p,y,w,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Fb(s)}},onHasTask:(c,l,h,p)=>{c.hasTask(h,p),l===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,qv(s),Wv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,l,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Pr.isInAngularZone())throw new ee(909,!1)}run(o,c,l){return this._inner.run(o,c,l)}runTask(o,c,l,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,TP,Nb,Nb);try{return p.runTask(y,c,l)}finally{p.cancelTask(y)}}runGuarded(o,c,l){return this._inner.runGuarded(o,c,l)}runOutsideAngular(o){return this._outer.run(o)}}const TP={};function Wv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function qv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function kb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Fb(s){s._nesting--,Wv(s)}class AP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Do,this.onMicrotaskEmpty=new Do,this.onStable=new Do,this.onError=new Do}run(o,c,l){return o.apply(c,l)}runGuarded(o,c,l){return o.apply(c,l)}runOutsideAngular(o){return o()}runTask(o,c,l,h){return o.apply(c,l)}}const Lb=new on("",{providedIn:"root",factory:Ub});function Ub(){const s=Ze(Pr);let o=!0;const c=new F.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),l=new F.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Pr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{Pr.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,te.T)(c,l.pipe((0,Re.B)()))}function ra(s){return s instanceof Function?s():s}let Zv=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function hf(s){for(;s;){s[Et]|=64;const o=ta(s);if(Ta(s)&&!o)return s;s=o}return null}const zb=new on("",{providedIn:"root",factory:()=>!1});let pf=null;function qb(s,o){return s[o]??gf()}function Zb(s,o){const c=gf();c.producerNode?.length&&(s[o]=pf,c.lView=s,pf=Yb())}const Kb={...lh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{hf(s.lView)},lView:null};function Yb(){return Object.create(Kb)}function gf(){return pf??=Yb(),pf}const Tt={};function Qb(s){Jb(Bt(),_e(),zr()+s,!1)}function Jb(s,o,c,l){if(!l)if(3==(3&o[Et])){const p=s.preOrderCheckHooks;null!==p&&Go(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Oa(o,p,0,c)}$s(c)}function So(s,o=dt.Default){const c=_e();return null===c?Be(s,o):Ph(_r(),c,ve(s),o)}function Xb(){throw new Error("invalid")}function mf(s,o,c,l,h,p,y,w,b,D,M){const L=o.blueprint.slice();return L[bn]=h,L[Et]=140|l,(null!==D||s&&2048&s[Et])&&(L[Et]|=2048),eg(L),L[hn]=L[gi]=s,L[Un]=c,L[co]=y||s&&s[co],L[pt]=w||s&&s[pt],L[ks]=b||s&&s[ks]||null,L[mr]=p,L[Fs]=function Ag(){return _x++}(),L[fs]=M,L[jp]=D,L[Xn]=2==o.type?s[Xn]:L,L}function nu(s,o,c,l,h){let p=s.data[o];if(null===p)p=function Yv(s,o,c,l,h){const p=il(),y=og(),b=s.data[o]=function VP(s,o,c,l,h,p){let y=o?o.injectorIndex:-1,w=0;return function fo(){return null!==_t.skipHydrationRootTNode}()&&(w|=128),{type:c,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,o,l,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,c,l,h),function SI(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=c,p.value=l,p.attrs=h;const y=function Nc(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return gs(p,!0),p}function _f(s,o,c,l){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function eT(s,o,c,l,h){const p=qb(o,Wu),y=zr(),w=2&l;try{$s(-1),w&&o.length>Lt&&Jb(s,o,Lt,!1),ps(w?2:0,h);const D=w?p:null,M=Wp(D);try{null!==D&&(D.dirty=!1),c(l,h)}finally{Ku(D,M)}}finally{w&&null===o[Wu]&&Zb(o,Wu),$s(y),ps(w?3:1,h)}}function Qv(s,o,c){if(ih(o)){const l=jr(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const w=s.data[y];w.contentQueries&&w.contentQueries(1,c[y],y)}}finally{jr(l)}}}function Jv(s,o,c){xa()&&(function GP(s,o,c,l){const h=c.directiveStart,p=c.directiveEnd;Ls(c)&&function JP(s,o,c){const l=$r(o,s),h=tT(c);let y=16;c.signals?y=4096:c.onPush&&(y=64);const w=tm(s,mf(s,h,null,y,l,o,null,s[co].rendererFactory.createRenderer(l,c),null,null,null));s[o.index]=w}(o,c,s.data[h+c.componentOffset]),s.firstCreatePass||Tn(c,o),ii(l,o);const y=c.initialInputs;for(let w=h;w<p;w++){const b=s.data[w],D=Ko(o,s,w,c);ii(D,o),null!==y&&XP(0,w-h,D,b,0,y),Pi(b)&&(ni(c.index,o)[Un]=Ko(o,s,w,c))}}(s,o,c,$r(c,o)),64==(64&c.flags)&&uT(s,o,c))}function yf(s,o,c=$r){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],w=-1===y?c(o,s):s[y];s[h++]=w}}}function tT(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Xv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Xv(s,o,c,l,h,p,y,w,b,D,M){const L=Lt+l,q=L+h,Y=function nT(s,o){const c=[];for(let l=0;l<o;l++)c.push(l<s?null:Tt);return c}(L,q),le="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:c,queries:null,viewQuery:w,declTNode:o,data:Y.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:le,incompleteFirstPass:!1,ssrId:M}}let e0=s=>null;function sT(s,o,c,l){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const p=s[h];null===l?oT(c,o,h,p):l.hasOwnProperty(h)&&oT(c,o,l[h],p)}return c}function oT(s,o,c,l){s.hasOwnProperty(c)?s[c].push(o,l):s[c]=[o,l]}function ts(s,o,c,l,h,p,y,w){const b=$r(o,c);let M,D=o.inputs;!w&&null!=D&&(M=D[l])?(ru(s,c,M,l,h),Ls(o)&&function aT(s,o){const c=ni(o,s);16&c[Et]||(c[Et]|=64)}(c,o.index)):3&o.type&&(l=function jP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=y?y(h,o.value||"",l):h,p.setProperty(b,l,h))}function t0(s,o,c,l){if(xa()){const h=null===l?null:{"":-1},p=function qP(s,o){const c=s.directiveRegistry;let l=null,h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];if(Yd(o,y.selectors,!1))if(l||(l=[]),Pi(y))if(null!==y.findHostDirectiveDefs){const w=[];h=h||new Map,y.findHostDirectiveDefs(y,w,h),l.unshift(...w,y),n0(s,o,w.length)}else l.unshift(y),n0(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,l,h),l.push(y)}return null===l?null:[l,h]}(s,c);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&cT(s,o,c,y,h,w),h&&function ZP(s,o,c){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new ee(-301,!1);l.push(o[h],p)}}}(c,l,h)}c.mergedAttrs=Ec(c.mergedAttrs,c.attrs)}function cT(s,o,c,l,h,p){for(let D=0;D<l.length;D++)Na(Tn(c,o),s,l[D].type);!function YP(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}(c,s.data.length,l.length);for(let D=0;D<l.length;D++){const M=l[D];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,b=_f(s,o,l.length,null);for(let D=0;D<l.length;D++){const M=l[D];c.mergedAttrs=Ec(c.mergedAttrs,M.hostAttrs),QP(s,c,o,b,M),KP(b,M,h),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const L=M.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),y=!0),!w&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),w=!0),b++}!function BP(s,o,c){const h=o.directiveEnd,p=s.data,y=o.attrs,w=[];let b=null,D=null;for(let M=o.directiveStart;M<h;M++){const L=p[M],q=c?c.get(L):null,le=q?q.outputs:null;b=sT(L.inputs,M,b,q?q.inputs:null),D=sT(L.outputs,M,D,le);const Se=null===b||null===y||Qi(o)?null:eO(b,M,y);w.push(Se)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=b,o.outputs=D}(s,c,p)}function uT(s,o,c){const l=c.directiveStart,h=c.directiveEnd,p=c.index,y=function AI(){return _t.lFrame.currentDirectiveIndex}();try{$s(p);for(let w=l;w<h;w++){const b=s.data[w],D=o[w];lg(w),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&WP(b,D)}}finally{$s(-1),lg(y)}}function WP(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function n0(s,o,c){o.componentOffset=c,(s.components??=[]).push(o.index)}function KP(s,o,c){if(c){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)c[o.exportAs[l]]=s;Pi(o)&&(c[""]=s)}}function QP(s,o,c,l,h){s.data[l]=h;const p=h.factory||(h.factory=Us(h.type)),y=new Wo(p,Pi(h),So);s.blueprint[l]=y,c[l]=y,function HP(s,o,c,l,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const w=~o.index;(function zP(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(y)!=w&&y.push(w),y.push(c,l,p)}}(s,o,l,_f(s,c,h.hostVars,Tt),h)}function Ao(s,o,c,l,h,p){const y=$r(s,o);!function r0(s,o,c,l,h,p,y){if(null==p)s.removeAttribute(o,h,c);else{const w=null==y?re(p):y(p,l||"",h);s.setAttribute(o,h,w,c)}}(o[pt],y,p,s.value,c,l,h)}function XP(s,o,c,l,h,p){const y=p[o];if(null!==y)for(let w=0;w<y.length;)lT(l,c,y[w++],y[w++],y[w++])}function lT(s,o,c,l,h){const p=jr(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(h=y[l].call(o,h)),null!==s.setInput?s.setInput(o,h,c,l):o[l]=h}finally{jr(p)}}function eO(s,o,c){let l=null,h=0;for(;h<c.length;){const p=c[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const y=s[p];for(let w=0;w<y.length;w+=2)if(y[w]===o){l.push(p,y[w+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function dT(s,o,c,l){return[s,!0,!1,o,null,0,l,c,null,null,null]}function hT(s,o){const c=s.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const p=c[l+1];if(-1!==p){const y=s.data[p];dg(c[l]),y.contentQueries(2,o[p],p)}}}function tm(s,o){return s[Tc]?s[vy][pi]=o:s[Tc]=o,s[vy]=o,o}function mn(s,o,c){dg(0);const l=jr(null);try{o(s,c)}finally{jr(l)}}function fT(s){return s[Ho]||(s[Ho]=[])}function pT(s){return s.cleanup||(s.cleanup=[])}function s0(s,o){const c=s[ks],l=c?c.get(Fi,null):null;l&&l.handleError(o)}function ru(s,o,c,l,h){for(let p=0;p<c.length;){const y=c[p++],w=c[p++];lT(s.data[y],o[y],l,w,h)}}function ia(s,o,c){const l=Bs(o,s);!function Yc(s,o,c){s.setValue(o,c)}(s[pt],l,c)}function o0(s,o){const c=ni(o,s),l=c[je];!function tO(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])}(l,c);const h=c[bn];null!==h&&null===c[fs]&&(c[fs]=Cs(h,c[ks])),Wa(l,c,c[Un])}function Wa(s,o,c){Hr(o);try{const l=s.viewQuery;null!==l&&mn(1,l,c);const h=s.template;null!==h&&eT(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hT(s,o),s.staticViewQueries&&mn(2,s.viewQuery,c);const p=s.components;null!==p&&function gT(s,o){for(let c=0;c<o.length;c++)o0(s,o[c])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Et]&=-5,vr()}}let mT=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,l,h){const p=typeof Zone>"u"?null:Zone.current,y=function Ly(s,o,c){const l=Object.create(EI);c&&(l.consumerAllowSignalWrites=!0),l.fn=s,l.schedule=o;const h=y=>{l.cleanupFn=y};return l.ref={notify:()=>xy(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Py(l))return;l.hasRun=!0;const y=Wp(l);try{l.cleanupFn(),l.cleanupFn=Jp,l.fn(h)}finally{Ku(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(c,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let w;this.all.add(y),y.notify();const b=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=l?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,l]of this.queue)this.queue.delete(c),l?l.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function rm(s,o,c){let l=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?h=Pe(h,w):2==p&&(l=Pe(l,w+": "+o[++y]+";"))}c?s.styles=l:s.stylesWithoutHost=l,c?s.classes=h:s.classesWithoutHost=h}function vf(s,o,c,l,h=!1){for(;null!==c;){const p=o[c.index];null!==p&&l.push(sn(p)),Ar(p)&&_T(p,l);const y=c.type;if(8&y)vf(s,o,c.child,l);else if(32&y){const w=es(c,o);let b;for(;b=w();)l.push(b)}else if(16&y){const w=pv(o,c);if(Array.isArray(w))l.push(...w);else{const b=ta(o[Xn]);vf(b[je],b,w,l,!0)}}c=h?c.projectionNext:c.next}return l}function _T(s,o){for(let c=er;c<s.length;c++){const l=s[c],h=l[je].firstChild;null!==h&&vf(l[je],l,h,o)}s[Vr]!==s[bn]&&o.push(s[Vr])}function wf(s,o,c,l=!0){const h=o[co],p=h.rendererFactory,y=h.afterRenderEventManager;p.begin?.(),y?.begin();try{im(s,o,s.template,c)}catch(b){throw l&&s0(o,b),b}finally{p.end?.(),h.effectManager?.flush(),y?.end()}}function im(s,o,c,l){const h=o[Et];if(256!=(256&h)){o[co].effectManager?.flush(),Hr(o);try{eg(o),function Wy(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&eT(s,o,c,2,l);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&Go(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Oa(o,D,0,null),ol(o,0)}if(function vT(s){for(let o=jI(s);null!==o;o=lv(o)){if(!o[Dc])continue;const c=o[ba];for(let l=0;l<c.length;l++){Oc(c[l])}}}(o),yT(o,2),null!==s.contentQueries&&hT(s,o),y){const D=s.contentCheckHooks;null!==D&&Go(o,D)}else{const D=s.contentHooks;null!==D&&Oa(o,D,1),ol(o,1)}!function kP(s,o){const c=s.hostBindingOpCodes;if(null===c)return;const l=qb(o,xi);try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)$s(~p);else{const y=p,w=c[++h],b=c[++h];ug(w,y),l.dirty=!1;const D=Wp(l);try{b(2,o[y])}finally{Ku(l,D)}}}}finally{null===o[xi]&&Zb(o,xi),$s(-1)}}(s,o);const w=s.components;null!==w&&CT(o,w,0);const b=s.viewQuery;if(null!==b&&mn(2,b,l),y){const D=s.viewCheckHooks;null!==D&&Go(o,D)}else{const D=s.viewHooks;null!==D&&Oa(o,D,2),ol(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Et]&=-73,jy(o)}finally{vr()}}}function yT(s,o){for(let c=jI(s);null!==c;c=lv(c))for(let l=er;l<c.length;l++)wT(c[l],o)}function iO(s,o,c){wT(ni(o,s),c)}function wT(s,o){if(!function TI(s){return 128==(128&s[Et])}(s))return;const c=s[je],l=s[Et];if(80&l&&0===o||1024&l||2===o)im(c,s,c.template,s[Un]);else if(s[Ns]>0){yT(s,1);const h=c.components;null!==h&&CT(s,h,1)}}function CT(s,o,c){for(let l=0;l<o.length;l++)iO(s,o[l],c)}class Cf{get rootNodes(){const o=this._lView,c=o[je];return vf(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(o){this._lView[Un]=o}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[hn];if(Ar(o)){const c=o[8],l=c?c.indexOf(this):-1;l>-1&&(Og(o,l),Ua(c,l))}this._attachedToViewContainer=!1}dv(this._lView[je],this._lView)}onDestroy(o){!function Eh(s,o){if(256==(256&s[Et]))throw new ee(911,!1);null===s[zo]&&(s[zo]=[]),s[zo].push(o)}(this._lView,o)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){wf(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zh(s,o){Zh(s,o,o[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class sO extends Cf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;wf(o[je],o,o[Un],!1)}checkNoChanges(){}get context(){return null}}class ET extends Qg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Ft(o);return new iu(c,this.ngModule)}}function IT(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class oO{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,l){l=Zt(l);const h=this.injector.get(o,jv,l);return h!==jv||c===jv?h:this.parentInjector.get(o,c,l)}}class iu extends Tb{get inputs(){const o=this.componentDef,c=o.inputTransforms,l=IT(o.inputs);if(null!==c)for(const h of l)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return l}get outputs(){return IT(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function mI(s){return s.map(Vp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,l,h){let p=(h=h||this.ngModule)instanceof ws?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new oO(o,p):o,w=y.get(Db,null);if(null===w)throw new ee(407,!1);const L={rendererFactory:w,sanitizer:y.get(vP,null),effectManager:y.get(mT,null),afterRenderEventManager:y.get(Zv,null)},q=w.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",le=l?function rT(s,o,c,l){const p=l.get(zb,!1)||c===xs.ShadowDom,y=s.selectRootElement(o,p);return function FP(s){e0(s)}(y),y}(q,l,this.componentDef.encapsulation,y):Pg(q,Y,function bT(s){const o=s.toLowerCase();return"svg"===o?Xp:"math"===o?"math":null}(Y)),rt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ye=null;null!==le&&(ye=Cs(le,y,!0));const yt=Xv(0,null,null,1,0,null,null,null,null,null,null),xt=mf(null,yt,null,rt,null,null,L,q,y,null,ye);let ln,Ci;Hr(xt);try{const ji=this.componentDef;let Cu,mC=null;ji.findHostDirectiveDefs?(Cu=[],mC=new Map,ji.findHostDirectiveDefs(ji,Cu,mC),Cu.push(ji)):Cu=[ji];const pk=function cO(s,o){const c=s[je],l=Lt;return s[l]=o,nu(c,l,2,"#host",null)}(xt,le),gk=function uO(s,o,c,l,h,p,y){const w=h[je];!function lO(s,o,c,l){for(const h of s)o.mergedAttrs=Ec(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(rm(o,o.mergedAttrs,!0),null!==c&&Kh(l,c,o))}(l,s,o,y);let b=null;null!==o&&(b=Cs(o,h[ks]));const D=p.rendererFactory.createRenderer(o,c);let M=16;c.signals?M=4096:c.onPush&&(M=64);const L=mf(h,tT(c),null,M,h[s.index],s,p,D,null,null,b);return w.firstCreatePass&&n0(w,s,l.length-1),tm(h,L),h[s.index]=L}(pk,le,ji,Cu,xt,L,q);Ci=wh(yt,Lt),le&&function hO(s,o,c,l){if(l)Ca(s,c,["ng-version",Bv.full]);else{const{attrs:h,classes:p}=function fi(s){const o=[],c=[];let l=1,h=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++l]):8===h&&c.push(p);else{if(!ei(h))break;h=p}l++}return{attrs:o,classes:c}}(o.selectors[0]);h&&Ca(s,c,h),p&&p.length>0&&YI(s,c,p.join(" "))}}(q,ji,le,l),void 0!==c&&function fO(s,o,c){const l=s.projection=[];for(let h=0;h<o.length;h++){const p=c[h];l.push(null!=p?Array.from(p):null)}}(Ci,this.ngContentSelectors,c),ln=function dO(s,o,c,l,h,p){const y=_r(),w=h[je],b=$r(y,h);cT(w,h,y,c,null,l);for(let M=0;M<c.length;M++)ii(Ko(h,w,y.directiveStart+M,y),h);uT(w,h,y),b&&ii(b,h);const D=Ko(h,w,y.directiveStart+y.componentOffset,y);if(s[Un]=h[Un]=D,null!==p)for(const M of p)M(D,o);return Qv(w,y,s),D}(gk,ji,Cu,mC,xt,[pO]),Wa(yt,xt,null)}finally{vr()}return new aO(this.componentType,ln,kl(Ci,xt),xt,Ci)}}class aO extends gP{constructor(o,c,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new sO(h),this.componentType=o}setInput(o,c){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const p=this._rootLView;ru(p[je],p,h,o,c),this.previousInputValues.set(o,c),hf(ni(this._tNode.index,p))}}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function pO(){const s=_r();Pa(_e()[je],s)}function Ef(s){let o=function TT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const l=[s];for(;o;){let h;if(Pi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(c){l.push(h);const y=s;y.inputs=sm(s.inputs),y.inputTransforms=sm(s.inputTransforms),y.declaredInputs=sm(s.declaredInputs),y.outputs=sm(s.outputs);const w=h.hostBindings;w&&mO(s,w);const b=h.viewQuery,D=h.contentQueries;if(b&&DT(s,b),D&&ST(s,D),W(s.inputs,h.inputs),W(s.declaredInputs,h.declaredInputs),W(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),W(y.inputTransforms,h.inputTransforms)),Pi(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(s),w===Ef&&(c=!1)}}o=Object.getPrototypeOf(o)}!function gO(s){let o=0,c=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ec(h.hostAttrs,c=Ec(c,h.hostAttrs))}}(l)}function sm(s){return s===Mi?{}:s===Wt?[]:s}function DT(s,o){const c=s.viewQuery;s.viewQuery=c?(l,h)=>{o(l,h),c(l,h)}:o}function ST(s,o){const c=s.contentQueries;s.contentQueries=c?(l,h,p)=>{o(l,h,p),c(l,h,p)}:o}function mO(s,o){const c=s.hostBindings;s.hostBindings=c?(l,h)=>{o(l,h),c(l,h)}:o}function a0(s){const o=s.inputConfig,c={};for(const l in o)if(o.hasOwnProperty(l)){const h=o[l];Array.isArray(h)&&h[2]&&(c[l]=h[2])}s.inputTransforms=c}function om(s){return!!If(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function If(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Mo(s,o,c){return s[o]=c}function Zr(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function su(s,o,c,l){const h=Zr(s,o,c);return Zr(s,o+1,l)||h}function c0(s,o,c,l){const h=_e();return Zr(h,kc(),o)&&(Bt(),Ao(Cn(),h,s,o,c,l)),c0}function Bl(s,o,c,l){return Zr(s,kc(),c)?o+re(c)+l:Tt}function jl(s,o,c,l,h,p){const w=su(s,function po(){return _t.lFrame.bindingIndex}(),c,h);return ms(2),w?o+re(c)+l+re(h)+p:Tt}function HT(s,o,c,l,h,p,y,w){const b=_e(),D=Bt(),M=s+Lt,L=D.firstCreatePass?function kO(s,o,c,l,h,p,y,w,b){const D=o.consts,M=nu(o,s,4,y||null,ho(D,w));t0(o,c,M,ho(D,b)),Pa(o,M);const L=M.tView=Xv(2,M,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,D,b,o,c,l,h,p,y):D.data[M];gs(L,!1);const q=zT(D,b,L,s);Hs()&&Wh(D,b,q,L),ii(q,b),tm(b,b[M]=dT(q,b,q,L)),Ac(L)&&Jv(D,b,L),null!=y&&yf(b,L,w)}let zT=function GT(s,o,c,l){return zs(!0),o[pt].createComment("")};function WT(s){return Ma(function zy(){return _t.lFrame.contextLView}(),Lt+s)}function m0(s,o,c){const l=_e();return Zr(l,kc(),o)&&ts(Bt(),Cn(),l,s,o,l[pt],c,!1),m0}function _0(s,o,c,l,h){const y=h?"class":"style";ru(s,c,o.inputs[y],y,l)}function pm(s,o,c,l){const h=_e(),p=Bt(),y=Lt+s,w=h[pt],b=p.firstCreatePass?function VO(s,o,c,l,h,p){const y=o.consts,b=nu(o,s,2,l,ho(y,h));return t0(o,c,b,ho(y,p)),null!==b.attrs&&rm(b,b.attrs,!1),null!==b.mergedAttrs&&rm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(y,p,h,o,c,l):p.data[y],D=qT(p,h,b,w,o,s);h[y]=D;const M=Ac(b);return gs(b,!0),Kh(w,D,b),32!=(32&b.flags)&&Hs()&&Wh(p,h,D,b),0===function ng(){return _t.lFrame.elementDepthCount}()&&ii(D,h),function rg(){_t.lFrame.elementDepthCount++}(),M&&(Jv(p,h,b),Qv(p,b,h)),null!==l&&yf(h,b),pm}function gm(){let s=_r();og()?ag():(s=s.parent,gs(s,!1));const o=s;(function Rc(s){return _t.skipHydrationRootTNode===s})(o)&&function sg(){_t.skipHydrationRootTNode=null}(),function $y(){_t.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(Pa(c,s),ih(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function _o(s){return 0!=(8&s.flags)}(o)&&_0(c,o,_e(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bc(s){return 0!=(16&s.flags)}(o)&&_0(c,o,_e(),o.stylesWithoutHost,!1),gm}function y0(s,o,c,l){return pm(s,o,c,l),gm(),y0}let qT=(s,o,c,l,h,p)=>(zs(!0),Pg(l,h,function fg(){return _t.lFrame.currentNamespace}()));function mm(s,o,c){const l=_e(),h=Bt(),p=s+Lt,y=h.firstCreatePass?function ZT(s,o,c,l,h){const p=o.consts,y=ho(p,l),w=nu(o,s,8,"ng-container",y);return null!==y&&rm(w,y,!0),t0(o,c,w,ho(p,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(p,h,l,o,c):h.data[p];gs(y,!0);const w=YT(h,l,y,s);return l[p]=w,Hs()&&Wh(h,l,w,y),ii(w,l),Ac(y)&&(Jv(h,l,y),Qv(h,y,l)),null!=c&&yf(l,y),mm}function _m(){let s=_r();const o=Bt();return og()?ag():(s=s.parent,gs(s,!1)),o.firstCreatePass&&(Pa(o,s),ih(s)&&o.queries.elementEnd(s)),_m}let YT=(s,o,c,l)=>(zs(!0),Qc(o[pt],""));function QT(){return _e()}function ym(s){return!!s&&"function"==typeof s.then}function JT(s){return!!s&&"function"==typeof s.subscribe}function v0(s,o,c,l){const h=_e(),p=Bt(),y=_r();return function eD(s,o,c,l,h,p,y){const w=Ac(l),D=s.firstCreatePass&&pT(s),M=o[Un],L=fT(o);let q=!0;if(3&l.type||y){const Se=$r(l,o),Ge=y?y(Se):Se,rt=L.length,ye=y?xt=>y(sn(xt[l.index])):l.index;let yt=null;if(!y&&w&&(yt=function zO(s,o,c,l){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===c&&h[p+1]===l){const w=o[Ho],b=h[p+2];return w.length>b?w[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,l.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=p,yt.__ngLastListenerFn__=p,q=!1;else{p=tD(l,o,M,p,!1);const xt=c.listen(Ge,h,p);L.push(p,xt),D&&D.push(h,ye,rt,rt+1)}}else p=tD(l,o,M,p,!1);const Y=l.outputs;let le;if(q&&null!==Y&&(le=Y[h])){const Se=le.length;if(Se)for(let Ge=0;Ge<Se;Ge+=2){const ln=o[le[Ge]][le[Ge+1]].subscribe(p),Ci=L.length;L.push(p,ln),D&&D.push(h,l.index,Ci,-(Ci+1))}}}(p,h,h[pt],y,s,o,l),v0}function w0(s,o,c,l){try{return ps(6,o,c),!1!==c(l)}catch(h){return s0(s,h),!1}finally{ps(7,o,c)}}function tD(s,o,c,l,h){return function p(y){if(y===Function)return l;hf(s.componentOffset>-1?ni(s.index,o):o);let b=w0(o,c,l,y),D=p.__ngNextListenerFn__;for(;D;)b=w0(o,c,D,y)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&y.preventDefault(),b}}function nD(s=1){return function sl(s){return(_t.lFrame.contextLView=function Sh(s,o){for(;s>0;)o=o[gi],s--;return o}(s,_t.lFrame.contextLView))[Un]}(s)}function vm(s,o,c){return wm(s,"",o,"",c),vm}function wm(s,o,c,l,h){const p=_e(),y=Bl(p,o,c,l);return y!==Tt&&ts(Bt(),Cn(),p,s,y,p[pt],h,!1),wm}function Cm(s,o){return s<<17|o<<2}function qa(s){return s>>17&32767}function I0(s){return 2|s}function uu(s){return(131068&s)>>2}function b0(s,o){return-131069&s|o<<2}function T0(s){return 1|s}function uD(s,o,c,l,h){const p=s[c+1],y=null===o;let w=l?qa(p):uu(p),b=!1;for(;0!==w&&(!1===b||y);){const M=s[w+1];XO(s[w],o)&&(b=!0,s[w+1]=l?T0(M):I0(M)),w=l?qa(M):uu(M)}b&&(s[c+1]=l?I0(p):T0(p))}function XO(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Va(s,o)>=0}const Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _n(s){return s.substring(Cr.key,Cr.keyEnd)}function lD(s,o){const c=Cr.textEnd;return c===o?-1:(o=Cr.keyEnd=function nR(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,Cr.key=o,c),an(s,o,c))}function an(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function D0(s,o){return function Qs(s,o,c,l){const h=_e(),p=Bt(),y=ms(2);p.firstUpdatePass&&gD(p,s,y,l),o!==Tt&&Zr(h,y,o)&&_D(p,p.data[zr()],h,h[pt],s,h[y+1]=function dR(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(ja(s)))),s}(o,c),l,y)}(s,o,null,!0),D0}function Za(s){!function Js(s,o,c,l){const h=Bt(),p=ms(2);h.firstUpdatePass&&gD(h,null,p,l);const y=_e();if(c!==Tt&&Zr(y,p,c)){const w=h.data[zr()];if(vD(w,l)&&!pD(h,p)){let b=l?w.classesWithoutHost:w.stylesWithoutHost;null!==b&&(c=Pe(b,c||"")),_0(h,w,y,c,l)}else!function lR(s,o,c,l,h,p,y,w){h===Tt&&(h=Wt);let b=0,D=0,M=0<h.length?h[0]:null,L=0<p.length?p[0]:null;for(;null!==M||null!==L;){const q=b<h.length?h[b+1]:void 0,Y=D<p.length?p[D+1]:void 0;let Se,le=null;M===L?(b+=2,D+=2,q!==Y&&(le=L,Se=Y)):null===L||null!==M&&M<L?(b+=2,le=M):(D+=2,le=L,Se=Y),null!==le&&_D(s,o,c,l,le,Se,y,w),M=b<h.length?h[b]:null,L=D<p.length?p[D]:null}}(h,w,y,y[pt],y[p+1],y[p+1]=function cR(s,o,c){if(null==c||""===c)return Wt;const l=[],h=ja(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(l,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(l,p,h[p]);else"string"==typeof h&&o(l,h);return l}(s,o,c),l,p)}}(uR,xo,s,!0)}function xo(s,o){for(let c=function eR(s){return function Mf(s){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=s.length}(s),lD(s,an(s,0,Cr.textEnd))}(o);c>=0;c=lD(o,c))yi(s,_n(o),!0)}function pD(s,o){return o>=s.expandoStartIndex}function gD(s,o,c,l){const h=s.data;if(null===h[c+1]){const p=h[zr()],y=pD(s,c);vD(p,l)&&null===o&&!y&&(o=!1),o=function iR(s,o,c,l){const h=function Th(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(c=xf(c=S0(null,s,o,c,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(c=S0(h,s,o,c,l),null===p){let b=function sR(s,o,c){const l=c?o.classBindings:o.styleBindings;if(0!==uu(l))return s[qa(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=S0(null,s,o,b[1],l),b=xf(b,o.attrs,l),function oR(s,o,c,l){s[qa(c?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else p=function aR(s,o,c){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=xf(l,s[p].hostAttrs,c);return xf(l,o.attrs,c)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,l),function QO(s,o,c,l,h,p){let y=p?o.classBindings:o.styleBindings,w=qa(y),b=uu(y);s[l]=c;let M,D=!1;if(Array.isArray(c)?(M=c[1],(null===M||Va(c,M)>0)&&(D=!0)):M=c,h)if(0!==b){const q=qa(s[w+1]);s[l+1]=Cm(q,w),0!==q&&(s[q+1]=b0(s[q+1],l)),s[w+1]=function KO(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Cm(w,0),0!==w&&(s[w+1]=b0(s[w+1],l)),w=l;else s[l+1]=Cm(b,0),0===w?w=l:s[b+1]=b0(s[b+1],l),b=l;D&&(s[l+1]=I0(s[l+1])),uD(s,M,l,!0),uD(s,M,l,!1),function JO(s,o,c,l,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Va(p,o)>=0&&(c[l+1]=T0(c[l+1]))}(o,M,s,l,p),y=Cm(w,b),p?o.classBindings=y:o.styleBindings=y}(h,p,o,c,y,l)}}function S0(s,o,c,l,h){let p=null;const y=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<y&&(p=o[w],l=xf(l,p.hostAttrs,h),p!==s);)w++;return null!==s&&(c.directiveStylingLast=w),l}function xf(s,o,c){const l=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yi(s,y,!!c||o[++p]))}return void 0===s?null:s}function uR(s,o,c){const l=String(o);""!==l&&!l.includes(" ")&&yi(s,l,c)}function _D(s,o,c,l,h,p,y,w){if(!(3&o.type))return;const b=s.data,D=b[w+1],M=function YO(s){return 1==(1&s)}(D)?yD(b,o,c,h,uu(D),y):void 0;Im(M)||(Im(p)||function ZO(s){return 2==(2&s)}(D)&&(p=yD(b,null,c,h,w,y)),function kx(s,o,c,l,h){if(o)h?s.addClass(c,l):s.removeClass(c,l);else{let p=-1===l.indexOf("-")?void 0:Lh.DashCase;null==h?s.removeStyle(c,l,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Lh.Important),s.setStyle(c,l,h,p))}}(l,y,Bs(zr(),c),h,p))}function yD(s,o,c,l,h,p){const y=null===o;let w;for(;h>0;){const b=s[h],D=Array.isArray(b),M=D?b[1]:b,L=null===M;let q=c[h+1];q===Tt&&(q=L?Wt:void 0);let Y=L?Nh(q,l):M===l?q:void 0;if(D&&!Im(Y)&&(Y=Nh(b,l)),Im(Y)&&(w=Y,y))return w;const le=s[h+1];h=y?qa(le):uu(le)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(w=Nh(b,l))}return w}function Im(s){return void 0!==s}function vD(s,o){return 0!=(s.flags&(o?8:16))}function wD(s,o=""){const c=_e(),l=Bt(),h=s+Lt,p=l.firstCreatePass?nu(l,h,1,o,null):l.data[h],y=CD(l,c,p,o,s);c[h]=y,Hs()&&Wh(l,c,y,p),gs(p,!1)}let CD=(s,o,c,l,h)=>(zs(!0),function xg(s,o){return s.createText(o)}(o[pt],l));function A0(s){return lu("",s,""),A0}function lu(s,o,c){const l=_e(),h=Bl(l,s,o,c);return h!==Tt&&ia(l,zr(),h),lu}function M0(s,o,c,l,h){const p=_e(),y=jl(p,s,o,c,l,h);return y!==Tt&&ia(p,zr(),y),M0}const Ya=void 0;var CR=["en",[["a","p"],["AM","PM"],Ya],[["AM","PM"],Ya,Ya],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ya,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ya,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ya,"{1} 'at' {0}",Ya],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wR(s){const c=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let du={};function k0(s){const o=function L0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Dm(o);if(c)return c;const l=o.split("-")[0];if(c=Dm(l),c)return c;if("en"===l)return CR;throw new ee(701,!1)}function F0(s){return k0(s)[Qa.PluralCase]}function Dm(s){return s in du||(du[s]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[s]),du[s]}var Qa=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Qa||{});const Ja="en-US";let ND=Ja;function tw(s,o,c,l,h){if(s=ve(s),Array.isArray(s))for(let p=0;p<s.length;p++)tw(s[p],o,c,l,h);else{const p=Bt(),y=_e(),w=_r();let b=xl(s)?s:ve(s.provide);const D=vb(s),M=1048575&w.providerIndexes,L=w.directiveStart,q=w.providerIndexes>>20;if(xl(s)||!s.multi){const Y=new Wo(D,h,So),le=Lf(b,o,h?M:M+q,L);-1===le?(Na(Tn(w,y),p,b),Ff(p,s,o.length),o.push(b),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),c.push(Y),y.push(Y)):(c[le]=Y,y[le]=Y)}else{const Y=Lf(b,o,M+q,L),le=Lf(b,o,M,M+q),Ge=le>=0&&c[le];if(h&&!Ge||!h&&!(Y>=0&&c[Y])){Na(Tn(w,y),p,b);const rt=function O3(s,o,c,l,h){const p=new Wo(s,c,So);return p.multi=[],p.index=o,p.componentProviders=0,s1(p,h,l&&!c),p}(h?nw:GR,c.length,h,l,D);!h&&Ge&&(c[le].providerFactory=rt),Ff(p,s,o.length,0),o.push(b),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),c.push(rt),y.push(rt)}else Ff(p,s,Y>-1?Y:le,s1(c[h?le:Y],D,!h&&l));!h&&l&&Ge&&c[le].componentProviders++}}}function Ff(s,o,c,l){const h=xl(o),p=function YU(s){return!!s.useClass}(o);if(h||p){const b=(p?ve(o.useClass):o).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=D.indexOf(c);-1===M?D.push(c,[l,b]):D[M+1].push(l,b)}else D.push(c,b)}}}function s1(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function Lf(s,o,c,l){for(let h=c;h<l;h++)if(o[h]===s)return h;return-1}function GR(s,o,c,l){return rw(this.multi,[])}function nw(s,o,c,l){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ko(c,c[je],this.providerFactory.index,l);p=w.slice(0,y),rw(h,p);for(let b=y;b<w.length;b++)p.push(w[b])}else p=[],rw(h,p);return p}function rw(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function Vm(s,o=[]){return c=>{c.providersResolver=(l,h)=>function ew(s,o,c){const l=Bt();if(l.firstCreatePass){const h=Pi(s);tw(c,l.data,l.blueprint,h,!0),tw(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class Jl{}class WR{}function qR(s,o){return new Bm(s,o??null,[])}class Bm extends Jl{constructor(o,c,l){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ET(this);const h=Lr(o);this._bootstrapComponents=ra(h.bootstrap),this._r3Injector=Ob(o,c,[{provide:Jl,useValue:this},{provide:Qg,useValue:this.componentFactoryResolver},...l],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class iw extends WR{constructor(o){super(),this.moduleType=o}create(o){return new Bm(this.moduleType,o,[])}}class a1 extends Jl{constructor(o){super(),this.componentFactoryResolver=new ET(this),this.instance=null;const c=new $a([...o.providers,{provide:Jl,useValue:this},{provide:Qg,useValue:this.componentFactoryResolver}],o.parent||nf(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function c1(s,o,c=null){return new a1({providers:s,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}let sw=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const l=mb(0,c.type),h=l.length>0?c1([l],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Be(ws))})}return s})();function ow(s){s.getStandaloneInjector=o=>o.get(sw).getOrCreateStandaloneInjector(s)}function XR(s,o,c){const l=yr()+s,h=_e();return h[l]===Tt?Mo(h,l,c?o.call(c):o()):function bf(s,o){return s[o]}(h,l)}function eN(s,o,c,l){return f1(_e(),yr(),s,o,c,l)}function Uf(s,o){const c=s[o];return c===Tt?void 0:c}function f1(s,o,c,l,h,p){const y=o+c;return Zr(s,y,h)?Mo(s,y+1,p?l.call(p,h):l(h)):Uf(s,y+1)}function g1(s,o,c,l,h,p,y,w){const b=o+c;return function Tf(s,o,c,l,h){const p=su(s,o,c,l);return Zr(s,o+2,h)||p}(s,b,h,p,y)?Mo(s,b+3,w?l.call(w,h,p,y):l(h,p,y)):Uf(s,b+3)}function Xa(s,o){const c=Bt();let l;const h=s+Lt;c.firstCreatePass?(l=function oN(s,o){if(o)for(let c=o.length-1;c>=0;c--){const l=o[c];if(s===l.name)return l}}(o,c.pipeRegistry),c.data[h]=l,l.onDestroy&&(c.destroyHooks??=[]).push(h,l.onDestroy)):l=c.data[h];const p=l.factory||(l.factory=Us(l.type)),w=rn(So);try{const b=wr(!1),D=p();return wr(b),function UO(s,o,c,l){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=l}(c,_e(),h,D),D}finally{rn(w)}}function _1(s,o,c){const l=s+Lt,h=_e(),p=Ma(h,l);return Bf(h,l)?f1(h,yr(),o,p.transform,c,p):p.transform(c)}function y1(s,o,c,l,h){const p=s+Lt,y=_e(),w=Ma(y,p);return Bf(y,p)?g1(y,yr(),o,w.transform,c,l,h,w):w.transform(c,l,h)}function Bf(s,o){return s[je].data[o].pure}function hw(){return this._results[Symbol.iterator]()}class fw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Do)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=fw.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=hw)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const l=this;l.dirty=!1;const h=function qr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Eg(s,o,c){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],p=o[l];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(l._results,h,c))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function uN(s,o,c,l=!0){const h=o[je];if(function Mx(s,o,c,l){const h=er+l,p=c.length;l>0&&(c[h-1][pi]=o),l<p-er?(o[pi]=c[h],Qy(c,er+l,o)):(c.push(o),o[pi]=null),o[hn]=c;const y=o[Ia];null!==y&&c!==y&&function xx(s,o){const c=s[ba];o[Xn]!==o[hn][hn][Xn]&&(s[Dc]=!0),null===c?s[ba]=[o]:c.push(o)}(y,o);const w=o[Ur];null!==w&&w.insertView(s),o[Et]|=128}(h,o,s,c),l){const p=gv(c,s),y=o[pt],w=Rg(y,s[Vr]);null!==w&&function Hh(s,o,c,l,h,p){l[bn]=h,l[mr]=o,Zh(s,l,c,1,h,p)}(h,s[mr],y,o,w,p)}}let Xl=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=gw}return s})();const pw=Xl,w1=class extends pw{constructor(o,c,l){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,l){const h=function v1(s,o,c,l){const h=o.tView,w=mf(s,h,c,4096&s[Et]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);w[Ia]=s[o.index];const D=s[Ur];return null!==D&&(w[Ur]=D.createEmbeddedView(h)),Wa(h,w,c),w}(this._declarationLView,this._declarationTContainer,o,{injector:c,hydrationInfo:l});return new Cf(h)}};function gw(){return ed(_r(),_e())}function ed(s,o){return 4&s.type?new w1(o,s,kl(s,o)):null}let Wm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=fN}return s})();function fN(){return ww(_r(),_e())}const _w=Wm,yw=class extends _w{constructor(o,c,l){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=l}get element(){return kl(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Zo(this._hostTNode,this._hostLView);if(cl(o)){const c=gn(o,this._hostLView),l=_i(o);return new nr(c[je].data[l+8],c)}return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=I1(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-er}createEmbeddedView(o,c,l){let h,p;"number"==typeof l?h=l:null!=l&&(h=l.index,p=l.injector);const w=o.createEmbeddedViewImpl(c||{},p,null);return this.insertImpl(w,h,false),w}createComponent(o,c,l,h,p){const y=o&&!function qs(s){return"function"==typeof s}(o);let w;if(y)w=c;else{const Se=c||{};w=Se.index,l=Se.injector,h=Se.projectableNodes,p=Se.environmentInjector||Se.ngModuleRef}const b=y?o:new iu(Ft(o)),D=l||this.parentInjector;if(!p&&null==b.ngModule){const Ge=(y?D:this.parentInjector).get(ws,null);Ge&&(p=Ge)}Ft(b.componentType??{});const Y=b.create(D,h,null,p);return this.insertImpl(Y.hostView,w,false),Y}insert(o,c){return this.insertImpl(o,c,!1)}insertImpl(o,c,l){const h=o._lView;if(function nl(s){return Ar(s[hn])}(h)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const D=h[hn],M=new yw(D,D[mr],D[hn]);M.detach(M.indexOf(o))}}const y=this._adjustIndex(c),w=this._lContainer;return uN(w,h,y,!l),o.attachToViewContainerRef(),Qy(vw(w),y,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=I1(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),l=Og(this._lContainer,c);l&&(Ua(vw(this._lContainer),c),dv(l[je],l))}detach(o){const c=this._adjustIndex(o,-1),l=Og(this._lContainer,c);return l&&null!=Ua(vw(this._lContainer),c)?new Cf(l):null}_adjustIndex(o,c=0){return o??this.length+c}};function I1(s){return s[8]}function vw(s){return s[8]||(s[8]=[])}function ww(s,o){let c;const l=o[s.index];return Ar(l)?c=l:(c=dT(l,o,null,s),o[s.index]=c,tm(o,c)),Cw(c,o,s,l),new yw(c,s,o)}let Cw=function b1(s,o,c,l){if(s[Vr])return;let h;h=8&c.type?sn(l):function pN(s,o){const c=s[pt],l=c.createComment(""),h=$r(o,s);return Xc(c,Rg(c,h),l,function Rx(s,o){return s.nextSibling(o)}(c,h),!1),l}(o,c),s[Vr]=h};class Ew{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ew(this.queryList)}setDirty(){this.queryList.setDirty()}}class td{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const l=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<l;p++){const y=c.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new td(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==M1(o,c).matches&&this.queries[c].setDirty()}}class Ro{constructor(o,c,l=null){this.predicate=o,this.flags=c,this.read=l}}class Iw{constructor(o=[]){this.queries=o}elementStart(o,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let l=0;l<this.length;l++){const h=null!==c?c.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==c?c.push(p):c=[p])}return null!==c?new Iw(c):null}template(o,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class jf{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new jf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,c,_N(c,p)),this.matchTNodeWithReadOption(o,c,vo(c,o,p,!1,!1))}else l===Xl?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,vo(c,o,l,!1,!1))}matchTNodeWithReadOption(o,c,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===uf||h===Wm||h===Xl&&4&c.type)this.addMatch(c.index,-2);else{const p=vo(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,l)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function _N(s,o){const c=s.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===o)return c[l+1];return null}function yN(s,o,c,l){return-1===c?function T1(s,o){return 11&s.type?kl(s,o):4&s.type?ed(s,o):null}(o,s):-2===c?function bw(s,o,c){return c===uf?kl(o,s):c===Xl?ed(o,s):c===Wm?ww(o,s):void 0}(s,o,l):Ko(s,s[je],c,o)}function D1(s,o,c,l){const h=o[Ur].queries[l];if(null===h.matches){const p=s.data,y=c.matches,w=[];for(let b=0;b<y.length;b+=2){const D=y[b];w.push(D<0?null:yN(o,p[D],y[b+1],c.metadata.read))}h.matches=w}return h.matches}function Tw(s,o,c,l){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const y=D1(s,o,h,c);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(y[w/2]);else{const D=p[w+1],M=o[-b];for(let L=er;L<M.length;L++){const q=M[L];q[Ia]===q[hn]&&Tw(q[je],q,D,l)}if(null!==M[ba]){const L=M[ba];for(let q=0;q<L.length;q++){const Y=L[q];Tw(Y[je],Y,D,l)}}}}}return l}function S1(s){const o=_e(),c=Bt(),l=qy();dg(l+1);const h=M1(c,l);if(s.dirty&&function Ch(s){return 4==(4&s[Et])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Tw(c,o,l,[]):D1(c,o,h,l);s.reset(p,_P),s.notifyOnChanges()}return!0}return!1}function qm(s,o,c,l){const h=Bt();if(h.firstCreatePass){const p=_r();(function Ym(s,o,c){null===s.queries&&(s.queries=new Iw),s.queries.track(new jf(o,c))})(h,new Ro(o,c,l),p.index),function Dw(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function Km(s,o,c){const l=new fw(4==(4&c));(function iT(s,o,c,l){const h=fT(o);h.push(c),s.firstCreatePass&&pT(s).push(l,h.length-1)})(s,o,l,l.destroy),null===o[Ur]&&(o[Ur]=new td),o[Ur].queries.push(new Ew(l))}(h,_e(),c)}function Zm(){return function A1(s,o){return s[Ur].queries[o].queryList}(_e(),qy())}function M1(s,o){return s.queries.getByIndex(o)}function Qm(s,o){return ed(s,o)}function Xm(s){return!!Lr(s)}const K1=new on("Application Initializer");let jw=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l}),this.appInits=Ze(K1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const p=h();if(ym(p))c.push(p);else if(JT(p)){const y=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});c.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{l()}).catch(h=>{this.reject(h)}),0===c.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Y1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const sr=new on("LocaleId",{providedIn:"root",factory:()=>Ze(sr,dt.Optional|dt.SkipSelf)||function $w(){return typeof $localize<"u"&&$localize.locale||Ja}()}),MN=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let J1=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class xN{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let PN=(()=>{class s{compileModuleSync(c){return new iw(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const l=this.compileModuleSync(c),p=ra(Lr(c).declarations).reduce((y,w)=>{const b=Ft(w);return b&&y.push(new iu(b)),y},[]);return new xN(l,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const a_=new on(""),iS=new on("");let zf,Kw=(()=>{class s{constructor(c,l,h){this._ngZone=c,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zf||(function Yw(s){zf=s}(h),h.addToWindow(l)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(c)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,l,h){return[]}static#e=this.\u0275fac=function(l){return new(l||s)(Be(Pr),Be(sS),Be(iS))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),sS=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,l){this._applications.set(c,l)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,l=!0){return zf?.findTestabilityInTree(this,c,l)??null}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),aa=null;const Qw=new on("AllowMultipleToken"),Jw=new on("PlatformDestroyListeners"),Gf=new on("appBootstrapListener");class cS{constructor(o,c){this.name=o,this.token=c}}function Xs(s,o,c=[]){const l=`Platform: ${o}`,h=new on(l);return(p=[])=>{let y=tC();if(!y||y.injector.get(Qw,!1)){const w=[...c,...p,{provide:h,useValue:!0}];s?s(w):function uS(s){if(aa&&!aa.get(Qw,!1))throw new ee(400,!1);(function aS(){!function Kp(s){ky=s}(()=>{throw new ee(600,!1)})})(),aa=s;const o=s.get(ZN);(function Xw(s){s.get(Cb,null)?.forEach(c=>c())})(s)}(function qN(s=[],o){return Ys.create({name:o,providers:[{provide:H,useValue:"platform"},{provide:Jw,useValue:new Set([()=>aa=null])},...s]})}(w,l))}return function eC(s){const o=tC();if(!o)throw new ee(401,!1);return o}()}}function tC(){return aa?.get(ZN)??null}let ZN=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,l){const h=function KN(s="zone.js",o){return"noop"===s?new AP:"zone.js"===s?new Pr(o):s}(l?.ngZone,function lS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return h.run(()=>{const p=function ZR(s,o,c){return new Bm(s,o,c)}(c.moduleType,this.injector,function XN(s){return[{provide:Pr,useFactory:s},{provide:Ml,multi:!0,useFactory:()=>{const o=Ze(K3,{optional:!0});return()=>o.initialize()}},{provide:JN,useFactory:Z3},{provide:Lb,useFactory:Ub}]}(()=>h)),y=p.injector.get(Fi,null);return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:b=>{y.handleError(b)}});p.onDestroy(()=>{id(this._modules,p),w.unsubscribe()})}),function u_(s,o,c){try{const l=c();return ym(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(y,h,()=>{const w=p.injector.get(jw);return w.runInitializers(),w.donePromise.then(()=>(function SR(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(ND=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(sr,Ja)||Ja),this._moduleDoBootstrap(p),p))})})}bootstrapModule(c,l=[]){const h=YN({},l);return function GN(s,o,c){const l=new iw(c);return Promise.resolve(l)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const l=c.injector.get(Wf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ee(-403,!1);c.instance.ngDoBootstrap(l)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const c=this._injector.get(Jw,null);c&&(c.forEach(l=>l()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||s)(Be(Ys))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function YN(s,o){return Array.isArray(o)?o.reduce(YN,s):{...s,...o}}let Wf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ze(JN),this.zoneIsStable=Ze(Lb),this.componentTypes=[],this.components=[],this.isStable=Ze(J1).hasPendingTasks.pipe((0,Fe.w)(c=>c?(0,Ee.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Re.B)()),this._injector=Ze(ws)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,l){const h=c instanceof Tb;if(!this._injector.get(jw).done)throw!h&&Ea(c),new ee(405,!1);let y;y=h?c:this._injector.get(Qg).resolveComponentFactory(c),this.componentTypes.push(y.componentType);const w=function No(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Jl),D=y.create(Ys.NULL,[],l||y.selector,w),M=D.location.nativeElement,L=D.injector.get(a_,null);return L?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),id(this.components,D),L?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const l=c;this._views.push(l),l.attachToAppRef(this)}detachView(c){const l=c;id(this._views,l),l.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const l=this._injector.get(Gf,[]);l.push(...this._bootstrapListeners),l.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>id(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function id(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}const JN=new on("",{providedIn:"root",factory:()=>Ze(Fi).handleError.bind(void 0)});function Z3(){const s=Ze(Pr),o=Ze(Fi);return c=>s.runOutsideAngular(()=>o.handleError(c))}let K3=(()=>{class s{constructor(){this.zone=Ze(Pr),this.applicationRef=Ze(Wf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function hS(){return!1}let eV=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=qf}return s})();function qf(s){return function sd(s,o,c){if(Ls(s)&&!c){const l=ni(s.index,o);return new Cf(l,l)}return 47&s.type?new Cf(o[Xn],o):null}(_r(),_e(),16==(16&s))}class tk{constructor(){}supports(o){return om(o)}create(o){return new nk(o)}}const ns=(s,o)=>o;class nk{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ns}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,l=this._removalsHead,h=0,p=null;for(;c||l;){const y=!l||c&&c.currentIndex<wu(l,h,p)?c:l,w=wu(y,h,p),b=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{p||(p=[]);const D=w-h,M=b-h;if(D!=M){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,le=Y+q;M<=le&&le<D&&(p[q]=Y+1)}p[y.previousIndex]=M-D}}w!==b&&o(y,w,b)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!om(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,c=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==c&&Object.is(c.trackById,y)?(l&&(c=this._verifyReinsertion(c,p,y,w)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,w),l=!0),c=c._next}else h=0,function wO(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Symbol.iterator]();let l;for(;!(l=c.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(h,w),null!==c&&Object.is(c.trackById,y)?(l&&(c=this._verifyReinsertion(c,w,y,h)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,y,h),l=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new rk(c,l),p,h),o}_verifyReinsertion(o,c,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,l),this._addToMoves(o,l),o}_moveAfter(o,c,l){return this._unlink(o),this._insertAfter(o,c,l),this._addToMoves(o,l),o}_addAfter(o,c,l){return this._insertAfter(o,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,l){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new Lo),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,l=o._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lo),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class rk{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ca{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const c=o._prevDup,l=o._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class Lo{constructor(){this.map=new Map}put(o){const c=o.trackById;let l=this.map.get(c);l||(l=new ca,this.map.set(c,l)),l.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wu(s,o,c){const l=s.previousIndex;if(null===l)return l;let h=0;return c&&l<c.length&&(h=c[l]),l+o+h}class ik{constructor(){}supports(o){return o instanceof Map||If(o)}create(){return new sk}}class sk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||If(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,l);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const l=o._prev;return c._next=o,c._prev=l,o._prev=c,l&&(l._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const l=new sC(o);return this._records.set(o,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(l=>c(o[l],l))}}class sC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vS(){return new oC([new tk])}let oC=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:vS});constructor(c){this.factories=c}static create(c,l){if(null!=l){const h=l.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:l=>s.create(c,l||vS()),deps:[[s,new $e,new oe]]}}find(c){const l=this.factories.find(h=>h.supports(c));if(null!=l)return l;throw new ee(901,!1)}}return s})();function wS(){return new aC([new ik])}let aC=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:wS});constructor(c){this.factories=c}static create(c,l){if(l){const h=l.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:l=>s.create(c,l||wS()),deps:[[s,new $e,new oe]]}}find(c){const l=this.factories.find(h=>h.supports(c));if(l)return l;throw new ee(901,!1)}}return s})();const oV=Xs(null,"core",[]);let aV=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(l){return new(l||s)(Be(Wf))};static#t=this.\u0275mod=ju({type:s});static#n=this.\u0275inj=Sn({})}return s})();function SS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function gC(s){const o=Ft(s);if(!o)return null;const c=new iu(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(it,Ce,k)=>{k.d(Ce,{Z:()=>Je});var d=k(9058),V=k(4537),F=k(7592),te=k(7879);class pe{constructor(Ae,Te){this._delegate=Ae,this.firebase=Te,(0,F._addComponent)(Ae,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ae,Te=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Ae);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Te})}_removeServiceInstance(Ae,Te=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(Te)}_addComponent(Ae){(0,F._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,F._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function De(){const ve=function Fe(ve){const Ae={},Te={__esModule:!0,initializeApp:function ee(Ne,B={}){const we=F.initializeApp(Ne,B);if((0,d.r3)(Ae,we.name))return Ae[we.name];const Ue=new ve(we,Te);return Ae[we.name]=Ue,Ue},app:ot,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function re(Ne){const B=Ne.name,we=B.replace("-compat","");if(F._registerComponent(Ne)&&"PUBLIC"===Ne.type){const Ue=(at=ot())=>{if("function"!=typeof at[we])throw Re.create("invalid-app-argument",{appName:B});return at[we]()};void 0!==Ne.serviceProps&&(0,d.ZB)(Ue,Ne.serviceProps),Te[we]=Ue,ve.prototype[we]=function(...at){return this._getService.bind(this,B).apply(this,Ne.multipleInstances?at:[])}}return"PUBLIC"===Ne.type?Te[we]:null},removeApp:function tt(Ne){delete Ae[Ne]},useAsService:function he(Ne,B){return"serverAuth"===B?null:B},modularAPIs:F}};function ot(Ne){if(!(0,d.r3)(Ae,Ne=Ne||F._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:Ne});return Ae[Ne]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function de(){return Object.keys(Ae).map(Ne=>Ae[Ne])}}),ot.App=ve,Te}(pe);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ae(Te){(0,d.ZB)(ve,Te)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ve}(),W=new te.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=U;!function Me(ve){(0,F.registerVersion)("@firebase/app-compat","0.2.13",ve)}()},7592:(it,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Sn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>fe,_addOrOverwriteComponent:()=>Oe,_apps:()=>ue,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Ve,_registerComponent:()=>Qe,_removeServiceInstance:()=>en,deleteApp:()=>hi,getApp:()=>nn,getApps:()=>Fn,initializeApp:()=>In,onLog:()=>Ln,registerVersion:()=>cr,setLogLevel:()=>kr});var d=k(5861),V=k(4537),F=k(7879),te=k(9058),pe=k(1878);class Ee{constructor(me){this.container=me}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Re(He){const me=He.getComponent();return"VERSION"===me?.type}(Xe)){const st=Xe.getImmediate();return`${st.library}/${st.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",U=new F.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,se=new Map;function fe(He,me){try{He.container.addComponent(me)}catch(Xe){U.debug(`Component ${me.name} failed to register with FirebaseApp ${He.name}`,Xe)}}function Oe(He,me){He.container.addOrOverwriteComponent(me)}function Qe(He){const me=He.name;if(se.has(me))return U.debug(`There were multiple attempts to register component ${me}.`),!1;se.set(me,He);for(const Xe of ue.values())fe(Xe,He);return!0}function Ve(He,me){const Xe=He.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),He.container.getProvider(me)}function en(He,me,Xe=ie){Ve(He,me).clearInstance(Xe)}function ht(){se.clear()}const ft=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tn{constructor(me,Xe,st){this._isDeleted=!1,this._options=Object.assign({},me),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=st,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this.checkDestroyed(),this._automaticDataCollectionEnabled=me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(me){this._isDeleted=me}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Sn="9.23.0";function In(He,me={}){let Xe=He;"object"!=typeof me&&(me={name:me});const st=Object.assign({name:ie,automaticDataCollectionEnabled:!1},me),kt=st.name;if("string"!=typeof kt||!kt)throw ft.create("bad-app-name",{appName:String(kt)});if(Xe||(Xe=(0,te.aH)()),!Xe)throw ft.create("no-options");const Vt=ue.get(kt);if(Vt){if((0,te.vZ)(Xe,Vt.options)&&(0,te.vZ)(st,Vt.config))return Vt;throw ft.create("duplicate-app",{appName:kt})}const Wn=new V.H0(kt);for(const j of se.values())Wn.addComponent(j);const z=new tn(Xe,st,Wn);return ue.set(kt,z),z}function nn(He=ie){const me=ue.get(He);if(!me&&He===ie&&(0,te.aH)())return In();if(!me)throw ft.create("no-app",{appName:He});return me}function Fn(){return Array.from(ue.values())}function hi(He){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(He){const me=He.name;ue.has(me)&&(ue.delete(me),yield Promise.all(He.container.getProviders().map(Xe=>Xe.delete())),He.isDeleted=!0)})).apply(this,arguments)}function cr(He,me,Xe){var st;let kt=null!==(st=ce[He])&&void 0!==st?st:He;Xe&&(kt+=`-${Xe}`);const Vt=kt.match(/\s|\//),Wn=me.match(/\s|\//);if(Vt||Wn){const z=[`Unable to register library "${kt}" with version "${me}":`];return Vt&&z.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&Wn&&z.push("and"),Wn&&z.push(`version name "${me}" contains illegal characters (whitespace or "/")`),void U.warn(z.join(" "))}Qe(new V.wA(`${kt}-version`,()=>({library:kt,version:me}),"VERSION"))}function Ln(He,me){if(null!==He&&"function"!=typeof He)throw ft.create("invalid-log-argument");(0,F.Am)(He,me)}function kr(He){(0,F.Ub)(He)}const ds="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let It=null;function rn(){return It||(It=(0,pe.X3)(ds,dt,{upgrade:(He,me)=>{0===me&&He.createObjectStore(mt)}}).catch(He=>{throw ft.create("idb-open",{originalErrorMessage:He.message})})),It}function Fr(){return(Fr=(0,d.Z)(function*(He){try{return yield(yield rn()).transaction(mt).objectStore(mt).get(hs(He))}catch(me){if(me instanceof te.ZR)U.warn(me.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:me?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function Nt(He,me){return An.apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(He,me){try{const st=(yield rn()).transaction(mt,"readwrite");yield st.objectStore(mt).put(me,hs(He)),yield st.done}catch(Xe){if(Xe instanceof te.ZR)U.warn(Xe.message);else{const st=ft.create("idb-set",{originalErrorMessage:Xe?.message});U.warn(st.message)}}})).apply(this,arguments)}function hs(He){return`${He.name}!${He.options.appId}`}class Ut{constructor(me){this.container=me,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Ki(Xe),this._heartbeatsCachePromise=this._storage.read().then(st=>(this._heartbeatsCache=st,st))}triggerHeartbeat(){var me=this;return(0,d.Z)(function*(){const st=me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Mn();if(null===me._heartbeatsCache&&(me._heartbeatsCache=yield me._heartbeatsCachePromise),me._heartbeatsCache.lastSentHeartbeatDate!==kt&&!me._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return me._heartbeatsCache.heartbeats.push({date:kt,agent:st}),me._heartbeatsCache.heartbeats=me._heartbeatsCache.heartbeats.filter(Vt=>{const Wn=new Date(Vt.date).valueOf();return Date.now()-Wn<=2592e6}),me._storage.overwrite(me._heartbeatsCache)})()}getHeartbeatsHeader(){var me=this;return(0,d.Z)(function*(){if(null===me._heartbeatsCache&&(yield me._heartbeatsCachePromise),null===me._heartbeatsCache||0===me._heartbeatsCache.heartbeats.length)return"";const Xe=Mn(),{heartbeatsToSend:st,unsentEntries:kt}=function Si(He,me=1024){const Xe=[];let st=He.slice();for(const kt of He){const Vt=Xe.find(Wn=>Wn.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),Yi(Xe)>me){Vt.dates.pop();break}}else if(Xe.push({agent:kt.agent,dates:[kt.date]}),Yi(Xe)>me){Xe.pop();break}st=st.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:st}}(me._heartbeatsCache.heartbeats),Vt=(0,te.L)(JSON.stringify({version:2,heartbeats:st}));return me._heartbeatsCache.lastSentHeartbeatDate=Xe,kt.length>0?(me._heartbeatsCache.heartbeats=kt,yield me._storage.overwrite(me._heartbeatsCache)):(me._heartbeatsCache.heartbeats=[],me._storage.overwrite(me._heartbeatsCache)),Vt})()}}function Mn(){return(new Date).toISOString().substring(0,10)}class Ki{constructor(me){this.app=me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var me=this;return(0,d.Z)(function*(){return(yield me._canUseIndexedDBPromise)&&(yield function Xr(He){return Fr.apply(this,arguments)}(me.app))||{heartbeats:[]}})()}overwrite(me){var Xe=this;return(0,d.Z)(function*(){var st;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(st=me.lastSentHeartbeatDate)&&void 0!==st?st:Vt.lastSentHeartbeatDate,heartbeats:me.heartbeats})}})()}add(me){var Xe=this;return(0,d.Z)(function*(){var st;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(st=me.lastSentHeartbeatDate)&&void 0!==st?st:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...me.heartbeats]})}})()}}function Yi(He){return(0,te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ur(He){Qe(new V.wA("platform-logger",me=>new Ee(me),"PRIVATE")),Qe(new V.wA("heartbeat",me=>new Ut(me),"PRIVATE")),cr(Fe,"0.9.13",He),cr(Fe,"0.9.13","esm2017"),cr("fire-js","")}("")},120:(it,Ce,k)=>{k.d(Ce,{Z:()=>d.Z});var d=k(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(it,Ce,k)=>{k.r(Ce);var d=k(5861),V=k(3399),F=k(6710),te=k(9058),Re=(k(7592),k(7879),k(4537));function Fe(){return window}function W(){return W=(0,d.Z)(function*(O,R,x){var K;const{BuildInfo:ge}=Fe();(0,F.as)(R.sessionId,"AuthEvent did not contain a session ID");const Be=yield function Te(O){return tt.apply(this,arguments)}(R.sessionId),vt={};return(0,F.at)()?vt.ibi=ge.packageName:(0,F.au)()?vt.apn=ge.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),ge.displayName&&(vt.appDisplayName=ge.displayName),vt.sessionId=Be,(0,F.aw)(O,x,R.type,void 0,null!==(K=R.eventId)&&void 0!==K?K:void 0,vt)}),W.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(O){const{BuildInfo:R}=Fe(),x={};(0,F.at)()?x.iosBundleId=R.packageName:(0,F.au)()?x.androidPackageName=R.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),yield(0,F.ax)(O,x)})).apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(O,R,x){const{cordova:K}=Fe();let ge=()=>{};try{yield new Promise((Be,vt)=>{let Ze=null;function Zt(){var Mt;Be();const Ai=null===(Mt=K.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof Ai&&Ai(),"function"==typeof x?.close&&x.close()}function wt(){Ze||(Ze=window.setTimeout(()=>{vt((0,F.az)(O,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&wt()}R.addPassiveListener(Zt),document.addEventListener("resume",wt,!1),(0,F.au)()&&document.addEventListener("visibilitychange",dn,!1),ge=()=>{R.removePassiveListener(Zt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",dn,!1),Ze&&window.clearTimeout(Ze)}})}finally{ge()}})).apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(O){const R=function ot(O){if((0,F.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const R=new ArrayBuffer(O.length),x=new Uint8Array(R);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(x)).map(ge=>ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(R)),super.onEvent(R)}initialized(){var R=this;return(0,d.Z)(function*(){yield R.initPromise})()}}function Ne(O){return B.apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(O){const R=yield at()._get(Xt(O));return R&&(yield at()._remove(Xt(O))),R})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function at(){return(0,F.aC)(F.b)}function Xt(O){return(0,F.aD)("authEvent",O.config.apiKey,O.name)}function En(O){if(!O?.includes("?"))return{};const[R,...x]=O.split("?");return(0,te.zd)(x.join("?"))}const ie=class Nr{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){const K=R._key();let ge=x.eventManagers.get(K);return ge||(ge=new de(R),x.eventManagers.set(K,ge),x.attachCallbackListeners(R,ge)),ge})()}_openPopup(R){(0,F.av)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,x,K,ge){var Be=this;return(0,d.Z)(function*(){!function Ae(O){var R,x,K,ge,Be,vt,Ze,Zt,wt,dn;const Mt=Fe();(0,F.aA)("function"==typeof(null===(R=Mt?.universalLinks)||void 0===R?void 0:R.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(x=Mt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(Be=null===(ge=null===(K=Mt?.cordova)||void 0===K?void 0:K.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Be?void 0:Be.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(Zt=null===(Ze=null===(vt=Mt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Zt?void 0:Zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(dn=null===(wt=Mt?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===dn?void 0:dn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const vt=yield Be._initialize(R);yield vt.initialized(),vt.resetRedirect(),(0,F.aG)(),yield Be._originValidation(R);const Ze=function re(O,R,x=null){return{type:R,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,F.az)(O,"no-auth-event")}}(R,K,ge);yield function he(O,R){return at()._set(Xt(O),R)}(R,Ze);const Zt=yield function U(O,R,x){return W.apply(this,arguments)}(R,Ze,x),wt=yield function Me(O){const{cordova:R}=Fe();return new Promise(x=>{R.plugins.browsertab.isAvailable(K=>{let ge=null;K?R.plugins.browsertab.openUrl(O):ge=R.InAppBrowser.open(O,(0,F.ay)()?"_blank":"_system","location=yes"),x(ge)})})}(Zt);return function Je(O,R,x){return ve.apply(this,arguments)}(R,vt,wt)})()}_isIframeWebStorageSupported(R,x){throw new Error("Method not implemented.")}_originValidation(R){const x=R._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Pe.apply(this,arguments)}(R)),this.originValidationPromises[x]}attachCallbackListeners(R,x){const{universalLinks:K,handleOpenURL:ge,BuildInfo:Be}=Fe(),vt=setTimeout((0,d.Z)(function*(){yield Ne(R),x.onEvent(ce())}),500),Ze=function(){var dn=(0,d.Z)(function*(Mt){clearTimeout(vt);const Ai=yield Ne(R);let wc=null;Ai&&Mt?.url&&(wc=function we(O,R){var x,K;const ge=function wn(O){const R=En(O),x=R.link?decodeURIComponent(R.link):void 0,K=En(x).link,ge=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return En(ge).link||ge||K||x||O}(R);if(ge.includes("/__/auth/callback")){const Be=En(ge),vt=Be.firebaseError?function kn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Be.firebaseError)):null,Ze=null===(K=null===(x=vt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Zt=Ze?(0,F.az)(Ze):null;return Zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:ge,postBody:null}}return null}(Ai,Mt.url)),x.onEvent(wc||ce())});return function(Ai){return dn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ze);const Zt=ge,wt=`${Be.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var dn=(0,d.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(wt)&&Ze({url:Mt}),"function"==typeof Zt)try{Zt(Mt)}catch(Ai){console.error(Ai)}});return function(Mt){return dn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function en(O=(0,te.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sn(){try{const O=self.localStorage,R=F.aL();if(O)return O.setItem(R,"1"),O.removeItem(R),!function tn(O=(0,te.z$)()){return function qt(){return(0,te.w1)()&&11===document?.documentMode}()||function ft(O=(0,te.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,te.hl)()}catch{return In()&&(0,te.hl)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nn(){return(function Ve(){return"http:"===Qe()||"https:"===Qe()}()||(0,te.ru)()||en())&&!function ht(){return(0,te.b$)()||(0,te.UG)()}()&&Sn()&&!In()}function Fn(){return en()&&typeof document<"u"}function Sr(){return(Sr=(0,d.Z)(function*(){return!!Fn()&&new Promise(O=>{const R=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),O(!0)})})})).apply(this,arguments)}const Ln={LOCAL:"local",NONE:"none",SESSION:"session"},kr=F.aA,ds="persistence";function mt(O){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(O){yield O._initializationPromise;const R=Xr(),x=F.aD(ds,O.config.apiKey,O.name);R&&R.setItem(x,O._getPersistence())})).apply(this,arguments)}function Xr(){var O;try{return(null===(O=function cr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Fr=F.aA;class Nt{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(ie),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,x,K,ge){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(R,x,K,ge)})()}_openRedirect(R,x,K,ge){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(R,x,K,ge)})()}_isIframeWebStorageSupported(R,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,x)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,d.Z)(function*(){if(R.underlyingResolver)return;const x=yield function hi(){return Sr.apply(this,arguments)}();R.underlyingResolver=x?R.cordovaResolver:R.browserResolver})()}}function An(O){return O.unwrap()}function Gt(O){return Ut(O)}function Ut(O){const{_tokenResponse:R}=O instanceof te.ZR?O.customData:O;if(!R)return null;if(!(O instanceof te.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return F.P.credentialFromResult(O);const x=R.providerId;if(!x||x===F.p.PASSWORD)return null;let K;switch(x){case F.p.GOOGLE:K=F.V;break;case F.p.FACEBOOK:K=F.U;break;case F.p.GITHUB:K=F.W;break;case F.p.TWITTER:K=F.Z;break;default:const{oauthIdToken:ge,oauthAccessToken:Be,oauthTokenSecret:vt,pendingToken:Ze,nonce:Zt}=R;return Be||vt||ge||Ze?Ze?x.startsWith("saml.")?F.aO._create(x,Ze):F.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ze,idToken:ge,accessToken:Be}):new F.X(x).credential({idToken:ge,accessToken:Be,rawNonce:Zt}):null}return O instanceof te.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Mn(O,R){return R.catch(x=>{throw x instanceof te.ZR&&function so(O,R){var x;const K=null===(x=R.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new Yi(O,F.aq(O,R));else if(K){const ge=Ut(R),Be=R;ge&&(Be.credential=ge,Be.tenantId=K.tenantId||void 0,Be.email=K.email||void 0,Be.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const ge=x.user;return{operationType:x.operationType,credential:Gt(x),additionalUserInfo:F.ao(x),user:ur.getOrCreate(ge)}})}function Si(O,R){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(O,R){const x=yield R;return{verificationId:x.verificationId,confirm:K=>Mn(O,x.confirm(K))}})).apply(this,arguments)}class Yi{constructor(R,x){this.resolver=x,this.auth=function hs(O){return O.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Mn(An(this.auth),this.resolver.resolveSignIn(R))}}class ur{constructor(R){this._delegate=R,this.multiFactor=F.ar(R)}static getOrCreate(R){return ur.USER_MAP.has(R)||ur.USER_MAP.set(R,new ur(R)),ur.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var x=this;return(0,d.Z)(function*(){return Mn(x.auth,F.a0(x._delegate,R))})()}linkWithPhoneNumber(R,x){var K=this;return(0,d.Z)(function*(){return Si(K.auth,F.l(K._delegate,R,x))})()}linkWithPopup(R){var x=this;return(0,d.Z)(function*(){return Mn(x.auth,F.d(x._delegate,R,Nt))})()}linkWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield mt(F.aH(x.auth)),F.g(x._delegate,R,Nt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var x=this;return(0,d.Z)(function*(){return Mn(x.auth,F.a1(x._delegate,R))})()}reauthenticateWithPhoneNumber(R,x){return Si(this.auth,F.r(this._delegate,R,x))}reauthenticateWithPopup(R){return Mn(this.auth,F.e(this._delegate,R,Nt))}reauthenticateWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield mt(F.aH(x.auth)),F.h(x._delegate,R,Nt)})()}sendEmailVerification(R){return F.ae(this._delegate,R)}unlink(R){var x=this;return(0,d.Z)(function*(){return yield F.an(x._delegate,R),x})()}updateEmail(R){return F.aj(this._delegate,R)}updatePassword(R){return F.ak(this._delegate,R)}updatePhoneNumber(R){return F.u(this._delegate,R)}updateProfile(R){return F.ai(this._delegate,R)}verifyBeforeUpdateEmail(R,x){return F.af(this._delegate,R,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ur.USER_MAP=new WeakMap;const He=F.aA;let me=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ge}=x.options;He(ge,"invalid-api-key",{appName:x.name}),He(ge,"invalid-api-key",{appName:x.name});const Be=typeof window<"u"?Nt:void 0;this._delegate=K.initialize({options:{persistence:st(ge,x.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ur.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){F.I(this._delegate,x,K)}applyActionCode(x){return F.a5(this._delegate,x)}checkActionCode(x){return F.a6(this._delegate,x)}confirmPasswordReset(x,K){return F.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var ge=this;return(0,d.Z)(function*(){return Mn(ge._delegate,F.a8(ge._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return F.ad(this._delegate,x)}isSignInWithEmailLink(x){return F.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,d.Z)(function*(){He(nn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield F.j(x._delegate,Nt);return K?Mn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function ue(O,R){(0,F.aH)(O)._logFramework(R)}(this._delegate,x)}onAuthStateChanged(x,K,ge){const{next:Be,error:vt,complete:Ze}=Xe(x,K,ge);return this._delegate.onAuthStateChanged(Be,vt,Ze)}onIdTokenChanged(x,K,ge){const{next:Be,error:vt,complete:Ze}=Xe(x,K,ge);return this._delegate.onIdTokenChanged(Be,vt,Ze)}sendSignInLinkToEmail(x,K){return F.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return F.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,d.Z)(function*(){let ge;switch(function dt(O,R){kr(Object.values(Ln).includes(R),O,"invalid-persistence-type"),(0,te.b$)()?kr(R!==Ln.SESSION,O,"unsupported-persistence-type"):(0,te.UG)()?kr(R===Ln.NONE,O,"unsupported-persistence-type"):In()?kr(R===Ln.NONE||R===Ln.LOCAL&&(0,te.hl)(),O,"unsupported-persistence-type"):kr(R===Ln.NONE||Sn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Ln.SESSION:ge=F.a;break;case Ln.LOCAL:ge=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case Ln.NONE:ge=F.N;break;default:return F.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(ge)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Mn(this._delegate,F._(this._delegate))}signInWithCredential(x){return Mn(this._delegate,F.$(this._delegate,x))}signInWithCustomToken(x){return Mn(this._delegate,F.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return Mn(this._delegate,F.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return Mn(this._delegate,F.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Si(this._delegate,F.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,d.Z)(function*(){return He(nn(),K._delegate,"operation-not-supported-in-this-environment"),Mn(K._delegate,F.c(K._delegate,x,Nt))})()}signInWithRedirect(x){var K=this;return(0,d.Z)(function*(){return He(nn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),F.f(K._delegate,x,Nt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return F.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Ln,O})();function Xe(O,R,x){let K=O;"function"!=typeof O&&({next:K,error:R,complete:x}=O);const ge=K;return{next:vt=>ge(vt&&ur.getOrCreate(vt)),error:R,complete:x}}function st(O,R){const x=function rn(O,R){const x=Xr();if(!x)return[];const K=F.aD(ds,O,R);switch(x.getItem(K)){case Ln.NONE:return[F.N];case Ln.LOCAL:return[F.i,F.a];case Ln.SESSION:return[F.a];default:return[]}}(O,R);if(typeof self<"u"&&!x.includes(F.i)&&x.push(F.i),typeof window<"u")for(const K of[F.b,F.a])x.includes(K)||x.push(K);return x.includes(F.N)||x.push(F.N),x}class kt{constructor(){this.providerId="phone",this._delegate=new F.P(An(V.Z.auth()))}static credential(R,x){return F.P.credential(R,x)}verifyPhoneNumber(R,x){return this._delegate.verifyPhoneNumber(R,x)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=F.P.PROVIDER_ID;const Vt=F.aA;class Wn{constructor(R,x,K=V.Z.app()){var ge;Vt(null===(ge=K.options)||void 0===ge?void 0:ge.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new F.R(R,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(O){O.INTERNAL.registerComponent(new Re.wA("auth-compat",R=>{const x=R.getProvider("app-compat").getImmediate(),K=R.getProvider("auth");return new me(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:Wn,TwitterAuthProvider:F.Z,Auth:me,AuthCredential:F.J,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(it,Ce,k)=>{k.d(Ce,{H0:()=>Fe,wA:()=>F});var d=k(5861),V=k(9058);class F{constructor(U,W,X){this.name=U,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const te="[DEFAULT]";class pe{constructor(U,W){this.name=U,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const W=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(W)){const X=new V.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:W});Pe&&X.resolve(Pe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(U){var W;const X=this.normalizeInstanceIdentifier(U?.identifier),Pe=null!==(W=U?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(Pe)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Re(De){return"EAGER"===De.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(W);try{const Me=this.getOrInitializeService({instanceIdentifier:Pe});X.resolve(Me)}catch{}}}}clearInstance(U=te){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const W=Array.from(U.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=te){return this.instances.has(U)}getOptions(U=te){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:W={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Me,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Je.resolve(Pe);return Pe}onInit(U,W){var X;const Pe=this.normalizeInstanceIdentifier(W),Me=null!==(X=this.onInitCallbacks.get(Pe))&&void 0!==X?X:new Set;Me.add(U),this.onInitCallbacks.set(Pe,Me);const Je=this.instances.get(Pe);return Je&&U(Je,Pe),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,W){const X=this.onInitCallbacks.get(W);if(X)for(const Pe of X)try{Pe(U,W)}catch{}}getOrInitializeService({instanceIdentifier:U,options:W={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(De=U,De===te?void 0:De),options:W}),this.instances.set(U,X),this.instancesOptions.set(U,W),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var De;return X||null}normalizeInstanceIdentifier(U=te){return this.component?this.component.multipleInstances?U:te:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const W=this.getProvider(U.name);if(W.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);W.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const W=new pe(U,this);return this.providers.set(U,W),W}getProviders(){return Array.from(this.providers.values())}}},7879:(it,Ce,k)=>{k.d(Ce,{Am:()=>De,Ub:()=>Fe,Yd:()=>Re,in:()=>V});const d=[];var V=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(V||{});const F={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},te=V.INFO,pe={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ee=(U,W,...X)=>{if(W<U.logLevel)return;const Pe=(new Date).toISOString(),Me=pe[W];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Me](`[${Pe}]  ${U.name}:`,...X)};class Re{constructor(W){this.name=W,this._logLevel=te,this._logHandler=Ee,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in V))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...W),this._logHandler(this,V.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...W),this._logHandler(this,V.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,V.INFO,...W),this._logHandler(this,V.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,V.WARN,...W),this._logHandler(this,V.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...W),this._logHandler(this,V.ERROR,...W)}}function Fe(U){d.forEach(W=>{W.setLogLevel(U)})}function De(U,W){for(const X of d){let Pe=null;W&&W.level&&(Pe=F[W.level]),X.userLogHandler=null===U?null:(Me,Je,...ve)=>{const Ae=ve.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Pe??Me.logLevel)&&U({level:V[Je].toLowerCase(),message:Ae,args:ve,type:Me.name})}}}},1878:(it,Ce,k)=>{k.d(Ce,{X3:()=>ot});var d=k(5861);const V=(B,we)=>we.some(Ue=>B instanceof Ue);let F,te;const Re=new WeakMap,Fe=new WeakMap,De=new WeakMap,U=new WeakMap,W=new WeakMap;let Me={get(B,we,Ue){if(B instanceof IDBTransaction){if("done"===we)return Fe.get(B);if("objectStoreNames"===we)return B.objectStoreNames||De.get(B);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(B[we])},set:(B,we,Ue)=>(B[we]=Ue,!0),has:(B,we)=>B instanceof IDBTransaction&&("done"===we||"store"===we)||we in B};function Ae(B){return"function"==typeof B?function ve(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...we){return B.apply(tt(this),we),Te(Re.get(this))}:function(...we){return Te(B.apply(tt(this),we))}:function(we,...Ue){const at=B.call(tt(this),we,...Ue);return De.set(at,we.sort?we.sort():[we]),Te(at)}}(B):(B instanceof IDBTransaction&&function Pe(B){if(Fe.has(B))return;const we=new Promise((Ue,at)=>{const Xt=()=>{B.removeEventListener("complete",kn),B.removeEventListener("error",wn),B.removeEventListener("abort",wn)},kn=()=>{Ue(),Xt()},wn=()=>{at(B.error||new DOMException("AbortError","AbortError")),Xt()};B.addEventListener("complete",kn),B.addEventListener("error",wn),B.addEventListener("abort",wn)});Fe.set(B,we)}(B),V(B,function pe(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Me):B)}function Te(B){if(B instanceof IDBRequest)return function X(B){const we=new Promise((Ue,at)=>{const Xt=()=>{B.removeEventListener("success",kn),B.removeEventListener("error",wn)},kn=()=>{Ue(Te(B.result)),Xt()},wn=()=>{at(B.error),Xt()};B.addEventListener("success",kn),B.addEventListener("error",wn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Re.set(Ue,B)}).catch(()=>{}),W.set(we,B),we}(B);if(U.has(B))return U.get(B);const we=Ae(B);return we!==B&&(U.set(B,we),W.set(we,B)),we}const tt=B=>W.get(B);function ot(B,we,{blocked:Ue,upgrade:at,blocking:Xt,terminated:kn}={}){const wn=indexedDB.open(B,we),En=Te(wn);return at&&wn.addEventListener("upgradeneeded",un=>{at(Te(wn.result),un.oldVersion,un.newVersion,Te(wn.transaction),un)}),Ue&&wn.addEventListener("blocked",un=>Ue(un.oldVersion,un.newVersion,un)),En.then(un=>{kn&&un.addEventListener("close",()=>kn()),Xt&&un.addEventListener("versionchange",Nr=>Xt(Nr.oldVersion,Nr.newVersion,Nr))}).catch(()=>{}),En}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function Ne(B,we){if(!(B instanceof IDBDatabase)||we in B||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),at=we!==Ue,Xt=re.includes(Ue);if(!(Ue in(at?IDBIndex:IDBObjectStore).prototype)||!Xt&&!de.includes(Ue))return;const kn=function(){var wn=(0,d.Z)(function*(En,...un){const Nr=this.transaction(En,Xt?"readwrite":"readonly");let ie=Nr.store;return at&&(ie=ie.index(un.shift())),(yield Promise.all([ie[Ue](...un),Xt&&Nr.done]))[0]});return function(un){return wn.apply(this,arguments)}}();return he.set(we,kn),kn}!function Je(B){Me=B(Me)}(B=>({...B,get:(we,Ue,at)=>Ne(we,Ue)||B.get(we,Ue,at),has:(we,Ue)=>!!Ne(we,Ue)||B.has(we,Ue)}))},5861:(it,Ce,k)=>{function d(F,te,pe,Ee,Re,Fe,De){try{var U=F[Fe](De),W=U.value}catch(X){return void pe(X)}U.done?te(W):Promise.resolve(W).then(Ee,Re)}function V(F){return function(){var te=this,pe=arguments;return new Promise(function(Ee,Re){var Fe=F.apply(te,pe);function De(W){d(Fe,Ee,Re,De,U,"next",W)}function U(W){d(Fe,Ee,Re,De,U,"throw",W)}De(void 0)})}}k.d(Ce,{Z:()=>V})},7582:(it,Ce,k)=>{function te(ie,ce){var ue={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(ue[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(se=Object.getOwnPropertySymbols(ie);fe<se.length;fe++)ce.indexOf(se[fe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[fe])&&(ue[se[fe]]=ie[se[fe]])}return ue}function X(ie,ce,ue,se){return new(ue||(ue=Promise))(function(Oe,Qe){function Ve(qt){try{ht(se.next(qt))}catch(ft){Qe(ft)}}function en(qt){try{ht(se.throw(qt))}catch(ft){Qe(ft)}}function ht(qt){qt.done?Oe(qt.value):function fe(Oe){return Oe instanceof ue?Oe:new ue(function(Qe){Qe(Oe)})}(qt.value).then(Ve,en)}ht((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,se=ue.apply(ie,ce||[]),Oe=[];return fe={},Qe("next"),Qe("throw"),Qe("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Qe(tn){se[tn]&&(fe[tn]=function(Sn){return new Promise(function(In,nn){Oe.push([tn,Sn,In,nn])>1||Ve(tn,Sn)})})}function Ve(tn,Sn){try{!function en(tn){tn.value instanceof ee?Promise.resolve(tn.value.v).then(ht,qt):ft(Oe[0][2],tn)}(se[tn](Sn))}catch(In){ft(Oe[0][3],In)}}function ht(tn){Ve("next",tn)}function qt(tn){Ve("throw",tn)}function ft(tn,Sn){tn(Sn),Oe.shift(),Oe.length&&Ve(Oe[0][0],Oe[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function ve(ie){var ce="function"==typeof Symbol&&Symbol.iterator,ue=ce&&ie[ce],se=0;if(ue)return ue.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),ue={},se("next"),se("throw"),se("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function se(Oe){ue[Oe]=ie[Oe]&&function(Qe){return new Promise(function(Ve,en){!function fe(Oe,Qe,Ve,en){Promise.resolve(en).then(function(ht){Oe({value:ht,done:Ve})},Qe)}(Ve,en,(Qe=ie[Oe](Qe)).done,Qe.value)})}}}k.d(Ce,{FC:()=>de,KL:()=>he,_T:()=>te,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},it=>{it(it.s=8983)}]);